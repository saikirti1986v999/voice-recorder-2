/*
 jQuery JavaScript Library v1.8.3
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright 2012 jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 Sizzle CSS Selector Engine
 Copyright 2012 jQuery Foundation and other contributors
 Released under the MIT license
 http://sizzlejs.com/
*/
(function(a,c){function b(w){var z=Eb[w]={};A.each(w.split(na),function(D,I){z[I]=!0});return z}function h(w,z,D){if(D===c&&1===w.nodeType)if(D="data-"+z.replace(Hc,"-$1").toLowerCase(),D=w.getAttribute(D),"string"===typeof D){try{D="true"===D?!0:"false"===D?!1:"null"===D?null:+D+""===D?+D:Ic.test(D)?A.parseJSON(D):D}catch(I){}A.data(w,z,D)}else D=c;return D}function k(w){for(var z in w)if(("data"!==z||!A.isEmptyObject(w[z]))&&"toJSON"!==z)return!1;return!0}function l(){return!1}function m(){return!0}
function n(w){return!w||!w.parentNode||11===w.parentNode.nodeType}function p(w,z){do w=w[z];while(w&&1!==w.nodeType);return w}function r(w,z,D){z=z||0;if(A.isFunction(z))return A.grep(w,function(N,L){return!!z.call(N,L,N)===D});if(z.nodeType)return A.grep(w,function(N,L){return N===z===D});if("string"===typeof z){var I=A.grep(w,function(N){return 1===N.nodeType});if(Jc.test(z))return A.filter(z,I,!D);z=A.filter(z,I)}return A.grep(w,function(N,L){return 0<=A.inArray(N,z)===D})}function q(w){var z=
hc.split("|");w=w.createDocumentFragment();if(w.createElement)for(;z.length;)w.createElement(z.pop());return w}function u(w,z){return w.getElementsByTagName(z)[0]||w.appendChild(w.ownerDocument.createElement(z))}function v(w,z){if(1===z.nodeType&&A.hasData(w)){var D,I;var N=A._data(w);w=A._data(z,N);var L=N.events;if(L)for(D in delete w.handle,w.events={},L)for(N=0,I=L[D].length;N<I;N++)A.event.add(z,D,L[D][N]);w.data&&(w.data=A.extend({},w.data))}}function x(w,z){if(1===z.nodeType){z.clearAttributes&&
z.clearAttributes();z.mergeAttributes&&z.mergeAttributes(w);var D=z.nodeName.toLowerCase();"object"===D?(z.parentNode&&(z.outerHTML=w.outerHTML),A.support.html5Clone&&w.innerHTML&&!A.trim(z.innerHTML)&&(z.innerHTML=w.innerHTML)):"input"===D&&ic.test(w.type)?(z.defaultChecked=z.checked=w.checked,z.value!==w.value&&(z.value=w.value)):"option"===D?z.selected=w.defaultSelected:"input"===D||"textarea"===D?z.defaultValue=w.defaultValue:"script"===D&&z.text!==w.text&&(z.text=w.text);z.removeAttribute(A.expando)}}
function y(w){return"undefined"!==typeof w.getElementsByTagName?w.getElementsByTagName("*"):"undefined"!==typeof w.querySelectorAll?w.querySelectorAll("*"):[]}function B(w){ic.test(w.type)&&(w.defaultChecked=w.checked)}function C(w,z){if(z in w)return z;for(var D=z.charAt(0).toUpperCase()+z.slice(1),I=z,N=jc.length;N--;)if(z=jc[N]+D,z in w)return z;return I}function H(w,z){w=z||w;return"none"===A.css(w,"display")||!A.contains(w.ownerDocument,w)}function F(w,z){for(var D,I,N=[],L=0,U=w.length;L<U;L++)D=
w[L],D.style&&(N[L]=A._data(D,"olddisplay"),z?(N[L]||"none"!==D.style.display||(D.style.display=""),""===D.style.display&&H(D)&&(N[L]=A._data(D,"olddisplay",J(D.nodeName)))):(I=kb(D,"display"),N[L]||"none"===I||A._data(D,"olddisplay",I)));for(L=0;L<U;L++)D=w[L],!D.style||z&&"none"!==D.style.display&&""!==D.style.display||(D.style.display=z?N[L]||"":"none");return w}function E(w,z,D){return(w=Kc.exec(z))?Math.max(0,w[1]-(D||0))+(w[2]||"px"):z}function G(w,z,D,I){z=D===(I?"border":"content")?4:"width"===
z?1:0;for(var N=0;4>z;z+=2)"margin"===D&&(N+=A.css(w,D+Ab[z],!0)),I?("content"===D&&(N-=parseFloat(kb(w,"padding"+Ab[z]))||0),"margin"!==D&&(N-=parseFloat(kb(w,"border"+Ab[z]+"Width"))||0)):(N+=parseFloat(kb(w,"padding"+Ab[z]))||0,"padding"!==D&&(N+=parseFloat(kb(w,"border"+Ab[z]+"Width"))||0));return N}function K(w,z,D){var I="width"===z?w.offsetWidth:w.offsetHeight,N=!0,L=A.support.boxSizing&&"border-box"===A.css(w,"boxSizing");if(0>=I||null==I){I=kb(w,z);if(0>I||null==I)I=w.style[z];if(Rb.test(I))return I;
N=L&&(A.support.boxSizingReliable||I===w.style[z]);I=parseFloat(I)||0}return I+G(w,z,D||(L?"border":"content"),N)+"px"}function J(w){if(Xb[w])return Xb[w];var z=A("<"+w+">").appendTo(X.body),D=z.css("display");z.remove();if("none"===D||""===D)Fb=X.body.appendChild(Fb||A.extend(X.createElement("iframe"),{frameBorder:0,width:0,height:0})),Gb&&Fb.createElement||(Gb=(Fb.contentWindow||Fb.contentDocument).document,Gb.write("<!doctype html><html><body>"),Gb.close()),z=Gb.body.appendChild(Gb.createElement(w)),
D=kb(z,"display"),X.body.removeChild(Fb);return Xb[w]=D}function O(w,z,D,I){var N;if(A.isArray(z))A.each(z,function(L,U){D||Lc.test(w)?I(w,U):O(w+"["+("object"===typeof U?L:"")+"]",U,D,I)});else if(D||"object"!==A.type(z))I(w,z);else for(N in z)O(w+"["+N+"]",z[N],D,I)}function T(w){return function(z,D){"string"!==typeof z&&(D=z,z="*");var I=z.toLowerCase().split(na),N=0,L=I.length;if(A.isFunction(D))for(;N<L;N++){var U=I[N];(z=/^\+/.test(U))&&(U=U.substr(1)||"*");U=w[U]=w[U]||[];U[z?"unshift":"push"](D)}}}
function Q(w,z,D,I,N,L){N=N||z.dataTypes[0];L=L||{};L[N]=!0;N=w[N];for(var U=0,aa=N?N.length:0,V=w===Yb;U<aa&&(V||!pa);U++){var pa=N[U](z,D,I);"string"===typeof pa&&(!V||L[pa]?pa=c:(z.dataTypes.unshift(pa),pa=Q(w,z,D,I,pa,L)))}!V&&pa||L["*"]||(pa=Q(w,z,D,I,"*",L));return pa}function M(w,z){var D,I,N=A.ajaxSettings.flatOptions||{};for(D in z)z[D]!==c&&((N[D]?w:I||={})[D]=z[D]);I&&A.extend(!0,w,I)}function W(){try{return new a.XMLHttpRequest}catch(w){}}function da(){setTimeout(function(){Hb=c},0);return Hb=
A.now()}function ma(w,z){A.each(z,function(D,I){for(var N=(Ob[D]||[]).concat(Ob["*"]),L=0,U=N.length;L<U&&!N[L].call(w,D,I);L++);})}function fa(w,z,D){var I=0,N=Sb.length,L=A.Deferred().always(function(){delete U.elem}),U=function(){var V=Hb||da();V=Math.max(0,aa.startTime+aa.duration-V);for(var pa=1-(V/aa.duration||0),ua=0,za=aa.tweens.length;ua<za;ua++)aa.tweens[ua].run(pa);L.notifyWith(w,[aa,pa,V]);if(1>pa&&za)return V;L.resolveWith(w,[aa]);return!1},aa=L.promise({elem:w,props:A.extend({},z),opts:A.extend(!0,
{specialEasing:{}},D),originalProperties:z,originalOptions:D,startTime:Hb||da(),duration:D.duration,tweens:[],createTween:function(V,pa,ua){V=A.Tween(w,aa.opts,V,pa,aa.opts.specialEasing[V]||aa.opts.easing);aa.tweens.push(V);return V},stop:function(V){for(var pa=0,ua=V?aa.tweens.length:0;pa<ua;pa++)aa.tweens[pa].run(1);V?L.resolveWith(w,[aa,V]):L.rejectWith(w,[aa,V]);return this}});D=aa.props;for(xa(D,aa.opts.specialEasing);I<N;I++)if(z=Sb[I].call(aa,w,D,aa.opts))return z;ma(aa,D);A.isFunction(aa.opts.start)&&
aa.opts.start.call(w,aa);A.fx.timer(A.extend(U,{anim:aa,queue:aa.opts.queue,elem:w}));return aa.progress(aa.opts.progress).done(aa.opts.done,aa.opts.complete).fail(aa.opts.fail).always(aa.opts.always)}function xa(w,z){var D,I;for(D in w){var N=A.camelCase(D);var L=z[N];var U=w[D];A.isArray(U)&&(L=U[1],U=w[D]=U[0]);D!==N&&(w[N]=U,delete w[D]);if((I=A.cssHooks[N])&&"expand"in I)for(D in U=I.expand(U),delete w[N],U)D in w||(w[D]=U[D],z[D]=L);else z[N]=L}}function Ea(w,z,D,I,N){return new Ea.prototype.init(w,
z,D,I,N)}function Da(w,z){var D={height:w},I=0;for(z=z?1:0;4>I;I+=2-z){var N=Ab[I];D["margin"+N]=D["padding"+N]=w}z&&(D.opacity=D.width=w);return D}function Fa(w){return A.isWindow(w)?w:9===w.nodeType?w.defaultView||w.parentWindow:!1}var ta,X=a.document,ja=a.location,P=a.navigator,ca=a.jQuery,ea=a.$,sa=Array.prototype.push,qa=Array.prototype.slice,R=Array.prototype.indexOf,Z=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,ha=String.prototype.trim,A=function(w,z){return new A.fn.init(w,
z,Tb)},va=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ra=/\S/,na=/\s+/,wa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Oa=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ia=/^[\],:{}\s]*$/,la=/(?:^|:|,)(?:\s*\[)+/g,oa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Ga=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ka=/^-ms-/,Qa=/-([\da-z])/gi,db=function(w,z){return(z+"").toUpperCase()},Ya=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",Ya,
!1),A.ready()):"complete"===X.readyState&&(X.detachEvent("onreadystatechange",Ya),A.ready())},pb={};A.fn=A.prototype={constructor:A,init:function(w,z,D){if(!w)return this;if(w.nodeType)return this.context=this[0]=w,this.length=1,this;if("string"===typeof w){var I="<"===w.charAt(0)&&">"===w.charAt(w.length-1)&&3<=w.length?[null,w,null]:Oa.exec(w);if(!I||!I[1]&&z)return!z||z.jquery?(z||D).find(w):this.constructor(z).find(w);if(I[1])return w=(z=z instanceof A?z[0]:z)&&z.nodeType?z.ownerDocument||z:X,
w=A.parseHTML(I[1],w,!0),Pa.test(I[1])&&A.isPlainObject(z)&&this.attr.call(w,z,!0),A.merge(this,w);if((z=X.getElementById(I[2]))&&z.parentNode){if(z.id!==I[2])return D.find(w);this.length=1;this[0]=z}this.context=X;this.selector=w;return this}if(A.isFunction(w))return D.ready(w);w.selector!==c&&(this.selector=w.selector,this.context=w.context);return A.makeArray(w,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return qa.call(this)},get:function(w){return null==
w?this.toArray():0>w?this[this.length+w]:this[w]},pushStack:function(w,z,D){w=A.merge(this.constructor(),w);w.prevObject=this;w.context=this.context;"find"===z?w.selector=this.selector+(this.selector?" ":"")+D:z&&(w.selector=this.selector+"."+z+"("+D+")");return w},each:function(w,z){return A.each(this,w,z)},ready:function(w){A.ready.promise().done(w);return this},eq:function(w){w=+w;return-1===w?this.slice(w):this.slice(w,w+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(qa.apply(this,arguments),"slice",qa.call(arguments).join(","))},map:function(w){return this.pushStack(A.map(this,function(z,D){return w.call(z,D,z)}))},end:function(){return this.prevObject||this.constructor(null)},push:sa,sort:[].sort,splice:[].splice};A.fn.init.prototype=A.fn;A.extend=A.fn.extend=function(){var w,z,D,I=arguments[0]||{},N=1,L=arguments.length,U=!1;"boolean"===typeof I&&(U=I,I=arguments[1]||{},N=2);"object"===typeof I||A.isFunction(I)||(I={});
L===N&&(I=this,--N);for(;N<L;N++)if(null!=(w=arguments[N]))for(z in w){var aa=I[z];var V=w[z];I!==V&&(U&&V&&(A.isPlainObject(V)||(D=A.isArray(V)))?(D?(D=!1,aa=aa&&A.isArray(aa)?aa:[]):aa=aa&&A.isPlainObject(aa)?aa:{},I[z]=A.extend(U,aa,V)):V!==c&&(I[z]=V))}return I};A.extend({noConflict:function(w){a.$===A&&(a.$=ea);w&&a.jQuery===A&&(a.jQuery=ca);return A},isReady:!1,readyWait:1,holdReady:function(w){w?A.readyWait++:A.ready(!0)},ready:function(w){if(!0===w?!--A.readyWait:!A.isReady){if(!X.body)return setTimeout(A.ready,
1);A.isReady=!0;!0!==w&&0<--A.readyWait||(ta.resolveWith(X,[A]),A.fn.trigger&&A(X).trigger("ready").off("ready"))}},isFunction:function(w){return"function"===A.type(w)},isArray:Array.isArray||function(w){return"array"===A.type(w)},isWindow:function(w){return null!=w&&w==w.window},isNumeric:function(w){return!isNaN(parseFloat(w))&&isFinite(w)},type:function(w){return null==w?String(w):pb[Z.call(w)]||"object"},isPlainObject:function(w){if(!w||"object"!==A.type(w)||w.nodeType||A.isWindow(w))return!1;
try{if(w.constructor&&!Y.call(w,"constructor")&&!Y.call(w.constructor.prototype,"isPrototypeOf"))return!1}catch(D){return!1}for(var z in w);return z===c||Y.call(w,z)},isEmptyObject:function(w){for(var z in w)return!1;return!0},error:function(w){throw Error(w);},parseHTML:function(w,z,D){var I;if(!w||"string"!==typeof w)return null;"boolean"===typeof z&&(D=z,z=0);z=z||X;if(I=Pa.exec(w))return[z.createElement(I[1])];I=A.buildFragment([w],z,D?null:[]);return A.merge([],(I.cacheable?A.clone(I.fragment):
I.fragment).childNodes)},parseJSON:function(w){if(!w||"string"!==typeof w)return null;w=A.trim(w);if(a.JSON&&a.JSON.parse)return a.JSON.parse(w);if(ia.test(w.replace(oa,"@").replace(Ga,"]").replace(la,"")))return(new Function("return "+w))();A.error("Invalid JSON: "+w)},parseXML:function(w){if(!w||"string"!==typeof w)return null;try{if(a.DOMParser){var z=new DOMParser;var D=z.parseFromString(w,"text/xml")}else D=new ActiveXObject("Microsoft.XMLDOM"),D.async="false",D.loadXML(w)}catch(I){D=c}D&&D.documentElement&&
!D.getElementsByTagName("parsererror").length||A.error("Invalid XML: "+w);return D},noop:function(){},globalEval:function(w){w&&ra.test(w)&&(a.execScript||function(z){a.eval.call(a,z)})(w)},camelCase:function(w){try{return w.replace(Ka,"ms-").replace(Qa,db)}catch(z){}},nodeName:function(w,z){return w.nodeName&&w.nodeName.toLowerCase()===z.toLowerCase()},each:function(w,z,D){var I,N=0,L=w.length,U=L===c||A.isFunction(w);if(D)if(U)for(I in w){if(!1===z.apply(w[I],D))break}else for(;N<L&&!1!==z.apply(w[N++],
D););else if(U)for(I in w){if(!1===z.call(w[I],I,w[I]))break}else for(;N<L&&!1!==z.call(w[N],N,w[N++]););return w},trim:ha&&!ha.call("\ufeff\u00a0")?function(w){return null==w?"":ha.call(w)}:function(w){return null==w?"":(w+"").replace(wa,"")},makeArray:function(w,z){var D=z||[];null!=w&&(z=A.type(w),null==w.length||"string"===z||"function"===z||"regexp"===z||A.isWindow(w)?sa.call(D,w):A.merge(D,w));return D},inArray:function(w,z,D){if(z){if(R)return R.call(z,w,D);var I=z.length;for(D=D?0>D?Math.max(0,
I+D):D:0;D<I;D++)if(D in z&&z[D]===w)return D}return-1},merge:function(w,z){var D=z.length,I=w.length,N=0;if("number"===typeof D)for(;N<D;N++)w[I++]=z[N];else for(;z[N]!==c;)w[I++]=z[N++];w.length=I;return w},grep:function(w,z,D){var I=[],N=0,L=w.length;for(D=!!D;N<L;N++){var U=!!z(w[N],N);D!==U&&I.push(w[N])}return I},map:function(w,z,D){var I,N=[],L=0,U=w.length;if(w instanceof A||U!==c&&"number"===typeof U&&(0<U&&w[0]&&w[U-1]||0===U||A.isArray(w)))for(;L<U;L++){var aa=z(w[L],L,D);null!=aa&&(N[N.length]=
aa)}else for(I in w)aa=z(w[I],I,D),null!=aa&&(N[N.length]=aa);return N.concat.apply([],N)},guid:1,proxy:function(w,z){if("string"===typeof z){var D=w[z];z=w;w=D}if(!A.isFunction(w))return c;var I=qa.call(arguments,2);D=function(){return w.apply(z,I.concat(qa.call(arguments)))};D.guid=w.guid=w.guid||A.guid++;return D},access:function(w,z,D,I,N,L,U){var aa=null==D,V=0,pa=w.length;if(D&&"object"===typeof D){for(V in D)A.access(w,z,V,D[V],1,L,I);N=1}else if(I!==c){var ua=U===c&&A.isFunction(I);aa&&(ua?
(ua=z,z=function(za,Ia,Na){return ua.call(A(za),Na)}):(z.call(w,I),z=null));if(z)for(;V<pa;V++)z(w[V],D,ua?I.call(w[V],V,z(w[V],D)):I,U);N=1}return N?w:aa?z.call(w):pa?z(w[0],D):L},now:function(){return(new Date).getTime()}});A.ready.promise=function(w){if(!ta)if(ta=A.Deferred(),"complete"===X.readyState)setTimeout(A.ready,1);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",Ya,!1),a.addEventListener("load",A.ready,!1);else{X.attachEvent("onreadystatechange",Ya);a.attachEvent("onload",
A.ready);var z=!1;try{z=null==a.frameElement&&X.documentElement}catch(D){}z&&z.doScroll&&function I(){if(!A.isReady){try{z.doScroll("left")}catch(N){return setTimeout(I,50)}A.ready()}}()}return ta.promise(w)};A.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(w,z){pb["[object "+z+"]"]=z.toLowerCase()});var Tb=A(X);var Eb={};A.Callbacks=function(w){w="string"===typeof w?Eb[w]||b(w):A.extend({},w);var z,D,I,N,L,U,aa=[],V=!w.once&&[],pa=function(za){z=w.memory&&za;D=
!0;U=N||0;N=0;L=aa.length;for(I=!0;aa&&U<L;U++)if(!1===aa[U].apply(za[0],za[1])&&w.stopOnFalse){z=!1;break}I=!1;aa&&(V?V.length&&pa(V.shift()):z?aa=[]:ua.disable())},ua={add:function(){if(aa){var za=aa.length;(function bb(Na){A.each(Na,function(hb,Za){hb=A.type(Za);"function"===hb?w.unique&&ua.has(Za)||aa.push(Za):Za&&Za.length&&"string"!==hb&&bb(Za)})})(arguments);I?L=aa.length:z&&(N=za,pa(z))}return this},remove:function(){aa&&A.each(arguments,function(za,Ia){for(var Na;-1<(Na=A.inArray(Ia,aa,Na));)aa.splice(Na,
1),I&&(Na<=L&&L--,Na<=U&&U--)});return this},has:function(za){return-1<A.inArray(za,aa)},empty:function(){aa=[];return this},disable:function(){aa=V=z=c;return this},disabled:function(){return!aa},lock:function(){V=c;z||ua.disable();return this},locked:function(){return!V},fireWith:function(za,Ia){Ia=Ia||[];Ia=[za,Ia.slice?Ia.slice():Ia];!aa||D&&!V||(I?V.push(Ia):pa(Ia));return this},fire:function(){ua.fireWith(this,arguments);return this},fired:function(){return!!D}};return ua};A.extend({Deferred:function(w){var z=
[["resolve","done",A.Callbacks("once memory"),"resolved"],["reject","fail",A.Callbacks("once memory"),"rejected"],["notify","progress",A.Callbacks("memory")]],D="pending",I={state:function(){return D},always:function(){N.done(arguments).fail(arguments);return this},then:function(){var L=arguments;return A.Deferred(function(U){A.each(z,function(aa,V){var pa=V[0],ua=L[aa];N[V[1]](A.isFunction(ua)?function(){var za=ua.apply(this,arguments);if(za&&A.isFunction(za.promise))za.promise().done(U.resolve).fail(U.reject).progress(U.notify);
else U[pa+"With"](this===N?U:this,[za])}:U[pa])});L=null}).promise()},promise:function(L){return null!=L?A.extend(L,I):I}},N={};I.pipe=I.then;A.each(z,function(L,U){var aa=U[2],V=U[3];I[U[1]]=aa.add;V&&aa.add(function(){D=V},z[L^1][2].disable,z[2][2].lock);N[U[0]]=aa.fire;N[U[0]+"With"]=aa.fireWith});I.promise(N);w&&w.call(N,N);return N},when:function(w){var z=0,D=qa.call(arguments),I=D.length,N=1!==I||w&&A.isFunction(w.promise)?I:0,L=1===N?w:A.Deferred(),U=function(ua,za,Ia){return function(Na){za[ua]=
this;Ia[ua]=1<arguments.length?qa.call(arguments):Na;Ia===V?L.notifyWith(za,Ia):--N||L.resolveWith(za,Ia)}},aa;if(1<I){var V=Array(I);var pa=Array(I);for(aa=Array(I);z<I;z++)D[z]&&A.isFunction(D[z].promise)?D[z].promise().done(U(z,aa,D)).fail(L.reject).progress(U(z,pa,V)):--N}N||L.resolveWith(aa,D);return L.promise()}});A.support=function(){var w,z=X.createElement("div");z.setAttribute("className","t");z.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var D=z.getElementsByTagName("*");
var I=z.getElementsByTagName("a")[0];if(!D||!I||!D.length)return{};var N=X.createElement("select");var L=N.appendChild(X.createElement("option"));D=z.getElementsByTagName("input")[0];I.style.cssText="top:1px;float:left;opacity:.5";var U={leadingWhitespace:3===z.firstChild.nodeType,tbody:!z.getElementsByTagName("tbody").length,htmlSerialize:!!z.getElementsByTagName("link").length,style:/top/.test(I.getAttribute("style")),hrefNormalized:"/a"===I.getAttribute("href"),opacity:/^0.5/.test(I.style.opacity),
cssFloat:!!I.style.cssFloat,checkOn:"on"===D.value,optSelected:L.selected,getSetAttribute:"t"!==z.className,enctype:!!X.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===X.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};D.checked=!0;U.noCloneChecked=D.cloneNode(!0).checked;
N.disabled=!0;U.optDisabled=!L.disabled;try{delete z.test}catch(V){U.deleteExpando=!1}!z.addEventListener&&z.attachEvent&&z.fireEvent&&(z.attachEvent("onclick",I=function(){U.noCloneEvent=!1}),z.cloneNode(!0).fireEvent("onclick"),z.detachEvent("onclick",I));D=X.createElement("input");D.value="t";D.setAttribute("type","radio");U.radioValue="t"===D.value;D.setAttribute("checked","checked");D.setAttribute("name","t");z.appendChild(D);I=X.createDocumentFragment();I.appendChild(z.lastChild);U.checkClone=
I.cloneNode(!0).cloneNode(!0).lastChild.checked;U.appendChecked=D.checked;I.removeChild(D);I.appendChild(z);if(z.attachEvent)for(w in{submit:!0,change:!0,focusin:!0}){D="on"+w;var aa=D in z;aa||(z.setAttribute(D,"return;"),aa="function"===typeof z[D]);U[w+"Bubbles"]=aa}A(function(){var V=X.getElementsByTagName("body")[0];if(V){var pa=X.createElement("div");pa.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";V.insertBefore(pa,V.firstChild);var ua=X.createElement("div");
pa.appendChild(ua);ua.innerHTML="<table><tr><td></td><td>t</td></tr></table>";var za=ua.getElementsByTagName("td");za[0].style.cssText="padding:0;margin:0;border:0;display:none";aa=0===za[0].offsetHeight;za[0].style.display="";za[1].style.display="none";U.reliableHiddenOffsets=aa&&0===za[0].offsetHeight;ua.innerHTML="";ua.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
U.boxSizing=4===ua.offsetWidth;U.doesNotIncludeMarginInBodyOffset=1!==V.offsetTop;a.getComputedStyle&&(U.pixelPosition="1%"!==(a.getComputedStyle(ua,null)||{}).top,U.boxSizingReliable="4px"===(a.getComputedStyle(ua,null)||{width:"4px"}).width,za=X.createElement("div"),za.style.cssText=ua.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",za.style.marginRight=za.style.width="0",ua.style.width="1px",ua.appendChild(za),U.reliableMarginRight=!parseFloat((a.getComputedStyle(za,
null)||{}).marginRight));"undefined"!==typeof ua.style.zoom&&(ua.innerHTML="",ua.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",U.inlineBlockNeedsLayout=3===ua.offsetWidth,ua.style.display="block",ua.style.overflow="visible",ua.innerHTML="<div></div>",ua.firstChild.style.width="5px",U.shrinkWrapBlocks=3!==ua.offsetWidth,pa.style.zoom=1);V.removeChild(pa)}});I.removeChild(z);D=I=N=L=D=I=z=null;return U}();var Ic=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
Hc=/([A-Z])/g;A.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(A.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(w){w=w.nodeType?A.cache[w[A.expando]]:w[A.expando];return!!w&&!k(w)},data:function(w,z,D,I){if(A.acceptData(w)){var N=A.expando,L="string"===typeof z,U=w.nodeType,aa=U?A.cache:w,V=U?w[N]:w[N]&&N;if(V&&aa[V]&&(I||aa[V].data)||!L||D!==c){V||(U?w[N]=V=A.deletedIds.pop()||A.guid++:V=N);aa[V]||
(aa[V]={},U||(aa[V].toJSON=A.noop));if("object"===typeof z||"function"===typeof z)I?aa[V]=A.extend(aa[V],z):aa[V].data=A.extend(aa[V].data,z);w=aa[V];I||(w.data||(w.data={}),w=w.data);D!==c&&(w[A.camelCase(z)]=D);L?(D=w[z],null==D&&(D=w[A.camelCase(z)])):D=w;return D}}},removeData:function(w,z,D){if(A.acceptData(w)){var I,N,L=w.nodeType,U=L?A.cache:w,aa=L?w[A.expando]:A.expando;if(U[aa]){if(z&&(I=D?U[aa]:U[aa].data)){A.isArray(z)||(z in I?z=[z]:(z=A.camelCase(z),z=z in I?[z]:z.split(" ")));var V=
0;for(N=z.length;V<N;V++)delete I[z[V]];if(!(D?k:A.isEmptyObject)(I))return}if(!D&&(delete U[aa].data,!k(U[aa])))return;L?A.cleanData([w],!0):A.support.deleteExpando||U!=U.window?delete U[aa]:U[aa]=null}}},_data:function(w,z,D){return A.data(w,z,D,!0)},acceptData:function(w){var z=w.nodeName&&A.noData[w.nodeName.toLowerCase()];return!z||!0!==z&&w.getAttribute("classid")===z}});A.fn.extend({data:function(w,z){var D,I=this[0],N=0,L=null;if(w===c){if(this.length&&(L=A.data(I),1===I.nodeType&&!A._data(I,
"parsedAttrs"))){var U=I.attributes;for(D=U.length;N<D;N++){var aa=U[N].name;aa.indexOf("data-")||(aa=A.camelCase(aa.substring(5)),h(I,aa,L[aa]))}A._data(I,"parsedAttrs",!0)}return L}if("object"===typeof w)return this.each(function(){A.data(this,w)});var V=w.split(".",2);V[1]=V[1]?"."+V[1]:"";var pa=V[1]+"!";return A.access(this,function(ua){if(ua===c)return L=this.triggerHandler("getData"+pa,[V[0]]),L===c&&I&&(L=A.data(I,w),L=h(I,w,L)),L===c&&V[1]?this.data(V[0]):L;V[1]=ua;this.each(function(){var za=
A(this);za.triggerHandler("setData"+pa,V);A.data(this,w,ua);za.triggerHandler("changeData"+pa,V)})},null,z,1<arguments.length,null,!1)},removeData:function(w){return this.each(function(){A.removeData(this,w)})}});A.extend({queue:function(w,z,D){if(w){z=(z||"fx")+"queue";var I=A._data(w,z);D&&(!I||A.isArray(D)?I=A._data(w,z,A.makeArray(D)):I.push(D));return I||[]}},dequeue:function(w,z){z=z||"fx";var D=A.queue(w,z),I=D.length,N=D.shift(),L=A._queueHooks(w,z),U=function(){A.dequeue(w,z)};"inprogress"===
N&&(N=D.shift(),I--);N&&("fx"===z&&D.unshift("inprogress"),delete L.stop,N.call(w,U,L));!I&&L&&L.empty.fire()},_queueHooks:function(w,z){var D=z+"queueHooks";return A._data(w,D)||A._data(w,D,{empty:A.Callbacks("once memory").add(function(){A.removeData(w,z+"queue",!0);A.removeData(w,D,!0)})})}});A.fn.extend({queue:function(w,z){var D=2;"string"!==typeof w&&(z=w,w="fx",D--);return arguments.length<D?A.queue(this[0],w):z===c?this:this.each(function(){var I=A.queue(this,w,z);A._queueHooks(this,w);"fx"===
w&&"inprogress"!==I[0]&&A.dequeue(this,w)})},dequeue:function(w){return this.each(function(){A.dequeue(this,w)})},delay:function(w,z){w=A.fx?A.fx.speeds[w]||w:w;return this.queue(z||"fx",function(D,I){var N=setTimeout(D,w);I.stop=function(){clearTimeout(N)}})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,z){var D,I=1,N=A.Deferred(),L=this,U=this.length,aa=function(){--I||N.resolveWith(L,[L])};"string"!==typeof w&&(z=w,w=c);for(w=w||"fx";U--;)(D=A._data(L[U],w+"queueHooks"))&&
D.empty&&(I++,D.empty.add(aa));aa();return N.promise(z)}});var kc=/[\t\r\n]/g,Mc=/\r/g,Nc=/^(?:button|input)$/i,Oc=/^(?:button|input|object|select|textarea)$/i,Pc=/^a(?:rea|)$/i,lc=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,mc=A.support.getSetAttribute;A.fn.extend({attr:function(w,z){return A.access(this,A.attr,w,z,1<arguments.length)},removeAttr:function(w){return this.each(function(){A.removeAttr(this,w)})},prop:function(w,
z){return A.access(this,A.prop,w,z,1<arguments.length)},removeProp:function(w){w=A.propFix[w]||w;return this.each(function(){try{this[w]=c,delete this[w]}catch(z){}})},addClass:function(w){var z,D;if(A.isFunction(w))return this.each(function(V){A(this).addClass(w.call(this,V,this.className))});if(w&&"string"===typeof w){var I=w.split(na);var N=0;for(z=this.length;N<z;N++){var L=this[N];if(1===L.nodeType)if(L.className||1!==I.length){var U=" "+L.className+" ";var aa=0;for(D=I.length;aa<D;aa++)0>U.indexOf(" "+
I[aa]+" ")&&(U+=I[aa]+" ");L.className=A.trim(U)}else L.className=w}}return this},removeClass:function(w){var z,D;if(A.isFunction(w))return this.each(function(V){A(this).removeClass(w.call(this,V,this.className))});if(w&&"string"===typeof w||w===c){var I=(w||"").split(na);var N=0;for(D=this.length;N<D;N++){var L=this[N];if(1===L.nodeType&&L.className){var U=(" "+L.className+" ").replace(kc," ");var aa=0;for(z=I.length;aa<z;aa++)for(;0<=U.indexOf(" "+I[aa]+" ");)U=U.replace(" "+I[aa]+" "," ");L.className=
w?A.trim(U):""}}}return this},toggleClass:function(w,z){var D=typeof w,I="boolean"===typeof z;return A.isFunction(w)?this.each(function(N){A(this).toggleClass(w.call(this,N,this.className,z),z)}):this.each(function(){if("string"===D)for(var N,L=0,U=A(this),aa=z,V=w.split(na);N=V[L++];)aa=I?aa:!U.hasClass(N),U[aa?"addClass":"removeClass"](N);else if("undefined"===D||"boolean"===D)this.className&&A._data(this,"__className__",this.className),this.className=this.className||!1===w?"":A._data(this,"__className__")||
""})},hasClass:function(w){w=" "+w+" ";for(var z=0,D=this.length;z<D;z++)if(1===this[z].nodeType&&0<=(" "+this[z].className+" ").replace(kc," ").indexOf(w))return!0;return!1},val:function(w){var z,D,I=this[0];if(arguments.length){var N=A.isFunction(w);return this.each(function(L){var U=A(this);1===this.nodeType&&(L=N?w.call(this,L,U.val()):w,null==L?L="":"number"===typeof L?L+="":A.isArray(L)&&(L=A.map(L,function(aa){return null==aa?"":aa+""})),z=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()],
z&&"set"in z&&z.set(this,L,"value")!==c||(this.value=L))})}if(I){if((z=A.valHooks[I.type]||A.valHooks[I.nodeName.toLowerCase()])&&"get"in z&&(D=z.get(I,"value"))!==c)return D;D=I.value;return"string"===typeof D?D.replace(Mc,""):null==D?"":D}}});A.extend({valHooks:{option:{get:function(w){var z=w.attributes.value;return!z||z.specified?w.value:w.text}},select:{get:function(w){for(var z,D=w.options,I=w.selectedIndex,N=(w="select-one"===w.type||0>I)?null:[],L=w?I+1:D.length,U=0>I?L:w?I:0;U<L;U++)if(z=
D[U],!(!z.selected&&U!==I||(A.support.optDisabled?z.disabled:null!==z.getAttribute("disabled"))||z.parentNode.disabled&&A.nodeName(z.parentNode,"optgroup"))){z=A(z).val();if(w)return z;N.push(z)}return N},set:function(w,z){var D=A.makeArray(z);A(w).find("option").each(function(){this.selected=0<=A.inArray(A(this).val(),D)});D.length||(w.selectedIndex=-1);return D}}},attrFn:{},attr:function(w,z,D,I){var N,L=w.nodeType;if(w&&3!==L&&8!==L&&2!==L){if(I&&A.isFunction(A.fn[z]))return A(w)[z](D);if("undefined"===
typeof w.getAttribute)return A.prop(w,z,D);if(I=1!==L||!A.isXMLDoc(w)){z=z.toLowerCase();var U=A.attrHooks[z]||(lc.test(z)?Qc:Bb)}if(D!==c)if(null===D)A.removeAttr(w,z);else{if(U&&"set"in U&&I&&(N=U.set(w,D,z))!==c)return N;w.setAttribute(z,D+"");return D}else{if(U&&"get"in U&&I&&null!==(N=U.get(w,z)))return N;N=w.getAttribute(z);return null===N?c:N}}},removeAttr:function(w,z){var D,I,N,L=0;if(z&&1===w.nodeType)for(D=z.split(na);L<D.length;L++)if(I=D[L])z=A.propFix[I]||I,(N=lc.test(I))||A.attr(w,
I,""),w.removeAttribute(mc?I:z),N&&z in w&&(w[z]=!1)},attrHooks:{type:{set:function(w,z){if(Nc.test(w.nodeName)&&w.parentNode)A.error("type property can't be changed");else if(!A.support.radioValue&&"radio"===z&&A.nodeName(w,"input")){var D=w.value;w.setAttribute("type",z);D&&(w.value=D);return z}}},value:{get:function(w,z){return Bb&&A.nodeName(w,"button")?Bb.get(w,z):z in w?w.value:null},set:function(w,z,D){if(Bb&&A.nodeName(w,"button"))return Bb.set(w,z,D);w.value=z}}},propFix:{tabindex:"tabIndex",
readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(w,z,D){var I,N=w.nodeType;if(w&&3!==N&&8!==N&&2!==N){if(1!==N||!A.isXMLDoc(w)){z=A.propFix[z]||z;var L=A.propHooks[z]}return D!==c?L&&"set"in L&&(I=L.set(w,D,z))!==c?I:w[z]=D:L&&"get"in L&&null!==(I=L.get(w,z))?I:w[z]}},propHooks:{tabIndex:{get:function(w){var z=
w.getAttributeNode("tabindex");return z&&z.specified?parseInt(z.value,10):Oc.test(w.nodeName)||Pc.test(w.nodeName)&&w.href?0:c}}}});var Qc={get:function(w,z){var D,I=A.prop(w,z);return!0===I||"boolean"!==typeof I&&(D=w.getAttributeNode(z))&&!1!==D.nodeValue?z.toLowerCase():c},set:function(w,z,D){!1===z?A.removeAttr(w,D):(z=A.propFix[D]||D,z in w&&(w[z]=!0),w.setAttribute(D,D.toLowerCase()));return D}};if(!mc){var Rc={name:!0,id:!0,coords:!0};var Bb=A.valHooks.button={get:function(w,z){return(w=w.getAttributeNode(z))&&
(Rc[z]?""!==w.value:w.specified)?w.value:c},set:function(w,z,D){var I=w.getAttributeNode(D);I||(I=X.createAttribute(D),w.setAttributeNode(I));return I.value=z+""}};A.each(["width","height"],function(w,z){A.attrHooks[z]=A.extend(A.attrHooks[z],{set:function(D,I){if(""===I)return D.setAttribute(z,"auto"),I}})});A.attrHooks.contenteditable={get:Bb.get,set:function(w,z,D){""===z&&(z="false");Bb.set(w,z,D)}}}A.support.hrefNormalized||A.each(["href","src","width","height"],function(w,z){A.attrHooks[z]=
A.extend(A.attrHooks[z],{get:function(D){D=D.getAttribute(z,2);return null===D?c:D}})});A.support.style||(A.attrHooks.style={get:function(w){return w.style.cssText.toLowerCase()||c},set:function(w,z){return w.style.cssText=z+""}});A.support.optSelected||(A.propHooks.selected=A.extend(A.propHooks.selected,{get:function(w){if(w=w.parentNode)w.selectedIndex,w.parentNode&&w.parentNode.selectedIndex;return null}}));A.support.enctype||(A.propFix.enctype="encoding");A.support.checkOn||A.each(["radio","checkbox"],
function(){A.valHooks[this]={get:function(w){return null===w.getAttribute("value")?"on":w.value}}});A.each(["radio","checkbox"],function(){A.valHooks[this]=A.extend(A.valHooks[this],{set:function(w,z){if(A.isArray(z))return w.checked=0<=A.inArray(A(w).val(),z)}})});var Zb=/^(?:textarea|input|select)$/i,nc=/^([^\.]*|)(?:\.(.+)|)$/,Sc=/(?:^|\s)hover(\.\S+|)\b/,Tc=/^key/,Uc=/^(?:mouse|contextmenu)|click/,oc=/^(?:focusinfocus|focusoutblur)$/,pc=function(w){return A.event.special.hover?w:w.replace(Sc,
"mouseenter$1 mouseleave$1")};A.event={add:function(w,z,D,I,N){var L;if(3!==w.nodeType&&8!==w.nodeType&&z&&D&&(L=A._data(w))){if(D.handler){var U=D;D=U.handler;N=U.selector}D.guid||(D.guid=A.guid++);var aa=L.events;aa||(L.events=aa={});var V=L.handle;V||(L.handle=V=function(bb){return"undefined"===typeof A||bb&&A.event.triggered===bb.type?c:A.event.dispatch.apply(V.elem,arguments)},V.elem=w);z=A.trim(pc(z)).split(" ");for(L=0;L<z.length;L++){var pa=nc.exec(z[L])||[];var ua=pa[1];var za=(pa[2]||"").split(".").sort();
var Ia=A.event.special[ua]||{};ua=(N?Ia.delegateType:Ia.bindType)||ua;Ia=A.event.special[ua]||{};pa=A.extend({type:ua,origType:pa[1],data:I,handler:D,guid:D.guid,selector:N,needsContext:N&&A.expr.match.needsContext.test(N),namespace:za.join(".")},U);var Na=aa[ua];Na||(Na=aa[ua]=[],Na.delegateCount=0,Ia.setup&&!1!==Ia.setup.call(w,I,za,V)||(w.addEventListener?w.addEventListener(ua,V,!1):w.attachEvent&&w.attachEvent("on"+ua,V)));Ia.add&&(Ia.add.call(w,pa),pa.handler.guid||(pa.handler.guid=D.guid));
N?Na.splice(Na.delegateCount++,0,pa):Na.push(pa);A.event.global[ua]=!0}w=null}},global:{},remove:function(w,z,D,I,N){var L,U,aa,V,pa=A.hasData(w)&&A._data(w);if(pa&&(V=pa.events)){z=A.trim(pc(z||"")).split(" ");for(L=0;L<z.length;L++){var ua=nc.exec(z[L])||[];var za=U=ua[1];ua=ua[2];if(za){var Ia=A.event.special[za]||{};za=(I?Ia.delegateType:Ia.bindType)||za;var Na=V[za]||[];var bb=Na.length;ua=ua?new RegExp("(^|\\.)"+ua.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(aa=0;aa<Na.length;aa++){var hb=
Na[aa];!N&&U!==hb.origType||D&&D.guid!==hb.guid||ua&&!ua.test(hb.namespace)||I&&I!==hb.selector&&("**"!==I||!hb.selector)||(Na.splice(aa--,1),hb.selector&&Na.delegateCount--,Ia.remove&&Ia.remove.call(w,hb))}0===Na.length&&bb!==Na.length&&(Ia.teardown&&!1!==Ia.teardown.call(w,ua,pa.handle)||A.removeEvent(w,za,pa.handle),delete V[za])}else for(za in V)A.event.remove(w,za+z[L],D,I,!0)}A.isEmptyObject(V)&&(delete pa.handle,A.removeData(w,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},
trigger:function(w,z,D,I){if(!D||3!==D.nodeType&&8!==D.nodeType){var N,L=w.type||w;var U=[];if(!oc.test(L+A.event.triggered)){if(0<=L.indexOf("!")){L=L.slice(0,-1);var aa=!0}0<=L.indexOf(".")&&(U=L.split("."),L=U.shift(),U.sort());if(D&&!A.event.customEvent[L]||A.event.global[L])if(w="object"===typeof w?w[A.expando]?w:new A.Event(L,w):new A.Event(L),w.type=L,w.isTrigger=!0,w.exclusive=aa,w.namespace=U.join("."),w.namespace_re=w.namespace?new RegExp("(^|\\.)"+U.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,
U=0>L.indexOf(":")?"on"+L:"",D){w.result=c;w.target||(w.target=D);z=null!=z?A.makeArray(z):[];z.unshift(w);var V=A.event.special[L]||{};if(!V.trigger||!1!==V.trigger.apply(D,z)){var pa=[[D,V.bindType||L]];if(!I&&!V.noBubble&&!A.isWindow(D)){var ua=V.delegateType||L;aa=oc.test(ua+L)?D:D.parentNode;for(N=D;aa;aa=aa.parentNode)pa.push([aa,ua]),N=aa;N===(D.ownerDocument||X)&&pa.push([N.defaultView||N.parentWindow||a,ua])}for(N=0;N<pa.length&&!w.isPropagationStopped();N++)aa=pa[N][0],w.type=pa[N][1],(ua=
(A._data(aa,"events")||{})[w.type]&&A._data(aa,"handle"))&&ua.apply(aa,z),(ua=U&&aa[U])&&A.acceptData(aa)&&ua.apply&&!1===ua.apply(aa,z)&&w.preventDefault();w.type=L;I||w.isDefaultPrevented()||V._default&&!1!==V._default.apply(D.ownerDocument,z)||"click"===L&&A.nodeName(D,"a")||!A.acceptData(D)||!U||!D[L]||("focus"===L||"blur"===L)&&0===w.target.offsetWidth||A.isWindow(D)||((N=D[U])&&(D[U]=null),A.event.triggered=L,D[L](),A.event.triggered=c,N&&(D[U]=N));return w.result}}else for(N in D=A.cache,D)D[N]&&
D[N].events&&D[N].events[L]&&A.event.trigger(w,z,D[N].handle.elem,!0)}}},dispatch:function(w){w=A.event.fix(w||a.event);var z,D,I=(A._data(this,"events")||{})[w.type]||[],N=I.delegateCount,L=qa.call(arguments),U=!w.exclusive&&!w.namespace,aa=A.event.special[w.type]||{},V=[];L[0]=w;w.delegateTarget=this;if(!aa.preDispatch||!1!==aa.preDispatch.call(this,w)){if(N&&(!w.button||"click"!==w.type))for(D=w.target;D!=this;D=D.parentNode||this)if(!0!==D.disabled||"click"!==w.type){var pa={};var ua=[];for(z=
0;z<N;z++){var za=I[z];var Ia=za.selector;pa[Ia]===c&&(pa[Ia]=za.needsContext?0<=A(Ia,this).index(D):A.find(Ia,this,null,[D]).length);pa[Ia]&&ua.push(za)}ua.length&&V.push({elem:D,matches:ua})}I.length>N&&V.push({elem:this,matches:I.slice(N)});for(z=0;z<V.length&&!w.isPropagationStopped();z++)for(pa=V[z],w.currentTarget=pa.elem,D=0;D<pa.matches.length&&!w.isImmediatePropagationStopped();D++)if(za=pa.matches[D],U||!w.namespace&&!za.namespace||w.namespace_re&&w.namespace_re.test(za.namespace))w.data=
za.data,w.handleObj=za,za=((A.event.special[za.origType]||{}).handle||za.handler).apply(pa.elem,L),za!==c&&(w.result=za,!1===za&&(w.preventDefault(),w.stopPropagation()));aa.postDispatch&&aa.postDispatch.call(this,w);return w.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(w,z){null==
w.which&&(w.which=null!=z.charCode?z.charCode:z.keyCode);return w}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(w,z){var D=z.button,I=z.fromElement;if(null==w.pageX&&null!=z.clientX){var N=w.target.ownerDocument||X;var L=N.documentElement;N=N.body;w.pageX=z.clientX+(L&&L.scrollLeft||N&&N.scrollLeft||0)-(L&&L.clientLeft||N&&N.clientLeft||0);w.pageY=z.clientY+(L&&L.scrollTop||N&&N.scrollTop||0)-(L&&L.clientTop||
N&&N.clientTop||0)}!w.relatedTarget&&I&&(w.relatedTarget=I===w.target?z.toElement:I);w.which||D===c||(w.which=D&1?1:D&2?3:D&4?2:0);return w}},fix:function(w){if(w[A.expando])return w;var z,D=w,I=A.event.fixHooks[w.type]||{},N=I.props?this.props.concat(I.props):this.props;w=A.Event(D);for(z=N.length;z;){var L=N[--z];w[L]=D[L]}w.target||(w.target=D.srcElement||X);3===w.target.nodeType&&(w.target=w.target.parentNode);w.metaKey=!!w.metaKey;return I.filter?I.filter(w,D):w},special:{load:{noBubble:!0},
focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(w,z,D){A.isWindow(this)&&(this.onbeforeunload=D)},teardown:function(w,z){this.onbeforeunload===z&&(this.onbeforeunload=null)}}},simulate:function(w,z,D,I){w=A.extend(new A.Event,D,{type:w,isSimulated:!0,originalEvent:{}});I?A.event.trigger(w,null,z):A.event.dispatch.call(z,w);w.isDefaultPrevented()&&D.preventDefault()}};A.event.handle=A.event.dispatch;A.removeEvent=X.removeEventListener?function(w,z,D){w.removeEventListener&&
w.removeEventListener(z,D,!1)}:function(w,z,D){z="on"+z;w.detachEvent&&("undefined"===typeof w[z]&&(w[z]=null),w.detachEvent(z,D))};A.Event=function(w,z){if(!(this instanceof A.Event))return new A.Event(w,z);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||!1===w.returnValue||w.getPreventDefault&&w.getPreventDefault()?m:l):this.type=w;z&&A.extend(this,z);this.timeStamp=w&&w.timeStamp||A.now();this[A.expando]=!0};A.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
m;var w=this.originalEvent;w&&(w.preventDefault?w.preventDefault():w.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=m;var w=this.originalEvent;w&&(w.stopPropagation&&w.stopPropagation(),w.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m;this.stopPropagation()},isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l};A.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(w,z){A.event.special[w]={delegateType:z,
bindType:z,handle:function(D){var I=D.relatedTarget,N=D.handleObj;if(!I||I!==this&&!A.contains(this,I)){D.type=N.origType;var L=N.handler.apply(this,arguments);D.type=z}return L}}});A.support.submitBubbles||(A.event.special.submit={setup:function(){if(A.nodeName(this,"form"))return!1;A.event.add(this,"click._submit keypress._submit",function(w){w=w.target;(w=A.nodeName(w,"input")||A.nodeName(w,"button")?w.form:c)&&!A._data(w,"_submit_attached")&&(A.event.add(w,"submit._submit",function(z){z._submit_bubble=
!0}),A._data(w,"_submit_attached",!0))})},postDispatch:function(w){w._submit_bubble&&(delete w._submit_bubble,this.parentNode&&!w.isTrigger&&A.event.simulate("submit",this.parentNode,w,!0))},teardown:function(){if(A.nodeName(this,"form"))return!1;A.event.remove(this,"._submit")}});A.support.changeBubbles||(A.event.special.change={setup:function(){if(Zb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)A.event.add(this,"propertychange._change",function(w){"checked"===w.originalEvent.propertyName&&
(this._just_changed=!0)}),A.event.add(this,"click._change",function(w){this._just_changed&&!w.isTrigger&&(this._just_changed=!1);A.event.simulate("change",this,w,!0)});return!1}A.event.add(this,"beforeactivate._change",function(w){w=w.target;Zb.test(w.nodeName)&&!A._data(w,"_change_attached")&&(A.event.add(w,"change._change",function(z){!this.parentNode||z.isSimulated||z.isTrigger||A.event.simulate("change",this.parentNode,z,!0)}),A._data(w,"_change_attached",!0))})},handle:function(w){var z=w.target;
if(this!==z||w.isSimulated||w.isTrigger||"radio"!==z.type&&"checkbox"!==z.type)return w.handleObj.handler.apply(this,arguments)},teardown:function(){A.event.remove(this,"._change");return!Zb.test(this.nodeName)}});A.support.focusinBubbles||A.each({focus:"focusin",blur:"focusout"},function(w,z){var D=0,I=function(N){A.event.simulate(z,N.target,A.event.fix(N),!0)};A.event.special[z]={setup:function(){0===D++&&X.addEventListener(w,I,!0)},teardown:function(){0===--D&&X.removeEventListener(w,I,!0)}}});
A.fn.extend({on:function(w,z,D,I,N){var L;if("object"===typeof w){"string"!==typeof z&&(D=D||z,z=c);for(L in w)this.on(L,z,D,w[L],N);return this}null==D&&null==I?(I=z,D=z=c):null==I&&("string"===typeof z?(I=D,D=c):(I=D,D=z,z=c));if(!1===I)I=l;else if(!I)return this;if(1===N){var U=I;I=function(aa){A().off(aa);return U.apply(this,arguments)};I.guid=U.guid||(U.guid=A.guid++)}return this.each(function(){A.event.add(this,w,I,D,z)})},one:function(w,z,D,I){return this.on(w,z,D,I,1)},off:function(w,z,D){if(w&&
w.preventDefault&&w.handleObj){var I=w.handleObj;A(w.delegateTarget).off(I.namespace?I.origType+"."+I.namespace:I.origType,I.selector,I.handler);return this}if("object"===typeof w){for(I in w)this.off(I,z,w[I]);return this}if(!1===z||"function"===typeof z)D=z,z=c;!1===D&&(D=l);return this.each(function(){A.event.remove(this,w,D,z)})},bind:function(w,z,D){return this.on(w,null,z,D)},unbind:function(w,z){return this.off(w,null,z)},live:function(w,z,D){A(this.context).on(w,this.selector,z,D);return this},
die:function(w,z){A(this.context).off(w,this.selector||"**",z);return this},delegate:function(w,z,D,I){return this.on(z,w,D,I)},undelegate:function(w,z,D){return 1===arguments.length?this.off(w,"**"):this.off(z,w||"**",D)},trigger:function(w,z){return this.each(function(){A.event.trigger(w,z,this)})},triggerHandler:function(w,z){if(this[0])return A.event.trigger(w,z,this[0],!0)},toggle:function(w){var z=arguments,D=w.guid||A.guid++,I=0,N=function(L){var U=(A._data(this,"lastToggle"+w.guid)||0)%I;
A._data(this,"lastToggle"+w.guid,U+1);L.preventDefault();return z[U].apply(this,arguments)||!1};for(N.guid=D;I<z.length;)z[I++].guid=D;return this.click(N)},hover:function(w,z){return this.mouseenter(w).mouseleave(z||w)}});A.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(w,z){A.fn[z]=function(D,I){null==I&&(I=D,D=null);
return 0<arguments.length?this.on(z,null,D,I):this.trigger(z)};Tc.test(z)&&(A.event.fixHooks[z]=A.event.keyHooks);Uc.test(z)&&(A.event.fixHooks[z]=A.event.mouseHooks)});(function(w,z){function D(S,ba,ka,Ca){ka=ka||[];ba=ba||Ua;var Ba,Aa,ya,Ja=ba.nodeType;if(!S||"string"!==typeof S)return ka;if(1!==Ja&&9!==Ja)return[];var Ha=$b(ba);if(!Ha&&!Ca&&(Ba=mb.exec(S)))if(ya=Ba[1])if(9===Ja)if((Aa=ba.getElementById(ya))&&Aa.parentNode){if(Aa.id===ya)return ka.push(Aa),ka}else return ka;else{if(ba.ownerDocument&&
(Aa=ba.ownerDocument.getElementById(ya))&&Vc(ba,Aa)&&Aa.id===ya)return ka.push(Aa),ka}else{if(Ba[2])return gb.apply(ka,vb.call(ba.getElementsByTagName(S),0)),ka;if((ya=Ba[3])&&qc&&ba.getElementsByClassName)return gb.apply(ka,vb.call(ba.getElementsByClassName(ya),0)),ka}return bb(S.replace(lb,"$1"),ba,ka,Ca,Ha)}function I(S){return function(ba){return"input"===ba.nodeName.toLowerCase()&&ba.type===S}}function N(S){return function(ba){var ka=ba.nodeName.toLowerCase();return("input"===ka||"button"===
ka)&&ba.type===S}}function L(S){return cb(function(ba){ba=+ba;return cb(function(ka,Ca){for(var Ba,Aa=S([],ka.length,ba),ya=Aa.length;ya--;)ka[Ba=Aa[ya]]&&(ka[Ba]=!(Ca[Ba]=ka[Ba]))})})}function U(S,ba,ka){if(S===ba)return ka;for(S=S.nextSibling;S;){if(S===ba)return-1;S=S.nextSibling}return 1}function aa(S,ba){var ka,Ca,Ba,Aa,ya;if(Aa=qb[$a][S+" "])return ba?0:Aa.slice(0);Aa=S;var Ja=[];for(ya=Xa.preFilter;Aa;){if(!Ha||(ka=nb.exec(Aa)))ka&&(Aa=Aa.slice(ka[0].length)||Aa),Ja.push(Ca=[]);var Ha=!1;if(ka=
Ib.exec(Aa))Ca.push(Ha=new Sa(ka.shift())),Aa=Aa.slice(Ha.length),Ha.type=ka[0].replace(lb," ");for(Ba in Xa.filter)!(ka=Ub[Ba].exec(Aa))||ya[Ba]&&!(ka=ya[Ba](ka))||(Ca.push(Ha=new Sa(ka.shift())),Aa=Aa.slice(Ha.length),Ha.type=Ba,Ha.matches=ka);if(!Ha)break}return ba?Aa.length:Aa?D.error(S):qb(S,Ja).slice(0)}function V(S,ba,ka){var Ca=ba.dir,Ba=ka&&"parentNode"===ba.dir,Aa=jb++;return ba.first?function(ya,Ja,Ha){for(;ya=ya[Ca];)if(Ba||1===ya.nodeType)return S(ya,Ja,Ha)}:function(ya,Ja,Ha){if(!Ha)for(var La,
Va=wb+" "+Aa+" ",eb=Va+Za;ya=ya[Ca];){if(Ba||1===ya.nodeType){if((La=ya[$a])===eb)return ya.sizset;if("string"===typeof La&&0===La.indexOf(Va)){if(ya.sizset)return ya}else{ya[$a]=eb;if(S(ya,Ja,Ha))return ya.sizset=!0,ya;ya.sizset=!1}}}else for(;ya=ya[Ca];)if((Ba||1===ya.nodeType)&&S(ya,Ja,Ha))return ya}}function pa(S){return 1<S.length?function(ba,ka,Ca){for(var Ba=S.length;Ba--;)if(!S[Ba](ba,ka,Ca))return!1;return!0}:S[0]}function ua(S,ba,ka,Ca,Ba){for(var Aa,ya=[],Ja=0,Ha=S.length,La=null!=ba;Ja<
Ha;Ja++)if(Aa=S[Ja])if(!ka||ka(Aa,Ca,Ba))ya.push(Aa),La&&ba.push(Ja);return ya}function za(S,ba,ka,Ca,Ba,Aa){Ca&&!Ca[$a]&&(Ca=za(Ca));Ba&&!Ba[$a]&&(Ba=za(Ba,Aa));return cb(function(ya,Ja,Ha,La){var Va,eb=[],fb=[],ob=Ja.length,Wa;if(!(Wa=ya)){Wa=ba||"*";for(var Ta=Ha.nodeType?[Ha]:Ha,yb=[],Jb=0,ac=Ta.length;Jb<ac;Jb++)D(Wa,Ta[Jb],yb);Wa=yb}Wa=!S||!ya&&ba?Wa:ua(Wa,eb,S,Ha,La);Ta=ka?Ba||(ya?S:ob||Ca)?[]:Ja:Wa;ka&&ka(Wa,Ta,Ha,La);if(Ca){var sb=ua(Ta,fb);Ca(sb,[],Ha,La);for(Ha=sb.length;Ha--;)if(Va=sb[Ha])Ta[fb[Ha]]=
!(Wa[fb[Ha]]=Va)}if(ya){if(Ba||S){if(Ba){sb=[];for(Ha=Ta.length;Ha--;)(Va=Ta[Ha])&&sb.push(Wa[Ha]=Va);Ba(null,Ta=[],sb,La)}for(Ha=Ta.length;Ha--;)(Va=Ta[Ha])&&-1<(sb=Ba?Cb.call(ya,Va):eb[Ha])&&(ya[sb]=!(Ja[sb]=Va))}}else Ta=ua(Ta===Ja?Ta.splice(ob,Ta.length):Ta),Ba?Ba(null,Ja,Ta,La):gb.apply(Ja,Ta)})}function Ia(S){var ba,ka,Ca=S.length,Ba=Xa.relative[S[0].type];var Aa=Ba||Xa.relative[" "];for(var ya=Ba?1:0,Ja=V(function(Va){return Va===ba},Aa,!0),Ha=V(function(Va){return-1<Cb.call(ba,Va)},Aa,!0),
La=[function(Va,eb,fb){return!Ba&&(fb||eb!==xb)||((ba=eb).nodeType?Ja(Va,eb,fb):Ha(Va,eb,fb))}];ya<Ca;ya++)if(Aa=Xa.relative[S[ya].type])La=[V(pa(La),Aa)];else{Aa=Xa.filter[S[ya].type].apply(null,S[ya].matches);if(Aa[$a]){for(ka=++ya;ka<Ca&&!Xa.relative[S[ka].type];ka++);return za(1<ya&&pa(La),1<ya&&S.slice(0,ya-1).join("").replace(lb,"$1"),Aa,ya<ka&&Ia(S.slice(ya,ka)),ka<Ca&&Ia(S=S.slice(ka)),ka<Ca&&S.join(""))}La.push(Aa)}return pa(La)}function Na(S,ba){var ka=0<ba.length,Ca=0<S.length,Ba=function(Aa,
ya,Ja,Ha,La){var Va,eb,fb=[],ob=0,Wa="0",Ta=Aa&&[],yb=null!=La,Jb=xb,ac=Aa||Ca&&Xa.find.TAG("*",La&&ya.parentNode||ya),sb=wb+=null==Jb?1:Math.E;yb&&(xb=ya!==Ua&&ya,Za=Ba.el);for(;null!=(La=ac[Wa]);Wa++){if(Ca&&La){for(Va=0;eb=S[Va];Va++)if(eb(La,ya,Ja)){Ha.push(La);break}yb&&(wb=sb,Za=++Ba.el)}ka&&((La=!eb&&La)&&ob--,Aa&&Ta.push(La))}ob+=Wa;if(ka&&Wa!==ob){for(Va=0;eb=ba[Va];Va++)eb(Ta,fb,ya,Ja);if(Aa){if(0<ob)for(;Wa--;)Ta[Wa]||fb[Wa]||(fb[Wa]=ub.call(Ha));fb=ua(fb)}gb.apply(Ha,fb);yb&&!Aa&&0<fb.length&&
1<ob+ba.length&&D.uniqueSort(Ha)}yb&&(wb=sb,xb=Jb);return Ta};Ba.el=0;return ka?cb(Ba):Ba}function bb(S,ba,ka,Ca,Ba){var Aa,ya,Ja,Ha=aa(S);if(!Ca&&1===Ha.length){var La=Ha[0]=Ha[0].slice(0);if(2<La.length&&"ID"===(ya=La[0]).type&&9===ba.nodeType&&!Ba&&Xa.relative[La[1].type]){ba=Xa.find.ID(ya.matches[0].replace(Db,""),ba,Ba)[0];if(!ba)return ka;S=S.slice(La.shift().length)}for(Aa=Ub.POS.test(S)?-1:La.length-1;0<=Aa;Aa--){ya=La[Aa];if(Xa.relative[Ja=ya.type])break;if(Ja=Xa.find[Ja])if(Ca=Ja(ya.matches[0].replace(Db,
""),Pb.test(La[0].type)&&ba.parentNode||ba,Ba)){La.splice(Aa,1);S=Ca.length&&La.join("");if(!S)return gb.apply(ka,vb.call(Ca,0)),ka;break}}}rc(S,Ha)(Ca,ba,Ba,ka,Pb.test(S));return ka}function hb(){}var Za,Kb,Ma,xb,tb=!0,$a=("sizcache"+Math.random()).replace(".",""),Sa=String,Ua=w.document,Ra=Ua.documentElement,wb=0,jb=0,ub=[].pop,gb=[].push,vb=[].slice,Cb=[].indexOf||function(S){for(var ba=0,ka=this.length;ba<ka;ba++)if(this[ba]===S)return ba;return-1},cb=function(S,ba){S[$a]=null==ba||ba;return S};
w=function(){var S={},ba=[];return cb(function(ka,Ca){ba.push(ka)>Xa.cacheLength&&delete S[ba.shift()];return S[ka+" "]=Ca},S)};var Qb=w(),qb=w(),ib=w(),lb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),nb=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Ib=RegExp("^[\\x20\\t\\r\\n\\f]*([\\x20\\t\\r\\n\\f>+~])[\\x20\\t\\r\\n\\f]*"),ab=RegExp(":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[-\\w#]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\])|[^:]|\\\\.)*|.*))\\)|)"),
mb=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Pb=/[\x20\t\r\n\f]*[+~]/,Wc=/h\d/i,Xc=/input|select|textarea|button/i,Db=/\\(?!\\)/g,Ub={ID:RegExp("^#((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)"),CLASS:RegExp("^\\.((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)"),NAME:RegExp("^\\[name=['\"]?((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)['\"]?\\]"),TAG:RegExp("^((?:\\\\.|[-\\w*]|[^\\x00-\\xa0])+)"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[-\\w#]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[-\\w#]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\])|[^:]|\\\\.)*|.*))\\)|)"),POS:RegExp(":(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},zb=function(S){var ba=Ua.createElement("div");try{return S(ba)}catch(ka){return!1}finally{}};w=zb(function(S){S.appendChild(Ua.createComment(""));return!S.getElementsByTagName("*").length});var Yc=zb(function(S){S.innerHTML="<a href='#'></a>";return S.firstChild&&"undefined"!==typeof S.firstChild.getAttribute&&"#"===S.firstChild.getAttribute("href")}),
Zc=zb(function(S){S.innerHTML="<select></select>";S=typeof S.lastChild.getAttribute("multiple");return"boolean"!==S&&"string"!==S}),qc=zb(function(S){S.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!S.getElementsByClassName||!S.getElementsByClassName("e").length)return!1;S.lastChild.className="e";return 2===S.getElementsByClassName("e").length}),$c=zb(function(S){S.id=$a+0;S.innerHTML="<a name='"+$a+"'></a><div name='"+$a+"'></div>";Ra.insertBefore(S,Ra.firstChild);var ba=
Ua.getElementsByName&&Ua.getElementsByName($a).length===2+Ua.getElementsByName($a+0).length;Kb=!Ua.getElementById($a);Ra.removeChild(S);return ba});try{vb.call(Ra.childNodes,0)[0].nodeType}catch(S){vb=function(ba){for(var ka,Ca=[];ka=this[ba];ba++)Ca.push(ka);return Ca}}D.matches=function(S,ba){return D(S,null,null,ba)};D.matchesSelector=function(S,ba){return 0<D(ba,null,null,[S]).length};var bc=D.getText=function(S){var ba,ka="",Ca=0;if(ba=S.nodeType)if(1===ba||9===ba||11===ba){if("string"===typeof S.textContent)return S.textContent;
for(S=S.firstChild;S;S=S.nextSibling)ka+=bc(S)}else{if(3===ba||4===ba)return S.nodeValue}else for(;ba=S[Ca];Ca++)ka+=bc(ba);return ka};var $b=D.isXML=function(S){return(S=S&&(S.ownerDocument||S).documentElement)?"HTML"!==S.nodeName:!1};var Vc=D.contains=Ra.contains?function(S,ba){var ka=9===S.nodeType?S.documentElement:S;ba=ba&&ba.parentNode;return S===ba||!!(ba&&1===ba.nodeType&&ka.contains&&ka.contains(ba))}:Ra.compareDocumentPosition?function(S,ba){return ba&&!!(S.compareDocumentPosition(ba)&16)}:
function(S,ba){for(;ba=ba.parentNode;)if(ba===S)return!0;return!1};D.attr=function(S,ba){var ka,Ca=$b(S);Ca||(ba=ba.toLowerCase());return(ka=Xa.attrHandle[ba])?ka(S):Ca||Zc?S.getAttribute(ba):(ka=S.getAttributeNode(ba))?"boolean"===typeof S[ba]?S[ba]?ba:null:ka.specified?ka.value:null:null};var Xa=D.selectors={cacheLength:50,createPseudo:cb,match:Ub,attrHandle:Yc?{}:{href:function(S){return S.getAttribute("href",2)},type:function(S){return S.getAttribute("type")}},find:{ID:Kb?function(S,ba,ka){if("undefined"!==
typeof ba.getElementById&&!ka)return(S=ba.getElementById(S))&&S.parentNode?[S]:[]}:function(S,ba,ka){if("undefined"!==typeof ba.getElementById&&!ka)return(ba=ba.getElementById(S))?ba.id===S||"undefined"!==typeof ba.getAttributeNode&&ba.getAttributeNode("id").value===S?[ba]:z:[]},TAG:w?function(S,ba){if("undefined"!==typeof ba.getElementsByTagName)return ba.getElementsByTagName(S)}:function(S,ba){ba=ba.getElementsByTagName(S);if("*"===S){for(var ka=[],Ca=0;S=ba[Ca];Ca++)1===S.nodeType&&ka.push(S);
return ka}return ba},NAME:$c&&function(S,ba){if("undefined"!==typeof ba.getElementsByName)return ba.getElementsByName(name)},CLASS:qc&&function(S,ba,ka){if("undefined"!==typeof ba.getElementsByClassName&&!ka)return ba.getElementsByClassName(S)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(S){S[1]=S[1].replace(Db,"");S[3]=(S[4]||S[5]||"").replace(Db,"");"~="===S[2]&&(S[3]=" "+S[3]+" ");return S.slice(0,
4)},CHILD:function(S){S[1]=S[1].toLowerCase();"nth"===S[1]?(S[2]||D.error(S[0]),S[3]=+(S[3]?S[4]+(S[5]||1):2*("even"===S[2]||"odd"===S[2])),S[4]=+(S[6]+S[7]||"odd"===S[2])):S[2]&&D.error(S[0]);return S},PSEUDO:function(S){var ba,ka;if(Ub.CHILD.test(S[0]))return null;if(S[3])S[2]=S[3];else if(ba=S[4])ab.test(ba)&&(ka=aa(ba,!0))&&(ka=ba.indexOf(")",ba.length-ka)-ba.length)&&(ba=ba.slice(0,ka),S[0]=S[0].slice(0,ka)),S[2]=ba;return S.slice(0,3)}},filter:{ID:Kb?function(S){S=S.replace(Db,"");return function(ba){return ba.getAttribute("id")===
S}}:function(S){S=S.replace(Db,"");return function(ba){return(ba="undefined"!==typeof ba.getAttributeNode&&ba.getAttributeNode("id"))&&ba.value===S}},TAG:function(S){if("*"===S)return function(){return!0};S=S.replace(Db,"").toLowerCase();return function(ba){return ba.nodeName&&ba.nodeName.toLowerCase()===S}},CLASS:function(S){var ba=Qb[$a][S+" "];return ba||(ba=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+S+"([\\x20\\t\\r\\n\\f]|$)"),Qb(S,function(ka){return ba.test(ka.className||"undefined"!==typeof ka.getAttribute&&
ka.getAttribute("class")||"")}))},ATTR:function(S,ba,ka){return function(Ca,Ba){Ca=D.attr(Ca,S);if(null==Ca)return"!="===ba;if(!ba)return!0;Ca+="";return"="===ba?Ca===ka:"!="===ba?Ca!==ka:"^="===ba?ka&&0===Ca.indexOf(ka):"*="===ba?ka&&-1<Ca.indexOf(ka):"$="===ba?ka&&Ca.substr(Ca.length-ka.length)===ka:"~="===ba?-1<(" "+Ca+" ").indexOf(ka):"|="===ba?Ca===ka||Ca.substr(0,ka.length+1)===ka+"-":!1}},CHILD:function(S,ba,ka,Ca){return"nth"===S?function(Ba){var Aa=Ba.parentNode;if(1===ka&&0===Ca)return!0;
if(Aa){var ya=0;for(Aa=Aa.firstChild;Aa&&(1!==Aa.nodeType||(ya++,Ba!==Aa));Aa=Aa.nextSibling);}ya-=Ca;return ya===ka||0===ya%ka&&0<=ya/ka}:function(Ba){var Aa=Ba;switch(S){case "only":case "first":for(;Aa=Aa.previousSibling;)if(1===Aa.nodeType)return!1;if("first"===S)return!0;Aa=Ba;case "last":for(;Aa=Aa.nextSibling;)if(1===Aa.nodeType)return!1;return!0}}},PSEUDO:function(S,ba){var ka=Xa.pseudos[S]||Xa.setFilters[S.toLowerCase()]||D.error("unsupported pseudo: "+S);if(ka[$a])return ka(ba);if(1<ka.length){var Ca=
[S,S,"",ba];return Xa.setFilters.hasOwnProperty(S.toLowerCase())?cb(function(Ba,Aa){for(var ya,Ja=ka(Ba,ba),Ha=Ja.length;Ha--;)ya=Cb.call(Ba,Ja[Ha]),Ba[ya]=!(Aa[ya]=Ja[Ha])}):function(Ba){return ka(Ba,0,Ca)}}return ka}},pseudos:{not:cb(function(S){var ba=[],ka=[],Ca=rc(S.replace(lb,"$1"));return Ca[$a]?cb(function(Ba,Aa,ya,Ja){Ja=Ca(Ba,null,Ja,[]);for(var Ha=Ba.length;Ha--;)if(ya=Ja[Ha])Ba[Ha]=!(Aa[Ha]=ya)}):function(Ba,Aa,ya){ba[0]=Ba;Ca(ba,null,ya,ka);return!ka.pop()}}),has:cb(function(S){return function(ba){return 0<
D(S,ba).length}}),contains:cb(function(S){return function(ba){return-1<(ba.textContent||ba.innerText||bc(ba)).indexOf(S)}}),enabled:function(S){return!1===S.disabled},disabled:function(S){return!0===S.disabled},checked:function(S){var ba=S.nodeName.toLowerCase();return"input"===ba&&!!S.checked||"option"===ba&&!!S.selected},selected:function(S){S.parentNode&&S.parentNode.selectedIndex;return!0===S.selected},parent:function(S){return!Xa.pseudos.empty(S)},empty:function(S){var ba;for(S=S.firstChild;S;){if("@"<
S.nodeName||3===(ba=S.nodeType)||4===ba)return!1;S=S.nextSibling}return!0},header:function(S){return Wc.test(S.nodeName)},text:function(S){var ba,ka;return"input"===S.nodeName.toLowerCase()&&"text"===(ba=S.type)&&(null==(ka=S.getAttribute("type"))||ka.toLowerCase()===ba)},radio:I("radio"),checkbox:I("checkbox"),file:I("file"),password:I("password"),image:I("image"),submit:N("submit"),reset:N("reset"),button:function(S){var ba=S.nodeName.toLowerCase();return"input"===ba&&"button"===S.type||"button"===
ba},input:function(S){return Xc.test(S.nodeName)},focus:function(S){var ba=S.ownerDocument;return S===ba.activeElement&&(!ba.hasFocus||ba.hasFocus())&&!!(S.type||S.href||~S.tabIndex)},active:function(S){return S===S.ownerDocument.activeElement},first:L(function(){return[0]}),last:L(function(S,ba){return[ba-1]}),eq:L(function(S,ba,ka){return[0>ka?ka+ba:ka]}),even:L(function(S,ba){for(var ka=0;ka<ba;ka+=2)S.push(ka);return S}),odd:L(function(S,ba){for(var ka=1;ka<ba;ka+=2)S.push(ka);return S}),lt:L(function(S,
ba,ka){for(ba=0>ka?ka+ba:ka;0<=--ba;)S.push(ba);return S}),gt:L(function(S,ba,ka){for(ka=0>ka?ka+ba:ka;++ka<ba;)S.push(ka);return S})}};var sc=Ra.compareDocumentPosition?function(S,ba){return S===ba?(Ma=!0,0):(S.compareDocumentPosition&&ba.compareDocumentPosition?S.compareDocumentPosition(ba)&4:S.compareDocumentPosition)?-1:1}:function(S,ba){if(S===ba)return Ma=!0,0;if(S.sourceIndex&&ba.sourceIndex)return S.sourceIndex-ba.sourceIndex;var ka=[],Ca=[];var Ba=S.parentNode;var Aa=ba.parentNode;var ya=
Ba;if(Ba===Aa)return U(S,ba);if(!Ba)return-1;if(!Aa)return 1;for(;ya;)ka.unshift(ya),ya=ya.parentNode;for(ya=Aa;ya;)Ca.unshift(ya),ya=ya.parentNode;Ba=ka.length;Aa=Ca.length;for(ya=0;ya<Ba&&ya<Aa;ya++)if(ka[ya]!==Ca[ya])return U(ka[ya],Ca[ya]);return ya===Ba?U(S,Ca[ya],-1):U(ka[ya],ba,1)};[0,0].sort(sc);tb=!Ma;D.uniqueSort=function(S){var ba,ka=[],Ca=1,Ba=0;Ma=tb;S.sort(sc);if(Ma){for(;ba=S[Ca];Ca++)ba===S[Ca-1]&&(Ba=ka.push(Ca));for(;Ba--;)S.splice(ka[Ba],1)}return S};D.error=function(S){throw Error("Syntax error, unrecognized expression: "+
S);};var rc=D.compile=function(S,ba){var ka,Ca=[],Ba=[],Aa=ib[$a][S+" "];if(!Aa){ba||=aa(S);for(ka=ba.length;ka--;)Aa=Ia(ba[ka]),Aa[$a]?Ca.push(Aa):Ba.push(Aa);Aa=ib(S,Na(Ba,Ca))}return Aa};Ua.querySelectorAll&&function(){var S,ba=bb,ka=/'|\\/g,Ca=/=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Ba=[":focus"],Aa=[":active"],ya=Ra.matchesSelector||Ra.mozMatchesSelector||Ra.webkitMatchesSelector||Ra.oMatchesSelector||Ra.msMatchesSelector;zb(function(Ja){Ja.innerHTML="<select><option selected=''></option></select>";
Ja.querySelectorAll("[selected]").length||Ba.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");Ja.querySelectorAll(":checked").length||Ba.push(":checked")});zb(function(Ja){Ja.innerHTML="<p test=''></p>";Ja.querySelectorAll("[test^='']").length&&Ba.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");Ja.innerHTML="<input type='hidden'/>";Ja.querySelectorAll(":enabled").length||Ba.push(":enabled",":disabled")});Ba=new RegExp(Ba.join("|"));bb=function(Ja,Ha,La,Va,eb){if(!Va&&
!eb&&!Ba.test(Ja)){var fb=!0,ob=$a;var Wa=Ha;var Ta=9===Ha.nodeType&&Ja;if(1===Ha.nodeType&&"object"!==Ha.nodeName.toLowerCase()){Ta=aa(Ja);(fb=Ha.getAttribute("id"))?ob=fb.replace(ka,"\\$&"):Ha.setAttribute("id",ob);ob="[id='"+ob+"'] ";for(Wa=Ta.length;Wa--;)Ta[Wa]=ob+Ta[Wa].join("");Wa=Pb.test(Ja)&&Ha.parentNode||Ha;Ta=Ta.join(",")}if(Ta)try{return gb.apply(La,vb.call(Wa.querySelectorAll(Ta),0)),La}catch(yb){}finally{fb||Ha.removeAttribute("id")}}return ba(Ja,Ha,La,Va,eb)};ya&&(zb(function(Ja){S=
ya.call(Ja,"div");try{ya.call(Ja,"[test!='']:sizzle"),Aa.push("!=",":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[-\\w#]|[^\\x00-\\xa0])+)|)|)[\\x20\\t\\r\\n\\f]*\\])|[^:]|\\\\.)*|.*))\\)|)")}catch(Ha){}}),Aa=new RegExp(Aa.join("|")),D.matchesSelector=function(Ja,Ha){Ha=Ha.replace(Ca,"='$1']");
if(!$b(Ja)&&!Aa.test(Ha)&&!Ba.test(Ha))try{var La=ya.call(Ja,Ha);if(La||S||Ja.document&&11!==Ja.document.nodeType)return La}catch(Va){}return 0<D(Ha,null,null,[Ja]).length})}();Xa.pseudos.nth=Xa.pseudos.eq;Xa.filters=hb.prototype=Xa.pseudos;Xa.setFilters=new hb;D.attr=A.attr;A.find=D;A.expr=D.selectors;A.expr[":"]=A.expr.pseudos;A.unique=D.uniqueSort;A.text=D.getText;A.isXMLDoc=D.isXML;A.contains=D.contains})(a);var ad=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,Jc=/^.[^:#\[\.,]*$/,tc=A.expr.match.needsContext,
cd={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({find:function(w){var z,D,I,N=this;if("string"!==typeof w)return A(w).filter(function(){U=0;for(z=N.length;U<z;U++)if(A.contains(N[U],this))return!0});var L=this.pushStack("","find",w);var U=0;for(z=this.length;U<z;U++){var aa=L.length;A.find(w,this[U],L);if(0<U)for(D=aa;D<L.length;D++)for(I=0;I<aa;I++)if(L[I]===L[D]){L.splice(D--,1);break}}return L},has:function(w){var z,D=A(w,this),I=D.length;return this.filter(function(){for(z=0;z<I;z++)if(A.contains(this,
D[z]))return!0})},not:function(w){return this.pushStack(r(this,w,!1),"not",w)},filter:function(w){return this.pushStack(r(this,w,!0),"filter",w)},is:function(w){return!!w&&("string"===typeof w?tc.test(w)?0<=A(w,this.context).index(this[0]):0<A.filter(w,this).length:0<this.filter(w).length)},closest:function(w,z){for(var D,I=0,N=this.length,L=[],U=tc.test(w)||"string"!==typeof w?A(w,z||this.context):0;I<N;I++)for(D=this[I];D&&D.ownerDocument&&D!==z&&11!==D.nodeType;){if(U?-1<U.index(D):A.find.matchesSelector(D,
w)){L.push(D);break}D=D.parentNode}L=1<L.length?A.unique(L):L;return this.pushStack(L,"closest",w)},index:function(w){return w?"string"===typeof w?A.inArray(this[0],A(w)):A.inArray(w.jquery?w[0]:w,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(w,z){w="string"===typeof w?A(w,z):A.makeArray(w&&w.nodeType?[w]:w);z=A.merge(this.get(),w);return this.pushStack(n(w[0])||n(z[0])?z:A.unique(z))},addBack:function(w){return this.add(null==w?this.prevObject:this.prevObject.filter(w))}});
A.fn.andSelf=A.fn.addBack;A.each({parent:function(w){return(w=w.parentNode)&&11!==w.nodeType?w:null},parents:function(w){return A.dir(w,"parentNode")},parentsUntil:function(w,z,D){return A.dir(w,"parentNode",D)},next:function(w){return p(w,"nextSibling")},prev:function(w){return p(w,"previousSibling")},nextAll:function(w){return A.dir(w,"nextSibling")},prevAll:function(w){return A.dir(w,"previousSibling")},nextUntil:function(w,z,D){return A.dir(w,"nextSibling",D)},prevUntil:function(w,z,D){return A.dir(w,
"previousSibling",D)},siblings:function(w){return A.sibling((w.parentNode||{}).firstChild,w)},children:function(w){return A.sibling(w.firstChild)},contents:function(w){return A.nodeName(w,"iframe")?w.contentDocument||w.contentWindow.document:A.merge([],w.childNodes)}},function(w,z){A.fn[w]=function(D,I){var N=A.map(this,z,D);ad.test(w)||(I=D);I&&"string"===typeof I&&(N=A.filter(I,N));N=1<this.length&&!cd[w]?A.unique(N):N;1<this.length&&bd.test(w)&&(N=N.reverse());return this.pushStack(N,w,qa.call(arguments).join(","))}});
A.extend({filter:function(w,z,D){D&&(w=":not("+w+")");return 1===z.length?A.find.matchesSelector(z[0],w)?[z[0]]:[]:A.find.matches(w,z)},dir:function(w,z,D){var I=[];for(w=w[z];w&&9!==w.nodeType&&(D===c||1!==w.nodeType||!A(w).is(D));)1===w.nodeType&&I.push(w),w=w[z];return I},sibling:function(w,z){for(var D=[];w;w=w.nextSibling)1===w.nodeType&&w!==z&&D.push(w);return D}});var hc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
dd=/ jQuery\d+="(?:null|\d+)"/g,cc=/^\s+/,uc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vc=/<([\w:]+)/,ed=/<tbody/i,fd=/<|&#?\w+;/,gd=/<(?:script|style|link)/i,hd=/<(?:script|object|embed|option|style)/i,dc=new RegExp("<(?:"+hc+")[\\s/>]","i"),ic=/^(?:checkbox|radio)$/,wc=/checked\s*(?:[^=]|=\s*.checked.)/i,id=/\/(java|ecma)script/i,jd=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],
thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},xc=q(X),ec=xc.appendChild(X.createElement("div"));rb.optgroup=rb.option;rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead;rb.th=rb.td;A.support.htmlSerialize||(rb._default=[1,"X<div>","</div>"]);A.fn.extend({text:function(w){return A.access(this,function(z){return z===
c?A.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(z))},null,w,arguments.length)},wrapAll:function(w){if(A.isFunction(w))return this.each(function(D){A(this).wrapAll(w.call(this,D))});if(this[0]){var z=A(w,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&z.insertBefore(this[0]);z.map(function(){for(var D=this;D.firstChild&&1===D.firstChild.nodeType;)D=D.firstChild;return D}).append(this)}return this},wrapInner:function(w){return A.isFunction(w)?this.each(function(z){A(this).wrapInner(w.call(this,
z))}):this.each(function(){var z=A(this),D=z.contents();D.length?D.wrapAll(w):z.append(w)})},wrap:function(w){var z=A.isFunction(w);return this.each(function(D){A(this).wrapAll(z?w.call(this,D):w)})},unwrap:function(){return this.parent().each(function(){A.nodeName(this,"body")||A(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(w){1!==this.nodeType&&11!==this.nodeType||this.appendChild(w)})},prepend:function(){return this.domManip(arguments,
!0,function(w){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(w,this.firstChild)})},before:function(){if(!n(this[0]))return this.domManip(arguments,!1,function(z){this.parentNode.insertBefore(z,this)});if(arguments.length){var w=A.clean(arguments);return this.pushStack(A.merge(w,this),"before",this.selector)}},after:function(){if(!n(this[0]))return this.domManip(arguments,!1,function(z){this.parentNode.insertBefore(z,this.nextSibling)});if(arguments.length){var w=A.clean(arguments);return this.pushStack(A.merge(this,
w),"after",this.selector)}},remove:function(w,z){for(var D,I=0;null!=(D=this[I]);I++)if(!w||A.filter(w,[D]).length)z||1!==D.nodeType||(A.cleanData(D.getElementsByTagName("*")),A.cleanData([D])),D.parentNode&&D.parentNode.removeChild(D);return this},empty:function(){for(var w,z=0;null!=(w=this[z]);z++)for(1===w.nodeType&&A.cleanData(w.getElementsByTagName("*"));w.firstChild;)w.removeChild(w.firstChild);return this},clone:function(w,z){w=null==w?!1:w;z=null==z?w:z;return this.map(function(){return A.clone(this,
w,z)})},html:function(w){return A.access(this,function(z){var D=this[0]||{},I=0,N=this.length;if(z===c)return 1===D.nodeType?D.innerHTML.replace(dd,""):c;if(!("string"!==typeof z||gd.test(z)||!A.support.htmlSerialize&&dc.test(z)||!A.support.leadingWhitespace&&cc.test(z)||rb[(vc.exec(z)||["",""])[1].toLowerCase()])){z=z.replace(uc,"<$1></$2>");try{for(;I<N;I++)D=this[I]||{},1===D.nodeType&&(A.cleanData(D.getElementsByTagName("*")),D.innerHTML=z);D=0}catch(L){}}D&&this.empty().append(z)},null,w,arguments.length)},
replaceWith:function(w){if(!n(this[0])){if(A.isFunction(w))return this.each(function(z){var D=A(this),I=D.html();D.replaceWith(w.call(this,z,I))});"string"!==typeof w&&(w=A(w).detach());return this.each(function(){var z=this.nextSibling,D=this.parentNode;A(this).remove();z?A(z).before(w):A(D).append(w)})}return this.length?this.pushStack(A(A.isFunction(w)?w():w),"replaceWith",w):this},detach:function(w){return this.remove(w,!0)},domManip:function(w,z,D){w=[].concat.apply([],w);var I=0,N=w[0],L=[],
U=this.length;if(!A.support.checkClone&&1<U&&"string"===typeof N&&wc.test(N))return this.each(function(){A(this).domManip(w,z,D)});if(A.isFunction(N))return this.each(function(ua){var za=A(this);w[0]=N.call(this,ua,z?za.html():c);za.domManip(w,z,D)});if(this[0]){var aa=A.buildFragment(w,this,L);var V=aa.fragment;var pa=V.firstChild;1===V.childNodes.length&&(V=pa);if(pa)for(z=z&&A.nodeName(pa,"tr"),aa=aa.cacheable||U-1;I<U;I++)D.call(z&&A.nodeName(this[I],"table")?u(this[I],"tbody"):this[I],I===aa?
V:A.clone(V,!0,!0));V=pa=null;L.length&&A.each(L,function(ua,za){za.src?A.ajax?A.ajax({url:za.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):A.error("no ajax"):A.globalEval((za.text||za.textContent||za.innerHTML||"").replace(jd,""));za.parentNode&&za.parentNode.removeChild(za)})}return this}});A.buildFragment=function(w,z,D){var I=w[0];z=z||X;z=!z.nodeType&&z[0]||z;z=z.ownerDocument||z;if(1===w.length&&"string"===typeof I&&512>I.length&&z===X&&"<"===I.charAt(0)&&!hd.test(I)&&(A.support.checkClone||
!wc.test(I))&&(A.support.html5Clone||!dc.test(I))){var N=!0;var L=A.fragments[I];var U=L!==c}L||(L=z.createDocumentFragment(),A.clean(w,z,L,D),N&&(A.fragments[I]=U&&L));return{fragment:L,cacheable:N}};A.fragments={};A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,z){A.fn[w]=function(D){var I=0,N=[];D=A(D);var L=D.length;var U=1===this.length&&this[0].parentNode;if((null==U||U&&11===U.nodeType&&1===U.childNodes.length)&&1===
L)return D[z](this[0]),this;for(;I<L;I++)U=(0<I?this.clone(!0):this).get(),A(D[I])[z](U),N=N.concat(U);return this.pushStack(N,w,D.selector)}});A.extend({clone:function(w,z,D){var I;if(A.support.html5Clone||A.isXMLDoc(w)||!dc.test("<"+w.nodeName+">"))var N=w.cloneNode(!0);else ec.innerHTML=w.outerHTML,ec.removeChild(N=ec.firstChild);if(!(A.support.noCloneEvent&&A.support.noCloneChecked||1!==w.nodeType&&11!==w.nodeType||A.isXMLDoc(w))){x(w,N);var L=y(w);var U=y(N);for(I=0;L[I];++I)U[I]&&x(L[I],U[I])}if(z&&
(v(w,N),D))for(L=y(w),U=y(N),I=0;L[I];++I)v(L[I],U[I]);return N},clean:function(w,z,D,I){var N,L,U=z===X&&xc,aa=[];z&&"undefined"!==typeof z.createDocumentFragment||(z=X);for(N=0;null!=(L=w[N]);N++)if("number"===typeof L&&(L+=""),L){if("string"===typeof L)if(fd.test(L)){U=U||q(z);var V=z.createElement("div");U.appendChild(V);L=L.replace(uc,"<$1></$2>");var pa=(vc.exec(L)||["",""])[1].toLowerCase();var ua=rb[pa]||rb._default;var za=ua[0];for(V.innerHTML=ua[1]+L+ua[2];za--;)V=V.lastChild;if(!A.support.tbody)for(za=
ed.test(L),ua="table"!==pa||za?"<table>"!==ua[1]||za?[]:V.childNodes:V.firstChild&&V.firstChild.childNodes,pa=ua.length-1;0<=pa;--pa)A.nodeName(ua[pa],"tbody")&&!ua[pa].childNodes.length&&ua[pa].parentNode.removeChild(ua[pa]);!A.support.leadingWhitespace&&cc.test(L)&&V.insertBefore(z.createTextNode(cc.exec(L)[0]),V.firstChild);L=V.childNodes;V.parentNode.removeChild(V)}else L=z.createTextNode(L);L.nodeType?aa.push(L):A.merge(aa,L)}V&&(L=V=U=null);if(!A.support.appendChecked)for(N=0;null!=(L=aa[N]);N++)A.nodeName(L,
"input")?B(L):"undefined"!==typeof L.getElementsByTagName&&A.grep(L.getElementsByTagName("input"),B);if(D)for(w=function(Ia){if(!Ia.type||id.test(Ia.type))return I?I.push(Ia.parentNode?Ia.parentNode.removeChild(Ia):Ia):D.appendChild(Ia)},N=0;null!=(L=aa[N]);N++)A.nodeName(L,"script")&&w(L)||(D.appendChild(L),"undefined"!==typeof L.getElementsByTagName&&(L=A.grep(A.merge([],L.getElementsByTagName("script")),w),aa.splice.apply(aa,[N+1,0].concat(L)),N+=L.length));return aa},cleanData:function(w,z){for(var D,
I,N,L,U=0,aa=A.expando,V=A.cache,pa=A.support.deleteExpando,ua=A.event.special;null!=(N=w[U]);U++)if(z||A.acceptData(N))if(D=(I=N[aa])&&V[I]){if(D.events)for(L in D.events)ua[L]?A.event.remove(N,L):A.removeEvent(N,L,D.handle);V[I]&&(delete V[I],pa?delete N[aa]:N.removeAttribute?N.removeAttribute(aa):N[aa]=null,A.deletedIds.push(I))}}});(function(){A.uaMatch=function(D){D=D.toLowerCase();D=/(chrome)[ \/]([\w.]+)/.exec(D)||/(webkit)[ \/]([\w.]+)/.exec(D)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(D)||
/(msie) ([\w.]+)/.exec(D)||0>D.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(D)||[];return{browser:D[1]||"",version:D[2]||"0"}};var w=A.uaMatch(P.userAgent);var z={};w.browser&&(z[w.browser]=!0,z.version=w.version);z.chrome?z.webkit=!0:z.webkit&&(z.safari=!0);A.browser=z;A.sub=function(){function D(N,L){return new D.fn.init(N,L)}A.extend(!0,D,this);D.superclass=this;D.fn=D.prototype=this();D.fn.constructor=D;D.sub=this.sub;D.fn.init=function(N,L){L&&L instanceof A&&!(L instanceof D)&&
(L=D(L));return A.fn.init.call(this,N,L,I)};D.fn.init.prototype=D.fn;var I=D(X);return D}})();var kb,Fb,Gb,fc=/alpha\([^)]*\)/i,kd=/opacity=([^)]*)/,ld=/^(top|right|bottom|left)$/,md=/^(none|table(?!-c[ea]).+)/,yc=/^margin/,Kc=new RegExp("^("+va+")(.*)$","i"),Rb=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),nd=new RegExp("^([-+])=("+va+")","i"),Xb={BODY:"block"},od={position:"absolute",visibility:"hidden",display:"block"},zc={letterSpacing:0,fontWeight:400},Ab=["Top","Right","Bottom","Left"],jc=["Webkit",
"O","Moz","ms"],pd=A.fn.toggle;A.fn.extend({css:function(w,z){return A.access(this,function(D,I,N){return N!==c?A.style(D,I,N):A.css(D,I)},w,z,1<arguments.length)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(w,z){var D="boolean"===typeof w;return A.isFunction(w)&&A.isFunction(z)?pd.apply(this,arguments):this.each(function(){(D?w:H(this))?A(this).show():A(this).hide()})}});A.extend({cssHooks:{opacity:{get:function(w,z){if(z)return w=kb(w,"opacity"),""===w?"1":
w}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":A.support.cssFloat?"cssFloat":"styleFloat"},style:function(w,z,D,I){if(w&&3!==w.nodeType&&8!==w.nodeType&&w.style){var N,L=A.camelCase(z),U=w.style;z=A.cssProps[L]||(A.cssProps[L]=C(U,L));var aa=A.cssHooks[z]||A.cssHooks[L];if(D!==c){var V=typeof D;"string"===V&&(N=nd.exec(D))&&(D=(N[1]+1)*N[2]+parseFloat(A.css(w,z)),V="number");if(!(null==D||"number"===V&&isNaN(D)||("number"!==
V||A.cssNumber[L]||(D+="px"),aa&&"set"in aa&&(D=aa.set(w,D,I))===c)))try{U[z]=D}catch(pa){}}else return aa&&"get"in aa&&(N=aa.get(w,!1,I))!==c?N:U[z]}},css:function(w,z,D,I){var N;var L=A.camelCase(z);try{z=A.cssProps[L]||(A.cssProps[L]=C(w.style,L))}catch(U){}(L=A.cssHooks[z]||A.cssHooks[L])&&"get"in L&&(N=L.get(w,!0,I));N===c&&(N=kb(w,z));"normal"===N&&z in zc&&(N=zc[z]);return D||I!==c?(w=parseFloat(N),D||A.isNumeric(w)?w||0:N):N},swap:function(w,z,D){var I,N={};for(I in z)N[I]=w.style[I],w.style[I]=
z[I];D=D.call(w);for(I in z)w.style[I]=N[I];return D}});a.getComputedStyle?kb=function(w,z){var D=a.getComputedStyle(w,null),I=w.style;if(D){var N=D.getPropertyValue(z)||D[z];""!==N||A.contains(w.ownerDocument,w)||(N=A.style(w,z));if(Rb.test(N)&&yc.test(z)){w=I.width;z=I.minWidth;var L=I.maxWidth;I.minWidth=I.maxWidth=I.width=N;N=D.width;I.width=w;I.minWidth=z;I.maxWidth=L}}return N}:X.documentElement.currentStyle&&(kb=function(w,z){try{var D,I=w.currentStyle&&w.currentStyle[z],N=w.style;null==I&&
N&&N[z]&&(I=N[z]);if(Rb.test(I)&&!ld.test(z)){var L=N.left;if(D=w.runtimeStyle&&w.runtimeStyle.left)w.runtimeStyle.left=w.currentStyle.left;N.left="fontSize"===z?"1em":I;I=N.pixelLeft+"px";N.left=L;D&&(w.runtimeStyle.left=D)}return""===I?"auto":I}catch(U){}});A.each(["height","width"],function(w,z){A.cssHooks[z]={get:function(D,I,N){if(I)return 0===D.offsetWidth&&md.test(kb(D,"display"))?A.swap(D,od,function(){return K(D,z,N)}):K(D,z,N)},set:function(D,I,N){return E(D,I,N?G(D,z,N,A.support.boxSizing&&
"border-box"===A.css(D,"boxSizing")):0)}}});A.support.opacity||(A.cssHooks.opacity={get:function(w,z){return kd.test((z&&w.currentStyle?w.currentStyle.filter:w.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":z?"1":""},set:function(w,z){var D=w.style;w=w.currentStyle;var I=A.isNumeric(z)?"alpha(opacity="+100*z+")":"",N=w&&w.filter||D.filter||"";D.zoom=1;if(1<=z&&""===A.trim(N.replace(fc,""))&&D.removeAttribute&&(D.removeAttribute("filter"),w&&!w.filter))return;D.filter=fc.test(N)?N.replace(fc,I):N+
" "+I}});A(function(){A.support.reliableMarginRight||(A.cssHooks.marginRight={get:function(w,z){return A.swap(w,{display:"inline-block"},function(){if(z)return kb(w,"marginRight")})}});!A.support.pixelPosition&&A.fn.position&&A.each(["top","left"],function(w,z){A.cssHooks[z]={get:function(D,I){if(I)return I=kb(D,z),Rb.test(I)?A(D).position()[z]+"px":I}}})});A.expr&&A.expr.filters&&(A.expr.filters.hidden=function(w){return 0===w.offsetWidth&&0===w.offsetHeight||!A.support.reliableHiddenOffsets&&"none"===
(w.style&&w.style.display||kb(w,"display"))},A.expr.filters.visible=function(w){return!A.expr.filters.hidden(w)});A.each({margin:"",padding:"",border:"Width"},function(w,z){A.cssHooks[w+z]={expand:function(D){var I="string"===typeof D?D.split(" "):[D],N={};for(D=0;4>D;D++)N[w+Ab[D]+z]=I[D]||I[D-2]||I[0];return N}};yc.test(w)||(A.cssHooks[w+z].set=E)});var qd=/%20/g,Lc=/\[\]$/,Ac=/\r?\n/g,rd=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
sd=/^(?:select|textarea)/i;A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?A.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||sd.test(this.nodeName)||rd.test(this.type))}).map(function(w,z){w=A(this).val();return null==w?null:A.isArray(w)?A.map(w,function(D,I){return{name:z.name,value:D.replace(Ac,"\r\n")}}):{name:z.name,value:w.replace(Ac,"\r\n")}}).get()}});
A.param=function(w,z){var D,I=[],N=function(L,U){U=A.isFunction(U)?U():null==U?"":U;I[I.length]=encodeURIComponent(L)+"="+encodeURIComponent(U)};z===c&&(z=A.ajaxSettings&&A.ajaxSettings.traditional);if(A.isArray(w)||w.jquery&&!A.isPlainObject(w))A.each(w,function(){N(this.name,this.value)});else for(D in w)O(D,w[D],z,N);return I.join("&").replace(qd,"+")};var td=/#.*$/,ud=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,vd=/^(?:GET|HEAD)$/,wd=/^\/\//,Bc=/\?/,xd=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
yd=/([?&])_=[^&]*/,Cc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Dc=A.fn.load,Yb={},Ec={};try{var Lb=ja.href}catch(w){Lb=X.createElement("a"),Lb.href="",Lb=Lb.href}var Mb=Cc.exec(Lb.toLowerCase())||[];A.fn.load=function(w,z,D){if("string"!==typeof w&&Dc)return Dc.apply(this,arguments);if(!this.length)return this;var I,N,L=this,U=w.indexOf(" ");if(0<=U){var aa=w.slice(U,w.length);w=w.slice(0,U)}A.isFunction(z)?(D=z,z=c):z&&"object"===typeof z&&(I="POST");A.ajax({url:w,type:I,dataType:"html",
data:z,complete:function(V,pa){D&&L.each(D,N||[V.responseText,pa,V])}}).done(function(V){N=arguments;L.html(aa?A("<div>").append(V.replace(xd,"")).find(aa):V)});return this};A.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(w,z){A.fn[z]=function(D){return this.on(z,D)}});A.each(["get","post"],function(w,z){A[z]=function(D,I,N,L){A.isFunction(I)&&(L=L||N,N=I,I=c);return A.ajax({type:z,url:D,data:I,success:N,dataType:L})}});A.extend({getScript:function(w,z){return A.get(w,
c,z,"script")},getJSON:function(w,z,D){return A.get(w,z,D,"json")},ajaxSetup:function(w,z){z?M(w,A.ajaxSettings):(z=w,w=A.ajaxSettings);M(w,z);return w},ajaxSettings:{url:Lb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Mb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,
html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":A.parseJSON,"text xml":A.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(Yb),ajaxTransport:T(Ec),ajax:function(w,z){function D(Sa,Ua,Ra,wb){var jb=Ua;if(2!==Za){Za=2;U&&clearTimeout(U);L=c;I=wb||"";Ma.readyState=0<Sa?4:0;if(Ra){var ub=V;wb=Ma;var gb,vb,Cb=ub.contents,cb=ub.dataTypes,Qb=ub.responseFields;for(ab in Qb)ab in Ra&&(wb[Qb[ab]]=Ra[ab]);for(;"*"===
cb[0];)cb.shift(),gb===c&&(gb=ub.mimeType||wb.getResponseHeader("content-type"));if(gb)for(ab in Cb)if(Cb[ab]&&Cb[ab].test(gb)){cb.unshift(ab);break}if(cb[0]in Ra)var qb=cb[0];else{for(ab in Ra){if(!cb[0]||ub.converters[ab+" "+cb[0]]){qb=ab;break}vb||=ab}qb=qb||vb}qb?(qb!==cb[0]&&cb.unshift(qb),ub=Ra[qb]):ub=void 0}if(200<=Sa&&300>Sa||304===Sa)if(V.ifModified&&((Ra=Ma.getResponseHeader("Last-Modified"))&&(A.lastModified[tb]=Ra),(Ra=Ma.getResponseHeader("Etag"))&&(A.etag[tb]=Ra)),304===Sa){jb="notmodified";
var ib=!0}else{a:{var lb=V;var nb=ub;var Ib;jb=lb.dataTypes.slice();gb=jb[0];var ab={};qb=0;lb.dataFilter&&(nb=lb.dataFilter(nb,lb.dataType));if(jb[1])for(mb in lb.converters)ab[mb.toLowerCase()]=lb.converters[mb];for(;Ra=jb[++qb];)if("*"!==Ra){if("*"!==gb&&gb!==Ra){var mb=ab[gb+" "+Ra]||ab["* "+Ra];if(!mb)for(Ib in ab)if(ib=Ib.split(" "),ib[1]===Ra&&(mb=ab[gb+" "+ib[0]]||ab["* "+ib[0]])){!0===mb?mb=ab[Ib]:!0!==ab[Ib]&&(Ra=ib[0],jb.splice(qb--,0,Ra));break}if(!0!==mb)if(mb&&lb["throws"])nb=mb(nb);
else try{nb=mb(nb)}catch(Pb){ib={state:"parsererror",error:mb?Pb:"No conversion from "+gb+" to "+Ra};break a}}gb=Ra}ib={state:"success",data:nb}}jb=ib.state;lb=ib.data;nb=ib.error;ib=!nb}else if(nb=jb,!jb||Sa)jb="error",0>Sa&&(Sa=0);Ma.status=Sa;Ma.statusText=(Ua||jb)+"";ib?za.resolveWith(pa,[lb,jb,Ma]):za.rejectWith(pa,[Ma,jb,nb]);Ma.statusCode(Na);Na=c;xb&&ua.trigger("ajax"+(ib?"Success":"Error"),[Ma,V,ib?lb:nb]);Ia.fireWith(pa,[Ma,jb]);xb&&(ua.trigger("ajaxComplete",[Ma,V]),--A.active||A.event.trigger("ajaxStop"))}}
"object"===typeof w&&(z=w,w=c);z=z||{};var I,N,L,U,aa,V=A.ajaxSetup({},z),pa=V.context||V,ua=pa!==V&&(pa.nodeType||pa instanceof A)?A(pa):A.event,za=A.Deferred(),Ia=A.Callbacks("once memory"),Na=V.statusCode||{},bb={},hb={},Za=0,Kb="canceled",Ma={readyState:0,setRequestHeader:function(Sa,Ua){if(!Za){var Ra=Sa.toLowerCase();Sa=hb[Ra]=hb[Ra]||Sa;bb[Sa]=Ua}return this},getAllResponseHeaders:function(){return 2===Za?I:null},getResponseHeader:function(Sa){var Ua;if(2===Za){if(!N)for(N={};Ua=ud.exec(I);)N[Ua[1].toLowerCase()]=
Ua[2];Ua=N[Sa.toLowerCase()]}return Ua===c?null:Ua},overrideMimeType:function(Sa){Za||(V.mimeType=Sa);return this},abort:function(Sa){Sa=Sa||Kb;L&&L.abort(Sa);D(0,Sa);return this}};za.promise(Ma);Ma.success=Ma.done;Ma.error=Ma.fail;Ma.complete=Ia.add;Ma.statusCode=function(Sa){if(Sa)if(2>Za)for(Ua in Sa)Na[Ua]=[Na[Ua],Sa[Ua]];else{var Ua=Sa[Ma.status];Ma.always(Ua)}return this};V.url=((w||V.url)+"").replace(td,"").replace(wd,Mb[1]+"//");V.dataTypes=A.trim(V.dataType||"*").toLowerCase().split(na);
null==V.crossDomain&&(w=Cc.exec(V.url.toLowerCase()),V.crossDomain=!(!w||w[1]===Mb[1]&&w[2]===Mb[2]&&(w[3]||("http:"===w[1]?80:443))==(Mb[3]||("http:"===Mb[1]?80:443))));V.data&&V.processData&&"string"!==typeof V.data&&(V.data=A.param(V.data,V.traditional));Q(Yb,V,z,Ma);if(2===Za)return Ma;var xb=V.global;V.type=V.type.toUpperCase();V.hasContent=!vd.test(V.type);xb&&0===A.active++&&A.event.trigger("ajaxStart");if(!V.hasContent){V.data&&(V.url+=(Bc.test(V.url)?"&":"?")+V.data,delete V.data);var tb=
V.url;if(!1===V.cache){w=A.now();var $a=V.url.replace(yd,"$1_="+w);V.url=$a+($a===V.url?(Bc.test(V.url)?"&":"?")+"_="+w:"")}}(V.data&&V.hasContent&&!1!==V.contentType||z.contentType)&&Ma.setRequestHeader("Content-Type",V.contentType);V.ifModified&&(tb=tb||V.url,A.lastModified[tb]&&Ma.setRequestHeader("If-Modified-Since",A.lastModified[tb]),A.etag[tb]&&Ma.setRequestHeader("If-None-Match",A.etag[tb]));Ma.setRequestHeader("Accept",V.dataTypes[0]&&V.accepts[V.dataTypes[0]]?V.accepts[V.dataTypes[0]]+("*"!==
V.dataTypes[0]?", */*; q=0.01":""):V.accepts["*"]);for(aa in V.headers)Ma.setRequestHeader(aa,V.headers[aa]);if(V.beforeSend&&(!1===V.beforeSend.call(pa,Ma,V)||2===Za))return Ma.abort();Kb="abort";for(aa in{success:1,error:1,complete:1})Ma[aa](V[aa]);if(L=Q(Ec,V,z,Ma)){Ma.readyState=1;xb&&ua.trigger("ajaxSend",[Ma,V]);V.async&&0<V.timeout&&(U=setTimeout(function(){Ma.abort("timeout")},V.timeout));try{Za=1,L.send(bb,D)}catch(Sa){if(2>Za)D(-1,Sa);else throw Sa;}}else D(-1,"No Transport");return Ma},
active:0,lastModified:{},etag:{}});var Fc=[],zd=/\?/,Vb=/(=)\?(?=&|$)|\?\?/,Ad=A.now();A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=Fc.pop()||A.expando+"_"+Ad++;this[w]=!0;return w}});A.ajaxPrefilter("json jsonp",function(w,z,D){var I,N=w.data,L=w.url,U=!1!==w.jsonp,aa=U&&Vb.test(L),V=U&&!aa&&"string"===typeof N&&!(w.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(N);if("jsonp"===w.dataTypes[0]||aa||V){var pa=w.jsonpCallback=A.isFunction(w.jsonpCallback)?w.jsonpCallback():
w.jsonpCallback;var ua=a[pa];aa?w.url=L.replace(Vb,"$1"+pa):V?w.data=N.replace(Vb,"$1"+pa):U&&(w.url+=(zd.test(L)?"&":"?")+w.jsonp+"="+pa);w.converters["script json"]=function(){I||A.error(pa+" was not called");return I[0]};w.dataTypes[0]="json";a[pa]=function(){I=arguments};D.always(function(){a[pa]=ua;w[pa]&&(w.jsonpCallback=z.jsonpCallback,Fc.push(pa));I&&A.isFunction(ua)&&ua(I[0]);I=ua=c});return"script"}});A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(w){A.globalEval(w);return w}}});A.ajaxPrefilter("script",function(w){w.cache===c&&(w.cache=!1);w.crossDomain&&(w.type="GET",w.global=!1)});A.ajaxTransport("script",function(w){if(w.crossDomain){var z,D=X.head||X.getElementsByTagName("head")[0]||X.documentElement;return{send:function(I,N){z=X.createElement("script");z.async="async";w.scriptCharset&&(z.charset=w.scriptCharset);z.src=w.url;z.onload=z.onreadystatechange=function(L,
U){if(U||!z.readyState||/loaded|complete/.test(z.readyState))z.onload=z.onreadystatechange=null,D&&z.parentNode&&D.removeChild(z),z=c,U||N(200,"success")};D.insertBefore(z,D.firstChild)},abort:function(){if(z)z.onload(0,1)}}}});var Nb,gc=a.ActiveXObject?function(){for(var w in Nb)Nb[w](0,1)}:!1,Bd=0;A.ajaxSettings.xhr=a.ActiveXObject?function(){var w;if(!(w=!this.isLocal&&W()))a:{try{w=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(z){}w=void 0}return w}:W;(function(w){A.extend(A.support,
{ajax:!!w,cors:!!w&&"withCredentials"in w})})(A.ajaxSettings.xhr());A.support.ajax&&A.ajaxTransport(function(w){if(!w.crossDomain||A.support.cors){var z;return{send:function(D,I){var N,L=w.xhr();w.username?L.open(w.type,w.url,w.async,w.username,w.password):L.open(w.type,w.url,w.async);if(w.xhrFields)for(N in w.xhrFields)L[N]=w.xhrFields[N];w.mimeType&&L.overrideMimeType&&L.overrideMimeType(w.mimeType);w.crossDomain||D["X-Requested-With"]||(D["X-Requested-With"]="XMLHttpRequest");try{for(N in D)L.setRequestHeader(N,
D[N])}catch(aa){}L.send(w.hasContent&&w.data||null);z=function(aa,V){var pa;try{if(z&&(V||4===L.readyState))if(z=c,U&&(L.onreadystatechange=A.noop,gc&&delete Nb[U]),V)4!==L.readyState&&L.abort();else{var ua=L.status;var za=L.getAllResponseHeaders();var Ia={};(pa=L.responseXML)&&pa.documentElement&&(Ia.xml=pa);try{Ia.text=L.responseText}catch(bb){}try{var Na=L.statusText}catch(bb){Na=""}ua||!w.isLocal||w.crossDomain?1223===ua&&(ua=204):ua=Ia.text?200:404}}catch(bb){V||I(-1,bb)}Ia&&I(ua,Na,Ia,za)};
if(w.async)if(4===L.readyState)setTimeout(z,0);else{var U=++Bd;gc&&(Nb||(Nb={},A(a).unload(gc)),Nb[U]=z);L.onreadystatechange=z}else z()},abort:function(){z&&z(0,1)}}}});var Hb,Wb,Cd=/^(?:toggle|show|hide)$/,Dd=new RegExp("^(?:([-+])=|)("+va+")([a-z%]*)$","i"),Ed=/queueHooks$/,Sb=[function(w,z,D){var I,N=this,L=w.style,U={},aa=[],V=w.nodeType&&H(w);if(!D.queue){var pa=A._queueHooks(w,"fx");if(null==pa.unqueued){pa.unqueued=0;var ua=pa.empty.fire;pa.empty.fire=function(){pa.unqueued||ua()}}pa.unqueued++;
N.always(function(){N.always(function(){pa.unqueued--;A.queue(w,"fx").length||pa.empty.fire()})})}1===w.nodeType&&("height"in z||"width"in z)&&(D.overflow=[L.overflow,L.overflowX,L.overflowY],"inline"===A.css(w,"display")&&"none"===A.css(w,"float")&&(A.support.inlineBlockNeedsLayout&&"inline"!==J(w.nodeName)?L.zoom=1:L.display="inline-block"));D.overflow&&(L.overflow="hidden",A.support.shrinkWrapBlocks||N.done(function(){L.overflow=D.overflow[0];L.overflowX=D.overflow[1];L.overflowY=D.overflow[2]}));
for(I in z){var za=z[I];if(Cd.exec(za)){delete z[I];var Ia=Ia||"toggle"===za;za!==(V?"hide":"show")&&aa.push(I)}}if(z=aa.length)for(za=A._data(w,"fxshow")||A._data(w,"fxshow",{}),("hidden"in za)&&(V=za.hidden),Ia&&(za.hidden=!V),V?A(w).show():N.done(function(){A(w).hide()}),N.done(function(){var bb;A.removeData(w,"fxshow",!0);for(bb in U)A.style(w,bb,U[bb])}),I=0;I<z;I++){Ia=aa[I];var Na=N.createTween(Ia,V?za[Ia]:0);U[Ia]=za[Ia]||A.style(w,Ia);Ia in za||(za[Ia]=Na.start,V&&(Na.end=Na.start,Na.start=
"width"===Ia||"height"===Ia?1:0))}}],Ob={"*":[function(w,z){var D=this.createTween(w,z),I=Dd.exec(z),N=D.cur(),L=+N||0,U=1,aa=20;if(I){z=+I[2];var V=I[3]||(A.cssNumber[w]?"":"px");if("px"!==V&&L){L=A.css(D.elem,w,!0)||z||1;do U=U||".5",L/=U,A.style(D.elem,w,L+V);while(U!==(U=D.cur()/N)&&1!==U&&--aa)}D.unit=V;D.start=L;D.end=I[1]?L+(I[1]+1)*z:z}return D}]};A.Animation=A.extend(fa,{tweener:function(w,z){A.isFunction(w)?(z=w,w=["*"]):w=w.split(" ");for(var D,I=0,N=w.length;I<N;I++)D=w[I],Ob[D]=Ob[D]||
[],Ob[D].unshift(z)},prefilter:function(w,z){z?Sb.unshift(w):Sb.push(w)}});A.Tween=Ea;Ea.prototype={constructor:Ea,init:function(w,z,D,I,N,L){this.elem=w;this.prop=D;this.easing=N||"swing";this.options=z;this.start=this.now=this.cur();this.end=I;this.unit=L||(A.cssNumber[D]?"":"px")},cur:function(){var w=Ea.propHooks[this.prop];return w&&w.get?w.get(this):Ea.propHooks._default.get(this)},run:function(w){var z,D=Ea.propHooks[this.prop];this.pos=this.options.duration?z=A.easing[this.easing](w,this.options.duration*
w,0,1,this.options.duration):z=w;this.now=(this.end-this.start)*z+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);D&&D.set?D.set(this):Ea.propHooks._default.set(this);return this}};Ea.prototype.init.prototype=Ea.prototype;Ea.propHooks={_default:{get:function(w){return null==w.elem[w.prop]||w.elem.style&&null!=w.elem.style[w.prop]?(w=A.css(w.elem,w.prop,!1,""))&&"auto"!==w?w:0:w.elem[w.prop]},set:function(w){if(A.fx.step[w.prop])A.fx.step[w.prop](w);else w.elem.style&&
(null!=w.elem.style[A.cssProps[w.prop]]||A.cssHooks[w.prop])?A.style(w.elem,w.prop,w.now+w.unit):w.elem[w.prop]=w.now}}};Ea.propHooks.scrollTop=Ea.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}};A.each(["toggle","show","hide"],function(w,z){var D=A.fn[z];A.fn[z]=function(I,N,L){return null==I||"boolean"===typeof I||!w&&A.isFunction(I)&&A.isFunction(N)?D.apply(this,arguments):this.animate(Da(z,!0),I,N,L)}});A.fn.extend({fadeTo:function(w,z,D,I){return this.filter(H).css("opacity",
0).show().end().animate({opacity:z},w,D,I)},animate:function(w,z,D,I){var N=A.isEmptyObject(w),L=A.speed(z,D,I);z=function(){var U=fa(this,A.extend({},w),L);N&&U.stop(!0)};return N||!1===L.queue?this.each(z):this.queue(L.queue,z)},stop:function(w,z,D){var I=function(N){var L=N.stop;delete N.stop;L(D)};"string"!==typeof w&&(D=z,z=w,w=c);z&&!1!==w&&this.queue(w||"fx",[]);return this.each(function(){var N=!0,L=null!=w&&w+"queueHooks",U=A.timers,aa=A._data(this);if(L)aa[L]&&aa[L].stop&&I(aa[L]);else for(L in aa)aa[L]&&
aa[L].stop&&Ed.test(L)&&I(aa[L]);for(L=U.length;L--;)U[L].elem!==this||null!=w&&U[L].queue!==w||(U[L].anim.stop(D),N=!1,U.splice(L,1));!N&&D||A.dequeue(this,w)})}});A.each({slideDown:Da("show"),slideUp:Da("hide"),slideToggle:Da("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,z){A.fn[w]=function(D,I,N){return this.animate(z,D,I,N)}});A.speed=function(w,z,D){var I=w&&"object"===typeof w?A.extend({},w):{complete:D||!D&&z||A.isFunction(w)&&w,duration:w,
easing:D&&z||z&&!A.isFunction(z)&&z};I.duration=A.fx.off?0:"number"===typeof I.duration?I.duration:I.duration in A.fx.speeds?A.fx.speeds[I.duration]:A.fx.speeds._default;if(null==I.queue||!0===I.queue)I.queue="fx";I.old=I.complete;I.complete=function(){A.isFunction(I.old)&&I.old.call(this);I.queue&&A.dequeue(this,I.queue)};return I};A.easing={linear:function(w){return w},swing:function(w){return.5-Math.cos(w*Math.PI)/2}};A.timers=[];A.fx=Ea.prototype.init;A.fx.tick=function(){var w=A.timers,z=0;for(Hb=
A.now();z<w.length;z++){var D=w[z];D()||w[z]!==D||w.splice(z--,1)}w.length||A.fx.stop();Hb=c};A.fx.timer=function(w){w()&&A.timers.push(w)&&!Wb&&(Wb=setInterval(A.fx.tick,A.fx.interval))};A.fx.interval=13;A.fx.stop=function(){clearInterval(Wb);Wb=null};A.fx.speeds={slow:600,fast:200,_default:400};A.fx.step={};A.expr&&A.expr.filters&&(A.expr.filters.animated=function(w){return A.grep(A.timers,function(z){return w===z.elem}).length});var Gc=/^(?:body|html)$/i;A.fn.offset=function(w){if(arguments.length)return w===
c?this:this.each(function(aa){A.offset.setOffset(this,w,aa)});var z,D,I,N={top:0,left:0};if(I=(D=this[0])&&D.ownerDocument){if((z=I.body)===D)return A.offset.bodyOffset(D);var L=I.documentElement;if(!A.contains(L,D))return N;"undefined"!==typeof D.getBoundingClientRect&&(N=D.getBoundingClientRect());D=Fa(I);I=L.clientTop||z.clientTop||0;z=L.clientLeft||z.clientLeft||0;var U=D.pageYOffset||L.scrollTop;return{top:N.top+U-I,left:N.left+(D.pageXOffset||L.scrollLeft)-z}}};A.offset={bodyOffset:function(w){var z=
w.offsetTop,D=w.offsetLeft;A.support.doesNotIncludeMarginInBodyOffset&&(z+=parseFloat(A.css(w,"marginTop"))||0,D+=parseFloat(A.css(w,"marginLeft"))||0);return{top:z,left:D}},setOffset:function(w,z,D){var I=A.css(w,"position");"static"===I&&(w.style.position="relative");var N=A(w),L=N.offset(),U=A.css(w,"top"),aa=A.css(w,"left"),V={};("absolute"===I||"fixed"===I)&&-1<A.inArray("auto",[U,aa])?(aa=N.position(),I=aa.top,aa=aa.left):(I=parseFloat(U)||0,aa=parseFloat(aa)||0);A.isFunction(z)&&(z=z.call(w,
D,L));null!=z.top&&(V.top=z.top-L.top+I);null!=z.left&&(V.left=z.left-L.left+aa);"using"in z?z.using.call(w,V):N.css(V)}};A.fn.extend({position:function(){if(this[0]){var w=this[0],z=this.offsetParent(),D=this.offset(),I=Gc.test(z[0].nodeName)?{top:0,left:0}:z.offset();D.top-=parseFloat(A.css(w,"marginTop"))||0;D.left-=parseFloat(A.css(w,"marginLeft"))||0;I.top+=parseFloat(A.css(z[0],"borderTopWidth"))||0;I.left+=parseFloat(A.css(z[0],"borderLeftWidth"))||0;return{top:D.top-I.top,left:D.left-I.left}}},
offsetParent:function(){return this.map(function(){for(var w=this.offsetParent||X.body;w&&!Gc.test(w.nodeName)&&"static"===A.css(w,"position");)w=w.offsetParent;return w||X.body})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,z){var D=/Y/.test(z);A.fn[w]=function(I){return A.access(this,function(N,L,U){var aa=Fa(N);if(U===c)return aa?z in aa?aa[z]:aa.document.documentElement[L]:N[L];aa?aa.scrollTo(D?A(aa).scrollLeft():U,D?U:A(aa).scrollTop()):N[L]=U},w,I,arguments.length,
null)}});A.each({Height:"height",Width:"width"},function(w,z){A.each({padding:"inner"+w,content:z,"":"outer"+w},function(D,I){A.fn[I]=function(N,L){var U=arguments.length&&(D||"boolean"!==typeof N),aa=D||(!0===N||!0===L?"margin":"border");return A.access(this,function(V,pa,ua){return A.isWindow(V)?V.document.documentElement["client"+w]:9===V.nodeType?(pa=V.documentElement,Math.max(V.body["scroll"+w],pa["scroll"+w],V.body["offset"+w],pa["offset"+w],pa["client"+w])):ua===c?A.css(V,pa,ua,aa):A.style(V,
pa,ua,aa)},z,U?N:c,U,null)}})});a.jQuery=a.$=A;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return A})})(window);if("jumpshare.com"==location.hostname)var console={log:function(){}};/*
 jQuery UI - v1.8.24 - 2012-09-28
 https://github.com/jquery/jquery-ui
 Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.effects.core.js, jquery.effects.blind.js, jquery.effects.bounce.js, jquery.effects.clip.js, jquery.effects.drop.js, jquery.effects.explode.js, jquery.effects.fade.js, jquery.effects.fold.js, jquery.effects.highlight.js, jquery.effects.pulsate.js, jquery.effects.scale.js, jquery.effects.shake.js, jquery.effects.slide.js, jquery.effects.transfer.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.tabs.js
 Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,c){function b(k,l){var m=k.nodeName.toLowerCase();if("area"===m){l=k.parentNode;m=l.name;var n;return k.href&&m&&"map"===l.nodeName.toLowerCase()?(n=a("img[usemap=#"+m+"]")[0],!!n&&h(n)):!1}return(/input|select|textarea|button|object/.test(m)?!k.disabled:"a"==m?k.href||l:l)&&h(k)}function h(k){return!a(k).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.24",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(k,l){return"number"==typeof k?this.each(function(){var m=
this;setTimeout(function(){a(m).focus();l&&l.call(m)},k)}):this._focus.apply(this,arguments)},scrollParent:function(){var k;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?k=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):k=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!k.length?a(document):k},zIndex:function(k){if(k!==c)return this.css("zIndex",k);if(this.length){k=a(this[0]);for(var l;k.length&&k[0]!==document;){l=k.css("position");if("absolute"===l||"relative"===l||"fixed"===l)if(l=parseInt(k.css("zIndex"),10),!isNaN(l)&&0!==l)return l;k=k.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(k){k.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(k,l){function m(q,u,v,x){return a.each(n,function(){u-=parseFloat(a.curCSS(q,"padding"+this,!0))||0;v&&(u-=parseFloat(a.curCSS(q,"border"+this+"Width",!0))||0);x&&(u-=parseFloat(a.curCSS(q,"margin"+this,!0))||0)}),u}var n="Width"===l?["Left","Right"]:["Top","Bottom"],p=l.toLowerCase(),r={innerWidth:a.fn.innerWidth,
innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+l]=function(q){return q===c?r["inner"+l].call(this):this.each(function(){a(this).css(p,m(this,q)+"px")})};a.fn["outer"+l]=function(q,u){return"number"!=typeof q?r["outer"+l].call(this,q):this.each(function(){a(this).css(p,m(this,q,!0,u)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(k){return function(l){return!!a.data(l,k)}}):function(k,l,m){return!!a.data(k,
m[3])},focusable:function(k){return b(k,!isNaN(a.attr(k,"tabindex")))},tabbable:function(k){var l=a.attr(k,"tabindex"),m=isNaN(l);return(m||0<=l)&&b(k,!m)}}),a(function(){var k=document.body,l=k.appendChild(l=document.createElement("div"));l.offsetHeight;a.extend(l.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===l.offsetHeight;a.support.selectstart="onselectstart"in l;k.removeChild(l).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(k,
l,m){k=a.ui[k].prototype;for(var n in m)k.plugins[n]=k.plugins[n]||[],k.plugins[n].push([l,m[n]])},call:function(k,l,m){if((l=k.plugins[l])&&k.element[0].parentNode)for(var n=0;n<l.length;n++)k.options[l[n][0]]&&l[n][1].apply(k.element,m)}},contains:function(k,l){return document.compareDocumentPosition?k.compareDocumentPosition(l)&16:k!==l&&k.contains(l)},hasScroll:function(k,l){if("hidden"===a(k).css("overflow"))return!1;l=l&&"left"===l?"scrollLeft":"scrollTop";var m=!1;return 0<k[l]?!0:(k[l]=1,
m=0<k[l],k[l]=0,m)},isOverAxis:function(k,l,m){return k>l&&k<l+m},isOver:function(k,l,m,n,p,r){return a.ui.isOverAxis(k,m,p)&&a.ui.isOverAxis(l,n,r)}}))})(jQuery);
(function(a,c){if(a.cleanData){var b=a.cleanData;a.cleanData=function(k){for(var l=0,m;null!=(m=k[l]);l++)try{a(m).triggerHandler("remove")}catch(n){}b(k)}}else{var h=a.fn.remove;a.fn.remove=function(k,l){return this.each(function(){return l||(!k||a.filter(k,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(m){}}),h.call(a(this),k,l)})}}a.widget=function(k,l,m){var n=k.split(".")[0];k=k.split(".")[1];var p=n+"-"+k;m||(m=l,l=a.Widget);a.expr[":"][p]=
function(r){return!!a.data(r,k)};a[n]=a[n]||{};a[n][k]=function(r,q){arguments.length&&this._createWidget(r,q)};l=new l;l.options=a.extend(!0,{},l.options);a[n][k].prototype=a.extend(!0,l,{namespace:n,widgetName:k,widgetEventPrefix:a[n][k].prototype.widgetEventPrefix||k,widgetBaseClass:p},m);a.widget.bridge(k,a[n][k])};a.widget.bridge=function(k,l){a.fn[k]=function(m){var n="string"==typeof m,p=Array.prototype.slice.call(arguments,1),r=this;return m=!n&&p.length?a.extend.apply(null,[!0,m].concat(p)):
m,n&&"_"===m.charAt(0)?r:(n?this.each(function(){var q=a.data(this,k),u=q&&a.isFunction(q[m])?q[m].apply(q,p):q;if(u!==q&&u!==c)return r=u,!1}):this.each(function(){var q=a.data(this,k);q?q.option(m||{})._init():a.data(this,k,new l(m,this))}),r)}};a.Widget=function(k,l){arguments.length&&this._createWidget(k,l)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(k,l){a.data(l,this.widgetName,this);this.element=a(l);this.options=a.extend(!0,{},
this.options,this._getCreateOptions(),k);var m=this;this.element.bind("remove."+this.widgetName,function(){m.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(k,l){var m=k;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof k){if(l===c)return this.options[k];m={};m[k]=l}return this._setOptions(m),this},_setOptions:function(k){var l=this;return a.each(k,function(m,n){l._setOption(m,n)}),this},_setOption:function(k,l){return this.options[k]=l,"disabled"===k&&this.widget()[l?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
l),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(k,l,m){var n,p=this.options[k];m=m||{};l=a.Event(l);l.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase();l.target=this.element[0];if(k=l.originalEvent)for(n in k)n in l||(l[n]=k[n]);return this.element.trigger(l,m),!(a.isFunction(p)&&!1===p.call(this.element[0],l,m)||l.isDefaultPrevented())}}})(jQuery);
(function(a,c){var b=!1;a(document).mouseup(function(h){b=!1});a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(k){return h._mouseDown(k)}).bind("click."+this.widgetName,function(k){if(!0===a.data(k.target,h.widgetName+".preventClickEvent"))return a.removeData(k.target,h.widgetName+".preventClickEvent"),k.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(h){if(!b){this._mouseStarted&&this._mouseUp(h);this._mouseDownEvent=h;var k=this,l=1==h.which,m="string"==typeof this.options.cancel&&h.target.nodeName?a(h.target).closest(this.options.cancel).length:!1;if(!l||m||!this._mouseCapture(h))return!0;(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=
setTimeout(function(){k.mouseDelayMet=!0},this.options.delay));return this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=!1!==this._mouseStart(h),!this._mouseStarted)?(h.preventDefault(),!0):(!0===a.data(h.target,this.widgetName+".preventClickEvent")&&a.removeData(h.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return k._mouseMove(n)},this._mouseUpDelegate=function(n){return k._mouseUp(n)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate),h.preventDefault(),b=!0,!0)}},_mouseMove:function(h){return!a.browser.msie||9<=document.documentMode||h.button?this._mouseStarted?(this._mouseDrag(h),h.preventDefault()):(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,h),this._mouseStarted?this._mouseDrag(h):this._mouseUp(h)),!this._mouseStarted):this._mouseUp(h)},_mouseUp:function(h){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,h.target==this._mouseDownEvent.target&&a.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h)),!1},_mouseDistanceMet:function(h){return Math.max(Math.abs(this._mouseDownEvent.pageX-h.pageX),Math.abs(this._mouseDownEvent.pageY-h.pageY))>=this.options.distance},_mouseDelayMet:function(h){return this.mouseDelayMet},_mouseStart:function(h){},_mouseDrag:function(h){},_mouseStop:function(h){},_mouseCapture:function(h){return!0}})})(jQuery);
(function(a,c){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var h=this.options;return this.helper||h.disabled||a(b.target).is(".ui-resizable-handle")?
!1:(this.handle=this._getHandle(b),this.handle?(h.iframeFix&&a(!0===h.iframeFix?"iframe":h.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var h=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),
this.originalPageX=b.pageX,this.originalPageY=b.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),h.containment&&this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,h){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!h){h=
this._uiHash();if(!1===this._trigger("drag",b,h))return this._mouseUp({}),!1;this.position=h.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var h=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(h=a.ui.ddmanager.drop(this,b));this.dropped&&(h=this.dropped,this.dropped=!1);
for(var k=this.element[0],l=!1;k&&=k.parentNode;)k==document&&(l=!0);if(!l&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!h||"valid"==this.options.revert&&h||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,h)){var m=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==m._trigger("stop",b)&&m._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var h=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(h=!0)}),h},_createHelper:function(b){var h=this.options;b=a.isFunction(h.helper)?a(h.helper.apply(this.element[0],
[b])):"clone"==h.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"==h.appendTo?this.element[0].parentNode:h.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),
10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{b=a(b.containment);var h=b[0];if(h){b.offset();var k="hidden"!=a(h).css("overflow");this.containment=[(parseInt(a(h).css("borderLeftWidth"),10)||0)+(parseInt(a(h).css("paddingLeft"),10)||0),(parseInt(a(h).css("borderTopWidth"),
10)||0)+(parseInt(a(h).css("paddingTop"),10)||0),(k?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(a(h).css("borderLeftWidth"),10)||0)-(parseInt(a(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(k?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(a(h).css("borderTopWidth"),10)||0)-(parseInt(a(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,h){h||=this.position;b="absolute"==b?1:-1;var k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(k[0].tagName);return{top:h.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:k.scrollTop())*b),left:h.left+this.offset.relative.left*
b+this.offset.parent.left*b-(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())*b)}},_generatePosition:function(b){var h=this.options,k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(k[0].tagName),m=b.pageX,n=b.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){var p=
this.relative_container.offset();p=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]}else p=this.containment;b.pageX-this.offset.click.left<p[0]&&(m=p[0]+this.offset.click.left);b.pageY-this.offset.click.top<p[1]&&(n=p[1]+this.offset.click.top);b.pageX-this.offset.click.left>p[2]&&(m=p[2]+this.offset.click.left);b.pageY-this.offset.click.top>p[3]&&(n=p[3]+this.offset.click.top)}h.grid&&(n=h.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/
h.grid[1])*h.grid[1]:this.originalPageY,n=p?n-this.offset.click.top<p[1]||n-this.offset.click.top>p[3]?n-this.offset.click.top<p[1]?n+h.grid[1]:n-h.grid[1]:n:n,m=h.grid[0]?this.originalPageX+Math.round((m-this.originalPageX)/h.grid[0])*h.grid[0]:this.originalPageX,m=p?m-this.offset.click.left<p[0]||m-this.offset.click.left>p[2]?m-this.offset.click.left<p[0]?m+h.grid[0]:m-h.grid[0]:m:m)}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&526>a.browser.version&&
"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:k.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&526>a.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(b,h,k){return k=k||this._uiHash(),a.ui.plugin.call(this,b,[h,k]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,h,k)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.24"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,h){var k=a(this).data("draggable"),l=k.options,
m=a.extend({},h,{item:k.element});k.sortables=[];a(l.connectToSortable).each(function(){var n=a.data(this,"sortable");n&&!n.options.disabled&&(k.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",b,m))})},stop:function(b,h){var k=a(this).data("draggable"),l=a.extend({},h,{item:k.element});a.each(k.sortables,function(){this.instance.isOver?(this.instance.isOver=0,k.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=
!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==k.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,l))})},drag:function(b,h){var k=a(this).data("draggable"),l=this;a.each(k.sortables,function(m){this.instance.positionAbs=k.positionAbs;this.instance.helperProportions=k.helperProportions;this.instance.offset.click=k.offset.click;this.instance._intersectsWith(this.instance.containerCache)?
(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(l).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return h.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=k.offset.click.top,this.instance.offset.click.left=k.offset.click.left,this.instance.offset.parent.left-=
k.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=k.offset.parent.top-this.instance.offset.parent.top,k._trigger("toSortable",b),k.dropped=this.instance.element,k.currentItem=k.element,this.instance.fromOutside=k),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,
!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),k._trigger("fromSortable",b),k.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,h){b=a("body");h=a(this).data("draggable").options;b.css("cursor")&&(h._cursor=b.css("cursor"));b.css("cursor",h.cursor)},stop:function(b,h){b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable",
"opacity",{start:function(b,h){b=a(h.helper);h=a(this).data("draggable").options;b.css("opacity")&&(h._opacity=b.css("opacity"));b.css("opacity",h.opacity)},stop:function(b,h){b=a(this).data("draggable").options;b._opacity&&a(h.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,h){b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b,h){h=a(this).data("draggable");
var k=h.options,l=!1;h.scrollParent[0]!=document&&"HTML"!=h.scrollParent[0].tagName?(k.axis&&"x"==k.axis||(h.overflowOffset.top+h.scrollParent[0].offsetHeight-b.pageY<k.scrollSensitivity?h.scrollParent[0].scrollTop=l=h.scrollParent[0].scrollTop+k.scrollSpeed:b.pageY-h.overflowOffset.top<k.scrollSensitivity&&(h.scrollParent[0].scrollTop=l=h.scrollParent[0].scrollTop-k.scrollSpeed)),k.axis&&"y"==k.axis||(h.overflowOffset.left+h.scrollParent[0].offsetWidth-b.pageX<k.scrollSensitivity?h.scrollParent[0].scrollLeft=
l=h.scrollParent[0].scrollLeft+k.scrollSpeed:b.pageX-h.overflowOffset.left<k.scrollSensitivity&&(h.scrollParent[0].scrollLeft=l=h.scrollParent[0].scrollLeft-k.scrollSpeed))):(k.axis&&"x"==k.axis||(b.pageY-a(document).scrollTop()<k.scrollSensitivity?l=a(document).scrollTop(a(document).scrollTop()-k.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<k.scrollSensitivity&&(l=a(document).scrollTop(a(document).scrollTop()+k.scrollSpeed))),k.axis&&"y"==k.axis||(b.pageX-a(document).scrollLeft()<
k.scrollSensitivity?l=a(document).scrollLeft(a(document).scrollLeft()-k.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<k.scrollSensitivity&&(l=a(document).scrollLeft(a(document).scrollLeft()+k.scrollSpeed))));!1!==l&&a.ui.ddmanager&&!k.dropBehaviour&&a.ui.ddmanager.prepareOffsets(h,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,h){var k=a(this).data("draggable");b=k.options;k.snapElements=[];a(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var l=
a(this),m=l.offset();this!=k.element[0]&&k.snapElements.push({item:this,width:l.outerWidth(),height:l.outerHeight(),top:m.top,left:m.left})})},drag:function(b,h){for(var k=a(this).data("draggable"),l=k.options,m=l.snapTolerance,n=h.offset.left,p=n+k.helperProportions.width,r=h.offset.top,q=r+k.helperProportions.height,u=k.snapElements.length-1;0<=u;u--){var v=k.snapElements[u].left,x=v+k.snapElements[u].width,y=k.snapElements[u].top,B=y+k.snapElements[u].height;if(v-m<n&&n<x+m&&y-m<r&&r<B+m||v-m<
n&&n<x+m&&y-m<q&&q<B+m||v-m<p&&p<x+m&&y-m<r&&r<B+m||v-m<p&&p<x+m&&y-m<q&&q<B+m){if("inner"!=l.snapMode){var C=Math.abs(y-q)<=m,H=Math.abs(B-r)<=m,F=Math.abs(v-p)<=m,E=Math.abs(x-n)<=m;C&&(h.position.top=k._convertPositionTo("relative",{top:y-k.helperProportions.height,left:0}).top-k.margins.top);H&&(h.position.top=k._convertPositionTo("relative",{top:B,left:0}).top-k.margins.top);F&&(h.position.left=k._convertPositionTo("relative",{top:0,left:v-k.helperProportions.width}).left-k.margins.left);E&&
(h.position.left=k._convertPositionTo("relative",{top:0,left:x}).left-k.margins.left)}var G=C||H||F||E;"outer"!=l.snapMode&&(C=Math.abs(y-r)<=m,H=Math.abs(B-q)<=m,F=Math.abs(v-n)<=m,E=Math.abs(x-p)<=m,C&&(h.position.top=k._convertPositionTo("relative",{top:y,left:0}).top-k.margins.top),H&&(h.position.top=k._convertPositionTo("relative",{top:B-k.helperProportions.height,left:0}).top-k.margins.top),F&&(h.position.left=k._convertPositionTo("relative",{top:0,left:v}).left-k.margins.left),E&&(h.position.left=
k._convertPositionTo("relative",{top:0,left:x-k.helperProportions.width}).left-k.margins.left));!k.snapElements[u].snapping&&(C||H||F||E||G)&&k.options.snap.snap&&k.options.snap.snap.call(k.element,b,a.extend(k._uiHash(),{snapItem:k.snapElements[u].item}));k.snapElements[u].snapping=C||H||F||E||G}else k.snapElements[u].snapping&&k.options.snap.release&&k.options.snap.release.call(k.element,b,a.extend(k._uiHash(),{snapItem:k.snapElements[u].item})),k.snapElements[u].snapping=!1}}});a.ui.plugin.add("draggable",
"stack",{start:function(b,h){b=a(this).data("draggable").options;b=a.makeArray(a(b.stack)).sort(function(l,m){return(parseInt(a(l).css("zIndex"),10)||0)-(parseInt(a(m).css("zIndex"),10)||0)});if(b.length){var k=parseInt(b[0].style.zIndex)||0;a(b).each(function(l){this.style.zIndex=k+l});this[0].style.zIndex=k+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,h){b=a(h.helper);h=a(this).data("draggable").options;b.css("zIndex")&&(h._zIndex=b.css("zIndex"));b.css("zIndex",h.zIndex)},
stop:function(b,h){b=a(this).data("draggable").options;b._zIndex&&a(h.helper).css("zIndex",b._zIndex)}})})(jQuery);
(function(a,c){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,h=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(h)?h:function(k){return k.is(h)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],h=0;h<b.length;h++)b[h]==this&&b.splice(h,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,h){"accept"==b&&(this.accept=a.isFunction(h)?h:function(k){return k.is(h)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var h=a.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);h&&this._trigger("activate",b,this.ui(h))},_deactivate:function(b){var h=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);h&&this._trigger("deactivate",b,this.ui(h))},_over:function(b){var h=a.ui.ddmanager.current;h&&(h.currentItem||h.element)[0]!=this.element[0]&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
b,this.ui(h)))},_out:function(b){var h=a.ui.ddmanager.current;h&&(h.currentItem||h.element)[0]!=this.element[0]&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(h)))},_drop:function(b,h){var k=h||a.ui.ddmanager.current;if(!k||(k.currentItem||k.element)[0]==this.element[0])return!1;var l=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var m=
a.data(this,"droppable");if(m.options.greedy&&!m.options.disabled&&m.options.scope==k.options.scope&&m.accept.call(m.element[0],k.currentItem||k.element)&&a.ui.intersect(k,a.extend(m,{offset:m.element.offset()}),m.options.tolerance))return l=!0,!1}),l?!1:this.accept.call(this.element[0],k.currentItem||k.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(k)),
this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.24"});a.ui.intersect=function(b,h,k){if(!h.offset)return!1;var l=(b.positionAbs||b.position.absolute).left,m=l+b.helperProportions.width,n=(b.positionAbs||b.position.absolute).top,p=n+b.helperProportions.height,r=h.offset.left,q=r+h.proportions.width,u=h.offset.top,v=u+h.proportions.height;switch(k){case "fit":return r<=l&&m<=
q&&u<=n&&p<=v;case "intersect":return r<l+b.helperProportions.width/2&&m-b.helperProportions.width/2<q&&u<n+b.helperProportions.height/2&&p-b.helperProportions.height/2<v;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,u,r,h.proportions.height,h.proportions.width);case "touch":return(n>=u&&n<=v||p>=u&&p<=v||n<u&&p>v)&&(l>=r&&l<=q||m>=r&&m<=q||l<r&&m>q);default:return!1}};
a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,h){var k=a.ui.ddmanager.droppables[b.options.scope]||[],l=h?h.type:null,m=(b.currentItem||b.element).find(":data(droppable)").andSelf(),n=0;a:for(;n<k.length;n++)if(!(k[n].options.disabled||b&&!k[n].accept.call(k[n].element[0],b.currentItem||b.element))){for(var p=0;p<m.length;p++)if(m[p]==k[n].element[0]){k[n].proportions.height=0;continue a}k[n].visible="none"!=k[n].element.css("display");k[n].visible&&("mousedown"==
l&&k[n]._activate.call(k[n],h),k[n].offset=k[n].element.offset(),k[n].proportions={width:k[n].element[0].offsetWidth,height:k[n].element[0].offsetHeight})}},drop:function(b,h){var k=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(k=this._drop.call(this,h)||k),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=
0,this._deactivate.call(this,h)))}),k},dragStart:function(b,h){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,h)})},drag:function(b,h){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,h);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var k=a.ui.intersect(b,this,this.options.tolerance);if(k=k||1!=this.isover?k&&0==this.isover?
"isover":null:"isout"){var l;if(this.options.greedy){var m=this.options.scope,n=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===m});n.length&&(l=a.data(n[0],"droppable"),l.greedyChild="isover"==k?1:0)}l&&"isover"==k&&(l.isover=0,l.isout=1,l._out.call(l,h));this[k]=1;this["isout"==k?"isover":"isout"]=0;this["isover"==k?"_over":"_out"].call(this,h);l&&"isout"==k&&(l.isout=0,l.isover=1,l._over.call(l,h))}}})},dragStop:function(b,h){b.element.parents(":not(body,html)").unbind("scroll.droppable");
b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,h)}}})(jQuery);
(function(a,c){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var k=this,l=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=l.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var m=this.handles.split(",");this.handles=
{};for(var n=0;n<m.length;n++){var p=a.trim(m[n]),r=a('<div class="ui-resizable-handle ui-resizable-'+p+'"></div>');r.css({zIndex:l.zIndex});"se"==p&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[p]=".ui-resizable-"+p;this.element.append(r)}}this._renderAxis=function(q){q=q||this.element;for(var u in this.handles){this.handles[u].constructor==String&&(this.handles[u]=a(this.handles[u],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var v=
a(this.handles[u],this.element);v=/sw|ne|nw|se|n|s/.test(u)?v.outerHeight():v.outerWidth();var x=["padding",/ne|nw|n/.test(u)?"Top":/se|sw|s/.test(u)?"Bottom":/^e$/.test(u)?"Right":"Left"].join("");q.css(x,v);this._proportionallyResize()}a(this.handles[u])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!k.resizing){if(this.className)var q=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);k.axis=
q&&q[1]?q[1]:"se"}});l.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){l.disabled||(a(this).removeClass("ui-resizable-autohide"),k._handles.show())},function(){l.disabled||k.resizing||(a(this).addClass("ui-resizable-autohide"),k._handles.hide())}));this._mouseInit()},destroy:function(){this._mouseDestroy();var k=function(m){a(m).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){k(this.element);var l=this.element;l.after(this.originalElement.css({position:l.css("position"),width:l.outerWidth(),height:l.outerHeight(),top:l.css("top"),left:l.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),k(this.originalElement),this},_mouseCapture:function(k){var l=!1,m;for(m in this.handles)a(this.handles[m])[0]==k.target&&(l=!0);return!this.options.disabled&&l},_mouseStart:function(k){var l=this.options,m=this.element.position(),
n=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:m.top,left:m.left});this._renderProxy();m=b(this.helper.css("left"));var p=b(this.helper.css("top"));l.containment&&(m+=a(l.containment).scrollLeft()||0,p+=a(l.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:m,top:p};this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:
{width:n.width(),height:n.height()};this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()};this.originalPosition={left:m,top:p};this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()};this.originalMousePosition={left:k.pageX,top:k.pageY};this.aspectRatio="number"==typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1;l=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",
"auto"==l?this.axis+"-resize":l),n.addClass("ui-resizable-resizing"),this._propagate("start",k),!0},_mouseDrag:function(k){var l=this.helper,m=this.originalMousePosition,n=this._change[this.axis];if(!n)return!1;m=n.apply(this,[k,k.pageX-m.left||0,k.pageY-m.top||0]);this._updateVirtualBoundaries(k.shiftKey);if(this._aspectRatio||k.shiftKey)m=this._updateRatio(m,k);return m=this._respectSize(m,k),this._propagate("resize",k),l.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(m),this._trigger("resize",k,this.ui()),!1},_mouseStop:function(k){this.resizing=!1;var l=this.options;if(this._helper){var m=this._proportionallyResizeElements,n=m.length&&/textarea/i.test(m[0].nodeName);m=n&&a.ui.hasScroll(m[0],"left")?0:this.sizeDiff.height;n=n?0:this.sizeDiff.width;n={width:this.helper.width()-n,height:this.helper.height()-m};m=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null;var p=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;l.animate||this.element.css(a.extend(n,{top:p,left:m}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!l.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",k),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var l=
this.options;l={minWidth:h(l.minWidth)?l.minWidth:0,maxWidth:h(l.maxWidth)?l.maxWidth:Infinity,minHeight:h(l.minHeight)?l.minHeight:0,maxHeight:h(l.maxHeight)?l.maxHeight:Infinity};if(this._aspectRatio||k){k=l.minHeight*this.aspectRatio;var m=l.minWidth/this.aspectRatio;var n=l.maxHeight*this.aspectRatio;var p=l.maxWidth/this.aspectRatio;k>l.minWidth&&(l.minWidth=k);m>l.minHeight&&(l.minHeight=m);n<l.maxWidth&&(l.maxWidth=n);p<l.maxHeight&&(l.maxHeight=p)}this._vBoundaries=l},_updateCache:function(k){this.offset=
this.helper.offset();h(k.left)&&(this.position.left=k.left);h(k.top)&&(this.position.top=k.top);h(k.height)&&(this.size.height=k.height);h(k.width)&&(this.size.width=k.width)},_updateRatio:function(k,l){l=this.position;var m=this.size,n=this.axis;return h(k.height)?k.width=k.height*this.aspectRatio:h(k.width)&&(k.height=k.width/this.aspectRatio),"sw"==n&&(k.left=l.left+(m.width-k.width),k.top=null),"nw"==n&&(k.top=l.top+(m.height-k.height),k.left=l.left+(m.width-k.width)),k},_respectSize:function(k,
l){l=this._vBoundaries;var m=this.axis,n=h(k.width)&&l.maxWidth&&l.maxWidth<k.width,p=h(k.height)&&l.maxHeight&&l.maxHeight<k.height,r=h(k.width)&&l.minWidth&&l.minWidth>k.width,q=h(k.height)&&l.minHeight&&l.minHeight>k.height;r&&(k.width=l.minWidth);q&&(k.height=l.minHeight);n&&(k.width=l.maxWidth);p&&(k.height=l.maxHeight);var u=this.originalPosition.left+this.originalSize.width,v=this.position.top+this.size.height,x=/sw|nw|w/.test(m);m=/nw|ne|n/.test(m);r&&x&&(k.left=u-l.minWidth);n&&x&&(k.left=
u-l.maxWidth);q&&m&&(k.top=v-l.minHeight);p&&m&&(k.top=v-l.maxHeight);l=!k.width&&!k.height;return l&&!k.left&&k.top?k.top=null:l&&!k.top&&k.left&&(k.left=null),k},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var k=this.helper||this.element,l=0;l<this._proportionallyResizeElements.length;l++){var m=this._proportionallyResizeElements[l];if(!this.borderDif){var n=[m.css("borderTopWidth"),m.css("borderRightWidth"),m.css("borderBottomWidth"),m.css("borderLeftWidth")],
p=[m.css("paddingTop"),m.css("paddingRight"),m.css("paddingBottom"),m.css("paddingLeft")];this.borderDif=a.map(n,function(r,q){r=parseInt(r,10)||0;q=parseInt(p[q],10)||0;return r+q})}a.browser.msie&&(a(k).is(":hidden")||a(k).parents(":hidden").length)||m.css({height:k.height()-this.borderDif[0]-this.borderDif[2]||0,width:k.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var k=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||
a('<div style="overflow:hidden;"></div>');var l=a.browser.msie&&7>a.browser.version,m=l?1:0;l=l?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+l,height:this.element.outerHeight()+l,position:"absolute",left:this.elementOffset.left-m+"px",top:this.elementOffset.top-m+"px",zIndex:++k.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(k,l,m){return{width:this.originalSize.width+l}},w:function(k,l,m){return{left:this.originalPosition.left+
l,width:this.originalSize.width-l}},n:function(k,l,m){return{top:this.originalPosition.top+m,height:this.originalSize.height-m}},s:function(k,l,m){return{height:this.originalSize.height+m}},se:function(k,l,m){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[k,l,m]))},sw:function(k,l,m){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[k,l,m]))},ne:function(k,l,m){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,
[k,l,m]))},nw:function(k,l,m){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[k,l,m]))}},_propagate:function(k,l){a.ui.plugin.call(this,k,[l,this.ui()]);"resize"!=k&&this._trigger(k,l,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.24"});a.ui.plugin.add("resizable",
"alsoResize",{start:function(k,l){k=a(this).data("resizable").options;var m=function(n){a(n).each(function(){var p=a(this);p.data("resizable-alsoresize",{width:parseInt(p.width(),10),height:parseInt(p.height(),10),left:parseInt(p.css("left"),10),top:parseInt(p.css("top"),10)})})};"object"!=typeof k.alsoResize||k.alsoResize.parentNode?m(k.alsoResize):k.alsoResize.length?(k.alsoResize=k.alsoResize[0],m(k.alsoResize)):a.each(k.alsoResize,function(n){m(n)})},resize:function(k,l){k=a(this).data("resizable");
var m=k.options,n=k.originalSize,p=k.originalPosition,r={height:k.size.height-n.height||0,width:k.size.width-n.width||0,top:k.position.top-p.top||0,left:k.position.left-p.left||0},q=function(u,v){a(u).each(function(){var x=a(this),y=a(this).data("resizable-alsoresize"),B={},C=v&&v.length?v:x.parents(l.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(C,function(H,F){(H=(y[F]||0)+(r[F]||0))&&0<=H&&(B[F]=H||null)});x.css(B)})};"object"!=typeof m.alsoResize||m.alsoResize.nodeType?
q(m.alsoResize):a.each(m.alsoResize,function(u,v){q(u,v)})},stop:function(k,l){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(k,l){var m=a(this).data("resizable");l=m.options;var n=m._proportionallyResizeElements,p=n.length&&/textarea/i.test(n[0].nodeName),r=p&&a.ui.hasScroll(n[0],"left")?0:m.sizeDiff.height;p={width:m.size.width-(p?0:m.sizeDiff.width),height:m.size.height-r};r=parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left)||
null;var q=parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top)||null;m.element.animate(a.extend(p,q&&r?{top:q,left:r}:{}),{duration:l.animateDuration,easing:l.animateEasing,step:function(){var u={width:parseInt(m.element.css("width"),10),height:parseInt(m.element.css("height"),10),top:parseInt(m.element.css("top"),10),left:parseInt(m.element.css("left"),10)};n&&n.length&&a(n[0]).css({width:u.width,height:u.height});m._updateCache(u);m._propagate("resize",k)}})}});a.ui.plugin.add("resizable",
"containment",{start:function(k,l){k=a(this).data("resizable");l=k.element;var m=k.options.containment;if(l=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m)if(k.containerElement=a(l),/document/.test(m)||m==document)k.containerOffset={left:0,top:0},k.containerPosition={left:0,top:0},k.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var n=a(l),p=[];a(["Top","Right","Left","Bottom"]).each(function(u,
v){p[u]=b(n.css("padding"+v))});k.containerOffset=n.offset();k.containerPosition=n.position();k.containerSize={height:n.innerHeight()-p[3],width:n.innerWidth()-p[1]};m=k.containerOffset;var r=k.containerSize.height,q=k.containerSize.width;q=a.ui.hasScroll(l,"left")?l.scrollWidth:q;r=a.ui.hasScroll(l)?l.scrollHeight:r;k.parentData={element:l,left:m.left,top:m.top,width:q,height:r}}},resize:function(k,l){l=a(this).data("resizable");var m=l.options,n=l.containerOffset,p=l.position;k=l._aspectRatio||
k.shiftKey;var r={top:0,left:0},q=l.containerElement;q[0]!=document&&/static/.test(q.css("position"))&&(r=n);p.left<(l._helper?n.left:0)&&(l.size.width+=l._helper?l.position.left-n.left:l.position.left-r.left,k&&(l.size.height=l.size.width/l.aspectRatio),l.position.left=m.helper?n.left:0);p.top<(l._helper?n.top:0)&&(l.size.height+=l._helper?l.position.top-n.top:l.position.top,k&&(l.size.width=l.size.height*l.aspectRatio),l.position.top=l._helper?n.top:0);l.offset.left=l.parentData.left+l.position.left;
l.offset.top=l.parentData.top+l.position.top;m=Math.abs(l.offset.left-r.left+l.sizeDiff.width);n=Math.abs((l._helper?l.offset.top-r.top:l.offset.top-n.top)+l.sizeDiff.height);p=l.containerElement.get(0)==l.element.parent().get(0);r=/relative|absolute/.test(l.containerElement.css("position"));p&&r&&(m-=l.parentData.left);m+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-m,k&&(l.size.height=l.size.width/l.aspectRatio));n+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-
n,k&&(l.size.width=l.size.height*l.aspectRatio))},stop:function(k,l){k=a(this).data("resizable");l=k.options;var m=k.containerOffset,n=k.containerPosition,p=k.containerElement,r=a(k.helper),q=r.offset(),u=r.outerWidth()-k.sizeDiff.width;r=r.outerHeight()-k.sizeDiff.height;k._helper&&!l.animate&&/relative/.test(p.css("position"))&&a(this).css({left:q.left-n.left-m.left,width:u,height:r});k._helper&&!l.animate&&/static/.test(p.css("position"))&&a(this).css({left:q.left-n.left-m.left,width:u,height:r})}});
a.ui.plugin.add("resizable","ghost",{start:function(k,l){k=a(this).data("resizable");l=k.options;var m=k.size;k.ghost=k.originalElement.clone();k.ghost.css({opacity:.25,display:"block",position:"relative",height:m.height,width:m.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof l.ghost?l.ghost:"");k.ghost.appendTo(k.helper)},resize:function(k,l){k=a(this).data("resizable");k.ghost&&k.ghost.css({position:"relative",height:k.size.height,width:k.size.width})},stop:function(k,
l){k=a(this).data("resizable");k.ghost&&k.helper&&k.helper.get(0).removeChild(k.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(k,l){k=a(this).data("resizable");var m=k.options,n=k.size;l=k.originalSize;var p=k.originalPosition,r=k.axis;m.grid="number"==typeof m.grid?[m.grid,m.grid]:m.grid;var q=Math.round((n.width-l.width)/(m.grid[0]||1))*(m.grid[0]||1);m=Math.round((n.height-l.height)/(m.grid[1]||1))*(m.grid[1]||1);/^(se|s|e)$/.test(r)?(k.size.width=l.width+q,k.size.height=
l.height+m):/^(ne)$/.test(r)?(k.size.width=l.width+q,k.size.height=l.height+m,k.position.top=p.top-m):/^(sw)$/.test(r)?(k.size.width=l.width+q,k.size.height=l.height+m,k.position.left=p.left-q):(k.size.width=l.width+q,k.size.height=l.height+m,k.position.top=p.top-m,k.position.left=p.left-q)}});var b=function(k){return parseInt(k,10)||0},h=function(k){return!isNaN(parseInt(k,10))}})(jQuery);
(function(a,c){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var h;this.refresh=function(){h=a(b.options.filter,b.element[0]);h.addClass("ui-selectee");h.each(function(){var k=a(this),l=k.offset();a.data(this,"selectable-item",{element:this,$element:k,left:l.left,top:l.top,right:l.left+k.outerWidth(),bottom:l.top+k.outerHeight(),startselected:!1,
selected:k.hasClass("ui-selected"),selecting:k.hasClass("ui-selecting"),unselecting:k.hasClass("ui-unselecting")})})};this.refresh();this.selectees=h.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var h=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var k=this.options;this.selectees=a(k.filter,this.element[0]);this._trigger("start",b);a(k.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});k.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var l=a.data(this,"selectable-item");l.startselected=!0;b.metaKey||b.ctrlKey||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=
!0,h._trigger("unselecting",b,{unselecting:l.element}))});a(b.target).parents().andSelf().each(function(){var l=a.data(this,"selectable-item");if(l){var m=!b.metaKey&&!b.ctrlKey||!l.$element.hasClass("ui-selected");return l.$element.removeClass(m?"ui-unselecting":"ui-selected").addClass(m?"ui-selecting":"ui-unselecting"),l.unselecting=!m,l.selecting=m,l.selected=m,m?h._trigger("selecting",b,{selecting:l.element}):h._trigger("unselecting",b,{unselecting:l.element}),!1}})}},_mouseDrag:function(b){var h=
this;this.dragged=!0;if(!this.options.disabled){var k=this.options,l=this.opos[0],m=this.opos[1],n=b.pageX,p=b.pageY;if(l>n){var r=n;n=l;l=r}m>p&&(r=p,p=m,m=r);return this.helper.css({left:l,top:m,width:n-l,height:p-m}),this.selectees.each(function(){var q=a.data(this,"selectable-item");if(q&&q.element!=h.element[0]){var u=!1;"touch"==k.tolerance?u=!(q.left>n||q.right<l||q.top>p||q.bottom<m):"fit"==k.tolerance&&(u=q.left>l&&q.right<n&&q.top>m&&q.bottom<p);u?(q.selected&&(q.$element.removeClass("ui-selected"),
q.selected=!1),q.unselecting&&(q.$element.removeClass("ui-unselecting"),q.unselecting=!1),q.selecting||(q.$element.addClass("ui-selecting"),q.selecting=!0,h._trigger("selecting",b,{selecting:q.element}))):(q.selecting&&((b.metaKey||b.ctrlKey)&&q.startselected?(q.$element.removeClass("ui-selecting"),q.selecting=!1,q.$element.addClass("ui-selected"),q.selected=!0):(q.$element.removeClass("ui-selecting"),q.selecting=!1,q.startselected&&(q.$element.addClass("ui-unselecting"),q.unselecting=!0),h._trigger("unselecting",
b,{unselecting:q.element}))),q.selected&&!b.metaKey&&!b.ctrlKey&&!q.startselected&&(q.$element.removeClass("ui-selected"),q.selected=!1,q.$element.addClass("ui-unselecting"),q.unselecting=!0,h._trigger("unselecting",b,{unselecting:q.element})))}}),!1}},_mouseStop:function(b){var h=this;this.dragged=!1;return a(".ui-unselecting",this.element[0]).each(function(){var k=a.data(this,"selectable-item");k.$element.removeClass("ui-unselecting");k.unselecting=!1;k.startselected=!1;h._trigger("unselected",
b,{unselected:k.element})}),a(".ui-selecting",this.element[0]).each(function(){var k=a.data(this,"selectable-item");k.$element.removeClass("ui-selecting").addClass("ui-selected");k.selecting=!1;k.selected=!0;k.startselected=!0;h._trigger("selected",b,{selected:k.element})}),this._trigger("stop",b),this.helper.remove(),!1}});a.extend(a.ui.selectable,{version:"1.8.24"})})(jQuery);
(function(a,c){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,
h){"disabled"===b?(this.options[b]=h,this.widget()[h?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,h){var k=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var l=null,m=this;a(b.target).parents().each(function(){if(a.data(this,k.widgetName+"-item")==m)return l=a(this),!1});a.data(b.target,k.widgetName+"-item")==m&&(l=a(b.target));if(!l)return!1;if(this.options.handle&&
!h){var n=!1;a(this.options.handle,l).find("*").andSelf().each(function(){this==b.target&&(n=!0)});if(!n)return!1}return this.currentItem=l,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,h,k){h=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();h.containment&&this._setContainment();h.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",h.cursor));h.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",h.opacity));h.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",h.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!k)for(k=this.containers.length-1;0<=k;k--)this.containers[k]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),
!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var h=this.options,k=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<h.scrollSensitivity?this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop+h.scrollSpeed:b.pageY-this.overflowOffset.top<h.scrollSensitivity&&
(this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop-h.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<h.scrollSensitivity?this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft+h.scrollSpeed:b.pageX-this.overflowOffset.left<h.scrollSensitivity&&(this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft-h.scrollSpeed)):(b.pageY-a(document).scrollTop()<h.scrollSensitivity?k=a(document).scrollTop(a(document).scrollTop()-h.scrollSpeed):a(window).height()-
(b.pageY-a(document).scrollTop())<h.scrollSensitivity&&(k=a(document).scrollTop(a(document).scrollTop()+h.scrollSpeed)),b.pageX-a(document).scrollLeft()<h.scrollSensitivity?k=a(document).scrollLeft(a(document).scrollLeft()-h.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<h.scrollSensitivity&&(k=a(document).scrollLeft(a(document).scrollLeft()+h.scrollSpeed)));!1!==k&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");
this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(h=this.items.length-1;0<=h;h--){k=this.items[h];var l=k.item[0],m=this._intersectsWithPointer(k);if(m&&k.instance===this.currentContainer&&l!=this.currentItem[0]&&this.placeholder[1==m?"next":"prev"]()[0]!=l&&!a.ui.contains(this.placeholder[0],l)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],
l):1)){this.direction=1==m?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(k))this._rearrange(b,k);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,h){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var k=this;h=k.placeholder.offset();
k.reverting=!0;a(this.helper).animate({left:h.left-this.offset.parent.left-k.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-k.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){k._clear(b)})}else this._clear(b,h);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):
this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,
{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var h=this._getItemsAsjQuery(b&&b.connected),k=[];return b=b||{},a(h).each(function(){var l=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);l&&k.push((b.key||l[1]+"[]")+"="+(b.key&&b.expression?l[1]:l[2]))}),!k.length&&b.key&&k.push(b.key+"="),k.join("&")},
toArray:function(b){var h=this._getItemsAsjQuery(b&&b.connected),k=[];return b=b||{},h.each(function(){k.push(a(b.item||this).attr(b.attribute||"id")||"")}),k},_intersectsWith:function(b){var h=this.positionAbs.left,k=h+this.helperProportions.width,l=this.positionAbs.top,m=l+this.helperProportions.height,n=b.left,p=n+b.width,r=b.top,q=r+b.height,u=this.offset.click.top,v=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&
this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?l+u>r&&l+u<q&&h+v>n&&h+v<p:n<h+this.helperProportions.width/2&&k-this.helperProportions.width/2<p&&r<l+this.helperProportions.height/2&&m-this.helperProportions.height/2<q},_intersectsWithPointer:function(b){var h="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);
h=h&&b;b=this._getDragVerticalDirection();var k=this._getDragHorizontalDirection();return h?this.floating?k&&"right"==k||"down"==b?2:1:b&&("down"==b?2:1):!1},_intersectsWithSides:function(b){var h=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var k=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return this.floating&&l?"right"==l&&b||"left"==l&&!b:
k&&("down"==k&&h||"up"==k&&!h)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(0<b?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var h=
[],k=[],l=this._connectWith();if(l&&b)for(b=l.length-1;0<=b;b--)for(var m=a(l[b]),n=m.length-1;0<=n;n--){var p=a.data(m[n],this.widgetName);p&&p!=this&&!p.options.disabled&&k.push([a.isFunction(p.options.items)?p.options.items.call(p.element):a(p.options.items,p.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),p])}k.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(b=k.length-1;0<=b;b--)k[b][0].each(function(){h.push(this)});return a(h)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data("+this.widgetName+"-item)"),h=0;h<this.items.length;h++)for(var k=0;k<b.length;k++)b[k]==this.items[h].item[0]&&this.items.splice(h,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var h=this.items,k=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,
this.element),this]],l=this._connectWith();if(l&&this.ready)for(var m=l.length-1;0<=m;m--)for(var n=a(l[m]),p=n.length-1;0<=p;p--){var r=a.data(n[p],this.widgetName);r&&r!=this&&!r.options.disabled&&(k.push([a.isFunction(r.options.items)?r.options.items.call(r.element[0],b,{item:this.currentItem}):a(r.options.items,r.element),r]),this.containers.push(r))}for(m=k.length-1;0<=m;m--)for(b=k[m][1],l=k[m][0],p=0,n=l.length;p<n;p++)r=a(l[p]),r.data(this.widgetName+"-item",b),h.push({item:r,instance:b,width:0,
height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var h=this.items.length-1;0<=h;h--){var k=this.items[h];if(k.instance==this.currentContainer||!this.currentContainer||k.item[0]==this.currentItem[0]){var l=this.options.toleranceElement?a(this.options.toleranceElement,k.item):k.item;b||(k.width=l.outerWidth(),k.height=l.outerHeight());l=l.offset();k.left=l.left;k.top=l.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(h=this.containers.length-1;0<=h;h--)l=this.containers[h].element.offset(),this.containers[h].containerCache.left=l.left,this.containers[h].containerCache.top=l.top,this.containers[h].containerCache.width=this.containers[h].element.outerWidth(),this.containers[h].containerCache.height=this.containers[h].element.outerHeight();return this},_createPlaceholder:function(b){var h=b||this,k=h.options;if(!k.placeholder||k.placeholder.constructor==String){var l=k.placeholder;k.placeholder={element:function(){var m=
a(document.createElement(h.currentItem[0].nodeName)).addClass(l||h.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return l||(m.style.visibility="hidden"),m},update:function(m,n){if(!l||k.forcePlaceholderSize)n.height()||n.height(h.currentItem.innerHeight()-parseInt(h.currentItem.css("paddingTop")||0,10)-parseInt(h.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(h.currentItem.innerWidth()-parseInt(h.currentItem.css("paddingLeft")||0,10)-parseInt(h.currentItem.css("paddingRight")||
0,10))}}}h.placeholder=a(k.placeholder.element.call(h.element,h.currentItem));h.currentItem.after(h.placeholder);k.placeholder.update(h,h.placeholder)},_contactContainers:function(b){for(var h=null,k=null,l=this.containers.length-1;0<=l;l--)a.ui.contains(this.currentItem[0],this.containers[l].element[0])||(this._intersectsWith(this.containers[l].containerCache)?h&&a.ui.contains(this.containers[l].element[0],h.element[0])||(h=this.containers[l],k=l):this.containers[l].containerCache.over&&(this.containers[l]._trigger("out",
b,this._uiHash(this)),this.containers[l].containerCache.over=0));if(h)if(1===this.containers.length)this.containers[k]._trigger("over",b,this._uiHash(this)),this.containers[k].containerCache.over=1;else if(this.currentContainer!=this.containers[k]){h=1E4;l=null;for(var m=this.positionAbs[this.containers[k].floating?"left":"top"],n=this.items.length-1;0<=n;n--)if(a.ui.contains(this.containers[k].element[0],this.items[n].item[0])){var p=this.containers[k].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;
Math.abs(p-m)<h&&(h=Math.abs(p-m),l=this.items[n],this.direction=0<p-m?"down":"up")}if(l||this.options.dropOnEmpty)this.currentContainer=this.containers[k],l?this._rearrange(b,l,null,!0):this._rearrange(b,null,this.containers[k].element,!0),this._trigger("change",b,this._uiHash()),this.containers[k]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[k]._trigger("over",b,this._uiHash(this)),this.containers[k].containerCache.over=
1}},_createHelper:function(b){var h=this.options;b=a.isFunction(h.helper)?a(h.helper.apply(this.element[0],[b,this.currentItem])):"clone"==h.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!=h.appendTo?h.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),
left:this.currentItem.css("left")}),(""==b[0].style.width||h.forceHelperSize)&&b.width(this.currentItem.width()),(""==b[0].style.height||h.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=
b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==
this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var h=a(b.containment)[0];b=a(b.containment).offset();var k="hidden"!=a(h).css("overflow");this.containment=[b.left+(parseInt(a(h).css("borderLeftWidth"),
10)||0)+(parseInt(a(h).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(h).css("borderTopWidth"),10)||0)+(parseInt(a(h).css("paddingTop"),10)||0)-this.margins.top,b.left+(k?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(a(h).css("borderLeftWidth"),10)||0)-(parseInt(a(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(k?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(a(h).css("borderTopWidth"),10)||0)-(parseInt(a(h).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,h){h||=this.position;b="absolute"==b?1:-1;var k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(k[0].tagName);return{top:h.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():
l?0:k.scrollTop())*b),left:h.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())*b)}},_generatePosition:function(b){var h=this.options,k="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(k[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=
document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var m=b.pageX,n=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&
(n=this.containment[3]+this.offset.click.top)),h.grid&&(n=this.originalPageY+Math.round((n-this.originalPageY)/h.grid[1])*h.grid[1],n=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?n+h.grid[1]:n-h.grid[1]:n:n,m=this.originalPageX+Math.round((m-this.originalPageX)/h.grid[0])*h.grid[0],m=this.containment?m-this.offset.click.left<this.containment[0]||m-this.offset.click.left>this.containment[2]?m-this.offset.click.left<
this.containment[0]?m+h.grid[0]:m-h.grid[0]:m:m));return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():l?0:k.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())}},_rearrange:function(b,h,k,l){k?k[0].appendChild(this.placeholder[0]):
h.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?h.item[0]:h.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var m=this,n=this.counter;window.setTimeout(function(){n==m.counter&&m.refreshPositions(!l)},0)},_clear:function(b,h){this.reverting=!1;var k=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var l in this._storedCSS)if("auto"==this._storedCSS[l]||
"static"==this._storedCSS[l])this._storedCSS[l]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!h&&k.push(function(m){this._trigger("receive",m,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||h||k.push(function(m){this._trigger("update",m,this._uiHash())});this!==this.currentContainer&&(h||
(k.push(function(m){this._trigger("remove",m,this._uiHash())}),k.push(function(m){return function(n){m._trigger("receive",n,this._uiHash(this))}}.call(this,this.currentContainer)),k.push(function(m){return function(n){m._trigger("update",n,this._uiHash(this))}}.call(this,this.currentContainer))));for(l=this.containers.length-1;0<=l;l--)h||k.push(function(m){return function(n){m._trigger("deactivate",n,this._uiHash(this))}}.call(this,this.containers[l])),this.containers[l].containerCache.over&&(k.push(function(m){return function(n){m._trigger("out",
n,this._uiHash(this))}}.call(this,this.containers[l])),this.containers[l].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!h){this._trigger("beforeStop",b,this._uiHash());for(l=0;l<k.length;l++)k[l].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=
!1,!1}h||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!h){for(l=0;l<k.length;l++)k[l].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var h=b||this;return{helper:h.helper,placeholder:h.placeholder||a([]),position:h.position,
originalPosition:h.originalPosition,offset:h.positionAbs,item:h.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"1.8.24"})})(jQuery);
jQuery.effects||function(a,c){function b(v){var x;return v&&v.constructor==Array&&3==v.length?v:(x=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(v))?[parseInt(x[1],10),parseInt(x[2],10),parseInt(x[3],10)]:(x=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*\)/.exec(v))?[2.55*parseFloat(x[1]),2.55*parseFloat(x[2]),2.55*parseFloat(x[3])]:(x=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(v))?[parseInt(x[1],16),parseInt(x[2],
16),parseInt(x[3],16)]:(x=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(v))?[parseInt(x[1]+x[1],16),parseInt(x[2]+x[2],16),parseInt(x[3]+x[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(v)?p.transparent:p[a.trim(v).toLowerCase()]}function h(){var v=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,x={},y;if(v&&v.length&&v[0]&&v[v[0]])for(var B=v.length;B--;){var C=v[B];"string"==typeof v[C]&&(y=C.replace(/\-(\w)/g,function(H,F){return F.toUpperCase()}),x[y]=v[C])}else for(C in v)"string"==
typeof v[C]&&(x[C]=v[C]);return x}function k(v){var x;for(x in v){var y=v[x];(null==y||a.isFunction(y)||x in q||/scrollbar/.test(x)||!/color/i.test(x)&&isNaN(parseFloat(y)))&&delete v[x]}return v}function l(v,x){var y={_:0},B;for(B in x)v[B]!=x[B]&&(y[B]=x[B]);return y}function m(v,x,y,B){"object"==typeof v&&(B=x,y=null,x=v,v=x.effect);a.isFunction(x)&&(B=x,y=null,x={});if("number"==typeof x||a.fx.speeds[x])B=y,y=x,x={};return a.isFunction(y)&&(B=y,y=null),x=x||{},y=y||x.duration,y=a.fx.off?0:"number"==
typeof y?y:y in a.fx.speeds?a.fx.speeds[y]:a.fx.speeds._default,B=B||x.complete,[v,x,y,B]}function n(v){return!v||"number"==typeof v||a.fx.speeds[v]?!0:"string"!=typeof v||a.effects[v]?!1:!0}a.effects={};a.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(v,x){a.fx.step[x]=function(y){if(!y.colorInit){var B=y.elem;var C=x;do{var H=(a.curCSS||a.css)(B,C);if(""!=H&&"transparent"!=H||a.nodeName(B,"body"))break;
C="backgroundColor"}while(B=B.parentNode);B=b(H);y.start=B;y.end=b(y.end);y.colorInit=!0}y.elem.style[x]="rgb("+Math.max(Math.min(parseInt(y.pos*(y.end[0]-y.start[0])+y.start[0],10),255),0)+","+Math.max(Math.min(parseInt(y.pos*(y.end[1]-y.start[1])+y.start[1],10),255),0)+","+Math.max(Math.min(parseInt(y.pos*(y.end[2]-y.start[2])+y.start[2],10),255),0)+")"}});var p={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},r=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(v,x,y,B){return a.isFunction(y)&&(B=y,y=null),this.queue(function(){var C=
a(this),H=C.attr("style")||" ",F=k(h.call(this)),E=C.attr("class")||"";a.each(r,function(K,J){v[J]&&C[J+"Class"](v[J])});var G=k(h.call(this));C.attr("class",E);C.animate(l(F,G),{queue:!1,duration:x,easing:y,complete:function(){a.each(r,function(K,J){v[J]&&C[J+"Class"](v[J])});"object"==typeof C.attr("style")?(C.attr("style").cssText="",C.attr("style").cssText=H):C.attr("style",H);B&&B.apply(this,arguments);a.dequeue(this)}})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(v,x,y,B){return x?
a.effects.animateClass.apply(this,[{add:v},x,y,B]):this._addClass(v)},_removeClass:a.fn.removeClass,removeClass:function(v,x,y,B){return x?a.effects.animateClass.apply(this,[{remove:v},x,y,B]):this._removeClass(v)},_toggleClass:a.fn.toggleClass,toggleClass:function(v,x,y,B,C){return"boolean"==typeof x||x===c?y?a.effects.animateClass.apply(this,[x?{add:v}:{remove:v},y,B,C]):this._toggleClass(v,x):a.effects.animateClass.apply(this,[{toggle:v},x,y,B])},switchClass:function(v,x,y,B,C){return a.effects.animateClass.apply(this,
[{add:x,remove:v},y,B,C])}});a.extend(a.effects,{version:"1.8.24",save:function(v,x){for(var y=0;y<x.length;y++)null!==x[y]&&v.data("ec.storage."+x[y],v[0].style[x[y]])},restore:function(v,x){for(var y=0;y<x.length;y++)null!==x[y]&&v.css(x[y],v.data("ec.storage."+x[y]))},setMode:function(v,x){return"toggle"==x&&(x=v.is(":hidden")?"show":"hide"),x},getBaseline:function(v,x){switch(v[0]){case "top":var y=0;break;case "middle":y=.5;break;case "bottom":y=1;break;default:y=v[0]/x.height}switch(v[1]){case "left":v=
0;break;case "center":v=.5;break;case "right":v=1;break;default:v=v[1]/x.width}return{x:v,y}},createWrapper:function(v){if(v.parent().is(".ui-effects-wrapper"))return v.parent();var x={width:v.outerWidth(!0),height:v.outerHeight(!0),"float":v.css("float")},y=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),B=document.activeElement;try{B.id}catch(C){B=document.body}return v.wrap(y),(v[0]===B||a.contains(v[0],B))&&a(B).focus(),
y=v.parent(),"static"==v.css("position")?(y.css({position:"relative"}),v.css({position:"relative"})):(a.extend(x,{position:v.css("position"),zIndex:v.css("z-index")}),a.each(["top","left","bottom","right"],function(C,H){x[H]=v.css(H);isNaN(parseInt(x[H],10))&&(x[H]="auto")}),v.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),y.css(x).show()},removeWrapper:function(v){var x,y=document.activeElement;return v.parent().is(".ui-effects-wrapper")?(x=v.parent().replaceWith(v),(v[0]===
y||a.contains(v[0],y))&&a(y).focus(),x):v},setTransition:function(v,x,y,B){return B=B||{},a.each(x,function(C,H){C=v.cssUnit(H);0<C[0]&&(B[H]=C[0]*y+C[1])}),B}});a.fn.extend({effect:function(v,x,y,B){var C=m.apply(this,arguments),H={options:C[1],duration:C[2],callback:C[3]};C=H.options.mode;var F=a.effects[v];return a.fx.off||!F?C?this[C](H.duration,H.callback):this.each(function(){H.callback&&H.callback.call(this)}):F.call(this,H)},_show:a.fn.show,show:function(v){if(n(v))return this._show.apply(this,
arguments);var x=m.apply(this,arguments);return x[1].mode="show",this.effect.apply(this,x)},_hide:a.fn.hide,hide:function(v){if(n(v))return this._hide.apply(this,arguments);var x=m.apply(this,arguments);return x[1].mode="hide",this.effect.apply(this,x)},__toggle:a.fn.toggle,toggle:function(v){if(n(v)||"boolean"==typeof v||a.isFunction(v))return this.__toggle.apply(this,arguments);var x=m.apply(this,arguments);return x[1].mode="toggle",this.effect.apply(this,x)},cssUnit:function(v){var x=this.css(v),
y=[];return a.each(["em","px","%","pt"],function(B,C){0<x.indexOf(C)&&(y=[parseFloat(x),C])}),y}});var u={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(v,x){u[x]=function(y){return Math.pow(y,v+2)}});a.extend(u,{Sine:function(v){return 1-Math.cos(v*Math.PI/2)},Circ:function(v){return 1-Math.sqrt(1-v*v)},Elastic:function(v){return 0===v||1===v?v:-Math.pow(2,8*(v-1))*Math.sin((80*(v-1)-7.5)*Math.PI/15)},Back:function(v){return v*v*(3*v-2)},Bounce:function(v){for(var x,y=4;v<((x=Math.pow(2,
--y))-1)/11;);return 1/Math.pow(4,3-y)-7.5625*Math.pow((3*x-2)/22-v,2)}});a.each(u,function(v,x){a.easing["easeIn"+v]=x;a.easing["easeOut"+v]=function(y){return 1-x(1-y)};a.easing["easeInOut"+v]=function(y){return.5>y?x(2*y)/2:x(-2*y+2)/-2+1}})}(jQuery);
(function(a,c){a.effects.blind=function(b){return this.queue(function(){var h=a(this),k=["position","top","bottom","left","right"],l=a.effects.setMode(h,b.options.mode||"hide"),m=b.options.direction||"vertical";a.effects.save(h,k);h.show();var n=a.effects.createWrapper(h).css({overflow:"hidden"}),p="vertical"==m?"height":"width";m="vertical"==m?n.height():n.width();"show"==l&&n.css(p,0);var r={};r[p]="show"==l?m:0;n.animate(r,b.duration,b.options.easing,function(){"hide"==l&&h.hide();a.effects.restore(h,
k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(h[0],arguments);h.dequeue()})})}})(jQuery);
(function(a,c){a.effects.bounce=function(b){return this.queue(function(){var h=a(this),k=["position","top","bottom","left","right"],l=a.effects.setMode(h,b.options.mode||"effect"),m=b.options.direction||"up",n=b.options.distance||20,p=b.options.times||5,r=b.duration||250;/show|hide/.test(l)&&k.push("opacity");a.effects.save(h,k);h.show();a.effects.createWrapper(h);var q="up"==m||"down"==m?"top":"left";m="up"==m||"left"==m?"pos":"neg";n=b.options.distance||("top"==q?h.outerHeight(!0)/3:h.outerWidth(!0)/
3);"show"==l&&h.css("opacity",0).css(q,"pos"==m?-n:n);"hide"==l&&(n/=2*p);"hide"!=l&&p--;if("show"==l){var u={opacity:1};u[q]=("pos"==m?"+=":"-=")+n;h.animate(u,r/2,b.options.easing);n/=2;p--}for(u=0;u<p;u++){var v={},x={};v[q]=("pos"==m?"-=":"+=")+n;x[q]=("pos"==m?"+=":"-=")+n;h.animate(v,r/2,b.options.easing).animate(x,r/2,b.options.easing);n="hide"==l?2*n:n/2}"hide"==l?(u={opacity:0},u[q]=("pos"==m?"-=":"+=")+n,h.animate(u,r/2,b.options.easing,function(){h.hide();a.effects.restore(h,k);a.effects.removeWrapper(h);
b.callback&&b.callback.apply(this,arguments)})):(v={},x={},v[q]=("pos"==m?"-=":"+=")+n,x[q]=("pos"==m?"+=":"-=")+n,h.animate(v,r/2,b.options.easing).animate(x,r/2,b.options.easing,function(){a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(this,arguments)}));h.queue("fx",function(){h.dequeue()});h.dequeue()})}})(jQuery);
(function(a,c){a.effects.clip=function(b){return this.queue(function(){var h=a(this),k="position top bottom left right height width".split(" "),l=a.effects.setMode(h,b.options.mode||"hide"),m=b.options.direction||"vertical";a.effects.save(h,k);h.show();var n=a.effects.createWrapper(h).css({overflow:"hidden"});n="IMG"==h[0].tagName?n:h;var p="vertical"==m?"height":"width",r="vertical"==m?"top":"left";m="vertical"==m?n.height():n.width();"show"==l&&(n.css(p,0),n.css(r,m/2));var q={};q[p]="show"==l?
m:0;q[r]="show"==l?0:m/2;n.animate(q,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==l&&h.hide();a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(h[0],arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.drop=function(b){return this.queue(function(){var h=a(this),k="position top bottom left right opacity".split(" "),l=a.effects.setMode(h,b.options.mode||"hide"),m=b.options.direction||"left";a.effects.save(h,k);h.show();a.effects.createWrapper(h);var n="up"==m||"down"==m?"top":"left";m="up"==m||"left"==m?"pos":"neg";var p=b.options.distance||("top"==n?h.outerHeight(!0)/2:h.outerWidth(!0)/2);"show"==l&&h.css("opacity",0).css(n,"pos"==m?-p:p);var r={opacity:"show"==l?1:0};r[n]=
("show"==l?"pos"==m?"+=":"-=":"pos"==m?"-=":"+=")+p;h.animate(r,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==l&&h.hide();a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.explode=function(b){return this.queue(function(){var h=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,k=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var l=a(this).show().css("visibility","hidden"),m=l.offset();m.top-=parseInt(l.css("marginTop"),10)||0;m.left-=parseInt(l.css("marginLeft"),10)||0;for(var n=l.outerWidth(!0),p=l.outerHeight(!0),r=0;r<h;r++)for(var q=
0;q<k;q++)l.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:n/k*-q,top:p/h*-r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n/k,height:p/h,left:m.left+n/k*q+("show"==b.options.mode?n/k*(q-Math.floor(k/2)):0),top:m.top+p/h*r+("show"==b.options.mode?p/h*(r-Math.floor(h/2)):0),opacity:"show"==b.options.mode?0:1}).animate({left:m.left+n/k*q+("show"==b.options.mode?0:n/k*(q-Math.floor(k/2))),top:m.top+p/h*r+("show"==
b.options.mode?0:p/h*(r-Math.floor(h/2))),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?l.css({visibility:"visible"}):l.css({visibility:"visible"}).hide();b.callback&&b.callback.apply(l[0]);l.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);
(function(a,c){a.effects.fade=function(b){return this.queue(function(){var h=a(this),k=a.effects.setMode(h,b.options.mode||"hide");h.animate({opacity:k},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.fold=function(b){return this.queue(function(){var h=a(this),k=["position","top","bottom","left","right"],l=a.effects.setMode(h,b.options.mode||"hide"),m=b.options.size||15,n=!!b.options.horizFirst,p=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(h,k);h.show();var r=a.effects.createWrapper(h).css({overflow:"hidden"}),q="show"==l!=n,u=q?["width","height"]:["height","width"];q=q?[r.width(),r.height()]:[r.height(),r.width()];var v=/([0-9]+)%/.exec(m);v&&(m=parseInt(v[1],
10)/100*q["hide"==l?0:1]);"show"==l&&r.css(n?{height:0,width:m}:{height:m,width:0});n={};v={};n[u[0]]="show"==l?q[0]:m;v[u[1]]="show"==l?q[1]:0;r.animate(n,p,b.options.easing).animate(v,p,b.options.easing,function(){"hide"==l&&h.hide();a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(h[0],arguments);h.dequeue()})})}})(jQuery);
(function(a,c){a.effects.highlight=function(b){return this.queue(function(){var h=a(this),k=["backgroundImage","backgroundColor","opacity"],l=a.effects.setMode(h,b.options.mode||"show"),m={backgroundColor:h.css("backgroundColor")};"hide"==l&&(m.opacity=0);a.effects.save(h,k);h.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(m,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==l&&h.hide();a.effects.restore(h,k);"show"==l&&!a.support.opacity&&
this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.pulsate=function(b){return this.queue(function(){var h=a(this),k=a.effects.setMode(h,b.options.mode||"show"),l=2*(b.options.times||5)-1,m=b.duration?b.duration/2:a.fx.speeds._default/2,n=h.is(":visible"),p=0;n||(h.css("opacity",0).show(),p=1);("hide"==k&&n||"show"==k&&!n)&&l--;for(k=0;k<l;k++)h.animate({opacity:p},m,b.options.easing),p=(p+1)%2;h.animate({opacity:p},m,b.options.easing,function(){0==p&&h.hide();b.callback&&b.callback.apply(this,arguments)});h.queue("fx",function(){h.dequeue()}).dequeue()})}})(jQuery);
(function(a,c){a.effects.puff=function(b){return this.queue(function(){var h=a(this),k=a.effects.setMode(h,b.options.mode||"hide"),l=parseInt(b.options.percent,10)||150,m=l/100,n={height:h.height(),width:h.width()};a.extend(b.options,{fade:!0,mode:k,percent:"hide"==k?l:100,from:"hide"==k?n:{height:n.height*m,width:n.width*m}});h.effect("scale",b.options,b.duration,b.callback);h.dequeue()})};a.effects.scale=function(b){return this.queue(function(){var h=a(this),k=a.extend(!0,{},b.options),l=a.effects.setMode(h,
b.options.mode||"effect"),m=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==l?0:100),n=b.options.direction||"both",p=b.options.origin;"effect"!=l&&(k.origin=p||["middle","center"],k.restore=!0);p={height:h.height(),width:h.width()};h.from=b.options.from||("show"==l?{height:0,width:0}:p);h.to={height:p.height*("horizontal"!=n?m/100:1),width:p.width*("vertical"!=n?m/100:1)};b.options.fade&&("show"==l&&(h.from.opacity=0,h.to.opacity=1),"hide"==l&&(h.from.opacity=1,h.to.opacity=
0));k.from=h.from;k.to=h.to;k.mode=l;h.effect("size",k,b.duration,b.callback);h.dequeue()})};a.effects.size=function(b){return this.queue(function(){var h=a(this),k="position top bottom left right width height overflow opacity".split(" "),l="position top bottom left right overflow opacity".split(" "),m=["width","height","overflow"],n=["fontSize"],p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],q=a.effects.setMode(h,
b.options.mode||"effect"),u=b.options.restore||!1,v=b.options.scale||"both",x=b.options.origin,y={height:h.height(),width:h.width()};h.from=b.options.from||y;h.to=b.options.to||y;x&&(x=a.effects.getBaseline(x,y),h.from.top=(y.height-h.from.height)*x.y,h.from.left=(y.width-h.from.width)*x.x,h.to.top=(y.height-h.to.height)*x.y,h.to.left=(y.width-h.to.width)*x.x);var B=h.from.height/y.height,C=h.from.width/y.width,H=h.to.height/y.height,F=h.to.width/y.width;if("box"==v||"both"==v)B!=H&&(k=k.concat(p),
h.from=a.effects.setTransition(h,p,B,h.from),h.to=a.effects.setTransition(h,p,H,h.to)),C!=F&&(k=k.concat(r),h.from=a.effects.setTransition(h,r,C,h.from),h.to=a.effects.setTransition(h,r,F,h.to));("content"==v||"both"==v)&&B!=H&&(k=k.concat(n),h.from=a.effects.setTransition(h,n,B,h.from),h.to=a.effects.setTransition(h,n,H,h.to));a.effects.save(h,u?k:l);h.show();a.effects.createWrapper(h);h.css("overflow","hidden").css(h.from);if("content"==v||"both"==v)p=p.concat(["marginTop","marginBottom"]).concat(n),
r=r.concat(["marginLeft","marginRight"]),m=k.concat(p).concat(r),h.find("*[width]").each(function(){var E=a(this);u&&a.effects.save(E,m);var G=E.height(),K=E.width();E.from={height:G*B,width:K*C};E.to={height:G*H,width:K*F};B!=H&&(E.from=a.effects.setTransition(E,p,B,E.from),E.to=a.effects.setTransition(E,p,H,E.to));C!=F&&(E.from=a.effects.setTransition(E,r,C,E.from),E.to=a.effects.setTransition(E,r,F,E.to));E.css(E.from);E.animate(E.to,b.duration,b.options.easing,function(){u&&a.effects.restore(E,
m)})});h.animate(h.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===h.to.opacity&&h.css("opacity",h.from.opacity);"hide"==q&&h.hide();a.effects.restore(h,u?k:l);a.effects.removeWrapper(h);b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.shake=function(b){return this.queue(function(){var h=a(this),k=["position","top","bottom","left","right"];a.effects.setMode(h,b.options.mode||"effect");var l=b.options.direction||"left",m=b.options.distance||20,n=b.options.times||3,p=b.duration||b.options.duration||140;a.effects.save(h,k);h.show();a.effects.createWrapper(h);var r="up"==l||"down"==l?"top":"left",q="up"==l||"left"==l?"pos":"neg";l={};var u={},v={};l[r]=("pos"==q?"-=":"+=")+m;u[r]=("pos"==q?"+=":"-=")+2*m;v[r]=
("pos"==q?"-=":"+=")+2*m;h.animate(l,p,b.options.easing);for(m=1;m<n;m++)h.animate(u,p,b.options.easing).animate(v,p,b.options.easing);h.animate(u,p,b.options.easing).animate(l,p/2,b.options.easing,function(){a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(this,arguments)});h.queue("fx",function(){h.dequeue()});h.dequeue()})}})(jQuery);
(function(a,c){a.effects.slide=function(b){return this.queue(function(){var h=a(this),k=["position","top","bottom","left","right"],l=a.effects.setMode(h,b.options.mode||"show"),m=b.options.direction||"left";a.effects.save(h,k);h.show();a.effects.createWrapper(h).css({overflow:"hidden"});var n="up"==m||"down"==m?"top":"left";m="up"==m||"left"==m?"pos":"neg";var p=b.options.distance||("top"==n?h.outerHeight(!0):h.outerWidth(!0));"show"==l&&h.css(n,"pos"==m?isNaN(p)?"-"+p:-p:p);var r={};r[n]=("show"==
l?"pos"==m?"+=":"-=":"pos"==m?"-=":"+=")+p;h.animate(r,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==l&&h.hide();a.effects.restore(h,k);a.effects.removeWrapper(h);b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);
(function(a,c){a.effects.transfer=function(b){return this.queue(function(){var h=a(this),k=a(b.options.to),l=k.offset();k={top:l.top,left:l.left,height:k.innerHeight(),width:k.innerWidth()};l=h.offset();var m=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:l.top,left:l.left,height:h.innerHeight(),width:h.innerWidth(),position:"absolute"}).animate(k,b.duration,b.options.easing,function(){m.remove();b.callback&&b.callback.apply(h[0],arguments);
h.dequeue()})})}})(jQuery);
(function(a,c){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,h=b.options;b.running=0;b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");b.headers=
b.element.find(h.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){h.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){h.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){h.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){h.disabled||a(this).removeClass("ui-state-focus")});b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(h.navigation){var k=b.element.find("a").filter(h.navigationFilter).eq(0);if(k.length){var l=k.closest(".ui-accordion-header");l.length?b.active=l:b.active=k.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||h.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");b.active.next().addClass("ui-accordion-content-active");b._createIcons();b.resize();b.element.attr("role","tablist");b.headers.attr("role","tab").bind("keydown.accordion",
function(m){return b._keydown(m)}).next().attr("role","tabpanel");b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0);a.browser.safari||b.headers.find("a").attr("tabIndex",-1);h.event&&b.headers.bind(h.event.split(" ").join(".accordion ")+".accordion",function(m){b._clickHandler.call(b,m,this);m.preventDefault()})},_createIcons:function(){var b=
this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var h=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&h.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,h){a.Widget.prototype._setOption.apply(this,arguments);"active"==b&&this.activate(h);"icons"==b&&(this._destroyIcons(),
h&&this._createIcons());"disabled"==b&&this.headers.add(this.headers.next())[h?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var h=a.ui.keyCode,k=this.headers.length,l=this.headers.index(b.target),m=!1;switch(b.keyCode){case h.RIGHT:case h.DOWN:m=this.headers[(l+1)%k];break;case h.LEFT:case h.UP:m=this.headers[(l-1+k)%k];break;case h.SPACE:case h.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return m?
(a(b.target).attr("tabIndex",-1),a(m).attr("tabIndex",0),m.focus(),!1):!0}},resize:function(){var b=this.options;if(b.fillSpace){if(a.browser.msie){var h=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}var k=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",h);this.headers.each(function(){k-=a(this).outerHeight(!0)});this.headers.next().each(function(){a(this).height(Math.max(0,k-a(this).innerHeight()+a(this).height()))}).css("overflow",
"auto")}else b.autoHeight&&(k=0,this.headers.next().each(function(){k=Math.max(k,a(this).height("").height())}).height(k));return this},activate:function(b){this.options.active=b;b=this._findActive(b)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):!1===b?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,h){var k=this.options;if(!k.disabled)if(b.target){if(b=a(b.currentTarget||
h),h=b[0]===this.active[0],k.active=k.collapsible&&h?!1:this.headers.index(b),!(this.running||!k.collapsible&&h)){var l=this.active;r=b.next();n=this.active.next();p={options:k,newHeader:h&&k.collapsible?a([]):b,oldHeader:this.active,newContent:h&&k.collapsible?a([]):r,oldContent:n};var m=this.headers.index(this.active[0])>this.headers.index(b[0]);this.active=h?a([]):b;this._toggle(r,n,p,h,m);l.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(k.icons.headerSelected).addClass(k.icons.header);
h||(b.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(k.icons.header).addClass(k.icons.headerSelected),b.next().addClass("ui-accordion-content-active"))}}else if(k.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(k.icons.headerSelected).addClass(k.icons.header);this.active.next().addClass("ui-accordion-content-active");var n=this.active.next(),
p={options:k,newHeader:a([]),oldHeader:k.active,newContent:a([]),oldContent:n},r=this.active=a([]);this._toggle(r,n,p)}},_toggle:function(b,h,k,l,m){var n=this,p=n.options;n.toShow=b;n.toHide=h;n.data=k;var r=function(){if(n)return n._completed.apply(n,arguments)};n._trigger("changestart",null,n.data);n.running=0===h.size()?b.size():h.size();if(p.animated){k={};p.collapsible&&l?k={toShow:a([]),toHide:h,complete:r,down:m,autoHeight:p.autoHeight||p.fillSpace}:k={toShow:b,toHide:h,complete:r,down:m,
autoHeight:p.autoHeight||p.fillSpace};p.proxied||(p.proxied=p.animated);p.proxiedDuration||(p.proxiedDuration=p.duration);p.animated=a.isFunction(p.proxied)?p.proxied(k):p.proxied;p.duration=a.isFunction(p.proxiedDuration)?p.proxiedDuration(k):p.proxiedDuration;l=a.ui.accordion.animations;var q=p.duration,u=p.animated;u&&!l[u]&&!a.easing[u]&&(u="slide");l[u]||(l[u]=function(v){this.slide(v,{easing:u,duration:q||700})});l[u](k)}else p.collapsible&&l?b.toggle():(h.hide(),b.show()),r(!0);h.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});a.extend(a.ui.accordion,{version:"1.8.24",
animations:{slide:function(b,h){b=a.extend({easing:"swing",duration:300},b,h);if(b.toHide.size())if(b.toShow.size()){var k=b.toShow.css("overflow"),l=0,m={},n={};h=b.toShow;var p=h[0].style.width;h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0));a.each(["height","paddingTop","paddingBottom"],function(r,q){n[q]="hide";r=(""+a.css(b.toShow[0],q)).match(/^([\d+-.]+)(.*)$/);
m[q]={value:r[1],unit:r[2]||"px"}});b.toShow.css({height:0,overflow:"hidden"}).show();b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(n,{step:function(r,q){"height"==q.prop&&(l=0===q.end-q.start?0:(q.now-q.start)/(q.end-q.start));b.toShow[0].style[q.prop]=l*m[q.prop].value+m[q.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height","");b.toShow.css({width:p,overflow:k});b.complete()}})}else b.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},b);else b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b)},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1E3:200})}}})})(jQuery);
(function(a,c){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var h=this,k=this.element[0].ownerDocument,l;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(m){if(!h.options.disabled&&
!h.element.propAttr("readOnly")){l=!1;var n=a.ui.keyCode;switch(m.keyCode){case n.PAGE_UP:h._move("previousPage",m);break;case n.PAGE_DOWN:h._move("nextPage",m);break;case n.UP:h._keyEvent("previous",m);break;case n.DOWN:h._keyEvent("next",m);break;case n.ENTER:case n.NUMPAD_ENTER:h.menu.active&&(l=!0,m.preventDefault());case n.TAB:if(!h.menu.active)break;h.menu.select(m);break;case n.ESCAPE:h.element.val(h.term);h.close(m);break;default:clearTimeout(h.searching),h.searching=setTimeout(function(){h.term!=
h.element.val()&&(h.selectedItem=null,h.search(null,m))},h.options.delay)}}}).bind("keypress.autocomplete",function(m){l&&(l=!1,m.preventDefault())}).bind("focus.autocomplete",function(){h.options.disabled||(h.selectedItem=null,h.previous=h.element.val())}).bind("blur.autocomplete",function(m){h.options.disabled||(clearTimeout(h.searching),h.closing=setTimeout(function(){h.close(m);h._change(m)},150))});this._initSource();this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||
"body",k)[0]).mousedown(function(m){var n=h.menu.element[0];a(m.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(p){p.target!==h.element[0]&&p.target!==n&&!a.ui.contains(n,p.target)&&h.close()})},1);setTimeout(function(){clearTimeout(h.closing)},13)}).menu({focus:function(m,n){n=n.item.data("item.autocomplete");!1!==h._trigger("focus",m,{item:n})&&/^key/.test(m.originalEvent.type)&&h.element.val(n.value)},selected:function(m,n){var p=n.item.data("item.autocomplete"),
r=h.previous;h.element[0]!==k.activeElement&&(h.element.focus(),h.previous=r,setTimeout(function(){h.previous=r;h.selectedItem=p},1));!1!==h._trigger("select",m,{item:p})&&h.element.val(p.value);h.term=h.element.val();h.close(m);h.selectedItem=p},blur:function(m,n){h.menu.element.is(":visible")&&h.element.val()!==h.term&&h.element.val(h.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe();h.beforeunloadHandler=function(){h.element.removeAttr("autocomplete")};
a(window).bind("beforeunload",h.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a(window).unbind("beforeunload",this.beforeunloadHandler);a.Widget.prototype.destroy.call(this)},_setOption:function(h,k){a.Widget.prototype._setOption.apply(this,arguments);"source"===h&&this._initSource();"appendTo"===h&&this.menu.element.appendTo(a(k||
"body",this.element[0].ownerDocument)[0]);"disabled"===h&&k&&this.xhr&&this.xhr.abort()},_initSource:function(){var h=this,k,l;a.isArray(this.options.source)?(k=this.options.source,this.source=function(m,n){n(a.ui.autocomplete.filter(k,m.term))}):"string"==typeof this.options.source?(l=this.options.source,this.source=function(m,n){h.xhr&&h.xhr.abort();h.xhr=a.ajax({url:l,data:m,dataType:"json",success:function(p,r){n(p)},error:function(){n([])}})}):this.source=this.options.source},search:function(h,
k){h=null!=h?h:this.element.val();this.term=this.element.val();if(h.length<this.options.minLength)return this.close(k);clearTimeout(this.closing);if(!1!==this._trigger("search",k))return this._search(h)},_search:function(h){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:h},this._response())},_response:function(){var h=this,k=++b;return function(l){k===b&&h.__response(l);h.pending--;h.pending||h.element.removeClass("ui-autocomplete-loading")}},__response:function(h){!this.options.disabled&&
h&&h.length?(h=this._normalize(h),this._suggest(h),this._trigger("open")):this.close()},close:function(h){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",h))},_change:function(h){this.previous!==this.element.val()&&this._trigger("change",h,{item:this.selectedItem})},_normalize:function(h){return h.length&&h[0].label&&h[0].value?h:a.map(h,function(k){return"string"==typeof k?{label:k,value:k}:a.extend({label:k.label||
k.value,value:k.value||k.label},k)})},_suggest:function(h){var k=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(k,h);this.menu.deactivate();this.menu.refresh();k.show();this._resizeMenu();k.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var h=this.menu.element;h.outerWidth(Math.max(h.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(h,k){var l=
this;a.each(k,function(m,n){l._renderItem(h,n)})},_renderItem:function(h,k){return a("<li></li>").data("item.autocomplete",k).append(a("<a></a>").text(k.label)).appendTo(h)},_move:function(h,k){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(h)||this.menu.last()&&/^next/.test(h))this.element.val(this.term),this.menu.deactivate();else this.menu[h](k);else this.search(null,k)},widget:function(){return this.menu.element},_keyEvent:function(h,k){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(h,
k),k.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(h){return h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(h,k){var l=new RegExp(a.ui.autocomplete.escapeRegex(k),"i");return a.grep(h,function(m){return l.test(m.label||m.value||m)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){a(b.target).closest(".ui-menu-item a").length&&(b.preventDefault(),c.select(b))});this.refresh()},refresh:function(){var c=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){c.activate(b,a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(c,b){this.deactivate();if(this.hasScroll()){var h=b.offset().top-this.element.offset().top,k=this.element.scrollTop(),l=this.element.height();0>h?this.element.scrollTop(k+h):h>=l&&this.element.scrollTop(k+h-l+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",c,{item:b})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(c,b,h){this.active?(c=this.active[c+"All"](".ui-menu-item").eq(0),c.length?this.activate(h,
c):this.activate(h,this.element.children(b))):this.activate(h,this.element.children(b))},nextPage:function(c){if(this.hasScroll())if(!this.active||this.last())this.activate(c,this.element.children(".ui-menu-item:first"));else{var b=this.active.offset().top,h=this.element.height(),k=this.element.children(".ui-menu-item").filter(function(){var l=a(this).offset().top-b-h+a(this).height();return 10>l&&-10<l});k.length||(k=this.element.children(".ui-menu-item:last"));this.activate(c,k)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(c){if(this.hasScroll())if(!this.active||this.first())this.activate(c,this.element.children(".ui-menu-item:last"));else{var b=this.active.offset().top,h=this.element.height(),k=this.element.children(".ui-menu-item").filter(function(){var l=a(this).offset().top-b+h-a(this).height();return 10>l&&-10<l});k.length||(k=this.element.children(".ui-menu-item:first"));this.activate(c,k)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})})(jQuery);
(function(a,c){var b,h,k,l,m=function(){var p=a(this).find(":ui-button");setTimeout(function(){p.button("refresh")},1)},n=function(p){var r=p.name,q=p.form,u=a([]);return r&&(q?u=a(q).find("[name='"+r+"']"):u=a("[name='"+r+"']",p.ownerDocument).filter(function(){return!this.form})),u};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",m);"boolean"!=typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var p=this,r=this.options,q="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(q?"":" ui-state-active");null===r.label&&(r.label=this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){r.disabled||
(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){r.disabled||a(this).removeClass(u)}).bind("click.button",function(v){r.disabled&&(v.preventDefault(),v.stopImmediatePropagation())});this.element.bind("focus.button",function(){p.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){p.buttonElement.removeClass("ui-state-focus")});q&&(this.element.bind("change.button",function(){l||p.refresh()}),this.buttonElement.bind("mousedown.button",
function(v){r.disabled||(l=!1,h=v.pageX,k=v.pageY)}).bind("mouseup.button",function(v){r.disabled||h===v.pageX&&k===v.pageY||(l=!0)}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(r.disabled||l)return!1;a(this).toggleClass("ui-state-active");p.buttonElement.attr("aria-pressed",p.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(r.disabled||l)return!1;a(this).addClass("ui-state-active");p.buttonElement.attr("aria-pressed",
"true");var v=p.element[0];n(v).not(v).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(r.disabled)return!1;a(this).addClass("ui-state-active");b=this;a(document).one("mouseup",function(){b=null})}).bind("mouseup.button",function(){if(r.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(v){if(r.disabled)return!1;v.keyCode!=a.ui.keyCode.SPACE&&
v.keyCode!=a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(v){v.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",r.disabled);this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";
if("checkbox"===this.type||"radio"===this.type){var p=this.element.parents().filter(":last"),r="label[for='"+this.element.attr("id")+"']";this.buttonElement=p.find(r);this.buttonElement.length||(p=p.length?p.siblings():this.element.siblings(),this.buttonElement=p.filter(r),this.buttonElement.length||(this.buttonElement=p.find(r)));this.element.addClass("ui-helper-hidden-accessible");(p=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",
p)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(p,r){a.Widget.prototype._setOption.apply(this,arguments);"disabled"===p?r?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var p=this.element.is(":disabled");p!==this.options.disabled&&this._setOption("disabled",p);"radio"===this.type?n(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var p=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
r=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(p.empty()).text(),q=this.options.icons,u=q.primary&&q.secondary,v=[];q.primary||q.secondary?(this.options.text&&v.push("ui-button-text-icon"+(u?"s":q.primary?"-primary":"-secondary")),q.primary&&p.prepend("<span class='ui-button-icon-primary ui-icon "+q.primary+"'></span>"),q.secondary&&p.append("<span class='ui-button-icon-secondary ui-icon "+q.secondary+"'></span>"),this.options.text||
(v.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||p.attr("title",r))):v.push("ui-button-text-only");p.addClass(v.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(p,r){"disabled"===p&&this.buttons.button("option",p,r);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var p="rtl"===
this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(p?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(p?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
a.Widget.prototype.destroy.call(this)}})})(jQuery);
(function(a,c){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=h(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function h(n){return n.bind("mouseout",function(p){p=a(p.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");
p.length&&p.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(p){p=a(p.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");!a.datepicker._isDisabledDatepicker(m.inline?n.parent()[0]:m.input[0])&&p.length&&(p.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),p.addClass("ui-state-hover"),p.hasClass("ui-datepicker-prev")&&p.addClass("ui-datepicker-prev-hover"),p.hasClass("ui-datepicker-next")&&
p.addClass("ui-datepicker-next-hover"))})}function k(n,p){a.extend(n,p);for(var r in p)if(null==p[r]||p[r]==c)n[r]=p[r];return n}a.extend(a.ui,{datepicker:{version:"1.8.24"}});var l=(new Date).getTime(),m;a.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return k(this._defaults,n||{}),this},_attachDatepicker:function(n,p){var r=null;for(u in this._defaults){var q=
n.getAttribute("date:"+u);if(q){r=r||{};try{r[u]=eval(q)}catch(x){r[u]=q}}}var u=n.nodeName.toLowerCase();q="div"==u||"span"==u;n.id||(this.uuid+=1,n.id="dp"+this.uuid);var v=this._newInst(a(n),q);v.settings=a.extend({},p||{},r||{});"input"==u?this._connectDatepicker(n,v):q&&this._inlineDatepicker(n,v)},_newInst:function(n,p){return{id:n[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:n,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:p,dpDiv:p?h(a('<div class="'+this._inlineClass+
' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(n,p){var r=a(n);p.append=a([]);p.trigger=a([]);r.hasClass(this.markerClassName)||(this._attachments(r,p),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(q,u,v){p.settings[u]=v}).bind("getData.datepicker",function(q,u){return this._get(p,u)}),this._autoSize(p),a.data(n,"datepicker",
p),p.settings.disabled&&this._disableDatepicker(n))},_attachments:function(n,p){var r=this._get(p,"appendText"),q=this._get(p,"isRTL");p.append&&p.append.remove();r&&(p.append=a('<span class="'+this._appendClass+'">'+r+"</span>"),n[q?"before":"after"](p.append));n.unbind("focus",this._showDatepicker);p.trigger&&p.trigger.remove();r=this._get(p,"showOn");"focus"!=r&&"both"!=r||n.focus(this._showDatepicker);if("button"==r||"both"==r){r=this._get(p,"buttonText");var u=this._get(p,"buttonImage");p.trigger=
a(this._get(p,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:u,alt:r,title:r}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==u?r:a("<img/>").attr({src:u,alt:r,title:r})));n[q?"before":"after"](p.trigger);p.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput==n[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!=n[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(n[0])):
a.datepicker._showDatepicker(n[0]),!1})}},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var p=new Date(2009,11,20),r=this._get(n,"dateFormat");if(r.match(/[DM]/)){var q=function(u){for(var v=0,x=0,y=0;y<u.length;y++)u[y].length>v&&(v=u[y].length,x=y);return x};p.setMonth(q(this._get(n,r.match(/MM/)?"monthNames":"monthNamesShort")));p.setDate(q(this._get(n,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-p.getDay())}n.input.attr("size",this._formatDate(n,p).length)}},_inlineDatepicker:function(n,
p){var r=a(n);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(p.dpDiv).bind("setData.datepicker",function(q,u,v){p.settings[u]=v}).bind("getData.datepicker",function(q,u){return this._get(p,u)}),a.data(n,"datepicker",p),this._setDate(p,this._getDefaultDate(p),!0),this._updateDatepicker(p),this._updateAlternate(p),p.settings.disabled&&this._disableDatepicker(n),p.dpDiv.css("display","block"))},_dialogDatepicker:function(n,p,r,q,u){n=this._dialogInst;n||(this.uuid+=1,this._dialogInput=
a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],"datepicker",n));k(n.settings,q||{});p=p&&p.constructor==Date?this._formatDate(n,p):p;this._dialogInput.val(p);this._pos=u?u.length?u:[u.pageX,u.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||
document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",n),this},_destroyDatepicker:function(n){var p=a(n),r=a.data(n,"datepicker");if(p.hasClass(this.markerClassName)){var q=
n.nodeName.toLowerCase();a.removeData(n,"datepicker");"input"==q?(r.append.remove(),r.trigger.remove(),p.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==q||"span"==q)&&p.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(n){var p=a(n),r=a.data(n,"datepicker");if(p.hasClass(this.markerClassName)){var q=n.nodeName.toLowerCase();if("input"==q)n.disabled=
!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==q||"span"==q)p=p.children("."+this._inlineClass),p.children().removeClass("ui-state-disabled"),p.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=a.map(this._disabledInputs,function(u){return u==n?null:u})}},_disableDatepicker:function(n){var p=a(n),r=a.data(n,"datepicker");if(p.hasClass(this.markerClassName)){var q=
n.nodeName.toLowerCase();if("input"==q)n.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==q||"span"==q)p=p.children("."+this._inlineClass),p.children().addClass("ui-state-disabled"),p.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled");this._disabledInputs=a.map(this._disabledInputs,function(u){return u==n?null:u});this._disabledInputs[this._disabledInputs.length]=
n}},_isDisabledDatepicker:function(n){if(!n)return!1;for(var p=0;p<this._disabledInputs.length;p++)if(this._disabledInputs[p]==n)return!0;return!1},_getInst:function(n){try{return a.data(n,"datepicker")}catch(p){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(n,p,r){var q=this._getInst(n);if(2==arguments.length&&"string"==typeof p)return"defaults"==p?a.extend({},a.datepicker._defaults):q?"all"==p?a.extend({},q.settings):this._get(q,p):null;var u=p||{};"string"==typeof p&&
(u={},u[p]=r);if(q){this._curInst==q&&this._hideDatepicker();var v=this._getDateDatepicker(n,!0),x=this._getMinMaxDate(q,"min"),y=this._getMinMaxDate(q,"max");k(q.settings,u);null!==x&&u.dateFormat!==c&&u.minDate===c&&(q.settings.minDate=this._formatDate(q,x));null!==y&&u.dateFormat!==c&&u.maxDate===c&&(q.settings.maxDate=this._formatDate(q,y));this._attachments(a(n),q);this._autoSize(q);this._setDate(q,v);this._updateAlternate(q);this._updateDatepicker(q)}},_changeDatepicker:function(n,p,r){this._optionDatepicker(n,
p,r)},_refreshDatepicker:function(n){(n=this._getInst(n))&&this._updateDatepicker(n)},_setDateDatepicker:function(n,p){(n=this._getInst(n))&&(this._setDate(n,p),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(n,p){n=this._getInst(n);return n&&!n.inline&&this._setDateFromField(n,p),n?this._getDate(n):null},_doKeyDown:function(n){var p=a.datepicker._getInst(n.target),r=!0,q=p.dpDiv.is(".ui-datepicker-rtl");p._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(n.keyCode){case 9:a.datepicker._hideDatepicker();
r=!1;break;case 13:return r=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",p.dpDiv),r[0]&&a.datepicker._selectDay(n.target,p.selectedMonth,p.selectedYear,r[0]),(n=a.datepicker._get(p,"onSelect"))?(r=a.datepicker._formatDate(p),n.apply(p.input?p.input[0]:null,[r,p])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(n.target,n.ctrlKey?-a.datepicker._get(p,"stepBigMonths"):-a.datepicker._get(p,"stepMonths"),"M");
break;case 34:a.datepicker._adjustDate(n.target,n.ctrlKey?+a.datepicker._get(p,"stepBigMonths"):+a.datepicker._get(p,"stepMonths"),"M");break;case 35:(n.ctrlKey||n.metaKey)&&a.datepicker._clearDate(n.target);r=n.ctrlKey||n.metaKey;break;case 36:(n.ctrlKey||n.metaKey)&&a.datepicker._gotoToday(n.target);r=n.ctrlKey||n.metaKey;break;case 37:(n.ctrlKey||n.metaKey)&&a.datepicker._adjustDate(n.target,q?1:-1,"D");r=n.ctrlKey||n.metaKey;n.originalEvent.altKey&&a.datepicker._adjustDate(n.target,n.ctrlKey?
-a.datepicker._get(p,"stepBigMonths"):-a.datepicker._get(p,"stepMonths"),"M");break;case 38:(n.ctrlKey||n.metaKey)&&a.datepicker._adjustDate(n.target,-7,"D");r=n.ctrlKey||n.metaKey;break;case 39:(n.ctrlKey||n.metaKey)&&a.datepicker._adjustDate(n.target,q?-1:1,"D");r=n.ctrlKey||n.metaKey;n.originalEvent.altKey&&a.datepicker._adjustDate(n.target,n.ctrlKey?+a.datepicker._get(p,"stepBigMonths"):+a.datepicker._get(p,"stepMonths"),"M");break;case 40:(n.ctrlKey||n.metaKey)&&a.datepicker._adjustDate(n.target,
7,"D");r=n.ctrlKey||n.metaKey;break;default:r=!1}else 36==n.keyCode&&n.ctrlKey?a.datepicker._showDatepicker(this):r=!1;r&&(n.preventDefault(),n.stopPropagation())},_doKeyPress:function(n){var p=a.datepicker._getInst(n.target);if(a.datepicker._get(p,"constrainInput")){p=a.datepicker._possibleChars(a.datepicker._get(p,"dateFormat"));var r=String.fromCharCode(n.charCode==c?n.keyCode:n.charCode);return n.ctrlKey||n.metaKey||" ">r||!p||-1<p.indexOf(r)}},_doKeyUp:function(n){n=a.datepicker._getInst(n.target);
if(n.input.val()!=n.lastVal)try{a.datepicker.parseDate(a.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,a.datepicker._getFormatConfig(n))&&(a.datepicker._setDateFromField(n),a.datepicker._updateAlternate(n),a.datepicker._updateDatepicker(n))}catch(p){a.datepicker.log(p)}return!0},_showDatepicker:function(n){n=n.target||n;"input"!=n.nodeName.toLowerCase()&&(n=a("input",n.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(n)&&a.datepicker._lastInput!=n){var p=a.datepicker._getInst(n);
a.datepicker._curInst&&a.datepicker._curInst!=p&&(a.datepicker._curInst.dpDiv.stop(!0,!0),p&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var r=a.datepicker._get(p,"beforeShow");r=r?r.apply(n,[n,p]):{};if(!1!==r){k(p.settings,r);p.lastVal=null;a.datepicker._lastInput=n;a.datepicker._setDateFromField(p);a.datepicker._inDialog&&(n.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(n),a.datepicker._pos[1]+=n.offsetHeight);var q=!1;
a(n).parents().each(function(){return q|="fixed"==a(this).css("position"),!q});q&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);r={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;p.dpDiv.empty();p.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(p);r=a.datepicker._checkOffset(p,r,q);p.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":
q?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"});if(!p.inline){r=a.datepicker._get(p,"showAnim");var u=a.datepicker._get(p,"duration"),v=function(){var x=p.dpDiv.find("iframe.ui-datepicker-cover");if(x.length){var y=a.datepicker._getBorders(p.dpDiv);x.css({left:-y[0],top:-y[1],width:p.dpDiv.outerWidth(),height:p.dpDiv.outerHeight()})}};p.dpDiv.zIndex(a(n).zIndex()+1);a.datepicker._datepickerShowing=!0;a.effects&&a.effects[r]?p.dpDiv.show(r,a.datepicker._get(p,"showOptions"),u,
v):p.dpDiv[r||"show"](r?u:null,v);r&&u||v();p.input.is(":visible")&&!p.input.is(":disabled")&&p.input.focus();a.datepicker._curInst=p}}}},_updateDatepicker:function(n){this.maxRows=4;var p=a.datepicker._getBorders(n.dpDiv);m=n;n.dpDiv.empty().append(this._generateHTML(n));this._attachHandlers(n);var r=n.dpDiv.find("iframe.ui-datepicker-cover");!r.length||r.css({left:-p[0],top:-p[1],width:n.dpDiv.outerWidth(),height:n.dpDiv.outerHeight()});n.dpDiv.find("."+this._dayOverClass+" a").mouseover();p=this._getNumberOfMonths(n);
r=p[1];n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<r&&n.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em");n.dpDiv[(1!=p[0]||1!=p[1]?"add":"remove")+"Class"]("ui-datepicker-multi");n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");n==a.datepicker._curInst&&a.datepicker._datepickerShowing&&n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&n.input[0]!=document.activeElement&&n.input.focus();if(n.yearshtml){var q=
n.yearshtml;setTimeout(function(){q===n.yearshtml&&n.yearshtml&&n.dpDiv.find("select.ui-datepicker-year:first").replaceWith(n.yearshtml);q=n.yearshtml=null},0)}},_getBorders:function(n){var p=function(r){return{thin:1,medium:2,thick:3}[r]||r};return[parseFloat(p(n.css("border-left-width"))),parseFloat(p(n.css("border-top-width")))]},_checkOffset:function(n,p,r){var q=n.dpDiv.outerWidth(),u=n.dpDiv.outerHeight(),v=n.input?n.input.outerWidth():0,x=n.input?n.input.outerHeight():0,y=document.documentElement.clientWidth+
(r?0:a(document).scrollLeft()),B=document.documentElement.clientHeight+(r?0:a(document).scrollTop());return p.left-=this._get(n,"isRTL")?q-v:0,p.left-=r&&p.left==n.input.offset().left?a(document).scrollLeft():0,p.top-=r&&p.top==n.input.offset().top+x?a(document).scrollTop():0,p.left-=Math.min(p.left,p.left+q>y&&y>q?Math.abs(p.left+q-y):0),p.top-=Math.min(p.top,p.top+u>B&&B>u?Math.abs(u+x):0),p},_findPos:function(n){var p=this._getInst(n);for(p=this._get(p,"isRTL");n&&("hidden"==n.type||1!=n.nodeType||
a.expr.filters.hidden(n));)n=n[p?"previousSibling":"nextSibling"];n=a(n).offset();return[n.left,n.top]},_hideDatepicker:function(n){var p=this._curInst;if(p&&(!n||p==a.data(n,"datepicker"))&&this._datepickerShowing){n=this._get(p,"showAnim");var r=this._get(p,"duration"),q=function(){a.datepicker._tidyDialog(p)};a.effects&&a.effects[n]?p.dpDiv.hide(n,a.datepicker._get(p,"showOptions"),r,q):p.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?r:null,q);n||q();this._datepickerShowing=!1;
(n=this._get(p,"onClose"))&&n.apply(p.input?p.input[0]:null,[p.input?p.input.val():"",p]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(n){if(a.datepicker._curInst){n=a(n.target);var p=a.datepicker._getInst(n[0]);(!(n[0].id==a.datepicker._mainDivId||
0!=n.parents("#"+a.datepicker._mainDivId).length||n.hasClass(a.datepicker.markerClassName)||n.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||n.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=p)&&a.datepicker._hideDatepicker()}},_adjustDate:function(n,p,r){n=a(n);var q=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(q,p+("M"==r?this._get(q,"showCurrentAtPos"):0),r),this._updateDatepicker(q))},
_gotoToday:function(n){n=a(n);var p=this._getInst(n[0]);if(this._get(p,"gotoCurrent")&&p.currentDay)p.selectedDay=p.currentDay,p.drawMonth=p.selectedMonth=p.currentMonth,p.drawYear=p.selectedYear=p.currentYear;else{var r=new Date;p.selectedDay=r.getDate();p.drawMonth=p.selectedMonth=r.getMonth();p.drawYear=p.selectedYear=r.getFullYear()}this._notifyChange(p);this._adjustDate(n)},_selectMonthYear:function(n,p,r){n=a(n);var q=this._getInst(n[0]);q["selected"+("M"==r?"Month":"Year")]=q["draw"+("M"==
r?"Month":"Year")]=parseInt(p.options[p.selectedIndex].value,10);this._notifyChange(q);this._adjustDate(n)},_selectDay:function(n,p,r,q){var u=a(n);a(q).hasClass(this._unselectableClass)||this._isDisabledDatepicker(u[0])||(u=this._getInst(u[0]),u.selectedDay=u.currentDay=a("a",q).html(),u.selectedMonth=u.currentMonth=p,u.selectedYear=u.currentYear=r,this._selectDate(n,this._formatDate(u,u.currentDay,u.currentMonth,u.currentYear)))},_clearDate:function(n){n=a(n);this._getInst(n[0]);this._selectDate(n,
"")},_selectDate:function(n,p){n=a(n);n=this._getInst(n[0]);p=null!=p?p:this._formatDate(n);n.input&&n.input.val(p);this._updateAlternate(n);var r=this._get(n,"onSelect");r?r.apply(n.input?n.input[0]:null,[p,n]):n.input&&n.input.trigger("change");n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(n){var p=this._get(n,"altField");if(p){var r=this._get(n,"altFormat")||this._get(n,
"dateFormat"),q=this._getDate(n),u=this.formatDate(r,q,this._getFormatConfig(n));a(p).each(function(){a(this).val(u)})}},noWeekends:function(n){n=n.getDay();return[0<n&&6>n,""]},iso8601Week:function(n){n=new Date(n.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));var p=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((p-n)/864E5)/7)+1},parseDate:function(n,p,r){if(null==n||null==p)throw"Invalid arguments";p="object"==typeof p?p.toString():p+"";if(""==p)return null;var q=(r?r.shortYearCutoff:
null)||this._defaults.shortYearCutoff;q="string"!=typeof q?q:(new Date).getFullYear()%100+parseInt(q,10);for(var u=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,v=(r?r.dayNames:null)||this._defaults.dayNames,x=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,y=(r?r.monthNames:null)||this._defaults.monthNames,B=r=-1,C=-1,H=-1,F=!1,E=function(M){M=T+1<n.length&&n.charAt(T+1)==M;return M&&T++,M},G=function(M){var W=E(M);M=new RegExp("^\\d{1,"+("@"==M?14:"!"==M?20:"y"==M&&W?4:"o"==
M?3:2)+"}");M=p.substring(O).match(M);if(!M)throw"Missing number at position "+O;return O+=M[0].length,parseInt(M[0],10)},K=function(M,W,da){M=a.map(E(M)?da:W,function(fa,xa){return[[xa,fa]]}).sort(function(fa,xa){return-(fa[1].length-xa[1].length)});var ma=-1;a.each(M,function(fa,xa){fa=xa[1];if(p.substr(O,fa.length).toLowerCase()==fa.toLowerCase())return ma=xa[0],O+=fa.length,!1});if(-1!=ma)return ma+1;throw"Unknown name at position "+O;},J=function(){if(p.charAt(O)!=n.charAt(T))throw"Unexpected literal at position "+
O;O++},O=0,T=0;T<n.length;T++)if(F)"'"!=n.charAt(T)||E("'")?J():F=!1;else switch(n.charAt(T)){case "d":C=G("d");break;case "D":K("D",u,v);break;case "o":H=G("o");break;case "m":B=G("m");break;case "M":B=K("M",x,y);break;case "y":r=G("y");break;case "@":var Q=new Date(G("@"));r=Q.getFullYear();B=Q.getMonth()+1;C=Q.getDate();break;case "!":Q=new Date((G("!")-this._ticksTo1970)/1E4);r=Q.getFullYear();B=Q.getMonth()+1;C=Q.getDate();break;case "'":E("'")?J():F=!0;break;default:J()}if(O<p.length)throw"Extra/unparsed characters found in date: "+
p.substring(O);-1==r?r=(new Date).getFullYear():100>r&&(r+=(new Date).getFullYear()-(new Date).getFullYear()%100+(r<=q?0:-100));if(-1<H){B=1;C=H;do{q=this._getDaysInMonth(r,B-1);if(C<=q)break;B++;C-=q}while(1)}Q=this._daylightSavingAdjust(new Date(r,B-1,C));if(Q.getFullYear()!=r||Q.getMonth()+1!=B||Q.getDate()!=C)throw"Invalid date";return Q},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",
RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(n,p,r){if(!p)return"";var q=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,u=(r?r.dayNames:null)||this._defaults.dayNames,v=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort;r=(r?r.monthNames:null)||this._defaults.monthNames;var x=function(E){E=F+1<n.length&&n.charAt(F+1)==E;return E&&F++,E},y=function(E,G,K){G=""+G;if(x(E))for(;G.length<K;)G="0"+G;return G},B=function(E,G,K,J){return x(E)?
J[G]:K[G]},C="",H=!1;if(p)for(var F=0;F<n.length;F++)if(H)"'"!=n.charAt(F)||x("'")?C+=n.charAt(F):H=!1;else switch(n.charAt(F)){case "d":C+=y("d",p.getDate(),2);break;case "D":C+=B("D",p.getDay(),q,u);break;case "o":C+=y("o",Math.round(((new Date(p.getFullYear(),p.getMonth(),p.getDate())).getTime()-(new Date(p.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":C+=y("m",p.getMonth()+1,2);break;case "M":C+=B("M",p.getMonth(),v,r);break;case "y":C+=x("y")?p.getFullYear():(10>p.getYear()%100?"0":
"")+p.getYear()%100;break;case "@":C+=p.getTime();break;case "!":C+=1E4*p.getTime()+this._ticksTo1970;break;case "'":x("'")?C+="'":H=!0;break;default:C+=n.charAt(F)}return C},_possibleChars:function(n){for(var p="",r=!1,q=function(v){v=u+1<n.length&&n.charAt(u+1)==v;return v&&u++,v},u=0;u<n.length;u++)if(r)"'"!=n.charAt(u)||q("'")?p+=n.charAt(u):r=!1;else switch(n.charAt(u)){case "d":case "m":case "y":case "@":p+="0123456789";break;case "D":case "M":return null;case "'":q("'")?p+="'":r=!0;break;default:p+=
n.charAt(u)}return p},_get:function(n,p){return n.settings[p]!==c?n.settings[p]:this._defaults[p]},_setDateFromField:function(n,p){if(n.input.val()!=n.lastVal){var r=this._get(n,"dateFormat"),q=n.lastVal=n.input?n.input.val():null,u;var v=u=this._getDefaultDate(n);var x=this._getFormatConfig(n);try{v=this.parseDate(r,q,x)||u}catch(y){this.log(y),q=p?"":q}n.selectedDay=v.getDate();n.drawMonth=n.selectedMonth=v.getMonth();n.drawYear=n.selectedYear=v.getFullYear();n.currentDay=q?v.getDate():0;n.currentMonth=
q?v.getMonth():0;n.currentYear=q?v.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(n,p,r){var q=function(v){var x=new Date;return x.setDate(x.getDate()+v),x},u=function(v){try{return a.datepicker.parseDate(a.datepicker._get(n,"dateFormat"),v,a.datepicker._getFormatConfig(n))}catch(F){}var x=(v.toLowerCase().match(/^c/)?a.datepicker._getDate(n):null)||new Date,y=
x.getFullYear(),B=x.getMonth();x=x.getDate();for(var C=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,H=C.exec(v);H;){switch(H[2]||"d"){case "d":case "D":x+=parseInt(H[1],10);break;case "w":case "W":x+=7*parseInt(H[1],10);break;case "m":case "M":B+=parseInt(H[1],10);x=Math.min(x,a.datepicker._getDaysInMonth(y,B));break;case "y":case "Y":y+=parseInt(H[1],10),x=Math.min(x,a.datepicker._getDaysInMonth(y,B))}H=C.exec(v)}return new Date(y,B,x)};p=null==p||""===p?r:"string"==typeof p?u(p):"number"==typeof p?isNaN(p)?
r:q(p):new Date(p.getTime());return p=p&&"Invalid Date"==p.toString()?r:p,p&&(p.setHours(0),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0)),this._daylightSavingAdjust(p)},_daylightSavingAdjust:function(n){return n?(n.setHours(12<n.getHours()?n.getHours()+2:0),n):null},_setDate:function(n,p,r){var q=!p,u=n.selectedMonth,v=n.selectedYear;p=this._restrictMinMax(n,this._determineDate(n,p,new Date));n.selectedDay=n.currentDay=p.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=p.getMonth();n.drawYear=
n.selectedYear=n.currentYear=p.getFullYear();u==n.selectedMonth&&v==n.selectedYear||r||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(q?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&""==n.input.val()?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(n){var p=this._get(n,"stepMonths"),r="#"+n.id.replace(/\\\\/g,"\\");n.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),
{prev:function(){window["DP_jQuery_"+l].datepicker._adjustDate(r,-p,"M")},next:function(){window["DP_jQuery_"+l].datepicker._adjustDate(r,+p,"M")},hide:function(){window["DP_jQuery_"+l].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+l].datepicker._gotoToday(r)},selectDay:function(){return window["DP_jQuery_"+l].datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+l].datepicker._selectMonthYear(r,
this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+l].datepicker._selectMonthYear(r,this,"Y"),!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(n){var p=new Date;p=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth(),p.getDate()));var r=this._get(n,"isRTL"),q=this._get(n,"showButtonPanel"),u=this._get(n,"hideIfNoPrevNext"),v=this._get(n,"navigationAsDateFormat"),x=this._getNumberOfMonths(n),y=this._get(n,"showCurrentAtPos"),B=this._get(n,"stepMonths"),C=1!=
x[0]||1!=x[1],H=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),F=this._getMinMaxDate(n,"min"),E=this._getMinMaxDate(n,"max");y=n.drawMonth-y;var G=n.drawYear;0>y&&(y+=12,G--);if(E){var K=this._daylightSavingAdjust(new Date(E.getFullYear(),E.getMonth()-x[0]*x[1]+1,E.getDate()));for(K=F&&K<F?F:K;this._daylightSavingAdjust(new Date(G,y,1))>K;)y--,0>y&&(y=11,G--)}n.drawMonth=y;n.drawYear=G;K=this._get(n,"prevText");K=v?this.formatDate(K,
this._daylightSavingAdjust(new Date(G,y-B,1)),this._getFormatConfig(n)):K;K=this._canAdjustMonth(n,-1,G,y)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+K+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"e":"w")+'">'+K+"</span></a>":u?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+K+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"e":"w")+'">'+K+"</span></a>";var J=this._get(n,"nextText");J=v?this.formatDate(J,this._daylightSavingAdjust(new Date(G,
y+B,1)),this._getFormatConfig(n)):J;u=this._canAdjustMonth(n,1,G,y)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+J+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"w":"e")+'">'+J+"</span></a>":u?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+J+'"><span class="ui-icon ui-icon-circle-triangle-'+(r?"w":"e")+'">'+J+"</span></a>";B=this._get(n,"currentText");J=this._get(n,"gotoCurrent")&&n.currentDay?H:p;B=v?this.formatDate(B,
J,this._getFormatConfig(n)):B;v=n.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all btn btn-blue" data-handler="hide" data-event="click">'+this._get(n,"closeText")+"</button>";q=q?'<div class="ui-datepicker-buttonpane pull-left">'+(r?v:"")+(this._isInRange(n,J)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click" style="display:none;">'+B+"</button>":
"")+(r?"":v)+"</div>":"";v=parseInt(this._get(n,"firstDay"),10);v=isNaN(v)?0:v;B=this._get(n,"showWeek");J=this._get(n,"dayNames");this._get(n,"dayNamesShort");var O=this._get(n,"dayNamesMin"),T=this._get(n,"monthNames"),Q=this._get(n,"monthNamesShort"),M=this._get(n,"beforeShowDay"),W=this._get(n,"showOtherMonths"),da=this._get(n,"selectOtherMonths");this._get(n,"calculateWeek");for(var ma=this._getDefaultDate(n),fa="",xa=0;xa<x[0];xa++){var Ea="";this.maxRows=4;for(var Da=0;Da<x[1];Da++){var Fa=
this._daylightSavingAdjust(new Date(G,y,n.selectedDay)),ta=" ui-corner-all",X="";if(C){X+='<div class="ui-datepicker-group';if(1<x[1])switch(Da){case 0:X+=" ui-datepicker-group-first";ta=" ui-corner-"+(r?"right":"left");break;case x[1]-1:X+=" ui-datepicker-group-last";ta=" ui-corner-"+(r?"left":"right");break;default:X+=" ui-datepicker-group-middle",ta=""}X+='">'}X+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+ta+'">'+(/all|left/.test(ta)&&0==xa?r?u:K:"")+(/all|right/.test(ta)&&
0==xa?r?K:u:"")+this._generateMonthYearHeader(n,y,G,F,E,0<xa||0<Da,T,Q)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var ja=B?'<th class="ui-datepicker-week-col">'+this._get(n,"weekHeader")+"</th>":"";for(ta=0;7>ta;ta++){var P=(ta+v)%7;ja+="<th"+(5<=(ta+v+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+J[P]+'">'+O[P]+"</span></th>"}X+=ja+"</tr></thead><tbody>";ja=this._getDaysInMonth(G,y);G==n.selectedYear&&y==n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,ja));ta=
(this._getFirstDayOfMonth(G,y)-v+7)%7;ja=Math.ceil((ta+ja)/7);this.maxRows=ja=C?this.maxRows>ja?this.maxRows:ja:ja;P=this._daylightSavingAdjust(new Date(G,y,1-ta));for(var ca=0;ca<ja;ca++){X+="<tr>";var ea=B?'<td class="ui-datepicker-week-col">'+this._get(n,"calculateWeek")(P)+"</td>":"";for(ta=0;7>ta;ta++){var sa=M?M.apply(n.input?n.input[0]:null,[P]):[!0,""],qa=P.getMonth()!=y,R=qa&&!da||!sa[0]||F&&P<F||E&&P>E;ea+='<td class="'+(5<=(ta+v+6)%7?" ui-datepicker-week-end":"")+(qa?" ui-datepicker-other-month":
"")+(P.getTime()==Fa.getTime()&&y==n.selectedMonth&&n._keyEvent||ma.getTime()==P.getTime()&&ma.getTime()==Fa.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(qa&&!W?"":" "+sa[1]+(P.getTime()==H.getTime()?" "+this._currentClass:"")+(P.getTime()==p.getTime()?" ui-datepicker-today":""))+'"'+(qa&&!W||!sa[2]?"":' title="'+sa[2]+'"')+(R?"":' data-handler="selectDay" data-event="click" data-month="'+P.getMonth()+'" data-year="'+P.getFullYear()+'"')+">"+(qa&&!W?
"&#xa0;":R?'<span class="ui-state-default">'+P.getDate()+"</span>":'<a class="ui-state-default'+(P.getTime()==p.getTime()?" ui-state-highlight":"")+(P.getTime()==H.getTime()?" ui-state-active":"")+(qa?" ui-priority-secondary":"")+'" href="#">'+P.getDate()+"</a>")+"</td>";P.setDate(P.getDate()+1);P=this._daylightSavingAdjust(P)}X+=ea+"</tr>"}y++;11<y&&(y=0,G++);X+="</tbody></table>"+(C?"</div>"+(0<x[0]&&Da==x[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");Ea+=X}fa+=Ea}return fa+=q+(a.browser.msie&&
7>parseInt(a.browser.version,10)&&!n.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),n._keyEvent=!1,fa},_generateMonthYearHeader:function(n,p,r,q,u,v,x,y){var B=this._get(n,"changeMonth"),C=this._get(n,"changeYear"),H=this._get(n,"showMonthAfterYear"),F='<div class="ui-datepicker-title">',E="";if(v||!B)E+='<span class="ui-datepicker-month">'+x[p]+"</span>";else{x=q&&q.getFullYear()==r;var G=u&&u.getFullYear()==r;E+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
for(var K=0;12>K;K++)(!x||K>=q.getMonth())&&(!G||K<=u.getMonth())&&(E+='<option value="'+K+'"'+(K==p?' selected="selected"':"")+">"+y[K]+"</option>");E+="</select>"}H||(F+=E+(!v&&B&&C?"":"&#xa0;"));if(!n.yearshtml)if(n.yearshtml="",v||!C)F+='<span class="ui-datepicker-year">'+r+"</span>";else{y=this._get(n,"yearRange").split(":");var J=(new Date).getFullYear();x=function(O){O=O.match(/c[+-].*/)?r+parseInt(O.substring(1),10):O.match(/[+-].*/)?J+parseInt(O,10):parseInt(O,10);return isNaN(O)?J:O};p=
x(y[0]);y=Math.max(p,x(y[1]||""));p=q?Math.max(p,q.getFullYear()):p;y=u?Math.min(y,u.getFullYear()):y;for(n.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';p<=y;p++)n.yearshtml+='<option value="'+p+'"'+(p==r?' selected="selected"':"")+">"+p+"</option>";n.yearshtml+="</select>";F+=n.yearshtml;n.yearshtml=null}return F+=this._get(n,"yearSuffix"),H&&(F+=(!v&&B&&C?"":"&#xa0;")+E),F+="</div>",F},_adjustInstDate:function(n,p,r){var q=n.drawYear+("Y"==r?p:0),
u=n.drawMonth+("M"==r?p:0);p=Math.min(n.selectedDay,this._getDaysInMonth(q,u))+("D"==r?p:0);q=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(q,u,p)));n.selectedDay=q.getDate();n.drawMonth=n.selectedMonth=q.getMonth();n.drawYear=n.selectedYear=q.getFullYear();"M"!=r&&"Y"!=r||this._notifyChange(n)},_restrictMinMax:function(n,p){var r=this._getMinMaxDate(n,"min");n=this._getMinMaxDate(n,"max");p=r&&p<r?r:p;return p=n&&p>n?n:p,p},_notifyChange:function(n){var p=this._get(n,"onChangeMonthYear");
p&&p.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){n=this._get(n,"numberOfMonths");return null==n?[1,1]:"number"==typeof n?[1,n]:n},_getMinMaxDate:function(n,p){return this._determineDate(n,this._get(n,p+"Date"),null)},_getDaysInMonth:function(n,p){return 32-this._daylightSavingAdjust(new Date(n,p,32)).getDate()},_getFirstDayOfMonth:function(n,p){return(new Date(n,p,1)).getDay()},_canAdjustMonth:function(n,p,r,q){var u=this._getNumberOfMonths(n);
r=this._daylightSavingAdjust(new Date(r,q+(0>p?p:u[0]*u[1]),1));return 0>p&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(n,r)},_isInRange:function(n,p){var r=this._getMinMaxDate(n,"min");n=this._getMinMaxDate(n,"max");return(!r||p.getTime()>=r.getTime())&&(!n||p.getTime()<=n.getTime())},_getFormatConfig:function(n){var p=this._get(n,"shortYearCutoff");return p="string"!=typeof p?p:(new Date).getFullYear()%100+parseInt(p,10),{shortYearCutoff:p,dayNamesShort:this._get(n,
"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,p,r,q){p||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);p=p?"object"==typeof p?p:this._daylightSavingAdjust(new Date(q,r,p)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),p,this._getFormatConfig(n))}});a.fn.datepicker=
function(n){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0);var p=Array.prototype.slice.call(arguments,1);return"string"!=typeof n||"isDisabled"!=n&&"getDate"!=n&&"widget"!=n?"option"==n&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+n+"Datepicker"].apply(a.datepicker,[this[0]].concat(p)):this.each(function(){"string"==typeof n?a.datepicker["_"+
n+"Datepicker"].apply(a.datepicker,[this].concat(p)):a.datepicker._attachDatepicker(this,n)}):a.datepicker["_"+n+"Datepicker"].apply(a.datepicker,[this[0]].concat(p))};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.24";window["DP_jQuery_"+l]=a})(jQuery);
(function(a,c){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},h={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(k){var l=a(this).css(k).offset().top;0>l&&a(this).css("top",k.top-l)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!=typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var k=this,l=k.options,m=l.title||"&#160;",n=a.ui.dialog.getTitleId(k.element),p=(k.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l.dialogClass).css({zIndex:l.zIndex}).attr("tabIndex",-1).css("outline",
0).keydown(function(u){l.closeOnEscape&&!u.isDefaultPrevented()&&u.keyCode&&u.keyCode===a.ui.keyCode.ESCAPE&&(k.close(u),u.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(u){k.moveToTop(!1,u)});k.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(p);var r=(k.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(p),q=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){q.addClass("ui-state-hover")},function(){q.removeClass("ui-state-hover")}).focus(function(){q.addClass("ui-state-focus")}).blur(function(){q.removeClass("ui-state-focus")}).click(function(u){return k.close(u),!1}).appendTo(r);(k.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(q);a("<span></span>").addClass("ui-dialog-title").attr("id",n).html(m).prependTo(r);a.isFunction(l.beforeclose)&&!a.isFunction(l.beforeClose)&&
(l.beforeClose=l.beforeclose);r.find("*").add(r).disableSelection();l.draggable&&a.fn.draggable&&k._makeDraggable();l.resizable&&a.fn.resizable&&k._makeResizable();k._createButtons(l.buttons);k._isOpen=!1;a.fn.bgiframe&&p.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){return this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),
this.originalTitle&&this.element.attr("title",this.originalTitle),this},widget:function(){return this.uiDialog},close:function(k){var l=this,m,n;if(!1!==l._trigger("beforeClose",k))return l.overlay&&l.overlay.destroy(),l.uiDialog.unbind("keypress.ui-dialog"),l._isOpen=!1,l.options.hide?l.uiDialog.hide(l.options.hide,function(){l._trigger("close",k)}):(l.uiDialog.hide(),l._trigger("close",k)),a.ui.dialog.overlay.resize(),l.options.modal&&(m=0,a(".ui-dialog").each(function(){this!==l.uiDialog[0]&&(n=
a(this).css("z-index"),isNaN(n)||(m=Math.max(m,n)))}),a.ui.dialog.maxZ=m),l},isOpen:function(){return this._isOpen},moveToTop:function(k,l){var m=this.options,n;return m.modal&&!k||!m.stack&&!m.modal?this._trigger("focus",l):(m.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=m.zIndex),this.overlay&&(a.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},a.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",
a.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",l),this)},open:function(){if(!this._isOpen){var k=this.options,l=this.uiDialog;return this.overlay=k.modal?new a.ui.dialog.overlay(this):null,this._size(),this._position(k.position),l.show(k.show),this.moveToTop(!0),k.modal&&l.bind("keydown.ui-dialog",function(m){if(m.keyCode===a.ui.keyCode.TAB){var n=a(":tabbable",this),p=n.filter(":first");n=n.filter(":last");if(m.target===n[0]&&!m.shiftKey)return p.focus(1),!1;if(m.target===p[0]&&m.shiftKey)return n.focus(1),
!1}}),a(this.element.find(":tabbable").get().concat(l.find(".ui-dialog-buttonpane :tabbable").get().concat(l.get()))).eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(k){var l=this,m=!1,n=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),p=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);l.uiDialog.find(".ui-dialog-buttonpane").remove();"object"==typeof k&&null!==k&&a.each(k,function(){return!(m=!0)});m&&(a.each(k,
function(r,q){q=a.isFunction(q)?{click:q,text:r}:q;var u=a('<button type="button"></button>').click(function(){q.click.apply(l.element[0],arguments)}).appendTo(p);a.each(q,function(v,x){"click"!==v&&(v in u?u[v](x):u.attr(v,x))});a.fn.button&&u.button()}),n.appendTo(l.uiDialog))},_makeDraggable:function(){function k(r){return{position:r.position,offset:r.offset}}var l=this,m=l.options,n=a(document),p;l.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",
containment:"document",start:function(r,q){p="auto"===m.height?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");l._trigger("dragStart",r,k(q))},drag:function(r,q){l._trigger("drag",r,k(q))},stop:function(r,q){m.position=[q.position.left-n.scrollLeft(),q.position.top-n.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(p);l._trigger("dragStop",r,k(q));a.ui.dialog.overlay.resize()}})},_makeResizable:function(k){function l(r){return{originalPosition:r.originalPosition,
originalSize:r.originalSize,position:r.position,size:r.size}}k=k===c?this.options.resizable:k;var m=this,n=m.options,p=m.uiDialog.css("position");k="string"==typeof k?k:"n,e,s,w,se,sw,ne,nw";m.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:m.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:m._minHeight(),handles:k,start:function(r,q){a(this).addClass("ui-dialog-resizing");m._trigger("resizeStart",r,l(q))},resize:function(r,q){m._trigger("resize",
r,l(q))},stop:function(r,q){a(this).removeClass("ui-dialog-resizing");n.height=a(this).height();n.width=a(this).width();m._trigger("resizeStop",r,l(q));a.ui.dialog.overlay.resize()}}).css("position",p).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var k=this.options;return"auto"===k.height?k.minHeight:Math.min(k.minHeight,k.height)},_position:function(k){var l=[],m=[0,0],n;if(k){if("string"==typeof k||"object"==typeof k&&"0"in k)l=k.split?k.split(" "):
[k[0],k[1]],1===l.length&&(l[1]=l[0]),a.each(["left","top"],function(p,r){+l[p]===l[p]&&(m[p]=l[p],l[p]=r)}),k={my:l.join(" "),at:l.join(" "),offset:m.join(" ")};k=a.extend({},a.ui.dialog.prototype.options.position,k)}else k=a.ui.dialog.prototype.options.position;(n=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},k));n||this.uiDialog.hide()},_setOptions:function(k){var l=this,m={},n=!1;a.each(k,function(p,r){l._setOption(p,r);p in
b&&(n=!0);p in h&&(m[p]=r)});n&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",m)},_setOption:function(k,l){var m=this.uiDialog;switch(k){case "beforeclose":k="beforeClose";break;case "buttons":this._createButtons(l);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+l);break;case "dialogClass":m.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l);break;case "disabled":l?m.addClass("ui-dialog-disabled"):
m.removeClass("ui-dialog-disabled");break;case "draggable":var n=m.is(":data(draggable)");n&&!l&&m.draggable("destroy");!n&&l&&this._makeDraggable();break;case "position":this._position(l);break;case "resizable":(n=m.is(":data(resizable)"))&&!l&&m.resizable("destroy");n&&"string"==typeof l&&m.resizable("option","handles",l);!n&&!1!==l&&this._makeResizable(l);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(l||"&#160;"))}a.Widget.prototype._setOption.apply(this,arguments)},_size:function(){var k=
this.options,l=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});k.minWidth>k.width&&(k.width=k.minWidth);var m=this.uiDialog.css({height:"auto",width:k.width}).height();var n=Math.max(0,k.minHeight-m);"auto"===k.height?a.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),k=this.element.css("height","auto").height(),l||this.uiDialog.hide(),this.element.height(Math.max(k,n))):this.element.height(Math.max(k.height-m,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(k){k=k.attr("id");return k||(this.uuid+=1,k=this.uuid),"ui-dialog-title-"+k},overlay:function(k){this.$el=a.ui.dialog.overlay.create(k)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(k){return k+".dialog-overlay"}).join(" "),create:function(k){0===this.instances.length&&
(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(m){if(a(m.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(m){k.options.closeOnEscape&&!m.isDefaultPrevented()&&m.keyCode&&m.keyCode===a.ui.keyCode.ESCAPE&&(k.close(m),m.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var l=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});return a.fn.bgiframe&&l.bgiframe(),this.instances.push(l),l},destroy:function(k){var l=a.inArray(k,this.instances);-1!=l&&this.oldInstances.push(this.instances.splice(l,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");k.remove();var m=0;a.each(this.instances,function(){m=Math.max(m,this.css("z-index"))});this.maxZ=m},height:function(){var k,l;return a.browser.msie&&7>a.browser.version?(k=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),
l=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),k<l?a(window).height()+"px":k+"px"):a(document).height()+"px"},width:function(){var k,l;return a.browser.msie?(k=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),l=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),k<l?a(window).width()+"px":k+"px"):a(document).width()+"px"},resize:function(){var k=a([]);a.each(a.ui.dialog.overlay.instances,function(){k=k.add(this)});k.css({width:0,
height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,c){a.ui=a.ui||{};var b=/left|center|right/,h=/top|center|bottom/,k={},l=a.fn.position,m=a.fn.offset;a.fn.position=function(n){if(!n||!n.of)return l.apply(this,arguments);n=a.extend({},n);var p=a(n.of),r=p[0],q=(n.collision||"flip").split(" "),u=n.offset?n.offset.split(" "):[0,0],v,x,y;return 9===r.nodeType?(v=p.width(),x=p.height(),y={top:0,left:0}):r.setTimeout?(v=p.width(),x=p.height(),y={top:p.scrollTop(),left:p.scrollLeft()}):r.preventDefault?(n.at="left top",v=x=0,y={top:n.of.pageY,
left:n.of.pageX}):(v=p.outerWidth(),x=p.outerHeight(),y=p.offset()),a.each(["my","at"],function(){var B=(n[this]||"").split(" ");1===B.length&&(B=b.test(B[0])?B.concat(["center"]):h.test(B[0])?["center"].concat(B):["center","center"]);B[0]=b.test(B[0])?B[0]:"center";B[1]=h.test(B[1])?B[1]:"center";n[this]=B}),1===q.length&&(q[1]=q[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===n.at[0]?y.left+=v:"center"===n.at[0]&&(y.left+=v/2),"bottom"===n.at[1]?y.top+=
x:"center"===n.at[1]&&(y.top+=x/2),y.left+=u[0],y.top+=u[1],this.each(function(){var B=a(this),C=B.outerWidth(),H=B.outerHeight(),F=parseInt(a.curCSS(this,"marginLeft",!0))||0,E=parseInt(a.curCSS(this,"marginTop",!0))||0,G=C+F+(parseInt(a.curCSS(this,"marginRight",!0))||0),K=H+E+(parseInt(a.curCSS(this,"marginBottom",!0))||0),J=a.extend({},y);"right"===n.my[0]?J.left-=C:"center"===n.my[0]&&(J.left-=C/2);"bottom"===n.my[1]?J.top-=H:"center"===n.my[1]&&(J.top-=H/2);k.fractions||(J.left=Math.round(J.left),
J.top=Math.round(J.top));var O={left:J.left-F,top:J.top-E};a.each(["left","top"],function(T,Q){a.ui.position[q[T]]&&a.ui.position[q[T]][Q](J,{targetWidth:v,targetHeight:x,elemWidth:C,elemHeight:H,collisionPosition:O,collisionWidth:G,collisionHeight:K,offset:u,my:n.my,at:n.at})});a.fn.bgiframe&&B.bgiframe();B.offset(a.extend(J,{using:n.using}))})};a.ui.position={fit:{left:function(n,p){var r=a(window);r=p.collisionPosition.left+p.collisionWidth-r.width()-r.scrollLeft();n.left=0<r?n.left-r:Math.max(n.left-
p.collisionPosition.left,n.left)},top:function(n,p){var r=a(window);r=p.collisionPosition.top+p.collisionHeight-r.height()-r.scrollTop();n.top=0<r?n.top-r:Math.max(n.top-p.collisionPosition.top,n.top)}},flip:{left:function(n,p){if("center"!==p.at[0]){var r=a(window);r=p.collisionPosition.left+p.collisionWidth-r.width()-r.scrollLeft();var q="left"===p.my[0]?-p.elemWidth:"right"===p.my[0]?p.elemWidth:0,u="left"===p.at[0]?p.targetWidth:-p.targetWidth,v=-2*p.offset[0];n.left+=0>p.collisionPosition.left?
q+u+v:0<r?q+u+v:0}},top:function(n,p){if("center"!==p.at[1]){var r=a(window);r=p.collisionPosition.top+p.collisionHeight-r.height()-r.scrollTop();var q="top"===p.my[1]?-p.elemHeight:"bottom"===p.my[1]?p.elemHeight:0,u="top"===p.at[1]?p.targetHeight:-p.targetHeight,v=-2*p.offset[1];n.top+=0>p.collisionPosition.top?q+u+v:0<r?q+u+v:0}}}};a.offset.setOffset||(a.offset.setOffset=function(n,p){/static/.test(a.curCSS(n,"position"))&&(n.style.position="relative");var r=a(n),q=r.offset(),u=parseInt(a.curCSS(n,
"top",!0),10)||0,v=parseInt(a.curCSS(n,"left",!0),10)||0;q={top:p.top-q.top+u,left:p.left-q.left+v};"using"in p?p.using.call(n,q):r.css(q)},a.fn.offset=function(n){var p=this[0];return p&&p.ownerDocument?n?a.isFunction(n)?this.each(function(r){a(this).offset(n.call(this,r,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,n)}):m.call(this):null});a.curCSS||(a.curCSS=a.css);(function(){var n=document.getElementsByTagName("body")[0],p=document.createElement("div");var r=document.createElement(n?
"div":"body");var q={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};n&&a.extend(q,{position:"absolute",left:"-1000px",top:"-1000px"});for(var u in q)r.style[u]=q[u];r.appendChild(p);q=n||document.documentElement;q.insertBefore(r,q.firstChild);p.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";p=a(p).offset(function(v,x){return x}).offset();r.innerHTML="";q.removeChild(r);n=p.top+p.left+(n?2E3:0);k.fractions=21<n&&22>n})()})(jQuery);
(function(a,c){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===c?this._value():(this._setOption("value",b),this)},_setOption:function(b,h){"value"===b&&(this.options.value=h,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return"number"!=typeof b&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var b=this.value(),h=this._percentage();this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));this.valueDiv.toggle(b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(h.toFixed(0)+"%");this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.8.24"})})(jQuery);
(function(a,c){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,h=this.options,k=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),l=h.values&&h.values.length||1,m=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(h.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);h.range&&(!0===h.range&&(h.values||(h.values=[this._valueMin(),this._valueMin()]),h.values.length&&2!==h.values.length&&(h.values=[h.values[0],h.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===h.range||"max"===h.range?" ui-slider-range-"+h.range:"")));for(var n=k.length;n<l;n+=1)m.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=k.add(a(m.join("")).appendTo(b.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(p){p.preventDefault()}).hover(function(){h.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){h.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(p){a(this).data("index.ui-slider-handle",
p)});this.handles.keydown(function(p){var r=a(this).data("index.ui-slider-handle"),q,u;if(!b.options.disabled){switch(p.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(p.preventDefault(),!b._keySliding){b._keySliding=!0;a(this).addClass("ui-state-active");var v=b._start(p,r);if(!1===v)return}}v=b.options.step;b.options.values&&b.options.values.length?
q=u=b.values(r):q=u=b.value();switch(p.keyCode){case a.ui.keyCode.HOME:u=b._valueMin();break;case a.ui.keyCode.END:u=b._valueMax();break;case a.ui.keyCode.PAGE_UP:u=b._trimAlignValue(q+(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:u=b._trimAlignValue(q-(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(q===b._valueMax())return;u=b._trimAlignValue(q+v);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(q===b._valueMin())return;u=b._trimAlignValue(q-
v)}b._slide(p,r,u)}}).keyup(function(p){var r=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(p,r),b._change(p,r),a(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},
_mouseCapture:function(b){var h=this.options,k,l,m,n,p,r,q,u,v;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),k={x:b.pageX,y:b.pageY},l=this._normValueFromMouse(k),m=this._valueMax()-this._valueMin()+1,p=this,this.handles.each(function(x){var y=Math.abs(l-p.values(x));m>y&&(m=y,n=a(this),r=x)}),!0===h.range&&this.values(1)===h.min&&(r+=1,n=a(this.handles[r])),q=this._start(b,r),!1===q?!1:(this._mouseSliding=
!0,p._handleIndex=r,n.addClass("ui-state-active").focus(),u=n.offset(),v=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=v?{left:0,top:0}:{left:b.pageX-u.left-n.width()/2,top:b.pageY-u.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,r,l),this._animateOff=!0,!0))},_mouseStart:function(b){return!0},_mouseDrag:function(b){var h=
this._normValueFromMouse({x:b.pageX,y:b.pageY});return this._slide(b,this._handleIndex,h),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var h,k,l,m,n;return"horizontal"===
this.orientation?(h=this.elementSize.width,k=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(h=this.elementSize.height,k=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),l=k/h,1<l&&(l=1),0>l&&(l=0),"vertical"===this.orientation&&(l=1-l),m=this._valueMax()-this._valueMin(),n=this._valueMin()+l*m,this._trimAlignValue(n)},_start:function(b,h){var k={handle:this.handles[h],value:this.value()};return this.options.values&&this.options.values.length&&(k.value=
this.values(h),k.values=this.values()),this._trigger("start",b,k)},_slide:function(b,h,k){var l,m,n;this.options.values&&this.options.values.length?(l=this.values(h?0:1),2===this.options.values.length&&!0===this.options.range&&(0===h&&k>l||1===h&&k<l)&&(k=l),k!==this.values(h)&&(m=this.values(),m[h]=k,n=this._trigger("slide",b,{handle:this.handles[h],value:k,values:m}),this.values(h?0:1),!1!==n&&this.values(h,k,!0))):k!==this.value()&&(n=this._trigger("slide",b,{handle:this.handles[h],value:k}),!1!==
n&&this.value(k))},_stop:function(b,h){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values());this._trigger("stop",b,k)},_change:function(b,h){if(!this._keySliding&&!this._mouseSliding){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values());this._trigger("change",b,k)}},value:function(b){if(arguments.length)this.options.value=
this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,h){var k;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(h),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();var l=this.options.values;var m=arguments[0];for(k=0;k<l.length;k+=1)l[k]=this._trimAlignValue(m[k]),this._change(null,
k);this._refreshValue()}},_setOption:function(b,h){var k,l=0;a.isArray(this.options.values)&&(l=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":h?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(k=0;k<l;k+=1)this._change(null,k);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(b){var h,k;if(arguments.length)return h=this.options.values[b],h=this._trimAlignValue(h),h;h=this.options.values.slice();for(k=0;k<h.length;k+=1)h[k]=
this._trimAlignValue(h[k]);return h},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var h=0<this.options.step?this.options.step:1,k=(b-this._valueMin())%h;b-=k;return 2*Math.abs(k)>=h&&(b+=0<k?h:-h),parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,h=this.options,k=this,l=this._animateOff?!1:h.animate,m,n={},
p,r,q,u;this.options.values&&this.options.values.length?this.handles.each(function(v,x){m=(k.values(v)-k._valueMin())/(k._valueMax()-k._valueMin())*100;n["horizontal"===k.orientation?"left":"bottom"]=m+"%";a(this).stop(1,1)[l?"animate":"css"](n,h.animate);!0===k.options.range&&("horizontal"===k.orientation?(0===v&&k.range.stop(1,1)[l?"animate":"css"]({left:m+"%"},h.animate),1===v&&k.range[l?"animate":"css"]({width:m-p+"%"},{queue:!1,duration:h.animate})):(0===v&&k.range.stop(1,1)[l?"animate":"css"]({bottom:m+
"%"},h.animate),1===v&&k.range[l?"animate":"css"]({height:m-p+"%"},{queue:!1,duration:h.animate})));p=m}):(r=this.value(),q=this._valueMin(),u=this._valueMax(),m=u!==q?(r-q)/(u-q)*100:0,n["horizontal"===k.orientation?"left":"bottom"]=m+"%",this.handle.stop(1,1)[l?"animate":"css"](n,h.animate),"min"===b&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:m+"%"},h.animate),"max"===b&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-m+"%"},{queue:!1,
duration:h.animate}),"min"===b&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:m+"%"},h.animate),"max"===b&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-m+"%"},{queue:!1,duration:h.animate}))}});a.extend(a.ui.slider,{version:"1.8.24"})})(jQuery);
(function(a,c){var b=0,h=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(k,l){"selected"==k?this.options.collapsible&&l==this.options.selected||this.select(l):
(this.options[k]=l,this._tabify())},_tabId:function(k){return k.title&&k.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++b},_sanitizeSelector:function(k){return k.replace(/:/g,"\\:")},_cookie:function(){var k=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++h);return a.cookie.apply(null,[k].concat(a.makeArray(arguments)))},_ui:function(k,l){return{tab:k,panel:l,index:this.anchors.index(k)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var k=
a(this);k.html(k.data("label.tabs")).removeData("label.tabs")})},_tabify:function(k){function l(B,C){B.css("display","");!a.support.opacity&&C.opacity&&B[0].style.removeAttribute("filter")}var m=this,n=this.options,p=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(B,C){var H=a(C).attr("href"),F=H.split("#")[0],E;F&&(F===location.toString().split("#")[0]||
(E=a("base")[0])&&F===E.href)&&(H=C.hash,C.href=H);p.test(H)?m.panels=m.panels.add(m.element.find(m._sanitizeSelector(H))):H&&"#"!==H?(a.data(C,"href.tabs",H),a.data(C,"load.tabs",H.replace(/#.*$/,"")),H=m._tabId(C),C.href="#"+H,C=m.element.find("#"+H),C.length||(C=a(n.panelTemplate).attr("id",H).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(m.panels[B-1]||m.list),C.data("destroy.tabs",!0)),m.panels=m.panels.add(C)):n.disabled.push(B)});k?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),n.selected===c?(location.hash&&this.anchors.each(function(B,C){if(C.hash==location.hash)return n.selected=B,!1}),"number"!=typeof n.selected&&n.cookie&&(n.selected=parseInt(m._cookie(),10)),"number"!=typeof n.selected&&this.lis.filter(".ui-tabs-selected").length&&(n.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),n.selected=n.selected||(this.lis.length?0:-1)):null===n.selected&&(n.selected=-1),n.selected=0<=n.selected&&this.anchors[n.selected]||0>n.selected?n.selected:0,n.disabled=a.unique(n.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(B,C){return m.lis.index(B)}))).sort(),-1!=a.inArray(n.selected,n.disabled)&&n.disabled.splice(a.inArray(n.selected,n.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
0<=n.selected&&this.anchors.length&&(m.element.find(m._sanitizeSelector(m.anchors[n.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(n.selected).addClass("ui-tabs-selected ui-state-active"),m.element.queue("tabs",function(){m._trigger("show",null,m._ui(m.anchors[n.selected],m.element.find(m._sanitizeSelector(m.anchors[n.selected].hash))[0]))}),this.load(n.selected)),a(window).bind("unload",function(){m.lis.add(m.anchors).unbind(".tabs");m.lis=m.anchors=m.panels=null})):n.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[n.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");n.cookie&&this._cookie(n.selected,n.cookie);k=0;for(var r;r=this.lis[k];k++)a(r)[-1==a.inArray(k,n.disabled)||a(r).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");!1===n.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==n.event){var q=function(B,C){C.is(":not(.ui-state-disabled)")&&C.addClass("ui-state-"+B)};this.lis.bind("mouseover.tabs",function(){q("hover",
a(this))});this.lis.bind("mouseout.tabs",function(){a(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){q("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){a(this).closest("li").removeClass("ui-state-focus")})}var u,v;n.fx&&(a.isArray(n.fx)?(u=n.fx[0],v=n.fx[1]):u=v=n.fx);var x=v?function(B,C){a(B).closest("li").addClass("ui-tabs-selected ui-state-active");C.hide().removeClass("ui-tabs-hide").animate(v,v.duration||"normal",function(){l(C,v);m._trigger("show",
null,m._ui(B,C[0]))})}:function(B,C){a(B).closest("li").addClass("ui-tabs-selected ui-state-active");C.removeClass("ui-tabs-hide");m._trigger("show",null,m._ui(B,C[0]))},y=u?function(B,C){C.animate(u,u.duration||"normal",function(){m.lis.removeClass("ui-tabs-selected ui-state-active");C.addClass("ui-tabs-hide");l(C,u);m.element.dequeue("tabs")})}:function(B,C,H){m.lis.removeClass("ui-tabs-selected ui-state-active");C.addClass("ui-tabs-hide");m.element.dequeue("tabs")};this.anchors.bind(n.event+".tabs",
function(){var B=this,C=a(B).closest("li"),H=m.panels.filter(":not(.ui-tabs-hide)"),F=m.element.find(m._sanitizeSelector(B.hash));if(C.hasClass("ui-tabs-selected")&&!n.collapsible||C.hasClass("ui-state-disabled")||C.hasClass("ui-state-processing")||m.panels.filter(":animated").length||!1===m._trigger("select",null,m._ui(this,F[0])))return this.blur(),!1;n.selected=m.anchors.index(this);m.abort();if(n.collapsible){if(C.hasClass("ui-tabs-selected"))return n.selected=-1,n.cookie&&m._cookie(n.selected,
n.cookie),m.element.queue("tabs",function(){y(B,H)}).dequeue("tabs"),this.blur(),!1;if(!H.length)return n.cookie&&m._cookie(n.selected,n.cookie),m.element.queue("tabs",function(){x(B,F)}),m.load(m.anchors.index(this)),this.blur(),!1}n.cookie&&m._cookie(n.selected,n.cookie);if(F.length)H.length&&m.element.queue("tabs",function(){y(B,H)}),m.element.queue("tabs",function(){x(B,F)}),m.load(m.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()});
this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(k){return"string"==typeof k&&(k=this.anchors.index(this.anchors.filter("[href$='"+k+"']"))),k},destroy:function(){var k=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var l=a.data(this,
"href.tabs");l&&(this.href=l);var m=a(this).unbind(".tabs");a.each(["href","load","cache"],function(n,p){m.removeData(p+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")}),k.cookie&&this._cookie(null,k.cookie),this},add:function(k,l,m){m===
c&&(m=this.anchors.length);var n=this,p=this.options;l=a(p.tabTemplate.replace(/#\{href\}/g,k).replace(/#\{label\}/g,l));k=k.indexOf("#")?this._tabId(a("a",l)[0]):k.replace("#","");l.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var r=n.element.find("#"+k);return r.length||(r=a(p.panelTemplate).attr("id",k).data("destroy.tabs",!0)),r.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),m>=this.lis.length?(l.appendTo(this.list),r.appendTo(this.list[0].parentNode)):
(l.insertBefore(this.lis[m]),r.insertBefore(this.panels[m])),p.disabled=a.map(p.disabled,function(q,u){return q>=m?++q:q}),this._tabify(),1==this.anchors.length&&(p.selected=0,l.addClass("ui-tabs-selected ui-state-active"),r.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[m],this.panels[m])),this},remove:function(k){k=this._getIndex(k);var l=this.options,m=this.lis.eq(k).remove(),
n=this.panels.eq(k).remove();return m.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(k+(k+1<this.anchors.length?1:-1)),l.disabled=a.map(a.grep(l.disabled,function(p,r){return p!=k}),function(p,r){return p>=k?--p:p}),this._tabify(),this._trigger("remove",null,this._ui(m.find("a")[0],n[0])),this},enable:function(k){k=this._getIndex(k);var l=this.options;if(-1!=a.inArray(k,l.disabled))return this.lis.eq(k).removeClass("ui-state-disabled"),l.disabled=a.grep(l.disabled,function(m,n){return m!=
k}),this._trigger("enable",null,this._ui(this.anchors[k],this.panels[k])),this},disable:function(k){k=this._getIndex(k);var l=this.options;return k!=l.selected&&(this.lis.eq(k).addClass("ui-state-disabled"),l.disabled.push(k),l.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[k],this.panels[k]))),this},select:function(k){k=this._getIndex(k);if(-1==k)if(this.options.collapsible&&-1!=this.options.selected)k=this.options.selected;else return this;return this.anchors.eq(k).trigger(this.options.event+
".tabs"),this},load:function(k){k=this._getIndex(k);var l=this,m=this.options,n=this.anchors.eq(k)[0],p=a.data(n,"load.tabs");this.abort();if(!p||0!==this.element.queue("tabs").length&&a.data(n,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(k).addClass("ui-state-processing");if(m.spinner){var r=a("span",n);r.data("label.tabs",r.html()).html(m.spinner)}return this.xhr=a.ajax(a.extend({},m.ajaxOptions,{url:p,success:function(q,u){l.element.find(l._sanitizeSelector(n.hash)).html(q);l._cleanup();
m.cache&&a.data(n,"cache.tabs",!0);l._trigger("load",null,l._ui(l.anchors[k],l.panels[k]));try{m.ajaxOptions.success(q,u)}catch(v){}},error:function(q,u,v){l._cleanup();l._trigger("load",null,l._ui(l.anchors[k],l.panels[k]));try{m.ajaxOptions.error(q,u,k,n)}catch(x){}}})),l.element.dequeue("tabs"),this}},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),
this},url:function(k,l){return this.anchors.eq(k).removeData("cache.tabs").data("load.tabs",l),this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.24"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(k,l){var m=this,n=this.options,p=m._rotate||(m._rotate=function(r){clearTimeout(m.rotation);m.rotation=setTimeout(function(){var q=n.selected;m.select(++q<m.anchors.length?q:0)},k);r&&r.stopPropagation()});l=m._unrotate||(m._unrotate=l?function(r){p()}:
function(r){r.clientX&&m.rotate(null)});return k?(this.element.bind("tabsshow",p),this.anchors.bind(n.event+".tabs",l),p()):(clearTimeout(m.rotation),this.element.unbind("tabsshow",p),this.anchors.unbind(n.event+".tabs",l),delete this._rotate,delete this._unrotate),this}})})(jQuery);/*
 jQuery Timepicker Addon - v1.4 - 2013-08-11
 http://trentrichardson.com/examples/timepicker
 Copyright (c) 2013 Trent Richardson; Licensed MIT */
(function(a){a.ui.timepicker=a.ui.timepicker||{};if(!a.ui.timepicker.version){a.extend(a.ui,{timepicker:{version:"1.4"}});var c=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Set",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Timezone",isRTL:!1};this._defaults={showButtonPanel:!0,
timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:1,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:12,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,
separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};a.extend(this._defaults,this.regional[""])};a.extend(c.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,
hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(q){h(this._defaults,q||{});
return this},_newInst:function(q,u){var v=new c,x={},y={};for(C in this._defaults)if(this._defaults.hasOwnProperty(C)){var B=q.attr("time:"+C);if(B)try{x[C]=eval(B)}catch(F){x[C]=B}}var C={beforeShow:function(F,E){if(a.isFunction(v._defaults.evnts.beforeShow))return v._defaults.evnts.beforeShow.call(q[0],F,E,v)},onChangeMonthYear:function(F,E,G){v._updateDateTime(G);a.isFunction(v._defaults.evnts.onChangeMonthYear)&&v._defaults.evnts.onChangeMonthYear.call(q[0],F,E,G,v)},onClose:function(F,E){!0===
v.timeDefined&&""!==q.val()&&v._updateDateTime(E);a.isFunction(v._defaults.evnts.onClose)&&v._defaults.evnts.onClose.call(q[0],F,E,v)}};for(H in C)C.hasOwnProperty(H)&&(y[H]=u[H]||null);v._defaults=a.extend({},this._defaults,x,u,C,{evnts:y,timepicker:v});v.amNames=a.map(v._defaults.amNames,function(F){return F.toUpperCase()});v.pmNames=a.map(v._defaults.pmNames,function(F){return F.toUpperCase()});v.support=k(v._defaults.timeFormat+(v._defaults.pickerTimeFormat?v._defaults.pickerTimeFormat:"")+(v._defaults.altTimeFormat?
v._defaults.altTimeFormat:""));"string"===typeof v._defaults.controlType?("slider"===v._defaults.controlType&&"undefined"===typeof a.ui.slider&&(v._defaults.controlType="select"),v.control=v._controls[v._defaults.controlType]):v.control=v._defaults.controlType;u=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==v._defaults.timezoneList&&(u=v._defaults.timezoneList);x=u.length;
y=0;var H=null;if(0<x&&"object"!==typeof u[0])for(;y<x;y++)H=u[y],u[y]={value:H,label:a.timepicker.timezoneOffsetString(H,v.support.iso8601)};v._defaults.timezoneList=u;v.timezone=null!==v._defaults.timezone?a.timepicker.timezoneOffsetNumber(v._defaults.timezone):-1*(new Date).getTimezoneOffset();v.hour=v._defaults.hour<v._defaults.hourMin?v._defaults.hourMin:v._defaults.hour>v._defaults.hourMax?v._defaults.hourMax:v._defaults.hour;v.minute=v._defaults.minute<v._defaults.minuteMin?v._defaults.minuteMin:
v._defaults.minute>v._defaults.minuteMax?v._defaults.minuteMax:v._defaults.minute;v.second=v._defaults.second<v._defaults.secondMin?v._defaults.secondMin:v._defaults.second>v._defaults.secondMax?v._defaults.secondMax:v._defaults.second;v.millisec=v._defaults.millisec<v._defaults.millisecMin?v._defaults.millisecMin:v._defaults.millisec>v._defaults.millisecMax?v._defaults.millisecMax:v._defaults.millisec;v.microsec=v._defaults.microsec<v._defaults.microsecMin?v._defaults.microsecMin:v._defaults.microsec>
v._defaults.microsecMax?v._defaults.microsecMax:v._defaults.microsec;v.ampm="";v.$input=q;v._defaults.altField&&(v.$altInput=a(v._defaults.altField).css({cursor:"pointer"}).focus(function(){q.trigger("focus")}));if(0===v._defaults.minDate||0===v._defaults.minDateTime)v._defaults.minDate=new Date;if(0===v._defaults.maxDate||0===v._defaults.maxDateTime)v._defaults.maxDate=new Date;void 0!==v._defaults.minDate&&v._defaults.minDate instanceof Date&&(v._defaults.minDateTime=new Date(v._defaults.minDate.getTime()));
void 0!==v._defaults.minDateTime&&v._defaults.minDateTime instanceof Date&&(v._defaults.minDate=new Date(v._defaults.minDateTime.getTime()));void 0!==v._defaults.maxDate&&v._defaults.maxDate instanceof Date&&(v._defaults.maxDateTime=new Date(v._defaults.maxDate.getTime()));void 0!==v._defaults.maxDateTime&&v._defaults.maxDateTime instanceof Date&&(v._defaults.maxDate=new Date(v._defaults.maxDateTime.getTime()));v.$input.bind("focus",function(){v._onFocus()});return v},_addTimePicker:function(q){var u=
this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(u);this._limitMinMaxDateTime(q,!1);this._injectTimePicker()},_parseTime:function(q,u){this.inst||(this.inst=a.datepicker._getInst(this.$input[0]));if(u||!this._defaults.timeOnly){u=a.datepicker._get(this.inst,"dateFormat");try{var v=p(u,this._defaults.timeFormat,q,a.datepicker._getFormatConfig(this.inst),this._defaults);if(!v.timeObj)return!1;a.extend(this,
v.timeObj)}catch(x){return a.timepicker.log("Error parsing the date/time string: "+x+"\ndate/time string = "+q+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+u),!1}}else{q=a.datepicker.parseTime(this._defaults.timeFormat,q,this._defaults);if(!q)return!1;a.extend(this,q)}return!0},_injectTimePicker:function(){var q=this.inst.dpDiv,u=this.inst.settings,v=this,x="",y="",B=null,C={},H={},F=null,E=0,G=0;if(0===q.find("div.ui-timepicker-div").length&&u.showTimepicker){F='<div class="ui-timepicker-div clearfix'+
(u.isRTL?" ui-timepicker-rtl":"")+'"><dl class="pull-left clearfix"><dd class="ui_tpicker_time"'+(u.showTime?"":' style="display:none;"')+"></dd>";E=0;for(G=this.units.length;E<G;E++){x=this.units[E];y=x.substr(0,1).toUpperCase()+x.substr(1);B=null!==u["show"+y]?u["show"+y]:this.support[x];C[x]=parseInt(u[x+"Max"]-(u[x+"Max"]-u[x+"Min"])%u["step"+y],10);H[x]=0;F+='<dd class="ui_tpicker_'+x+'"><div class="ui_tpicker_'+x+'_slider"'+(B?"":' style="display:none;"')+"></div>";if(B&&0<u[x+"Grid"]){F+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';
if("hour"===x)for(y=u.hourMin;y<=C[x];y+=parseInt(u.hourGrid,10))H[x]++,B=a.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:y},u),F+='<td data-for="'+x+'">'+B+"</td>";else for(y=u[x+"Min"];y<=C[x];y+=parseInt(u[x+"Grid"],10))H[x]++,F+='<td data-for="'+x+'">'+(10>y?"0":"")+y+"</td>";F+="</tr></table></div>"}F+="</dd>"}E=null!==u.showTimezone?u.showTimezone:this.support.timezone;F+='<dt class="ui_tpicker_timezone_label"'+(E?"":' style="display:none;"')+">"+u.timezoneText+"</dt>";var K=a(F+
('<dd class="ui_tpicker_timezone" '+(E?"":' style="display:none;"')+"></dd></dl></div>"));!0===u.timeOnly&&(K.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+u.timeOnlyTitle+"</div></div>"),q.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());E=0;for(G=v.units.length;E<G;E++)x=v.units[E],y=x.substr(0,1).toUpperCase()+x.substr(1),B=null!==u["show"+y]?u["show"+y]:this.support[x],v[x+"_slider"]=v.control.create(v,K.find(".ui_tpicker_"+
x+"_slider"),x,v[x],u[x+"Min"],C[x],u["step"+y]),B&&0<u[x+"Grid"]&&(F=100*H[x]*u[x+"Grid"]/(C[x]-u[x+"Min"]),K.find(".ui_tpicker_"+x+" table").css({width:F+"%",marginLeft:u.isRTL?"0":F/(-2*H[x])+"%",marginRight:u.isRTL?F/(-2*H[x])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(T){var Q=a(this),M=Q.html();T=parseInt(M.replace(/[^0-9]/g),10);M=M.replace(/[^apm]/ig);Q=Q.data("for");"hour"===Q&&(-1!==M.indexOf("p")&&12>T?T+=12:-1!==M.indexOf("a")&&12===T&&(T=0));v.control.value(v,v[Q+"_slider"],
x,T);v._onTimeChange();v._onSelectHandler()}).css({cursor:"pointer",width:100/H[x]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=K.find(".ui_tpicker_timezone").append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(u.timezoneList,function(T,Q){return a("<option />").val("object"===typeof T?T.value:T).text("object"===typeof T?T.label:T)}));"undefined"!==typeof this.timezone&&null!==this.timezone&&""!==this.timezone?-1*(new Date(this.inst.selectedYear,
this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()===this.timezone?r(v):this.timezone_select.val(this.timezone):"undefined"!==typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(u.timezone):r(v);this.timezone_select.change(function(){v._onTimeChange();v._onSelectHandler()});u=q.find(".ui-datepicker-buttonpane");u.length?u.before(K):q.append(K);this.$timeObj=K.find(".ui_tpicker_time");null!==this.inst&&(q=this.timeDefined,this._onTimeChange(),this.timeDefined=
q);if(this._defaults.addSliderAccess){var J=this._defaults.sliderAccessArgs,O=this._defaults.isRTL;J.isRTL=O;setTimeout(function(){if(0===K.find(".ui-slider-access").length){K.find(".ui-slider:visible").sliderAccess(J);var T=K.find(".ui-slider-access:eq(0)").outerWidth(!0);T&&K.find("table:visible").each(function(){var Q=a(this),M=Q.outerWidth(),W=Q.css(O?"marginRight":"marginLeft").toString().replace("%",""),da=M-T,ma={width:da,marginRight:0,marginLeft:0};ma[O?"marginRight":"marginLeft"]=W*da/M+
"%";Q.css(ma)})}},10)}v._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(q,u){var v=this._defaults,x=new Date(q.selectedYear,q.selectedMonth,q.selectedDay);if(this._defaults.showTimepicker){""==this.$input.val()||"Schedule"==this.$input.val()||"Date/Time"==this.$input.val()||u||(-1!=this.$input.val().indexOf(" pm")&&(this.hour+=12),window.___am_pm_last_value=this.hour,12<this.hour&&(this.hour-=12));if(null!==a.datepicker._get(q,"minDateTime")&&void 0!==a.datepicker._get(q,"minDateTime")&&
x){var y=a.datepicker._get(q,"minDateTime"),B=new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)this.hourMinOriginal=v.hourMin,this.minuteMinOriginal=v.minuteMin,this.secondMinOriginal=v.secondMin,this.millisecMinOriginal=v.millisecMin,this.microsecMinOriginal=v.microsecMin;q.settings.timeOnly||B.getTime()===x.getTime()?(this._defaults.hourMin=
y.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=y.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=y.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=y.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=y.getMicroseconds()):(this.microsec<
this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=
this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==a.datepicker._get(q,"maxDateTime")&&void 0!==a.datepicker._get(q,"maxDateTime")&&x){y=a.datepicker._get(q,"maxDateTime");B=new Date(y.getFullYear(),y.getMonth(),y.getDate(),
0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)this.hourMaxOriginal=v.hourMax,this.minuteMaxOriginal=v.minuteMax,this.secondMaxOriginal=v.secondMax,this.millisecMaxOriginal=v.millisecMax,this.microsecMaxOriginal=v.microsecMax;q.settings.timeOnly||B.getTime()===x.getTime()?(this._defaults.hourMax=y.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=y.getMinutes(),
this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=y.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=y.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=y.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):
(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,
this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==u&&!0===u){x=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10);y=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10);q=parseInt(this._defaults.secondMax-(this._defaults.secondMax-
this._defaults.secondMin)%this._defaults.stepSecond,10);u=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);v=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:x}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour));
if(this.minute_slider&&((new Date).getHours().toString()!=a(this.hour_slider.selector).children("select").val()?this._defaults.minuteMin=0:this._defaults.minuteMin=(new Date).getMinutes(),this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:y}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute),y=(new Date).getUTCHours()+4+TZ_OFFSET,23<y&&(y-=24),0==a("#ampm_select_box").length)){x=a(".ui_tpicker_minute");y=window.___am_pm_last_value||
y;window.___am_pm_last_value=y;x.after("<dd class='ui_tpicker_ampm'><div class='ui_tpicker_ampm_slider'><select id='ampm_select_box'><option value='am' "+((12>y?"selected='selected'":"")+">AM</option><option value='pm' ")+((12<=y?"selected='selected'":"")+">PM</option></select></div></div>"));var C=this;a("#ampm_select_box").change(function(H){window.___am_pm_last_value="am"==a(this).val()?2:13;C._updateDateTime();C._onSelectHandler()})}this.second_slider&&(this.control.options(this,this.second_slider,
"second",{min:this._defaults.secondMin,max:q}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond));this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:u}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec));this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:v}),
this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec));1>a("#ui-datepicker-div .ui-datepicker-wrap").length&&a(".ui-timepicker-div").each(function(){var H=a("<div/>").addClass("ui-datepicker-wrap");a(this).before(H);H.append(this);a(this).append(a(".ui-datepicker-buttonpane"));H.append('<p class="timezone clearfix">'+TZ+"</p>")})}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var q=this.hour_slider?this.control.value(this,this.hour_slider,
"hour"):!1,u=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,v=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,x=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,y=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,B=this.timezone_select?this.timezone_select.val():!1,C=this._defaults;"object"===typeof q&&(q=!1);"object"===typeof u&&(u=!1);"object"===typeof v&&(v=!1);"object"===typeof x&&
(x=!1);"object"===typeof y&&(y=!1);"object"===typeof B&&(B=!1);!1!==q&&(q=parseInt(q,10));!1!==u&&(u=parseInt(u,10));!1!==v&&(v=parseInt(v,10));!1!==x&&(x=parseInt(x,10));!1!==y&&(y=parseInt(y,10));var H=C[12>q?"amNames":"pmNames"][0],F=q!==this.hour||u!==this.minute||v!==this.second||x!==this.millisec||y!==this.microsec||0<this.ampm.length&&12>q!==(-1!==a.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&B!==this.timezone;F&&(!1!==q&&(this.hour=q),!1!==u&&(this.minute=u),!1!==
v&&(this.second=v),!1!==x&&(this.millisec=x),!1!==y&&(this.microsec=y),!1!==B&&(this.timezone=B),this.inst||(this.inst=a.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0));this.support.ampm&&(this.ampm=H);this.formattedTime=a.datepicker.formatTime(C.timeFormat,this,C);this.timeDefined=!0;F&&this._updateDateTime()}},_onSelectHandler:function(){var q=this._defaults.onSelect||this.inst.settings.onSelect,u=this.$input?this.$input[0]:null;q&&u&&q.apply(u,[this.formattedDateTime,
this])},_updateDateTime:function(q){q=this.inst||q;var u=a.datepicker._daylightSavingAdjust(0<q.currentYear?new Date(q.currentYear,q.currentMonth,q.currentDay):new Date(q.selectedYear,q.selectedMonth,q.selectedDay)),v=a.datepicker._get(q,"dateFormat"),x=a.datepicker._getFormatConfig(q),y=null!==u&&this.timeDefined;u=this.formattedDate=a.datepicker.formatDate(v,null===u?new Date:u,x);""===q.lastVa&&(q.currentYear=q.selectedYear,q.currentMonth=q.selectedMonth,q.currentDay=q.selectedDay);!0===this._defaults.timeOnly?
u=this.formattedTime:!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||y)&&(u+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix);this.formattedDateTime=u+=" "+a("#ampm_select_box").val()},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var q=a.datepicker._getInst(this.$input.get(0)),u=a.datepicker._get(q,"timepicker");if(u&&u._defaults.timeOnly&&q.input.val()!==q.lastVal)try{a.datepicker._updateDatepicker(q)}catch(v){a.timepicker.log(v)}}},
_controls:{slider:{create:function(q,u,v,x,y,B,C){var H=q._defaults.isRTL;return u.prop("slide",null).slider({orientation:"horizontal",value:H?-1*x:x,min:H?-1*B:y,max:H?-1*y:B,step:C,slide:function(F,E){q.control.value(q,a(this),v,H?-1*E.value:E.value);q._onTimeChange()},stop:function(F,E){q._onSelectHandler()}})},options:function(q,u,v,x,y){if(q._defaults.isRTL){if("string"===typeof x)return"min"===x||"max"===x?void 0!==y?u.slider(x,-1*y):Math.abs(u.slider(x)):u.slider(x);q=x.min;v=x.max;x.min=x.max=
null;void 0!==q&&(x.max=-1*q);void 0!==v&&(x.min=-1*v);return u.slider(x)}return"string"===typeof x&&void 0!==y?u.slider(x,y):u.slider(x)},value:function(q,u,v,x){return q._defaults.isRTL?void 0!==x?u.slider("value",-1*x):Math.abs(u.slider("value")):void 0!==x?u.slider("value",x):u.slider("value")}},select:{create:function(q,u,v,x,y,B,C){var H='<select class="ui-timepicker-select" data-unit="'+v+'" data-min="'+y+'" data-max="'+B+'" data-step="'+C+'">',F=q._defaults.pickerTimeFormat||q._defaults.timeFormat;
for("hour"==v&&y>B&&(B+=12);y<=B;y+=C)H+='<option value="'+y+'"'+(y===x?" selected":"")+">",H="hour"===v?H+a.datepicker.formatTime(a.trim(F.replace(/[^ht ]/ig,"")),{hour:y},q._defaults):"millisec"===v||"microsec"===v||10<=y?H+y:H+("0"+y.toString()),H+="</option>";H+="</select>";u.children("select").remove();a(H).appendTo(u).change(function(E){q._onTimeChange();q._onSelectHandler()});return u},options:function(q,u,v,x,y){v={};var B=u.children("select");if("string"===typeof x){if(void 0===y)return B.data(x);
v[x]=y}else v=x;return q.control.create(q,u,B.data("unit"),B.val(),v.min||B.data("min"),v.max||B.data("max"),v.step||B.data("step"))},value:function(q,u,v,x){q=u.children("select");return void 0!==x?q.val(x):q.val()}}}});a.fn.extend({timepicker:function(q){q=q||{};var u=Array.prototype.slice.call(arguments);"object"===typeof q&&(u[0]=a.extend(q,{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),u)})},datetimepicker:function(q){q=q||{};var u=arguments;return"string"===
typeof q?"getDate"===q?a.fn.datepicker.apply(a(this[0]),u):this.each(function(){var v=a(this);v.datepicker.apply(v,u)}):this.each(function(){var v=a(this);v.datepicker(a.timepicker._newInst(v,q)._defaults)})}});a.datepicker.parseDateTime=function(q,u,v,x,y){q=p(q,u,v,x,y);q.timeObj&&(u=q.timeObj,q.date.setHours(u.hour,u.minute,u.second,u.millisec),q.date.setMicroseconds(u.microsec));return q.date};a.datepicker.parseTime=function(q,u,v){v=h(h({},a.timepicker._defaults),v||{});q.replace(/'.*?'/g,"").indexOf("Z");
var x=function(B,C,H){var F=function(K,J){var O=[];K&&a.merge(O,K);J&&a.merge(O,J);O=a.map(O,function(T){return T.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")});return"("+O.join("|")+")?"},E="^"+B.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(K){var J=K.length;switch(K.charAt(0).toLowerCase()){case "h":return 1===J?"(\\d?\\d)":"(\\d{"+J+"})";case "m":return 1===J?"(\\d?\\d)":"(\\d{"+J+"})";case "s":return 1===J?"(\\d?\\d)":"(\\d{"+J+"})";case "l":return"(\\d?\\d?\\d)";case "c":return"(\\d?\\d?\\d)";
case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return F(H.amNames,H.pmNames);default:return"("+K.replace(/'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(O){return"\\"+O})+")?"}}).replace(/\s/g,"\\s?")+H.timeSuffix+"$";B=function(K){K=K.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g);var J={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(K)for(var O=0;O<K.length;O++)-1===J[K[O].toString().charAt(0)]&&(J[K[O].toString().charAt(0)]=O+1);return J}(B);var G="";
C=C.match(new RegExp(E,"i"));E={hour:0,minute:0,second:0,millisec:0,microsec:0};return C?(-1!==B.t&&(void 0===C[B.t]||0===C[B.t].length?(G="",E.ampm=""):(G=-1!==a.inArray(C[B.t].toUpperCase(),H.amNames)?"AM":"PM",E.ampm=H["AM"===G?"amNames":"pmNames"][0])),-1!==B.h&&(E.hour="AM"===G&&"12"===C[B.h]?0:"PM"===G&&"12"!==C[B.h]?parseInt(C[B.h],10)+12:Number(C[B.h])),-1!==B.m&&(E.minute=Number(C[B.m])),-1!==B.s&&(E.second=Number(C[B.s])),-1!==B.l&&(E.millisec=Number(C[B.l])),-1!==B.c&&(E.microsec=Number(C[B.c])),
-1!==B.z&&void 0!==C[B.z]&&(E.timezone=a.timepicker.timezoneOffsetNumber(C[B.z])),E):!1},y=function(B,C,H){try{var F=new Date("2012-01-01 "+C);if(isNaN(F.getTime())&&(F=new Date("2012-01-01T"+C),isNaN(F.getTime())&&(F=new Date("01/01/2012 "+C),isNaN(F.getTime()))))throw"Unable to parse time with native Date: "+C;return{hour:F.getHours(),minute:F.getMinutes(),second:F.getSeconds(),millisec:F.getMilliseconds(),microsec:F.getMicroseconds(),timezone:-1*F.getTimezoneOffset()}}catch(E){try{return x(B,C,
H)}catch(G){a.timepicker.log("Unable to parse \ntimeString: "+C+"\ntimeFormat: "+B)}}return!1};return"function"===typeof v.parse?v.parse(q,u,v):"loose"===v.parse?y(q,u,v):x(q,u,v)};a.datepicker.formatTime=function(q,u,v){v=v||{};v=a.extend({},a.timepicker._defaults,v);u=a.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},u);var x=v.amNames[0],y=parseInt(u.hour,10);11<y&&(x=v.pmNames[0]);return q=q.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(B){switch(B){case "HH":return("0"+
y).slice(-2);case "H":return y;case "hh":return("0"+l(y)).slice(-2);case "h":return l(y);case "mm":return("0"+u.minute).slice(-2);case "m":return u.minute;case "ss":return("0"+u.second).slice(-2);case "s":return u.second;case "l":return("00"+u.millisec).slice(-3);case "c":return("00"+u.microsec).slice(-3);case "z":return a.timepicker.timezoneOffsetString(null===u.timezone?v.timezone:u.timezone,!1);case "Z":return a.timepicker.timezoneOffsetString(null===u.timezone?v.timezone:u.timezone,!0);case "T":return x.charAt(0).toUpperCase();
case "TT":return x.toUpperCase();case "t":return x.charAt(0).toLowerCase();case "tt":return x.toLowerCase();default:return B.replace(/'/g,"")}})};a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(q,u){var v=this._getInst(a(q)[0]),x=this._get(v,"timepicker");x?(x._limitMinMaxDateTime(v,!0),v.inline=v.stay_open=!0,this._base_selectDate(q,u),v.inline=v.stay_open=!1,this._notifyChange(v),this._updateDatepicker(v)):this._base_selectDate(q,u)};a.datepicker._base_updateDatepicker=
a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(q){var u=q.input[0];if(!a.datepicker._curInst||a.datepicker._curInst===q||!a.datepicker._datepickerShowing||a.datepicker._lastInput===u)if("boolean"!==typeof q.stay_open||!1===q.stay_open)this._base_updateDatepicker(q),(u=this._get(q,"timepicker"))&&u._addTimePicker(q)};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(q){var u=a.datepicker._getInst(q.target),v=a.datepicker._get(u,"timepicker");
if(v&&a.datepicker._get(u,"constrainInput")){var x=v.support.ampm,y=null!==v._defaults.showTimezone?v._defaults.showTimezone:v.support.timezone;u=a.datepicker._possibleChars(a.datepicker._get(u,"dateFormat"));v=v._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,x?"APM":"").replace(/Tt/g,x?"AaPpMm":"").replace(/tT/g,x?"AaPpMm":"").replace(/T/g,x?"AP":"").replace(/tt/g,x?"apm":"").replace(/t/g,x?"ap":"")+" "+v._defaults.separator+v._defaults.timeSuffix+(y?v._defaults.timezoneList.join(""):
"")+v._defaults.amNames.join("")+v._defaults.pmNames.join("")+u;x=String.fromCharCode(void 0===q.charCode?q.keyCode:q.charCode);return q.ctrlKey||" ">x||!u||-1<v.indexOf(x)}return a.datepicker._base_doKeyPress(q)};a.datepicker._base_updateAlternate=a.datepicker._updateAlternate;a.datepicker._updateAlternate=function(q){var u=this._get(q,"timepicker");if(u){var v=u._defaults.altField;if(v){var x=this._getDate(q);q=a.datepicker._getFormatConfig(q);var y=u._defaults.altSeparator?u._defaults.altSeparator:
u._defaults.separator;var B=u._defaults.altTimeSuffix?u._defaults.altTimeSuffix:u._defaults.timeSuffix;B=""+(a.datepicker.formatTime(null!==u._defaults.altTimeFormat?u._defaults.altTimeFormat:u._defaults.timeFormat,u,u._defaults)+B);u._defaults.timeOnly||u._defaults.altFieldTimeOnly||null===x||(B=u._defaults.altFormat?a.datepicker.formatDate(u._defaults.altFormat,x,q)+y+B:u.formattedDate+y+B);a(v).val(B)}}else a.datepicker._base_updateAlternate(q)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;
a.datepicker._doKeyUp=function(q){var u=a.datepicker._getInst(q.target),v=a.datepicker._get(u,"timepicker");if(v&&v._defaults.timeOnly&&u.input.val()!==u.lastVal)try{a.datepicker._updateDatepicker(u)}catch(x){a.timepicker.log(x)}return a.datepicker._base_doKeyUp(q)};a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(q){var u=this._getInst(a(q)[0]),v=u.dpDiv;this._base_gotoToday(q);q=this._get(u,"timepicker");r(q);this._setTime(u,new Date);a(".ui-datepicker-today",
v).click()};a.datepicker._disableTimepickerDatepicker=function(q){var u=this._getInst(q);if(u){var v=this._get(u,"timepicker");a(q).datepicker("getDate");v&&(u.settings.showTimepicker=!1,v._defaults.showTimepicker=!1,v._updateDateTime(u))}};a.datepicker._enableTimepickerDatepicker=function(q){var u=this._getInst(q);if(u){var v=this._get(u,"timepicker");a(q).datepicker("getDate");v&&(u.settings.showTimepicker=!0,v._defaults.showTimepicker=!0,v._addTimePicker(u),v._updateDateTime(u))}};a.datepicker._setTime=
function(q,u){var v=this._get(q,"timepicker");if(v){var x=v._defaults;v.hour=u?u.getHours():x.hour;v.minute=u?u.getMinutes():x.minute;v.second=u?u.getSeconds():x.second;v.millisec=u?u.getMilliseconds():x.millisec;v.microsec=u?u.getMicroseconds():x.microsec;v._limitMinMaxDateTime(q,!0);v._onTimeChange();v._updateDateTime(q)}};a.datepicker._setTimeDatepicker=function(q,u,v){if(q=this._getInst(q)){var x=this._get(q,"timepicker");x&&(this._setDateFromField(q),u&&("string"===typeof u?(x._parseTime(u,v),
v=new Date,v.setHours(x.hour,x.minute,x.second,x.millisec),v.setMicroseconds(x.microsec)):(v=new Date(u.getTime()),v.setMicroseconds(u.getMicroseconds())),"Invalid Date"===v.toString()&&(v=void 0),this._setTime(q,v)))}};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(q,u){var v=this._getInst(q);if(v){"string"===typeof u&&(u=new Date(u),u.getTime()||a.timepicker.log("Error creating Date object from string."));var x=this._get(v,"timepicker");
if(u instanceof Date){var y=new Date(u.getTime());y.setMicroseconds(u.getMicroseconds())}else y=u;x&&(x.support.timezone||null!==x._defaults.timezone||(x.timezone=-1*y.getTimezoneOffset()),u=a.timepicker.timezoneAdjust(u,x.timezone),y=a.timepicker.timezoneAdjust(y,x.timezone));this._updateDatepicker(v);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(q,y,!0)}};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(q,
u){var v=this._getInst(q);if(v){var x=this._get(v,"timepicker");return x?(void 0===v.lastVal&&this._setDateFromField(v,u),(u=this._getDate(v))&&x._parseTime(a(q).val(),x.timeOnly)&&(u.setHours(x.hour,x.minute,x.second,x.millisec),u.setMicroseconds(x.microsec),null!=x.timezone&&(x.support.timezone||null!==x._defaults.timezone||(x.timezone=-1*u.getTimezoneOffset()),u=a.timepicker.timezoneAdjust(u,x.timezone))),u):this._base_getDateDatepicker(q,u)}};a.datepicker._base_parseDate=a.datepicker.parseDate;
a.datepicker.parseDate=function(q,u,v){try{var x=this._base_parseDate(q,u,v)}catch(y){if(0<=y.indexOf(":"))x=this._base_parseDate(q,u.substring(0,u.length-(y.length-y.indexOf(":")-2)),v),a.timepicker.log("Error parsing the date string: "+y+"\ndate string = "+u+"\ndate format = "+q);else throw y;}return x};a.datepicker._base_formatDate=a.datepicker._formatDate;a.datepicker._formatDate=function(q,u,v,x){return(u=this._get(q,"timepicker"))?(u._updateDateTime(q),u.$input.val()):this._base_formatDate(q)};
a.datepicker._base_optionDatepicker=a.datepicker._optionDatepicker;a.datepicker._optionDatepicker=function(q,u,v){var x=this._getInst(q);if(!x)return null;if(x=this._get(x,"timepicker")){var y=null,B=null,C=null,H=x._defaults.evnts,F={},E;if("string"===typeof u)if("minDate"===u||"minDateTime"===u)y=v;else if("maxDate"===u||"maxDateTime"===u)B=v;else if("onSelect"===u)C=v;else{if(H.hasOwnProperty(u)){if("undefined"===typeof v)return H[u];F[u]=v;var G={}}}else if("object"===typeof u)for(E in u.minDate?
y=u.minDate:u.minDateTime?y=u.minDateTime:u.maxDate?B=u.maxDate:u.maxDateTime&&(B=u.maxDateTime),H)H.hasOwnProperty(E)&&u[E]&&(F[E]=u[E]);for(E in F)F.hasOwnProperty(E)&&(H[E]=F[E],G||=a.extend({},u),delete G[E]);if(G&&b(G))return;y?(y=0===y?new Date:new Date(y),x._defaults.minDate=y,x._defaults.minDateTime=y):B?(B=0===B?new Date:new Date(B),x._defaults.maxDate=B,x._defaults.maxDateTime=B):C&&(x._defaults.onSelect=C)}return void 0===v?this._base_optionDatepicker.call(a.datepicker,q,u):this._base_optionDatepicker.call(a.datepicker,
q,G||u,v)};var b=function(q){for(var u in q)if(q.hasOwnProperty(u))return!1;return!0},h=function(q,u){a.extend(q,u);for(var v in u)if(null===u[v]||void 0===u[v])q[v]=u[v];return q},k=function(q){var u=q.replace(/'.*?'/g,"").toLowerCase(),v=function(x,y){return-1!==x.indexOf(y)?!0:!1};return{hour:v(u,"h"),minute:v(u,"m"),second:v(u,"s"),millisec:v(u,"l"),microsec:v(u,"c"),timezone:v(u,"z"),ampm:v(u,"t")&&v(q,"h"),iso8601:v(q,"Z")}},l=function(q){q%=12;0===q&&(q=12);return String(q)},m=function(q,u){return q&&
q[u]?q[u]:a.timepicker._defaults[u]},n=function(q,u){var v=m(u,"separator");u=m(u,"timeFormat").split(v).length;var x=q.split(v),y=x.length;return 1<y?{dateString:x.splice(0,y-u).join(v),timeString:x.splice(0,u).join(v)}:{dateString:q,timeString:""}},p=function(q,u,v,x,y){v=n(v,y);q=a.datepicker._base_parseDate(q,v.dateString,x);if(""===v.timeString)return{date:q};u=a.datepicker.parseTime(u,v.timeString,y);if(!u)throw"Wrong time format";return{date:q,timeObj:u}},r=function(q,u){q&&q.timezone_select&&
q.timezone_select.val(-(u||new Date).getTimezoneOffset())};a.timepicker=new c;a.timepicker.timezoneOffsetString=function(q,u){if(isNaN(q)||840<q||-720>q)return q;var v=q%60;u=u?":":"";q=(0<=q?"+":"-")+("0"+Math.abs((q-v)/60)).slice(-2)+u+("0"+Math.abs(v)).slice(-2);return"+00:00"===q?"Z":q};a.timepicker.timezoneOffsetNumber=function(q){var u=q.toString().replace(":","");return"Z"===u.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(u)?("-"===u.substr(0,1)?-1:1)*(60*parseInt(u.substr(1,2),10)+parseInt(u.substr(3,
2),10)):q};a.timepicker.timezoneAdjust=function(q,u){u=a.timepicker.timezoneOffsetNumber(u);isNaN(u)||q.setMinutes(q.getMinutes()+-q.getTimezoneOffset()-u);return q};a.timepicker.timeRange=function(q,u,v){return a.timepicker.handleRange("timepicker",q,u,v)};a.timepicker.datetimeRange=function(q,u,v){a.timepicker.handleRange("datetimepicker",q,u,v)};a.timepicker.dateRange=function(q,u,v){a.timepicker.handleRange("datepicker",q,u,v)};a.timepicker.handleRange=function(q,u,v,x){function y(C,H){var F=
u[q]("getDate"),E=v[q]("getDate");C=C[q]("getDate");if(null!==F){var G=new Date(F.getTime()),K=new Date(F.getTime());G.setMilliseconds(G.getMilliseconds()+x.minInterval);K.setMilliseconds(K.getMilliseconds()+x.maxInterval);if(0<x.minInterval&&G>E)v[q]("setDate",G);else if(0<x.maxInterval&&K<E)v[q]("setDate",K);else if(F>E)H[q]("setDate",C)}}function B(C,H,F){C.val()&&(C=C[q].call(C,"getDate"),null!==C&&0<x.minInterval&&("minDate"===F&&C.setMilliseconds(C.getMilliseconds()+x.minInterval),"maxDate"===
F&&C.setMilliseconds(C.getMilliseconds()-x.minInterval)),C.getTime&&H[q].call(H,"option",F,C))}x=a.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},x);a.fn[q].call(u,a.extend({onClose:function(C,H){y(a(this),v)},onSelect:function(C){B(a(this),v,"minDate")}},x,x.start));a.fn[q].call(v,a.extend({onClose:function(C,H){y(a(this),u)},onSelect:function(C){B(a(this),u,"maxDate")}},x,x.end));y(u,v);B(u,v,"minDate");B(v,u,"maxDate");return a([u.get(0),v.get(0)])};a.timepicker.log=function(q){};a.timepicker._util=
{_extendRemove:h,_isEmptyObject:b,_convert24to12:l,_detectSupport:k,_selectLocalTimezone:r,_computeEffectiveSetting:m,_splitDateTime:n,_parseDateTimeInternal:p};Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(q){this.setMilliseconds(this.getMilliseconds()+Math.floor(q/1E3));this.microseconds=q%1E3;return this});a.timepicker.version="1.4"}})(jQuery);(function(a){a.address=function(){var c=function(ia){var la=a.extend;ia=a.Event(ia);var oa={};for(var Ga=a.address.parameterNames(),Ka=0,Qa=Ga.length;Ka<Qa;Ka++)oa[Ga[Ka]]=a.address.parameter(Ga[Ka]);oa={value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:Ga,parameters:oa,queryString:a.address.queryString()};la=la.call(a,ia,oa);a(a.address).trigger(la);return la},b=function(ia){return Array.prototype.slice.call(ia)},h=function(ia,la,oa){a().bind.apply(a(a.address),
Array.prototype.slice.call(arguments));return a.address},k=function(ia,la){a().unbind.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},l=function(){return ja.pushState&&fa.state!==K},m=function(){return("/"+P.pathname.replace(new RegExp(fa.state),"")+P.search+(n()?"#"+n():"")).replace(sa,"/")},n=function(){var ia=P.href.indexOf("#");return-1!=ia?q(P.href.substr(ia+1),ma):""},p=function(){return l()?m():n()},r=function(ia){ia=ia.toString();return(fa.strict&&"/"!=ia.substr(0,
1)?"/":"")+ia},q=function(ia,la){return fa.crawlable&&la?(""!==ia?"!":"")+ia:ia.replace(/^!/,"")},u=function(ia,la){return parseInt(ia.css(la),10)},v=function(){if(!A){var ia=p();decodeURI(wa)!=decodeURI(ia)&&(Da&&7>Ea?P.reload():(Da&&!qa&&fa.history&&ea(C,50),_old=wa,wa=ia,x(ma)))}},x=function(ia){var la=c(Q);ia=c(ia?M:W);ea(B,10);(la.isDefaultPrevented()||ia.isDefaultPrevented())&&y()},y=function(){wa=_old;l()?ja.popState({},"",fa.state.replace(/\/$/,"")+(""===wa?"/":wa)):(A=da,Fa?fa.history?P.hash=
"#"+q(wa,da):P.replace("#"+q(wa,da)):wa!=p()&&(fa.history?P.hash="#"+q(wa,da):P.replace("#"+q(wa,da))),Da&&!qa&&fa.history&&ea(C,50),Fa?ea(function(){A=ma},1):A=ma)},B=function(){if("null"!==fa.tracker&&fa.tracker!==J){var ia=a.isFunction(fa.tracker)?fa.tracker:ta[fa.tracker],la=(P.pathname+P.search+(a.address&&!l()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");a.isFunction(ia)?ia(la):a.isFunction(ta.urchinTracker)?ta.urchinTracker(la):ta.pageTracker!==K&&a.isFunction(ta.pageTracker._trackPageview)?
ta.pageTracker._trackPageview(la):ta._gaq!==K&&a.isFunction(ta._gaq.push)&&ta._gaq.push(["_trackPageview",decodeURI(la)])}},C=function(){var ia="javascript:"+ma+";document.open();document.writeln('<html><head><title>"+X.title.replace(/'/g,"\\'")+"</title><script>var "+O+' = "'+encodeURIComponent(p()).replace(/'/g,"\\'")+(X.domain!=P.hostname?'";document.domain="'+X.domain:"")+"\";\x3c/script></head></html>');document.close();";7>Ea?R.src=ia:R.contentWindow.location.replace(ia)},H=function(){if(Z&&
-1!=Y){var ia,la=Z.substr(Y+1).split("&");for(ia=0;ia<la.length;ia++){var oa=la[ia].split("=");/^(autoUpdate|crawlable|history|strict|wrap)$/.test(oa[0])&&(fa[oa[0]]=isNaN(oa[1])?/^(true|yes)$/i.test(oa[1]):0!==parseInt(oa[1],10));/^(state|tracker)$/.test(oa[0])&&(fa[oa[0]]=oa[1])}Z=J}_old=wa;wa=p()},F=function(){if(!va){va=da;H();var ia=function(){E.call(this);G.call(this)},la=a("body").ajaxComplete(ia);ia();fa.wrap&&(a("body > *").wrapAll('<div style="padding:'+(u(la,"marginTop")+u(la,"paddingTop"))+
"px "+(u(la,"marginRight")+u(la,"paddingRight"))+"px "+(u(la,"marginBottom")+u(la,"paddingBottom"))+"px "+(u(la,"marginLeft")+u(la,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+O+'" style="height:100%;overflow:auto;position:relative;'+(Fa&&!window.statusbar.visible?"resize:both;":"")+'" />'),a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"}),Fa&&a('<style type="text/css" />').appendTo("head").text("#"+O+"::-webkit-resizer { background-color: #fff; }"));Da&&!qa&&(ia=X.getElementsByTagName("frameset")[0],
R=X.createElement((ia?"":"i")+"frame"),R.src="javascript:"+ma,ia?(ia.insertAdjacentElement("beforeEnd",R),ia[ia.cols?"cols":"rows"]+=",0",R.noResize=da,R.frameBorder=R.frameSpacing=0):(R.style.display="none",R.style.width=R.style.height=0,R.tabIndex=-1,X.body.insertAdjacentElement("afterBegin",R)),ea(function(){a(R).bind("load",function(){var oa=R.contentWindow;_old=wa;wa=oa[O]!==K?oa[O]:"";wa!=p()&&(x(ma),P.hash=q(wa,da))});R.contentWindow[O]===K&&C()},50));ea(function(){c("init");x(ma)},1);l()||
(Da&&7<Ea||!Da&&qa?ta.addEventListener?ta.addEventListener(T,v,ma):ta.attachEvent&&ta.attachEvent("on"+T,v):ca(v,50));"state"in window.history&&a(window).trigger("popstate")}},E=function(){var ia,la=a("a"),oa=la.size(),Ga=-1,Ka=function(){++Ga!=oa&&(ia=a(la.get(Ga)),ia.is('[rel*="address:"]')&&ia.address('[rel*="address:"]'),ea(Ka,1))};ea(Ka,1)},G=function(){if(fa.crawlable){var ia=P.pathname.replace(/\/$/,"");-1!=a("body").html().indexOf("_escaped_fragment_")&&a('a[href]:not([href^=http]), a[href*="'+
document.domain+'"]').each(function(){var la=a(this).attr("href").replace(/^http:/,"").replace(new RegExp(ia+"/?$"),"");""!==la&&-1==la.indexOf("_escaped_fragment_")||a(this).attr("href","#"+encodeURI(decodeURIComponent(la.replace(RegExp("/(.*)\\?_escaped_fragment_=(.*)$"),"!$2"))))})}},K,J=null,O="jQueryAddress",T="hashchange",Q="change",M="internalChange",W="externalChange",da=!0,ma=!1,fa={autoUpdate:da,crawlable:ma,history:da,strict:da,wrap:ma},xa=a.browser,Ea=parseFloat(xa.version),Da=!a.support.opacity,
Fa=xa.webkit||xa.safari;try{var ta=top.document!==K&&top.document.title!==K?top:window}catch(ia){ta=window}var X=ta.document,ja=ta.history,P=ta.location,ca=setInterval,ea=setTimeout,sa=/\/{2,9}/g;xa=navigator.userAgent;var qa="on"+T in ta,R,Z=a("script:last").attr("src"),Y=Z?Z.indexOf("?"):-1,ha=X.title,A=ma,va=ma,ra=da,na=ma,wa=p();_old=wa;if(Da){Ea=parseFloat(xa.substr(xa.indexOf("MSIE")+4));X.documentMode&&X.documentMode!=Ea&&(Ea=8!=X.documentMode?7:8);var Oa=X.onpropertychange;X.onpropertychange=
function(){Oa&&Oa.call(X);X.title!=ha&&-1!=X.title.indexOf("#"+p())&&(X.title=ha)}}ja.navigationMode&&(ja.navigationMode="compatible");if("complete"==document.readyState)var Pa=setInterval(function(){a.address&&(F(),clearInterval(Pa))},50);else H(),a(F);a(window).bind("popstate",function(){decodeURI(wa)!=decodeURI(p())&&(_old=wa,wa=p(),x(ma))}).bind("unload",function(){ta.removeEventListener?ta.removeEventListener(T,v,ma):ta.detachEvent&&ta.detachEvent("on"+T,v)});return{bind:function(ia,la,oa){return h.apply(this,
b(arguments))},unbind:function(ia,la){return k.apply(this,b(arguments))},init:function(ia,la){return h.apply(this,["init"].concat(b(arguments)))},change:function(ia,la){return h.apply(this,[Q].concat(b(arguments)))},internalChange:function(ia,la){return h.apply(this,[M].concat(b(arguments)))},externalChange:function(ia,la){return h.apply(this,[W].concat(b(arguments)))},baseURL:function(){var ia=P.href;-1!=ia.indexOf("#")&&(ia=ia.substr(0,ia.indexOf("#")));/\/$/.test(ia)&&(ia=ia.substr(0,ia.length-
1));return ia},autoUpdate:function(ia){return ia!==K?(fa.autoUpdate=ia,this):fa.autoUpdate},crawlable:function(ia){return ia!==K?(fa.crawlable=ia,this):fa.crawlable},history:function(ia){return ia!==K?(fa.history=ia,this):fa.history},state:function(ia){if(ia!==K){fa.state=ia;var la=m();fa.state!==K&&(ja.pushState?"/#/"==la.substr(0,3)&&P.replace(fa.state.replace(/^\/$/,"")+la.substr(2)):"/"!=la&&la.replace(/^\/#/,"")!=n()&&ea(function(){P.replace(fa.state.replace(/^\/$/,"")+"/#"+la)},1));return this}return fa.state},
strict:function(ia){return ia!==K?(fa.strict=ia,this):fa.strict},tracker:function(ia){return ia!==K?(fa.tracker=ia,this):fa.tracker},wrap:function(ia){return ia!==K?(fa.wrap=ia,this):fa.wrap},update:function(){na=da;this.value(wa);na=ma;return this},title:function(ia){return ia!==K?(ea(function(){ha=X.title=ia;ra&&R&&R.contentWindow&&R.contentWindow.document&&(R.contentWindow.document.title=ia,ra=ma)},50),this):X.title},value:function(ia){if(Jmp.Helpers.is_connected()){if(ia!==K){ia=r(ia);"/"==ia&&
(ia="");if(wa==ia&&!na)return;_old=wa;wa=ia;if(fa.autoUpdate||na)if(x(da),l())ja[fa.history?"pushState":"replaceState"]({},"",fa.state.replace(/\/$/,"")+(""===wa?WS_PREFIX+"/personal":wa));else A=da,Fa?fa.history?P.hash="#"+q(wa,da):P.replace("#"+q(wa,da)):wa!=p()&&(fa.history?P.hash="#"+q(wa,da):P.replace("#"+q(wa,da))),Da&&!qa&&fa.history&&ea(C,50),Fa?ea(function(){A=ma},1):A=ma;return this}return r(wa)}Jmp.Helpers.show_notification_on_disconnected()},path:function(ia){if(ia!==K){var la=this.queryString(),
oa=this.hash();this.value(ia+(la?"?"+la:"")+(oa?"#"+oa:""));return this}return r(wa).split("#")[0].split("?")[0]},pathNames:function(){var ia=this.path(),la=ia.replace(sa,"/").split("/");"/"!=ia.substr(0,1)&&0!==ia.length||la.splice(0,1);"/"==ia.substr(ia.length-1,1)&&la.splice(la.length-1,1);return la},queryString:function(ia){if(ia!==K){var la=this.hash();this.value(this.path()+(ia?"?"+ia:"")+(la?"#"+la:""));return this}ia=wa.split("?");return ia.slice(1,ia.length).join("?").split("#")[0]},parameter:function(ia,
la,oa){var Ga;if(la!==K){var Ka=this.parameterNames();var Qa=[];la=la===K||la===J?"":la.toString();for(Ga=0;Ga<Ka.length;Ga++){var db=Ka[Ga],Ya=this.parameter(db);"string"==typeof Ya&&(Ya=[Ya]);db==ia&&(Ya=la===J||""===la?[]:oa?Ya.concat([la]):[la]);for(var pb=0;pb<Ya.length;pb++)Qa.push(db+"="+Ya[pb])}-1==a.inArray(ia,Ka)&&la!==J&&""!==la&&Qa.push(ia+"="+la);this.queryString(Qa.join("&"));return this}if(la=this.queryString()){oa=[];Qa=la.split("&");for(Ga=0;Ga<Qa.length;Ga++)la=Qa[Ga].split("="),
la[0]==ia&&oa.push(la.slice(1).join("="));if(0!==oa.length)return 1!=oa.length?oa:oa[0]}},parameterNames:function(){var ia=this.queryString(),la=[];if(ia&&-1!=ia.indexOf("=")){ia=ia.split("&");for(var oa=0;oa<ia.length;oa++){var Ga=ia[oa].split("=")[0];-1==a.inArray(Ga,la)&&la.push(Ga)}}return la},hash:function(ia){if(ia!==K)return this.value(wa.split("#")[0]+(ia?"#"+ia:"")),this;ia=wa.split("#");return ia.slice(1,ia.length).join("#")}}}();a.fn.address=function(c){if("string"==typeof c){var b=c;c=
void 0}a(this).attr("address")||a(b?b:this).live("click",function(h){if(h.shiftKey||h.ctrlKey||h.metaKey||2==h.which)return!0;a(this).is("a")?(h.preventDefault(),h=c?c.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:void 0===a.address.state()||/^\/?$/.test(a.address.state())?a(this).attr("href").replace(/^(#!?|\.)/,""):a(this).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""),a.address.value(h)):a(this).is("li")&&(h.preventDefault(),
h=c?c.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:void 0===a.address.state()||/^\/?$/.test(a.address.state())?a(this).attr("data-href").replace(/^(#!?|\.)/,""):a(this).attr("data-href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""),a.address.value(h))}).live("submit",function(h){a(this).is("form")&&(h.preventDefault(),h=a(this).attr("action"),h=c?c.call(this):(-1!=h.indexOf("?")?h.replace(/&$/,""):h+"?")+a(this).serialize(),a.address.value(h))}).attr("address",
!0);return this}})(jQuery);/*
 clipboard.js v1.5.12
 https://zenorocha.github.io/clipboard.js

 Licensed MIT ? Zeno Rocha

 https://github.com/zenorocha/document.queryCommandSupported
*/
var Clipboard={};
!function a$jscomp$0(a,c,b){function k(n,p){if(!c[n]){if(!a[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);p=Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p;}p=c[n]={exports:{}};a[n][0].call(p.exports,function(q){var u=a[n][1][q];return k(u?u:q)},p,p.exports,a$jscomp$0,a,c,b)}return c[n].exports}for(var l="function"==typeof require&&require,m=0;m<b.length;m++)k(b[m]);return k}({1:[function(a,c,b){!function(h,k){"undefined"!=typeof c&&
c.exports?c.exports=k():"function"==typeof define&&define.amd?define(k):this[h]=k()}("bowser",function(){function h(m){function n(H){return(H=m.match(H))&&1<H.length&&H[1]||""}function p(H){return(H=m.match(H))&&1<H.length&&H[2]||""}var r,q=n(/(ipod|iphone|ipad)/i).toLowerCase(),u=!/like android/i.test(m)&&/android/i.test(m),v=/CrOS/.test(m),x=n(/edge\/(\d+(\.\d+)?)/i),y=n(/version\/(\d+(\.\d+)?)/i),B=/tablet/i.test(m),C=!B&&/[^-]mobi/i.test(m);/opera|opr/i.test(m)?r={name:"Opera",opera:k,version:y||
n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(m)?r={name:"Yandex Browser",yandexbrowser:k,version:y||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(m)?(r={name:"Windows Phone",windowsphone:k},x?(r.msedge=k,r.version=x):(r.msie=k,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(m)?r={name:"Internet Explorer",msie:k,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:v?r={name:"Chrome",chromeBook:k,chrome:k,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(m)?
r={name:"Microsoft Edge",msedge:k,version:x}:/chrome|crios|crmo/i.test(m)?r={name:"Chrome",chrome:k,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?(r={name:"iphone"==q?"iPhone":"ipad"==q?"iPad":"iPod"},y&&(r.version=y)):/sailfish/i.test(m)?r={name:"Sailfish",sailfish:k,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(m)?r={name:"SeaMonkey",seamonkey:k,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(m)?(r={name:"Firefox",firefox:k,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(m)&&(r.firefoxos=k)):/silk/i.test(m)?r={name:"Amazon Silk",silk:k,version:n(/silk\/(\d+(\.\d+)?)/i)}:u?r={name:"Android",version:y}:/phantom/i.test(m)?r={name:"PhantomJS",phantom:k,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(m)||/rim\stablet/i.test(m)?r={name:"BlackBerry",blackberry:k,version:y||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(m)?(r={name:"WebOS",webos:k,version:y||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(m)&&(r.touchpad=k)):r=/bada/i.test(m)?{name:"Bada",bada:k,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(m)?{name:"Tizen",tizen:k,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/safari/i.test(m)?{name:"Safari",safari:k,version:y}:{name:n(/^(.*)\/(.*) /),version:p(/^(.*)\/(.*) /)};!r.msedge&&/(apple)?webkit/i.test(m)?(r.name=r.name||"Webkit",r.webkit=k,!r.version&&y&&(r.version=y)):!r.opera&&/gecko\//i.test(m)&&(r.name=r.name||"Gecko",r.gecko=k,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i));
r.msedge||!u&&!r.silk?q&&(r[q]=k,r.ios=k):r.android=k;v="";r.windowsphone?v=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):q?(v=n(/os (\d+([_\s]\d+)*) like mac os x/i),v=v.replace(/[_\s]/g,".")):u?v=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?v=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?v=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?v=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(v=n(/tizen[\/\s](\d+(\.\d+)*)/i));v&&(r.osversion=v);v=v.split(".")[0];return B||"ipad"==q||u&&(3==v||4==v&&!C)||r.silk?r.tablet=k:
(C||"iphone"==q||"ipod"==q||u||r.blackberry||r.webos||r.bada)&&(r.mobile=k),r.msedge||r.msie&&10<=r.version||r.yandexbrowser&&15<=r.version||r.chrome&&20<=r.version||r.firefox&&20<=r.version||r.safari&&6<=r.version||r.opera&&10<=r.version||r.ios&&r.osversion&&6<=r.osversion.split(".")[0]||r.blackberry&&10.1<=r.version?r.a=k:r.msie&&10>r.version||r.chrome&&20>r.version||r.firefox&&20>r.version||r.safari&&6>r.version||r.opera&&10>r.version||r.ios&&r.osversion&&6>r.osversion.split(".")[0]?r.c=k:r.x=
k,r}var k=!0,l=h("undefined"!=typeof navigator?navigator.userAgent:"");return l.test=function(m){for(var n=0;n<m.length;++n){var p=m[n];if("string"==typeof p&&p in l)return!0}return!1},l._detect=h,l})},{}],2:[function(a,c,b){var h=a("bowser"),k=document.queryCommandSupported;document.queryCommandSupported=function(l){if("copy"===l||"cut"===l){if(h.chrome)return 43<=h.version?!0:!1;if(h.firefox)return 41<=h.version?!0:!1}return k.apply(this,arguments)}},{bowser:1}]},{},[2]);
Clipboard.is_supported=document.queryCommandSupported("copy");!function(a,c){"object"==typeof exports&&"object"==typeof module?module.exports=c():"function"==typeof define&&define.amd?define([],c):"object"==typeof exports?exports.Default=c():(a.ColorPicker=a.ColorPicker||{},a.ColorPicker.Default=c())}(window,function(){return function(a){function c(h){if(b[h])return b[h].exports;var k=b[h]={i:h,l:!1,exports:{}};return a[h].call(k.exports,k,k.exports,c),k.l=!0,k.exports}var b={};return c.m=a,c.c=b,c.d=function(h,k,l){c.o(h,k)||Object.defineProperty(h,k,{enumerable:!0,
get:l})},c.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})},c.t=function(h,k){if((1&k&&(h=c(h)),8&k)||4&k&&"object"==typeof h&&h&&h.__esModule)return h;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:h}),2&k&&"string"!=typeof h)for(var m in h)c.d(l,m,function(n){return h[n]}.bind(null,m));return l},c.n=function(h){return c.d(h,"a",h),
h},c.o=function(h,k){return Object.prototype.hasOwnProperty.call(h,k)},c.p="",c(c.s=9)}([function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});a=function(){function h(k,l){if(this.nodes=[],this.pseudoSelector="",this.callbacks={},l||=document,"string"==typeof k)if("<"===k[0]&&">"===k[k.length-1])this.nodes=[h.createNode(k)];else{if(-1!==k.search(/(:before|:after)$/gi)){var m=k.match(/(:before|:after)$/gi);k=k.split(m[0])[0];this.pseudoSelector=m[0]}this.nodes=[].slice.call(l.querySelectorAll(k))}else k instanceof
NodeList?this.nodes=1<k.length?[].slice.call(k):[k]:(k instanceof HTMLDocument||k instanceof Window||k instanceof HTMLElement)&&(this.nodes=[k])}return h.select=function(k,l){return new h(k,l)},h.create=function(k){return new h(h.createNode(k))},h.prototype.attr=function(k,l){return void 0!=l?(this.each(this.nodes,function(m){m.setAttribute(k,l)}),this):this.getLastNode().getAttribute(k)},h.prototype.append=function(k){var l;return l=k instanceof h?k.get():k,this.each(this.nodes,function(m){m.appendChild(l)}),
this},h.prototype.parent=function(){return new h(this.getLastNode().parentNode)},h.prototype.each=function(k,l){k instanceof Function&&(l=k,k=this.nodes);for(var m=0;m<k.length;m++)l.call(this.nodes[m],this.nodes[m],m);return this},h.prototype.hasClass=function(k){return this.getLastNode().classList.contains(k)},h.prototype.addClass=function(k){if(k){var l=k.split(" ");this.each(this.nodes,function(m){for(var n in l)m.classList.add(l[n])})}return this},h.prototype.removeClass=function(k){var l=k.split(" ");
return this.each(this.nodes,function(m){for(var n in l)m.classList.remove(l[n])}),this},h.prototype.html=function(k){this.each(this.nodes,function(l){l.innerHTML=k})},h.prototype.find=function(k){return new h(k,this.getLastNode())},h.prototype.trigger=function(k,l){var m=new CustomEvent(k,{detail:l});return this.each(this.nodes,function(n){n.dispatchEvent(m)}),this},h.prototype.text=function(k){return this.each(this.nodes,function(l){l.innerText=k}),this},h.prototype.css=function(k,l){if(void 0===
l){var m=this.getLastNode(),n=null;(k=h.convertToJsProperty(k),"function"!=typeof m.getBoundingClientRect||this.pseudoSelector||(n=m.getBoundingClientRect()[k]),n)||(m=getComputedStyle(m,this.pseudoSelector)[k],m.search("px")&&(n=parseInt(m,10)));if(isNaN(n))throw"Undefined css property: "+k;return n}return 1<this.nodes.length?this.each(this.nodes,function(p){p.style[k]=l}):this.nodes[0].style[k]=l,this},h.prototype.on=function(k,l){var m=this;return this.each(this.nodes,function(n){var p=function(r){l.call(n,
r)};m.callbacks[k]=p;n.addEventListener(k,p)}),this},h.prototype.off=function(k){var l=this.callbacks[k];return this.each(this.nodes,function(m){m.removeEventListener(k,l,!1)}),this},h.prototype.val=function(k){return void 0===k?this.getLastNode().value:(this.each(this.nodes,function(l){l.value=k}),this)},h.prototype.is=function(k){return this.getLastNode().tagName.toLowerCase()===k},h.prototype.get=function(k){return void 0===k&&(k=0),this.nodes[k]},h.prototype.length=function(){return this.nodes.length},
h.prototype.hide=function(){return this.each(this.nodes,function(k){h.select(k).css("display","none")}),this},h.prototype.show=function(){return this.each(this.nodes,function(k){h.select(k).css("display","")}),this},h.prototype.empty=function(){return this.each(this.nodes,function(k){h.select(k).get().innerHTML=""}),this},h.prototype.remove=function(){this.each(this.nodes,function(k){k.remove()})},h.prototype.insertBefore=function(k){var l=this.resolveElement(k);return this.each(this.nodes,function(m){m.parentNode.insertBefore(l,
l.previousSibling)}),this},h.prototype.insertAfter=function(k){var l=this.resolveElement(k);return this.each(this.nodes,function(m){m.parentNode.insertBefore(l,m.nextSibling)}),this},h.prototype.resolveElement=function(k){var l;return h.isHtml(k)?l=h.createNode(k):k instanceof HTMLElement?l=k:k instanceof h&&(l=k.get()),l},h.prototype.closest=function(k){return h.select(this.getLastNode().closest(k))},h.prototype.data=function(k){return this.attr("data-"+k)},h.prototype.width=function(k){if(void 0!==
k)return this.css("width",k),this;if(this.getLastNode()===window)return parseInt(this.getLastNode().innerWidth,10);k=this.css("width").toString();return k.search("px")?parseInt(this.css("width"),10):k},h.prototype.height=function(k){return void 0!==k?(this.css("height",k),this):this.getLastNode()===window?parseInt(this.getLastNode().innerHeight,10):parseInt(this.css("height"),10)},h.prototype.position=function(){return{top:Number(this.getLastNode().getBoundingClientRect().top),bottom:Number(this.getLastNode().getBoundingClientRect().bottom),
left:Number(this.getLastNode().getBoundingClientRect().left),right:Number(this.getLastNode().getBoundingClientRect().right)}},h.prototype.offset=function(){return{top:Number(this.getLastNode().offsetTop),left:Number(this.getLastNode().offsetLeft)}},h.createNode=function(k){if("<"===k[0]&&">"===k[k.length-1]){var l=document.createElement("div");return l.innerHTML=k,l.firstChild}return document.createElement(k)},h.isHtml=function(k){return"<"===k[0]&&">"===k[k.length-1]},h.convertToJsProperty=function(k){return(k=
(k=(k=k.toLowerCase().replace("-"," ")).replace(/(^| )(\w)/g,function(l){return l.toUpperCase()})).charAt(0).toLowerCase()+k.slice(1)).replace(" ","")},h.prototype.getLastNode=function(){return this.nodes[this.nodes.length-1]},h}();c.TsDom=a},function(a,c){a.exports=function(b){return b.webpackPolyfill||(b.deprecate=function(){},b.paths=[],b.children||(b.children=[]),Object.defineProperty(b,"loaded",{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,"id",{enumerable:!0,get:function(){return b.i}}),
b.webpackPolyfill=1),b}},function(a,c,b){(function(h){!function(k){function l(u,v){if(!(u=n(u)))return null;var x,y,B=1/0;v||=l.DEFAULT_COLORS;for(var C=0;C<v.length;++C){var H=v[C].rgb;(x=Math.pow(u.r-H.r,2)+Math.pow(u.g-H.g,2)+Math.pow(u.b-H.b,2))<B&&(B=x,y=v[C])}return y.name?{name:y.name,value:y.source,rgb:y.rgb,distance:Math.sqrt(B)}:y.source}function m(u){return u instanceof Array?u.map(function(v){return p(v)}):Object.keys(u).map(function(v){return p(u[v],v)})}function n(u){if("object"==typeof u)return u;
if(u in l.STANDARD_COLORS)return n(l.STANDARD_COLORS[u]);var v=u.match(/^#?((?:[0-9a-f]{3}){1,2})$/i);if(v)return v=3===(v=v[1]).length?[v.charAt(0)+v.charAt(0),v.charAt(1)+v.charAt(1),v.charAt(2)+v.charAt(2)]:[v.substring(0,2),v.substring(2,4),v.substring(4,6)],{r:parseInt(v[0],16),g:parseInt(v[1],16),b:parseInt(v[2],16)};if(v=u.match(/^rgb\(\s*(\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)\s*\)$/i))return{r:r(v[1]),g:r(v[2]),b:r(v[3])};throw Error('"'+u+'" is not a valid color');}function p(u,v){var x=
{};if(v&&(x.name=v),"string"==typeof u)x.source=u,x.rgb=n(u);else if("object"==typeof u){if(u.source)return p(u.source,u.name);x.rgb=u;u="#"+q(u.r.toString(16))+q(u.g.toString(16))+q(u.b.toString(16));x.source=u}return x}function r(u){return"%"===u.charAt(u.length-1)?Math.round(255*parseInt(u,10)/100):Number(u)}function q(u){return 1===u.length&&(u="0"+u),u}l.from=function x(v){var y=m(v);v=function(B){return l(B,y)};return v.from=x,v.or=function(B){B=y.concat(m(B));return l.from(B)},v};l.STANDARD_COLORS=
{aqua:"#0ff",black:"#000",blue:"#00f",fuchsia:"#f0f",gray:"#808080",green:"#008000",lime:"#0f0",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#f00",silver:"#c0c0c0",teal:"#008080",white:"#fff",yellow:"#ff0"};l.DEFAULT_COLORS=m("#f00 #f80 #ff0 #0f0 #00f #008 #808".split(" "));l.VERSION="0.4.4";"object"==typeof h&&h&&h.exports?h.exports=l:k.nearestColor=l}(this)}).call(this,b(1)(a))},function(a,c,b){var h;!function(k){function l(P,ca){if(P=P||"",ca=ca||{},P instanceof
l)return P;if(!(this instanceof l))return new l(P,ca);var ea=function(sa){var qa={r:0,g:0,b:0},R=1,Z=null,Y=null,ha=null,A=!1,va=!1;"string"==typeof sa&&(sa=function(ra){ra=ra.replace(da,"").replace(ma,"").toLowerCase();var na,wa=!1;if(ta[ra])ra=ta[ra],wa=!0;else if("transparent"==ra)return{r:0,g:0,b:0,a:0,format:"name"};return(na=ja.rgb.exec(ra))?{r:na[1],g:na[2],b:na[3]}:(na=ja.rgba.exec(ra))?{r:na[1],g:na[2],b:na[3],a:na[4]}:(na=ja.hsl.exec(ra))?{h:na[1],s:na[2],l:na[3]}:(na=ja.hsla.exec(ra))?
{h:na[1],s:na[2],l:na[3],a:na[4]}:(na=ja.hsv.exec(ra))?{h:na[1],s:na[2],v:na[3]}:(na=ja.hsva.exec(ra))?{h:na[1],s:na[2],v:na[3],a:na[4]}:(na=ja.hex8.exec(ra))?{r:parseInt(na[1],16),g:parseInt(na[2],16),b:parseInt(na[3],16),a:parseInt(na[4],16)/255,format:wa?"name":"hex8"}:(na=ja.hex6.exec(ra))?{r:parseInt(na[1],16),g:parseInt(na[2],16),b:parseInt(na[3],16),format:wa?"name":"hex"}:(na=ja.hex4.exec(ra))?{r:parseInt(na[1]+""+na[1],16),g:parseInt(na[2]+""+na[2],16),b:parseInt(na[3]+""+na[3],16),a:parseInt(na[4]+
""+na[4],16)/255,format:wa?"name":"hex8"}:(na=ja.hex3.exec(ra))?{r:parseInt(na[1]+""+na[1],16),g:parseInt(na[2]+""+na[2],16),b:parseInt(na[3]+""+na[3],16),format:wa?"name":"hex"}:!1}(sa));"object"==typeof sa&&(W(sa.r)&&W(sa.g)&&W(sa.b)?(qa=function(ra,na,wa){return{r:255*T(ra,255),g:255*T(na,255),b:255*T(wa,255)}}(sa.r,sa.g,sa.b),A=!0,va="%"===String(sa.r).substr(-1)?"prgb":"rgb"):W(sa.h)&&W(sa.s)&&W(sa.v)?(Z=M(sa.s),Y=M(sa.v),qa=function(ra,na,wa){ra=6*T(ra,360);na=T(na,100);wa=T(wa,100);var Oa=
k.floor(ra),Pa=ra-Oa;ra=wa*(1-na);var ia=wa*(1-Pa*na);na=wa*(1-(1-Pa)*na);Oa%=6;return{r:255*[wa,ia,ra,ra,na,wa][Oa],g:255*[na,wa,wa,ia,ra,ra][Oa],b:255*[ra,ra,na,wa,wa,ia][Oa]}}(sa.h,Z,Y),A=!0,va="hsv"):W(sa.h)&&W(sa.s)&&W(sa.l)&&(Z=M(sa.s),ha=M(sa.l),qa=function(ra,na,wa){function Oa(la,oa,Ga){return 0>Ga&&(Ga+=1),1<Ga&&--Ga,Ga<1/6?la+6*(oa-la)*Ga:.5>Ga?oa:Ga<2/3?la+(oa-la)*(2/3-Ga)*6:la}if(ra=T(ra,360),na=T(na,100),wa=T(wa,100),0===na)wa=na=ra=wa;else{var Pa=.5>wa?wa*(1+na):wa+na-wa*na,ia=2*wa-
Pa;wa=Oa(ia,Pa,ra+1/3);na=Oa(ia,Pa,ra);ra=Oa(ia,Pa,ra-1/3)}return{r:255*wa,g:255*na,b:255*ra}}(sa.h,Z,ha),A=!0,va="hsl"),sa.hasOwnProperty("a")&&(R=sa.a));return R=O(R),{ok:A,format:sa.format||va,r:Ea(255,Da(qa.r,0)),g:Ea(255,Da(qa.g,0)),b:Ea(255,Da(qa.b,0)),a:R}}(P);this._originalInput=P;this._r=ea.r;this._g=ea.g;this._b=ea.b;this._a=ea.a;this._roundA=xa(100*this._a)/100;this._format=ca.format||ea.format;this._gradientType=ca.gradientType;1>this._r&&(this._r=xa(this._r));1>this._g&&(this._g=xa(this._g));
1>this._b&&(this._b=xa(this._b));this._ok=ea.ok;this._tc_id=fa++}function m(P,ca,ea){P=T(P,255);ca=T(ca,255);ea=T(ea,255);var sa=Da(P,ca,ea);var qa=Ea(P,ca,ea);var R=(sa+qa)/2;if(sa==qa)var Z=qa=0;else{var Y=sa-qa;switch(qa=.5<R?Y/(2-sa-qa):Y/(sa+qa),sa){case P:Z=(ca-ea)/Y+(ca<ea?6:0);break;case ca:Z=(ea-P)/Y+2;break;case ea:Z=(P-ca)/Y+4}Z/=6}return{h:Z,s:qa,l:R}}function n(P,ca,ea){P=T(P,255);ca=T(ca,255);ea=T(ea,255);var sa,qa=Da(P,ca,ea),R=Ea(P,ca,ea),Z=qa-R;if(sa=0===qa?0:Z/qa,qa==R)var Y=0;else{switch(qa){case P:Y=
(ca-ea)/Z+(ca<ea?6:0);break;case ca:Y=(ea-P)/Z+2;break;case ea:Y=(P-ca)/Z+4}Y/=6}return{h:Y,s:sa,v:qa}}function p(P,ca,ea,sa){P=[Q(xa(P).toString(16)),Q(xa(ca).toString(16)),Q(xa(ea).toString(16))];return sa&&P[0].charAt(0)==P[0].charAt(1)&&P[1].charAt(0)==P[1].charAt(1)&&P[2].charAt(0)==P[2].charAt(1)?P[0].charAt(0)+P[1].charAt(0)+P[2].charAt(0):P.join("")}function r(P,ca,ea,sa){return[Q(k.round(255*parseFloat(sa)).toString(16)),Q(xa(P).toString(16)),Q(xa(ca).toString(16)),Q(xa(ea).toString(16))].join("")}
function q(P,ca){ca=0===ca?0:ca||10;P=l(P).toHsl();return P.s-=ca/100,P.s=Ea(1,Da(0,P.s)),l(P)}function u(P,ca){ca=0===ca?0:ca||10;P=l(P).toHsl();return P.s+=ca/100,P.s=Ea(1,Da(0,P.s)),l(P)}function v(P){return l(P).desaturate(100)}function x(P,ca){ca=0===ca?0:ca||10;P=l(P).toHsl();return P.l+=ca/100,P.l=Ea(1,Da(0,P.l)),l(P)}function y(P,ca){ca=0===ca?0:ca||10;P=l(P).toRgb();return P.r=Da(0,Ea(255,P.r-xa(-ca/100*255))),P.g=Da(0,Ea(255,P.g-xa(-ca/100*255))),P.b=Da(0,Ea(255,P.b-xa(-ca/100*255))),l(P)}
function B(P,ca){ca=0===ca?0:ca||10;P=l(P).toHsl();return P.l-=ca/100,P.l=Ea(1,Da(0,P.l)),l(P)}function C(P,ca){P=l(P).toHsl();ca=(P.h+ca)%360;return P.h=0>ca?360+ca:ca,l(P)}function H(P){P=l(P).toHsl();return P.h=(P.h+180)%360,l(P)}function F(P){var ca=l(P).toHsl(),ea=ca.h;return[l(P),l({h:(ea+120)%360,s:ca.s,l:ca.l}),l({h:(ea+240)%360,s:ca.s,l:ca.l})]}function E(P){var ca=l(P).toHsl(),ea=ca.h;return[l(P),l({h:(ea+90)%360,s:ca.s,l:ca.l}),l({h:(ea+180)%360,s:ca.s,l:ca.l}),l({h:(ea+270)%360,s:ca.s,
l:ca.l})]}function G(P){var ca=l(P).toHsl(),ea=ca.h;return[l(P),l({h:(ea+72)%360,s:ca.s,l:ca.l}),l({h:(ea+216)%360,s:ca.s,l:ca.l})]}function K(P,ca,ea){ca=ca||6;ea=ea||30;var sa=l(P).toHsl();ea=360/ea;P=[l(P)];for(sa.h=(sa.h-(ea*ca>>1)+720)%360;--ca;)sa.h=(sa.h+ea)%360,P.push(l(sa));return P}function J(P,ca){ca=ca||6;var ea=l(P).toHsv();P=ea.h;var sa=ea.s;ea=ea.v;for(var qa=[],R=1/ca;ca--;)qa.push(l({h:P,s:sa,v:ea})),ea=(ea+R)%1;return qa}function O(P){return P=parseFloat(P),(isNaN(P)||0>P||1<P)&&
(P=1),P}function T(P,ca){var ea=P;"string"==typeof ea&&-1!=ea.indexOf(".")&&1===parseFloat(ea)&&(P="100%");ea="string"==typeof P&&-1!=P.indexOf("%");return P=Ea(ca,Da(0,parseFloat(P))),ea&&(P=parseInt(P*ca,10)/100),1E-6>k.abs(P-ca)?1:P%ca/parseFloat(ca)}function Q(P){return 1==P.length?"0"+P:""+P}function M(P){return 1>=P&&(P=100*P+"%"),P}function W(P){return!!ja.CSS_UNIT.exec(P)}var da=/^\s+/,ma=/\s+$/,fa=0,xa=k.round,Ea=k.min,Da=k.max,Fa=k.random;l.prototype={isDark:function(){return 128>this.getBrightness()},
isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var P=this.toRgb();return(299*P.r+587*P.g+114*P.b)/1E3},getLuminance:function(){var P,ca,ea,sa=this.toRgb();return P=sa.r/255,ca=sa.g/255,ea=sa.b/255,.2126*(.03928>=P?P/12.92:k.pow((P+.055)/1.055,2.4))+.7152*(.03928>=ca?ca/12.92:k.pow((ca+.055)/1.055,2.4))+.0722*(.03928>=
ea?ea/12.92:k.pow((ea+.055)/1.055,2.4))},setAlpha:function(P){return this._a=O(P),this._roundA=xa(100*this._a)/100,this},toHsv:function(){var P=n(this._r,this._g,this._b);return{h:360*P.h,s:P.s,v:P.v,a:this._a}},toHsvString:function(){var P=n(this._r,this._g,this._b),ca=xa(360*P.h),ea=xa(100*P.s);P=xa(100*P.v);return 1==this._a?"hsv("+ca+", "+ea+"%, "+P+"%)":"hsva("+ca+", "+ea+"%, "+P+"%, "+this._roundA+")"},toHsl:function(){var P=m(this._r,this._g,this._b);return{h:360*P.h,s:P.s,l:P.l,a:this._a}},
toHslString:function(){var P=m(this._r,this._g,this._b),ca=xa(360*P.h),ea=xa(100*P.s);P=xa(100*P.l);return 1==this._a?"hsl("+ca+", "+ea+"%, "+P+"%)":"hsla("+ca+", "+ea+"%, "+P+"%, "+this._roundA+")"},toHex:function(P){return p(this._r,this._g,this._b,P)},toHexString:function(P){return"#"+this.toHex(P)},toHex8:function(P){var ca=this._g,ea=this._b,sa=this._a;ca=[Q(xa(this._r).toString(16)),Q(xa(ca).toString(16)),Q(xa(ea).toString(16)),Q(k.round(255*parseFloat(sa)).toString(16))];P=P&&ca[0].charAt(0)==
ca[0].charAt(1)&&ca[1].charAt(0)==ca[1].charAt(1)&&ca[2].charAt(0)==ca[2].charAt(1)&&ca[3].charAt(0)==ca[3].charAt(1)?ca[0].charAt(0)+ca[1].charAt(0)+ca[2].charAt(0)+ca[3].charAt(0):ca.join("");return P},toHex8String:function(P){return"#"+this.toHex8(P)},toRgb:function(){return{r:xa(this._r),g:xa(this._g),b:xa(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+xa(this._r)+", "+xa(this._g)+", "+xa(this._b)+")":"rgba("+xa(this._r)+", "+xa(this._g)+", "+xa(this._b)+", "+this._roundA+
")"},toPercentageRgb:function(){return{r:xa(100*T(this._r,255))+"%",g:xa(100*T(this._g,255))+"%",b:xa(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+xa(100*T(this._r,255))+"%, "+xa(100*T(this._g,255))+"%, "+xa(100*T(this._b,255))+"%)":"rgba("+xa(100*T(this._r,255))+"%, "+xa(100*T(this._g,255))+"%, "+xa(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(1>this._a)&&(X[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(P){var ca=
"#"+r(this._r,this._g,this._b,this._a),ea=ca,sa=this._gradientType?"GradientType = 1, ":"";P&&(P=l(P),ea="#"+r(P._r,P._g,P._b,P._a));return"progid:DXImageTransform.Microsoft.gradient("+sa+"startColorstr="+ca+",endColorstr="+ea+")"},toString:function(P){var ca=!!P;P=P||this._format;var ea=!1,sa=1>this._a&&0<=this._a;return ca||!sa||"hex"!==P&&"hex6"!==P&&"hex3"!==P&&"hex4"!==P&&"hex8"!==P&&"name"!==P?("rgb"===P&&(ea=this.toRgbString()),"prgb"===P&&(ea=this.toPercentageRgbString()),"hex"!==P&&"hex6"!==
P||(ea=this.toHexString()),"hex3"===P&&(ea=this.toHexString(!0)),"hex4"===P&&(ea=this.toHex8String(!0)),"hex8"===P&&(ea=this.toHex8String()),"name"===P&&(ea=this.toName()),"hsl"===P&&(ea=this.toHslString()),"hsv"===P&&(ea=this.toHsvString()),ea||this.toHexString()):"name"===P&&0===this._a?this.toName():this.toRgbString()},clone:function(){return l(this.toString())},_applyModification:function(P,ca){P=P.apply(null,[this].concat([].slice.call(ca)));return this._r=P._r,this._g=P._g,this._b=P._b,this.setAlpha(P._a),
this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(B,arguments)},desaturate:function(){return this._applyModification(q,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(P,ca){return P.apply(null,
[this].concat([].slice.call(ca)))},analogous:function(){return this._applyCombination(K,arguments)},complement:function(){return this._applyCombination(H,arguments)},monochromatic:function(){return this._applyCombination(J,arguments)},splitcomplement:function(){return this._applyCombination(G,arguments)},triad:function(){return this._applyCombination(F,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}};l.fromRatio=function(P,ca){if("object"==typeof P){var ea={},sa;for(sa in P)P.hasOwnProperty(sa)&&
(ea[sa]="a"===sa?P[sa]:M(P[sa]));P=ea}return l(P,ca)};l.equals=function(P,ca){return!(!P||!ca)&&l(P).toRgbString()==l(ca).toRgbString()};l.random=function(){return l.fromRatio({r:Fa(),g:Fa(),b:Fa()})};l.mix=function(P,ca,ea){ea=0===ea?0:ea||50;P=l(P).toRgb();ca=l(ca).toRgb();ea/=100;return l({r:(ca.r-P.r)*ea+P.r,g:(ca.g-P.g)*ea+P.g,b:(ca.b-P.b)*ea+P.b,a:(ca.a-P.a)*ea+P.a})};l.readability=function(P,ca){P=l(P);ca=l(ca);return(k.max(P.getLuminance(),ca.getLuminance())+.05)/(k.min(P.getLuminance(),ca.getLuminance())+
.05)};l.isReadable=function(P,ca,ea){ca=l.readability(P,ca);P=!1;var sa=ea;ea=((sa=sa||{level:"AA",size:"small"}).level||"AA").toUpperCase();sa=(sa.size||"small").toLowerCase();"AA"!==ea&&"AAA"!==ea&&(ea="AA");"small"!==sa&&"large"!==sa&&(sa="small");switch(ea+sa){case "AAsmall":case "AAAlarge":P=4.5<=ca;break;case "AAlarge":P=3<=ca;break;case "AAAsmall":P=7<=ca}return P};l.mostReadable=function(P,ca,ea){var sa,qa=null,R=0;var Z=(ea=ea||{}).includeFallbackColors;var Y=ea.level;var ha=ea.size;for(var A=
0;A<ca.length;A++)(sa=l.readability(P,ca[A]))>R&&(R=sa,qa=l(ca[A]));return l.isReadable(P,qa,{level:Y,size:ha})||!Z?qa:(ea.includeFallbackColors=!1,l.mostReadable(P,["#fff","#000"],ea))};var ta=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",
coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",
dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",
lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",
mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",
rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},X=l.hexNames=function(P){var ca={},
ea;for(ea in P)P.hasOwnProperty(ea)&&(ca[P[ea]]=ea);return ca}(ta),ja={CSS_UNIT:RegExp("(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)"),rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsva:RegExp("hsva[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};
void 0!==a&&a.exports?a.exports=l:void 0===(h=l)||(a.exports=h)}(Math)},function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});var h=b(3);a=function(){function k(l){this.color=l;this.normalize()}return k.prototype.normalize=function(){var l=h(this.color),m=l.getAlpha(),n=l.toRgb(),p=l.toHsl(),r=l.toHsv();l.setAlpha(1);this.rgb=l.toRgbString();this.rgba="rgba("+n.r+", "+n.g+", "+n.b+", "+m+")";this.hex=l.toHexString();this.hsl=l.toHslString();this.hsla="hsla("+Math.floor(p.h)+", "+Math.floor(100*
p.s)+"%, "+Math.floor(100*p.l)+"%, "+m+")";this.hsv=l.toHsvString();this.hsva="";this.source={rgba:{r:n.r,g:n.g,b:n.b,a:m},hsla:{h:Math.floor(p.h),s:Math.floor(100*p.s),l:Math.floor(100*p.l),a:m},hsv:{h:Math.floor(r.h),s:Math.floor(100*r.s),v:Math.floor(100*r.v),a:m}}},k.prototype.format=function(l){return"rgb"===l?this.rgb:"rgba"===l?this.rgba:"hex"===l?this.hex:"hsl"===l?this.hsl:"hsla"===l?this.hsla:"source"===l?this.source:this.hex},k.prototype.setOpacity=function(l){this.rgba="rgba("+this.source.rgba.r+
", "+this.source.rgba.g+", "+this.source.rgba.b+", "+l+")";this.hsla="hsla("+this.source.hsla.h+", "+this.source.hsla.s+"%, "+this.source.hsla.l+"%, "+l+")";this.source.rgba.a=l;this.source.hsla.a=l},k.prototype.isValid=function(){return h(this.color).isValid()},k.process=function(l){return new k(l)},k}();c.Color=a},function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});var h=b(0);a=function(){function k(l,m,n,p){this.selector=l;this.picker=m;this.defaultPlacement=n;this.arrow=p;var r=this;
l=this.getScrollParent(this.selector.get());this.processHandler=function(q){return r.process()};this.scrollParent=h.TsDom.select(l);this.scrollParent.on("scroll",this.processHandler);this.window=h.TsDom.select(window);this.window.on("scroll",this.processHandler)}return k.prototype.process=function(){var l=this.picker.attr("id");l=h.TsDom.select("#"+l+":after");var m=l.width(),n=l.height(),p=this.selector.width(),r=this.selector.height(),q=this.selector.position().top,u=this.selector.position().left,
v=this.picker.width(),x=this.picker.height();var y=this.defaultPlacement.split("-");var B=m/2;if("bottom"===(y=1<y.length?y[0]:this.defaultPlacement))y=q+r+n,u+v<h.TsDom.select(window).width()?(m=u,this.picker.removeClass("is-arrow-right").addClass("is-arrow-left"),p<(C=l.css("left"))+l.width()+Math.ceil(C/2)&&(m-=Math.ceil(C+B/2-p/2))):(m=u+p-v,this.picker.removeClass("is-arrow-left").addClass("is-arrow-right"),p<(H=l.css("right"))+l.width()+Math.ceil(H/2)&&(m=m+3+(H+B/2-p/2))),this.picker.css("top",
y+"px"),this.picker.css("left",m+"px");else if("top"===y){var C,H;y=q-x-n;u+v<h.TsDom.select(window).width()?(m=u,this.picker.css("left",m+"px"),this.picker.removeClass("is-arrow-right").addClass("is-arrow-left"),p<(C=l.css("left"))+l.width()+Math.ceil(C/2)&&(m-=Math.ceil(C+B/2-p/2))):(m=u+p-v,this.picker.removeClass("is-arrow-left").addClass("is-arrow-right"),p<(H=l.css("right"))+l.width()+Math.ceil(H/2)&&(m=m+3+(H+B/2-p/2)));this.picker.css("top",y+"px");this.picker.css("left",m+"px")}else if("left"===
y)y=q,m=u-v-m,q+x<h.TsDom.select(window).height()?(this.picker.removeClass("is-arrow-bottom").addClass("is-arrow-top"),r<(F=l.css("top"))+n+Math.ceil(F/2)&&(y-=Math.ceil(F+B/2-r/2))):(y=q+r-x,this.picker.removeClass("is-arrow-top").addClass("is-arrow-bottom"),r<(E=l.css("bottom"))+l.height()+Math.ceil(E/2)&&(y=y+4+(E+B/2-r/2))),this.picker.css("top",y+"px"),this.picker.css("left",m+"px");else if("right"===y){var F,E;y=q;m=u+p+m;q+x<h.TsDom.select(window).height()?(this.picker.removeClass("is-arrow-bottom").addClass("is-arrow-top"),
r<(F=l.css("top"))+n+Math.ceil(F/2)&&(y-=Math.ceil(F+B/2-r/2))):(y=q+r-x,this.picker.removeClass("is-arrow-top").addClass("is-arrow-bottom"),r<(E=l.css("bottom"))+l.height()+Math.ceil(E/2)&&(y=y+4+(E+B/2-r/2)));this.picker.css("top",y+"px");this.picker.css("left",m+"px")}},k.prototype.destroy=function(){this.scrollParent.off("scroll");this.window.off("scroll")},k.prototype.getScrollParent=function(l){var m=/(auto|scroll)/,n=function(p,r){return null===p.parentNode?r:n(p.parentNode,r.concat([p]))};
return function(p){if(p instanceof HTMLElement||p instanceof SVGElement){p=n(p.parentNode,[]);for(var r=0;r<p.length;r+=1){var q=p[r];var u=m.test;q=getComputedStyle(q,null).getPropertyValue("overflow")+getComputedStyle(q,null).getPropertyValue("overflow-y")+getComputedStyle(q,null).getPropertyValue("overflow-x");if(u.call(m,q))return p[r]}return document.scrollingElement||document.documentElement}}(l)},k}();c.PickerPosition=a},function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});c._uniqueId=
function(h){return void 0===h&&(h=16),Math.random().toString(36).substr(2,h)}},function(a,c,b){a.exports=function(){function h(n,p){return p&&!1===p.clone||!m(n)?n:l(Array.isArray(n)?[]:{},n,p)}function k(n,p,r){return n.concat(p).map(function(q){return h(q,r)})}function l(n,p,r){var q=Array.isArray(p),u=Array.isArray(n),v=r||{arrayMerge:k};return q===u?q?(v.arrayMerge||k)(n,p,r):function(x,y,B){var C={};return m(x)&&Object.keys(x).forEach(function(H){C[H]=h(x[H],B)}),Object.keys(y).forEach(function(H){m(y[H])&&
x[H]?C[H]=l(x[H],y[H],B):C[H]=h(y[H],B)}),C}(n,p,r):h(p,r)}var m=function(n){var p;if(p=!!n&&"object"==typeof n)p=Object.prototype.toString.call(n),p=!("[object RegExp]"===p||"[object Date]"===p||n.$$typeof===c);return p};c=60613;return l.all=function(n,p){if(!Array.isArray(n))throw Error("first argument should be an array");return n.reduce(function(r,q){return l(r,q,p)},{})},l}()},function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});var h=b(0),k=b(7),l=b(6),m=b(5);a=function(){function n(p,
r){void 0===r&&(r={});this.options={color:"",hexOnly:!1,inline:!1,placement:"bottom",format:"rgba",customClass:"",size:"default",arrow:!0,anchor:{hidden:!1,cssProperty:"color"},animation:"slide-in",hideInfo:!1,history:{hidden:!1,placeholdersAmount:10,colors:[]}};this.events={change:function(q){}};this.anchor=h.TsDom.select(p);this.id="colorpicker-"+l._uniqueId();this.anchorId=this.id+"-anchor";this.cssId="#"+this.id;this.cssAnchorId="#"+this.anchorId;this.options=k.all([this.options,this.getDefaultOptions(),
n.globalOptions,r],{arrayMerge:function(q,u,v){return u}});this.document=h.TsDom.select(document);this.initPicker();this.update();this.initAnchor()}return n.prototype.setColor=function(p){this.options.color=p;this.update()},n.prototype.show=function(){this.bindCommonEvents();this.picker.removeClass(this.options.animation).addClass(this.options.animation).addClass("is-opened").addClass("colorpicker--position-"+this.options.placement);this.detectPickerPosition();this.afterShow()},n.prototype.hide=function(){this.picker.hasClass("is-opened")&&
(this.pickerPosition.destroy(),this.unBindCommonEvents(),this.picker.removeClass("is-opened"),this.anchor.get(0).blur())},n.prototype.unBindCommonEvents=function(){this.options.inline||this.document.off("mousedown")},n.prototype.on=function(p,r){this.events[p]=r},n.prototype.setAnchorCssProperty=function(p){this.options.anchor.cssProperty=p},n.prototype.setPlacement=function(p){this.options.placement=p},n.setGlobalOptions=function(p){n.globalOptions=p},n.prototype.initPicker=function(){this.buildLayout();
this.picker.addClass(this.getPickerCssClassName()+"--size-"+this.options.size);this.options.arrow||this.picker.addClass("colorpicker--no-arrow");this.addCustomClass();this.options.inline?(this.anchor.parent().hasClass("colorpicker-input")?this.anchor.parent().insertAfter(this.picker):this.anchor.insertAfter(this.picker),this.anchor.addClass("colorpicker-anchor--inline"),this.picker.addClass("colorpicker--inline")):h.TsDom.select("body").append(this.picker);this.bindEvents()},n.prototype.bindCommonEvents=
function(){var p=this;this.options.inline||this.document.on("mousedown",function(r){var q=h.TsDom.select(r.target).closest(".colorpicker");q.length()&&q.attr("id")===p.picker.attr("id")||r.target===p.anchor.get(0)||p.hide()})},n.prototype.initAnchor=function(){var p=this,r=this,q=function(v){r.hideAllActivePickers();r.show();v.stopPropagation()};if(this.anchor.addClass("colorpicker-anchor"),this.options.anchor.hidden&&this.anchor.hide(),this.anchor.is("input")){this.anchor.val(r.getColor().toString()).on("input",
function(v){p.setColor(p.anchor.val());p.updateAnchorColor(v,!1)});var u=this.anchor.parent().find("[data-color]");u.length()&&u.css("background",r.getColor());this.options.inline||this.anchor.on("focus",q)}else this.anchor.find("[data-color]").length()?this.anchor.find("[data-color]").css("background",r.getColor()):this.anchor.css(r.options.anchor.cssProperty,r.getColor()),this.options.inline||this.anchor.on("click",q);this.picker.on("colorpicker:color-change",function(v){p.updateAnchorColor(v)});
this.picker.on("colorpicker:hide",function(v){p.hide()})},n.prototype.updateAnchorColor=function(p,r){void 0===p&&(p=null);void 0===r&&(r=!0);p.detail.enableHidePicker&&this.options.hideAfterColorChange&&!this.options.inline&&this.hide();p=null;r&&this.anchor.val(this.getColor().toString());(p=this.anchor.parent().hasClass("colorpicker-input")?this.anchor.parent().find("[data-color]"):this.anchor.find("[data-color]")).length()?p.css("background-color",this.getColor()):this.anchor.is("input")||this.anchor.css(this.options.anchor.cssProperty,
this.getColor());this.events.change.apply(this,[this.getColorObject()])},n.prototype.hideAllActivePickers=function(){h.TsDom.select(".colorpicker.is-opened:not("+this.cssId+"):not(.colorpicker--inline)").trigger("colorpicker:hide")},n.prototype.addCustomClass=function(){this.picker.addClass(this.options.customClass)},n.prototype.detectPickerPosition=function(){var p=this;this.pickerPosition=new m.PickerPosition(this.anchor,this.picker,this.options.placement,this.options.arrow);this.pickerPosition.process();
this.picker.on("colorpicker:refresh-position",function(r){p.pickerPosition.process()})},n.prototype.dispatchColorChangedEvent=function(p){void 0===p&&(p=!0);this.picker.trigger("colorpicker:color-change",{color:this.getColor(),enableHidePicker:p})},n.prototype.dispatchRefreshPositionEvent=function(){this.picker.trigger("colorpicker:refresh-position")},n.prototype.afterShow=function(){},n.globalOptions={},n}();c.ColorPicker=a},function(a,c,b){var h=this&&this.__extends||function(){var n=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(p,r){p.__proto__=r}||function(p,r){for(var q in r)r.hasOwnProperty(q)&&(p[q]=r[q])};return function(p,r){function q(){this.constructor=p}n(p,r);p.prototype=null===r?Object.create(r):(q.prototype=r.prototype,new q)}}();c=b(8);var k=b(4),l=b(0),m=b(2);b=function(n){function p(){return null!==n&&n.apply(this,arguments)||this}return h(p,n),p.prototype.buildLayout=function(){var r=this;this.options.hexOnly&&(this.options.history.placeholdersAmount=9,this.options.format=
"hex");this.picker=l.TsDom.create("div").addClass("colorpicker").addClass("colorpicker-default").attr("id",this.id);var q=l.TsDom.create("div").addClass("colorpicker-default__body"),u=l.TsDom.create("div").addClass("colorpicker-default__info");this.options.hideInfo&&u.addClass("colorpicker-default__info--hidden");this.spectrumContainer=l.TsDom.create("div").addClass("colorpicker-default__spectrum-container");this.spectrumCanvas=l.TsDom.create("canvas").addClass("colorpicker-default__spectrum-canvas");
this.spectrumCursor=l.TsDom.create("div").addClass("colorpicker-default__spectrum-cursor");this.spectrumContainer.append(this.spectrumCanvas).append(this.spectrumCursor);this.hueContainer=l.TsDom.create("div").addClass("colorpicker-default__hue-container");this.hueCanvas=l.TsDom.create("canvas").addClass("colorpicker-default__hue-canvas");this.hueCursor=l.TsDom.create("div").addClass("colorpicker-default__hue-cursor");this.hueContainer.append(this.hueCanvas).append(this.hueCursor);this.opacityContainer=
l.TsDom.create("div").addClass("colorpicker-default__opacity-container");this.opacityCanvas=l.TsDom.create("canvas").addClass("colorpicker-default__opacity-canvas");this.opacityCursor=l.TsDom.create("div").addClass("colorpicker-default__opacity-cursor");var v=l.TsDom.create("div").addClass("colorpicker-default__hex-input-container"),x=l.TsDom.create("div").addClass("colorpicker-default__hex-text").text("hex");this.hexInput=l.TsDom.create("input").addClass("colorpicker-default__hex-input").attr("maxlength",
7);v.append(this.hexInput).append(x);x=l.TsDom.create("div").addClass("colorpicker-default__r-input-container");var y=l.TsDom.create("div").addClass("colorpicker-default__r-text").text("r");this.rInput=l.TsDom.create("input").addClass("colorpicker-default__r-input").attr("maxlength",3);x.append(this.rInput).append(y);y=l.TsDom.create("div").addClass("colorpicker-default__g-input-container");var B=l.TsDom.create("div").addClass("colorpicker-default__g-text").text("g");this.gInput=l.TsDom.create("input").addClass("colorpicker-default__g-input").attr("maxlength",
3);y.append(this.gInput).append(B);B=l.TsDom.create("div").addClass("colorpicker-default__b-input-container");var C=l.TsDom.create("div").addClass("colorpicker-default__b-text").text("b");this.bInput=l.TsDom.create("input").addClass("colorpicker-default__b-input").attr("maxlength",3);B.append(this.bInput).append(C);C=l.TsDom.create("div").addClass("colorpicker-default__a-input-container");this.aInput=l.TsDom.create("input").addClass("colorpicker-default__a-input").attr("maxlength",4);var H=l.TsDom.create("div").addClass("colorpicker-default__a-text").text("a");
C.append(this.aInput).append(H);this.history=l.TsDom.create("div").addClass("colorpicker-default__history");this.options.history.hidden&&this.history.addClass("is-hidden");H=l.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("is-add-new");this.history.append(H);this.options.history.colors.forEach(function(E){E=l.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("has-color").css("background",E).attr("data-history-color",(new k.Color(E)).rgba);r.history.append(E)});
for(H=0;H<this.options.history.placeholdersAmount-this.options.history.colors.length;H++){var F=l.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("is-empty").attr("data-history-color","");this.history.append(F)}this.opacityContainer.append(this.opacityCanvas).append(this.opacityCursor);q.append(this.spectrumContainer).append(this.hueContainer).append(this.opacityContainer);u.append(v).append(x).append(y).append(B).append(C);this.picker.append(q).append(u).append(this.history)},
p.prototype.bindEvents=function(){var r=this,q=this;this.spectrumCursor.on("dragstart",function(u){u.stopPropagation();u.preventDefault()});this.spectrumContainer.on("mousedown",function(u){1==u.which&&(r.initDragObject(u,q.spectrumCursor,q.spectrumCanvas),r.processCursorPosition(r.spectrumCursor,r.spectrumCanvas,r.dragObject.shiftX,r.dragObject.shiftY),r.spectrumColor=r.setCursorColorFromCursorPosition(r.spectrumCursor,r.spectrumCanvas,r.dragObject.shiftX,r.dragObject.shiftY),r.setOpacityGradientAndCursorColor(),
r.setColorValuesToInputs(),r.dispatchColorChangedEvent())});this.hueContainer.on("mousedown",function(u){1==u.which&&(r.initDragObject(u,r.hueCursor,r.hueCanvas),r.dragObject.processShiftX=!1,r.processCursorPosition(q.hueCursor,q.hueCanvas,q.dragObject.shiftX,q.dragObject.shiftY,q.dragObject.processShiftX),r.hueColor=r.setCursorColorFromCursorPosition(q.hueCursor,q.hueCanvas,q.dragObject.shiftX,q.dragObject.shiftY),r.fillSpectrumCanvas(),u=r.getCursorCoords(r.spectrumCursor),r.spectrumColor=r.setCursorColorFromCursorPosition(q.spectrumCursor,
q.spectrumCanvas,u.shiftX,u.shiftY),r.fillOpacityCanvas(),r.setOpacityGradientAndCursorColor(),r.setColorValuesToInputs(),r.dispatchColorChangedEvent())});this.opacityContainer.on("mousedown",function(u){1==u.which&&(r.initDragObject(u,r.opacityCursor,r.opacityCanvas),r.dragObject.processShiftX=!1,r.processCursorPosition(q.opacityCursor,q.opacityCanvas,q.dragObject.shiftX,q.dragObject.shiftY,q.dragObject.processShiftX),r.changeAInputValue(q.dragObject.shiftY),r.setCursorColorFromCursorPosition(q.opacityCursor,
q.opacityCanvas,q.dragObject.shiftX,q.dragObject.shiftY,+r.aInput.val()),r.dispatchColorChangedEvent())});this.hexInput.on("keyup",function(u){u=r.hexInput.val();/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(u)&&(r.spectrumColor=k.Color.process(u),r.setHueCursorPosition(),r.fillSpectrumCanvas(),r.fillOpacityCanvas(),r.setSpectrumCursorPositionByColor(r.spectrumColor),r.setOpacityGradientAndCursorColor(),r.rInput.val(r.spectrumColor.source.rgba.r),r.gInput.val(r.spectrumColor.source.rgba.g),r.bInput.val(r.spectrumColor.source.rgba.b),
r.dispatchColorChangedEvent())});this.rInput.on("keyup",function(u){r.onChangeInputValue(r.rInput)});this.gInput.on("keyup",function(u){r.onChangeInputValue(r.gInput)});this.bInput.on("keyup",function(u){r.onChangeInputValue(r.bInput)});this.aInput.on("keyup",function(u){u=r.aInput.val();u.match(/^\d*(\.\d+)?$/)&&0<=u&&1>=u&&(r.setOpacityCursorPosition(u),r.dispatchColorChangedEvent())});l.TsDom.select(document).on("mousemove",function(u){if(r.dragObject){var v=r.dragObject.shiftX,x=r.dragObject.shiftY;
r.dragObject.processShiftX&&(v=u.clientX-r.dragObject.downX+r.dragObject.shiftX);r.dragObject.processShiftY&&(x=u.clientY-r.dragObject.downY+r.dragObject.shiftY);(r.processCursorPosition(r.dragObject.elements.cursor,r.dragObject.elements.canvas,v,x,r.dragObject.processShiftX,r.dragObject.processShiftY),r.dragObject.elements.cursor.hasClass("colorpicker-default__spectrum-cursor"))?(r.spectrumColor=r.setCursorColorFromCursorPosition(r.spectrumCursor,r.spectrumCanvas,v,x),r.setOpacityGradientAndCursorColor(),
r.setColorValuesToInputs(),r.dispatchColorChangedEvent()):r.dragObject.elements.cursor.hasClass("colorpicker-default__hue-cursor")?(r.hueColor=r.setCursorColorFromCursorPosition(q.hueCursor,q.hueCanvas,v,x),r.fillSpectrumCanvas(),u=r.getCursorCoords(r.spectrumCursor),r.spectrumColor=r.setCursorColorFromCursorPosition(q.spectrumCursor,q.spectrumCanvas,u.shiftX,u.shiftY),r.fillOpacityCanvas(),r.setOpacityGradientAndCursorColor(),r.setColorValuesToInputs(),r.dispatchColorChangedEvent()):r.dragObject.elements.cursor.hasClass("colorpicker-default__opacity-cursor")&&
(r.changeAInputValue(x),r.setCursorColorFromCursorPosition(q.opacityCursor,q.opacityCanvas,v,x,+r.aInput.val()),r.dispatchColorChangedEvent())}}).on("mouseup",function(u){r.dragObject=null});this.history.find(".is-add-new").on("click",function(u){var v=r.getColorObject().rgba,x=!1;r.history.find(".is-empty").length()?r.history.find(".is-empty").each(function(y){y=l.TsDom.select(y);r.history.find('[data-history-color="'+v+'"]').length()&&(x=!0);y.data("history-color")||x||(x=!0,y.css("background",
v).attr("data-history-color",v).removeClass("is-empty").addClass("has-color"))}):r.history.find('[data-history-color="'+v+'"]').length()||(u=l.TsDom.create("div").addClass("colorpicker-default__history-item").addClass("has-color").css("background",v).attr("data-history-color",v),r.history.append(u))});this.history.on("click",function(u){u=l.TsDom.select(u.target);u.hasClass("has-color")&&(u=u.data("history-color"),r.setColor(u),r.dispatchColorChangedEvent())});this.picker.on("contextmenu",function(u){return u.stopPropagation(),
u.preventDefault(),!1})},p.prototype.refresh=function(){},p.prototype.destroy=function(){this.unBindCommonEvents();this.picker.remove();this.anchor.off("focus");this.anchor.off("click")},p.prototype.onChangeInputValue=function(r){r=+r.val();0<=r&&255>=r&&(this.spectrumColor=k.Color.process(this.getColorFromInputs()),this.setHueCursorPosition(),this.fillSpectrumCanvas(),this.fillOpacityCanvas(),this.spectrumColor=this.setSpectrumCursorPositionByColor(this.spectrumColor),this.hexInput.val(this.spectrumColor.hex),
this.setOpacityGradientAndCursorColor(),this.dispatchColorChangedEvent())},p.prototype.getColorFromInputs=function(){return"rgba("+this.rInput.val()+", "+this.gInput.val()+", "+this.bInput.val()+", "+this.aInput.val()+")"},p.prototype.getCursorCoords=function(r){return{shiftX:r.offset().left+Math.floor(r.width()/2),shiftY:r.offset().top+Math.floor(r.height()/2)}},p.prototype.setOpacityGradientAndCursorColor=function(){var r=+this.aInput.val(),q=+(this.opacityCanvas.height()*r).toFixed(0)-this.opacityCursor.height()/
2,u=this.opacityCanvas.width()/2-this.opacityCursor.width()/2;this.fillOpacityCanvas();this.setCursorColorFromCursorPosition(this.opacityCursor,this.opacityCanvas,u,q,r)},p.prototype.initDragObject=function(r,q,u){if(r.stopPropagation(),r.preventDefault(),1==r.which){var v=r.clientX-u.position().left-Math.floor(q.width()/2),x=r.clientY-u.position().top-Math.floor(q.height()/2);this.dragObject={elements:{cursor:q,canvas:u},downX:r.clientX,downY:r.clientY,shiftX:v,shiftY:x,processShiftX:!0,processShiftY:!0}}},
p.prototype.update=function(){this.options.hexOnly&&this.picker.addClass("colorpicker-default--hex-only");this.options.color||(this.options.color=this.options.defaultColor);k.Color.process(this.options.color).isValid()&&this.processUpdate()},p.prototype.processUpdate=function(){this.spectrumColor=k.Color.process(this.options.color);this.currentColor=k.Color.process(this.options.color);this.aInput.val(this.spectrumColor.source.rgba.a);this.setColorValuesToInputs();this.spectrumCanvas.attr("width",
this.spectrumCanvas.width()).attr("height",this.spectrumCanvas.height());this.spectrumCanvas.get().getContext("2d").clearRect(0,0,this.spectrumCanvas.width(),this.spectrumCanvas.height());this.hueCanvas.attr("width",this.hueCanvas.width()).attr("height",this.hueCanvas.height());this.opacityCanvas.attr("width",this.opacityCanvas.width()).attr("height",this.opacityCanvas.height());this.fillHueCanvas();this.setHueCursorPosition();this.fillSpectrumCanvas();this.fillOpacityCanvas();this.setSpectrumCursorPositionByColor(this.spectrumColor);
this.setOpacityCursorPosition(this.spectrumColor.source.rgba.a)},p.prototype.getColor=function(){var r=this.spectrumColor?k.Color.process(this.getColorFromInputs()):k.Color.process(this.options.color);return this.aInput.val()&&r.setOpacity(this.aInput.val()),r.format(this.options.format)},p.prototype.getColorObject=function(){return this.spectrumColor?k.Color.process(this.getColorFromInputs()):k.Color.process(this.options.color)},p.prototype.setSpectrumCursorPositionByColor=function(r){var q=this.spectrumCanvas.width(),
u=this.spectrumCanvas.height();r=r.format("source").hsv;q=Math.floor(q/100*r.s);u-=Math.floor(u/100*r.v);return q-=this.spectrumCursor.width()/2,u-=this.spectrumCursor.height()/2,this.processCursorPosition(this.spectrumCursor,this.spectrumCanvas,q,u),this.setCursorColorFromCursorPosition(this.spectrumCursor,this.spectrumCanvas,q,u)},p.prototype.setHueCursorPosition=function(){for(var r=this.picker.find(".colorpicker-default__hue-canvas"),q=r.height(),u=r.get().getContext("2d"),v=[],x={},y=0;y<q;y++){var B=
u.getImageData(0,y,1,1).data;B=k.Color.process("rgb("+B[0]+", "+B[1]+", "+B[2]+")").format("hex");v.push(B);x[B]=y}this.options.hueColors.forEach(function(C){v.push(C.color);x[C.color]=Math.ceil(q/100*100*C.offset)});u=m.from(v)(this.currentColor.hex);this.hueColor=k.Color.process(u);u=x[u];y=this.picker.find(".colorpicker-default__hue-cursor");B=Math.ceil(r.width()/2)-Math.ceil(y.width()/2);return this.processCursorPosition(y,r,B,u),this.setCursorColorFromCursorPosition(y,r,B,u)},p.prototype.setOpacityCursorPosition=
function(r){r=+(this.opacityCanvas.height()*r).toFixed(0);r-=this.opacityCursor.height()/2;var q=Math.ceil(this.opacityCanvas.width()/2)-Math.ceil(this.opacityCursor.width()/2);return this.processCursorPosition(this.opacityCursor,this.opacityCanvas,q,r),this.setCursorColorFromCursorPosition(this.opacityCursor,this.opacityCanvas,q,r,+this.aInput.val())},p.prototype.fillSpectrumCanvas=function(){var r=this.spectrumCanvas.width(),q=this.spectrumCanvas.height(),u=this.spectrumCanvas.get().getContext("2d");
u.clearRect(0,0,r,q);var v=u.createLinearGradient(0,0,r,0);v.addColorStop(0,"#fff");v.addColorStop(.01,"#fff");v.addColorStop(.99,this.hueColor.rgb);v.addColorStop(1,this.hueColor.rgb);u.fillStyle=v;u.fillRect(0,0,r,q);v=u.createLinearGradient(0,0,0,q);v.addColorStop(.01,"transparent");v.addColorStop(.99,"#000");v.addColorStop(1,"#000");u.fillStyle=v;u.fillRect(0,0,r,q)},p.prototype.fillHueCanvas=function(){var r=this.hueCanvas.get().getContext("2d"),q=r.createLinearGradient(0,0,0,this.hueCanvas.height());
this.options.hueColors.forEach(function(u){q.addColorStop(u.offset,u.color)});r.fillStyle=q;r.fillRect(0,0,this.hueCanvas.width(),this.hueCanvas.height())},p.prototype.fillOpacityCanvas=function(){var r=this.opacityCanvas.get().getContext("2d");r.clearRect(0,0,this.opacityCanvas.width(),this.opacityCanvas.height());var q=r.createLinearGradient(0,0,0,this.opacityCanvas.height());q.addColorStop(0,"transparent");q.addColorStop(1,this.spectrumColor.rgb);r.fillStyle=q;r.fillRect(0,0,this.opacityCanvas.width(),
this.opacityCanvas.height())},p.prototype.setCursorColorFromCursorPosition=function(r,q,u,v,x){void 0===x&&(x=1);var y=q.get().getContext("2d"),B=Math.ceil(r.width()/2)+u,C=Math.ceil(r.height()/2)+v;(0>=B||0===u)&&(B=0);(0>=C||0===v)&&(C=0);B>=q.width()&&(B=q.width()-1);C>=q.height()&&(C=q.height()-1);q=y.getImageData(B,C,1,1).data;x=k.Color.process("rgba("+q[0]+", "+q[1]+", "+q[2]+", "+x+")");return r.css("background-color",x.rgba),x},p.prototype.dispatchColorChangedEvent=function(){l.TsDom.select(this.cssId).trigger("colorpicker:color-change",
{color:this.getColor().toString()})},p.prototype.processCursorPosition=function(r,q,u,v,x,y){(void 0===x&&(x=!0),void 0===y&&(y=!0),x)?(x=r.width()/2,0>u+x&&u<=-x&&(u=-x),u>q.width()-x&&(u=q.width()-x)):u=Math.ceil(q.width()/2)-Math.ceil(r.width()/2);y?(y=r.height()/2,0>v+y&&v<=-y&&(v=-y),v>q.height()-y&&(v=q.height()-y)):v=Math.ceil(q.height()/2)-Math.ceil(r.height()/2);r.css("left",u+"px");r.css("top",v+"px")},p.prototype.changeAInputValue=function(r){r=+(r/this.opacityCanvas.height()).toFixed(2);
0>=r?r=0:1<=r&&(r=1);this.aInput.val(r)},p.prototype.setColorValuesToInputs=function(){var r=this.spectrumColor,q=r.source.rgba;this.hexInput.val(r.hex);this.rInput.val(q.r);this.gInput.val(q.g);this.bInput.val(q.b)},p.prototype.getPickerCssClassName=function(){return"colorpicker-default"},p.prototype.getDefaultOptions=function(){return{defaultColor:"#f00",hueColors:[{offset:0,color:"#ff0000"},{offset:.17,color:"#ff00ff"},{offset:.33,color:"#0000ff"},{offset:.5,color:"#00ffff"},{offset:.67,color:"#00ff00"},
{offset:.83,color:"#ffff00"},{offset:1,color:"#ff0000"}]}},p}(c.ColorPicker);a.exports=b}])});!function(a){a(function(){var c=a.support;a:{var b=document.createElement("bootstrap");var h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},k;for(k in h)if(void 0!==b.style[k]){b=h[k];break a}b=void 0}c.transition=b&&{end:b}})}(window.jQuery);
!function(a){var c=function(h){a(h).on("click",'[data-dismiss="alert"]',this.close)};c.prototype.close=function(h){function k(){n.trigger("closed").remove()}var l=a(this),m=l.attr("data-target");m||(m=(m=l.attr("href"))&&m.replace(/.*(?=#[^\s]*$)/,""));var n=a(m);h&&h.preventDefault();n.length||(n=l.hasClass("alert")?l:l.parent());n.trigger(h=a.Event("close"));h.isDefaultPrevented()||(n.removeClass("in"),a.support.transition&&n.hasClass("fade")?n.on(a.support.transition.end,k):k())};var b=a.fn.alert;
a.fn.alert=function(h){return this.each(function(){var k=a(this),l=k.data("alert");l||k.data("alert",l=new c(this));"string"==typeof h&&l[h].call(k)})};a.fn.alert.Constructor=c;a.fn.alert.noConflict=function(){a.fn.alert=b;return this};a(document).on("click.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)}(window.jQuery);
!function(a){var c=function(h,k){this.$element=a(h);this.options=a.extend({},a.fn.button.defaults,k)};c.prototype.setState=function(h){var k=this.$element,l=k.data(),m=k.is("input")?"val":"html";h+="Text";l.resetText||k.data("resetText",k[m]());k[m](l[h]||this.options[h]);setTimeout(function(){"loadingText"==h?k.addClass("disabled").attr("disabled","disabled"):k.removeClass("disabled").removeAttr("disabled")},0)};c.prototype.toggle=function(){var h=this.$element.closest('[data-toggle="buttons-radio"]');
h&&h.find(".active").removeClass("active");this.$element.toggleClass("active")};var b=a.fn.button;a.fn.button=function(h){return this.each(function(){var k=a(this),l=k.data("button"),m="object"==typeof h&&h;l||k.data("button",l=new c(this,m));"toggle"==h?l.toggle():h&&l.setState(h)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=c;a.fn.button.noConflict=function(){a.fn.button=b;return this};a(document).on("click.button.data-api","[data-toggle^=button]",function(h){h=a(h.target);
h.hasClass("btn")||(h=h.closest(".btn"));h.button("toggle")})}(window.jQuery);
!function(a){var c=function(h,k){this.$element=a(h);this.$indicators=this.$element.find(".carousel-indicators");this.options=k;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};c.prototype={cycle:function(h){h||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=
this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(h){var k=this.getActiveIndex(),l=this;if(!(h>this.$items.length-1||0>h))return this.sliding?this.$element.one("slid",function(){l.to(h)}):k==h?this.pause().cycle():this.slide(h>k?"next":"prev",a(this.$items[h]))},pause:function(h){h||(this.paused=!0);this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),
this.cycle(!0));clearInterval(this.interval);this.interval=null;return this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(h,k){var l=this.$element.find(".item.active"),m=k||l[h]();k=this.interval;var n="next"==h?"left":"right",p="next"==h?"first":"last",r=this;this.sliding=!0;k&&this.pause();m=m.length?m:this.$element.find(".item")[p]();p=a.Event("slide",{relatedTarget:m[0],direction:n});if(!m.hasClass("active")){this.$indicators.length&&
(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var q=a(r.$indicators.children()[r.getActiveIndex()]);q&&q.addClass("active")}));if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(p);if(p.isDefaultPrevented())return;m.addClass(h);m[0].offsetWidth;l.addClass(n);m.addClass(n);this.$element.one(a.support.transition.end,function(){m.removeClass([h,n].join(" ")).addClass("active");l.removeClass(["active",n].join(" "));r.sliding=!1;
setTimeout(function(){r.$element.trigger("slid")},0)})}else{this.$element.trigger(p);if(p.isDefaultPrevented())return;l.removeClass("active");m.addClass("active");this.sliding=!1;this.$element.trigger("slid")}k&&this.cycle();return this}}};var b=a.fn.carousel;a.fn.carousel=function(h){return this.each(function(){var k=a(this),l=k.data("carousel"),m=a.extend({},a.fn.carousel.defaults,"object"==typeof h&&h),n="string"==typeof h?h:m.slide;l||k.data("carousel",l=new c(this,m));if("number"==typeof h)l.to(h);
else if(n)l[n]();else m.interval&&l.pause().cycle()})};a.fn.carousel.defaults={interval:5E3,pause:"hover"};a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){a.fn.carousel=b;return this};a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(h){var k=a(this),l,m=a(k.attr("data-target")||(l=k.attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,""));l=a.extend({},m.data(),k.data());var n;m.carousel(l);(n=k.attr("data-slide-to"))&&m.data("carousel").pause().to(n).cycle();
h.preventDefault()})}(window.jQuery);
!function(a){var c=function(h,k){this.$element=a(h);this.options=a.extend({},a.fn.collapse.defaults,k);this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var h,k;if(!this.transitioning&&!this.$element.hasClass("in")){var l=this.dimension();var m=a.camelCase(["scroll",l].join("-"));if((h=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&
h.length){if((k=h.data("collapse"))&&k.transitioning)return;h.collapse("hide");k||h.data("collapse",null)}this.$element[l](0);this.transition("addClass",a.Event("show"),"shown");a.support.transition&&this.$element[l](this.$element[0][m])}},hide:function(){if(!this.transitioning&&this.$element.hasClass("in")){var h=this.dimension();this.reset(this.$element[h]());this.transition("removeClass",a.Event("hide"),"hidden");this.$element[h](0)}},reset:function(h){var k=this.dimension();this.$element.removeClass("collapse")[k](h||
"auto")[0].offsetWidth;this.$element[null!==h?"addClass":"removeClass"]("collapse");return this},transition:function(h,k,l){var m=this,n=function(){"show"==k.type&&m.reset();m.transitioning=0;m.$element.trigger(l)};this.$element.trigger(k);k.isDefaultPrevented()||(this.transitioning=1,this.$element[h]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,n):n())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var b=a.fn.collapse;
a.fn.collapse=function(h){return this.each(function(){var k=a(this),l=k.data("collapse"),m=a.extend({},a.fn.collapse.defaults,k.data(),"object"==typeof h&&h);l||k.data("collapse",l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.collapse.defaults={toggle:!0};a.fn.collapse.Constructor=c;a.fn.collapse.noConflict=function(){a.fn.collapse=b;return this};a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(h){var k=a(this),l;h=k.attr("data-target")||h.preventDefault()||(l=k.attr("href"))&&
l.replace(/.*(?=#[^\s]+$)/,"");l=a(h).data("collapse")?"toggle":k.data();k[a(h).hasClass("in")?"addClass":"removeClass"]("collapsed");a(h).collapse(l)})}(window.jQuery);
!function(a){function c(){a(".dropdown-backdrop").remove();a("[data-toggle=dropdown]").each(function(){b(a(this)).removeClass("open")})}function b(l){var m=l.attr("data-target");m||(m=(m=l.attr("href"))&&/#/.test(m)&&m.replace(/.*(?=#[^\s]*$)/,""));(m=m&&a(m))&&m.length||(m=l.parent());return m}var h=function(l){var m=a(l).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){m.parent().removeClass("open")})};h.prototype={constructor:h,toggle:function(l){l=a(this);
if(!l.is(".disabled, :disabled")){var m=b(l);var n=m.hasClass("open");c();if(!n){if("ontouchstart"in document.documentElement)a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",c);m.toggleClass("open")}l.focus();return!1}},keydown:function(l){if(/(38|40|27)/.test(l.keyCode)){var m=a(this);l.preventDefault();l.stopPropagation();if(!m.is(".disabled, :disabled")){var n=b(m);var p=n.hasClass("open");if(!p||p&&27==l.keyCode)return 27==l.which&&n.find("[data-toggle=dropdown]").focus(),
m.click();m=a("[role=menu] li:not(.divider):visible a",n);m.length&&(n=m.index(m.filter(":focus")),38==l.keyCode&&0<n&&n--,40==l.keyCode&&n<m.length-1&&n++,~n||(n=0),m.eq(n).focus())}}}};var k=a.fn.dropdown;a.fn.dropdown=function(l){return this.each(function(){var m=a(this),n=m.data("dropdown");n||m.data("dropdown",n=new h(this));"string"==typeof l&&n[l].call(m)})};a.fn.dropdown.Constructor=h;a.fn.dropdown.noConflict=function(){a.fn.dropdown=k;return this};a(document).on("click.dropdown.data-api",
c).on("click.dropdown.data-api",".dropdown form",function(l){l.stopPropagation()}).on("click.dropdown.data-api","[data-toggle=dropdown]",h.prototype.toggle).on("keydown.dropdown.data-api","[data-toggle=dropdown], [role=menu]",h.prototype.keydown)}(window.jQuery);
!function(a){var c=function(h,k){this.options=k;this.$element=a(h).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};c.prototype={constructor:c,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var h=this,k=a.Event("show");this.$element.trigger(k);this.isShown||k.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var l=a.support.transition&&
h.$element.hasClass("fade");h.$element.parent().length||h.$element.appendTo(document.body);h.$element.show();l&&h.$element[0].offsetWidth;h.$element.addClass("in").attr("aria-hidden",!1);h.enforceFocus();l?h.$element.one(a.support.transition.end,function(){h.$element.focus().trigger("shown")}):h.$element.focus().trigger("shown")}))},hide:function(h){h&&h.preventDefault();h=a.Event("hide");this.$element.trigger(h);this.isShown&&!h.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),
this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var h=this;a(document).on("focusin.modal",function(k){h.$element[0]===k.target||h.$element.has(k.target).length||h.$element.focus()})},escape:function(){var h=this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(k){27==k.which&&h.hide()});else this.isShown||this.$element.off("keyup.dismiss.modal")},
hideWithTransition:function(){var h=this,k=setTimeout(function(){h.$element.off(a.support.transition.end);h.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(k);h.hideModal()})},hideModal:function(){var h=this;this.$element.hide();this.backdrop(function(){h.removeBackdrop();h.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(h){var k=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var l=a.support.transition&&k;this.$backdrop=a('<div class="modal-backdrop '+k+'" />').appendTo(document.body);this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this));l&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");h&&(l?this.$backdrop.one(a.support.transition.end,h):h())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?
this.$backdrop.one(a.support.transition.end,h):h()):h&&h()}};var b=a.fn.modal;a.fn.modal=function(h){return this.each(function(){var k=a(this),l=k.data("modal"),m=a.extend({},a.fn.modal.defaults,k.data(),"object"==typeof h&&h);l||k.data("modal",l=new c(this,m));if("string"==typeof h)l[h]();else m.show&&l.show()})};a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){a.fn.modal=b;return this};a(document).on("click.modal.data-api",'[data-toggle="modal"]',
function(h){var k=a(this),l=k.attr("href"),m=a(k.attr("data-target")||l&&l.replace(/.*(?=#[^\s]+$)/,""));l=m.data("modal")?"toggle":a.extend({remote:!/#/.test(l)&&l},m.data(),k.data());h.preventDefault();m.modal(l).one("hide",function(){k.focus()})})}(window.jQuery);
!function(a){var c=function(h,k){this.init("tooltip",h,k)};c.prototype={constructor:c,init:function(h,k,l){this.type=h;this.$element=a(k);this.options=this.getOptions(l);this.enabled=!0;k=this.options.trigger.split(" ");for(l=k.length;l--;){var m=k[l];if("click"==m)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else"manual"!=m&&(h="hover"==m?"mouseenter":"focus",m="hover"==m?"mouseleave":"blur",this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,
this)),this.$element.on(m+"."+this.type,this.options.selector,a.proxy(this.leave,this)))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(h){h=a.extend({},a.fn[this.type].defaults,this.$element.data(),h);h.delay&&"number"==typeof h.delay&&(h.delay={show:h.delay,hide:h.delay});return h},enter:function(h){var k=a.fn[this.type].defaults,l={};this._options&&a.each(this._options,function(n,p){k[n]!=p&&(l[n]=p)},this);var m=
a(h.currentTarget)[this.type](l).data(this.type);if(!m.options.delay||!m.options.delay.show)return m.show();clearTimeout(this.timeout);m.hoverState="in";this.timeout=setTimeout(function(){"in"==m.hoverState&&m.show()},m.options.delay.show)},leave:function(h){var k=a(h.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!k.options.delay||!k.options.delay.hide)return k.hide();k.hoverState="out";this.timeout=setTimeout(function(){"out"==k.hoverState&&
k.hide()},k.options.delay.hide)},show:function(){var h=a.Event("show");if(this.hasContent()&&this.enabled&&(this.$element.trigger(h),!h.isDefaultPrevented())){var k=this.tip();this.setContent();this.options.animation&&k.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,k[0],this.$element[0]):this.options.placement;k.detach().css({top:0,left:0,display:"block"});this.options.container?k.appendTo(this.options.container):k.insertAfter(this.$element);h=this.getPosition();
var m=k[0].offsetWidth;k=k[0].offsetHeight;switch(l){case "bottom":var n={top:h.top+h.height,left:h.left+h.width/2-m/2};break;case "top":n={top:h.top-k,left:h.left+h.width/2-m/2};break;case "left":n={top:h.top+h.height/2-k/2,left:h.left-m};break;case "right":n={top:h.top+h.height/2-k/2,left:h.left+h.width}}this.applyPlacement(n,l);this.$element.trigger("shown")}},applyPlacement:function(h,k){var l=this.tip(),m=l[0].offsetWidth,n=l[0].offsetHeight;l.offset(h).addClass(k).addClass("in");var p=l[0].offsetWidth;
var r=l[0].offsetHeight;if("top"==k&&r!=n){h.top=h.top+n-r;var q=!0}"bottom"==k||"top"==k?(k=0,0>h.left&&(k=-2*h.left,h.left=0,l.offset(h),p=l[0].offsetWidth),this.replaceArrow(k-m+p,p,"left")):this.replaceArrow(r-n,r,"top");q&&l.offset(h)},replaceArrow:function(h,k,l){this.arrow().css(l,h?50*(1-h/k)+"%":"")},setContent:function(){var h=this.tip(),k=this.getTitle();h.find(".tooltip-inner")[this.options.html?"html":"text"](k);h.removeClass("fade in top bottom left right")},hide:function(){function h(){var m=
setTimeout(function(){k.off(a.support.transition.end).detach()},500);k.one(a.support.transition.end,function(){clearTimeout(m);k.detach()})}var k=this.tip(),l=a.Event("hide");this.$element.trigger(l);if(!l.isDefaultPrevented())return k.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?h():k.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var h=this.$element;(h.attr("title")||"string"!=typeof h.attr("data-original-title"))&&h.attr("data-original-title",h.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var h=this.$element[0];return a.extend({},"function"==typeof h.getBoundingClientRect?h.getBoundingClientRect():{width:h.offsetWidth,height:h.offsetHeight},this.$element.offset())},getTitle:function(){var h=this.$element,k=this.options;return h.attr("data-original-title")||("function"==typeof k.title?k.title.call(h[0]):k.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(h){h=h?a(h.currentTarget)[this.type](this._options).data(this.type):this;h.tip().hasClass("in")?h.hide():h.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var b=a.fn.tooltip;
a.fn.tooltip=function(h){return this.each(function(){var k=a(this),l=k.data("tooltip"),m="object"==typeof h&&h;l||k.data("tooltip",l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};a.fn.tooltip.noConflict=function(){a.fn.tooltip=b;return this}}(window.jQuery);
!function(a){var c=function(h,k){this.init("popover",h,k)};c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:c,setContent:function(){var h=this.tip(),k=this.getTitle(),l=this.getContent();h.find(".popover-title")[this.options.html?"html":"text"](k);h.find(".popover-content")[this.options.html?"html":"text"](l);h.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var h=this.$element,k=this.options;
return("function"==typeof k.content?k.content.call(h[0]):k.content)||h.attr("data-content")},tip:function(){this.$tip||(this.$tip=a(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var b=a.fn.popover;a.fn.popover=function(h){return this.each(function(){var k=a(this),l=k.data("popover"),m="object"==typeof h&&h;l||k.data("popover",l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.popover.Constructor=c;a.fn.popover.defaults=
a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});a.fn.popover.noConflict=function(){a.fn.popover=b;return this}}(window.jQuery);
!function(a){function c(h,k){var l=a.proxy(this.process,this),m=a(h).is("body")?a(window):a(h),n;this.options=a.extend({},a.fn.scrollspy.defaults,k);this.$scrollElement=m.on("scroll.scroll-spy.data-api",l);this.selector=(this.options.target||(n=a(h).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=a("body");this.refresh();this.process()}c.prototype={constructor:c,refresh:function(){var h=this;this.offsets=a([]);this.targets=a([]);this.$body.find(this.selector).map(function(){var k=
a(this);k=k.data("target")||k.attr("href");var l=/^#\w/.test(k)&&a(k);return l&&l.length&&[[l.position().top+(!a.isWindow(h.$scrollElement.get(0))&&h.$scrollElement.scrollTop()),k]]||null}).sort(function(k,l){return k[0]-l[0]}).each(function(){h.offsets.push(this[0]);h.targets.push(this[1])})},process:function(){var h=this.$scrollElement.scrollTop()+this.options.offset,k=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),l=this.offsets,m=this.targets,n=
this.activeTarget,p;if(h>=k)return n!=(p=m.last()[0])&&this.activate(p);for(p=l.length;p--;)n!=m[p]&&h>=l[p]&&(!l[p+1]||h<=l[p+1])&&this.activate(m[p])},activate:function(h){this.activeTarget=h;a(this.selector).parent(".active").removeClass("active");h=a(this.selector+'[data-target="'+h+'"],'+this.selector+'[href="'+h+'"]').parent("li").addClass("active");h.parent(".dropdown-menu").length&&(h=h.closest("li.dropdown").addClass("active"));h.trigger("activate")}};var b=a.fn.scrollspy;a.fn.scrollspy=
function(h){return this.each(function(){var k=a(this),l=k.data("scrollspy"),m="object"==typeof h&&h;l||k.data("scrollspy",l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.scrollspy.Constructor=c;a.fn.scrollspy.defaults={offset:10};a.fn.scrollspy.noConflict=function(){a.fn.scrollspy=b;return this};a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var h=a(this);h.scrollspy(h.data())})})}(window.jQuery);
!function(a){var c=function(h){this.element=a(h)};c.prototype={constructor:c,show:function(){var h=this.element,k=h.closest("ul:not(.dropdown-menu)"),l=h.attr("data-target");l||(l=(l=h.attr("href"))&&l.replace(/.*(?=#[^\s]*$)/,""));if(!h.parent("li").hasClass("active")){var m=k.find(".active:last a")[0];var n=a.Event("show",{relatedTarget:m});h.trigger(n);n.isDefaultPrevented()||(l=a(l),this.activate(h.parent("li"),k),this.activate(l,l.parent(),function(){h.trigger({type:"shown",relatedTarget:m})}))}},
activate:function(h,k,l){function m(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");h.addClass("active");p?(h[0].offsetWidth,h.addClass("in")):h.removeClass("fade");h.parent(".dropdown-menu")&&h.closest("li.dropdown").addClass("active");l&&l()}var n=k.find("> .active"),p=l&&a.support.transition&&n.hasClass("fade");p?n.one(a.support.transition.end,m):m();n.removeClass("in")}};var b=a.fn.tab;a.fn.tab=function(h){return this.each(function(){var k=a(this),l=k.data("tab");
l||k.data("tab",l=new c(this));if("string"==typeof h)l[h]()})};a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){a.fn.tab=b;return this};a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(h){h.preventDefault();a(this).tab("show")})}(window.jQuery);
!function(a){var c=function(h,k){this.$element=a(h);this.options=a.extend({},a.fn.typeahead.defaults,k);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=a(this.options.menu);this.shown=!1;this.listen()};c.prototype={constructor:c,select:function(){var h=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(h)).change();
return this.hide()},updater:function(h){return h},show:function(){var h=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:h.top+h.height,left:h.left}).show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(h){this.query=this.$element.val();return!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(h=a.isFunction(this.source)?this.source(this.query,
a.proxy(this.process,this)):this.source)?this.process(h):this},process:function(h){var k=this;h=a.grep(h,function(l){return k.matcher(l)});h=this.sorter(h);return h.length?this.render(h.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(h){return~h.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(h){for(var k=[],l=[],m=[],n;n=h.shift();)n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?l.push(n):m.push(n):k.push(n);return k.concat(l,
m)},highlighter:function(h){var k=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return h.replace(new RegExp("("+k+")","ig"),function(l,m){return"<strong>"+m+"</strong>"})},render:function(h){var k=this;h=a(h).map(function(l,m){l=a(k.options.item).attr("data-value",m);l.find("a").html(k.highlighter(m));return l[0]});h.first().addClass("active");this.$menu.html(h);return this},next:function(h){h=this.$menu.find(".active").removeClass("active").next();h.length||(h=a(this.$menu.find("li")[0]));
h.addClass("active")},prev:function(h){h=this.$menu.find(".active").removeClass("active").prev();h.length||(h=this.$menu.find("li").last());h.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",a.proxy(this.keydown,this));this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",
a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(h){var k=h in this.$element;k||(this.$element.setAttribute(h,"return;"),k="function"===typeof this.$element[h]);return k},move:function(h){if(this.shown){switch(h.keyCode){case 9:case 13:case 27:h.preventDefault();break;case 38:h.preventDefault();this.prev();break;case 40:h.preventDefault(),this.next()}h.stopPropagation()}},keydown:function(h){this.suppressKeyPressRepeat=~a.inArray(h.keyCode,
[40,38,9,13,27]);this.move(h)},keypress:function(h){this.suppressKeyPressRepeat||this.move(h)},keyup:function(h){switch(h.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}h.stopPropagation();h.preventDefault()},focus:function(h){this.focused=!0},blur:function(h){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(h){h.stopPropagation();h.preventDefault();
this.select();this.$element.focus()},mouseenter:function(h){this.mousedover=!0;this.$menu.find(".active").removeClass("active");a(h.currentTarget).addClass("active")},mouseleave:function(h){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};var b=a.fn.typeahead;a.fn.typeahead=function(h){return this.each(function(){var k=a(this),l=k.data("typeahead"),m="object"==typeof h&&h;l||k.data("typeahead",l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',
item:'<li><a href="#"></a></li>',minLength:1};a.fn.typeahead.Constructor=c;a.fn.typeahead.noConflict=function(){a.fn.typeahead=b;return this};a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(h){h=a(this);h.data("typeahead")||h.typeahead(h.data())})}(window.jQuery);
!function(a){var c=function(h,k){this.options=a.extend({},a.fn.affix.defaults,k);this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this));this.$element=a(h);this.checkPosition()};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var h=a(document).height(),k=this.$window.scrollTop(),l=this.$element.offset(),m=this.options.offset,n=m.bottom,p=m.top;"object"!=
typeof m&&(n=p=m);"function"==typeof p&&(p=m.top());"function"==typeof n&&(n=m.bottom());h=null!=this.unpin&&k+this.unpin<=l.top?!1:null!=n&&l.top+this.$element.height()>=h-n?"bottom":null!=p&&k<=p?"top":!1;this.affixed!==h&&(this.affixed=h,this.unpin="bottom"==h?l.top-k:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(h?"-"+h:"")))}};var b=a.fn.affix;a.fn.affix=function(h){return this.each(function(){var k=a(this),l=k.data("affix"),m="object"==typeof h&&h;l||k.data("affix",
l=new c(this,m));if("string"==typeof h)l[h]()})};a.fn.affix.Constructor=c;a.fn.affix.defaults={offset:0};a.fn.affix.noConflict=function(){a.fn.affix=b;return this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var h=a(this),k=h.data();k.offset=k.offset||{};k.offsetBottom&&(k.offset.bottom=k.offsetBottom);k.offsetTop&&(k.offset.top=k.offsetTop);h.affix(k)})})}(window.jQuery);/*
 jQuery Form Plugin
 version: 3.24 (26-DEC-2012)
 @requires jQuery v1.5 or later

 Examples and documentation at: http://malsup.com/jquery/form/
 Project repository: https://github.com/malsup/form
 Dual licensed under the MIT and GPL licenses:
    http://malsup.github.com/mit-license.txt
    http://malsup.github.com/gpl-license-v2.txt
*/
(function(a){function c(m){var n=m.data;m.isDefaultPrevented()||(m.preventDefault(),a(this).ajaxSubmit(n))}function b(m){var n=m.target,p=a(n);if(!p.is("[type=submit],[type=image]")){n=p.closest("[type=submit]");if(0===n.length)return;n=n[0]}var r=this;r.clk=n;"image"==n.type&&(void 0!==m.offsetX?(r.clk_x=m.offsetX,r.clk_y=m.offsetY):"function"==typeof a.fn.offset?(p=p.offset(),r.clk_x=m.pageX-p.left,r.clk_y=m.pageY-p.top):(r.clk_x=m.pageX-n.offsetLeft,r.clk_y=m.pageY-n.offsetTop));setTimeout(function(){r.clk=
r.clk_x=r.clk_y=null},100)}function h(){if(a.fn.ajaxSubmit.debug){var m="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(m):window.opera&&window.opera.postError&&window.opera.postError(m)}}var k=void 0!==a("<input type='file'/>").get(0).files;var l=void 0!==window.FormData;a.fn.ajaxSubmit=function(m){function n(G){G=a.param(G).split("&");var K=G.length,J={},O;for(O=0;O<K;O++){G[O]=G[O].replace(/\+/g," ");var T=G[O].split("=");J[decodeURIComponent(T[0])]=
decodeURIComponent(T[1])}return J}function p(G){for(var K=new FormData,J=0;J<G.length;J++)K.append(G[J].name,G[J].value);if(m.extraData){G=n(m.extraData);for(var O in G)G.hasOwnProperty(O)&&K.append(O,G[O])}m.data=null;O=a.extend(!0,{},a.ajaxSettings,m,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});m.uploadProgress&&(O.xhr=function(){var Q=jQuery.ajaxSettings.xhr();Q.upload&&(Q.upload.onprogress=function(M){var W=0,da=M.loaded||M.position,ma=M.total;M.lengthComputable&&(W=Math.ceil(da/ma*
100));m.uploadProgress(M,da,ma,W)});return Q});O.data=null;var T=O.beforeSend;O.beforeSend=function(Q,M){M.data=K;T&&T.call(this,Q,M)};return a.ajax(O)}function r(G){function K(){function qa(){try{var A=(Da.contentWindow?Da.contentWindow.document:Da.contentDocument?Da.contentDocument:Da.document).readyState;h("state = "+A);A&&"uninitialized"==A.toLowerCase()&&setTimeout(qa,50)}catch(va){h("Server abort: ",va," (",va.name,")"),J(2),W&&clearTimeout(W),W=void 0}}var R=q.attr("target"),Z=q.attr("action");
O.setAttribute("target",xa);u||O.setAttribute("method","POST");Z!=fa.url&&O.setAttribute("action",fa.url);fa.skipEncodingOverride||u&&!/post/i.test(u)||q.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});fa.timeout&&(W=setTimeout(function(){M=!0;J(1)},fa.timeout));var Y=[];try{if(fa.extraData)for(var ha in fa.extraData)fa.extraData.hasOwnProperty(ha)&&(a.isPlainObject(fa.extraData[ha])&&fa.extraData[ha].hasOwnProperty("name")&&fa.extraData[ha].hasOwnProperty("value")?Y.push(a('<input type="hidden" name="'+
fa.extraData[ha].name+'">').val(fa.extraData[ha].value).appendTo(O)[0]):Y.push(a('<input type="hidden" name="'+ha+'">').val(fa.extraData[ha]).appendTo(O)[0]));fa.iframeTarget||(Ea.appendTo("body"),Da.attachEvent?Da.attachEvent("onload",J):Da.addEventListener("load",J,!1));setTimeout(qa,15);O.submit()}finally{O.setAttribute("action",Z),R?O.setAttribute("target",R):q.removeAttr("target"),a(Y).remove()}}function J(qa){if(!Fa.aborted&&!P){try{X=Da.contentWindow?Da.contentWindow.document:Da.contentDocument?
Da.contentDocument:Da.document}catch(wa){h("cannot access response document: ",wa),qa=2}if(1===qa&&Fa)Fa.abort("timeout"),ma.reject(Fa,"timeout");else if(2==qa&&Fa)Fa.abort("server abort"),ma.reject(Fa,"error","server abort");else if(X&&X.location.href!=fa.iframeSrc||M){Da.detachEvent?Da.detachEvent("onload",J):Da.removeEventListener("load",J,!1);qa="success";var R;try{if(M)throw"timeout";var Z="xml"==fa.dataType||X.XMLDocument||a.isXMLDoc(X);h("isXml="+Z);if(!Z&&window.opera&&(null===X.body||!X.body.innerHTML)&&
--ja){h("requeing onLoad callback, DOM not available");setTimeout(J,250);return}var Y=X.body?X.body:X.documentElement;Fa.responseText=Y?Y.innerHTML:null;Fa.responseXML=X.XMLDocument?X.XMLDocument:X;Z&&(fa.dataType="xml");Fa.getResponseHeader=function(wa){return{"content-type":fa.dataType}[wa]};Y&&(Fa.status=Number(Y.getAttribute("status"))||Fa.status,Fa.statusText=Y.getAttribute("statusText")||Fa.statusText);var ha=(fa.dataType||"").toLowerCase(),A=/(json|script|text)/.test(ha);if(A||fa.textarea){var va=
X.getElementsByTagName("textarea")[0];if(va)Fa.responseText=va.value,Fa.status=Number(va.getAttribute("status"))||Fa.status,Fa.statusText=va.getAttribute("statusText")||Fa.statusText;else if(A){var ra=X.getElementsByTagName("pre")[0],na=X.getElementsByTagName("body")[0];ra?Fa.responseText=ra.textContent?ra.textContent:ra.innerText:na&&(Fa.responseText=na.textContent?na.textContent:na.innerText)}}else"xml"==ha&&!Fa.responseXML&&Fa.responseText&&(Fa.responseXML=ca(Fa.responseText));try{ta=sa(Fa,ha,
fa)}catch(wa){qa="parsererror",Fa.error=R=wa||qa}}catch(wa){h("error caught: ",wa),qa="error",Fa.error=R=wa||qa}Fa.aborted&&(h("upload aborted"),qa=null);Fa.status&&(qa=200<=Fa.status&&300>Fa.status||304===Fa.status?"success":"error");"success"===qa?(fa.success&&fa.success.call(fa.context,ta,"success",Fa),ma.resolve(Fa.responseText,"success",Fa),Q&&a.event.trigger("ajaxSuccess",[Fa,fa])):qa&&(void 0===R&&(R=Fa.statusText),fa.error&&fa.error.call(fa.context,Fa,qa,R),ma.reject(Fa,"error",R),Q&&a.event.trigger("ajaxError",
[Fa,fa,R]));Q&&a.event.trigger("ajaxComplete",[Fa,fa]);Q&&!--a.active&&a.event.trigger("ajaxStop");fa.complete&&fa.complete.call(fa.context,Fa,qa);P=!0;fa.timeout&&clearTimeout(W);setTimeout(function(){fa.iframeTarget||Ea.remove();Fa.responseXML=null},100)}}}var O=q[0],T,Q,M,W;var da=!!a.fn.prop;var ma=a.Deferred();if(a("[name=submit],[id=submit]",O).length)return alert('Error: Form elements must not have name or id of "submit".'),ma.reject(),ma;if(G)for(T=0;T<y.length;T++)G=a(y[T]),da?G.prop("disabled",
!1):G.removeAttr("disabled");var fa=a.extend(!0,{},a.ajaxSettings,m);fa.context=fa.context||fa;var xa="jqFormIO"+(new Date).getTime();if(fa.iframeTarget){var Ea=a(fa.iframeTarget);(G=Ea.attr("name"))?xa=G:Ea.attr("name",xa)}else Ea=a('<iframe name="'+xa+'" src="'+fa.iframeSrc+'" />'),Ea.css({position:"absolute",top:"-1000px",left:"-1000px"});var Da=Ea[0];var Fa={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},
setRequestHeader:function(){},abort:function(qa){var R="timeout"===qa?"timeout":"aborted";h("aborting upload... "+R);this.aborted=1;try{Da.contentWindow.document.execCommand&&Da.contentWindow.document.execCommand("Stop")}catch(Z){}Ea.attr("src",fa.iframeSrc);Fa.error=R;fa.error&&fa.error.call(fa.context,Fa,R,qa);Q&&a.event.trigger("ajaxError",[Fa,fa,R]);fa.complete&&fa.complete.call(fa.context,Fa,R)}};(Q=fa.global)&&0===a.active++&&a.event.trigger("ajaxStart");Q&&a.event.trigger("ajaxSend",[Fa,fa]);
if(fa.beforeSend&&!1===fa.beforeSend.call(fa.context,Fa,fa))return fa.global&&a.active--,ma.reject(),ma;if(Fa.aborted)return ma.reject(),ma;(da=O.clk)&&(G=da.name)&&!da.disabled&&(fa.extraData=fa.extraData||{},fa.extraData[G]=da.value,"image"==da.type&&(fa.extraData[G+".x"]=O.clk_x,fa.extraData[G+".y"]=O.clk_y));da=a("meta[name=csrf-token]").attr("content");(G=a("meta[name=csrf-param]").attr("content"))&&da&&(fa.extraData=fa.extraData||{},fa.extraData[G]=da);fa.forceSync?K():setTimeout(K,10);var ta,
X,ja=50,P,ca=a.parseXML||function(qa,R){window.ActiveXObject?(R=new ActiveXObject("Microsoft.XMLDOM"),R.async="false",R.loadXML(qa)):R=(new DOMParser).parseFromString(qa,"text/xml");return R&&R.documentElement&&"parsererror"!=R.documentElement.nodeName?R:null},ea=a.parseJSON||function(qa){return window.eval("("+qa+")")},sa=function(qa,R,Z){var Y=qa.getResponseHeader("content-type")||"",ha="xml"===R||!R&&0<=Y.indexOf("xml");qa=ha?qa.responseXML:qa.responseText;ha&&"parsererror"===qa.documentElement.nodeName&&
a.error&&a.error("parsererror");Z&&Z.dataFilter&&(qa=Z.dataFilter(qa,R));"string"===typeof qa&&("json"===R||!R&&0<=Y.indexOf("json")?qa=ea(qa):("script"===R||!R&&0<=Y.indexOf("javascript"))&&a.globalEval(qa));return qa};return ma}if(!this.length)return h("ajaxSubmit: skipping submit process - no element selected"),this;var q=this;"function"==typeof m&&(m={success:m});var u=this.attr("method");var v=this.attr("action");(v=(v="string"===typeof v?a.trim(v):"")||window.location.href||"")&&(v=(v.match(/^([^#]+)/)||
[])[1]);m=a.extend(!0,{url:v,success:a.ajaxSettings.success,type:u||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},m);v={};this.trigger("form-pre-serialize",[this,m,v]);if(v.veto)return h("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(m.beforeSerialize&&!1===m.beforeSerialize(this,m))return h("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var x=m.traditional;void 0===x&&(x=a.ajaxSettings.traditional);var y=[],B=this.formToArray(m.semantic,
y);if(m.data){m.extraData=m.data;var C=a.param(m.data,x)}if(m.beforeSubmit&&!1===m.beforeSubmit(B,this,m))return h("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[B,this,m,v]);if(v.veto)return h("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;v=a.param(B,x);C&&(v=v?v+"&"+C:C);"GET"==m.type.toUpperCase()?(m.url+=(0<=m.url.indexOf("?")?"&":"?")+v,m.data=null):m.data=v;var H=[];m.resetForm&&H.push(function(){q.resetForm()});m.clearForm&&
H.push(function(){q.clearForm(m.includeHidden)});if(!m.dataType&&m.target){var F=m.success||function(){};H.push(function(G){var K=m.replaceTarget?"replaceWith":"html";a(m.target)[K](G).each(F,arguments)})}else m.success&&H.push(m.success);m.success=function(G,K,J){for(var O=m.context||this,T=0,Q=H.length;T<Q;T++)H[T].apply(O,[G,K,J||q,q])};C=0<a('input[type=file]:enabled[value!=""]',this).length;v="multipart/form-data"==q.attr("enctype")||"multipart/form-data"==q.attr("encoding");x=k&&l;h("fileAPI :"+
x);var E;!1!==m.iframe&&(m.iframe||(C||v)&&!x)?m.closeKeepAlive?a.get(m.closeKeepAlive,function(){E=r(B)}):E=r(B):E=(C||v)&&x?p(B):a.ajax(m);q.removeData("jqxhr").data("jqxhr",E);for(C=0;C<y.length;C++)y[C]=null;this.trigger("form-submit-notify",[this,m]);return this};a.fn.ajaxForm=function(m){m=m||{};m.delegation=m.delegation&&a.isFunction(a.fn.on);if(!m.delegation&&0===this.length){var n=this.selector,p=this.context;if(!a.isReady&&n)return h("DOM not ready, queuing ajaxForm"),a(function(){a(n,p).ajaxForm(m)}),
this;h("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return m.delegation?(a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,b).on("submit.form-plugin",this.selector,m,c).on("click.form-plugin",this.selector,m,b),this):this.ajaxFormUnbind().bind("submit.form-plugin",m,c).bind("click.form-plugin",m,b)};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(m,
n){var p=[];if(0===this.length)return p;var r=this[0],q=m?r.getElementsByTagName("*"):r.elements;if(!q)return p;var u,v,x;var y=0;for(x=q.length;y<x;y++){var B=q[y];if(u=B.name)if(m&&r.clk&&"image"==B.type)B.disabled||r.clk!=B||(p.push({name:u,value:a(B).val(),type:B.type}),p.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));else if((v=a.fieldValue(B,!0))&&v.constructor==Array){n&&n.push(B);var C=0;for(B=v.length;C<B;C++)p.push({name:u,value:v[C]})}else if(k&&"file"==B.type&&!B.disabled)if(n&&
n.push(B),v=B.files,v.length)for(C=0;C<v.length;C++)p.push({name:u,value:v[C],type:B.type});else p.push({name:u,value:"",type:B.type});else null!==v&&"undefined"!=typeof v&&(n&&n.push(B),p.push({name:u,value:v,type:B.type,required:B.required}))}!m&&r.clk&&(m=a(r.clk),n=m[0],(u=n.name)&&!n.disabled&&"image"==n.type&&(p.push({name:u,value:m.val()}),p.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y})));return p};a.fn.formSerialize=function(m){return a.param(this.formToArray(m))};a.fn.fieldSerialize=
function(m){var n=[];this.each(function(){var p=this.name;if(p){var r=a.fieldValue(this,m);if(r&&r.constructor==Array)for(var q=0,u=r.length;q<u;q++)n.push({name:p,value:r[q]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}});return a.param(n)};a.fn.fieldValue=function(m){for(var n=[],p=0,r=this.length;p<r;p++){var q=a.fieldValue(this[p],m);null===q||"undefined"==typeof q||q.constructor==Array&&!q.length||(q.constructor==Array?a.merge(n,q):n.push(q))}return n};a.fieldValue=
function(m,n){var p=m.name,r=m.type,q=m.tagName.toLowerCase();void 0===n&&(n=!0);if(n&&(!p||m.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!m.checked||("submit"==r||"image"==r)&&m.form&&m.form.clk!=m||"select"==q&&-1==m.selectedIndex))return null;if("select"==q){q=m.selectedIndex;if(0>q)return null;n=[];m=m.options;p=(r="select-one"==r)?q+1:m.length;for(q=r?q:0;q<p;q++){var u=m[q];if(u.selected){var v=u.value;v||=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:
u.value;if(r)return v;n.push(v)}}return n}return a(m).val()};a.fn.clearForm=function(m){return this.each(function(){a("input,select,textarea",this).clearFields(m)})};a.fn.clearFields=a.fn.clearInputs=function(m){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var p=this.type,r=this.tagName.toLowerCase();n.test(p)||"textarea"==r?this.value="":"checkbox"==p||"radio"==p?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==
p?a.browser.msie?a(this).replaceWith(a(this).clone()):a(this).val(""):m&&(!0===m&&/hidden/.test(p)||"string"==typeof m&&a(this).is(m))&&(this.value="")})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(m){void 0===m&&(m=!0);return this.each(function(){this.disabled=!m})};a.fn.selected=function(m){void 0===m&&(m=!0);return this.each(function(){var n=this.type;"checkbox"==
n||"radio"==n?this.checked=m:"option"==this.tagName.toLowerCase()&&(n=a(this).parent("select"),m&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=m)})};a.fn.ajaxSubmit.debug=!1})(jQuery);(function(a,c){var b=a(c);a.fn.lazyload=function(h){function k(){var p=0;l.each(function(){var r=a(this);if(!(n.skip_invisible&&!r.is(":visible")||a.abovethetop(this,n)||a.leftofbegin(this,n)))if(!a.belowthefold(this,n)&&!a.rightoffold(this,n))r.trigger("appear");else if(++p>n.failure_limit)return!1})}var l=this,m,n={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:c,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return h&&(void 0!==h.failurelimit&&(h.failure_limit=
h.failurelimit,delete h.failurelimit),void 0!==h.effectspeed&&(h.effect_speed=h.effectspeed,delete h.effectspeed),a.extend(n,h)),m=void 0===n.container||n.container===c?b:a(n.container),0===n.event.indexOf("scroll")&&m.bind(n.event,function(p){return k()}),this.each(function(){var p=this,r=a(p);p.loaded=!1;r.one("appear",function(){this.loaded||(n.appear&&n.appear.call(p,l.length,n),a("<img />").bind("load",function(){r.hide().attr("src",r.data(n.data_attribute)).removeAttr("data-"+n.data_attribute).attr("srcset",
r.data(n.data_attribute+"2x")+" 2x").removeAttr("data-"+n.data_attribute+"2x")[n.effect](n.effect_speed);p.loaded=!0;var q=a.grep(l,function(u){return!u.loaded});l=a(q);n.load&&n.load.call(p,l.length,n)}).attr("src",r.data(n.data_attribute)))});0!==n.event.indexOf("scroll")&&r.bind(n.event,function(q){p.loaded||r.trigger("appear")})}),b.bind("resize",function(p){k()}),k(),this};a.belowthefold=function(h,k){var l;return void 0===k.container||k.container===c?l=b.height()+b.scrollTop():l=a(k.container).offset().top+
a(k.container).height(),l<=a(h).offset().top-k.threshold};a.rightoffold=function(h,k){var l;return void 0===k.container||k.container===c?l=b.width()+b.scrollLeft():l=a(k.container).offset().left+a(k.container).width(),l<=a(h).offset().left-k.threshold};a.abovethetop=function(h,k){var l;return void 0===k.container||k.container===c?l=b.scrollTop():l=a(k.container).offset().top,l>=a(h).offset().top+k.threshold+a(h).height()};a.leftofbegin=function(h,k){var l;return void 0===k.container||k.container===
c?l=b.scrollLeft():l=a(k.container).offset().left,l>=a(h).offset().left+k.threshold+a(h).width()};a.inviewport=function(h,k){return!a.rightofscreen(h,k)&&!a.leftofscreen(h,k)&&!a.belowthefold(h,k)&&!a.abovethetop(h,k)};a.extend(a.expr[":"],{"below-the-fold":function(h){return a.belowthefold(h,{threshold:0})},"above-the-top":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-screen":function(h){return a.rightoffold(h,{threshold:0})},"left-of-screen":function(h){return!a.rightoffold(h,{threshold:0})},
"in-viewport":function(h){return!a.inviewport(h,{threshold:0})},"above-the-fold":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-fold":function(h){return a.rightoffold(h,{threshold:0})},"left-of-fold":function(h){return!a.rightoffold(h,{threshold:0})}})})(jQuery,window);/*
 nanoScrollerJS - v0.8.7 - 2015
 http://jamesflorentino.github.com/nanoScrollerJS/
 Copyright (c) 2015 James Florentino; Licensed MIT */
(function(a){return"function"===typeof define&&define.amd?define(["jquery"],function(c){return a(c,window,document)}):"object"===typeof exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)})(function(a,c,b){var h={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,
sliderMaxHeight:null,documentContext:null,windowContext:null};var k="Microsoft Internet Explorer"===c.navigator.appName&&/msie 7./i.test(c.navigator.appVersion)&&c.ActiveXObject;var l=null;var m=c.requestAnimationFrame;var n=c.cancelAnimationFrame;var p=b.createElement("div").style;var r=function(){var B,C;var H=["t","webkitT","MozT","msT","OT"];var F=B=0;for(C=H.length;B<C;F=++B){var E=H[F]+"ransform";if(E in p)return H[F].substr(0,H[F].length-1)}return!1}();var q=function(B){return!1===r?!1:""===
r?B:r+B.charAt(0).toUpperCase()+B.substr(1)}("transform");var u=!1!==q;var v=function(){var B=b.createElement("div");var C=B.style;C.position="absolute";C.width="100px";C.height="100px";C.overflow="scroll";C.top="-9999px";b.body.appendChild(B);C=B.offsetWidth-B.clientWidth;b.body.removeChild(B);return C};var x=function(){var B=c.navigator.userAgent;var C=/(?=.+Mac OS X)(?=.+Firefox)/.test(B);if(!C)return!1;(B=/Firefox\/\d{2}\./.exec(B))&&(B=B[0].replace(/\D+/g,""));return C&&23<+B};var y=function(){function B(C,
H){this.el=C;this.options=H;l||=v();this.$el=a(this.el);this.doc=a(this.options.documentContext||b);this.win=a(this.options.windowContext||c);this.body=this.doc.find("body");this.$content=this.$el.children("."+this.options.contentClass);this.$content.attr("tabindex",this.options.tabIndex||0);this.content=this.$content[0];this.previousPosition=0;this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate();this.createEvents();this.addEvents();this.reset()}
B.prototype.preventScrolling=function(C,H){this.isActive&&("DOMMouseScroll"===C.type?("down"===H&&0<C.originalEvent.detail||"up"===H&&0>C.originalEvent.detail)&&C.preventDefault():"mousewheel"===C.type&&C.originalEvent&&C.originalEvent.wheelDelta&&("down"===H&&0>C.originalEvent.wheelDelta||"up"===H&&0<C.originalEvent.wheelDelta)&&C.preventDefault())};B.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});this.isActive=this.iOSNativeScrolling=!0};B.prototype.updateScrollValues=
function(){var C=this.content;this.maxScrollTop=C.scrollHeight-C.clientHeight;this.prevScrollTop=this.contentScrollTop||0;this.contentScrollTop=C.scrollTop;C=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same";this.previousPosition=this.contentScrollTop;"same"!==C&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:C});this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=
0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)};B.prototype.setOnScrollStyles=function(){if(u){var C={};C[q]="translate(0, "+this.sliderTop+"px)"}else C={top:this.sliderTop};m?(n&&this.scrollRAF&&n(this.scrollRAF),this.scrollRAF=m(function(H){return function(){H.scrollRAF=null;return H.slider.css(C)}}(this))):this.slider.css(C)};B.prototype.createEvents=function(){this.events={down:function(C){return function(H){C.isBeingDragged=!0;C.offsetY=H.pageY-C.slider.offset().top;
C.slider.is(H.target)||(C.offsetY=0);C.pane.addClass(C.options.activeClass);C.doc.bind("mousemove",C.events.drag).bind("mouseup",C.events.up);C.body.bind("mouseenter",C.events.enter);return!1}}(this),drag:function(C){return function(H){C.sliderY=H.pageY-C.$el.offset().top-C.paneTop-(C.offsetY||.5*C.sliderHeight);C.scroll();C.contentScrollTop>=C.maxScrollTop&&C.prevScrollTop!==C.maxScrollTop?C.$el.trigger("scrollend"):0===C.contentScrollTop&&0!==C.prevScrollTop&&C.$el.trigger("scrolltop");return!1}}(this),
up:function(C){return function(H){C.isBeingDragged=!1;C.pane.removeClass(C.options.activeClass);C.doc.unbind("mousemove",C.events.drag).unbind("mouseup",C.events.up);C.body.unbind("mouseenter",C.events.enter);return!1}}(this),resize:function(C){return function(H){C.reset()}}(this),panedown:function(C){return function(H){C.sliderY=(H.offsetY||H.originalEvent.layerY)-.5*C.sliderHeight;C.scroll();C.events.down(H);return!1}}(this),scroll:function(C){return function(H){C.updateScrollValues();C.isBeingDragged||
(C.iOSNativeScrolling||(C.sliderY=C.sliderTop,C.setOnScrollStyles()),null!=H&&(C.contentScrollTop>=C.maxScrollTop?(C.options.preventPageScrolling&&C.preventScrolling(H,"down"),C.prevScrollTop!==C.maxScrollTop&&C.$el.trigger("scrollend")):0===C.contentScrollTop&&(C.options.preventPageScrolling&&C.preventScrolling(H,"up"),0!==C.prevScrollTop&&C.$el.trigger("scrolltop"))))}}(this),wheel:function(C){return function(H){if(null!=H){if(H=H.delta||H.wheelDelta||H.originalEvent&&H.originalEvent.wheelDelta||
-H.detail||H.originalEvent&&-H.originalEvent.detail)C.sliderY+=-H/3;C.scroll();return!1}}}(this),enter:function(C){return function(H){var F;if(C.isBeingDragged&&1!==(H.buttons||H.which))return(F=C.events).up.apply(F,arguments)}}(this)}};B.prototype.addEvents=function(){this.removeEvents();var C=this.events;this.options.disableResize||this.win.bind("resize",C.resize);this.iOSNativeScrolling||(this.slider.bind("mousedown",C.down),this.pane.bind("mousedown",C.panedown).bind("mousewheel DOMMouseScroll",
C.wheel));this.$content.bind("scroll mousewheel DOMMouseScroll touchmove",C.scroll)};B.prototype.removeEvents=function(){var C=this.events;this.win.unbind("resize",C.resize);this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind());this.$content.unbind("scroll mousewheel DOMMouseScroll touchmove",C.scroll)};B.prototype.generate=function(){var C;var H=this.options;var F=H.paneClass;var E=H.sliderClass;(C=this.$el.children("."+F)).length||C.children("."+E).length||this.$el.append('<div class="'+
F+'"><div class="'+E+'" /></div>');this.pane=this.$el.children("."+F);this.slider=this.pane.find("."+E);if(0===l&&x()){var G=c.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,"");G={right:-14,paddingRight:+G+14}}else l&&(G={right:-l},this.$el.addClass(H.enabledClass));null!=G&&this.$content.css(G);return this};B.prototype.restore=function(){this.stopped=!1;this.iOSNativeScrolling||this.pane.show();this.addEvents()};B.prototype.reset=function(){if(this.iOSNativeScrolling)this.contentHeight=
this.content.scrollHeight;else{this.$el.find("."+this.options.paneClass).length||this.generate().stop();this.stopped&&this.restore();var C=this.content;var H=C.style;var F=H.overflowY;k&&this.$content.css({height:this.$content.height()});var E=C.scrollHeight+l;var G=parseInt(this.$el.css("max-height"),10);0<G&&(this.$el.height(""),this.$el.height(C.scrollHeight>G?G:C.scrollHeight));G=this.pane.outerHeight(!1);var K=parseInt(this.pane.css("top"),10);var J=parseInt(this.pane.css("bottom"),10);J=G+K+
J;var O=Math.round(J/E*G);O<this.options.sliderMinHeight?O=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&O>this.options.sliderMaxHeight&&(O=this.options.sliderMaxHeight);"scroll"===F&&"scroll"!==H.overflowX&&(O+=l);this.maxSliderTop=J-O;this.contentHeight=E;this.paneHeight=G;this.paneOuterHeight=J;this.sliderHeight=O;this.paneTop=K;this.slider.height(O);this.events.scroll();this.pane.show();this.isActive=!0;C.scrollHeight===C.clientHeight||this.pane.outerHeight(!0)>=C.scrollHeight&&
"scroll"!==F?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===C.scrollHeight&&"scroll"===F?this.slider.hide():this.slider.show();this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""});C=this.$content.css("position");("static"===C||"relative"===C)&&(C=parseInt(this.$content.css("right"),10))&&this.$content.css({right:"",marginRight:C});return this}};B.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),
this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this};B.prototype.scrollBottom=function(C){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-C).trigger("mousewheel"),this.stop().restore(),this};B.prototype.scrollTop=function(C){if(this.isActive)return this.$content.scrollTop(+C).trigger("mousewheel"),this.stop().restore(),
this};B.prototype.scrollTo=function(C){if(this.isActive)return this.scrollTop(this.$el.find(C).get(0).offsetTop),this};B.prototype.stop=function(){n&&this.scrollRAF&&(n(this.scrollRAF),this.scrollRAF=null);this.stopped=!0;this.removeEvents();this.iOSNativeScrolling||this.pane.hide();return this};B.prototype.destroy=function(){this.stopped||this.stop();!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove();k&&this.$content.height("");this.$content.removeAttr("tabindex");this.$el.hasClass(this.options.enabledClass)&&
(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""}));return this};B.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(C){return function(){C.pane.removeClass(C.options.flashedClass)}}(this),this.options.flashDelay),this};return B}();a.fn.nanoScroller=function(B){return this.each(function(){var C;(C=this.nanoscroller)||(C=a.extend({},h,B),this.nanoscroller=C=new y(this,
C));if(B&&"object"===typeof B){a.extend(C.options,B);if(null!=B.scrollBottom)return C.scrollBottom(B.scrollBottom);if(null!=B.scrollTop)return C.scrollTop(B.scrollTop);if(B.scrollTo)return C.scrollTo(B.scrollTo);if("bottom"===B.scroll)return C.scrollBottom(0);if("top"===B.scroll)return C.scrollTop(0);if(B.scroll&&B.scroll instanceof a)return C.scrollTo(B.scroll);if(B.stop)return C.stop();if(B.destroy)return C.destroy();if(B.flash)return C.flash()}return C.reset()})};a.fn.nanoScroller.Constructor=
y});/*
 jQuery Cookie Plugin v1.3
 https://github.com/carhartl/jquery-cookie

 Copyright 2011, Klaus Hartl
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://www.opensource.org/licenses/mit-license.php
 http://www.opensource.org/licenses/GPL-2.0
*/
(function(a,c,b){function h(n){return n}function k(n){return decodeURIComponent(n.replace(l," "))}var l=/\+/g,m=a.cookie=function(n,p,r){if(p!==b){r=a.extend({},m.defaults,r);null===p&&(r.expires=-1);if("number"===typeof r.expires){var q=r.expires,u=r.expires=new Date;u.setDate(u.getDate()+q)}p=m.json?JSON.stringify(p):String(p);return c.cookie=[encodeURIComponent(n),"=",m.raw?p:encodeURIComponent(p),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+
r.domain:"",r.secure?"; secure":""].join("")}p=m.raw?h:k;r=c.cookie.split("; ");q=0;for(u=r.length;q<u;q++){var v=r[q].split("=");if(p(v.shift())===n)return n=p(v.join("=")),m.json?JSON.parse(n):n}return null};m.defaults={};a.removeCookie=function(n,p){return null!==a.cookie(n)?(a.cookie(n,null,p),!0):!1}})(jQuery,document);(function(a){a.tooltipsy=function(c,b){this.options=b;this.$el=a(c);this.title=this.$el.attr("title")||"";this.random=parseInt(1E4*Math.random());this.shown=this.ready=!1;this.height=this.width=0;this.delaytimer=null;this.$el.data("tooltipsy",this);this.init()};a.tooltipsy.prototype={init:function(){var c=this,b,h=c.$el,k=h[0];c.settings=b=a.extend({},c.defaults,c.options);b.delay=+b.delay;"function"===typeof b.content&&c.readify();b.showEvent===b.hideEvent&&"click"===b.showEvent?h.toggle(function(l){"click"===
b.showEvent&&"A"==k.tagName&&l.preventDefault();0<b.delay?c.delaytimer=window.setTimeout(function(){c.show(l)},b.delay):c.show(l)},function(l){"click"===b.showEvent&&"A"==k.tagName&&l.preventDefault();window.clearTimeout(c.delaytimer);c.delaytimer=null;c.hide(l)}):h.bind(b.showEvent,function(l){"click"===b.showEvent&&"A"==k.tagName&&l.preventDefault();c.delaytimer=window.setTimeout(function(){c.show(l)},b.delay||0)}).bind(b.hideEvent,function(l){"click"===b.showEvent&&"A"==k.tagName&&l.preventDefault();
window.clearTimeout(c.delaytimer);c.delaytimer=null;c.hide(l)})},show:function(c){!1===this.ready&&this.readify();var b=this.settings,h=this.$tipsy,k=this.$el,l=this.offset(k[0]);this.$tip.html(""!=this.settings.content?"string"==typeof this.settings.content?this.settings.content:this.settings.content(c,t):this.$el.attr("title"));if(!1===this.shown){var m=b.css,n=0,p;for(p in m)m.hasOwnProperty(p)&&n++;0<n&&this.$tip.css(b.css);this.width=h.outerWidth();this.height=h.outerHeight()}"cursor"===b.alignTo&&
c?(b=[c.clientX+b.offset[0],c.clientY+b.offset[1]],a(window).width()):b=[0>b.offset[0]?l.left-Math.abs(b.offset[0])-this.width:0===b.offset[0]?l.left:l.left+k.outerWidth()+b.offset[0]-205,0>b.offset[1]?l.top-Math.abs(b.offset[1])-this.height:0===b.offset[1]?l.top-(this.height-this.$el.outerHeight())/2:l.top+this.$el.outerHeight()+b.offset[1]+b.offset[3]];h.css({top:b[1]+"px",left:b[0]+"px"});this.settings.show(c,h.stop(!0,!0))},hide:function(c){var b=this;!1!==b.ready&&(c&&c.relatedTarget===b.$tip[0]?
b.$tip.bind("mouseleave",function(h){h.relatedTarget!==b.$el[0]&&b.settings.hide(h,b.$tipsy.stop(!0,!0))}):b.settings.hide(c,b.$tipsy.stop(!0,!0)))},readify:function(){this.ready=!0;this.$tipsy=a('<div id="tooltipsy'+this.random+'" style="position:absolute;z-index:999;display:none">').appendTo("body");this.$tip=a('<div class="'+this.settings.className+'">').appendTo(this.$tipsy);this.$tip.data("rootel",this.$el);var c=this.$el,b=this.$tip;this.$tip.html(""!=this.settings.content?"string"==typeof this.settings.content?
this.settings.content:this.settings.content(c,b):this.title)},offset:function(c){return this.$el.offset()},destroy:function(){this.$tipsy&&(this.$tipsy.remove(),a.removeData(this.$el,"tooltipsy"))},defaults:{alignTo:"element",offset:[0,1],content:"",show:function(c,b){b.fadeIn(100)},hide:function(c,b){b.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:""}};a.fn.tooltipsy=function(c){return this.each(function(){new a.tooltipsy(this,c)})}})(jQuery);+function(a){var c=function(h,k){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",h,k)};c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};c.prototype.init=function(h,k,l){this.enabled=!0;this.type=h;this.$element=a(k);this.options=
this.getOptions(l);this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);h=this.options.trigger.split(" ");for(k=h.length;k--;)if(l=h[k],"click"==l)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=l){var m="hover"==l?"mouseleave":"focusout";this.$element.on(("hover"==l?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(m+"."+this.type,this.options.selector,
a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(h){h=a.extend({},this.getDefaults(),this.$element.data(),h);h.delay&&"number"==typeof h.delay&&(h.delay={show:h.delay,hide:h.delay});return h};c.prototype.getDelegateOptions=function(){var h={},k=this.getDefaults();this._options&&a.each(this._options,function(l,m){k[l]!=m&&(h[l]=
m)});return h};c.prototype.enter=function(h){var k=h instanceof this.constructor?h:a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(k.timeout);k.hoverState="in";if(!k.options.delay||!k.options.delay.show)return k.show();k.timeout=setTimeout(function(){"in"==k.hoverState&&k.show()},k.options.delay.show)};c.prototype.leave=function(h){var k=h instanceof this.constructor?h:a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(k.timeout);
k.hoverState="out";if(!k.options.delay||!k.options.delay.hide)return k.hide();k.timeout=setTimeout(function(){"out"==k.hoverState&&k.hide()},k.options.delay.hide)};c.prototype.show=function(){var h=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(h),!h.isDefaultPrevented())){var k=this;h=this.tip();this.setContent();this.options.animation&&h.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,h[0],this.$element[0]):
this.options.placement,m=/\s?auto?\s?/i,n=m.test(l);n&&(l=l.replace(m,"")||"top");h.detach().css({top:0,left:0,display:"block"}).addClass(l);this.options.container?h.appendTo(this.options.container):h.insertAfter(this.$element);m=this.getPosition();var p=h[0].offsetWidth,r=h[0].offsetHeight;if(n){n=l;var q=this.$element.parent();q=this.getPosition(q);l="bottom"==l&&m.top+m.height+r-q.scroll>q.height?"top":"top"==l&&0>m.top-q.scroll-r?"bottom":"right"==l&&m.right+p>q.width?"left":"left"==l&&m.left-
p<q.left?"right":l;h.removeClass(n).addClass(l)}m=this.getCalculatedOffset(l,m,p,r);this.applyPlacement(m,l);this.hoverState=null;l=function(){k.$element.trigger("shown.bs."+k.type)};a.support.transition&&this.$tip.hasClass("fade")?h.one(a.support.transition.end,l).emulateTransitionEnd(150):l()}};c.prototype.applyPlacement=function(h,k){var l=this.tip(),m=l[0].offsetWidth,n=l[0].offsetHeight,p=parseInt(l.css("margin-top"),10),r=parseInt(l.css("margin-left"),10);isNaN(p)&&(p=0);isNaN(r)&&(r=0);h.top+=
p;h.left+=r;a.offset.setOffset(l[0],a.extend({using:function(q){l.css({top:Math.round(q.top),left:Math.round(q.left)})}},h),0);l.addClass("in");p=l[0].offsetWidth;r=l[0].offsetHeight;"top"==k&&r!=n&&(h.top=h.top+n-r);k=this.getViewportAdjustedDelta(k,h,p,r);k.left?h.left+=k.left:h.top+=k.top;m=k.left?2*k.left-m+p:2*k.top-n+r;n=k.left?"left":"top";k=k.left?"offsetWidth":"offsetHeight";l.offset(h);this.replaceArrow(m,l[0][k],n)};c.prototype.replaceArrow=function(h,k,l){this.arrow().css(l,h?50*(1-h/
k)+"%":"")};c.prototype.setContent=function(){var h=this.tip(),k=this.getTitle();h.find(".tooltip-inner")[this.options.html?"html":"text"](k);h.removeClass("fade in top bottom left right")};c.prototype.hide=function(){function h(){"in"!=k.hoverState&&l.detach();k.$element.trigger("hidden.bs."+k.type)}var k=this,l=this.tip(),m=a.Event("hide.bs."+this.type);this.$element.trigger(m);if(!m.isDefaultPrevented())return l.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?l.one(a.support.transition.end,
h).emulateTransitionEnd(150):h(),this.hoverState=null,this};c.prototype.fixTitle=function(){var h=this.$element;(h.attr("title")||"string"!=typeof h.attr("data-original-title"))&&h.attr("data-original-title",h.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(h){h=h||this.$element;var k=h[0],l="BODY"==k.tagName;return a.extend({},"function"==typeof k.getBoundingClientRect?k.getBoundingClientRect():null,{scroll:l?document.documentElement.scrollTop||
document.body.scrollTop:h.scrollTop(),width:l?a(window).width():h.outerWidth(),height:l?a(window).height():h.outerHeight()},l?{top:0,left:0}:h.offset())};c.prototype.getCalculatedOffset=function(h,k,l,m){return"bottom"==h?{top:k.top+k.height,left:k.left+k.width/2-l/2}:"top"==h?{top:k.top-m,left:k.left+k.width/2-l/2}:"left"==h?{top:k.top+k.height/2-m/2,left:k.left-l}:{top:k.top+k.height/2-m/2,left:k.left+k.width}};c.prototype.getViewportAdjustedDelta=function(h,k,l,m){var n={top:0,left:0};if(!this.$viewport)return n;
var p=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);/right|left/.test(h)?(l=k.top-p-r.scroll,k=k.top+p-r.scroll+m,l<r.top?n.top=r.top-l:k>r.top+r.height&&(n.top=r.top+r.height-k)):(m=k.left-p,k=k.left+p+l,m<r.left?n.left=r.left-m:k>r.width&&(n.left=r.left+r.width-k));return n};c.prototype.getTitle=function(){var h=this.$element,k=this.options;return h.attr("data-original-title")||("function"==typeof k.title?k.title.call(h[0]):k.title)};c.prototype.tip=
function(){return this.$tip=this.$tip||a(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(h){h=h?a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+
this.type):this;h.tip().hasClass("in")?h.leave(h):h.enter(h)};c.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var b=a.fn.tooltip;a.fn.tooltip=function(h){return this.each(function(){var k=a(this),l=k.data("bs.tooltip"),m="object"==typeof h&&h;if(l||"destroy"!=h)if(l||k.data("bs.tooltip",l=new c(this,m)),"string"==typeof h)l[h]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.noConflict=function(){a.fn.tooltip=b;return this}}(jQuery);var uid1="D"+ +new Date,uid2="D"+(+new Date+1),uid3="D"+(+new Date+2),uid4="D"+(+new Date+3);jQuery.event.special.scrollstart={setup:function(){var a,c=function(b){var h=arguments;a?clearTimeout(a):(b.type="scrollstart",jQuery.event.handle.apply(this,h));a=setTimeout(function(){a=null},jQuery.event.special.scrollstop.latency)};jQuery(this).bind("scroll",c).data(uid1,c)},teardown:function(a){jQuery(this).unbind("scroll",jQuery(this).data(uid1))}};
jQuery.event.special.scrollstop={latency:150,setup:function(){var a,c=function(b){var h=this,k=arguments;a&&clearTimeout(a);a=setTimeout(function(){a=null;b.type="scrollstop";jQuery.event.handle.apply(h,k)},jQuery.event.special.scrollstop.latency)};jQuery(this).bind("scroll",c).data(uid2,c)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(uid2))}};
jQuery.event.special.scrollreachtop={setup:function(a,c){jQuery(this).bind("scroll",jQuery.event.special.scrollreachtop.handler).data(uid3,jQuery.event.special.scrollreachtop.handler)},teardown:function(a){jQuery(this).unbind("scroll",jQuery(this).data(uid3))},handler:function(a){a.type="scrollreachtop";0==parseInt(jQuery(this).scrollTop())&&jQuery.event.handle.apply(this,arguments)}};
jQuery.event.special.scrollreachbottom={setup:function(a,c){jQuery(this).bind("scroll",jQuery.event.special.scrollreachbottom.handler).data(uid4,jQuery.event.special.scrollreachbottom.handler)},teardown:function(a){jQuery(this).unbind("scroll",jQuery(this).data(uid4))},handler:function(a){a.type="scrollreachbottom";var c=parseInt(jQuery(this).attr("scrollHeight"))-parseInt(jQuery(this).innerHeight())-1;parseInt(jQuery(this).scrollTop())>=c&&jQuery.event.handle.apply(this,arguments)}};/*
 jQuery.ScrollTo
 Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 Dual licensed under MIT and GPL.
 Date: 4/09/2012

 @projectDescription Easy element scrolling using jQuery.
 http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 @author Ariel Flesler
 @version 1.4.3.1

 @id jQuery.scrollTo
 @id jQuery.fn.scrollTo
 @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
   The different options for target are:
  - A number position (will be applied to all axes).
  - A string position ('44', '100px', '+=90', etc ) will be applied to all axes
  - A jQuery/DOM element ( logically, child of the element to scroll )
  - A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
  - A hash { top:x, left:y }, x and y can be any kind of number/string like above.
  - A percentage of the container's dimension/s, for example: 50% to go to the middle.
  - The string 'max' for go-to-end. 
 @param {Number, Function} duration The OVERALL length of the animation, this argument can be the settings object instead.
 @param {Object,Function} settings Optional set of settings or the onAfter callback.
  @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
  @option {Number, Function} duration The OVERALL length of the animation.
  @option {String} easing The easing method for the animation.
  @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
  @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
  @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
  @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
  @option {Function} onAfter Function to be called after the scrolling ends. 
  @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 @return {jQuery} Returns the same jQuery object, for chaining.

 @desc Scroll to a fixed position
 @example $('div').scrollTo( 340 );

 @desc Scroll relatively to the actual position
 @example $('div').scrollTo( '+=340px', { axis:'y' } );

 @desc Scroll using a selector (relative to the scrolled element)
 @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );

 @desc Scroll to a DOM element (same for jQuery object)
 @example var second_child = document.getElementById('container').firstChild.nextSibling;
   $('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
    alert('scrolled!!');																   
   }});

 @desc Scroll on both axes, to different values
 @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
*/
(function(a){function c(h){return"object"==typeof h?h:{top:h,left:h}}var b=a.scrollTo=function(h,k,l){a(window).scrollTo(h,k,l)};b.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0};b.window=function(h){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var h=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
"BackCompat"==h.compatMode?h.body:h.documentElement})};a.fn.scrollTo=function(h,k,l){"object"==typeof k&&(l=k,k=0);"function"==typeof l&&(l={onAfter:l});"max"==h&&(h=9E9);l=a.extend({},b.defaults,l);k=k||l.duration;l.queue=l.queue&&1<l.axis.length;l.queue&&(k/=2);l.offset=c(l.offset);l.over=c(l.over);return this._scrollable().each(function(){function m(x){p.animate(q,k,l.easing,x&&function(){x.call(this,h,l)})}if(null!=h){var n=this,p=a(n),r=h,q={},u=p.is("html,body");switch(typeof r){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(r)){r=
c(r);break}r=a(r,this);if(!r.length)return;case "object":if(r.is||r.style)var v=(r=a(r)).offset()}a.each(l.axis.split(""),function(x,y){var B="x"==y?"Left":"Top",C=B.toLowerCase(),H="scroll"+B,F=n[H],E=b.max(n,y);v?(q[H]=v[C]+(u?0:F-p.offset()[C]),l.margin&&(q[H]-=parseInt(r.css("margin"+B))||0,q[H]-=parseInt(r.css("border"+B+"Width"))||0),q[H]+=l.offset[C]||0,l.over[C]&&(q[H]+=r["x"==y?"width":"height"]()*l.over[C])):(y=r[C],q[H]=y.slice&&"%"==y.slice(-1)?parseFloat(y)/100*E:y);l.limit&&/^\d+$/.test(q[H])&&
(q[H]=0>=q[H]?0:Math.min(q[H],E));!x&&l.queue&&(F!=q[H]&&m(l.onAfterFirst),delete q[H])});m(l.onAfter)}}).end()};b.max=function(h,k){var l="x"==k?"Width":"Height";k="scroll"+l;if(!a(h).is("html,body"))return h[k]-a(h)[l.toLowerCase()]();l="client"+l;var m=h.ownerDocument.documentElement;h=h.ownerDocument.body;return Math.max(m[k],h[k])-Math.min(m[l],h[l])}})(jQuery);/*
 jQuery resize event - v1.1 - 3/14/2010
 http://benalman.com/projects/jquery-resize-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
(function(a,c,b){function h(){m=c.setTimeout(function(){k.each(function(){var n=a(this),p=n.width(),r=n.height(),q=a.data(this,"resize-special-event");p===q.w&&r===q.h||n.trigger("resize",[q.w=p,q.h=r])});h()},l.delay)}"$:nomunge";var k=a([]),l=a.resize=a.extend(a.resize,{}),m;l.delay=10;l.throttleWindow=!0;a.event.special.resize={setup:function(){if(!l.throttleWindow&&this.setTimeout)return!1;var n=a(this);k=k.add(n);a.data(this,"resize-special-event",{w:n.width(),h:n.height()});1===k.length&&h()},
teardown:function(){if(!l.throttleWindow&&this.setTimeout)return!1;var n=a(this);k=k.not(n);n.removeData("resize-special-event");k.length||clearTimeout(m)},add:function(n){function p(q,u,v){if(!a.isWindow(this)){var x=a(this),y=a.data(this,"resize-special-event");y.w=u!==b?u:x.width();y.h=v!==b?v:x.height();r.apply(this,arguments)}}if(!l.throttleWindow&&this.setTimeout)return!1;if(a.isFunction(n)){var r=n;return p}r=n.handler;n.handler=p}}})(jQuery,this);(function(a,c,b){c.infinitescroll=function(l,m,n){this.element=c(n);this._create(l,m)||(this.failed=!0)};c.infinitescroll.defaults={loading:{finished:b,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",
msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:b},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},debug:!1,behavior:b,binder:c(a),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:b,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:b,path:b,prefill:!1,maxPage:b};
c.infinitescroll.prototype={_binding:function(l){var m=this,n=m.options;n.v="2.0b2.120520";if(n.behavior&&this["_binding_"+n.behavior]!==b)this["_binding_"+n.behavior].call(this);else{if("bind"!==l&&"unbind"!==l)return this._debug("Binding value  "+l+" not valid"),!1;if("unbind"===l)this.options.binder.unbind("smartscroll.infscr."+m.options.infid);else this.options.binder[l]("smartscroll.infscr."+m.options.infid,function(){m.scroll()});this._debug("Binding",l)}},_create:function(l,m){var n=c.extend(!0,
{},c.infinitescroll.defaults,l);this.options=n;var p=c(a);if(!this._validate(l))return!1;var r=c(n.nextSelector).attr("href");if(!r)return this._debug("Navigation selector not found"),!1;n.path=n.path||this._determinepath(r);n.contentSelector=n.contentSelector||this.element;n.loading.selector=n.loading.selector||n.contentSelector;n.loading.msg=n.loading.msg||c('<div id="infscr-loading" style="height: 32px;"><img style="height: 32px;" alt="Loading..." src="'+n.loading.img+'"'+(n.loading.img_opts?n.loading.img_opts:
"")+" /><div>"+n.loading.msgText+"</div></div>");(new Image).src=n.loading.img;c("#infscr-loading").stop();c("#infscr-loading img").stop();n.pixelsFromNavToBottom===b&&(n.pixelsFromNavToBottom=c(document).height()-c(n.navSelector).offset().top);var q=this;n.loading.start=n.loading.start||function(){c(n.navSelector).hide();n.loading.msg.appendTo(n.loading.selector).show(n.loading.speed,c.proxy(function(){this.beginAjax(n)},q))};n.loading.finished=n.loading.finished||function(){n.loading.msg.fadeOut(n.loading.speed)};
n.callback=function(u,v,x){n.behavior&&u["_callback_"+n.behavior]!==b&&u["_callback_"+n.behavior].call(c(n.contentSelector)[0],v,x);m&&m.call(c(n.contentSelector)[0],v,n,x);n.prefill&&p.bind("resize.infinite-scroll",u._prefill)};l.debug&&(!Function.prototype.bind||"object"!==typeof console&&"function"!==typeof console||"object"!==typeof console.log||"log info warn error assert dir clear profile profileEnd".split(" ").forEach(function(u){console[u]=this.call(console[u],console)},Function.prototype.bind));
this._setup();n.prefill&&this._prefill();return!0},_prefill:function(){var l=this,m=c(document),n=c(a);this._prefill=function(){m.height()<=n.height()&&l.scroll();n.bind("resize.infinite-scroll",function(){m.height()<=n.height()&&(n.unbind("resize.infinite-scroll"),l.scroll())})};this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!==typeof console&&"function"===typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"===typeof Array.prototype.slice.call(arguments)[0]?
console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"===typeof console||"object"!==typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(l){var m=this.options;if(m.behavior&&this["_determinepath_"+m.behavior]!==b)return this["_determinepath_"+m.behavior].call(this,l);if(m.pathParse)return this._debug("pathParse manual"),m.pathParse(l,
this.options.state.currPage+1);if(l.match(/^(.*?)\b2\b(.*?$)/))l=l.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(l.match(/^(.*?)2(.*?$)/)){if(l.match(/^(.*?page=)2(\/.*|$)/))return l=l.match(/^(.*?page=)2(\/.*|$)/).slice(1);l=l.match(/^(.*?)2(.*?$)/).slice(1)}else{if(l.match(/^(.*?page=)1(\/.*|$)/))return l=l.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");
m.state.isInvalidPage=!0}this._debug("determinePath",l);return l},_error:function(l){var m=this.options;m.behavior&&this["_error_"+m.behavior]!==b?this["_error_"+m.behavior].call(this,l):("destroy"!==l&&"end"!==l&&(l="unknown"),this._debug("Error",l),"end"===l&&this._showdonemsg(),m.state.isDone=!0,m.state.currPage=1,m.state.isPaused=!1,this._binding("unbind"))},_loadcallback:function(l,m,n){var p=this.options,r=this.options.callback,q=p.state.isDone?"done":p.appendCallback?"append":"no-append";if(p.behavior&&
this["_loadcallback_"+p.behavior]!==b)this["_loadcallback_"+p.behavior].call(this,l,m);else{switch(q){case "done":return this._showdonemsg(),!1;case "no-append":"html"===p.dataType&&(m=c("<div>"+m+"</div>").find(p.itemSelector));break;case "append":q=l.children();if(0===q.length)return this._error("end");for(m=document.createDocumentFragment();l[0].firstChild;)m.appendChild(l[0].firstChild);this._debug("contentSelector",c(p.contentSelector)[0]);c(p.contentSelector)[0].appendChild(m);m=q.get()}p.loading.finished.call(c(p.contentSelector)[0],
p);p.animate&&(l=c(a).scrollTop()+c("#infscr-loading").height()+p.extraScrollPx+"px",c("html,body").animate({scrollTop:l},800,function(){p.state.isDuringAjax=!1}));p.animate||(p.state.isDuringAjax=!1);r(this,m,n);p.prefill&&this._prefill()}},_nearbottom:function(){var l=this.options,m=0+c(document).height()-l.binder.scrollTop()-c(a).height();if(l.behavior&&this["_nearbottom_"+l.behavior]!==b)return this["_nearbottom_"+l.behavior].call(this);this._debug("math:",m,l.pixelsFromNavToBottom);return m-
l.bufferPx<l.pixelsFromNavToBottom},_pausing:function(l){var m=this.options;if(m.behavior&&this["_pausing_"+m.behavior]!==b)this["_pausing_"+m.behavior].call(this,l);else{"pause"!==l&&"resume"!==l&&null!==l&&this._debug("Invalid argument. Toggling pause value instead");switch(!l||"pause"!==l&&"resume"!==l?"toggle":l){case "pause":m.state.isPaused=!0;break;case "resume":m.state.isPaused=!1;break;case "toggle":m.state.isPaused=!m.state.isPaused}this._debug("Paused",m.state.isPaused);return!1}},_setup:function(){var l=
this.options;if(l.behavior&&this["_setup_"+l.behavior]!==b)this["_setup_"+l.behavior].call(this);else return this._binding("bind"),!1},_showdonemsg:function(){var l=this.options;l.behavior&&this["_showdonemsg_"+l.behavior]!==b?this["_showdonemsg_"+l.behavior].call(this):(l.loading.msg.hide(),l.errorCallback.call(c(l.contentSelector)[0],"done"))},_validate:function(l){for(var m in l)if(m.indexOf&&-1<m.indexOf("Selector")&&0===c(l[m]).length)return this._debug("Your "+m+" found no elements."),!1;return!0},
bind:function(){this._binding("bind")},destroy:function(){this.options.state.isDestroyed=!0;this.options.loading.finished();return this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(l){var m=this,n=l.path,p;l.state.currPage++;if(l.maxPage!=b&&l.state.currPage>l.maxPage)this.destroy();else{var r=c(l.contentSelector).is("table")?c("<tbody/>"):c("<div/>");var q="function"===typeof n?n(l.state.currPage):n.join(l.state.currPage);
m._debug("heading into ajax",q);n="html"===l.dataType||"json"===l.dataType?l.dataType:"html+callback";l.appendCallback&&"html"===l.dataType&&(n+="+callback");switch(n){case "html+callback":m._debug("Using HTML via .load() method");r.load(q+" "+l.itemSelector,b,function(u){m._loadcallback(r,u,q)});break;case "html":m._debug("Using "+n.toUpperCase()+" via $.ajax() method");c.ajax({url:q,dataType:l.dataType,complete:function(u,v){(p="undefined"!==typeof u.isResolved?u.isResolved():"success"===v||"notmodified"===
v)?m._loadcallback(r,u.responseText,q):m._error("end")}});break;case "json":m._debug("Using "+n.toUpperCase()+" via $.ajax() method"),c.ajax({dataType:"json",type:"GET",url:q,success:function(u,v,x){p="undefined"!==typeof x.isResolved?x.isResolved():"success"===v||"notmodified"===v;l.appendCallback?l.template!==b?(u=l.template(u),r.append(u),p?m._loadcallback(r,u):m._error("end")):(m._debug("template must be defined."),m._error("end")):p?m._loadcallback(r,u,q):m._error("end")},error:function(){m._debug("JSON ajax request failed.");
m._error("end")}})}}},retrieve:function(l){l=l||null;var m=this.options;if(m.behavior&&this["retrieve_"+m.behavior]!==b)this["retrieve_"+m.behavior].call(this,l);else{if(m.state.isDestroyed)return this._debug("Instance is destroyed"),!1;m.state.isDuringAjax=!0;m.loading.start.call(c(m.contentSelector)[0],m)}},scroll:function(){var l=this.options,m=l.state;l.behavior&&this["scroll_"+l.behavior]!==b?this["scroll_"+l.behavior].call(this):m.isDuringAjax||m.isInvalidPage||m.isDone||m.isDestroyed||m.isPaused||
this._nearbottom()&&this.retrieve()},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(l){c.isPlainObject(l)&&(this.options=c.extend(!0,this.options,l))}};c.fn.infinitescroll=function(l,m){switch(typeof l){case "string":var n=Array.prototype.slice.call(arguments,1);this.each(function(){var p=c.data(this,"infinitescroll");if(!p||!c.isFunction(p[l])||"_"===l.charAt(0))return!1;p[l].apply(p,n)});break;case "object":this.each(function(){var p=c.data(this,"infinitescroll");
p?p.update(l):(p=new c.infinitescroll(l,m,this),p.failed||c.data(this,"infinitescroll",p))})}return this};var h=c.event,k;h.special.smartscroll={setup:function(){c(this).bind("scroll",h.special.smartscroll.handler)},teardown:function(){c(this).unbind("scroll",h.special.smartscroll.handler)},handler:function(l,m){var n=this,p=arguments;l.type="smartscroll";k&&clearTimeout(k);k=setTimeout(function(){c.event.handle.apply(n,p)},"execAsap"===m?0:100)}};c.fn.smartscroll=function(l){return l?this.bind("smartscroll",
l):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);function d(a){var c;if(!this.length)return this;var b=this[0];b instanceof Document?(c=b,b=c.documentElement):c=b.ownerDocument;if(null==a)return c.cancelFullScreen||c.webkitCancelFullScreen||c.mozCancelFullScreen?(a=!!c.fullScreen||!!c.webkitIsFullScreen||!!c.mozFullScreen)?c.fullScreenElement||c.webkitCurrentFullScreenElement||c.mozFullScreenElement||a:a:null;a?(a=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen)&&a.call(b):(a=c.cancelFullScreen||c.webkitCancelFullScreen||
c.mozCancelFullScreen)&&a.call(c);return this}jQuery.fn.fullScreen=d;jQuery.fn.toggleFullScreen=function(){return d.call(this,!d.call(this))};var e,f,g;e=document;e.webkitCancelFullScreen?(f="webkitfullscreenchange",g="webkitfullscreenerror"):e.mozCancelFullScreen?(f="mozfullscreenchange",g="mozfullscreenerror"):(f="fullscreenchange",g="fullscreenerror");
document.addEventListener?document.addEventListener(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))},!0):document.attachEvent(f,function(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))},!0);document.addEventListener?document.addEventListener(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))},!0):document.attachEvent(g,function(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))},!0);(function(a){a("#activity").live("click",function(){a(this).find(".notification").remove();a.get(WS_PREFIX+"/activities/mark_all_as_read",function(){});return!1});a("#lightbox").live("mousedown",function(c){if(a(c.target).hasClass("modal")&&(a(".tooltipsy").parent().hide(),!a("#lightbox").hasClass("stick_modal")))return Jmp.App.Lightbox.hide(),!1});a("#myTab li, #account-settings #close").live("click",function(){a(".tooltipsy").parent().hide()});a(document).click(function(c){a("#login").children(":first").addClass("hide");
a("#login form .error").each(function(){a(this).data("tooltipsy").hide()})});a(".icon-logout").bind("click",function(){"undefined"!=typeof ActivityManager&&ActivityManager.clear_timeout()});a(document).ready(function(){a('[data-tooltip="true"]').tooltip()});a("#file_replace_popup").live("click",function(c){var b=a(c.target);if(b.hasClass("close_icon")||b.hasClass("icn-close"))a("#file_replace_confirm_action_checkbox").attr("checked","checked"),a("#file_replace_cancel_upload").trigger("click");c.stopPropagation()});
a("#file_replace_replacer").live("click",function(c){c=a("#file_replace_confirm_action_checkbox").is(":checked");Jmp.App.Lightbox.hide();FileReplacer.replace_file(c);return!1});a("#file_replace_duplicator").live("click",function(c){c=a("#file_replace_confirm_action_checkbox").is(":checked");FileReplacer.duplicate_file(c);return!1});a("#file_replace_cancel_upload").live("click",function(c){c=a("#file_replace_confirm_action_checkbox").is(":checked");FileReplacer.cancel_file(c);return!1});a("#desktop_push_notifications_web_popup").live("click",
function(c){c=a(c.target);c.hasClass("desktop_push_notifications_web_setting")&&(c=c.hasClass("disable_desktop_push_notifications_web")?"disable":"enable",a.post(WS_PREFIX+"/settings/save_desktop_push_notifications_web_setting",Jmp.Helpers.get_secure_params({button:c}),function(b){}),Jmp.App.Lightbox.hide(),Jmp.Handler.getRule("settings")==Jmp.App.getView().type?"enable"==c?DesktopPushNotificationsWeb.show_browser_permission_dialog_on_settings_page("enable"):(DesktopPushNotificationsWeb.manage_containers_on_settings_page("disable"),
DesktopPushNotificationsWeb.display_desktop_push_notifications_web_disabled_notification()):(a("#modal").unwrap("div"),"enable"==c&&DesktopPushNotificationsWeb.show_browser_permission_dialog(Notification.permission)));return!1});a("#new_note").live("click",function(c){Jmp.App.Lightbox.show({type:"new_note"});var b=a("#lightbox");b.find(".modal-content").addClass("modal-feedback");b.find(".modal-dialog").addClass("modal-note");a("#note").focus();b.find(".modal-footer").prepend('<div class="btn-group btn-compact pull-left"> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button id="new_note_type" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-tooltip="true" data-placement="top" data-trigger="click" data-html="true" title="" data-original-title=""><span class="value">Text</span><span class="caret"></span></button> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul class="dropdown-menu" id="new_note_types" role="menu"> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li class="note current hide" data-value="note"><a class="type" href="#">Text</a></li> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li class="markdown" data-value="markdown"><a class="type" href="#">Markdown</a></li> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li class="code" data-value="code"><a class="type" href="#">Code</a></li> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>');
c.preventDefault()});a("#new_note_types").live("click",function(c){var b=a(c.target);if(b.hasClass("type")){a(this).find(".current").removeClass("current hide");var h=b.parent();h.addClass("current hide");h=h.attr("data-value");var k="Start by typing your "+h+"...";a("#note").attr("placeholder",k);a("#note_type_heading").text(Jmp.Helpers.capitalize_word(h));a("#new_note_type").find(".value").text(b.text());"code"==h?a("#note").linedtextarea():(a(".linedwrap").replaceWith(a("#note")),a("#note").removeAttr("style").attr("style",
"height: 300px;").removeAttr("wrap"))}c.preventDefault()});a("#new_note_upload").live("click",function(c){c=a("#note").val();if(""===c)Jmp.App.Notifications.display_notification({type:"error",message:"Note cannot be empty"}).close_notification();else{var b=a("#new_note_types").find(".current").attr("data-value");CustomNote.create_note({note:c,type:b});Jmp.App.Lightbox.hide()}return!1});a(".edit_note").live("click",function(c){c=a(this).attr("data-id");var b=a("#"+c),h=CustomNote.type_for_extension(b.attr("data-extension"));
Jmp.App.Lightbox.show({type:"edit_note",note_type_heading:Jmp.Helpers.capitalize_word(h)});b=a("#lightbox");b.find(".modal-content").addClass("modal-feedback");b.find(".modal-dialog").addClass("modal-note");a("#note_form").prepend('<img id="note_loader" src="/res/images/spacer.gif" class="ab-center spinner-css">');a("#note").attr("placeholder","");a("#edit_note_upload").attr("data-id",c).addClass("disabled blockUI");a.get(WS_PREFIX+"/view/note/"+c,function(k){a("#edit_note_upload").removeClass("disabled blockUI");
a("#note_loader").remove();a("#note").val(k);k="Start by typing your "+h+"...";a("#note").attr("placeholder",k);"code"==h&&a("#note").linedtextarea()});return!1});a("#edit_note_upload").live("click",function(c){c=a("#note").val();if(""===c)Jmp.App.Notifications.display_notification({type:"error",message:"Note cannot be empty"}).close_notification();else{var b=a(this).attr("data-id"),h=a("#"+b);CustomNote.update_note({note:c,bucket_file_code:b,note_name:h.attr("data-gridname")});Jmp.App.Lightbox.hide()}return!1});
a("#slack_channel_ids").live("click",function(c){var b=a(c.target);if(b.hasClass("type")){a(this).find(".current").removeClass("current hide");var h=b.parent();h.addClass("current hide");a("#slack_channel_id").find(".value").text(b.text());a("#slack_channel_id").find(".value").attr("data-value",h.attr("data-value"))}c.preventDefault()});a("#slack_channel_ids_personal").live("click",function(c){var b=a(c.target);if(b.hasClass("type")){a(this).find(".current").removeClass("current hide");var h=b.parent();
h.addClass("current hide");a("#slack_channel_id_personal").find(".value").text(b.text());a("#slack_channel_id_personal").find(".value").attr("data-value",h.attr("data-value"))}c.preventDefault()})})(jQuery);
$(window).bind("beforeunload",function(a){"undefined"!=typeof ActivityManager&&ActivityManager.clear_timeout();if("undefined"!=typeof Jmp.Handler.BucketFiles.copy_in_progress&&Jmp.Handler.BucketFiles.copy_in_progress||"undefined"!=typeof Jmp.Handler.BucketFiles.move_in_progress&&Jmp.Handler.BucketFiles.move_in_progress||"undefined"!=typeof Jmp.Handler.BucketFiles.import_in_progress&&Jmp.Handler.BucketFiles.import_in_progress)return!0});
$(function(){$("#tear-container .dropdown").find("a:last").prev("li").addClass("nb");$("body").removeClass("invisible");$(".temp_ajax").live("click",function(a){var c=$(this);a=c.attr("data-id");var b=$("#"+a).find(".open_in_new");if(b.length)return b.trigger("click"),!1;if("Trash"==Jmp.App.getView().type)return!1;ViewerPanel.viewers_collection.empty();Jmp.Helpers.add_viewer(a);c.addClass("ajax").removeClass("temp_ajax");setTimeout(function(){c.trigger("click");c.removeClass("ajax").addClass("temp_ajax")},
50);return!1});$(".open_in_new").live("click",function(a){$(a.target).hasClass("open_in_new")&&(window.location=$(this).prev("a").attr("href"));return!1});ActivityManager&&$(ActivityManager.activity_container.get_container_name()).live("click",function(){var a=$(this).attr("href");window.location.href.match(a)&&Jmp.Handler.Activities.load_activities()});$("#top_welcome_bar .close, #top_welcome_bar span").on("click",function(a){$("body").removeClass("global-notice");$.get(WS_PREFIX+"/accounts/remove_top_welcome_bar",
function(){$("#top_welcome_bar").removeAttr("style").remove()});Jmp.App.Notifications._reset_body_spacing_on_gloabl_notice_close()});$(".collection-notice.alert-notice a.btn-default").live("click",function(a){$(".collection-notice.alert-notice").remove();$.get(WS_PREFIX+"/accounts/finish_notice_box",function(){});return!1})});function get_current_timestamp(){return(new Date).getTime()}
!function(){function a(k,l,m){k.addEventListener?k.addEventListener(l,m,!1):k.attachEvent&&k.attachEvent("on"+l,m)}function c(){if(window.localStorage&&window.XMLHttpRequest)if(window.localStorage&&localStorage.font_css_cache&&localStorage.font_css_cache_file===h)b(localStorage.font_css_cache);else{var k=new XMLHttpRequest;k.open("GET",h,!0);a(k,"load",function(){4===k.readyState&&(b(k.responseText),localStorage.font_css_cache=k.responseText,localStorage.font_css_cache_file=h)});k.send()}else{var l=
document.createElement("link");l.href=h;l.rel="stylesheet";l.type="text/css";document.getElementsByTagName("head")[0].appendChild(l);document.cookie="font_css_cache"}}function b(k){var l=document.createElement("style");l.innerHTML=k;document.getElementsByTagName("head")[0].appendChild(l)}var h="/res/css/fonts.css";window.self==window.top&&(window.localStorage&&localStorage.font_css_cache||-1<document.cookie.indexOf("font_css_cache")?c():a(window,"load",c))}();
function dismiss_business_trial_sidebar_box(){$.post(WS_PREFIX+"/buckets/dismiss_business_trial_sidebar_box",Jmp.Helpers.get_secure_params({}),function(a){});$("#download_app_business").fadeOut()}function dismiss_download_app_sidebar_box(){$.post(WS_PREFIX+"/buckets/dismiss_download_app_sidebar_box",Jmp.Helpers.get_secure_params({}),function(a){});$("#download_app").fadeOut()}
function dismiss_download_ios_sidebar_box(){$.post(WS_PREFIX+"/buckets/dismiss_download_ios_sidebar_box",Jmp.Helpers.get_secure_params({}),function(a){});$("#download_app").fadeOut()}
function dismiss_download_app_dashboard_box(){$.post(WS_PREFIX+"/buckets/dismiss_download_app_dashboard_box",Jmp.Helpers.get_secure_params({}),function(a){});$("#download_app_dashboard").fadeOut();setTimeout(function(){$("#download_app_dashboard").remove()},600);$("#download_app").removeClass("hide");$("#empty_item_message").css({top:"0px",height:"350px"});$("body").removeClass("download-app-notice")};(function(a,c){"function"===typeof define&&define.amd?define(c):"object"===typeof exports?module.exports=c():a.NProgress=c()})(this,function(){function a(q,u,v){return q<u?u:q>v?v:q}function c(q,u,v){q="translate3d"===n.positionUsing?{transform:"translate3d("+100*(-1+q)+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+100*(-1+q)+"%,0)"}:{"margin-left":100*(-1+q)+"%"};q.transition="all "+u+"ms "+v;return q}function b(q,u){return 0<=("string"==typeof q?q:l(q)).indexOf(" "+u+" ")}function h(q,
u){var v=l(q),x=v+u;b(v,u)||(q.className=x.substring(1))}function k(q,u){var v=l(q);b(q,u)&&(u=v.replace(" "+u+" "," "),q.className=u.substring(1,u.length-1))}function l(q){return(" "+(q.className||"")+" ").replace(/\s+/gi," ")}var m={version:"0.1.6"},n=m.settings={minimum:.08,easing:"ease",positionUsing:"",speed:2E3,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!1,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};
m.configure=function(q){var u;for(u in q){var v=q[u];void 0!==v&&q.hasOwnProperty(u)&&(n[u]=v)}return this};m.status=null;m.set=function(q){var u=m.isStarted();q=a(q,n.minimum,1);m.status=1===q?null:q;var v=m.render(!u),x=v.querySelector(n.barSelector),y=n.speed,B=n.easing;v.offsetWidth;p(function(C){""===n.positionUsing&&(n.positionUsing=m.getPositioningCSS());r(x,c(q,y,B));1===q?(r(v,{transition:"none",opacity:1}),v.offsetWidth,setTimeout(function(){r(v,{transition:"all "+y+"ms linear",opacity:0});
setTimeout(function(){m.remove();C()},y)},y)):setTimeout(C,y)});return this};m.isStarted=function(){return"number"===typeof m.status};m.start=function(){m.status||m.set(0);var q=function(){setTimeout(function(){m.status&&(m.trickle(),q())},n.trickleSpeed)};n.trickle&&q();return this};m.done=function(q){return q||m.status?m.inc(.3+.5*Math.random()).set(1):this};m.inc=function(q){var u=m.status;return u?("number"!==typeof q&&(q=(1-u)*a(Math.random()*u,.1,.95)),u=a(u+q,0,.994),m.set(u)):m.start()};m.trickle=
function(){return m.inc(Math.random()*n.trickleRate)};(function(){var q=0,u=0;m.promise=function(v){if(!v||"resolved"==v.state())return this;0==u&&m.start();q++;u++;v.always(function(){u--;0==u?(q=0,m.done()):m.set((q-u)/q)});return this}})();m.render=function(q){if(m.isRendered())return document.getElementById("nprogress");h(document.documentElement,"nprogress-busy");var u=document.createElement("div");u.id="nprogress";u.innerHTML=n.template;var v=u.querySelector(n.barSelector),x=q?"-100":100*(-1+
(m.status||0));q=document.querySelector(n.parent);r(v,{transition:"all 0 linear",transform:"translate3d("+x+"%,0,0)"});n.showSpinner||(v=u.querySelector(n.spinnerSelector))&&v&&v.parentNode&&v.parentNode.removeChild(v);q!=document.body&&h(q,"nprogress-custom-parent");q.appendChild(u);return u};m.remove=function(){k(document.documentElement,"nprogress-busy");k(document.querySelector(n.parent),"nprogress-custom-parent");var q=document.getElementById("nprogress");q&&q&&q.parentNode&&q.parentNode.removeChild(q)};
m.isRendered=function(){return!!document.getElementById("nprogress")};m.getPositioningCSS=function(){var q=document.body.style,u="WebkitTransform"in q?"Webkit":"MozTransform"in q?"Moz":"msTransform"in q?"ms":"OTransform"in q?"O":"";return u+"Perspective"in q?"translate3d":u+"Transform"in q?"translate":"margin"};var p=function(){function q(){var v=u.shift();v&&v(q)}var u=[];return function(v){u.push(v);1==u.length&&q()}}(),r=function(){function q(y){return y.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,
function(B,C){return C.toUpperCase()})}function u(y){y=q(y);var B;if(!(B=x[y])){B=y;a:{var C=document.body.style;if(!(y in C))for(var H=v.length,F=y.charAt(0).toUpperCase()+y.slice(1),E;H--;)if(E=v[H]+F,E in C){y=E;break a}}B=x[B]=y}return B}var v=["Webkit","O","Moz","ms"],x={};return function(y,B){var C=arguments;if(2==C.length)for(E in B){var H=B[E];if(void 0!==H&&B.hasOwnProperty(E)){C=y;var F=E;F=u(F);C.style[F]=H}}else{var E=y;F=C[1];C=C[2];F=u(F);E.style[F]=C}}}();return m});/*
 jquery.panzoom.js v2.0.5
 Updated: Thu Jul 03 2014
 Add pan and zoom functionality to any element
 Copyright (c) 2014 timmy willison
 Released under the MIT license
 https://github.com/timmywil/jquery.panzoom/blob/master/MIT-License.txt
*/
(function(a,c){"function"===typeof define&&define.amd?define(["jquery"],function(b){return c(a,b)}):"object"===typeof exports?c(a,require("jquery")):c(a,a.jQuery)})("undefined"!==typeof window?window:this,function(a,c){function b(F){var E={range:!0,animate:!0};"boolean"===typeof F?E.animate=F:c.extend(E,F);return E}function h(F,E,G,K,J,O,T,Q,M){"array"===c.type(F)?this.elements=[+F[0],+F[2],+F[4],+F[1],+F[3],+F[5],0,0,1]:this.elements=[F,E,G,K,J,O,T||0,Q||0,M||1]}function k(F,E,G){this.elements=[F,
E,G]}function l(F,E){if(!(this instanceof l))return new l(F,E);1!==F.nodeType&&c.error("Panzoom called on non-Element node");c.contains(q,F)||c.error("Panzoom element must be attached to the document");var G=c.data(F,"__pz__");if(G)return G;this.options=E=c.extend({},l.defaults,E);this.elem=F;G=this.$elem=c(F);this.$set=E.$set&&E.$set.length?E.$set:G;this.$doc=c(F.ownerDocument||q);this.$parent=G.parent();this.isSVG=B.test(F.namespaceURI)&&"svg"!==F.nodeName.toLowerCase();this.panning=!1;this._buildTransform();
this._transform=!this.isSVG&&c.cssProps.transform.replace(y,"-$1").toLowerCase();this._buildTransition();this.resetDimensions();var K=c(),J=this;c.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(O,T){J[T]=E[T]||K});this.enable();c.data(F,"__pz__",this)}var m="over out down up move enter leave cancel".split(" "),n=c.extend({},c.event.mouseHooks),p={};if(a.PointerEvent)c.each(m,function(F,E){c.event.fixHooks[p[E]="pointer"+E]=n});else{var r=n.props;n.props=r.concat("touches changedTouches targetTouches altKey ctrlKey metaKey shiftKey".split(" "));
n.filter=function(F,E){var G,K=r.length;if(!E.pageX&&E.touches&&(G=E.touches[0]))for(;K--;)F[r[K]]=G[r[K]];return F};c.each(m,function(F,E){2>F?p[E]="mouse"+E:(F="touch"+("down"===E?"start":"up"===E?"end":E),c.event.fixHooks[F]=n,p[E]=F+" mouse"+E)})}c.pointertouch=p;var q=a.document,u=Array.prototype.slice,v=!!a.PointerEvent,x=function(){var F=q.createElement("input");F.setAttribute("oninput","return");return"function"===typeof F.oninput}(),y=/([A-Z])/g,B=/^http:[\w\.\/]+svg$/,C=/^inline/,H=RegExp("^matrix\\((\\-?[\\d\\.e]+)\\,?\\s*(\\-?[\\d\\.e]+)\\,?\\s*(\\-?[\\d\\.e]+)\\,?\\s*(\\-?[\\d\\.e]+)\\,?\\s*(\\-?[\\d\\.e]+)\\,?\\s*(\\-?[\\d\\.e]+)\\)$");
h.prototype={x:function(F){var E=this.elements,G=F.elements;return F instanceof k&&3===G.length?new k(E[0]*G[0]+E[1]*G[1]+E[2]*G[2],E[3]*G[0]+E[4]*G[1]+E[5]*G[2],E[6]*G[0]+E[7]*G[1]+E[8]*G[2]):G.length===E.length?new h(E[0]*G[0]+E[1]*G[3]+E[2]*G[6],E[0]*G[1]+E[1]*G[4]+E[2]*G[7],E[0]*G[2]+E[1]*G[5]+E[2]*G[8],E[3]*G[0]+E[4]*G[3]+E[5]*G[6],E[3]*G[1]+E[4]*G[4]+E[5]*G[7],E[3]*G[2]+E[4]*G[5]+E[5]*G[8],E[6]*G[0]+E[7]*G[3]+E[8]*G[6],E[6]*G[1]+E[7]*G[4]+E[8]*G[7],E[6]*G[2]+E[7]*G[5]+E[8]*G[8]):!1},inverse:function(){var F=
1/this.determinant(),E=this.elements;return new h(F*(E[8]*E[4]-E[7]*E[5]),F*-(E[8]*E[1]-E[7]*E[2]),F*(E[5]*E[1]-E[4]*E[2]),F*-(E[8]*E[3]-E[6]*E[5]),F*(E[8]*E[0]-E[6]*E[2]),F*-(E[5]*E[0]-E[3]*E[2]),F*(E[7]*E[3]-E[6]*E[4]),F*-(E[7]*E[0]-E[6]*E[1]),F*(E[4]*E[0]-E[3]*E[1]))},determinant:function(){var F=this.elements;return F[0]*(F[8]*F[4]-F[7]*F[5])-F[3]*(F[8]*F[1]-F[7]*F[2])+F[6]*(F[5]*F[1]-F[4]*F[2])}};k.prototype.e=h.prototype.e=function(F){return this.elements[F]};l.rmatrix=H;l.events=c.pointertouch;
l.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,increment:.3,minScale:.4,maxScale:5,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1};l.prototype={constructor:l,instance:function(){return this},enable:function(){this._initStyle();this._bind();this.disabled=!1},disable:function(){this.disabled=!0;this._resetStyle();this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable();c.removeData(this.elem,"__pz__")},
resetDimensions:function(){var F=this.$parent;this.container={width:F.innerWidth(),height:F.innerHeight()};F=F.offset();var E=this.elem,G=this.$elem;this.isSVG?(G=E.getBoundingClientRect(),G={left:G.left-F.left,top:G.top-F.top,width:G.width,height:G.height,margin:{left:0,top:0}}):G={left:c.css(E,"left",!0)||0,top:c.css(E,"top",!0)||0,width:G.innerWidth(),height:G.innerHeight(),margin:{top:c.css(E,"marginTop",!0)||0,left:c.css(E,"marginLeft",!0)||0}};G.widthBorder=c.css(E,"borderLeftWidth",!0)+c.css(E,
"borderRightWidth",!0)||0;G.heightBorder=c.css(E,"borderTopWidth",!0)+c.css(E,"borderBottomWidth",!0)||0;this.dimensions=G},reset:function(F){F=b(F);var E=this.setMatrix(this._origTransform,F);F.silent||this._trigger("reset",E)},resetZoom:function(F){F=b(F);var E=this.getMatrix(this._origTransform);F.dValue=E[3];this.zoom(E[0],F)},resetPan:function(F){var E=this.getMatrix(this._origTransform);this.pan(E[4],E[5],b(F))},setTransform:function(F){for(var E=this.isSVG?"attr":"style",G=this.$set,K=G.length;K--;)c[E](G[K],
"transform",F)},getTransform:function(F){var E=this.$set[0];F?this.setTransform(F):F=c[this.isSVG?"attr":"style"](E,"transform");"none"===F||H.test(F)||this.setTransform(F=c.css(E,"transform"));return F||"none"},getMatrix:function(F){(F=H.exec(F||this.getTransform()))&&F.shift();return F||[1,0,0,1,0,0]},setMatrix:function(F,E){if(!this.disabled){E||={};"string"===typeof F&&(F=this.getMatrix(F));var G,K=+F[0],J=this.$parent;if(G="undefined"!==typeof E.contain?E.contain:this.options.contain){var O=
this._checkDims();var T=this.container;var Q=O.width+O.widthBorder;var M=O.height+O.heightBorder;var W=(Q*Math.abs(K)-T.width)/2;var da=(M*Math.abs(K)-T.height)/2;var ma=O.left+O.margin.left;var fa=O.top+O.margin.top;var xa=W;var Ea=da;if("invert"===G){G=Q>T.width?Q-T.width:0;var Da=M>T.height?M-T.height:0;W+=(T.width-Q)/2;da+=(T.height-M)/2;F[4]=Math.max(Math.min(F[4],W-ma),-W-ma-G);F[5]=Math.max(Math.min(F[5],da-fa),-da-fa-Da+O.heightBorder);T.width>Q*Math.abs(K)&&(W<xa?F[4]+=xa:(F[4]=1<K?F[4]-
xa:F[4]+xa,F[4]=Math.abs(F[4])));0==Da&&0!=F[5]&&F[5]>F[5]+Ea&&(F[5]+=Ea,M*Math.abs(K)<T.height&&(F[5]=Math.abs(F[5])))}else da+=O.heightBorder/2,G=T.width>Q?T.width-Q:0,Da=T.height>M?T.height-M:0,"center"===J.css("textAlign")&&C.test(c.css(this.elem,"display"))?G=0:W=da=0,F[4]=Math.min(Math.max(F[4],W-ma),-W-ma+G),F[5]=Math.min(Math.max(F[5],da-fa),-da-fa+Da)}"skip"!==E.animate&&this.transition(!E.animate);E.range&&this.$zoomRange.val(K);F=F.map(function(Fa){return Number.parseFloat(Fa).toFixed(2)});
this.setTransform("matrix("+F.join(",")+")");E.silent||this._trigger("change",F);return F}},isPanning:function(){return this.panning},transition:function(F){if(this._transition){F=F||!this.options.transition?"none":this._transition;for(var E=this.$set,G=E.length;G--;)c.style(E[G],"transition")!==F&&c.style(E[G],"transition",F)}},pan:function(F,E,G){if(!this.options.disablePan){G||={};var K=G.matrix;K||=this.getMatrix();G.relative&&(F+=+K[4],E+=+K[5]);K[4]=F;K[5]=E;this.setMatrix(K,G);G.silent||this._trigger("pan",
K[4],K[5])}},zoom:function(F,E){"object"===typeof F?(E=F,F=null):E||={};E=c.extend({},this.options,E);if(!E.disableZoom){var G=!1,K=E.matrix||this.getMatrix();"number"!==typeof F&&(F=+K[0]+E.increment*(F?-1:1),G=!0);F>E.maxScale?F=E.maxScale:F<E.minScale&&(F=E.minScale);var J=E.focal;if(J&&!E.disablePan){var O=this._checkDims(),T=J.clientX;J=J.clientY;this.isSVG||(T-=(O.width+O.widthBorder)/2,J-=(O.height+O.heightBorder)/2);var Q=new k(T,J,1);O=new h(K);var M=this.parentOffset||this.$parent.offset();
M=new h(1,0,M.left-this.$doc.scrollLeft(),0,1,M.top-this.$doc.scrollTop());Q=O.inverse().x(M.inverse().x(Q));var W=F/K[0];O=O.x(new h([W,0,0,W,0,0]));Q=M.x(O.x(Q));K[4]=+K[4]+(T-Q.e(0));K[5]=+K[5]+(J-Q.e(1))}K[0]=F;K[3]="number"===typeof E.dValue?E.dValue:F;this.setMatrix(K,{animate:"boolean"===typeof E.animate?E.animate:G,range:!E.noSetRange});E.silent||this._trigger("zoom",K[0],E)}},option:function(F,E){if(!F)return c.extend({},this.options);if("string"===typeof F){if(1===arguments.length)return void 0!==
this.options[F]?this.options[F]:null;var G={};G[F]=E}else G=F;this._setOptions(G)},_setOptions:function(F){c.each(F,c.proxy(function(E,G){switch(E){case "disablePan":this._resetStyle();case "$zoomIn":case "$zoomOut":case "$zoomRange":case "$reset":case "disableZoom":case "onStart":case "onChange":case "onZoom":case "onPan":case "onEnd":case "onReset":case "eventNamespace":this._unbind()}this.options[E]=G;switch(E){case "disablePan":this._initStyle();case "$zoomIn":case "$zoomOut":case "$zoomRange":case "$reset":this[E]=
G;case "disableZoom":case "onStart":case "onChange":case "onZoom":case "onPan":case "onEnd":case "onReset":case "eventNamespace":this._bind();break;case "cursor":c.style(this.elem,"cursor",G);break;case "minScale":this.$zoomRange.attr("min",G);break;case "maxScale":this.$zoomRange.attr("max",G);break;case "rangeStep":this.$zoomRange.attr("step",G);break;case "startTransform":this._buildTransform();break;case "duration":case "easing":this._buildTransition();case "transition":this.transition();break;
case "$set":G instanceof c&&G.length&&(this.$set=G,this._initStyle(),this._buildTransform())}},this))},_initStyle:function(){var F={"backface-visibility":"hidden","transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(F.cursor=this.options.cursor);this.$set.css(F);var E=this.$parent;E.length&&!c.nodeName(E[0],"body")&&(F={overflow:"hidden"},"static"===E.css("position")&&(F.position="relative"),E.css(F))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""});this.$parent.css({overflow:"",
position:""})},_bind:function(){var F=this,E=this.options,G=E.eventNamespace,K=v?"pointerdown"+G:"touchstart"+G+" mousedown"+G,J=v?"pointerup"+G:"touchend"+G+" click"+G,O={},T=this.$reset,Q=this.$zoomRange;c.each("Start Change Zoom Pan End Reset".split(" "),function(){var M=E["on"+this];c.isFunction(M)&&(O["panzoom"+this.toLowerCase()+G]=M)});E.disablePan&&E.disableZoom||(O[K]=function(M){var W;("touchstart"===M.type?!(W=M.touches)||(1!==W.length||E.disablePan)&&2!==W.length:E.disablePan||1!==M.which)||
(M.preventDefault(),M.stopPropagation(),F._startMove(M,W))});this.$elem.on(O);if(T.length)T.on(J,function(M){M.preventDefault();F.reset()});Q.length&&Q.attr({step:E.rangeStep===l.defaults.rangeStep&&Q.attr("step")||E.rangeStep,min:E.minScale,max:E.maxScale}).prop({value:this.getMatrix()[0]});E.disableZoom||(K=this.$zoomIn,T=this.$zoomOut,K.length&&T.length&&(K.on(J,function(M){M.preventDefault();F.zoom()}),T.on(J,function(M){M.preventDefault();F.zoom(!0)})),Q.length&&(O={},O[(v?"pointerdown":"mousedown")+
G]=function(){F.transition(!0)},O[(x?"input":"change")+G]=function(){F.zoom(+this.value,{noSetRange:!0})},Q.on(O)))},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var F=this.options;this._transition=this._transform+" "+F.duration+"ms "+F.easing}},_checkDims:function(){var F=this.dimensions;
F.width&&F.height||this.resetDimensions();return this.dimensions},_getDistance:function(F){var E=F[0];F=F[1];return Math.sqrt(Math.pow(Math.abs(F.clientX-E.clientX),2)+Math.pow(Math.abs(F.clientY-E.clientY),2))},_getMiddle:function(F){var E=F[0];F=F[1];return{clientX:(F.clientX-E.clientX)/2+E.clientX,clientY:(F.clientY-E.clientY)/2+E.clientY}},_trigger:function(F){"string"===typeof F&&(F="panzoom"+F);this.$elem.triggerHandler(F,[this].concat(u.call(arguments,1)))},_startMove:function(F,E){var G=this,
K=this.options,J=K.eventNamespace,O=this.getMatrix(),T=O.slice(0),Q=+T[4],M=+T[5],W={matrix:O,animate:"skip"};if(v){var da="pointermove";var ma="pointerup"}else"touchstart"===F.type?(da="touchmove",ma="touchend"):(da="mousemove",ma="mouseup");da+=J;ma+=J;this.transition(!0);this.panning=!0;this._trigger("start",F,E);if(E&&2===E.length){var fa=this._getDistance(E);var xa=+O[0];var Ea=this._getMiddle(E);F=function(ta){ta.preventDefault();ta=G._getMiddle(E=ta.touches);var X=G._getDistance(E)-fa;G.zoom(K.increment/
100*X+xa,{focal:ta,matrix:O,animate:!1});G.pan(+O[4]+ta.clientX-Ea.clientX,+O[5]+ta.clientY-Ea.clientY,W);Ea=ta}}else{var Da=F.pageX;var Fa=F.pageY;F=function(ta){ta.preventDefault();G.pan(Q+ta.pageX-Da,M+ta.pageY-Fa,W)}}c(q).off(J).on(da,F).on(ma,function(ta){ta.preventDefault();c(this).off(J);G.panning=!1;ta.type="panzoomend";var X=G._trigger,ja;a:{for(ja=O.length;--ja;)if(+O[ja]!==+T[ja]){ja=!1;break a}ja=!0}X.call(G,ta,O,!ja)})}};c.Panzoom=l;c.fn.panzoom=function(F){var E,G;if("string"===typeof F){var K=
[];var J=u.call(arguments,1);this.each(function(){(E=c.data(this,"__pz__"))?"_"!==F.charAt(0)&&"function"===typeof(G=E[F])&&void 0!==(G=G.apply(E,J))&&K.push(G):K.push(void 0)});return K.length?1===K.length?K[0]:K:this}return this.each(function(){new l(this,F)})};return l});/*
 Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 Licensed under the MIT License (LICENSE.txt).

 Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 Thanks to: Seamus Leahy for adding deltaX and deltaY

 Version: 3.0.6

 Requires: 1.2.2+
*/
(function(a){function c(k){var l=k||window.event,m=[].slice.call(arguments,1),n=0,p=0,r=0;return k=a.event.fix(l),k.type="mousewheel",l.wheelDelta&&(n=l.wheelDelta/120),l.detail&&(n=-l.detail/3),r=n,void 0!==l.axis&&l.axis===l.HORIZONTAL_AXIS&&(r=0,p=-1*n),void 0!==l.wheelDeltaY&&(r=l.wheelDeltaY/120),void 0!==l.wheelDeltaX&&(p=-1*l.wheelDeltaX/120),m.unshift(k,n,p,r),(a.event.dispatch||a.event.handle).apply(this,m)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var h=b.length;h;)a.event.fixHooks[b[--h]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var k=b.length;k;)this.addEventListener(b[--k],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var k=b.length;k;)this.removeEventListener(b[--k],c,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(k){return k?this.bind("mousewheel",k):this.trigger("mousewheel")},unmousewheel:function(k){return this.unbind("mousewheel",k)}})})(jQuery);/*
 promise-polyfill 3.1.0 */
(function(a,c){"function"===typeof define&&define.amd?define(c):"object"===typeof exports&&"string"!==typeof exports.nodeName?module.exports=c():a.Croppie=c()})("undefined"!==typeof self?self:this,function(){function a(R){if(R in fa)return R;for(var Z=R[0].toUpperCase()+R.slice(1),Y=ma.length;Y--;)if(R=ma[Y]+Z,R in fa)return R}function c(R,Z){R=R||{};for(var Y in Z)Z[Y]&&Z[Y].constructor&&Z[Y].constructor===Object?(R[Y]=R[Y]||{},c(R[Y],Z[Y])):R[Y]=Z[Y];return R}function b(R){if("createEvent"in document){var Z=
document.createEvent("HTMLEvents");Z.initEvent("change",!1,!0);R.dispatchEvent(Z)}else R.fireEvent("onchange")}function h(R,Z,Y){if("string"===typeof Z){var ha=Z;Z={};Z[ha]=Y}for(var A in Z)R.style[A]=Z[A]}function k(R,Z){R.classList?R.classList.add(Z):R.className+=" "+Z}function l(R,Z){if(!R)throw"Source image missing";var Y=new Image;Y.style.opacity="0";return new Promise(function(ha,A){function va(){Y.style.opacity="1";setTimeout(function(){ha(Y)},1)}Y.removeAttribute("crossOrigin");R.match(/^https?:\/\/|^\/\//)&&
Y.setAttribute("crossOrigin","anonymous");Y.onload=function(){Z?EXIF.getData(Y,function(){va()}):va()};Y.onerror=function(ra){Y.style.opacity=1;setTimeout(function(){A(ra)},1)};Y.src=R})}function m(R,Z){var Y=R.naturalWidth,ha=R.naturalHeight;(R=Z||n(R))&&5<=R&&(R=Y,Y=ha,ha=R);return{width:Y,height:ha}}function n(R){return R.exifdata&&R.exifdata.Orientation?parseInt(R.exifdata.Orientation,10):1}function p(R,Z,Y){var ha=Z.width,A=Z.height,va=R.getContext("2d");R.width=Z.width;R.height=Z.height;va.save();
switch(Y){case 2:va.translate(ha,0);va.scale(-1,1);break;case 3:va.translate(ha,A);va.rotate(180*Math.PI/180);break;case 4:va.translate(0,A);va.scale(1,-1);break;case 5:R.width=A;R.height=ha;va.rotate(90*Math.PI/180);va.scale(1,-1);break;case 6:R.width=A;R.height=ha;va.rotate(90*Math.PI/180);va.translate(0,-A);break;case 7:R.width=A;R.height=ha;va.rotate(-90*Math.PI/180);va.translate(-ha,A);va.scale(1,-1);break;case 8:R.width=A,R.height=ha,va.translate(0,ha),va.rotate(-90*Math.PI/180)}va.drawImage(Z,
0,0,ha,A);va.restore()}function r(){function R(oa){if(void 0===oa.button||0===oa.button)if(oa.preventDefault(),!va){var Ga=ha.elements.overlay.getBoundingClientRect();va=!0;na=oa.pageX;wa=oa.pageY;ra=-1!==oa.currentTarget.className.indexOf("vertical")?"v":"h";Oa=Ga.width;Pa=Ga.height;oa.touches&&(oa=oa.touches[0],na=oa.pageX,wa=oa.pageY);window.addEventListener("mousemove",Z);window.addEventListener("touchmove",Z);window.addEventListener("mouseup",Y);window.addEventListener("touchend",Y);document.body.style[ta]=
"none"}}function Z(oa){var Ga=oa.pageX,Ka=oa.pageY;oa.preventDefault();oa.touches&&(Ka=oa.touches[0],Ga=Ka.pageX,Ka=Ka.pageY);oa=Ga-na;var Qa=Ka-wa,db=ha.options.viewport.height+Qa,Ya=ha.options.viewport.width+oa;"v"===ra&&50<=db&&db<=Pa?(h(A,{height:db+"px"}),ha.options.boundary.height+=Qa,h(ha.elements.boundary,{height:ha.options.boundary.height+"px"}),ha.options.viewport.height+=Qa,h(ha.elements.viewport,{height:ha.options.viewport.height+"px"})):"h"===ra&&50<=Ya&&Ya<=Oa&&(h(A,{width:Ya+"px"}),
ha.options.boundary.width+=oa,h(ha.elements.boundary,{width:ha.options.boundary.width+"px"}),ha.options.viewport.width+=oa,h(ha.elements.viewport,{width:ha.options.viewport.width+"px"}));C.call(ha);E.call(ha);y.call(ha);H.call(ha);wa=Ka;na=Ga}function Y(){va=!1;window.removeEventListener("mousemove",Z);window.removeEventListener("touchmove",Z);window.removeEventListener("mouseup",Y);window.removeEventListener("touchend",Y);document.body.style[ta]=""}var ha=this,A=document.createElement("div"),va=
!1,ra,na,wa,Oa,Pa;k(A,"cr-resizer");h(A,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});if(this.options.resizeControls.height){var ia=document.createElement("div");k(ia,"cr-resizer-vertical");A.appendChild(ia)}if(this.options.resizeControls.width){var la=document.createElement("div");k(la,"cr-resizer-horisontal");A.appendChild(la)}ia&&(ia.addEventListener("mousedown",R),ia.addEventListener("touchstart",R));la&&(la.addEventListener("mousedown",R),la.addEventListener("touchstart",
R));this.elements.boundary.appendChild(A)}function q(R){if(this.options.enableZoom){var Z=this.elements.zoomer;R=Q(R,4);Z.value=Math.max(parseFloat(Z.min),Math.min(parseFloat(Z.max),R)).toString()}}function u(){function R(){v.call(Y,{value:parseFloat(A.value),origin:new P(Y.elements.preview),viewportRect:Y.elements.viewport.getBoundingClientRect(),transform:ja.parse(Y.elements.preview)})}function Z(va){if("ctrl"===Y.options.mouseWheelZoom&&!0!==va.ctrlKey)return 0;var ra=Y._currentZoom+(va.wheelDelta?
va.wheelDelta/1200:va.deltaY?va.deltaY/1060:va.detail?va.detail/-60:0)*Y._currentZoom;va.preventDefault();q.call(Y,ra);R.call(Y)}var Y=this,ha=Y.elements.zoomerWrap=document.createElement("div"),A=Y.elements.zoomer=document.createElement("input");k(ha,"cr-slider-wrap");k(A,"cr-slider");A.type="range";A.step="0.0001";A.value="1";A.style.display=Y.options.showZoomer?"":"none";A.setAttribute("aria-label","zoom");Y.element.appendChild(ha);ha.appendChild(A);Y._currentZoom=1;Y.elements.zoomer.addEventListener("input",
R);Y.elements.zoomer.addEventListener("change",R);Y.options.mouseWheelZoom&&(Y.elements.boundary.addEventListener("mousewheel",Z),Y.elements.boundary.addEventListener("DOMMouseScroll",Z))}function v(R){function Z(){var ra={};ra[Da]=ha.toString();ra[Fa]=va.toString();h(Y.elements.preview,ra)}var Y=this,ha=R?R.transform:ja.parse(Y.elements.preview),A=R?R.viewportRect:Y.elements.viewport.getBoundingClientRect(),va=R?R.origin:new P(Y.elements.preview);Y._currentZoom=R?R.value:Y._currentZoom;ha.scale=
Y._currentZoom;Y.elements.zoomer.setAttribute("aria-valuenow",Y._currentZoom);Z();Y.options.enforceBoundary&&(A=x.call(Y,A),R=A.translate,A=A.origin,ha.x>=R.maxX&&(va.x=A.minX,ha.x=R.maxX),ha.x<=R.minX&&(va.x=A.maxX,ha.x=R.minX),ha.y>=R.maxY&&(va.y=A.minY,ha.y=R.maxY),ha.y<=R.minY&&(va.y=A.maxY,ha.y=R.minY));Z();ca.call(Y);H.call(Y)}function x(R){var Z=this._currentZoom,Y=R.width;R=R.height;var ha=this.elements.boundary.clientWidth/2,A=this.elements.boundary.clientHeight/2,va=this.elements.preview.getBoundingClientRect(),
ra=va.width;va=va.height;var na=Y/2,wa=R/2;ha=-1*(na/Z-ha);A=-1*(wa/Z-A);na*=1/Z;wa*=1/Z;return{translate:{maxX:ha,minX:ha-(1/Z*ra-1/Z*Y),maxY:A,minY:A-(1/Z*va-1/Z*R)},origin:{maxX:1/Z*ra-na,minX:na,maxY:1/Z*va-wa,minY:wa}}}function y(R){var Z=this._currentZoom,Y=this.elements.preview.getBoundingClientRect(),ha=this.elements.viewport.getBoundingClientRect(),A=ja.parse(this.elements.preview.style[Da]),va=new P(this.elements.preview),ra=ha.top-Y.top+ha.height/2;Y=ha.left-Y.left+ha.width/2;R?(ra=va.y,
Z=A.x,Y=A.y,R=va.x,A.y=Z,A.x=Y):(R=ra/Z,ra=Y/Z,Y=(R-va.y)*(1-Z),va=(ra-va.x)*(1-Z),A.x-=va,A.y-=Y);va={};va[Fa]=ra+"px "+R+"px";va[Da]=A.toString();h(this.elements.preview,va)}function B(){function R(oa,Ga){var Ka=ra.elements.preview.getBoundingClientRect(),Qa=la.y+Ga,db=la.x+oa;ra.options.enforceBoundary?(ia.top>Ka.top+Ga&&ia.bottom<Ka.bottom+Ga&&(la.y=Qa),ia.left>Ka.left+oa&&ia.right<Ka.right+oa&&(la.x=db)):(la.y=Qa,la.x=db)}function Z(oa){ra.elements.preview.setAttribute("aria-grabbed",oa);ra.elements.boundary.setAttribute("aria-dropeffect",
oa?"move":"none")}function Y(oa){var Ga={};R(oa[0],oa[1]);Ga[Da]=la.toString();h(ra.elements.preview,Ga);C.call(ra);document.body.style[ta]="";y.call(ra);H.call(ra);Pa=0}function ha(oa){if(void 0===oa.button||0===oa.button)oa.preventDefault(),na||(na=!0,wa=oa.pageX,Oa=oa.pageY,oa.touches&&(oa=oa.touches[0],wa=oa.pageX,Oa=oa.pageY),Z(na),la=ja.parse(ra.elements.preview),window.addEventListener("mousemove",A),window.addEventListener("touchmove",A),window.addEventListener("mouseup",va),window.addEventListener("touchend",
va),document.body.style[ta]="none",ia=ra.elements.viewport.getBoundingClientRect())}function A(oa){oa.preventDefault();var Ga=oa.pageX,Ka=oa.pageY;oa.touches&&(Ka=oa.touches[0],Ga=Ka.pageX,Ka=Ka.pageY);var Qa=Ga-wa,db=Ka-Oa,Ya={};"touchmove"===oa.type&&1<oa.touches.length?(Ga=oa.touches[0],oa=oa.touches[1],oa=Math.sqrt((Ga.pageX-oa.pageX)*(Ga.pageX-oa.pageX)+(Ga.pageY-oa.pageY)*(Ga.pageY-oa.pageY)),Pa||=oa/ra._currentZoom,q.call(ra,oa/Pa),b(ra.elements.zoomer)):(R(Qa,db),Ya[Da]=la.toString(),h(ra.elements.preview,
Ya),C.call(ra),Oa=Ka,wa=Ga)}function va(){na=!1;Z(na);window.removeEventListener("mousemove",A);window.removeEventListener("touchmove",A);window.removeEventListener("mouseup",va);window.removeEventListener("touchend",va);document.body.style[ta]="";y.call(ra);H.call(ra);Pa=0}var ra=this,na=!1,wa,Oa,Pa,ia,la;ra.elements.overlay.addEventListener("mousedown",ha);ra.elements.viewport.addEventListener("keydown",function(oa){function Ga(Ka){switch(Ka){case 37:return[1,0];case 38:return[0,1];case 39:return[-1,
0];case 40:return[0,-1]}}!oa.shiftKey||38!==oa.keyCode&&40!==oa.keyCode?ra.options.enableKeyMovement&&37<=oa.keyCode&&40>=oa.keyCode&&(oa.preventDefault(),oa=Ga(oa.keyCode),la=ja.parse(ra.elements.preview),document.body.style[ta]="none",ia=ra.elements.viewport.getBoundingClientRect(),Y(oa)):(oa=38===oa.keyCode?parseFloat(ra.elements.zoomer.value)+parseFloat(ra.elements.zoomer.step):parseFloat(ra.elements.zoomer.value)-parseFloat(ra.elements.zoomer.step),ra.setZoom(oa))});ra.elements.overlay.addEventListener("touchstart",
ha)}function C(){if(this.elements){var R=this.elements.boundary.getBoundingClientRect(),Z=this.elements.preview.getBoundingClientRect();h(this.elements.overlay,{width:Z.width+"px",height:Z.height+"px",top:Z.top-R.top+"px",left:Z.left-R.left+"px"})}}function H(){var R=this.get();if(0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth)if(this.options.update.call(this,R),this.$&&"undefined"===typeof Prototype)this.$(this.element).trigger("update.croppie",R);else{if(window.CustomEvent)var Z=
new CustomEvent("update",{detail:R});else Z=document.createEvent("CustomEvent"),Z.initCustomEvent("update",!0,!0,R);this.element.dispatchEvent(Z)}}function F(){var R={},Z=this.elements.preview,Y=new ja(0,0,1);var ha=new P;if(0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth&&!this.data.bound){this.data.bound=!0;R[Da]=Y.toString();R[Fa]=ha.toString();R.opacity=1;h(Z,R);ha=this.elements.preview.getBoundingClientRect();this._originalImageWidth=ha.width;this._originalImageHeight=
ha.height;this.data.orientation=this.options.enableExif&&window.EXIF?n(this.elements.img):this.data.orientation;this.options.enableZoom?E.call(this,!0):this._currentZoom=1;Y.scale=this._currentZoom;R[Da]=Y.toString();h(Z,R);if(this.data.points.length){R=this.data.points;if(4!==R.length)throw"Croppie - Invalid number of points supplied: "+R;Z=R[2]-R[0];ha=this.elements.viewport.getBoundingClientRect();var A=this.elements.boundary.getBoundingClientRect();Z=ha.width/Z;Y=-1*R[1]+(ha.top-A.top);ha=-1*
R[0]+(ha.left-A.left);A={};A[Fa]=R[0]+"px "+R[1]+"px";A[Da]=(new ja(ha,Y,Z)).toString();h(this.elements.preview,A);q.call(this,Z);this._currentZoom=Z}else R=this.elements.preview.getBoundingClientRect(),Z=this.elements.viewport.getBoundingClientRect(),Y=this.elements.boundary.getBoundingClientRect(),R=new ja(Z.left-Y.left-(R.width-Z.width)/2,Z.top-Y.top-(R.height-Z.height)/2,this._currentZoom),h(this.elements.preview,Da,R.toString());y.call(this);C.call(this)}}function E(R){var Z=Math.max(this.options.minZoom,
0)||0,Y=this.options.maxZoom||1.5,ha=this.elements.zoomer,A=parseFloat(ha.value),va=this.elements.boundary.getBoundingClientRect(),ra=m(this.elements.img,this.data.orientation),na=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(Z=na.width/ra.width,na=na.height/ra.height,Z=Math.max(Z,na));Z>=Y&&(Y=Z+1);ha.min=Q(Z,4);ha.max=Q(Y,4);!R&&(A<ha.min||A>ha.max)?q.call(this,A<ha.min?ha.min:ha.max):R&&(R=Math.max(va.width/ra.width,va.height/ra.height),R=null!==this.data.boundZoom?
this.data.boundZoom:R,q.call(this,R));b(ha)}function G(R){var Z=this.elements.canvas,Y=this.elements.img;Z.getContext("2d").clearRect(0,0,Z.width,Z.height);Z.width=Y.width;Z.height=Y.height;R=this.options.enableOrientation&&R||n(Y);p(Z,Y,R)}function K(R){var Z=R.points,Y=parseInt(Z[0],10),ha=parseInt(Z[1],10),A=parseInt(Z[2],10);Z=parseInt(Z[3],10);A-=Y;Z-=ha;var va=R.circle,ra=document.createElement("canvas"),na=ra.getContext("2d"),wa=R.outputWidth||A,Oa=R.outputHeight||Z;ra.width=wa;ra.height=Oa;
R.backgroundColor&&(na.fillStyle=R.backgroundColor,na.fillRect(0,0,wa,Oa));R=Y;var Pa=ha,ia=A,la=Z,oa=0,Ga=0,Ka=wa,Qa=Oa;0>Y&&(R=0,oa=Math.abs(Y)/A*wa);ia+R>this._originalImageWidth&&(ia=this._originalImageWidth-R,Ka=ia/A*wa);0>ha&&(Pa=0,Ga=Math.abs(ha)/Z*Oa);la+Pa>this._originalImageHeight&&(la=this._originalImageHeight-Pa,Qa=la/Z*Oa);na.drawImage(this.elements.preview,R,Pa,ia,la,oa,Ga,Ka,Qa);va&&(na.fillStyle="#fff",na.globalCompositeOperation="destination-in",na.beginPath(),na.arc(ra.width/2,ra.height/
2,ra.width/2,0,2*Math.PI,!0),na.closePath(),na.fill());return ra}function J(R){var Z=this;return new Promise(function(Y){K.call(Z,R).toBlob(function(ha){Y(ha)},R.format,R.quality)})}function O(R){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(Z){R.classList.add(Z)}),this.elements.img.parentNode.replaceChild(R,this.elements.img),this.elements.preview=R);this.elements.img=R}function T(R,Z){var Y=this,ha=[],A=null;var va=Y.options.enableExif&&window.EXIF;
if("string"===typeof R){var ra=R;R={}}else if(Array.isArray(R))ha=R.slice();else{if("undefined"===typeof R&&Y.data.url)return F.call(Y),H.call(Y),null;ra=R.url;ha=R.points||[];A="undefined"===typeof R.zoom?null:R.zoom}Y.data.bound=!1;Y.data.url=ra||Y.data.url;Y.data.boundZoom=A;return l(ra,va).then(function(na){O.call(Y,na);if(ha.length)Y.options.relative&&(ha=[ha[0]*na.naturalWidth/100,ha[1]*na.naturalHeight/100,ha[2]*na.naturalWidth/100,ha[3]*na.naturalHeight/100]);else{na=m(na);var wa=Y.elements.viewport.getBoundingClientRect(),
Oa=wa.width/wa.height;if(na.width/na.height>Oa){var Pa=na.height;wa=Pa*Oa}else wa=na.width,Pa=na.height/Oa;Oa=(na.width-wa)/2;na=(na.height-Pa)/2;Y.data.points=[Oa,na,Oa+wa,na+Pa]}Y.data.orientation=R.orientation||1;Y.data.points=ha.map(function(ia){return parseFloat(ia)});Y.options.useCanvas&&G.call(Y,Y.data.orientation);F.call(Y);H.call(Y);Z&&Z()})}function Q(R,Z){return parseFloat(R).toFixed(Z||0)}function M(){var R=this.elements.preview.getBoundingClientRect(),Z=this.elements.viewport.getBoundingClientRect(),
Y=Z.left-R.left;R=Z.top-R.top;var ha=Y+this.elements.viewport.offsetWidth+(Z.width-this.elements.viewport.offsetWidth)/2;Z=R+this.elements.viewport.offsetHeight+(Z.height-this.elements.viewport.offsetHeight)/2;var A=this._currentZoom;if(Infinity===A||isNaN(A))A=1;var va=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;Y=Math.max(va,Y/A);R=Math.max(va,R/A);ha=Math.max(va,ha/A);Z=Math.max(va,Z/A);return{points:[Q(Y),Q(R),Q(ha),Q(Z)],zoom:A,orientation:this.data.orientation}}function W(R){var Z=
this,Y=M.call(Z),ha=c(c({},ea),c({},R)),A="string"===typeof R?R:ha.type||"base64";R=ha.size||"viewport";var va=ha.format,ra=ha.quality,na=ha.backgroundColor;ha="boolean"===typeof ha.circle?ha.circle:"circle"===Z.options.viewport.type;var wa=Z.elements.viewport.getBoundingClientRect(),Oa=wa.width/wa.height;"viewport"===R?(Y.outputWidth=wa.width,Y.outputHeight=wa.height):"object"===typeof R&&(R.width&&R.height?(Y.outputWidth=R.width,Y.outputHeight=R.height):R.width?(Y.outputWidth=R.width,Y.outputHeight=
R.width/Oa):R.height&&(Y.outputWidth=R.height*Oa,Y.outputHeight=R.height));-1<sa.indexOf(va)&&(Y.format="image/"+va,Y.quality=ra);Y.circle=ha;Y.url=Z.data.url;Y.backgroundColor=na;return new Promise(function(Pa){switch(A.toLowerCase()){case "rawcanvas":Pa(K.call(Z,Y));break;case "canvas":case "base64":var ia=K.call(Z,Y).toDataURL(Y.format,Y.quality);Pa(ia);break;case "blob":J.call(Z,Y).then(Pa);break;default:ia=Y.points;var la=document.createElement("div"),oa=document.createElement("img"),Ga=ia[2]-
ia[0],Ka=ia[3]-ia[1];k(la,"croppie-result");la.appendChild(oa);h(oa,{left:-1*ia[0]+"px",top:-1*ia[1]+"px"});oa.src=Y.url;h(la,{width:Ga+"px",height:Ka+"px"});Pa(la)}})}function da(R,Z){if(-1<R.className.indexOf("croppie-container"))throw Error("Croppie: Can't initialize croppie more than once");this.element=R;this.options=c(c({},da.defaults),Z);if("img"===this.element.tagName.toLowerCase()){R=this.element;k(R,"cr-original-image");Z={"aria-hidden":"true",alt:""};for(var Y in Z)R.setAttribute(Y,Z[Y]);
Y=document.createElement("div");this.element.parentNode.appendChild(Y);Y.appendChild(R);this.element=Y;this.options.url=this.options.url||R.src}var ha=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||this.options.enableExif&&window.EXIF;this.data={};this.elements={};Y=this.elements.boundary=document.createElement("div");R=this.elements.viewport=document.createElement("div");var A=this.elements.img=document.createElement("img");
Z=this.elements.overlay=document.createElement("div");this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=A;k(Y,"cr-boundary");Y.setAttribute("aria-dropeffect","none");A=this.options.boundary.width;var va=this.options.boundary.height;h(Y,{width:A+(isNaN(A)?"":"px"),height:va+(isNaN(va)?"":"px")});k(R,"cr-viewport");ha&&k(R,ha);h(R,{width:this.options.viewport.width+"px",height:this.options.viewport.height+
"px"});R.setAttribute("tabindex",0);k(this.elements.preview,"cr-image");ha=this.elements.preview;A={alt:"preview","aria-grabbed":"false"};for(var ra in A)ha.setAttribute(ra,A[ra]);k(Z,"cr-overlay");this.element.appendChild(Y);Y.appendChild(this.elements.preview);Y.appendChild(R);Y.appendChild(Z);k(this.element,"croppie-container");this.options.customClass&&k(this.element,this.options.customClass);B.call(this);this.options.enableZoom&&u.call(this);this.options.enableResize&&r.call(this);this.options.url&&
(ra={url:this.options.url,points:this.options.points},delete this.options.url,delete this.options.points,T.call(this,ra))}"function"!==typeof Promise&&!function(R){function Z(la,oa){return function(){la.apply(oa,arguments)}}function Y(la){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof la)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];wa(la,Z(A,this),Z(va,this))}function ha(la){var oa=this;return null===
this._state?void this._deferreds.push(la):void Pa(function(){var Ga=oa._state?la.onFulfilled:la.onRejected;if(null===Ga)return void(oa._state?la.resolve:la.reject)(oa._value);try{var Ka=Ga(oa._value)}catch(Qa){return void la.reject(Qa)}la.resolve(Ka)})}function A(la){try{if(la===this)throw new TypeError("A promise cannot be resolved with itself.");if(la&&("object"===typeof la||"function"===typeof la)){var oa=la.then;if("function"===typeof oa)return void wa(Z(oa,la),Z(A,this),Z(va,this))}this._state=
!0;this._value=la;ra.call(this)}catch(Ga){va.call(this,Ga)}}function va(la){this._state=!1;this._value=la;ra.call(this)}function ra(){for(var la=0,oa=this._deferreds.length;oa>la;la++)ha.call(this,this._deferreds[la]);this._deferreds=null}function na(la,oa,Ga,Ka){this.onFulfilled="function"===typeof la?la:null;this.onRejected="function"===typeof oa?oa:null;this.resolve=Ga;this.reject=Ka}function wa(la,oa,Ga){var Ka=!1;try{la(function(Qa){Ka||(Ka=!0,oa(Qa))},function(Qa){Ka||(Ka=!0,Ga(Qa))})}catch(Qa){Ka||
(Ka=!0,Ga(Qa))}}var Oa=setTimeout,Pa="function"===typeof setImmediate&&setImmediate||function(la){Oa(la,1)},ia=Array.isArray||function(la){return"[object Array]"===Object.prototype.toString.call(la)};Y.prototype["catch"]=function(la){return this.then(null,la)};Y.prototype.then=function(la,oa){var Ga=this;return new Y(function(Ka,Qa){ha.call(Ga,new na(la,oa,Ka,Qa))})};Y.all=function(){var la=Array.prototype.slice.call(1===arguments.length&&ia(arguments[0])?arguments[0]:arguments);return new Y(function(oa,
Ga){function Ka(Ya,pb){try{if(pb&&("object"===typeof pb||"function"===typeof pb)){var Tb=pb.then;if("function"===typeof Tb)return void Tb.call(pb,function(Eb){Ka(Ya,Eb)},Ga)}la[Ya]=pb;0===--Qa&&oa(la)}catch(Eb){Ga(Eb)}}if(0===la.length)return oa([]);for(var Qa=la.length,db=0;db<la.length;db++)Ka(db,la[db])})};Y.resolve=function(la){return la&&"object"===typeof la&&la.constructor===Y?la:new Y(function(oa){oa(la)})};Y.reject=function(la){return new Y(function(oa,Ga){Ga(la)})};Y.race=function(la){return new Y(function(oa,
Ga){for(var Ka=0,Qa=la.length;Qa>Ka;Ka++)la[Ka].then(oa,Ga)})};Y._setImmediateFn=function(la){Pa=la};"undefined"!==typeof module&&module.exports?module.exports=Y:R.Promise||(R.Promise=Y)}(this);"undefined"!==typeof window&&"function"!==typeof window.CustomEvent&&function(){function R(Z,Y){Y=Y||{bubbles:!1,cancelable:!1,detail:void 0};var ha=document.createEvent("CustomEvent");ha.initCustomEvent(Z,Y.bubbles,Y.cancelable,Y.detail);return ha}R.prototype=window.Event.prototype;window.CustomEvent=R}();
"undefined"===typeof HTMLCanvasElement||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(R,Z,Y){Y=atob(this.toDataURL(Z,Y).split(",")[1]);for(var ha=Y.length,A=new Uint8Array(ha),va=0;va<ha;va++)A[va]=Y.charCodeAt(va);R(new Blob([A],{type:Z||"image/png"}))}});var ma=["Webkit","Moz","ms"],fa="undefined"!==typeof document?document.createElement("div").style:{},xa=[1,8,3,6],Ea=[2,7,4,5];var Da=a("transform");var Fa=a("transformOrigin");var ta=
a("userSelect");var X={translate3d:{suffix:", 0px"},translate:{suffix:""}},ja=function(R,Z,Y){this.x=parseFloat(R);this.y=parseFloat(Z);this.scale=parseFloat(Y)};ja.parse=function(R){return R.style?ja.parse(R.style[Da]):-1<R.indexOf("matrix")||-1<R.indexOf("none")?ja.fromMatrix(R):ja.fromString(R)};ja.fromMatrix=function(R){var Z=R.substring(7).split(",");Z.length&&"none"!==R||(Z=[1,0,0,1,0,0]);return new ja(parseInt(Z[4],10),parseInt(Z[5],10),parseFloat(Z[0]))};ja.fromString=function(R){var Z=R.split(") ");
R=Z[0].substring(da.globals.translate.length+1).split(",");Z=1<Z.length?Z[1].substring(6):1;return new ja(1<R.length?R[0]:0,1<R.length?R[1]:0,Z)};ja.prototype.toString=function(){return da.globals.translate+"("+this.x+"px, "+this.y+"px"+(X[da.globals.translate].suffix||"")+") scale("+this.scale+")"};var P=function(R){R&&R.style[Fa]?(R=R.style[Fa].split(" "),this.x=parseFloat(R[0]),this.y=parseFloat(R[1])):this.y=this.x=0};P.prototype.toString=function(){return this.x+"px "+this.y+"px"};var ca=function(R,
Z,Y){var ha;return function(){var A=this,va=arguments,ra=Y&&!ha;clearTimeout(ha);ha=setTimeout(function(){ha=null;Y||R.apply(A,va)},Z);ra&&R.apply(A,va)}}(C,500),ea={type:"canvas",format:"png",quality:1},sa=["jpeg","webp","png"];if("undefined"!==typeof window&&window.jQuery){var qa=window.jQuery;qa.fn.croppie=function(R){if("string"===typeof R){var Z=Array.prototype.slice.call(arguments,1),Y=qa(this).data("croppie");return"get"===R?Y.get():"result"===R?Y.result.apply(Y,Z):"bind"===R?Y.bind.apply(Y,
Z):this.each(function(){var ha=qa(this).data("croppie");if(ha){var A=ha[R];if(qa.isFunction(A))A.apply(ha,Z),"destroy"===R&&qa(this).removeData("croppie");else throw"Croppie "+R+" method not found";}})}return this.each(function(){var ha=new da(this,R);ha.$=qa;qa(this).data("croppie",ha)})}}da.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,
enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}};da.globals={translate:"translate3d"};c(da.prototype,{bind:function(R,Z){return T.call(this,R,Z)},get:function(){var R=M.call(this),Z=R.points;this.options.relative&&(Z[0]/=this.elements.img.naturalWidth/100,Z[1]/=this.elements.img.naturalHeight/100,Z[2]/=this.elements.img.naturalWidth/100,Z[3]/=this.elements.img.naturalHeight/100);return R},result:function(R){return W.call(this,
R)},refresh:function(){F.call(this)},setZoom:function(R){q.call(this,R);b(this.elements.zoomer)},rotate:function(R){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var Z=this.elements.canvas,Y=this.data,ha=this.data.orientation,A=-1<xa.indexOf(ha)?xa:Ea;ha=A.indexOf(ha);Y.orientation=A[(A.length+ha+R/90%A.length%A.length)%A.length];p(Z,this.elements.img,this.data.orientation);y.call(this,!0);E.call(this);1===Math.abs(R)/
90%2&&(R=this._originalImageWidth,this._originalImageWidth=this._originalImageHeight,this._originalImageHeight=R)},destroy:function(){this.element.removeChild(this.elements.boundary);var R=this.element;R.classList?R.classList.remove("croppie-container"):R.className=R.className.replace("croppie-container","");this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap);delete this.elements}});return da});!function a$jscomp$0(a,c,b){function k(n,p){if(!c[n]){if(!a[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);p=Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p;}p=c[n]={exports:{}};a[n][0].call(p.exports,function(q){var u=a[n][1][q];return k(u?u:q)},p,p.exports,a$jscomp$0,a,c,b)}return c[n].exports}for(var l="function"==typeof require&&require,m=0;m<b.length;m++)k(b[m]);return k}({1:[function(a,c,b){var h=a(2);(function(k){return k.payform=
h,k.payform.fn={formatCardNumber:function(){return h.cardNumberInput(this.get(0))},formatCardExpiry:function(){return h.expiryInput(this.get(0))},formatCardCVC:function(){return h.cvcInput(this.get(0))},formatNumeric:function(){return h.numericInput(this.get(0))}},k.fn.payform=function(l){return null!=k.payform.fn[l]&&k.payform.fn[l].call(this),this}})(window.jQuery||window.Zepto)},{}],2:[function(a,c,b){var h=[].indexOf||function(k){for(var l=0,m=this.length;m>l;l++)if(l in this&&this[l]===k)return l;
return-1};!function(k,l){return"undefined"!=typeof c&&null!==c?c.exports=l():"function"==typeof define&&"object"==typeof define.amd?define(k,l):this[k]=l()}("payform",function(){var k,l,m,n,p,r,q,u,v,x,y,B,C,H,F,E,G,K,J,O,T,Q;return T=function(M){var W,da,ma;return null!=M.selectionStart?M.selectionStart:null!=document.selection?(M.focus(),W=document.selection.createRange(),ma=M.createTextRange(),da=ma.duplicate(),ma.moveToBookmark(W.getBookmark()),da.setEndPoint("EndToStart",ma),da.text.length):
void 0},O=function(M){return function(W){return null==W&&(W=window.event),W.target=W.target||W.srcElement,W.which=W.which||W.keyCode,null==W.preventDefault&&(W.preventDefault=function(){return this.returnValue=!1}),M(W)}},Q=function(M,W,da){return da=O(da),null!=M.addEventListener?M.addEventListener(W,da,!1):M.attachEvent("on"+W,da)},B={},m=/(\d{1,4})/g,B.cards=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:m,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,
format:m,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",pattern:/^600/,format:m,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",pattern:/^5019/,format:m,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:m,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[0-5]/,format:m,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",
pattern:/^3[0689]/,format:m,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^6([045]|22)/,format:m,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^(62|88)/,format:m,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",pattern:/^35/,format:m,length:[16],cvcLength:[3],luhn:!0}],k=function(M){var W,da;M=(M+"").replace(/\D/g,"");var ma=B.cards;var fa=0;for(da=ma.length;da>fa;fa++)if(W=ma[fa],W.pattern.test(M))return W},l=function(M){var W,da;var ma=B.cards;var fa=0;for(da=
ma.length;da>fa;fa++)if(W=ma[fa],W.type===M)return W},y=function(M){var W;var da=!0;var ma=0;var fa=(M+"").split("").reverse();var xa=0;for(W=fa.length;W>xa;xa++)M=fa[xa],M=parseInt(M,10),(da=!da)&&(M*=2),9<M&&(M-=9),ma+=M;return 0===ma%10},x=function(M){var W;return null!=("undefined"!=typeof document&&null!==document&&null!=(W=document.selection)?W.createRange:void 0)&&document.selection.createRange().text?!0:null!=M.selectionStart&&M.selectionStart!==M.selectionEnd},H=function(M){var W;return W=
T(M.target),M.target.value=B.formatCardNumber(M.target.value),null!=W&&"change"!==M.type?M.target.setSelectionRange(W,W):void 0},q=function(M){var W,da,ma,fa,xa,Ea,Da;return ma=String.fromCharCode(M.which),!/^\d+$/.test(ma)||(Da=M.target.value,W=k(Da+ma),fa=(Da.replace(/\D/g,"")+ma).length,Ea=16,W&&(Ea=W.length[W.length.length-1]),fa>=Ea||(da=T(M.target),da&&da!==Da.length))?void 0:(xa=W&&"amex"===W.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,xa.test(Da)?(M.preventDefault(),setTimeout(function(){return M.target.value=
Da+" "+ma})):xa.test(Da+ma)?(M.preventDefault(),setTimeout(function(){return M.target.value=Da+ma+" "})):void 0)},n=function(M){var W,da;return da=M.target.value,8!==M.which||(W=T(M.target),W&&W!==da.length)?void 0:/\d\s$/.test(da)?(M.preventDefault(),setTimeout(function(){return M.target.value=da.replace(/\d\s$/,"")})):/\s\d?$/.test(da)?(M.preventDefault(),setTimeout(function(){return M.target.value=da.replace(/\d$/,"")})):void 0},F=function(M){var W;return W=T(M.target),M.target.value=B.formatCardExpiry(M.target.value),
null!=W&&"change"!==M.type?M.target.setSelectionRange(W,W):void 0},r=function(M){var W,da;return W=String.fromCharCode(M.which),/^\d+$/.test(W)?(da=M.target.value+W,/^\d$/.test(da)&&"0"!==da&&"1"!==da?(M.preventDefault(),setTimeout(function(){return M.target.value="0"+da+" / "})):/^\d\d$/.test(da)?(M.preventDefault(),setTimeout(function(){return M.target.value=da+" / "})):void 0):void 0},u=function(M){var W,da;return W=String.fromCharCode(M.which),/^\d+$/.test(W)?(da=M.target.value,/^\d\d$/.test(da)?
M.target.value=da+" / ":void 0):void 0},v=function(M){var W,da;return da=String.fromCharCode(M.which),"/"===da||" "===da?(W=M.target.value,/^\d$/.test(W)&&"0"!==W?M.target.value="0"+W+" / ":void 0):void 0},p=function(M){var W,da;return da=M.target.value,8!==M.which||(W=T(M.target),W&&W!==da.length)?void 0:/\d\s\/\s$/.test(da)?(M.preventDefault(),setTimeout(function(){return M.target.value=da.replace(/\d\s\/\s$/,"")})):void 0},C=function(M){var W;return W=T(M.target),M.target.value=M.target.value.replace(/\D/g,
"").slice(0,4),null!=W&&"change"!==M.type?M.target.setSelectionRange(W,W):void 0},J=function(M){var W;if(!(M.metaKey||M.ctrlKey||0===M.which||33>M.which))return W=String.fromCharCode(M.which),/^\d+$/.test(W)?void 0:M.preventDefault()},G=function(M){var W,da,ma;return da=String.fromCharCode(M.which),/^\d+$/.test(da)&&!x(M.target)?(ma=(M.target.value+da).replace(/\D/g,""),W=k(ma),W&&ma.length>W.length[W.length.length-1]?M.preventDefault():16<ma.length?M.preventDefault():void 0):void 0},K=function(M){var W,
da;return W=String.fromCharCode(M.which),/^\d+$/.test(W)&&!x(M.target)?(da=M.target.value+W,da=da.replace(/\D/g,""),6<da.length?M.preventDefault():void 0):void 0},E=function(M){var W,da;return W=String.fromCharCode(M.which),/^\d+$/.test(W)&&!x(M.target)?(da=M.target.value+W,4<da.length?M.preventDefault():void 0):void 0},B.cvcInput=function(M){return Q(M,"keypress",J),Q(M,"keypress",E),Q(M,"paste",C),Q(M,"change",C),Q(M,"input",C)},B.expiryInput=function(M){return Q(M,"keypress",J),Q(M,"keypress",
K),Q(M,"keypress",r),Q(M,"keypress",v),Q(M,"keypress",u),Q(M,"keydown",p),Q(M,"change",F),Q(M,"input",F)},B.cardNumberInput=function(M){return Q(M,"keypress",J),Q(M,"keypress",G),Q(M,"keypress",q),Q(M,"keydown",n),Q(M,"paste",H),Q(M,"change",H),Q(M,"input",H)},B.numericInput=function(M){return Q(M,"keypress",J),Q(M,"paste",J),Q(M,"change",J),Q(M,"input",J)},B.parseCardExpiry=function(M){var W,da,ma,fa;return M=M.replace(/\s/g,""),fa=M.split("/",2),W=fa[0],ma=fa[1],2===(null!=ma?ma.length:void 0)&&
/^\d+$/.test(ma)&&(da=(new Date).getFullYear(),da=da.toString().slice(0,2),ma=da+ma),W=parseInt(W,10),ma=parseInt(ma,10),{month:W,year:ma}},B.validateCardNumber=function(M){var W,da;return M=(M+"").replace(/\s+|-/g,""),/^\d+$/.test(M)?(W=k(M),W?(da=M.length,0<=h.call(W.length,da)&&(!1===W.luhn||y(M))):!1):!1},B.validateCardExpiry=function(M,W){var da,ma,fa;return"object"==typeof M&&"month"in M&&(fa=M,M=fa.month,W=fa.year),M&&W?(M=String(M).trim(),W=String(W).trim(),/^\d+$/.test(M)&&/^\d+$/.test(W)&&
1<=M&&12>=M?(2===W.length&&(W=70>W?"20"+W:"19"+W),4!==W.length?!1:(ma=new Date(W,M),da=new Date,ma.setMonth(ma.getMonth()-1),ma.setMonth(ma.getMonth()+1,1),ma>da)):!1):!1},B.validateCardCVC=function(M,W){var da,ma;return M=String(M).trim(),/^\d+$/.test(M)?(da=l(W),null!=da?(ma=M.length,0<=h.call(da.cvcLength,ma)):3<=M.length&&4>=M.length):!1},B.parseCardType=function(M){var W;return M?(null!=(W=k(M))?W.type:void 0)||null:null},B.formatCardNumber=function(M){var W,da,ma,fa;return M=M.replace(/\D/g,
""),(W=k(M))?(ma=W.length[W.length.length-1],M=M.slice(0,ma),W.format.global?null!=(fa=M.match(W.format))?fa.join(" "):void 0:(da=W.format.exec(M),null!=da?(da.shift(),da=da.filter(Boolean),da.join(" ")):void 0)):M},B.formatCardExpiry=function(M){var W,da,ma,fa;return(da=M.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(W=da[1]||"",ma=da[2]||"",fa=da[3]||"",0<fa.length?ma=" / ":" /"===ma?(W=W.substring(0,1),ma=""):2===W.length||0<ma.length?ma=" / ":1===W.length&&"0"!==W&&"1"!==W&&(W="0"+W,ma=" / "),W+ma+
fa):""},B})},{}]},{},[1]);(function(a){a.downloadApp=function(c,b){var h={foo:"bar",onFoo:function(){}},k=this;k.settings={};var l=a(c),m,n,p,r,q;k.init=function(){k.settings=a.extend({},h,b);p=l.data("gaq-1");r=l.data("gaq-2");q=l.data("gaq-3");n=l.data("link");download_path=u();0==a("#_dif").length&&a("body").append('<iframe id="_dif" name="_dif" style="display:none"></iframe>');m=a("#_dif");m.on("load",function(){});l.on("click",function(v){v.preventDefault();k.download()});1==l.data("auto-download")&&k.download()};k.download=
function(){m.attr("src",n);"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",p,r,q]);(new Image(1,1)).src="/tracker/jaa.gif?ts="+Math.round((new Date).getTime()/1E3)+"&f="+download_path};var u=function(){var v=document.createElement("a");v.href=n;return v.pathname};k.init()};a.fn.downloadApp=function(c){return this.each(function(){if(void 0==a(this).data("downloadApp")){var b=new a.downloadApp(this,c);a(this).data("downloadApp",b)}})}})(jQuery);(function(a){a.fn.bgIframe=a.fn.bgiframe=function(c){if(a.browser.msie&&/6.0/.test(navigator.userAgent)){c=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},c||{});var b=function(k){return k&&k.constructor==Number?k+"px":k},h='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+c.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==c.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==c.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
b(c.top))+";left:"+("auto"==c.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(c.left))+";width:"+("auto"==c.width?"expression(this.parentNode.offsetWidth+'px')":b(c.width))+";height:"+("auto"==c.height?"expression(this.parentNode.offsetHeight+'px')":b(c.height))+';"/>';return this.each(function(){0==a("> iframe.bgiframe",this).length&&this.insertBefore(document.createElement(h),this.firstChild)})}return this}})(jQuery);(function(a){a.dimensions={version:"@VERSION"};a.each(["Height","Width"],function(b,h){a.fn["inner"+h]=function(){if(this[0]){var k="Height"==h?"Top":"Left",l="Height"==h?"Bottom":"Right";return this[h.toLowerCase()]()+c(this,"padding"+k)+c(this,"padding"+l)}};a.fn["outer"+h]=function(k){if(this[0]){var l="Height"==h?"Top":"Left",m="Height"==h?"Bottom":"Right";k=a.extend({margin:!1},k||{});return this[h.toLowerCase()]()+c(this,"border"+l+"Width")+c(this,"border"+m+"Width")+c(this,"padding"+l)+c(this,
"padding"+m)+(k.margin?c(this,"margin"+l)+c(this,"margin"+m):0)}}});a.each(["Left","Top"],function(b,h){a.fn["scroll"+h]=function(k){if(this[0])return void 0!=k?this.each(function(){this==window||this==document?window.scrollTo("Left"==h?k:a(window).scrollLeft(),"Top"==h?k:a(window).scrollTop()):this["scroll"+h]=k}):this[0]==window||this[0]==document?self["Left"==h?"pageXOffset":"pageYOffset"]||a.boxModel&&document.documentElement["scroll"+h]||document.body["scroll"+h]:this[0]["scroll"+h]}});a.fn.extend({position:function(){var b=
this[0];if(b){var h=this.offsetParent();var k=this.offset();var l=h.offset();k.top-=c(b,"marginTop");k.left-=c(b,"marginLeft");"undefined"!=typeof l?(l.top+=c(h,"borderTopWidth"),l.left+=c(h,"borderLeftWidth")):l={top:0,left:0};k={top:k.top-l.top,left:k.left-l.left}}return k},offsetParent:function(){for(var b=this[0].offsetParent;b&&!/^body|html$/i.test(b.tagName)&&"static"==a.css(b,"position");)b=b.offsetParent;return a(b)}});var c=function(b,h){return parseInt(a.css(b.jquery?b[0]:b,h))||0}})(jQuery);(function(a){a.fn.extend({autocompletelist:function(c,b){var h="string"==typeof c;b=a.extend({},a.Autocompleter.defaults,{url:h?c:null,data:h?null:c,delay:h?a.Autocompleter.defaults.delay:10,max:10,selectFirst:!0,multiple:!0,allowCustom:!0},b);b.highlight=b.highlight||function(k){return k};return this.each(function(){new a.Autocompleter(this,b)})},result:function(c){return this.bind("result",c)},result_wo_focus:function(c){return this.bind("result_wo_focus",c)},remove_scrollbar:function(c){return this.bind("remove_scrollbar",
c)},search:function(c){return this.trigger("search",[c])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(c){return this.trigger("setOptions",[c])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(c,b){function h(O){var T=Jmp.Helpers.getEmailShareLimit();if(a("li.acjs-data").length>=T)return O=Jmp.Helpers.getEmailShareLimitMessage(),Jmp.App.Notifications.display_notification({type:"info",message:O}).close_notification(),!1;if(""==
O)return!1;if(!Jmp.Helpers.looksLikeEMail(O))return setTimeout(function(){(Jmp.Helpers.is_lightbox_present()||a("#invite_container").length)&&Jmp.App.Notifications.display_notification({type:"error",message:"Invalid email address"}).close_notification()},120),!1;T="";for(var Q=0;Q<a("li.acjs-data").length;Q++)if(T=a(a("li.acjs-data")[Q]).children("a").data("email"),O==T)return Jmp.App.Notifications.display_notification({type:"error",message:"You have already selected this email address."}).close_notification(),
!1;return b.allowCustom||k(O,b.data)?!0:(Jmp.App.Notifications.display_notification({type:"error",message:"Only emails from your team are allowed to be used here."}).close_notification(),!1)}function k(O,T){T=T.map(function(Q){return Q.split("|")[0].trim()});O=O.trim();return-1!=T.indexOf(O)}function l(){var O=y.val();O=O.split(",");for(var T=0;T<O.length;T++){var Q=O[T].trim();y.val(Q);if(!h(Q))return!1;y.search(function(M){b.multiple&&(M?y.trigger("result",[M.data,M.result]):y.trigger("result",
[Q,Q]))})}q();return!0}function m(){var O=J.selected();if(!O||!O||!J.visible())return O=r(y.val()),h(O)?(y.val(O),q(),b.multiple&&y.trigger("result",[y.val(),y.val()]),O=!0):O=!1,O;var T=O.result;if(!h(T))return!1;C=T;if(b.multiple){var Q=p(y.val());1<Q.length&&(T=Q.slice(0,Q.length-1).join(b.multipleSeparator)+b.multipleSeparator+T);T+=b.multipleSeparator}y.val(T);q();b.multiple&&y.trigger("result",[O.data,O.result]);return!0}function n(O,T){if(E==x.DEL)J.hide();else if(O=y.val(),T||O!=C)C=O,O=r(O),
O.length>=b.minChars?(y.addClass(b.loadingClass),b.matchCase||(O=O.toLowerCase()),v(O,u,q)):(y.removeClass(b.loadingClass),J.hide())}function p(O){if(!O)return[""];O=O.split(a.trim(b.multipleSeparator));var T=[];a.each(O,function(Q,M){a.trim(M)&&(T[Q]=a.trim(M))});return T}function r(O){if(!b.multiple)return O;O=p(O);return O[O.length-1]}function q(){J.hide();clearTimeout(B);y.removeClass(b.loadingClass);b.mustMatch&&y.search(function(O){O||y.val("")})}function u(O,T){T&&T.length&&F?(y.removeClass(b.loadingClass),
J.display(T,O),T=T[0].value,b.autoFill&&r(y.val()).toLowerCase()==O.toLowerCase()&&8!=E&&(y.val(y.val()+T.substring(r(C).length)),a.Autocompleter.Selection(c,C.length,C.length+T.length)),J.show()):q()}function v(O,T,Q){b.matchCase||(O=O.toLowerCase());var M=H.load(O);if(M&&M.length)T(O,M);else if("string"==typeof b.url&&0<b.url.length){var W={};a.each(b.extraParams,function(da,ma){W[da]="function"==typeof ma?ma():ma});a.ajax({mode:"abort",port:"autocomplete"+c.name,dataType:b.dataType,url:b.url,data:a.extend({q:r(O),
limit:b.max},W),success:function(da){var ma;if(!(ma=b.parse&&b.parse(da))){ma=[];da=da.split("\n");for(var fa=0;fa<da.length;fa++){var xa=a.trim(da[fa]);xa&&(xa=xa.split("|"),ma[ma.length]={data:xa,value:xa[0],result:b.formatResult&&b.formatResult(xa,xa[0])||xa[0]})}}H.add(O,ma);T(O,ma)}})}else Q(O)}var x={UP:38,DOWN:40,DEL:46,BKSPAC:8,TAB:9,RETURN:13,ESC:27,COLN:186,COMMA:188,SPACE:32,PAGEUP:33,PAGEDOWN:34,CTRL:17,COMMNDLFT:91,COMMNDRGHT:93,COMMNDFF:224},y=a(c).attr("autocomplete","off").addClass(b.inputClass),
B,C="",H=a.Autocompleter.Cache(b),F=0,E,G=!1,K={mouseDownOnSelect:!1},J=a.Autocompleter.Select(b,c,m,K);y.keydown(function(O){E=O.keyCode;switch(O.keyCode){case x.UP:O.preventDefault();J.visible()?J.prev():n(0,!0);break;case x.DOWN:O.preventDefault();J.visible()?J.next():n(0,!0);break;case x.PAGEUP:O.preventDefault();J.visible()?J.pageUp():n(0,!0);break;case x.PAGEDOWN:O.preventDefault();J.visible()?J.pageDown():n(0,!0);break;case x.SPACE:m()&&(y.blur(),setTimeout(function(){y.focus()},500));O.preventDefault();
break;case x.COLN:case x.COMMA:m()&&(y.blur(),setTimeout(function(){y.focus()},500));break;case x.TAB:if(m()||""!=y.val())y.removeAttr("placeholder"),setTimeout(function(){y.focus()},500),O.preventDefault();break;case x.RETURN:O.stopPropagation();m()&&(y.removeAttr("placeholder"),setTimeout(function(){y.focus()},500));O.preventDefault();break;case x.DEL:case x.BKSPAC:a("li.select-all").length?(a("li.select-all").remove(),y.val(""),y.trigger("remove_scrollbar")):""==y.val()&&a("li.acjs-data").length&&
(a(a("li.acjs-data").get(a("li.acjs-data").length-1)).remove(),y.trigger("remove_scrollbar"));a("li.acjs-data");break;case x.ESC:J.hide();break;case x.COMMNDLFT:case x.COMMNDRGHT:case x.COMMNDFF:"MacIntel"==navigator.platform&&(G=!0);break;case x.CTRL:"MacIntel"!=navigator.platform&&(G=!0);break;default:G&&86==O.keyCode?setTimeout(function(){l()},50):G&&65==O.keyCode?a("li.acjs-data").addClass("select-all"):a("li.acjs-data").removeClass("select-all"),clearTimeout(B),B=setTimeout(n,b.delay)}}).keyup(function(O){switch(O.keyCode){case x.CTRL:case x.COMMNDLFT:case x.COMMNDRGHT:G=
!1}(O=y.val().length)&&parseInt(y.width())<12*O&&y.css("width",12*O+"px")}).keypress(function(O){try{a(".acjs-holder").mCustomScrollbar("scrollTo","bottom")}catch(T){}}).focus(function(){F++;try{a(".acjs-holder").mCustomScrollbar("scrollTo","bottom")}catch(O){}}).blur(function(){F=0;K.mouseDownOnSelect||(G=!1,clearTimeout(B),B=setTimeout(q,200));if(a("li.acjs-data").length)y.removeAttr("placeholder");else if(y.css("width","270px"),""!=y.val()&&!K.mouseDownOnSelect){var O=r(y.val());if(h(O)){var T=
J.selected();T&&T.result==y.val()?(y.val(O),q(),b.multiple&&y.trigger("result",[T.data,T.result])):(y.val(O),q(),b.multiple&&y.trigger("result_wo_focus",[y.val(),y.val()]))}}}).click(function(){1<F++&&!J.visible()&&n(0,!0)}).bind("search",function(){function O(Q,M){if(M&&M.length)for(var W=0;W<M.length;W++)if(M[W].result.toLowerCase()==Q.toLowerCase()){var da=M[W];break}"function"==typeof T?T(da):b.multiple&&y.trigger("result",da&&[da.data,da.value])}var T=1<arguments.length?arguments[1]:null;a.each(p(y.val()),
function(Q,M){v(M,O,O)})}).bind("flushCache",function(){H.flush()}).bind("setOptions",function(O,T){a.extend(b,T);"data"in T&&H.populate()}).bind("unautocomplete",function(){J.unbind();y.unbind()}).bind("paste",function(O){b.multiple&&setTimeout(function(){l()},50)})};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"modal-suggestion-box",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:10,mustMatch:!1,extraParams:{},selectFirst:!0,
formatItem:function(c){return c[0]},formatResult:function(c){return c[0].split("|")[0]},autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(c,b){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180,attachTo:"#modal"};a.Autocompleter.Cache=function(c){function b(p,r){c.matchCase||(p=p.toLowerCase());p=p.indexOf(r);return-1==p?!1:0==p||c.matchContains}
function h(p,r){n>c.cacheLength&&l();m[p]||n++;m[p]=r}function k(){if(!c.data)return!1;var p={},r=0;c.url||(c.cacheLength=1);p[""]=[];for(var q=0,u=c.data.length;q<u;q++){var v=c.data[q];v="string"==typeof v?[v]:v;var x=c.formatItem(v,q+1,c.data.length);if(!1!==x){var y=x.charAt(0).toLowerCase();p[y]||(p[y]=[]);v={value:x,data:v,result:c.formatResult&&c.formatResult(v)||x};p[y].push(v);r++<c.max&&p[""].push(v)}}a.each(p,function(B,C){c.cacheLength++;h(B,C)})}function l(){m={};n=0}var m={},n=0;setTimeout(k,
25);return{flush:l,add:h,populate:k,load:function(p){if(!c.cacheLength||!n)return null;if(!c.url&&c.matchContains){var r=[],q;for(q in m)if(0<q.length){var u=m[q];a.each(u,function(C,H){b(H.value,p)&&r.push(H)})}return r}if(m[p])return m[p];if(c.matchSubset)for(var v=p.length-1;v>=c.minChars;v--){u=m[p.substr(0,v)];r=[];var x=!1,y;for(y in m)if(""!=y)for(var B=0;B<m[y].length;B++)if(x=!1,u=m[y][B].value,b(u,p)&&(r[r.length]=m[y][B],x=!0),u=m[y][B].value.substr(m[y][B].value.indexOf("|")+1,m[y][B].value.length),
!x&&b(u,p)&&(r[r.length]=m[y][B],x=!0),""!=u)for(u=u.split(" "),q=0;q<u.length;q++)!x&&b(u[q],p)&&(r[r.length]=m[y][B],x=!0);if(r.length)return r}return null}}};a.Autocompleter.Select=function(c,b,h,k){function l(){x&&(y=a("<ul/>").hide().addClass("dropdown-menu "+c.resultsClass+" top-left"),y.appendTo(c.attachTo),B=y.mouseover(function(C){m(C).nodeName&&"LI"==m(C).nodeName.toUpperCase()&&(q=a("li",B).removeClass(p.ACTIVE).index(m(C)),a(m(C)).addClass(p.ACTIVE))}).click(function(C){a(m(C)).addClass(p.ACTIVE);
h();b.focus();return!1}).mousedown(function(){k.mouseDownOnSelect=!0}).mouseup(function(){k.mouseDownOnSelect=!1}),0<c.width&&y.css("width",c.width),x=!1)}function m(C){for(C=C.target;C&&"LI"!=C.tagName;)C=C.parentNode;return C?C:[]}function n(C){r.slice(q,q+1).removeClass();q+=C;0>q?q=r.size()-1:q>=r.size()&&(q=0);C=r.slice(q,q+1).addClass(p.ACTIVE);if(c.scroll){var H=0;r.slice(0,q).each(function(){H+=this.offsetHeight});H+C[0].offsetHeight-B.scrollTop()>B[0].clientHeight?B.scrollTop(H+C[0].offsetHeight-
B.innerHeight()):H<B.scrollTop()&&B.scrollTop(H)}}var p={ACTIVE:"ac_over"},r,q=-1,u,v="",x=!0,y,B;return{display:function(C,H){l();u=C;v=H;B.empty();a('<span class="arrow icn-dd-top-arrow"></span>').appendTo(B);C=u.length;C=c.max&&c.max<C?c.max:C;for(H=0;H<C;H++)if(u[H]){var F=c.formatItem(u[H].data,H+1,C,u[H].value,v);if(!1!==F){F=c.highlight(F,v).split("|");var E='<a href="#" class="email">'+F[0]+"</a>";""!=F[1]&&void 0!=F[1]&&(E='<a href="#" class="name">'+F[1]+" ("+F[0]+")</a>");F=a("<li>").html(E).addClass(0==
H%2?"ac_event":"ac_odd").appendTo(B)[0];a.data(F,"ac_data",u[H])}}r=B.find("li");c.selectFirst&&(r.slice(0,1).addClass(p.ACTIVE),q=0);B.bgiframe()},next:function(){n(1)},prev:function(){n(-1)},pageUp:function(){0!=q&&0>q-8?n(-q):n(-8)},pageDown:function(){q!=r.size()-1&&q+8>r.size()?n(r.size()-1-q):n(8)},hide:function(){y&&y.hide();q=-1},visible:function(){return y&&y.is(":visible")},current:function(){return this.visible()&&(r.filter("."+p.ACTIVE)[0]||c.selectFirst&&r[0])},show:function(){var C=
a(b).offset(),H=C.top+b.offsetHeight;H=c.suggestionTop?c.suggestionTop:H;y.css({top:H,left:C.left}).show();if(c.scroll&&(B.scrollTop(0),B.css({maxHeight:c.scrollHeight}),a.browser.msie&&"undefined"===typeof document.body.style.maxHeight)){var F=0;r.each(function(){F+=this.offsetHeight});C=F>c.scrollHeight;B.css("height",C?c.scrollHeight:F);C||r.width(B.width()-parseInt(r.css("padding-left"))-parseInt(r.css("padding-right")))}},selected:function(){var C=r&&r.filter("."+p.ACTIVE).removeClass(p.ACTIVE);
return C&&C.length&&a.data(C[0],"ac_data")},unbind:function(){y&&y.remove()}}};a.Autocompleter.Selection=function(c,b,h){if(c.createTextRange){var k=c.createTextRange();k.collapse(!0);k.moveStart("character",b);k.moveEnd("character",h);k.select()}else c.setSelectionRange?c.setSelectionRange(b,h):c.selectionStart&&(c.selectionStart=b,c.selectionEnd=h);c.focus()}})(jQuery);jQuery.fn.autoCompleteJS=function(a){var c=this,b={ul:c,urlLookup:[""],acOptions:{},foundClass:".acjs-data",inputClass:".acjs-input"};a&&jQuery.extend(b,a);var h={mCustomScrollbarOn:!1,params:b,getData:function(){var k="";$(b.foundClass,c).each(function(l){0<l&&(k+=",");k+=$("span",this).html()});return k},clearData:function(){$(b.foundClass,c).remove();$(b.inputClass,c).focus();return c.acjs},removeFind:function(k){$(k).unbind("click").parent().parent("li.acjs-data").remove();$(b.inputClass,c).focus();
1>$("li.acjs-data").length&&$(b.inputClass,c).attr("placeholder","Enter your friend's email address(es)").css("width","270px");return c.acjs},setInputWidth:function(){var k=$(b.inputClass,c).offset().left,l=parseInt(c.offset().left)+parseInt(c.width());$(b.inputClass,c).css("width",l-k-(h.mCustomScrollbarOn?25:15)+"px").removeAttr("placeholder");$("div.overlay").length&&Jmp.Helpers.display_error_message_within_lightbox("")},setScrollbar:function(){60<$(".acjs-holder").height()?h.mCustomScrollbarOn||
($(".acjs-holder").mCustomScrollbar({scrollButtons:{enable:!1},advanced:{updateOnContentResize:!0}}),h.mCustomScrollbarOn=!0):h.mCustomScrollbarOn&&$(".acjs-holder").mCustomScrollbar("destroy")}};$(b.foundClass+" span.icn-clear").click(function(){h.removeFind(this);h.setScrollbar()});$(b.ul).click(function(){$(b.inputClass).focus();return!1});$(b.inputClass,c).autocompletelist(b.urlLookup,b.acOptions);$(b.inputClass,c).result(function(k,l,m){k=b.foundClass.replace(/\./,"");var n=l[0].split("|");l=
m;"undefined"!=typeof n[1]&&""!=n[1]&&(l=n[1]);l='<li class="'+k+' emx"><a href="#" class="btn btn-blue" data-email="'+m+'">'+l+'<span class="icn-clear"></span></a></li>';l=$(b.inputClass,c).parent("li").length?$(b.inputClass,c).parent("li").before(l):$(b.inputClass,c).parent().parent("li").before(l);$(".icn-clear",l[0].previousSibling).click(function(p){h.removeFind(this);p.preventDefault()});$(b.inputClass,c).val("").focus().css("width","18px");h.setInputWidth();h.setScrollbar()});$(b.inputClass,
c).result_wo_focus(function(k,l,m){m=b.foundClass.replace(/\./,"");k='<li class="'+m+' emx"><a href="#" class="btn btn-blue" data-email="'+l+'">'+l+'<span class="icn-clear"></span></a></li>';k=$(b.inputClass,c).parent("li").length?$(b.inputClass,c).parent("li").before(k):$(b.inputClass,c).parent().parent("li").before(k);$(".icn-clear",k[0].previousSibling).click(function(n){h.removeFind(this);n.preventDefault()});$(b.inputClass,c).val("").css("width","18px");h.setInputWidth();h.setScrollbar()});$(b.inputClass,
c).remove_scrollbar(function(k){h.setScrollbar()});$(b.inputClass,c).focus();return h};(function(a){a.fn.autoGrowInput=function(c){c=a.extend({maxWidth:1E3,minWidth:0,comfortZone:70},c);this.filter("input:text").each(function(){var b=c.minWidth||a(this).width(),h="",k=a(this),l=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:k.css("fontSize"),fontFamily:k.css("fontFamily"),fontWeight:k.css("fontWeight"),letterSpacing:k.css("letterSpacing"),whiteSpace:"nowrap"});l.insertAfter(k);a(this).bind("keyup keydown blur update",function(){if(h!==(h=k.val())){var m=
h.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");l.html(m);m=l.width();m=m+c.comfortZone>=b?m+c.comfortZone:b;var n=k.width();(m<n&&m>=b||m>b&&m<c.maxWidth)&&k.width(m)}})});return this}})(jQuery);(function(a){var c={init:function(b){b=a.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:550,scrollEasing:"easeOutCirc",mouseWheel:"pixels",mouseWheelPixels:60,autoDraggerLength:!0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:20,scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0},callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},
onTotalScrollOffset:0,whileScrolling:!1,whileScrollingInterval:30}},b);a(document).data("mCS-is-touch-device",!1);"ontouchstart"in window&&a(document).data("mCS-is-touch-device",!0);return this.each(function(){var h=a(this);b.set_width&&h.css("width",b.set_width);b.set_height&&h.css("height",b.set_height);if(a(document).data("mCustomScrollbar-index")){var k=parseInt(a(document).data("mCustomScrollbar-index"));a(document).data("mCustomScrollbar-index",k+1)}else a(document).data("mCustomScrollbar-index",
"1");h.wrapInner("<div class='mCustomScrollBox' id='mCSB_"+a(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+a(document).data("mCustomScrollbar-index"));var l=h.children(".mCustomScrollBox");b.horizontalScroll?(l.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"),k=l.children(".mCSB_h_wrapper"),k.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:k.children().outerWidth(),
position:"relative"}).unwrap()):l.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var m=l.children(".mCSB_container");a(document).data("mCS-is-touch-device")&&m.addClass("mCS_touch");m.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer' style='position:relative;'><div class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");
k=l.children(".mCSB_scrollTools");var n=k.children(".mCSB_draggerContainer").children(".mCSB_dragger");b.horizontalScroll?n.data("minDraggerWidth",n.width()):n.data("minDraggerHeight",n.height());b.scrollButtons.enable&&(b.horizontalScroll?k.prepend("<a class='mCSB_buttonLeft' style='display:block; position:relative;'></a>").append("<a class='mCSB_buttonRight' style='display:block; position:relative;'></a>"):k.prepend("<a class='mCSB_buttonUp' style='display:block; position:relative;'></a>").append("<a class='mCSB_buttonDown' style='display:block; position:relative;'></a>"));
l.bind("scroll",function(){h.is(".mCS_disabled")||l.scrollTop(0).scrollLeft(0)});h.data({mCS_Init:!0,horizontalScroll:b.horizontalScroll,scrollInertia:b.scrollInertia,scrollEasing:b.scrollEasing,mouseWheel:b.mouseWheel,mouseWheelPixels:b.mouseWheelPixels,autoDraggerLength:b.autoDraggerLength,scrollButtons_enable:b.scrollButtons.enable,scrollButtons_scrollType:b.scrollButtons.scrollType,scrollButtons_scrollSpeed:b.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:b.scrollButtons.scrollAmount,autoExpandHorizontalScroll:b.advanced.autoExpandHorizontalScroll,
autoScrollOnFocus:b.advanced.autoScrollOnFocus,onScrollStart_Callback:b.callbacks.onScrollStart,onScroll_Callback:b.callbacks.onScroll,onTotalScroll_Callback:b.callbacks.onTotalScroll,onTotalScrollBack_Callback:b.callbacks.onTotalScrollBack,onTotalScroll_Offset:b.callbacks.onTotalScrollOffset,whileScrolling_Callback:b.callbacks.whileScrolling,whileScrolling_Interval:b.callbacks.whileScrollingInterval,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_buttonsContinuous_y:!1,
bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_scrollbar_touch:!1,bindEvent_content_touch:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1,whileScrolling:!1}).mCustomScrollbar("update");b.horizontalScroll&&"none"!==h.css("max-width")&&(b.advanced.updateOnContentResize||(b.advanced.updateOnContentResize=!0),h.data({mCS_maxWidth:parseInt(h.css("max-width")),mCS_maxWidth_Interval:setInterval(function(){m.outerWidth()>
h.data("mCS_maxWidth")&&(clearInterval(h.data("mCS_maxWidth_Interval")),h.mCustomScrollbar("update"))},150)}));if(b.advanced.updateOnBrowserResize){var p;a(window).resize(function(){p&&clearTimeout(p);p=setTimeout(function(){h.is(".mCS_disabled")||h.is(".mCS_destroyed")||h.mCustomScrollbar("update")},150)})}if(b.advanced.updateOnContentResize){var r=b.horizontalScroll?m.outerWidth():m.outerHeight();setInterval(function(){if(b.horizontalScroll){b.advanced.autoExpandHorizontalScroll&&m.css({position:"absolute",
width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:m.outerWidth(),position:"relative"}).unwrap();var q=m.outerWidth()}else q=m.outerHeight();q!=r&&(h.mCustomScrollbar("update"),r=q)},300)}})},update:function(){var b=a(this),h=b.children(".mCustomScrollBox"),k=h.children(".mCSB_container");k.removeClass("mCS_no_scrollbar");b.removeClass("mCS_disabled mCS_destroyed");"undefined"!=typeof h.scrollTop(0)&&h.scrollTop(0).scrollLeft(0);var l=
h.children(".mCSB_scrollTools"),m=l.children(".mCSB_draggerContainer"),n=m.children(".mCSB_dragger");if(b.data("horizontalScroll")){var p=l.children(".mCSB_buttonLeft"),r=l.children(".mCSB_buttonRight"),q=h.width();b.data("autoExpandHorizontalScroll")&&k.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:k.outerWidth(),position:"relative"}).unwrap();var u=k.outerWidth()}else var v=l.children(".mCSB_buttonUp"),
x=l.children(".mCSB_buttonDown"),y=h.height(),B=k.outerHeight();B>y&&!b.data("horizontalScroll")?(l.css("display","block"),q=m.height(),b.data("autoDraggerLength")&&(u=Math.round(y/B*q),l=n.data("minDraggerHeight"),u<=l?n.css({height:l}):u>=q-10?n.css({height:q-10}):n.css({height:u}),n.children(".mCSB_dragger_bar").css({"line-height":n.height()+"px"})),u=n.height(),b.data("scrollAmount",(B-y)/(q-u)).mCustomScrollbar("scrolling",h,k,m,n,v,x,p,r),h=Math.abs(Math.round(k.position().top)),b.mCustomScrollbar("scrollTo",
h,{callback:!1})):u>q&&b.data("horizontalScroll")?(l.css("display","block"),y=m.width(),b.data("autoDraggerLength")&&(B=Math.round(q/u*y),l=n.data("minDraggerWidth"),B<=l?n.css({width:l}):B>=y-10?n.css({width:y-10}):n.css({width:B})),B=n.width(),b.data("scrollAmount",(u-q)/(y-B)).mCustomScrollbar("scrolling",h,k,m,n,v,x,p,r),h=Math.abs(Math.round(k.position().left)),b.mCustomScrollbar("scrollTo",h,{callback:!1})):(h.unbind("mousewheel focusin"),b.data("horizontalScroll")?n.add(k).css("left",0):n.add(k).css("top",
0),l.css("display","none"),k.addClass("mCS_no_scrollbar"),b.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}))},scrolling:function(b,h,k,l,m,n,p,r){var q=a(this);q.mCustomScrollbar("callbacks","whileScrolling");if(!l.hasClass("ui-draggable")){var u=q.data("horizontalScroll")?"x":"y";l.draggable({axis:u,containment:"parent",drag:function(Q,M){q.mCustomScrollbar("scroll");l.addClass("mCSB_dragger_onDrag")},stop:function(Q,M){l.removeClass("mCSB_dragger_onDrag")}})}q.data("bindEvent_scrollbar_click")||
(k.bind("click",function(Q){if(q.data("horizontalScroll")){if(Q=Q.pageX-k.offset().left,Q<l.position().left||Q>l.position().left+l.width())Q>=k.width()-l.width()&&(Q=k.width()-l.width()),l.css("left",Q),q.mCustomScrollbar("scroll")}else if(Q=Q.pageY-k.offset().top,Q<l.position().top||Q>l.position().top+l.height())Q>=k.height()-l.height()&&(Q=k.height()-l.height()),l.css("top",Q),q.mCustomScrollbar("scroll")}),q.data({bindEvent_scrollbar_click:!0}));if(q.data("mouseWheel")){var v=q.data("mouseWheel");
"auto"===q.data("mouseWheel")&&(v=8,u=navigator.userAgent,-1!=u.indexOf("Mac")&&-1!=u.indexOf("Safari")&&-1!=u.indexOf("AppleWebKit")&&-1==u.indexOf("Chrome")&&(v=1));q.data("bindEvent_mousewheel")||(b.bind("mousewheel",function(Q,M){Q.preventDefault();Q=Math.abs(M*v);q.data("horizontalScroll")?"pixels"===q.data("mouseWheel")?(M=0>M?-1:1,M=Math.abs(Math.round(h.position().left))-M*q.data("mouseWheelPixels"),q.mCustomScrollbar("scrollTo",M)):(M=l.position().left-M*Q,l.css("left",M),0>l.position().left&&
l.css("left",0),M=k.width(),Q=l.width(),l.position().left>M-Q&&l.css("left",M-Q),q.mCustomScrollbar("scroll")):"pixels"===q.data("mouseWheel")?(M=0>M?-1:1,M=Math.abs(Math.round(h.position().top))-M*q.data("mouseWheelPixels"),q.mCustomScrollbar("scrollTo",M)):(M=l.position().top-M*Q,l.css("top",M),0>l.position().top&&l.css("top",0),M=k.height(),Q=l.height(),l.position().top>M-Q&&l.css("top",M-Q),q.mCustomScrollbar("scroll"))}),q.data({bindEvent_mousewheel:!0}))}if(q.data("scrollButtons_enable"))if("pixels"===
q.data("scrollButtons_scrollType")){var x;a.browser.msie&&9>parseInt(a.browser.version)&&q.data("scrollInertia",0);q.data("horizontalScroll")?(r.add(p).unbind("mousedown touchstart onmsgesturestart mouseup mouseout touchend onmsgestureend",y,B),q.data({bindEvent_buttonsContinuous_x:!1}),q.data("bindEvent_buttonsPixels_x")||(r.bind("click",function(Q){Q.preventDefault();h.is(":animated")||(x=Math.abs(h.position().left)+q.data("scrollButtons_scrollAmount"),q.mCustomScrollbar("scrollTo",x))}),p.bind("click",
function(Q){Q.preventDefault();h.is(":animated")||(x=Math.abs(h.position().left)-q.data("scrollButtons_scrollAmount"),h.position().left>=-q.data("scrollButtons_scrollAmount")&&(x="left"),q.mCustomScrollbar("scrollTo",x))}),q.data({bindEvent_buttonsPixels_x:!0}))):(n.add(m).unbind("mousedown touchstart onmsgesturestart mouseup mouseout touchend onmsgestureend",y,B),q.data({bindEvent_buttonsContinuous_y:!1}),q.data("bindEvent_buttonsPixels_y")||(n.bind("click",function(Q){Q.preventDefault();h.is(":animated")||
(x=Math.abs(h.position().top)+q.data("scrollButtons_scrollAmount"),q.mCustomScrollbar("scrollTo",x))}),m.bind("click",function(Q){Q.preventDefault();h.is(":animated")||(x=Math.abs(h.position().top)-q.data("scrollButtons_scrollAmount"),h.position().top>=-q.data("scrollButtons_scrollAmount")&&(x="top"),q.mCustomScrollbar("scrollTo",x))}),q.data({bindEvent_buttonsPixels_y:!0})))}else if(q.data("horizontalScroll")){if(r.add(p).unbind("click"),q.data({bindEvent_buttonsPixels_x:!1}),!q.data("bindEvent_buttonsContinuous_x")){r.bind("mousedown touchstart onmsgesturestart",
function(Q){Q.preventDefault();Q.stopPropagation();q.data({mCSB_buttonScrollRight:setInterval(function(){var M=Math.round((Math.abs(Math.round(h.position().left))+q.data("scrollButtons_scrollSpeed"))/q.data("scrollAmount"));q.mCustomScrollbar("scrollTo",M,{moveDragger:!0})},30)})});var y=function(Q){Q.preventDefault();Q.stopPropagation();clearInterval(q.data("mCSB_buttonScrollRight"))};r.bind("mouseup touchend onmsgestureend mouseout",y);p.bind("mousedown touchstart onmsgesturestart",function(Q){Q.preventDefault();
Q.stopPropagation();q.data({mCSB_buttonScrollLeft:setInterval(function(){var M=Math.round((Math.abs(Math.round(h.position().left))-q.data("scrollButtons_scrollSpeed"))/q.data("scrollAmount"));q.mCustomScrollbar("scrollTo",M,{moveDragger:!0})},30)})});var B=function(Q){Q.preventDefault();Q.stopPropagation();clearInterval(q.data("mCSB_buttonScrollLeft"))};p.bind("mouseup touchend onmsgestureend mouseout",B);q.data({bindEvent_buttonsContinuous_x:!0})}}else n.add(m).unbind("click"),q.data({bindEvent_buttonsPixels_y:!1}),
q.data("bindEvent_buttonsContinuous_y")||(n.bind("mousedown touchstart onmsgesturestart",function(Q){Q.preventDefault();Q.stopPropagation();q.data({mCSB_buttonScrollDown:setInterval(function(){var M=Math.round((Math.abs(Math.round(h.position().top))+q.data("scrollButtons_scrollSpeed"))/q.data("scrollAmount"));q.mCustomScrollbar("scrollTo",M,{moveDragger:!0})},30)})}),n.bind("mouseup touchend onmsgestureend mouseout",function(Q){Q.preventDefault();Q.stopPropagation();clearInterval(q.data("mCSB_buttonScrollDown"))}),
m.bind("mousedown touchstart onmsgesturestart",function(Q){Q.preventDefault();Q.stopPropagation();q.data({mCSB_buttonScrollUp:setInterval(function(){var M=Math.round((Math.abs(Math.round(h.position().top))-q.data("scrollButtons_scrollSpeed"))/q.data("scrollAmount"));q.mCustomScrollbar("scrollTo",M,{moveDragger:!0})},30)})}),m.bind("mouseup touchend onmsgestureend mouseout",function(Q){Q.preventDefault();Q.stopPropagation();clearInterval(q.data("mCSB_buttonScrollUp"))}),q.data({bindEvent_buttonsContinuous_y:!0}));
q.data("autoScrollOnFocus")&&!q.data("bindEvent_focusin")&&(b.bind("focusin",function(){b.scrollTop(0).scrollLeft(0);var Q=a(document.activeElement);if(Q.is("textarea,select,button,a[tabindex],area,object"))if(q.data("horizontalScroll")){var M=h.position().left,W=Q.position().left,da=b.width();Q=Q.outerWidth();0<=M+W&&M+W<=da-Q||(Q=W/q.data("scrollAmount"),Q>=k.width()-l.width()&&(Q=k.width()-l.width()),l.css("left",Q),q.mCustomScrollbar("scroll"))}else M=h.position().top,W=Q.position().top,da=b.height(),
Q=Q.outerHeight(),0<=M+W&&M+W<=da-Q||(Q=W/q.data("scrollAmount"),Q>=k.height()-l.height()&&(Q=k.height()-l.height()),l.css("top",Q),q.mCustomScrollbar("scroll"))}),q.data({bindEvent_focusin:!0}));if(a(document).data("mCS-is-touch-device")){if(!q.data("bindEvent_scrollbar_touch")){var C,H;l.bind("touchstart onmsgesturestart",function(Q){Q.preventDefault();Q.stopPropagation();var M=Q.originalEvent.touches[0]||Q.originalEvent.changedTouches[0];Q=a(this);var W=Q.offset(),da=M.pageX-W.left;M=M.pageY-W.top;
da<Q.width()&&0<da&&M<Q.height()&&0<M&&(C=M,H=da)});l.bind("touchmove onmsgesturechange",function(Q){Q.preventDefault();Q.stopPropagation();var M=Q.originalEvent.touches[0]||Q.originalEvent.changedTouches[0],W=a(this).offset();Q=M.pageX-W.left;M=M.pageY-W.top;q.data("horizontalScroll")?q.mCustomScrollbar("scrollTo",l.position().left-H+Q,{moveDragger:!0}):q.mCustomScrollbar("scrollTo",l.position().top-C+M,{moveDragger:!0})});q.data({bindEvent_scrollbar_touch:!0})}if(!q.data("bindEvent_content_touch")){var F,
E,G,K,J,O,T;h.bind("touchstart onmsgesturestart",function(Q){F=Q.originalEvent.touches[0]||Q.originalEvent.changedTouches[0];E=a(this);G=E.offset();K=F.pageX-G.left;O=J=F.pageY-G.top;T=K});h.bind("touchmove onmsgesturechange",function(Q){Q.preventDefault();Q.stopPropagation();F=Q.originalEvent.touches[0]||Q.originalEvent.changedTouches[0];E=a(this).parent();G=E.offset();K=F.pageX-G.left;J=F.pageY-G.top;q.data("horizontalScroll")?q.mCustomScrollbar("scrollTo",T-K):q.mCustomScrollbar("scrollTo",O-J)});
q.data({bindEvent_content_touch:!0})}}},scroll:function(b){var h=a(this),k=h.find(".mCSB_dragger"),l=h.find(".mCSB_container");h.find(".mCustomScrollBox");if(h.data("horizontalScroll")){var m=-k.position().left*h.data("scrollAmount"),n=l.position().left;n=Math.round(n-m)}else{var p=-k.position().top*h.data("scrollAmount"),r=l.position().top;r=Math.round(r-p)}if(a.browser.webkit){var q=(window.outerWidth-8)/window.innerWidth;q=.98>q||1.02<q}0===h.data("scrollInertia")||q?(b||h.mCustomScrollbar("callbacks",
"onScrollStart"),h.data("horizontalScroll")?l.css("left",m):l.css("top",p),b||(h.data("whileScrolling")&&h.data("whileScrolling_Callback").call(),h.mCustomScrollbar("callbacks","onScroll")),h.data({mCS_Init:!1})):(b||h.mCustomScrollbar("callbacks","onScrollStart"),h.data("horizontalScroll")?l.stop().animate({left:"-="+n},h.data("scrollInertia"),h.data("scrollEasing"),function(){b||h.mCustomScrollbar("callbacks","onScroll");h.data({mCS_Init:!1})}):l.stop().animate({top:"-="+r},h.data("scrollInertia"),
h.data("scrollEasing"),function(){b||h.mCustomScrollbar("callbacks","onScroll");h.data({mCS_Init:!1})}))},scrollTo:function(b,h){h=a.extend({moveDragger:!1,callback:!0},h);var k=a(this),l=k.find(".mCustomScrollBox"),m=l.children(".mCSB_container"),n=k.find(".mCSB_draggerContainer"),p=n.children(".mCSB_dragger");if(b||0===b){if("number"===typeof b)var r=h.moveDragger?b:Math.round(b/k.data("scrollAmount"));else"string"===typeof b&&(b="top"===b?0:"bottom"!==b||k.data("horizontalScroll")?"left"===b?0:
"right"===b&&k.data("horizontalScroll")?m.outerWidth()-l.width():"first"===b?k.find(".mCSB_container").find(":first"):"last"===b?k.find(".mCSB_container").find(":last"):k.find(b):m.outerHeight()-l.height(),1===b.length?(b=k.data("horizontalScroll")?b.position().left:b.position().top,r=Math.ceil(b/k.data("scrollAmount"))):r=b);0>r&&(r=0);k.data("horizontalScroll")?(r>=n.width()-p.width()&&(r=n.width()-p.width()),p.css("left",r)):(r>=n.height()-p.height()&&(r=n.height()-p.height()),p.css("top",r));
h.callback?k.mCustomScrollbar("scroll",!1):k.mCustomScrollbar("scroll",!0)}},callbacks:function(b){var h=a(this),k=h.find(".mCustomScrollBox"),l=h.find(".mCSB_container");switch(b){case "onScrollStart":l.is(":animated")||h.data("onScrollStart_Callback").call();break;case "onScroll":h.data("horizontalScroll")?(b=Math.round(l.position().left),0>b&&b<=k.width()-l.outerWidth()+h.data("onTotalScroll_Offset")?h.data("onTotalScroll_Callback").call():b>=-h.data("onTotalScroll_Offset")?h.data("onTotalScrollBack_Callback").call():
h.data("onScroll_Callback").call()):(b=Math.round(l.position().top),0>b&&b<=k.height()-l.outerHeight()+h.data("onTotalScroll_Offset")?h.data("onTotalScroll_Callback").call():b>=-h.data("onTotalScroll_Offset")?h.data("onTotalScrollBack_Callback").call():h.data("onScroll_Callback").call());break;case "whileScrolling":h.data("whileScrolling_Callback")&&!h.data("whileScrolling")&&h.data({whileScrolling:setInterval(function(){l.is(":animated")&&!h.data("mCS_Init")&&h.data("whileScrolling_Callback").call()},
h.data("whileScrolling_Interval"))})}},disable:function(b){var h=a(this),k=h.children(".mCustomScrollBox"),l=k.children(".mCSB_container"),m=k.children(".mCSB_scrollTools"),n=m.find(".mCSB_dragger");k.unbind("mousewheel focusin");b&&(h.data("horizontalScroll")?n.add(l).css("left",0):n.add(l).css("top",0));m.css("display","none");l.addClass("mCS_no_scrollbar");h.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}).addClass("mCS_disabled")},destroy:function(){var b=a(this),h=b.find(".mCSB_container").html();
b.find(".mCustomScrollBox").remove();b.html(h).removeClass("mCustomScrollbar _mCS_"+a(document).data("mCustomScrollbar-index")).addClass("mCS_destroyed")}};a.fn.mCustomScrollbar=function(b){if(c[b])return c[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist");else return c.init.apply(this,arguments)}})(jQuery);iOSVersion=iOSVersion();
6<=iOSVersion&&function(a){function c(q,u,v){var x=v[0],y=q===m;v[0]=function(){x&&(x.apply(a,arguments),y||(delete u[B],x=null))};var B=q.apply(a,v);u[B]={args:v,created:Date.now(),cb:x,id:B};return B}function b(q,u,v,x,y){var B=v[x];if(B){var C=q===m;u(B.id);C||(u=B.args[1],y=Date.now()-B.created,0>y&&(y=0),u-=y,0>u&&(u=0),B.args[1]=u);B.args[0]=function(){B.cb&&(B.cb.apply(a,arguments),C||(delete v[x],B.cb=null))};B.created=Date.now();B.id=q.apply(a,B.args)}}var h={},k={},l=a.setTimeout,m=a.setInterval,
n=a.clearTimeout,p=a.clearInterval;if(!a.addEventListener)return!1;a.setTimeout=function(){return c(l,h,arguments)};a.setInterval=function(){return c(m,k,arguments)};a.clearTimeout=function(q){var u=h[q];u&&(delete h[q],n(u.id))};a.clearInterval=function(q){var u=k[q];u&&(delete k[q],p(u.id))};for(var r=a;r.location!=r.parent.location;)r=r.parent;r.addEventListener("scroll",function(){for(var q in h)b(l,n,h,q);for(q in k)b(m,p,k,q)})}(window);
function iOSVersion(){var a=window.navigator.userAgent,c=a.indexOf("OS ");return(-1<a.indexOf("iPhone")||-1<a.indexOf("iPad"))&&-1<c?window.Number(a.substr(c+3,3).replace("_",".")):0};(function(a){a.fn.linedtextarea=function(c){var b=a.extend({},a.fn.linedtextarea.defaults,c),h=function(k,l,m){for(;0>=k.height()-l;)m==b.selectedLine?k.append("<div class='lineno lineselect'>"+m+"</div>"):k.append("<div class='lineno'>"+m+"</div>"),m++;return m};return this.each(function(){var k=1,l=a(this),m=l.css("height");l.attr("wrap","off");l.css({resize:"none"});var n=l.outerWidth();l.wrap("<div class='linedtextarea'></div>");var p=l.parent().wrap("<div class='linedwrap' style='width:"+n+"px'></div>").parent();
p.prepend("<div class='lines' style='width:50px'></div>");var r=p.find(".lines");r.height(parseInt(m));r.append("<div class='codelines'></div>");var q=r.find(".codelines");k=h(q,r.height(),1);-1==b.selectedLine||isNaN(b.selectedLine)||(m=parseInt(l.height()/(k-2)),m=parseInt(m*b.selectedLine)-l.height()/2,l[0].scrollTop=m);r=r.outerWidth();m=parseInt(p.css("border-left-width"))+parseInt(p.css("border-right-width"))+parseInt(p.css("padding-left"))+parseInt(p.css("padding-right"));var u=n-m;l.width(n-
r-m-20-20);p.width(u);p.height(l.get(0).clientHeight+10);l.unbind("scroll").scroll(function(v){var x=a(this)[0];v=x.scrollTop;x=x.clientHeight;q.css({"margin-top":-1*v+"px"});k=h(q,v+x,k)})})};a.fn.linedtextarea.defaults={selectedLine:-1,selectedClass:"lineselect"}})(jQuery);/*
 http://ichord.github.com/Caret.js  https://ichord.github.io/At.js  jquery.atwho - v1.4.0 %>
 Copyright (c) 2015 chord.luo <chord.luo@gmail.com>;
 homepage: http://ichord.github.com/At.js
 Licensed MIT
*/
!function(a,c){"function"==typeof define&&define.amd?define(["jquery"],function(b){return a.returnExportsGlobal=c(b)}):"object"==typeof exports?module.exports=c(require("jquery")):c(jQuery)}(this,function(a){var c;var b=function(){function r(q){this.$inputor=q;this.domInputor=this.$inputor[0]}return r.prototype.setPos=function(q){var u,v,x,y;return(y=n.getSelection())&&(x=0,v=!1,(u=function(B,C){var H,F;var E=C.childNodes;C=[];var G=0;for(F=E.length;F>G&&(H=E[G],!v);G++)if(3===H.nodeType){if(x+H.length>=
B){v=!0;G=c.createRange();G.setStart(H,B-x);y.removeAllRanges();y.addRange(G);break}C.push(x+=H.length)}else C.push(u(B,H));return C})(q,this.domInputor)),this.domInputor},r.prototype.getIEPosition=function(){return this.getPosition()},r.prototype.getPosition=function(){var q,u;return u=this.getOffset(),q=this.$inputor.offset(),u.left-=q.left,u.top-=q.top,u},r.prototype.getOldIEPos=function(){var q,u;return u=c.selection.createRange(),q=c.body.createTextRange(),q.moveToElementText(this.domInputor),
q.setEndPoint("EndToEnd",u),q.text.length},r.prototype.getPos=function(){var q,u,v;return(v=this.range())?(q=v.cloneRange(),q.selectNodeContents(this.domInputor),q.setEnd(v.endContainer,v.endOffset),u=q.toString().length,q.detach(),u):c.selection?this.getOldIEPos():void 0},r.prototype.getOldIEOffset=function(){var q,u;return q=c.selection.createRange().duplicate(),q.moveStart("character",-1),u=q.getBoundingClientRect(),{height:u.bottom-u.top,left:u.left,top:u.top}},r.prototype.getOffset=function(){var q,
u,v,x,y;return n.getSelection&&(v=this.range())?(0<v.endOffset-1&&v.endContainer!==this.domInputor&&(q=v.cloneRange(),q.setStart(v.endContainer,v.endOffset-1),q.setEnd(v.endContainer,v.endOffset),x=q.getBoundingClientRect(),u={height:x.height,left:x.left+x.width,top:x.top},q.detach()),u&&0!==(null!=u?u.height:void 0)||(q=v.cloneRange(),y=a(c.createTextNode("|")),q.insertNode(y[0]),q.selectNode(y[0]),x=q.getBoundingClientRect(),u={height:x.height,left:x.left,top:x.top},y.remove(),q.detach())):c.selection&&
(u=this.getOldIEOffset()),u&&(u.top+=a(n).scrollTop(),u.left+=a(n).scrollLeft()),u},r.prototype.range=function(){var q;if(n.getSelection)return q=n.getSelection(),0<q.rangeCount?q.getRangeAt(0):null},r}();var h=function(){function r(q){this.$inputor=q;this.domInputor=this.$inputor[0]}return r.prototype.getIEPos=function(){var q,u,v,x,y,B,C;return u=this.domInputor,B=c.selection.createRange(),y=0,B&&B.parentElement()===u&&(x=u.value.replace(/\r\n/g,"\n"),v=x.length,C=u.createTextRange(),C.moveToBookmark(B.getBookmark()),
q=u.createTextRange(),q.collapse(!1),y=-1<C.compareEndPoints("StartToEnd",q)?v:-C.moveStart("character",-v)),y},r.prototype.getPos=function(){return c.selection?this.getIEPos():this.domInputor.selectionStart},r.prototype.setPos=function(q){var u,v;return u=this.domInputor,c.selection?(v=u.createTextRange(),v.move("character",q),v.select()):u.setSelectionRange&&u.setSelectionRange(q,q),u},r.prototype.getIEOffset=function(q){var u,v,x,y;return v=this.domInputor.createTextRange(),q||=this.getPos(),v.move("character",
q),x=v.boundingLeft,y=v.boundingTop,u=v.boundingHeight,{left:x,top:y,height:u}},r.prototype.getOffset=function(q){var u,v,x;return u=this.$inputor,c.selection?(v=this.getIEOffset(q),v.top+=a(n).scrollTop()+u.scrollTop(),v.left+=a(n).scrollLeft()+u.scrollLeft(),v):(v=u.offset(),x=this.getPosition(q),{left:v.left+x.left-u.scrollLeft(),top:v.top+x.top-u.scrollTop(),height:x.height})},r.prototype.getPosition=function(q){var u,v,x,y,B,C;return u=this.$inputor,x=function(H){return H=H.replace(/<|>|`|"|&/g,
"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(H=H.replace(/\s/g,"&nbsp;")),H},void 0===q&&(q=this.getPos()),C=u.val().slice(0,q),v=u.val().slice(q),y="<span style='position: relative; display: inline;'>"+x(C)+"</span>",y+="<span id='caret' style='position: relative; display: inline;'>|</span>",y+="<span style='position: relative; display: inline;'>"+x(v)+"</span>",B=new k(u),B.create(y).rect()},r.prototype.getIEPosition=function(q){var u,v,x,y,B;return x=this.getIEOffset(q),
v=this.$inputor.offset(),y=x.left-v.left,B=x.top-v.top,u=x.height,{left:y,top:B,height:u}},r}();var k=function(){function r(q){this.$inputor=q}return r.prototype.css_attr="borderBottomWidth borderLeftWidth borderRightWidth borderTopStyle borderRightStyle borderBottomStyle borderLeftStyle borderTopWidth boxSizing fontFamily fontSize fontWeight height letterSpacing lineHeight marginBottom marginLeft marginRight marginTop outlineWidth overflow overflowX overflowY paddingBottom paddingLeft paddingRight paddingTop textAlign textOverflow textTransform whiteSpace wordBreak wordWrap".split(" "),
r.prototype.mirrorCss=function(){var q,u=this;return q={position:"absolute",left:-9999,top:0,zIndex:-2E4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),a.each(this.css_attr,function(v,x){return q[x]=u.$inputor.css(x)}),q},r.prototype.create=function(q){return this.$mirror=a("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(q),this.$inputor.after(this.$mirror),this},r.prototype.rect=function(){var q,u,v;return q=this.$mirror.find("#caret"),u=q.position(),
v={left:u.left,top:u.top,height:q.height()},this.$mirror.remove(),v},r}();var l={contentEditable:function(r){return!(!r[0].contentEditable||"true"!==r[0].contentEditable)}};var m={pos:function(r){return r||0===r?this.setPos(r):this.getPos()},position:function(r){return c.selection?this.getIEPosition(r):this.getPosition(r)},offset:function(r){return this.getOffset(r)}};var n=c=null;var p=function(r){var q;return(q=null!=r?r.iframe:void 0)?(n=q.contentWindow,c=q.contentDocument||n.document):(n=window,
c=document)};a.fn.caret=function(r,q,u){var v;return m[r]?(a.isPlainObject(q)?(p(q),q=void 0):p(u),v=l.contentEditable(this)?new b(this):new h(this),m[r].apply(v,[q])):a.error("Method "+r+" does not exist on jQuery.caret")};a.fn.caret.EditableCaret=b;a.fn.caret.InputCaret=h;a.fn.caret.Utils=l;a.fn.caret.apis=m});
(function(a,c){"function"===typeof define&&define.amd?define(["jquery"],function(b){return c(b)}):"object"===typeof exports?module.exports=c(require("jquery")):c(jQuery)})(this,function(a){var c=[].slice,b=function(x,y){function B(){this.constructor=x}for(var C in y)h.call(y,C)&&(x[C]=y[C]);B.prototype=y.prototype;x.prototype=new B;x.__super__=y.prototype;return x},h={}.hasOwnProperty;var k=function(){function x(y){this.currentFlag=null;this.controllers={};this.aliasMaps={};this.$inputor=a(y);this.setupRootElement();
this.listen()}x.prototype.createContainer=function(y){var B;null!=(B=this.$el)&&B.remove();return a(y.body).append(this.$el=a("<div class='atwho-container'></div>"))};x.prototype.setupRootElement=function(y,B){null==B&&(B=!1);if(y)this.window=y.contentWindow,this.document=y.contentDocument||this.window.document,this.iframe=y;else{this.document=this.$inputor[0].ownerDocument;this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(C){if(y=C,this.iframe=
null,a.fn.atwho.debug)throw Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+y);}}return this.createContainer((this.iframeAsRoot=B)?this.document:document)};x.prototype.controller=function(y){var B;if(this.aliasMaps[y])var C=this.controllers[this.aliasMaps[y]];else{var H=this.controllers;for(B in H){var F=H[B];if(B===y){C=F;break}}}return C?C:this.controllers[this.currentFlag]};x.prototype.setContextFor=function(y){this.currentFlag=y;return this};
x.prototype.reg=function(y,B){var C;var H=(C=this.controllers)[y]||(C[y]=this.$inputor.is("[contentEditable]")?new n(this,y):new m(this,y));B.alias&&(this.aliasMaps[B.alias]=y);H.init(B);return this};x.prototype.listen=function(){return this.$inputor.on("compositionstart",function(y){return function(B){var C;null!=(C=y.controller())&&C.view.hide();y.isComposing=!0;return null}}(this)).on("compositionend",function(y){return function(B){y.isComposing=!1;return null}}(this)).on("keyup.atwhoInner",function(y){return function(B){return y.onKeyup(B)}}(this)).on("keydown.atwhoInner",
function(y){return function(B){return y.onKeydown(B)}}(this)).on("blur.atwhoInner",function(y){return function(B){var C;if(C=y.controller())return C.expectedQueryCBId=null,C.view.hide(B,C.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(y){return function(B){return y.dispatch(B)}}(this)).on("scroll.atwhoInner",function(y){return function(){var B=y.$inputor.scrollTop();return function(C){var H;var F=C.target.scrollTop;B!==F&&null!=(H=y.controller())&&H.view.hide(C);B=F;return!0}}}(this)())};
x.prototype.shutdown=function(){var y;var B=this.controllers;for(y in B){var C=B[y];C.destroy();delete this.controllers[y]}this.$inputor.off(".atwhoInner");return this.$el.remove()};x.prototype.dispatch=function(y){var B;var C=this.controllers;var H=[];for(B in C){var F=C[B];H.push(F.lookUp(y))}return H};x.prototype.onKeyup=function(y){var B;switch(y.keyCode){case q.ESC:y.preventDefault();null!=(B=this.controller())&&B.view.hide();break;case q.DOWN:case q.UP:case q.CTRL:case q.ENTER:a.noop();break;
case q.P:case q.N:y.ctrlKey||this.dispatch(y);break;default:this.dispatch(y)}};x.prototype.onKeydown=function(y){var B,C;if((C=null!=(B=this.controller())?B.view:void 0)&&C.visible())switch(y.keyCode){case q.ESC:y.preventDefault();C.hide(y);break;case q.UP:y.preventDefault();C.prev();break;case q.DOWN:y.preventDefault();C.next();break;case q.P:if(!y.ctrlKey)break;y.preventDefault();C.prev();break;case q.N:if(!y.ctrlKey)break;y.preventDefault();C.next();break;case q.TAB:case q.ENTER:case q.SPACE:if(!C.visible())break;
if(!this.controller().getOpt("spaceSelectsMatch")&&y.keyCode===q.SPACE)break;if(!this.controller().getOpt("tabSelectsMatch")&&y.keyCode===q.TAB)break;C.highlighted()?(y.preventDefault(),C.choose(y)):C.hide(y);break;default:a.noop()}};return x}();var l=function(){function x(y,B){this.app=y;this.at=B;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.query=this.setting=this.expectedQueryCBId=null;this.pos=0;this.range=null;0===(this.$el=a("#atwho-ground-"+this.id,this.app.$el)).length&&
this.app.$el.append(this.$el=a("<div id='atwho-ground-"+this.id+"'></div>"));this.model=new p(this);this.view=new r(this)}x.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()};x.prototype.init=function(y){this.setting=a.extend({},this.setting||a.fn.atwho["default"],y);this.view.init();return this.model.reload(this.setting.data)};x.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};
x.prototype.callDefault=function(){var y=arguments[0];var B=2<=arguments.length?c.call(arguments,1):[];try{return u[y].apply(this,B)}catch(C){return B=C,a.error(B+" Or maybe At.js doesn't have function "+y)}};x.prototype.trigger=function(y,B){null==B&&(B=[]);B.push(this);var C=this.getOpt("alias");return this.$inputor.trigger(C?y+"-"+C+".atwho":y+".atwho",B)};x.prototype.callbacks=function(y){return this.getOpt("callbacks")[y]||u[y]};x.prototype.getOpt=function(y,B){try{return this.setting[y]}catch(C){return null}};
x.prototype.insertContentFor=function(y){var B=this.getOpt("insertTpl");y=a.extend({},y.data("item-data"),{"atwho-at":this.at});return this.callbacks("tplEval").call(this,B,y,"onInsert")};x.prototype.renderView=function(y){var B=this.getOpt("searchKey");y=this.callbacks("sorter").call(this,this.query.text,y.slice(0,1001),B);return this.view.render(y.slice(0,this.getOpt("limit")))};x.arrayToDefaultHash=function(y){var B;if(!a.isArray(y))return y;var C=[];var H=0;for(B=y.length;H<B;H++){var F=y[H];
a.isPlainObject(F)?C.push(F):C.push({name:F})}return C};x.prototype.lookUp=function(y){var B;if(!y||"click"!==y.type||this.getOpt("lookUpOnClick"))if(!this.getOpt("suspendOnComposing")||!this.app.isComposing){y=this.catchQuery(y);if(!y)return this.expectedQueryCBId=null,y;this.app.setContextFor(this.at);(B=this.getOpt("delay"))?this._delayLookUp(y,B):this._lookUp(y);return y}};x.prototype._delayLookUp=function(y,B){var C=Date.now?Date.now():(new Date).getTime();this.previousCallTime||(this.previousCallTime=
C);var H=B-(C-this.previousCallTime);if(0<H&&H<B)return this.previousCallTime=C,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(F){return function(){F.previousCallTime=0;F.delayedCallTimeout=null;return F._lookUp(y)}}(this),B);this._stopDelayedCall();this.previousCallTime!==C&&(this.previousCallTime=0);return this._lookUp(y)};x.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null};x.prototype._generateQueryCBId=
function(){return{}};x.prototype._lookUp=function(y){this.expectedQueryCBId=this._generateQueryCBId();return this.model.query(y.text,a.proxy(function(B,C){if(B===this.expectedQueryCBId)return C&&0<C.length?this.renderView(this.constructor.arrayToDefaultHash(C)):this.view.hide()},this,this.expectedQueryCBId))};return x}();var m=function(x){function y(){return y.__super__.constructor.apply(this,arguments)}b(y,x);y.prototype.catchQuery=function(){var B=this.$inputor.val();var C=this.$inputor.caret("pos",
{iframe:this.app.iframe});B=B.slice(0,C);B=this.callbacks("matcher").call(this,this.at,B,this.getOpt("startWithSpace"));var H="string"===typeof B;if(!(H&&B.length<this.getOpt("minLen",0)))return H&&B.length<=this.getOpt("maxLen",20)?(H=C-B.length,C=H+B.length,this.pos=H,B={text:B,headPos:H,endPos:C},this.trigger("matched",[this.at,B.text])):(B=null,this.view.hide()),this.query=B};y.prototype.rect=function(){var B;if(B=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe})){if(this.app.iframe&&
!this.app.iframeAsRoot){var C=a(this.app.iframe).offset();B.left+=C.left;B.top+=C.top}return{left:B.left,top:B.top,bottom:B.top+B.height+(this.app.document.selection?0:2)}}};y.prototype.insert=function(B,C){C=this.$inputor;var H=C.val();var F=H.slice(0,Math.max(this.query.headPos-this.at.length,0));var E=""===(E=this.getOpt("suffix"))?E:E||" ";B+=E;E=""+F+B+H.slice(this.query.endPos||0);C.val(E);C.caret("pos",F.length+B.length,{iframe:this.app.iframe});C.is(":focus")||C.focus();return C.change()};
return y}(l);var n=function(x){function y(){return y.__super__.constructor.apply(this,arguments)}b(y,x);y.prototype._getRange=function(){var B=this.app.window.getSelection();if(0<B.rangeCount)return B.getRangeAt(0)};y.prototype._setRange=function(B,C,H){null==H&&(H=this._getRange());if(H)return C=a(C)[0],"after"===B?(H.setEndAfter(C),H.setStartAfter(C)):(H.setEndBefore(C),H.setStartBefore(C)),H.collapse(!1),this._clearRange(H)};y.prototype._clearRange=function(B){null==B&&(B=this._getRange());var C=
this.app.window.getSelection();if(null==this.ctrl_a_pressed)return C.removeAllRanges(),C.addRange(B)};y.prototype._movingEvent=function(B){var C;return"click"===B.type||(C=B.which)===q.RIGHT||C===q.LEFT||C===q.UP||C===q.DOWN};y.prototype._unwrap=function(B){var C;B=a(B).unwrap().get(0);(C=B.nextSibling)&&C.nodeValue&&(B.nodeValue+=C.nodeValue,a(C).remove());return B};y.prototype.catchQuery=function(B){var C,H,F,E,G;if((G=this._getRange())&&G.collapsed)if(B.which===q.ENTER)(C=a(G.startContainer).closest(".atwho-query")).contents().unwrap(),
C.is(":empty")&&C.remove(),(C=a(".atwho-query",this.app.document)).text(C.text()).contents().last().unwrap(),this._clearRange();else{if(/firefox/i.test(navigator.userAgent)){if(a(G.startContainer).is(this.$inputor)){this._clearRange();return}if(B.which===q.BACKSPACE&&G.startContainer.nodeType===document.ELEMENT_NODE&&0<=(E=G.startOffset-1)){var K=G.cloneRange();K.setStart(G.startContainer,E);a(K.cloneContents()).contents().last().is(".atwho-inserted")&&(K=a(G.startContainer).contents().get(E),this._setRange("after",
a(K).contents().last()))}else B.which===q.LEFT&&G.startContainer.nodeType===document.TEXT_NODE&&(K=a(G.startContainer.previousSibling),K.is(".atwho-inserted")&&0===G.startOffset&&this._setRange("after",K.contents().last()))}a(G.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query");0<(C=a(".atwho-query",this.app.document)).length&&C.is(":empty")&&0===C.text().length&&C.remove();this._movingEvent(B)||C.removeClass("atwho-inserted");if(0<C.length)switch(B.which){case q.LEFT:this._setRange("before",
C.get(0),G);C.removeClass("atwho-query");return;case q.RIGHT:this._setRange("after",C.get(0).nextSibling,G);C.removeClass("atwho-query");return}0<C.length&&(F=C.attr("data-atwho-at-query"))&&(C.empty().html(F).attr("data-atwho-at-query",null),this._setRange("after",C.get(0),G));K=G.cloneRange();K.setStart(G.startContainer,0);K=this.callbacks("matcher").call(this,this.at,K.toString(),this.getOpt("startWithSpace"));F="string"===typeof K;0===C.length&&F&&0<=(H=G.startOffset-this.at.length-K.length)&&
(G.setStart(G.startContainer,H),C=a("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),G.surroundContents(C.get(0)),H=C.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(G.setStart(H,H.length),G.setEnd(H,H.length),this._clearRange(G)):this._setRange("after",H,G));if(!(F&&K.length<this.getOpt("minLen",0))){if(F&&K.length<=this.getOpt("maxLen",20))return B={text:K,el:C},this.trigger("matched",[this.at,B.text]),this.query=B;this.view.hide();
this.query={el:C};0<=C.text().indexOf(this.at)&&(this._movingEvent(B)&&C.hasClass("atwho-inserted")?C.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,C)&&this._setRange("after",this._unwrap(C.text(C.text()).contents().first())));return null}}};y.prototype.rect=function(){var B=this.query.el.offset();if(this.app.iframe&&!this.app.iframeAsRoot){var C=a(this.app.iframe).offset();B.left+=C.left-this.$inputor.scrollLeft();B.top+=C.top-this.$inputor.scrollTop()}B.bottom=
B.top+this.query.el.height();return B};y.prototype.insert=function(B,C){var H=""===(H=this.getOpt("suffix"))?H:H||"\u00a0";C=C.data("item-data");this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(B).attr("data-atwho-at-query",""+C["atwho-at"]+this.query.text);if(B=this._getRange())B.setEndAfter(this.query.el[0]),B.collapse(!1),B.insertNode(H=this.app.document.createTextNode("\u200d"+H)),this._setRange("after",H,B);this.$inputor.is(":focus")||this.$inputor.focus();return this.$inputor.change()};
return y}(l);var p=function(){function x(y){this.context=y;this.at=this.context.at;this.storage=this.context.$inputor}x.prototype.destroy=function(){return this.storage.data(this.at,null)};x.prototype.saved=function(){return 0<this.fetch()};x.prototype.query=function(y,B){var C=this.fetch();var H=this.context.getOpt("searchKey");C=this.context.callbacks("filter").call(this.context,y,C,H)||[];H=this.context.callbacks("remoteFilter");return 0<C.length||!H&&0===C.length?B(C):H.call(this.context,y,B)};
x.prototype.fetch=function(){return this.storage.data(this.at)||[]};x.prototype.save=function(y){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,y||[]))};x.prototype.load=function(y){if(!this.saved()&&y)return this._load(y)};x.prototype.reload=function(y){return this._load(y)};x.prototype._load=function(y){return"string"===typeof y?a.ajax(y,{dataType:"json"}).done(function(B){return function(C){return B.save(C)}}(this)):this.save(y)};return x}();var r=function(){function x(y){this.context=
y;this.$el=a("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeoutID=null;this.context.$el.append(this.$el);this.bindEvent()}x.prototype.init=function(){var y=this.context.getOpt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+y})};x.prototype.destroy=function(){return this.$el.remove()};x.prototype.bindEvent=function(){var y=this.$el.find("ul");return y.on("mouseenter.atwho-view","li",function(B){y.find(".cur").removeClass("cur");return a(B.currentTarget).addClass("cur")}).on("click.atwho-view",
"li",function(B){return function(C){y.find(".cur").removeClass("cur");a(C.currentTarget).addClass("cur");B.choose(C);return C.preventDefault()}}(this))};x.prototype.visible=function(){return this.$el.is(":visible")};x.prototype.highlighted=function(){return 0<this.$el.find(".cur").length};x.prototype.choose=function(y){var B;if((B=this.$el.find(".cur")).length&&B.find("img").length){var C=this.context.insertContentFor(B);this.context._stopDelayedCall();this.context.insert(this.context.callbacks("beforeInsert").call(this.context,
C,B),B);this.context.trigger("inserted",[B,y]);this.hide(y)}if(this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0};x.prototype.reposition=function(y){var B;var C=this.context.app.iframeAsRoot?this.context.app.window:window;y.bottom+this.$el.height()-a(C).scrollTop()>a(C).height()&&(y.bottom=y.top-this.$el.height());y.left>(C=a(C).width()-this.$el.width()-5)&&(y.left=C);y={left:y.left,top:y.bottom};null!=(B=this.context.callbacks("beforeReposition"))&&B.call(this.context,y);this.$el.offset(y);
return this.context.trigger("reposition",[y])};x.prototype.next=function(){var y=this.$el.find(".cur").removeClass("cur");var B=y.next();B.length||(B=this.$el.find("li:first"));B.addClass("cur");return this.scrollTop(Math.max(0,y.innerHeight()*(B.index()+2)-this.$el.height()))};x.prototype.prev=function(){var y=this.$el.find(".cur").removeClass("cur");var B=y.prev();B.length||(B=this.$el.find("li:last"));B.addClass("cur");return this.scrollTop(Math.max(0,y.innerHeight()*(B.index()+2)-this.$el.height()))};
x.prototype.scrollTop=function(y){var B;return(B=this.context.getOpt("scrollDuration"))?this.$el.animate({scrollTop:y},B):this.$el.scrollTop(y)};x.prototype.show=function(){var y;if(this.stopShowing)this.stopShowing=!1;else if(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),y=this.context.rect())return this.reposition(y)};x.prototype.hide=function(y,B){if(this.visible()){if(isNaN(B))return this.$el.hide(),this.context.trigger("hidden",[y]);y=function(C){return function(){return C.hide()}}(this);
clearTimeout(this.timeoutID);return this.timeoutID=setTimeout(y,B)}};x.prototype.render=function(y){var B;if(a.isArray(y)&&0<y.length){this.$el.find("ul").empty();var C=this.$el.find("ul");var H=this.context.getOpt("displayTpl");var F=0;for(B=y.length;F<B;F++){var E=y[F];E=a.extend({},E,{"atwho-at":this.context.at});var G=this.context.callbacks("tplEval").call(this.context,H,E,"onDisplay");G=a(this.context.callbacks("highlighter").call(this.context,G,this.context.query.text));G.data("item-data",E);
C.append(G)}this.show();if(this.context.getOpt("highlightFirst"))return C.find("li:first").addClass("cur")}else this.hide()};return x}();var q={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32};var u={beforeSave:function(x){return l.arrayToDefaultHash(x)},matcher:function(x,y,B,C){x=x.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");B&&(x="(?:^|\\s)"+x);B=decodeURI("%C3%80");var H=decodeURI("%C3%BF");return(x=(new RegExp(x+"([A-Za-z"+
B+"-"+H+"0-9_"+(C?" ":"")+"'.+-]*)$|"+x+"([^\\x00-\\xff]*)$","gi")).exec(y))?x[2]||x[1]:null},filter:function(x,y,B){var C;var H=[];var F=0;for(C=y.length;F<C;F++){var E=y[F];~(new String(E[B])).toLowerCase().indexOf(x.toLowerCase())&&H.push(E)}return H},remoteFilter:null,sorter:function(x,y,B){var C;if(!x)return y;var H=[];var F=0;for(C=y.length;F<C;F++){var E=y[F];E.atwho_order=(new String(E[B])).toLowerCase().indexOf(x.toLowerCase());-1<E.atwho_order&&H.push(E)}return H.sort(function(G,K){return G.atwho_order-
K.atwho_order})},tplEval:function(x,y){var B=x;try{return"string"!==typeof x&&(B=x(y)),B.replace(/\$\{([^\}]*)\}/g,function(C,H,F){return y[H]})}catch(C){return""}},highlighter:function(x,y){if(!y)return x;y=new RegExp(">\\s*(\\w*?)("+y.replace("+","\\+")+")(\\w*)\\s*<","ig");return x.replace(y,function(B,C,H,F){return"> "+C+"<strong>"+H+"</strong>"+F+" <"})},beforeInsert:function(x,y){return x},beforeReposition:function(x){return x},afterMatchFailed:function(x,y){}};var v={load:function(x,y){if(x=
this.controller(x))return x.model.load(y)},isSelecting:function(){var x;return!(null==(x=this.controller())||!x.view.visible())},hide:function(){var x;return null!=(x=this.controller())?x.view.hide():void 0},reposition:function(){var x;if(x=this.controller())return x.view.reposition(x.rect())},setIframe:function(x,y){this.setupRootElement(x,y);return null},run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};a.fn.atwho=function(x){var y=
arguments;var B=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var C,H;(H=(C=a(this)).data("atwho"))||C.data("atwho",H=new k(this));return"object"!==typeof x&&x?v[x]&&H?B=v[x].apply(H,Array.prototype.slice.call(y,1)):a.error("Method "+x+" does not exist on jQuery.atwho"):H.reg(x.at,x)});return null!=B?B:this};a.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:u,searchKey:"name",
suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0};a.fn.atwho.debug=!1});(function(){var a=new function(){var h=!0,k=!1,l=[];_state=void 0!==window.history.pushState;_view={type:"",data:{}};this._address={path:null,pathNames:[]};this.setView=function(m,n){_view.type=m;_view.data=n};this.getView=function(){return _view};this.changeAddress=function(m,n){k=n;$.address.value(m)};this.isFakeRequest=function(){return k};this.setFakeRequest=function(m){k=m};this._pushLastAddress=function(m){2<=l.length&&l.splice(0,1);l.push(m)};this.getLastAddress=function(){return l[0]};this.onAddressInit=
function(){$("a.ajax,li.js-activity.ajax").address()};this.onAddressChange=function(m){if($.browser.msie&&9>=parseInt($.browser.version))if("/"!=m.value||""==window.location.pathname||""!=window.location.hash&&"#"!=window.location.hash)"/home"==m.value&&(m.value=WS_PREFIX+"/personal",m.pathNames=[]);else{_state=!0;m.value=window.location.pathname;var n=m.value.split("/").slice(1);2<=n.length?m.pathNames=n:"/settings"==m.value?m.pathNames=["settings"]:(m.value=WS_PREFIX+"/personal",m.pathNames=[])}a._address.path=
m.value;a._address.pathNames=m.pathNames;a._pushLastAddress(m.value);h?_state||"/"==m.value||m.value==WS_PREFIX+"/personal"?(h=!1,c.triggerEvent()):window.location.href=m.value:"false"!=b.Uploader.options.iur||"/"!=m.value&&m.value!=WS_PREFIX+"/personal"?(c.runAction(),k&&=!1):window.location.href="/"};this.isTeamUpload=function(m){return"undefined"!==m&&m===b.Handler.getRule("team")||$("#team_uploads").parent().hasClass("active")?1:0};this.isSharedUpload=function(m){return"undefined"!==m&&m===b.Handler.getRule("shared")?
1:0}};var c=new function(){var h,k,l={},m,n=function(){b.App._address.pathNames.length&&3<=b.App._address.pathNames.length&&"w"==b.App._address.pathNames[0]?(h=b.App._address.pathNames[2],k=l.hasOwnProperty(h)?l[h]:h,m={id:b.App._address.pathNames[3]||0},"undefined"!=typeof b.App._address.pathNames[4]&&(m.child_id=b.App._address.pathNames[4])):(h=b.App._address.pathNames.length?b.App._address.pathNames[0]:"_empty",k=l.hasOwnProperty(h)?l[h]:h,m={id:b.App._address.pathNames[1]||0},"undefined"!=typeof b.App._address.pathNames[2]&&
(m.child_id=b.App._address.pathNames[2]));""!=$.address.hash()&&(m.hash=$.address.hash());b.App.setView(k,m)};this.triggerEvent=function(){n();$(document).trigger(k+"_load")};this.runAction=function(p,r){n();"object"===typeof this[k]?"function"===typeof this[k].index?this[k].index.call(this,b.App._address.path,b.App._address.pathNames):console.error("Object "+k+" has no index method"):console.error("No handler found for: "+k)};this.setRules=function(p){l=p};this.setRule=function(p,r){l[p]=r};this.getRule=
function(p){return l[p]||!1}};var b=this.Jmp={};b.App=a;b.Handler=c}).call(this);Jmp.Handler.setRules({_empty:"Buckets",personal:"Buckets",b:"BucketFiles",v:"Viewer",s:"Viewer",j:"Viewer",search:"Search",activities:"Activities",settings:"Settings",shared:"Shared",referrals:"Referrals",plus:"Plus",analytics:"Analytics",favorites:"Favorites",team:"Team",shared:"Collaboration",history:"VersionHistory",trash:"Trash",admin:"TeamsConsole",viewed:"Viewed",inbox:"Inbox",teamsactivities:"TeamsActivities"});
if("onerror"in window){var js_errors=[];window.onerror=function(a,c,b){Jmp.Helpers.stop_page_loading();js_errors.push({msg:a,url:c,line:b,path:window.location.pathname})};setInterval(function(){if(0!=js_errors.length){var a={errors:js_errors};a[CSRF.token_name]=CSRF.token_value;$.post("/logger/js_errors/",a,function(){js_errors=[]})}},6E4)}$(document).ajaxSend(function(a,c,b){Jmp.Helpers.is_connected()||c.abort()});
$(window).bind("online",function(){Jmp.Helpers.remove_disconnected_notification()}).bind("offline",function(){Jmp.Helpers.show_notification_on_disconnected()});$(document).ajaxStop(function(){Jmp.Helpers.stop_page_loading()});$.ajaxSetup({cache:!1});
$(function(){$(".js_cancel_all_uploads").live("click",function(a){Jmp.Uploader.cancel_all_uploads();return!1});Jmp.Helpers.is_opera()&&(1<=$("#drop-area .msg").length&&$("#drop-area .msg").html("Click here to Upload"),1<=$("#dd-area .msg").length&&$("#dd-area .msg").html("Click to upload files"));$.browser.msie&&9>=parseInt($.browser.version)&&1<=$(".back-to a").length&&"#/home"!=window.location.hash&&$(".back-to a").attr("href","#/home");Jmp.Helpers.set_thumbs_width_on_resize()});(function(a){function c(){this.edit=!1}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?($.event.trigger("Buckets_load"),Jmp.Helpers.update_browser_title("Personal Library")):(Jmp.Helpers.start_page_loading(),$.ajax({url:b,success:function(k){$("#buckets_container").infinitescroll("destroy");$("#main_container").html(k);Jmp.Handler.Buckets.set_scroll_top();$("#CopyBucketDiv").remove();$.event.trigger("Buckets_load");Jmp.Uploader.showBucketUploads(0)}}))},onShowActions:function(){Jmp.App.in_edit_mode=
"true";var b=$("#global-actions");b.find(".show_actions").hide();b.find(".action_buttons").show();b.parent().find("a.btn-upgrade").hide();$("#items li .checkbox:not(.disabled)").show();$("#items li .options").addClass("hide");$("#header-inner h1 .edit").hide();$("div#header-inner h1 .edit_bucket_name").css("cursor","text");$("body").addClass("edit-mode");$(".gird_list_view").hide();$(".restore_trash_items").show();EditMode.enable();return!1},onHideActions:function(){Jmp.App.in_edit_mode="false";var b=
$("#global-actions");b.find(".action_buttons").hide();b.find(".show_actions").show();b.find(".delete").addClass("disabled");b.find(".merge").addClass("disabled");b.find(".copymove").addClass("disabled");b.find(".download_selected").addClass("disabled");b.parent().find("a.btn-upgrade").show();$("#items li .checkbox").hide();$("#items li .options").removeClass("hide");$("li.selected").removeClass("selected");$("li .checkbox .checked").removeClass("checked");$("#header-inner h1 .edit").show();$("body").removeClass("edit-mode");
$("div#header-inner h1 .edit_bucket_name").css("cursor","pointer");Jmp.App.getView().type==Jmp.Handler.getRule("b")&&Jmp.Handler.BucketFiles.initialize_copier();$(".gird_list_view").show();$(".restore_trash_items").hide();EditMode.disable();a.Buckets.enable_context_menu()},onShowEditName:function(b){b.preventDefault();$(this).parents("li").find(".rename_from_popup").click();return!1},onSubmitEditName:function(b){13==b.which&&0==a.Buckets.edit?(a.Buckets.edit=!0,b=$(this),b.data("original-value")==
b.val()||""==$.trim(b.val())?(a.Buckets._detach_event_handler_to_item_edit_name(),a.Buckets._dismiss_update_name_textbox(b),a.Buckets._attach_event_handler_to_item_edit_name(),a.Buckets.edit=!1):(a.Buckets._detach_event_handler_to_item_edit_name(),a.Buckets.updateItemName($(this)))):27==b.keyCode&&(b=$(this),a.Buckets._detach_event_handler_to_item_edit_name(),a.Buckets._dismiss_update_name_textbox(b),a.Buckets._attach_event_handler_to_item_edit_name())},updateItemName:function(b){var h=b.data("controller"),
k=Jmp.App.getView().type;"files"==h&&"bucket"==b.data("type")&&(h="buckets");var l="/edit/";"system"==UTYPE&&(l="/edit_guest/");$("#rename_from_popup").attr("disabled","disabled").text("Renaming ...");$.post(BASEURL_WS+h+l+k,Jmp.Helpers.get_secure_params({id:b.data("id"),name:Jmp.Helpers.strip_tags(b.val()),type:b.data("type"),ext:b.data("ext")}),function(m){if(m.status){var n=Jmp.Helpers.get_item(m.id);if(1==n.length){if(n.attr("data-name",m.name),n.attr("data-gridname",m.gridname),n.data("gridname",
m.gridname),n.find(".meta").removeClass("hide"),n.find(".name-area a").remove(),n.find(".name-area .new_name").remove(),n.find(".name-area").removeClass("name-edit").prepend('<a class="thumb-title ajax pull-left" href="'+n.find(".thumbnail-wrapper a").attr("href")+'" title="'+m.name+'">'+m.gridname+'</a><a class="icn-edit pull-right" href="/"></a>'),("files"==h&&"Buckets"==k||"files"==h&&ViewerPanel.is_open())&&n.find(".thumb-title").removeClass("ajax").addClass("temp_ajax").attr("data-id",m.id),
"undefined"!=typeof m.bucket_name&&Jmp.Helpers.update_bucket_name(m.bucket_name,m.bucket_grid_name),Jmp.App.getView().type==Jmp.Handler.getRule("search")){var p=m.name;n.hasClass("file")&&m.ext&&(p+="."+m.ext);n.find(".item-meta a").attr("title",p).text(p)}}else $(".top_heading_dashboard .new_name").remove(),$("#bucket_name_header").attr("title",m.fullname).attr("data-gridname",m.gridname).attr("data-name-edited","1").css("display","block").html(Jmp.Helpers.encode_string(m.gridname)).next().show().parent().removeClass("title-editing"),
Jmp.Helpers.update_browser_title(m.fullname),$("#global-actions").find(".email").attr("data-title",m.name);Jmp.App.Notifications.display_notification({type:"item_renamed",message:"Rename complete"}).close_notification();Jmp.App.Lightbox.hide();"files"==h&&(n=ViewerPanel.viewers_collection.fetch_by_id(m.id))&&(n.name=m.name,ViewerPanel.is_open&&(p=ViewerPanel.viewers_collection.get_current_viewer(),p.id==n.id&&(ViewerPanel.header.update_title(p),ViewerPanel.unknown.update_name(p))));n=$(".sorting").find(".active");
n.length&&"name"==n.attr("data-val")&&Jmp.Helpers.list_sort(n.attr("data-val"),n.find("span").attr("data-val"));"false"==$("#header_title").attr("data-in-rename-mode")&&$("#set_favorite").removeClass("hide");n=Jmp.App.getView().data.id;"bucket"==m.type?Socket.push("items_updated",[{parent:"0"==n||0==n?"Team"==Jmp.App.getView().type?"team":"root":n,name:m.fullname,grid_name:m.gridname,type:"folder",code:m.id,state:"renamed"}]):Socket.push("items_updated",[{parent:"0"==n||0==n?"Team"==Jmp.App.getView().type?
"team":"root":n,name:m.fullname,grid_name:m.gridname,type:"file",code:m.id,state:"renamed"}])}else Jmp.App.Notifications.display_notification({type:"error",message:m.message}).close_notification();$("#rename_from_popup").removeAttr("disabled").text("Rename");a.Buckets.edit=!1})},_dismiss_update_name_textbox:function(b){1<=$("div#header-inner .new_name, .top_heading_dashboard .new_name").length?($(".top_heading_dashboard .new_name").remove(),b=$("#bucket_name_header"),b.css("display","block").html(Jmp.Helpers.encode_string(b.attr("data-gridname"))),
b.next().show(),b.parent().removeClass("title-editing")):1<=$(".new_name").length&&(b=Jmp.Helpers.get_item(b.data("id")),b.find(".meta").removeClass("hide"),b.find(".name-area").removeClass("name-edit").html('<a class="thumb-title ajax pull-left" href="'+b.find(".thumbnail-wrapper a").attr("href")+'">'+Jmp.Helpers.encode_string(b.data("gridname"))+'</a><a class="icn-edit pull-right" href="/"></a>'),!b.hasClass("file")||Jmp.App.getView().type!=Jmp.Handler.getRule("_empty")&&Jmp.App.getView().type!=
Jmp.Handler.getRule("team")||b.find(".thumb-title").removeClass("ajax").addClass("temp_ajax").attr("data-id",b.attr("id")));"false"==$("#header_title").attr("data-in-rename-mode")&&$("#set_favorite").removeClass("hide")},onNewNameFocusOut:function(b){textbox=$(this);textbox.data("original-value")==textbox.val()||""==$.trim(textbox.val())?a.Buckets._dismiss_update_name_textbox(textbox):a.Buckets.updateItemName(textbox)},_attach_event_handler_to_item_edit_name:function(){$("div.thumbnail .new_name, div#header-inner .new_name, .new_name").focusout(a.Buckets.onNewNameFocusOut);
$("div.thumbnail .new_name, div#header-inner .new_name, .new_name").keydown(a.Buckets.onSubmitEditName)},_detach_event_handler_to_item_edit_name:function(){},onDeleteMultiItems:function(b){var h=$(Jmp.Helpers.get_container()+" li .checkbox .checked");1>h.length&&Jmp.App.Notifications.display_notification({type:"error",message:"Please select atleast 1 item to delete"}).close_notification();var k=[],l={bucket_ids:[],bucket_file_ids:[]},m=[];l.parent=Jmp.App.getView().data.id;h.each(function(){var q=
$(this).attr("data-id");Jmp.Helpers.get_item(q).hasClass("folder")?(l.bucket_ids.push(q),m.push({parent:"0"==l.parent||0==l.parent?"Team"==Jmp.App.getView().type?"team":"root":l.parent,name:$(this).attr("data-gridname"),size:$(this).attr("data-size"),type:"folder",code:q,state:"deleted"})):(l.bucket_file_ids.push(q),m.push({parent:"0"==l.parent||0==l.parent?"Team"==Jmp.App.getView().type?"team":"root":l.parent,name:$(this).attr("data-gridname"),size:$(this).attr("data-size"),type:"file",code:q,state:"deleted"}));
k.push(q)});if(1==h.length)if(1==l.bucket_ids.length){b=Jmp.Helpers.get_item(l.bucket_ids[0]);var n=b.attr("data-name")}else b=Jmp.Helpers.get_item(l.bucket_file_ids[0]),n=b.attr("data-name")+"."+b.attr("data-extension");if(1<=l.bucket_ids.length&&1<=l.bucket_file_ids.length){var p="items";var r=BASEURL_WS+"buckets/delete_items"}else 1<=l.bucket_ids.length?(p="buckets",r=BASEURL_WS+"buckets/delete",l.bucket_ids=k.toString()):1<=l.bucket_file_ids.length&&(p="files",r=BASEURL_WS+"files/delete_files",
l.bucket_file_ids=k.toString());Jmp.App.Lightbox.show({title:"Delete",type:"delete_multiple_items",item_type:p,items_count:h.length,item_name:Jmp.Helpers.encode_string(n)},function(){if("buckets"==p)for(var q=0;q<k.length;q++)Jmp.Uploader.stop_bucket_uploading_if_in_progress(k[q]);var u=this;$(this).html("Deleting ...").addClass("disabled");var v=Jmp.App.getView().data.id;1<=Object.keys(Jmp.Uploader.bucketUploads).length&&(l.uploading_in_progress=!0);$.post(r,Jmp.Helpers.get_secure_params(l),function(x){if(x.status){$("#lightbox").find(".cancel").trigger("click");
for(var y=0;y<k.length;y++)Jmp.Helpers.get_item(k[y]).remove();$("#global-actions .cancel").trigger("click");Jmp.Helpers.update_bucket_name(x.bucket_name,x.bucket_grid_name);Jmp.Helpers.update_storage_updates(x.storage_used,x.bucket_code);Jmp.App.Notifications.display_notification({type:"items_deleted",item_type:p,item_count:h.length}).close_notification();Jmp.Helpers.display_empty_message_if_no_favorite_collection_found();Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.hide_sorting_options();
Jmp.Helpers.hide_collection_sorting_options();Jmp.Helpers.adjust_more_menu();var B;"files"==p?B=k:"items"==p&&(B=l.bucket_file_ids);B&&Jmp.Helpers.delete_viewers(B);v&&m.push({parent:v,name:x.bucket_name,grid_name:x.bucket_grid_name,type:"folder",code:v,state:"renamed",storage_used:Jmp.Helpers.remove_field(x.storage_used,"storage_used_template")});Socket.push("items_updated",m);EditMode.update_buckets_count(k.length);if(x.deleted_bucket_codes)for(x=x.deleted_bucket_codes,B=x.length,y=0;y<B;y++)Jmp.Uploader.stop_bucket_uploading_if_in_progress(x[y])}else Jmp.App.Notifications.display_notification({type:"error",
message:x.message}).close_notification(),$(u).html("Delete").removeClass("disabled"),$("#lightbox").find(".cancel").trigger("click")})});return!1},onDeleteSingleItem:function(b){var h={},k=!1,l=[];$(b.target).hasClass("delete_bucket")&&(k=!0,h.bucket_self_delete=!0);var m=$(this).data("id"),n=Jmp.Helpers.get_item(m),p=$(this).data("type"),r="Delete";Jmp.Helpers.get_item(m).removeClass("open");h.parent=Jmp.App.getView().data.id;"bucket"==p?(url=BASEURL_WS+"buckets/delete",h.bucket_ids=m,r="Delete folder",
item_name=k?$("#bucket_name_header").attr("title"):n.attr("data-name")):(url=BASEURL_WS+"files/delete_files","system"==UTYPE&&(url=BASEURL_WS+"files/delete_files_guest/"),h.bucket_file_ids=m,item_name=n.attr("data-name")+(""!=n.data("extension")?"."+n.data("extension"):""),r="Delete file",l.push({parent:"0"==h.parent||0==h.parent?"Team"==Jmp.App.getView().type?"team":"root":h.parent,name:item_name,type:"file",code:m,state:"deleted"}));Jmp.App.Lightbox.show({title:r,type:"delete_single_item",item_type:p,
item_name:Jmp.Helpers.encode_string(item_name),is_collection:!1},function(){var q=this;$(this).html("Deleting ...").addClass("disabled");"bucket"==p&&Jmp.Uploader.stop_bucket_uploading_if_in_progress(m);var u=Jmp.App.getView().data.id;1<=Object.keys(Jmp.Uploader.bucketUploads).length&&(h.uploading_in_progress=!0);$.post(url,Jmp.Helpers.get_secure_params(h),function(v){if(v.status)if($("#lightbox").find(".cancel").trigger("click"),Jmp.Helpers.get_item(m).remove(),k&&(v.parent_bucket_code?Jmp.App.changeAddress("/b/"+
v.parent_bucket_code,!1):v.team_bucket?Jmp.App.changeAddress(WS_PREFIX+"/team",!1):Jmp.App.changeAddress(WS_PREFIX+"/personal",!1)),ViewerPanel.is_open()&&ViewerPanel.close_viewer(),"undefined"!=typeof v.bucket_name&&Jmp.Helpers.update_bucket_name(v.bucket_name,v.bucket_grid_name),Jmp.Helpers.update_storage_updates(v.storage_used,v.bucket_code),Jmp.Helpers.display_empty_message_if_no_favorite_collection_found(),Jmp.Helpers.display_empty_message_if_no_item_found(),Jmp.Helpers.hide_sorting_options(),
Jmp.Helpers.adjust_more_menu(),null!=url.match("files")&&Jmp.Helpers.delete_viewer(m),"bucket"==p&&(EditMode.update_buckets_count(1),"undefined"!=typeof Jmp.Uploader.emailQueue&&"undefined"!=typeof Jmp.Uploader.emailQueue[m]&&delete Jmp.Uploader.emailQueue[m]),"undefined"!=typeof v.parent_bucket_code?l.push({parent:v.parent_bucket_code,name:item_name,type:"folder",code:m,state:"deleted"}):l.push({parent:"Team"==Jmp.App.getView().type?"team":"root",name:item_name,type:"folder",code:m,state:"deleted"}),
u&&l.push({parent:u,name:v.bucket_name,grid_name:v.bucket_grid_name,type:"folder",code:u,state:"renamed",storage_used:Jmp.Helpers.remove_field(v.storage_used,"storage_used_template")}),Socket.push("items_updated",l),ViewerPanel.is_mobile||Jmp.App.Notifications.display_notification({type:"items_deleted",item_type:p,item_count:1}).close_notification(),ViewerPanel.uninitialize(),ViewerPanel.hide().initialize(),"system"==UTYPE)window.location.href=BASEURL+"viewer";else{if(v.deleted_bucket_codes){v=v.deleted_bucket_codes;
for(var x=v.length,y=0;y<x;y++)Jmp.Uploader.stop_bucket_uploading_if_in_progress(v[y])}Jmp.Helpers.hide_collection_sorting_options()}else Jmp.App.Notifications.display_notification({type:"error",message:v.message}).close_notification(),$(q).html("Delete").removeClass("disabled"),$("#lightbox").find(".cancel").trigger("click")})});$(".modal-content.modal-share").addClass("modal-delete-collection");b.preventDefault()},onViewStats:function(b){1<PLANID?Jmp.App.changeAddress(WS_PREFIX+"/analytics/folder/"+
$(this).data("id"),!1):Jmp.App.changeAddress(WS_PREFIX+"/analytics",!1);return!1},onLockItem:function(){1<PLANID?(PRIVACY="password","Viewer"==Jmp.App.getView().type?$("#viewer_share").trigger("click"):0<$(this).closest("#global-actions").length?$(this).closest("#global-actions").find(".email").trigger("click"):0<$(this).closest(".btn-cog-wheel").length&&$(this).closest(".btn-cog-wheel").find(".email").trigger("click"),$("#CPS_modal_tab").trigger("click"),setTimeout(function(){$(".lnk-privacy-menu").find("li[data-val=password] a").trigger("click")},
500)):window.location=WS_PREFIX+"/pricing"},onToggleComment:function(){$(this).hasClass("disabled")||(1<PLANID?Jmp.Handler.Buckets.doToggleComments(this):Jmp.App.Lightbox.show({type:"generic_popup",header:"Comments",text:"Disable comments to prevent people from leaving feedback. You can also disable comments for all new uploads from the Workspace Settings. This feature is only part of our Plus plan. Would you like to upgrade?",buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},
{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]},function(){window.location=WS_PREFIX+"/pricing";return!1}))},doToggleComments:function(b){var h=$(b);b=$(b).data("id");var k=ViewerPanel.viewers_collection.items[b],l="enabled";"comments_status_disable"in k&&(l=k.comments_status_disable?"enabled":"disabled");"comments_disabled"in k&&(l="disabled"==k.comments_disabled?"enabled":"disabled");$.post(BASEURL_WS+"files/toggle_comments",Jmp.Helpers.get_secure_params({comment_action:l,bucket_file_id:b}),
function(m){"disabled"==l?($("#comments_section").addClass("hide"),h.html("Enable Comments"),$("#time_stmp_coments_wrpr").addClass("comment_disbaled_timed")):"enabled"==l&&(ViewerPanel.is_open()&&(delete k.comments_status_disable,ViewerPanel.comments.load_comments(k),$("#comments_section").removeClass("hide")),h.html("Disable Comments"),$("#time_stmp_coments_wrpr").removeClass("comment_disbaled_timed"));k.comments_disabled=l;Jmp.App.Notifications.display_notification({type:"success",message:m.message}).close_notification()})},
onSubmitLockItemForm:function(){var b=$(this);b.attr("disabled",!0).val("Locking ...").addClass("disabled");var h=Jmp.Helpers.strip_tags($("#lock-item").val()),k=Jmp.Helpers.strip_tags($("#item-code").val());""!=h&&5<h.length?(h=Jmp.Helpers.queryStringArrayToJSON($("#lock-item-form").serializeArray()),$.post(BASEURL_WS+"buckets/lock",Jmp.Helpers.get_secure_params(h),function(l){if(l.status){$("#lightbox").find(".cancel").trigger("click");var m=Jmp.Helpers.get_item(k);if(m.length){var n=m.find(".name-area");
m.find("div.thumb-footer div.icn-locked").remove();m.find("div.thumb-footer").prepend("<div class='icon icn-locked'></div>");$("a.lock",m).addClass("unlock").removeClass("lock").text("Unlock");$("#viewer_actions").find("a.lock").addClass("unlock").removeClass("lock").text("Unlock");m.find(".list-panelui-attributes").length?(m.find(".list-panelui-attributes").find(".icon.icn-locked").remove(),m.find(".list-panelui-attributes").prepend("<div class='icon icn-locked'></div>")):n.append('<div class="list-panelui-attributes clearfix"><div class="icon icn-locked"></div></div>');
n.hasClass("auto-action")?n.removeClass("auto-action").addClass("auto-actions"):n.addClass("auto-action");"video"==m.data("type")?m.find(".thumbnail").find("img").attr("data-video-poster-embed",l.embed_l+"password_protected.png"):"image"==m.data("type")&&m.find(".thumbnail").find("img").attr("data-full-image-embed",l.embed_l+"password_protected_img.png")}else $("#folder-meta").length&&($("#folder-meta #lock-small").empty(),$("#folder-meta #lock-small").append('<span class="icon icn-locked"></span><span>Locked</span>'),
$("#global-actions a.lock").addClass("unlock").removeClass("lock").text("Unlock"));Jmp.App.Notifications.display_notification({type:"item_locked",message:l.message}).close_notification()}else Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification(),b.removeAttr("disabled").val("Lock").removeClass("disabled")})):(Jmp.App.Notifications.display_notification({type:"error",message:"Password must be at least six characters long"}).close_notification(),b.removeAttr("disabled").val("Lock").removeClass("disabled"));
return!1},onUnlockItem:function(){1<PLANID&&(PRIVACY="password","Viewer"==Jmp.App.getView().type?$("#viewer_share").trigger("click"):0<$(this).closest("#global-actions").length?$(this).closest("#global-actions").find(".email").trigger("click"):0<$(this).closest(".btn-cog-wheel").length&&$(this).closest(".btn-cog-wheel").find(".email").trigger("click"),$("#CPS_modal_tab").trigger("click"),setTimeout(function(){$(".lnk-privacy-menu").find("li[data-val=password] a").trigger("click")},500))},onSubmitUnlockItemForm:function(){var b=
$(this);b.attr("disabled",!0).html("Unlocking ...").addClass("disabled");var h={};h.item_id=Jmp.Helpers.strip_tags($("#item-code").val());h.item_type=Jmp.Helpers.strip_tags($("#item-type").val());$.post(BASEURL_WS+"buckets/unlock",Jmp.Helpers.get_secure_params(h),function(k){$("#lightbox").find(".cancel").trigger("click");if(k.status){var l=Jmp.Helpers.get_item(h.item_id);if(l.length){var m=l.find(".name-area");l.find("div.thumb-footer > div.icn-locked").remove();l.find("div.list-panelui-attributes div.icn-locked").remove();
$("a.unlock",l).addClass("lock").removeClass("unlock").text("Lock");$("#viewer_actions").find("a.unlock").addClass("lock").removeClass("unlock").text("Lock");m.hasClass("auto-actions")?m.removeClass("auto-actions").addClass("auto-action"):m.removeClass("auto-action");"video"==l.data("type")?l.find(".thumbnail").find("img").attr("data-video-poster-embed",k.embed_l):"image"==l.data("type")&&l.find(".thumbnail").find("img").attr("data-full-image-embed",k.embed_l)}else $("#folder-meta").length&&($("#folder-meta #lock-small").empty(),
$("#global-actions a.unlock").addClass("lock").removeClass("unlock").text("Lock"));Jmp.App.Notifications.display_notification({type:"item_locked",message:k.message}).close_notification()}else Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification(),b.removeAttr("disabled").val("Unlock").removeClass("disabled")});return!1},onClickChangeLockItemForm:function(){var b=Jmp.Helpers.strip_tags($("#unlock-item-form").children("#item-code").val()),h=Jmp.Helpers.strip_tags($("#unlock-item-form").children("#item-type").val());
$.ajax({url:BASEURL_WS+"buckets/get_lock_code/"+h+"/"+b,success:function(k){$("#lightbox .cancel").trigger("click");k.status?(Jmp.App.Lightbox.show({title:"Change Password",item_id:b,type:"lock_bucket",item_pwd:k.code,item_type:h}),$("#lock-item-form #lock-item").focus().select()):Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification()}})},onSetFavorite:function(b){"system"==UTYPE?$("#mark_fav_popover").removeClass("hide").css({top:$(this).offset().top+40+
"px",left:$(this).offset().left-22+"px"}):Jmp.Handler.Buckets.SetFavorite(this,!1)},SetFavorites:function(b,h){b.forEach(function(k){k=$(Jmp.Helpers.get_container()+" #"+k+" a.star_item_from_menu")[0];Jmp.Handler.Buckets.SetFavorite(k,!0)});h.forEach(function(k){k=$(Jmp.Helpers.get_container()+" #"+k+" a.star_item_from_menu")[0];Jmp.Handler.Buckets.SetFavorite(k,!0)});$.post(WS_PREFIX+"/buckets/set_favorites",Jmp.Helpers.get_secure_params({type:"set",file_ids:b,bucket_ids:h}),function(k){k.status?
Jmp.App.Notifications.display_notification({type:"collection_favorite",message:k.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Item(s) don't exist"}).close_notification()})},SetFavorite:function(b,h){var k="",l=$(b);b="buckets";var m=l.hasClass("star_item_from_menu"),n=m&&l.hasClass("more_menu");if("true"==l.attr("data-in-process"))return!1;h||l.attr("data-in-process",!0);if(!h&&l.hasClass("set")){k="unset";if(m){menu_item=l;var p=Jmp.Helpers.get_item(menu_item.attr("data-id"));
p.hasClass("file")&&(b="files");"Favorites"==Jmp.App.getView().type&&p.remove();Jmp.Helpers.display_empty_message_if_no_favorite_collection_found()}else l.removeClass("active").removeClass("set").addClass("unset"),menu_item=$("#more_menu").find(".star_item_from_menu");menu_item.length&&(l.is("#viewer_set_favorite")?($("#viewer_set_favorite").removeClass("active").removeClass("set").addClass("unset"),p=Jmp.Helpers.get_item(l.attr("data-id")),p.find(".name-area").removeClass("favorite"),p.attr("data-favorite-date",
""),p.find(".star_item_from_menu").text("Favorite").removeClass("set").addClass("unset")):(menu_item.text("Favorite"),menu_item.removeClass("set").addClass("unset"),n?$("#set_favorite").removeClass("active").removeClass("set").addClass("unset"):(p=Jmp.Helpers.get_item(menu_item.attr("data-id")),p.find(".name-area").removeClass("favorite"),p.attr("data-favorite-date",""))))}else k="set",m?(menu_item=l,Jmp.Helpers.get_item(menu_item.attr("data-id")).hasClass("file")&&(b="files")):(l.addClass("active").removeClass("unset").addClass("set"),
menu_item=$("#more_menu").find(".star_item_from_menu")),menu_item.length&&(l.is("#viewer_set_favorite")?($("#viewer_set_favorite").addClass("active").removeClass("unset").addClass("set"),p=Jmp.Helpers.get_item(l.attr("data-id")),p.find(".name-area").addClass("favorite"),p.attr("data-favorite-date",(new Date).getTime()),p.find(".star_item_from_menu").text("Unfavorite").removeClass("unset").addClass("set")):(menu_item.text("Unfavorite"),menu_item.removeClass("unset").addClass("set"),n?$("#set_favorite").addClass("active").removeClass("unset").addClass("set"):
(p=Jmp.Helpers.get_item(menu_item.attr("data-id")),p.find(".name-area").addClass("favorite"),p.attr("data-favorite-date",(new Date).getTime()))));h||(h={type:k,code:l.attr("data-id")},$.post(WS_PREFIX+"/"+b+"/set_favorite",Jmp.Helpers.get_secure_params(h),function(r){r.status?(l.attr("data-in-process",!1),Jmp.App.Notifications.display_notification({type:"collection_favorite",message:r.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:"Folder doesn't exist"}).close_notification()}));
if(!m)return!1},onExpireItem:function(){var b=$(this).data("id"),h=Jmp.Helpers.get_item(b),k=!1,l="folder (and all items inside it)";"Collection"==$(this).data("f")&&(k=!0);options={};if(h.length){var m=h.attr("data-name");h=h.attr("data-type")}else m=$(this).data("name"),h=$(this).data("type");"bucket"!=h&&(l="file");options.item_id=b;Jmp.App.Lightbox.show({item_id:b,type:"expire_bucket",item_name:m,item_type:h,text:l,is_collection:k});$(".modal-content.modal-share").addClass("modal-delete-collection")},
onSubmitExpireItemForm:function(){var b=$("#set_self_destruct");b.attr("disabled",!0).html("Setting Self-Destruct").addClass("disabled");var h=Jmp.Helpers.strip_tags($("#time_duration").val()),k=Jmp.Helpers.strip_tags($("#item-code").val()),l=Jmp.Helpers.get_item(k);if(""!=h){var m=$("#item-expiration-form"),n=Jmp.Helpers.queryStringArrayToJSON(m.serializeArray());$.post(BASEURL_WS+m.attr("action"),Jmp.Helpers.get_secure_params(n),function(p){if(1==p.status){Jmp.App.Lightbox.hide();if(l.length){var r=
l.find(".name-area");l.find("div.thumb-footer div.icn-self-destruct").remove();l.find("div.thumb-footer").append("<div class='icon icn-self-destruct'></div>");$("a.self-destruct",l).addClass("stop-self-destruct").removeClass("self-destruct").text("Stop Self-Destruct");ViewerPanel.is_open()&&$("#viewer_more_menu").find("a.self-destruct").addClass("stop-self-destruct").removeClass("self-destruct").text("Stop Self-Destruct");l.find(".list-panelui-attributes").length?l.find(".list-panelui-attributes").append("<div class='icon icn-self-destruct'></div>"):
r.append('<div class="list-panelui-attributes clearfix"><div class="icon icn-self-destruct"></div></div>');r.hasClass("auto-action")?r.removeClass("auto-action").addClass("auto-actions"):r.addClass("auto-action")}else $("#folder-meta").length&&($("#folder-meta #sd-small").empty(),$("#folder-meta #sd-small").append('<span class="icon icn-self-destruct"></span><span>'+p.datetime+"</span>"),$("#global-actions a.self-destruct").addClass("stop-self-destruct").removeClass("self-destruct").text("Stop Self-Destruct"));
Jmp.App.Notifications.display_notification({type:"item_expired",message:p.message}).close_notification()}else 2==p.status?(Jmp.App.Lightbox.hide(),options={},options.item_code=k,options.time_duration=h,options.confirm=1,Jmp.App.Lightbox.show({item_id:k,message1:p.message1,message2:p.message2,date_list:p.list,type:"confirm_expire_bucket"},function(){$(this).html("Proceeding ...").addClass("disabled");$.post(BASEURL_WS+m.attr("action"),Jmp.Helpers.get_secure_params(options),function(q){if(1==q.status){Jmp.App.Lightbox.hide();
if(l.length){var u=l.find(".name-area");l.find("div.thumb-footer div.icn-self-destruct").remove();l.find("div.thumb-footer").append("<div class='icon icn-self-destruct'></div>");$("a.self-destruct",l).addClass("stop-self-destruct").removeClass("self-destruct").text("Stop Self-Destruct");l.find(".list-panelui-attributes").length?l.find(".list-panelui-attributes").append("<div class='icon icn-self-destruct'></div>"):u.append('<div class="list-panelui-attributes clearfix"><div class="icon icn-self-destruct"></div></div>');
u.hasClass("auto-action")?u.removeClass("auto-action").addClass("auto-actions"):u.addClass("auto-action")}else $("#folder-meta").length&&($("#folder-meta #sd-small").empty(),$("#folder-meta #sd-small").append('<span class="icon icn-self-destruct"></span><span>'+q.datetime+"</span>"),$("#global-actions a.self-destruct").addClass("stop-self-destruct").removeClass("self-destruct").text("Stop Self-Destruct"));Jmp.App.Notifications.display_notification({type:"item_expired",message:q.message}).close_notification()}else $(this).html("Proceed").removeClass("disabled"),
Jmp.App.Notifications.display_notification({type:"error",message:q.message}).close_notification()})})):(Jmp.App.Notifications.display_notification({type:"error",message:p.message}).close_notification(),b.removeAttr("disabled").html("Self-Destruct").removeClass("disabled"))})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select time to Self-Destruct"}).close_notification(),b.removeAttr("disabled").html("Self-Destruct").removeClass("disabled");return!1},onDefuseItem:function(){var b=
$(this).data("id"),h=Jmp.Helpers.get_item(b),k="",l="";options={};h.length?(k=h.attr("data-name"),l=h.attr("data-type")):(k=$("#bucket_name_header").data("gridname"),l=$(this).data("type"));options.item_id=b;options.item_type=l;Jmp.App.Lightbox.show({item_id:b,type:"defuse_bucket",item_name:k},function(){$(this).html("Stoping Self-Destruct ...").addClass("disabled");$.post(BASEURL_WS+"buckets/defuse",Jmp.Helpers.get_secure_params(options),function(m){$("#lightbox").find(".cancel").trigger("click");
if(m.status)if(h.length){var n=h.find(".name-area");$("a.stop-self-destruct",h).addClass("self-destruct").removeClass("stop-self-destruct").text("Self-Destruct");ViewerPanel.is_open()&&$("#viewer_more_menu").find("a.stop-self-destruct").addClass("self-destruct").removeClass("stop-self-destruct").text("Self-Destruct");h.find("div.thumb-footer > div.icn-self-destruct").remove();h.find("div.list-panelui-attributes div.icn-self-destruct").remove();n.hasClass("auto-actions")?n.removeClass("auto-actions").addClass("auto-action"):
n.removeClass("auto-action")}else $("#folder-meta").length&&($("#folder-meta #sd-small").empty(),$("#global-actions a.stop-self-destruct").addClass("self-destruct").removeClass("stop-self-destruct").text("Self-Destruct"));Jmp.App.Notifications.display_notification({type:"item_locked",message:m.message}).close_notification()})})},onMergeBuckets:function(){if(1<$(Jmp.Helpers.get_container()+" li.selected").length){var b=[],h=[],k="";$(Jmp.Helpers.get_container()+" li.bucket-li.selected").each(function(){b.push($(this).data("id"))});
$(Jmp.Helpers.get_container()+" li.file.selected").each(function(){h.push($(this).data("id"))});var l=b.length+h.length;b.length&&h.length?k="items":b.length?k="folders":h.length&&(k="files");Jmp.App.Lightbox.show({title:"Merge '"+l+"' "+k,type:"merge_buckets",form:"merge_buckets_form",bucket_ids:b,file_ids:h,total_items:l});$("#merge_buckets_form #merge-folder").focus();EditMode.update_buckets_count(l.length-1)}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select at least two items to merge them"}).close_notification();
return!1},onSubmitMergeBucketsForm:function(){var b=$(this);b.attr("disabled",!0).html("Merging ...").addClass("disabled");var h=Jmp.Helpers.strip_tags($("#merge_buckets_form #bucket_ids").val()),k=Jmp.Helpers.strip_tags($("#merge_buckets_form #file_ids").val()),l=Jmp.Helpers.strip_tags($("#merge_buckets_form #total_items").val()),m=Jmp.Helpers.strip_tags($("#merge_buckets_form #merge-folder").val()),n="items";""!=h&&""!=k?n="items":""!=h?n="folders":""!=k&&(n="files");""==$("#merge-folder").val()?
(Jmp.App.Notifications.display_notification({type:"error",message:"Please enter a folder name for merged "+n}).close_notification(),b.removeAttr("disabled").html("Merge").removeClass("disabled")):(b=Jmp.App.getView().data.id,b=Jmp.App.getView().type==Jmp.Handler.getRule("team")&&0==b?-1:b,$.post(BASEURL_WS+"buckets/merge",Jmp.Helpers.get_secure_params({new_bucket_name:m,bucket_ids:h,file_ids:k,bucket_id:b}),function(p){if(p.status){"Buckets"==Jmp.App.getView().type||"Team"==Jmp.App.getView().type?
$("#buckets_container").append(p.bucket_template):$("#files_container").append(p.bucket_template);var r=[],q=[];if(""!=h){r=h.split(",");for(var u=0;u<r.length;u++)$(Jmp.Helpers.get_container()+" li#"+r[u]).remove()}if(""!=k){q=k.split(",");for(u=0;u<q.length;u++)$(Jmp.Helpers.get_container()+" li#"+q[u]).remove();Jmp.Helpers.delete_viewers(q)}$("#lightbox .cancel").trigger("click");$("#global-actions .cancel").trigger("click");r=parseInt($("#folder-meta").find(".folders").attr("data-items-count"))-
(r.length+q.length-1);$("#folder-meta").find(".folders").attr("data-items-count",r).text(r+(1<r?" items":" item"));Jmp.App.Notifications.display_notification({type:"folders_merged",message:l+" "+n+" merged"}).close_notification();"Buckets"==Jmp.App.getView().type||"Team"==Jmp.App.getView().type?(Jmp.Helpers.list_sort("recently_added","desc"),Socket.push("items_updated",[{parent:"Team"==Jmp.App.getView().type?"team":"root",code:p.new_bucket_code,name:p.new_name,type:"folder",state:"created"}])):(r=
$(".sorting").find(".active"),r.length&&Jmp.Helpers.list_sort(r.attr("data-val"),r.find("span").attr("data-val")),p.parent="0"==p.parent||0==p.parent?"Team"==Jmp.App.getView().type?"team":"root":p.parent,Socket.push("items_updated",[{parent:p.parent,code:p.new_bucket_code,name:p.new_name,type:"folder",state:"created"}]));p.new_bucket_code&&Jmp.Helpers.highlight_items(p.new_bucket_code);Jmp.Helpers.update_bucket_name(p.bucket_name,p.bucket_grid_name)}else{var v=[];if(""!=h)for(r=h.split(","),u=0;u<
r.length;u++)v.push($(Jmp.Helpers.get_container()+" li#"+r[u]).data("name"));if(""!=k)for(q=k.split(","),u=0;u<q.length;u++)v.push($(Jmp.Helpers.get_container()+" li#"+q[u]).data("gridname"));Jmp.App.Lightbox.hide();Jmp.App.Lightbox.show({type:"merge_failed",title:"Cannot merge "+n,bucket_list:v,message:p.message})}}));return!1},onShowMenu:function(b){b.preventDefault();var h=Jmp.Helpers.get_item($(this).attr("data-id")),k=h.find(".copy-link"),l=h.attr("data-id"),m=Jmp.Helpers.get_short_url_code(k),
n=Jmp.Helpers.get_copy_link_domain(k);k.unbind("click").bind("click",function(){if(!ViewerPanel.is_mobile&&"undefined"!=typeof Clipboard&&Clipboard.is_supported){var p=n+m;h.append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; z-index: -3000;' value='"+p+"' />");$("#clipboard_textbox").focus().get(0).setSelectionRange(0,p.length);document.execCommand("copy");$("#clipboard_textbox").remove();p="bucket"==h.data("type")?"folder_link_copied":"file_link_copied";Jmp.App.Notifications.display_notification({type:p}).close_notification();
Jmp.Helpers.set_short_url_code(k,l,h.attr("data-type"),m);h.find(".btn-cog-wheel").removeClass("open")}else Jmp.App.Lightbox.show({type:"copy_link",copy_link:n+m}),Jmp.Helpers.set_short_url_code(k,l,h.attr("data-type"),m),h.find(".btn-cog-wheel").removeClass("open"),$("#modal input[type=text]").focus().select();return!1});return!1},show_uploading_progress_for_buckets:function(){for(var b in Jmp.Uploader.bucketUploads)if(Jmp.Uploader.bucketUploadCounts[b].uploaded<Jmp.Uploader.bucketUploadCounts[b].total){var h=
$("#"+b),k=this._bucket_upload_template();h.removeClass("orphan").removeClass("hide");h.find(".js-empty-folder").addClass("hide");h.find(".thumbnail").after(k);Jmp.Handler.Buckets.update_bucket_progress(b);Jmp.App.UploadProgress.show();b==Jmp.App.getView().data.id&&$(".rearrange_sort_order").addClass("disabled blockUI")}Jmp.Handler.Buckets.remove_orphan_buckets()},update_bucket_progress:function(b){var h=Jmp.Uploader.bucketUploadSize[b];h=Math.floor(h.uploading/h.total*100);$("#"+b).find(".js-progress-bar").css("width",
h+"%");$("#"+b).find(".list-thumb-meta .time").text("");$("#"+b).find(".list-thumb-meta .view-badge").text("")},_bucket_upload_template:function(){return'<div class="thumb-overlay uploading js-thumb-overlay-uploading"> \t\t\t\t\t\t\t\t\t<div class="progress-wrapper ab-center js-progress-wrapper"> \t\t\t\t\t\t\t\t\t\t<div class="progress clearfix"> \t\t\t\t\t\t\t\t\t\t\t<div class="progress-bar progress-bar-storage js-progress-bar" style="width:0%;"></div> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div>'},
onLoad:function(b){$('[data-toggle="tooltip"]').tooltip();Jmp.Helpers.end_first_tour_forcefully();Jmp.Helpers.start_second_tour();Jmp.Helpers.end_tour_forcefully();"undefined"!=typeof window.attach_placeholder&&attach_placeholder();"false"==Jmp.Uploader.options.iur&&$("#main-header").remove();Jmp.Handler.Buckets.show_uploading_progress_for_buckets();$("#main_container").removeAttr("class");if(b=$.cookie("accmsg"))Jmp.App.Notifications.display_notification({type:"success",message:b}).close_notification(10),
Jmp.Helpers.delete_cookie("accmsg");"PLUS_UPGRADE_SURVEY"==$.cookie("accaction")&&(Jmp.Handler.BucketFiles.onUpgradeSurvey(),Jmp.Helpers.delete_cookie("accaction"));if("undefined"!=typeof FORCE_PASSWORD_CHANGE&&FORCE_PASSWORD_CHANGE)Jmp.Handler.BucketFiles.onPasswordChangeForceful();else"undefined"!=typeof PASSWORD_EXPIRED&&PASSWORD_EXPIRED&&!$.cookie("prshown")&&(Jmp.Handler.BucketFiles.onPasswordChangeReminder(),Jmp.Helpers.set_cookie("prshown","1",1));$("img.lazy").lazyload();Jmp.Helpers.assign_route_class("buckets-page");
$("#top_welcome_bar").length&&$("body").addClass("global-notice");Jmp.Helpers.show_announcement_bar();PasswordPrompt.close();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.ItemsScroller.enable();!Socket.is_socket_exist()||"/"==Jmp.App.getLastAddress()&&Jmp.App.getLastAddress()==WS_PREFIX+"/personal"||Socket.join_dashboard("root");$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(h){h=$(h.target);var k=h.data();"object"!=typeof k||"undefined"==
typeof k["bs.tooltip"]||h.parent().hasClass("open")||k["bs.tooltip"].hide()});Jmp.App.Notifications._adjust_body_on_gloabl_notice()},remove_orphan_buckets:function(){$("#buckets_container").find(".orphan").remove();Jmp.Helpers.display_empty_message_if_no_item_found()},disable_context_menu:function(b){this._get_grand_parent_for_checkbox(b).find(".btn-cog-wheel").addClass("btn-cog-wheel-disabled").removeClass("btn-cog-wheel")},enable_context_menu:function(){$("li .btn-cog-wheel-disabled").each(function(){$(this).addClass("btn-cog-wheel").removeClass("btn-cog-wheel-disabled")})},
toggle_active_class:function(b){this._get_grand_parent_for_checkbox(b).toggleClass("selected")},add_active_class:function(b){this._get_grand_parent_for_checkbox(b).addClass("selected")},remove_active_class:function(b){this._get_grand_parent_for_checkbox(b).removeClass("selected")},toggle_checked_class:function(b){b.toggleClass("checked")},add_checked_class:function(b){b.addClass("checked")},remove_checked_class:function(b){b.removeClass("checked")},_get_grand_parent_for_checkbox:function(b){b=b.attr("data-id");
return Jmp.Helpers.get_item(b)},on_items_selection:function(){var b=$(Jmp.Helpers.get_container()+" li .checkbox .checked"),h=$("#global-actions");0==b.length?(h.find(".delete").addClass("disabled"),h.find(".copymove").addClass("disabled"),h.find(".download_selected").addClass("disabled"),h.find(".merge").addClass("disabled"),h.find(".permanent_delete_trash_items").text("Delete All"),h.find(".restore_trash_items").text("Restore"),this.onHideActions(),this.enable_context_menu()):1==b.length?(h.find(".delete").removeClass("disabled"),
h.find(".copymove").removeClass("disabled"),h.find(".download_selected").removeClass("disabled"),h.find(".merge").addClass("disabled"),h.find(".permanent_delete_trash_items").text("Delete 1 item"),h.find(".restore_trash_items").text("Restore 1 item"),this.onShowActions()):2<=b.length&&(h.find(".merge").removeClass("disabled"),h.find(".permanent_delete_trash_items").text("Delete "+b.length+" items"),h.find(".restore_trash_items").text("Restore "+b.length+" items"));EditMode.update()},_post_processing_after_loading_items_from_pagination:function(){Jmp.Handler.Buckets.show_uploading_progress_for_buckets();
Jmp.Helpers.in_edit_mode()&&($("#items li .checkbox:not(.disabled)").show(),$("#items li .options").addClass("hide"))},onUpdateBucketName:function(b){if(b.name){if("folder"==b.type){b.code==Jmp.App.getView().data.id&&Jmp.Helpers.update_bucket_name(b.name,b.name);var h=Jmp.Helpers.get_item(b.code);1==h.length&&(h.attr("data-name",b.name),h.attr("data-gridname",b.name),h.data("gridname",b.name),h.find(".name-area a").attr("title",b.name).text(b.name),h.find(".item-meta a").attr("title",b.name).text(b.name))}"file"==
b.type&&(b.code==Jmp.App.getView().data.id&&(Jmp.Helpers.update_bucket_name_when_in_viewer(b.code,b.name,b.name),h=ViewerPanel.viewers_collection.get_current_viewer(),"undefined"!=typeof h&&(h.name=b.name)),h=Jmp.Helpers.get_item(b.code),1==h.length&&(h.attr("data-name",b.name),h.attr("data-gridname",b.name),h.data("gridname",b.name),h.find(".name-area a").attr("title",b.name).text(b.name),h.find(".item-meta a").attr("title",b.name).text(b.name)))}b.parent&&b.storage_used&&Jmp.Helpers.update_storage_updates_real_time(b.storage_used,
b.parent)},get_scroll_top:function(b){Jmp.Handler.Buckets.last_scroll_top=$(document).scrollTop()},set_scroll_top:function(){$(document).scrollTop(Jmp.Handler.Buckets.last_scroll_top)},save_current_scrolling_page_number_in_cookie:function(b){"buckets_container"==$(b).attr("id")&&(b="undefined"==typeof Jmp.Handler.Buckets.current_page?1:Jmp.Handler.Buckets.current_page,Jmp.Helpers.delete_cookie("current_page"),Jmp.Helpers.set_cookie("current_page",b))},activate_nano:function(b){$(".nano").nanoScroller({preventPageScrolling:!0})},
destroy_nano:function(b){$(".nano").nanoScroller({destroy:!0})},display_create_collection_or_folder_popup:function(b){var h="BucketFiles"==Jmp.App.getView().type?"folder":"collection";Jmp.App.Lightbox.show({type:"create_folder",folder_type:h,place:b});$("#create_folder_textbox").focus().select();$("#modal div.modal-dialog").addClass("modal-cf")},create_collection_or_folder:function(b,h){var k="";k=b&&"function"==$.type(b)?"Untitled":Jmp.Helpers.strip_tags($("#create_folder_textbox").val());if(""==
$.trim(k))return Jmp.App.Notifications.display_notification({type:"error",message:"Please name your folder"}).close_notification(),!1;var l=Jmp.App.getView(),m="VersionHistory"==l.type||"Settings"==l.type?0:l.data.id;l={parent:m,bucket_name:k,type:l.type};0==m&&Jmp.Helpers.start_page_loading();b&&"function"==$.type(b)&&(l.uc="uploading_collection",1==h.folders_count&&0==h.files_count?l.bucket_name=h.first_folder_name:l.collection_name_info=h);ViewerPanel.is_mobile&&(l.mobile=!0);$.ajax({url:WS_PREFIX+
"/buckets/add",type:"post",data:Jmp.Helpers.get_secure_params(l),success:function(n){if(1==n.status){if(n.bucket_file_template)$("#main_container").html(n.bucket_file_template),Jmp.App.changeAddress("/b/"+n.bucket_id,!0),b&&"function"==$.type(b)&&($(".icn-back").addClass("disabled blockUI"),$("#my_uploads").addClass("disabled blockUI")),Socket.connect(!1,function(){Socket.join_item(n.bucket_id,"folder")}),ViewerPanel.dom_parser.assign_url_suffix();else if(n.bucket_template){if($("body").hasClass("collaboration-page")||
$("body").hasClass("favorite-page")||$("body").hasClass("trash-page"))return!0;var p=$(n.bucket_template);p.addClass("replace");n.bucket_code&&"1"==n.root_folder?$("#buckets_container").append(p):$("#files_container").append(p);p=$("#folder-meta").find(".folders");var r=parseInt(p.attr("data-items-count"),10);p.attr("data-items-count",r+1).html(Jmp.Helpers.get_string_based_on_count(r+1,"item","items",!0));Jmp.Helpers.remove_splash();Jmp.Helpers.display_sorting_options();Jmp.Helpers.adjust_more_menu();
js_uploader._options._sort_uploading_files();Jmp.Helpers.highlight_items(n.bucket_id,"1"!=n.root_folder?!0:!1);Jmp.Helpers.update_bucket_name(n.bucket_name,n.bucket_short_name)}b&&"function"==$.type(b)&&b();n.bucket_code="0"==n.bucket_code||0==n.bucket_code?"Team"==Jmp.App.getView().type?"team":"root":n.bucket_code;Socket.push("items_updated",[{parent:n.bucket_code,code:n.bucket_id,name:k,type:"folder",state:"created"}])}else Jmp.App.Notifications.display_notification({type:"error",message:"Unexpected issue occurred, please try again"}).close_notification();
Jmp.Helpers.stop_page_loading()}});$("#modal").find(".close").trigger("click")}});a.Buckets=new c})(Jmp.Handler);
$(function(){$(document).bind("Buckets_load",Jmp.Handler.Buckets.onLoad);$("#global-actions .show_actions .edit:not(.disabled)").live("click",Jmp.Handler.Buckets.onShowActions);$("#global-actions .cancel").live("click",Jmp.Handler.Buckets.onHideActions);$(".icn-edit, div#header-inner h1 .edit, div#header-inner h1 .edit_bucket_name, .edit_bucket_name").live("click",Jmp.Handler.Buckets.onShowEditName);$("#global-actions .merge:not(.disabled)").live("click",Jmp.Handler.Buckets.onMergeBuckets);$("#global-actions .delete:not(.disabled)").live("click",
Jmp.Handler.Buckets.onDeleteMultiItems);$(".merge-buckets-form-submit").live("click",Jmp.Handler.Buckets.onSubmitMergeBucketsForm);$("div.options .delete, #global-actions .delete_bucket, div.the_options .delete, .js-dropdown-menu .delete, div.btn-cog-wheel .delete, #viewer_more_menu .delete").live("click",Jmp.Handler.Buckets.onDeleteSingleItem);$("div.btn-cog-wheel .folder-stats, #more_menu .folder-stats").live("click",Jmp.Handler.Buckets.onViewStats);$("div.btn-cog-wheel .lock, #more_menu .lock, #viewer_more_menu .lock").live("click",
Jmp.Handler.Buckets.onLockItem);$("div.btn-cog-wheel .toggle-comments, #more_menu .toggle-comments, #viewer_more_menu .toggle-comments").live("click",Jmp.Handler.Buckets.onToggleComment);$("#lock-item-form-submit").live("click",Jmp.Handler.Buckets.onSubmitLockItemForm);$("#upgrade_to_plus").live("click",function(){window.location="/plus";return!1});$("#upgrade_plan").live("click",function(){window.location=WS_PREFIX+"/pricing";return!1});$("#upgrade_plan_from_trial").live("click",function(){window.location=
WS_PREFIX+"/settings/workspace/billing?buynow=1";return!1});$("#upgrade_now").live("click",function(){window.location=WS_PREFIX+"/pricing";return!1});$("#contact_us").live("click",function(){Jmp.App.Lightbox.hide();window.open("mailto:hello@jumpshare.com");return!1});$("#invite_members").live("click",function(){window.location=WS_PREFIX+"/settings/team/members";return!1});$("div.btn-cog-wheel .unlock, #global-actions .unlock, #viewer_more_menu .unlock").live("click",Jmp.Handler.Buckets.onUnlockItem);
$("#unlock-item-form-submit").live("click",Jmp.Handler.Buckets.onSubmitUnlockItemForm);$(".change-password-button").live("click",Jmp.Handler.Buckets.onClickChangeLockItemForm);$("#set_favorite, .star_item_from_menu, #viewer_set_favorite").live("click",Jmp.Handler.Buckets.onSetFavorite);$("div.btn-cog-wheel .self-destruct, #more_menu .self-destruct, #viewer_more_menu .self-destruct").live("click",Jmp.Handler.Buckets.onExpireItem);$("#set_self_destruct").live("click",Jmp.Handler.Buckets.onSubmitExpireItemForm);
$("div.btn-cog-wheel .stop-self-destruct, #more_menu .stop-self-destruct, #viewer_more_menu .stop-self-destruct").live("click",Jmp.Handler.Buckets.onDefuseItem);$(".btn-cog-wheel .icn-cog-wheel").live("click",Jmp.Handler.Buckets.onShowMenu);$(".copy-link").live("mouseleave",function(){var a=$(this).parent().parent().parent();if(!ViewerPanel.is_mobile&&"undefined"!=typeof Clipboard&&!Clipboard.is_supported){a.addClass("open");var c=setTimeout;$.browser.chrome&&"function"==typeof requestAnimationFrame&&
(c=requestAnimationFrame);c(function(){a.addClass("open")})}});$("#buckets_container, #files_container, #search_result, #share_result, #version_history_container, #trash_container").live("click",function(a){Jmp.Handler.Buckets.get_scroll_top(this);var c=$(a.target);c=c.hasClass("js-panel-ui-label")&&Jmp.Helpers.in_edit_mode()?c.find(".icn-checkbox"):c;if(c.hasClass("icn-checkbox")){var b=Jmp.Handler.Buckets._get_grand_parent_for_checkbox(c).index();1==a.shiftKey?(a="undefined"==typeof Jmp.Handler.Buckets.last_selected_item_index?
0:Jmp.Handler.Buckets.last_selected_item_index,ItemSelection.on_shift_selection(a,b)):(Jmp.Handler.Buckets.last_selected_item_index=b,ItemSelection.select_single(c));return!1}if(c.hasClass("ajax")||c.parent().hasClass("ajax"))Jmp.Handler.Buckets.save_current_scrolling_page_number_in_cookie(this);else if(c.hasClass("thumb-overlay")&&!Jmp.Helpers.in_edit_mode())a=".ajax",c.hasClass("trigger_temp_ajax")&&(a=".temp_ajax"),Jmp.Handler.Buckets.save_current_scrolling_page_number_in_cookie(this),c.closest("li").find(a).trigger("click");
else if(a=c.closest("li"),a.parent().hasClass("view-list")){if(Jmp.Helpers.in_edit_mode())return!1;Jmp.Handler.Buckets.save_current_scrolling_page_number_in_cookie(this);a.find(".open_in_new").length||a.find(".trigger_temp_ajax").length?a.find(".temp_ajax").trigger("click"):a.find(".ajax").first().trigger("click");return!1}});$("li.grid").live("contextmenu",function(a){if($(a.target).hasClass("edit"))return!1;if(!Jmp.Helpers.in_edit_mode()){var c=!1,b=!1;$(this).find(".icn-cog-wheel").trigger("click");
if("Buckets"==Jmp.App.getView().type||"Team"==Jmp.App.getView().type||"Favorites"==Jmp.App.getView().type)var h=$("#buckets_container");else"Trash"==Jmp.App.getView().type?h=$("#trash_container"):"Search"==Jmp.App.getView().type?h=$("#search_result"):"Shared"==Jmp.App.getView().type?(h=$("#share_result"),c=!0):"Viewed"==Jmp.App.getView().type?(h=$("#share_result"),c=!0):"VersionHistory"==Jmp.App.getView().type?(h=$("#version_history_container"),b=!0):h=$("#files_container");if(h.hasClass("view-list")){var k=
$("div.btn-cog-wheel.open"),l=k.closest("li.grid"),m=-5;10<h.find("li.grid").length&&5>h.find("li.grid").length-l.index()&&$("body").hasClass("guest")?m=-90:10<h.find("li.grid").length&&5>h.find("li.grid").length-l.index()&&(m=c?-172:b?-80:-295);c=l.offset();"undefined"!=typeof c&&k.css({position:"absolute",left:a.pageX-c.left+100,top:m})}return!1}if(Jmp.Helpers.in_edit_mode())return!1});$(document).on("mouseleave","li.grid",function(a){$(this).find(".open").removeClass("open");$(this).find(".thumb-overlay").removeAttr("style")});
$("#buckets_container, #files_container").live("mouseover",function(a){if(1<=$(".new_name").length)return!1;$(a.target)});$("#buckets_container, #files_container").live("mouseout",function(a){a=$(a.target);a.hasClass("touring")&&(a.hasClass("title")||a.is("a")||a.hasClass("name"))&&!a.children(".icn-edit").hasClass("touring")&&a.next(".edit").hasClass("touring")});$("#buckets_container .mask").live("click",function(){$(this).prev("a.ajax").trigger("click");return!1});$(".for-plus").click(function(){Jmp.App.Lightbox.show({type:"for_plus",
body:"test jumpshare"})});$(".upload_actions a, #upload_files_main").live("click",function(a){Jmp.Helpers.hide_sidebar_dashboard()});$("#create_folder").live("click",function(a){a.preventDefault();Jmp.Handler.Buckets.display_create_collection_or_folder_popup()});$("#create_folder_button").live("click",function(a){Jmp.Handler.Buckets.create_collection_or_folder()});$(".collection_sorting").live("click",function(a){a=$(a.target);if(a.hasClass("sort_by"))a.hasClass("active")||($("body").removeClass("favorite-page"),
$("#empty_item_message").remove(),$("#content_data").removeClass("is-empty"),$(".collection_sorting").find(".active").removeClass("active"),a.addClass("active"),Jmp.Helpers.start_page_loading(),$.get(WS_PREFIX+"/buckets/get_root_items?sort_by="+a.attr("data-val"),function(c){c.status?$("#buckets_container").html(c.items):($("#buckets_container").html(""),Jmp.Helpers.display_empty_message_if_no_item_found());Jmp.Uploader.showBucketUploads(0);Jmp.Helpers.stop_page_loading()}));else if(a.hasClass("filter_by")){if(a.hasClass("active"))return!1;
$("body").addClass("favorite-page");$(".collection_sorting").find(".active").removeClass("active");a.addClass("active");Jmp.Helpers.start_page_loading();$.get(WS_PREFIX+"/buckets/get_favorites",function(c){c.status?$("#buckets_container").html(c.favorites):($("#buckets_container").html(""),Jmp.Helpers.display_empty_message_if_no_favorite_collection_found());Jmp.Uploader.showBucketUploads(0);Jmp.Helpers.stop_page_loading()})}return!1});$("#header_title").live("mouseenter",function(a){$("#set_favorite").addClass("hide");
$(this).attr("data-in-rename-mode",!0);return!1});$("#header_title").live("mouseleave",function(a){0==$(".new_name").length&&$("#set_favorite").removeClass("hide");$(this).attr("data-in-rename-mode",!1);return!1});$(".rename_from_popup").live("click",function(a){a=$(this);var c=Jmp.Helpers.get_item(a.attr("data-id")),b=a.attr("data-id"),h=c.attr("data-extension"),k=a.attr("data-type");(c=a.hasClass("more_menu")?$("#bucket_name_header").attr("title"):c.attr("data-name"))||(c=a.text());c=Jmp.Helpers.decode_string(c);
c=String(c).replace(/'/g,"&#039;");Jmp.App.Lightbox.show({type:"item_rename_popup",code:b,name:c,item_type:k,ext:h},function(){var l=$("#rename_from_popup_textbox");""==$.trim(l.val())?Jmp.App.Notifications.display_notification({type:"error",message:"Please name your "+k}).close_notification():Jmp.Handler.Buckets.updateItemName(l)});$(".modal-dialog").addClass("modal-cf");$("#rename_from_popup_textbox").select().focus()});$(window).click(function(a){"viewer_set_favorite"!==a.target.id&&$("#mark_fav_popover").addClass("hide")});
$("#new_name_header").live("keydown",function(a){var c=$("#new_name_header"),b=$("#bucket_name_header");a=setTimeout;$.browser.chrome&&"function"==typeof requestAnimationFrame&&(a=requestAnimationFrame);a(function(){var h=c.val();b.text(h)})})});(function(a){function c(){this.SelectedItemsBeforeDrag=[];this.BlockDragging=["Favorites","Trash","Search","Collaboration"];this.DropNotAllowedOn="#sidebar_nav_inbox #sidebar_nav_shared #shared_uploads #nav_sidebar_settings_lnk #nav_sidebar_settings_lnk_ws #nav_sidebar_settings_lnk_pr".split(" ");this.DropAllowedOn={Buckets:"#my_uploads",Team:"#team_uploads",Favorites:"#filter_by",Trash:"#trash"}}var b=new Image(10,10);b.src="https://static.jumpshare.com/res/images/dragImage.png";$.extend(c.prototype,
{isDragAllowedView:function(h){return-1!==$.inArray(Jmp.App.getView().type,Jmp.Handler.DnD.BlockDragging)?!1:!0},isDragAllowed:function(h){return Jmp.Handler.DnD.isDragAllowedView()?$(h).is("li")&&"undefined"!=typeof $(h).attr("id")&&$(h).attr("id").startsWith("XHR_")?!1:$(h).is("li")&&$(h).hasClass("grid")&&"true"!=$(h).attr("draggable")?!1:!0:!1},createDraggingDiv:function(h){"undefined"!=typeof Jmp.Handler.DnD.DragInfoContainer&&document.body.contains(Jmp.Handler.DnD.DragInfoContainer)&&document.body.removeChild(Jmp.Handler.DnD.DragInfoContainer);
Jmp.Handler.DnD.DragInfoContainer=document.createElement("div");Jmp.Handler.DnD.DragInfoContainer.classList.add("drag_info_container");Jmp.Handler.DnD.DragInfoContainer.classList.add("hide");Jmp.Handler.DnD.DragInfoContainer.appendChild(h);document.body.appendChild(Jmp.Handler.DnD.DragInfoContainer)},showDraggingDiv:function(){$(".drag_info_container").removeClass("hide")},hideDraggingDiv:function(){$(".drag_info_container").addClass("hide")},storeItemsSelectedBeforeDrag:function(){Jmp.Handler.DnD.SelectedItemsBeforeDrag=
[];$("li.grid.selected").each(function(h,k){console.log($(k).data("id"));Jmp.Handler.DnD.SelectedItemsBeforeDrag.push($(k).data("id"))})},restorePriorDragSelection:function(){$.each(Jmp.Handler.DnD.SelectedItemsBeforeDrag,function(h,k){ItemSelection.select_single(Jmp.Helpers.get_item(k).find(".icn-checkbox"))})},dragStart:function(h){h.stopPropagation();if($(this).is("li"))if(Jmp.Handler.DnD.isDragAllowed(this)){Jmp.Handler.DnD.storeItemsSelectedBeforeDrag();Jmp.Handler.BucketFiles.drageDropModeOn||
$(this).hasClass("selected")||ItemSelection.unselect_all();$(this).hasClass("selected")||ItemSelection.select_single($(this).find(".icn-checkbox"));$.each(Jmp.Handler.DnD.DropNotAllowedOn,function(l,m){$(m).addClass("ingore_drag_accept")});Jmp.Handler.BucketFiles.drageDropModeOn=!0;h.dataTransfer=h.originalEvent.dataTransfer;h.dataTransfer.setDragImage(b,10,10);var k=document.createTextNode(Jmp.Handler.DnD.createDraggingText(this));Jmp.Handler.DnD.createDraggingDiv(k);Jmp.Handler.DnD.setPosition(h);
Jmp.Handler.DnD.showDraggingDiv()}else h.preventDefault();else h.preventDefault()},createDraggingText:function(h){return 1===$("li.grid.selected").length?$(h).find(".thumb-title").html():$("#edit_mode_panel .items_count").text()},dragEnd:function(h){Jmp.Handler.DnD.isDragAllowed(this)?(console.log("dragend document"),Jmp.Handler.DnD.hideDraggingDiv(),$(".drag_can_accept").removeClass("drag_can_accept"),$(".ingore_drag_accept").removeClass("ingore_drag_accept"),Jmp.Handler.BucketFiles.drageDropModeOn=
!1,ItemSelection.unselect_all(),Jmp.Handler.DnD.restorePriorDragSelection(),$("html, body").stop()):h.preventDefault()},drag:function(h){Jmp.Handler.DnD.isDragAllowed(this)?(h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect="none",Jmp.Handler.DnD.setPosition(h)):h.preventDefault()},setPosition:function(h){var k=h.originalEvent.pageX;h=h.originalEvent.pageY;$.browser.mozilla&&(k=Jmp.Handler.DnD.pageX,h=Jmp.Handler.DnD.pageY);0!=k&&0!=h&&(Jmp.Handler.DnD.DragInfoContainer.style.left=
k+"px",Jmp.Handler.DnD.DragInfoContainer.style.top=h+"px")},adjustScroll:function(h,k){$("html, body").stop();h=$("html, body").scrollTop();var l=$(document).height()-$("html, body").scrollTop();220>k?$("html, body").animate({scrollTop:0},{queue:!1,duration:Math.round(h/1.1),easing:"linear"}):k>$(window).height()-150&&$("html, body").animate({scrollTop:$(document).height()},{queue:!1,duration:Math.round(l/1.1),easing:"linear"})},dropOnDocument:function(h){Jmp.Handler.DnD.isDragAllowed(this)?(console.log("drop document"),
h.preventDefault(),h.stopPropagation()):h.preventDefault()},dropOnFolder:function(h){Jmp.Handler.DnD.isDragAllowed(this)?(console.log("drop li.folder"),h.preventDefault(),h.stopPropagation(),$(this).hasClass("selected")||(h=$(this).data("team"),h="undefined"!=typeof h&&"1"==h?!0:!1,Jmp.Handler.DnD.moveFiles($(this).data("id"),h),$(this).removeClass("drag_acceptable"))):h.preventDefault()},favFiles:function(){var h=[],k=[];$("li.grid.selected").each(function(l,m){"bucket"===$(m).data("type")?k.push($(m).data("id")):
h.push($(m).data("id"))});Jmp.Handler.Buckets.SetFavorites(h,k)},moveFiles:function(h,k){var l=[],m=[];$(Jmp.Helpers.get_container()+" li.grid.selected").each(function(n,p){"bucket"===$(p).data("type")?m.push($(p).data("id")):l.push($(p).data("id"))});Jmp.Handler.BucketFiles.onSubmitMoveFilesForm(k?1:0,h,l,m,!0);Jmp.App.Notifications.display_notification({type:"success",message:"Moving "+$("#edit_mode_panel .items_count").text()})},dropOnSection:function(h){h.preventDefault();h.stopPropagation();
if(Jmp.Handler.DnD.isDragAllowed(this)){var k=$(this).attr("id"),l="";$.each(Jmp.Handler.DnD.DropAllowedOn,function(m,n){"#"+k==n&&(l=m)});h=1==$("li.grid.selected").length?"Item":"Items";console.log("Dropped on section "+l+":"+k);if("Trash"==l)Jmp.Handler.Buckets.onDeleteMultiItems();else"Favorites"==l?(console.log("Make items Favorites"),Jmp.Handler.DnD.favFiles()):"Team"==l?"Team"==Jmp.App.getView().type?Jmp.App.Notifications.display_notification({type:"error",message:h+" already exist in root directory"}).close_notification():
"Team"!=Jmp.App.getView().type&&(console.log("Lets move items to team library"),Jmp.Handler.DnD.moveFiles(-1,!0)):"Buckets"==l&&("Buckets"==Jmp.App.getView().type?Jmp.App.Notifications.display_notification({type:"error",message:h+" already exist in root directory"}).close_notification():(Jmp.Handler.DnD.moveFiles(0,!1),console.log("Lets move items to Personal Library")))}else h.preventDefault()},dragOverDocument:function(h){Jmp.Handler.DnD.isDragAllowed(this)?(console.log("dragover document"),h.preventDefault(),
Jmp.Handler.DnD.isDragAllowed(this)?($.browser.mozilla&&(h=h.originalEvent,Jmp.Handler.DnD.pageX=h.clientX||h.pageX,Jmp.Handler.DnD.pageY=h.clientY||h.pageY,Jmp.Handler.DnD.pageY+=$(window).scrollTop()),"undefined"!=typeof h.originalEvent&&(h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect=h.dataTransfer.dropEffect)):h.preventDefault()):h.preventDefault()},dragOverNavItems:function(h){if(Jmp.Handler.DnD.isDragAllowed(this)){var k="#"+$(this).find("a").attr("id");-1==Jmp.Handler.DnD.DropNotAllowedOn.indexOf(k)?
($(this).find("a").addClass("drag_can_accept"),h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect="move"):(h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect="none")}else h.preventDefault()},dragLeaveNavItems:function(h){$(this).find("a").removeClass("drag_can_accept");h.dataTransfer=h.originalEvent.dataTransfer;h.dataTransfer.dropEffect="none"},dragOverFolder:function(h){h.preventDefault();Jmp.Handler.DnD.isDragAllowed(this)?(console.log("dragover li.folder"),
h.dataTransfer=h.originalEvent.dataTransfer,$(this).hasClass("selected")||($(this).addClass("drag_acceptable"),h.dataTransfer.dropEffect="move")):h.preventDefault()},dragOverFile:function(h){h.preventDefault();Jmp.Handler.DnD.isDragAllowed(this)?(console.log("dragover li.file"),h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect="none"):h.preventDefault()},dragLeavesFolder:function(h){h.preventDefault();h.stopPropagation();Jmp.Handler.DnD.isDragAllowed(this)?(console.log("dragleave li.folder"),
$(this).removeClass("drag_acceptable"),h.dataTransfer=h.originalEvent.dataTransfer,h.dataTransfer.dropEffect="none"):h.preventDefault()}});a.DnD=new c})(Jmp.Handler);
$(function(){if("private"==VIEW&&!Jmp.Helpers.is_mobile()){$(".form-control-rename").live("focus",function(a){a=$(this).attr("data-id");Jmp.Helpers.get_item(a).attr("draggable",!1)}).live("blur",function(a){Jmp.Handler.DnD.isDragAllowedView()&&(a=$(this).attr("data-id"),Jmp.Helpers.get_item(a).attr("draggable",!0))});$(document).on("dragstart","li.grid",Jmp.Handler.DnD.dragStart);$(document).on("drag","li.grid",Jmp.Handler.DnD.drag);$(document).on("dragend","li.grid",Jmp.Handler.DnD.dragEnd);$(document).unbind("drop").bind("drop",
Jmp.Handler.DnD.dropOnDocument);$(document).on("drop","li.folder",Jmp.Handler.DnD.dropOnFolder);$(document).on("drop","a.drag_can_accept",Jmp.Handler.DnD.dropOnSection);if(ViewerPanel.is_open())$(document).on("dragover",Jmp.Handler.DnD.dragOverDocument);$(document).on("dragover","li.folder",Jmp.Handler.DnD.dragOverFolder);$(document).on("dragover","li.file",Jmp.Handler.DnD.dragOverFile);$(document).on("dragleave","li.folder",Jmp.Handler.DnD.dragLeavesFolder);$(document).on("dragover",".nav-stacked li",
Jmp.Handler.DnD.dragOverNavItems);$(document).on("dragleave",".nav-stacked li",Jmp.Handler.DnD.dragLeaveNavItems)}});var clippy_element=void 0;
(function(a){function c(){this.bucket_code}$.extend(c.prototype,{index:function(b,h){this.bucket_code=h[1];Jmp.App.isFakeRequest()?$.event.trigger("BucketFiles_load"):(Jmp.Helpers.start_page_loading(),$.ajax({url:b,success:function(k){$(document).scrollTop(0);$("#main_container").html(k);Jmp.Uploader.showBucketUploads(h[1]);$.event.trigger("BucketFiles_load")}}))},onCopyMoveItems:function(){if($(Jmp.Helpers.get_container()+" li.selected").length){var b=[],h=[];$(Jmp.Helpers.get_container()+" li.bucket-li.selected").each(function(){b.push($(this).data("id"))});
$(Jmp.Helpers.get_container()+" li.file.selected").each(function(){h.push($(this).data("id"))});var k=b.length+h.length;$.ajax({url:BASEURL_WS+"buckets/get_list/?files_count="+k,success:function(l){Jmp.App.Lightbox.show({type:"copy_move_items",form:"copy_move_files_form",bucket_ids:b,file_ids:h,body:l,total_items:k});a.BucketFiles.js_lightbox_folder_search()}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select an item to copy/move to other folder"}).close_notification();
return!1},get_folder_list:function(){var b=$(this),h=b.parent().parent("li");if(h.next().is("div"))h.addClass("is-open"),h.next("div").removeClass("hide"),b.removeClass("icn-expand-folder").addClass("icn-collapse-folder");else{var k=h.data("id");$.ajax({url:BASEURL_WS+"buckets/get_list/"+k+"?files_count=",success:function(l){if(""!=l){var m=parseInt(h.data("level"))+1;h.addClass("is-open").after(l);b.removeClass("icn-expand-folder").addClass("icn-collapse-folder");h.next("div").children("ul").find("li.folder").attr("data-level",
m)}else h.find("div.icn-expand-folder").remove()}})}},hide_folder_list:function(){var b=$(this),h=b.parent().parent("li");h.next().is("div")&&(h.next("div").addClass("hide"),b.addClass("icn-expand-folder").removeClass("icn-collapse-folder"),h.removeClass("is-open"))},onMoveFiles:function(){if($(Jmp.Helpers.get_container()+" li.selected").length){var b=[],h=[];$(Jmp.Helpers.get_container()+" li.bucket-li.selected").each(function(){b.push($(this).data("id"))});$(Jmp.Helpers.get_container()+" li.file.selected").each(function(){h.push($(this).data("id"))});
var k=b.length+h.length;$.ajax({url:BASEURL_WS+"buckets/get_list/"+Jmp.App.getView().data.id+"?files_count="+k,success:function(l){Jmp.App.Lightbox.show({type:"move_files",form:"move_files_form",bucket_ids:b,file_ids:h,body:l,total_items:k});a.BucketFiles.js_lightbox_folder_search()}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select an item to move to other folder"}).close_notification();return!1},onToggleCopyMove:function(){var b=$(this).attr("data-value");$("#lightbox #copy-move-toggle-btn div").html($(this).find("a").html());
$("#lightbox .is-selected").removeClass("is-selected");$("#lightbox .personal-library, #lightbox .personal-library-items").addClass("hide");$("#lightbox .shared-library, #lightbox .shared-library-items").addClass("hide");$("#lightbox .team-library, #lightbox .team-library-items").addClass("hide");$("#lightbox ."+b+"-library, #lightbox ."+b+"-library-items").removeClass("hide")},onSubmitMoveFilesForm:function(b,h,k,l,m){var n=$("#lightbox .move_file");n.attr("disabled",!0).html("Moving ...").addClass("disabled");
if($("ul.buckets_list li.is-selected").length||""!=$.trim($(".new_bucket_name").val())||m){n=$("#lightbox .copy_file");var p=$("#lightbox .cancel");n.attr("disabled",!0).addClass("disabled");p.attr("disabled",!0).addClass("disabled");$("#lightbox .close").hide();var r=m?k.join(","):$("#file_ids").val(),q=m?l.join(","):$("#bucket_ids").val(),u=m?h:$("ul.buckets_list li.is-selected").data("id");b=m?b:$("ul.buckets_list li.is-selected").data("team");var v=""!=r?r.split(","):[],x=""!=q?q.split(","):[],
y=$("ul.buckets_list li.is-selected").data("name")||Jmp.Helpers.strip_tags($(".new_bucket_name").val());m=m?"":Jmp.Helpers.strip_tags($(".new_bucket_name").val())?Jmp.Helpers.strip_tags($(".new_bucket_name").val()):"";var B=v.length+x.length,C=Jmp.App.getView().data.id;C=Jmp.App.getView().type==Jmp.Handler.getRule("team")&&0==C?-1:C;"Search"==Jmp.App.getView().type&&(C=""!=$("#parent_bucket_id").val()?$("#parent_bucket_id").val():0);Jmp.Handler.BucketFiles.move_in_progress=!0;$.ajax({url:BASEURL_WS+
"files/move",type:"post",timeout:0,data:Jmp.Helpers.get_secure_params({bucket_id:C,new_bucket_id:u,new_bucket_name:m,file_ids:r,bucket_ids:q,moving_to_team:b}),complete:function(){Jmp.Handler.BucketFiles.move_in_progress=!1},success:function(H){Jmp.Handler.BucketFiles.move_in_progress=!1;if(1==H.status){var F=[];if(""!=r)for(var E=0;E<v.length;E++)"Search"!=Jmp.App.getView().type?Jmp.Helpers.get_item(v[E]).remove():Jmp.Helpers.get_item(v[E]).find(".copy_move_item").attr("data-bucket",u),F.push({parent:"0"==
C||0==C?"root":-1==C?"team":C,code:v[E],type:"file",state:"deleted"}),F.push({parent:"0"==H.new_bucket_id||0==H.new_bucket_id?-1==u?"team":"root":H.new_bucket_id,code:v[E],type:"file",state:"created"});if(""!=q)for(E=0;E<x.length;E++)"Search"!=Jmp.App.getView().type?Jmp.Helpers.get_item(x[E]).remove():Jmp.Helpers.get_item(x[E]).find(".copy_move_item").attr("data-bucket",u),F.push({parent:"0"==C||0==C?"root":-1==C?"team":C,code:x[E],type:"folder",state:"deleted"}),F.push({parent:"0"==H.new_bucket_id||
0==H.new_bucket_id?-1==u?"team":"root":H.new_bucket_id,code:x[E],type:"folder",state:"created"});Jmp.Helpers.delete_viewers(v);$("#lightbox .cancel").removeAttr("disabled").trigger("click");$("#global-actions .cancel").trigger("click");Jmp.Helpers.update_bucket_name(H.bucket_name,H.bucket_grid_name);Jmp.Helpers.update_storage_updates(H.storage_used,H.bucket_code);Jmp.App.Notifications.display_notification({type:"files_moved",item_name:y,item_count:B}).close_notification();Jmp.Helpers.hide_sorting_options();
Jmp.Helpers.adjust_more_menu();E=$("#files_container li[id='"+u+"']");if("Buckets"==Jmp.App.getView().type||"Favorites"==Jmp.App.getView().type||"Team"==Jmp.App.getView().type)E=$("#buckets_container li[id='"+u+"']");if(E.length){var G=E.find(".thumb-meta").find("span"),K=parseInt(G.text())+B;G.text(K+" items");E.find(".list-thumb-meta .time").text("2 secs ago");E.find(".thumb-footer .time").text("2 seconds ago");G=(new Date).getTime();E.attr("data-modified-date",G).data("modified-date",G);E.find(".js-empty-folder").length&&
E.find(".js-empty-folder").remove();E.find(".thumbnail").html(H.image_tag);H.thumb_class&&E.find(".thumbnail").addClass(H.thumb_class);Jmp.App.getView().type==Jmp.Handler.getRule("_empty")?Jmp.Helpers.list_sort("last_modified","desc"):(E=$(".sorting").find(".active"),E.length&&"modified_date"==E.attr("data-val")&&Jmp.Helpers.list_sort(E.attr("data-val"),E.find("span").attr("data-val")))}E=$("#files_container li.grid");if("Buckets"==Jmp.App.getView().type||"Favorites"==Jmp.App.getView().type||"Team"==
Jmp.App.getView().type)E=$("#buckets_container li.grid");40>E.length&&(Jmp.ItemsScroller.disable(),Jmp.ItemsScroller.enable(),Jmp.ItemsScroller.init(),0==E.length&&(Jmp.ItemsScroller.current_page=0),Jmp.ItemsScroller.fetch_items(Jmp.ItemsScroller.get_current_folder_code()));F.push({code:C,type:"folder",state:"renamed",bucket_name:H.bucket_name,bucket_grid_name:H.bucket_grid_name});F.push({code:H.new_bucket_id,type:"folder",state:"renamed",bucket_name:H.new_bucket_name,bucket_grid_name:H.new_bucket_grid_name});
Socket.push("items_updated",F)}else Jmp.App.Notifications.display_notification({type:"error",message:H.message}).close_notification(),Jmp.App.Lightbox.hide()}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select a folder to move items"}).close_notification(),n.removeAttr("disabled").html("Move").removeClass("disabled");return!1},onCopyFiles:function(){if($("li.selected").length){var b=[],h=[];$(Jmp.Helpers.get_container()+" li.bucket-li.selected").each(function(){b.push($(this).data("id"))});
$(Jmp.Helpers.get_container()+" li.file.selected").each(function(){h.push($(this).data("id"))});var k=b.length+h.length;$.ajax({url:BASEURL_WS+"buckets/get_list/"+Jmp.App.getView().data.id+"?files_count="+k,success:function(l){Jmp.App.Lightbox.show({type:"copy_files",form:"copy_files_form",file_ids:h,bucket_ids:b,body:l,total_items:k});a.BucketFiles.js_lightbox_folder_search()}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select an item to copy to other folder"}).close_notification();
return!1},onSubmitCopyFilesForm:function(){var b=$("#lightbox .copy_file");b.attr("disabled",!0).html("Copying ...").addClass("disabled");if($("ul.buckets_list li.is-selected").length||""!=$.trim($(".new_bucket_name").val())){b=$("#lightbox .move_file");var h=$("#lightbox .cancel");b.attr("disabled",!0).addClass("disabled");h.attr("disabled",!0).addClass("disabled");$("#lightbox .close").hide();var k=$("ul.buckets_list li.is-selected").data("id");b=$("#file_ids").val();h=$("#bucket_ids").val();var l=
$("ul.buckets_list li.is-selected").data("name")||Jmp.Helpers.strip_tags($(".new_bucket_name").val()),m=Jmp.Helpers.strip_tags($(".new_bucket_name").val()),n=(""!=b?b.split(",").length:0)+(""!=h?h.split(",").length:0),p=$("ul.buckets_list li.is-selected").data("team"),r=$("ul.buckets_list li.is-selected").data("shared"),q=Jmp.App.getView().data.id;q=Jmp.App.getView().type==Jmp.Handler.getRule("team")&&0==q?-1:Jmp.App.getView().type==Jmp.Handler.getRule("shared")&&0==q?-2:q;Jmp.Handler.BucketFiles.copy_in_progress=
!0;$.ajax({url:BASEURL_WS+"files/copy",type:"post",timeout:0,data:Jmp.Helpers.get_secure_params({bucket_id:q,new_bucket_id:k,new_bucket_name:m,file_ids:b,bucket_ids:h,copying_to_team:p,copying_to_shared:r}),complete:function(){Jmp.Handler.BucketFiles.copy_in_progress=!1},success:function(u){Jmp.Handler.BucketFiles.copy_in_progress=!1;if(1==u.status){$("#lightbox .cancel").removeAttr("disabled").trigger("click");$("#global-actions .cancel").trigger("click");Jmp.Helpers.update_storage_updates(u.storage_used,
u.bucket_code);var v=$("#files_container li[id='"+k+"']");if("Buckets"==Jmp.App.getView().type||"Favorites"==Jmp.App.getView().type)v=$("#buckets_container li[id='"+k+"']");if(v.length){var x=v.find(".thumb-meta").find("span"),y=parseInt(x.text())+n;x.text(y+" items");v.find(".list-thumb-meta .time").text("2 secs ago");v.find(".thumb-footer .time").text("2 seconds ago");x=(new Date).getTime();v.attr("data-modified-date",x).data("modified-date",x);v.find(".js-empty-folder").length&&v.find(".js-empty-folder").remove();
v.find(".thumbnail").html(u.image_tag);u.thumb_class&&v.find(".thumbnail").addClass(u.thumb_class);Jmp.App.getView().type==Jmp.Handler.getRule("_empty")?Jmp.Helpers.list_sort("last_modified","desc"):(v=$(".sorting").find(".active"),v.length&&"modified_date"==v.attr("data-val")&&Jmp.Helpers.list_sort(v.attr("data-val"),v.find("span").attr("data-val")))}Jmp.App.Notifications.display_notification({type:"files_copied",item_name:l,item_count:n}).close_notification();v=[];if("undefined"!=typeof u.new_files)for(y=
""!=u.new_files?u.new_files.split(","):[],x=0;x<y.length;x++)v.push({parent:"0"==u.new_bucket_id||0==u.new_bucket_id?-1==k?"team":"root":u.new_bucket_id,code:y[x],type:"file",state:"created"});if("undefined"!=typeof u.new_folders)for(y=""!=u.new_folders?u.new_folders.split(","):[],x=0;x<y.length;x++)v.push({parent:"0"==u.new_bucket_id||0==u.new_bucket_id?-1==k?"team":"root":u.new_bucket_id,code:y[x],type:"folder",state:"created"});v.push({code:u.new_bucket_id,type:"folder",state:"renamed",bucket_name:u.new_bucket_name,
bucket_grid_name:u.new_bucket_grid_name});Socket.push("items_updated",v)}else $("#lightbox .cancel").removeAttr("disabled").trigger("click"),-1==u.status||0==u.status?Jmp.App.Notifications.display_notification({type:"error",message:u.message}).close_notification():-2==u.status&&Jmp.App.Notifications.display_notification({type:"error",message:"Copy failed, not enough space"}).close_notification()}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select a folder to copy items"}).close_notification(),
b.removeAttr("disabled").html("Copy").removeClass("disabled");return!1},js_lightbox_folder_search:function(){var b=$("ul#folders").find("li.folder").map(function(){return $(this)}).get();$(".js-search_lightbox_folder").keyup(function(){var h=$(".js-search_lightbox_folder").val().toLowerCase();h=Jmp.Helpers.strip_tags(h);if(""!=h)for(var k=0;k<b.length;k++){var l=b[k];-1<l.find("span.bucket-name").text().toLowerCase().search(h)?l.show():l.hide()}else for(k=0;k<b.length;k++)l=b[k],l.show()})},onBucketImport:function(){var b=
$(this).data("id"),h={};h.bucket_code=b;b==$("#bucket_name_header").data("id")?h.bucket_name=$("#bucket_name_header").attr("title"):h.bucket_name=$(Jmp.Helpers.get_container()+" #"+b).attr("data-name");"true"==Jmp.Uploader.options.iur?$.ajax({url:BASEURL_WS+"buckets/get_list/?files_count=1",success:function(k){Jmp.App.Lightbox.show({title:"Save",type:"import_folder",new_bucket_name:Jmp.Helpers.formatFileName(h.bucket_name,28),item_id:b,item_type:"folder",item_name:h.bucket_name,body:k},function(){$(this).html("Saving ...").addClass("disabled");
if(1>$("#folders li.is-selected").length)return $(this).html("Save").removeClass("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:"Please select a folder to perform this action"}).close_notification(),!1;$("#lightbox .cancel").attr("disabled",!0).addClass("disabled");$("#lightbox .close").hide();h.new_bucket_id="";$("#folders li.is-selected").length&&(h.new_bucket_id=$("#folders li.is-selected").data("id"));Jmp.Handler.BucketFiles.import_in_progress=!1;$.ajax({url:BASEURL_WS+
"files/import",type:"post",timeout:0,data:Jmp.Helpers.get_secure_params(h),complete:function(){Jmp.Handler.BucketFiles.import_in_progress=!1},success:function(l){Jmp.Handler.BucketFiles.import_in_progress=!1;if(1==l.status){$(".lightbox .cancel").removeAttr("disabled").trigger("click");Jmp.App.imported_id=l.new_item_code;Jmp.App.Notifications.display_notification({type:"files_imported",message:"'"+Jmp.Helpers.formatFileName(h.bucket_name,30)+"' saved successfully"}).close_notification();ViewerPanel.uninitialize();
$("#viewer_wrapper").removeClass("dark").removeClass("white").addClass(l.vc);$("#viewer_logo").html('<a href="/" title="Jumpshare"><img class="icn-logo-viewer ab-center" src="/res/images/spacer.gif" alt="Jumpshare"></a>');"-1"==h.new_bucket_id?(Socket.push("items_updated",[{parent:"team",code:l.new_item_code,name:l.new_bucket_name,type:"folder",state:"created"}]),Jmp.App.changeAddress(WS_PREFIX+"/team",!1)):""!=h.new_bucket_id?(Socket.push("items_updated",[{parent:h.new_bucket_id,code:l.new_item_code,
name:l.new_bucket_name,type:"folder",state:"created"}]),Jmp.App.changeAddress("/b/"+l.bucket_code,!1)):(Socket.push("items_updated",[{parent:"root",code:l.new_item_code,name:l.new_bucket_name,type:"folder",state:"created"}]),Jmp.App.changeAddress(WS_PREFIX+"/personal",!1));Jmp.App.Lightbox.hide();var m=$("#files_container li[id='"+l.bucket_code+"']");m.find(".thumbnail").html(l.image_tag);l.thumb_class&&m.find(".thumbnail").addClass(l.thumb_class)}else if(Jmp.App.Lightbox.hide(),0==l.status)Jmp.App.Notifications.display_notification({type:"error",
message:l.message}).close_notification();else if(-1!=l.status)if(-2==l.status)Jmp.App.Notifications.display_notification({type:"error",message:"Save failed, not enough space"}).close_notification();else if(-3==l.status){var n=[];$(Jmp.Helpers.get_container()+" li.grid").each(function(){var p=$(this);104857600<p.attr("data-size")&&n.push({name:p.attr("data-name")})});Jmp.App.Lightbox.show({type:"file_size_error",items:n,action:"save"})}}})})}}):$.post("/auth/lr",Jmp.Helpers.get_secure_params({item_id:b,
item_type:"folder",view_type:Jmp.App.getView().type,type:"import"}),function(k){Jmp.App.Lightbox.show({title:"Save folder to Jumpshare",type:"signup_form",item_name:$("#header-inner .bucket_name").attr("title"),login_form:k.login_form,the_item_type:"folder",register_form:k.register_form});$("#the_sign_up #promotion_code").hide();$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog signupPupupWithLogin");$("#modal div.leftImgContainer").addClass("signupPupupWithLogin");$("#modal").addClass("modal-fullscreen");
$("#the_sign_up").find("#firstName").focus().select()});return!1},onSelectBucket:function(b){if($(this).hasClass("disabled")||-2==$(this).data("id")||$(b.target).hasClass("icn-expand-folder")||$(b.target).hasClass("icn-collapse-folder"))return!1;Jmp.Handler.BucketFiles.remove_selection_of_current_bucket();$(this).addClass("is-selected");b.preventDefault();return!1},remove_selection_of_current_bucket:function(){$("ul.buckets_list li").removeClass("is-selected")},initialize_copier:function(){var b=
$("#copy-link"),h=Jmp.App.getView().data.id,k=Jmp.Helpers.get_short_url_code(b),l=Jmp.Helpers.get_copy_link_domain(b);b.unbind("click").bind("click",function(){if(!ViewerPanel.is_mobile&&"undefined"!=typeof Clipboard&&Clipboard.is_supported){var m=l+k;b.after("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; z-index: -3000;' value='"+m+"' />");$("#clipboard_textbox").focus().get(0).setSelectionRange(0,m.length);document.execCommand("copy");$("#clipboard_textbox").remove();
Jmp.App.Notifications.display_notification({type:"folder_link_copied"}).close_notification()}else Jmp.App.Lightbox.show({type:"copy_link",copy_link:l+k}),$("#modal input[type=text]").focus().select();Jmp.Helpers.set_short_url_code(b,h,"bucket",k)})},closeViewer:function(){$("div.zoom-layer").hide().html("");$("#viewer").remove();$("body").css("overflow","auto");$("#playlist").hide();$("a.show-playlist").hide();$("ul.slide_imgs li").removeClass("active");$("div.tipsy").remove();media_player=!1},onLoad:function(b){b=
"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?"inside-bucket-page":"inside-bucket-page guest";"collection"==$("#folder-meta").data("page-type")&&(b+=" inside-collection");b+="undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user?"":" logged-out";Jmp.Helpers.assign_route_class(b);Jmp.Helpers.end_second_tour_forcefully();Jmp.Helpers.end_tour_forcefully();Jmp.Handler.BucketFiles.initialize_copier();$("img.lazy").lazyload();Jmp.Helpers.display_empty_message_if_no_item_found();if(!Jmp.App.isFakeRequest()){b=
Jmp.App.getView();var h=b.data.id;b.data.child_id&&(h=b.data.child_id);0<$(".smart_app_banner").length&&$(".smart_app_banner").find(".open_in_app_url").attr("href","jumpshare://b/"+h);Socket.connect(!1,function(){Socket.join_item(h,"folder")});if("undefined"!=typeof Jmp.App.super_aggressive_mode_for_folders_uploading){b=$("li.folder");for(var k=b.length,l=0;l<k;l++)h=b.eq(l).attr("data-id"),Socket.join_item(h,"folder")}}PasswordPrompt.close();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();
"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?(Jmp.Helpers.prepare_bucket_parents(),Jmp.Helpers.update_browser_title($("#bucket_name_header").text())):Jmp.Helpers.update_browser_title_without_sitetitle($("#bucket_name_header").text());Jmp.Handler.Buckets.show_uploading_progress_for_buckets();$("#top_welcome_bar").length?$("body").addClass("global-notice"):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");$(".popover").remove();Jmp.Helpers.show_announcement_bar();
Jmp.ItemsScroller.disable();b=parseInt($("#folder-meta").find(".folders").data("items-count"));k=parseInt($("#files_container").find("li.grid").length);b>k&&(Jmp.ItemsScroller.enable(),Jmp.ItemsScroller.init());$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(m){m=$(m.target);var n=m.data();"object"!=typeof n||"undefined"==typeof n["bs.tooltip"]||m.parent().hasClass("open")||n["bs.tooltip"].hide()});0<$(".smart_app_banner").length&&$(".header_width .site-header").css("margin-top",
"64px");Jmp.App.Notifications._adjust_body_on_gloabl_notice()},onBucketDataFromSocket:function(b){if("undefined"==typeof b.parent||Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent))if(b.status&&("completed"==b.status||"cancelled"==b.status)||b.replace)"completed"==b.status&&"undefined"!=typeof b.code&&0==$(Jmp.Helpers.get_container()+" #"+b.code).length&&$.ajax({url:WS_PREFIX+"/b/"+b.parent,success:function(k){$("#main_container").html(k)},async:!1});else{Jmp.Uploader._addToList(b,!0,
!1);$("#empty_item_message").remove();b.status&&"failed"==b.status&&(Jmp.Helpers.get_item(b.id).find(".progress-bar").hide(),Jmp.Helpers.get_item(b.id).find(".pending").show().html("Upload Failed"));var h="";b.url&&""!=b.url&&(h=b.url);b=b.id;Jmp.Helpers.get_item(b).attr("data-file-url",h);"undefined"!=typeof PLANID&&1<PLANID&&Jmp.Helpers.get_item(b).find(".utp").remove();h=$(".sort_by.active");b=h.find("span");Jmp.Helpers.list_sort(h.attr("data-val"),b.attr("data-val"));Jmp.App.super_aggressive_mode_for_folders_uploading=
!0}},onBucketFileProgressFromSocket:function(b){if("undefined"==typeof b.parent||Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)||ViewerPanel.is_open()){if(-1==b.progress)Jmp.Handler.BucketFiles.onLinkUploadingState(b);else{var h=Jmp.Helpers.get_item(b.id);1>h.length&&(Jmp.Uploader._addToList(b,!0),h=Jmp.Helpers.get_item(b.id),$("#empty_item_message").remove());1>h.find(".progress-bar").length&&Jmp.Uploader.addProgressBar(b.id);b.progress=parseInt(b.progress,10);Jmp.Uploader.showProgress(b.id,
b.progress);h=!0;!b.code&&""==ViewerPanel.dom_parser.url_suffix&&$("li.grid[data-id='"+b.parent+"']").length&&(b.code=b.parent,h=!1,$("#XHR_XHR").attr("id",b.code),Jmp.Helpers.check_uploading(b.code));if(b.code){Jmp.Helpers.add_viewer_real_time(b);ViewerPanel.manager.update_progress(b.code,b.progress);var k=$("#XHR_XHR");k.length&&h&&(k.remove(),b.id=b.code,b.bucket_file_code=b.code,b.bucket=b.parent,Jmp.Helpers.post_processing_after_creating_information_for_uploading_file(b))}}b.parent&&(b=$(".sort_by.active"),
h=b.find("span"),Jmp.Helpers.list_sort(b.attr("data-val"),h.attr("data-val")))}},onTranscriptionUpdated:function(b){var h=!1,k=ViewerPanel.viewers_collection.get_current_viewer();bucket_file_code=b.id;"undefined"!=typeof k&&k.id==bucket_file_code&&ViewerPanel.is_open()&&(h=!0);"finished"==b.change.status?($("#"+bucket_file_code).find(".thumbnail img").attr("data-media-subtitles","1"),h&&(k.media_subtitles="1",k.media_subtitles_hash=""),"undefined"!=typeof b.change.details.language&&""!=b.change.details.language&&
($("#"+bucket_file_code).find(".thumbnail img").attr("data-subtitles-language",b.change.details.language),h&&(k.subtitles_language=b.change.details.language)),"undefined"!=typeof b.change.details.hash&&""!=b.change.details.hash?($("#"+bucket_file_code).find(".thumbnail img").attr("data-subtitles-hash",b.change.details.hash),h&&(k.media_subtitles_hash=b.change.details.hash,ViewerPanel.subtitles.skip_titles_load=!1,ViewerPanel.subtitles.load_titles(k))):($("#"+bucket_file_code).find(".thumbnail img").attr("data-subtitles-hash",
""),h&&(ViewerPanel.subtitles.show_subtitles_empty(),Jmp.Helpers.transcription_no_speech_message(),ViewerPanel.subtitles.load_titles_extras([{summary:"",chapters:[]}]))),"undefined"!=typeof b.change.details.language&&""!=b.change.details.language&&h&&("ar"==k.subtitles_language||"he"==k.subtitles_language||"fa"==k.subtitles_language||"ur"==k.subtitles_language?($("#custom_captions_wrapper, #custom_captions_wrapper_audio").find("span:first-child").removeClass("rtl-flow").addClass("rtl-flow"),$(".captions_or_ts_container").removeClass("rtl-flow-transcription").addClass("rtl-flow-transcription")):
($("#custom_captions_wrapper, #custom_captions_wrapper_audio").find("span:first-child").removeClass("rtl-flow"),$(".captions_or_ts_container").removeClass("rtl-flow-transcription"))),"undefined"!=typeof b.change.details.extras_reason&&""!=b.change.details.extras_reason&&(extras_failed_reason=b.change.details.extras_reason,h&&"low_text_limit"==extras_failed_reason&&Jmp.App.Notifications.display_notification({type:"error",message:"Summary and chapters weren't generated because your video contains fewer than 120 spoken words."}).close_notification())):
"failed"==b.change.status&&h&&(ViewerPanel.subtitles.show_subtitles_empty(),Jmp.Helpers.transcription_no_speech_message(),ViewerPanel.subtitles.load_titles_extras([{summary:"",chapters:[]}]))},onBucketFileUploadComplete:function(b){if(("undefined"==typeof b.parent||Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)||ViewerPanel.is_open())&&"file"==b.type){var h=Jmp.Helpers.get_item(b.code);1>h.length&&(h=$(Jmp.Helpers.get_container()+" li[data-id="+b.code+"]"));1>h.length&&(h=$("#"+b.id),
1>h.length&&(h=$(Jmp.Helpers.get_container()+" li[data-id="+b.id+"]")));$.post(WS_PREFIX+"/u/"+b.code,Jmp.Helpers.get_secure_params({}),function(k){if(1==k.status){0<h.length?h.replaceWith(k.bucket_file_template):"root"==b.parent||"team"==b.parent?0<$("ul.buckets > li.thead").length?$("ul.buckets > li:nth-child(1)").after(k.bucket_file_template):$("ul.buckets").prepend(k.bucket_file_template):$("ul.buckets").append(k.bucket_file_template);$("#empty_item_message").remove();Jmp.Helpers.update_storage_updates_real_time(k.storage_used,
b.parent);ViewerPanel.viewers_collection.fetch_by_id(b.code)?Jmp.Helpers.update_viewer_real_time(b):Jmp.Helpers.add_viewer_real_time(b);Jmp.Helpers.enable_buttons_in_shared_folder_when_real_time();if(b.parent&&"root"!=b.parent){k=$(".sort_by.active");var l=k.find("span");Jmp.Helpers.list_sort(k.attr("data-val"),l.attr("data-val"))}b.code!=b.id&&(k=Jmp.Helpers.get_item(b.id),0<k.length&&k.attr("data-name")==h.attr("data-name")&&k.remove())}})}},onBucketFileUpdateViewCount:function(b){if("file"==b.type&&
(b=Jmp.Helpers.get_item(b.code),b.length&&(b=b.find(".viecount"),b.length))){var h=parseInt(b.text())+1;b.text(h+" views")}},onBucketFileUploadCancel:function(b){if("undefined"==typeof b.parent||Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)||ViewerPanel.is_open())Jmp.Uploader.showCancelled(b.id),"Viewer"==Jmp.App.getView().type?("undefined"==typeof b.bucket_file_code&&(b.bucket_file_code=b.code),Jmp.Helpers.cancel_viewer_real_time(b)):Jmp.Helpers.delete_viewer(b.code)},onBucketUploadCancel:function(b){Jmp.Helpers.is_valid_location_for_real_time_updates(b.code)&&
$("li[id*=XHR]").remove()},onBucketFilesDeleted:function(b){this._remove_bucket_items(b);Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)&&(Jmp.Helpers.hide_sorting_options(),Jmp.Helpers.disable_buttons_in_shared_folder_when_real_time(),Jmp.Helpers.update_storage_updates_real_time(b.storage_used,b.parent))},onBucketFilesMoved:function(b){this._remove_bucket_items(b);Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)&&
(Jmp.Helpers.hide_sorting_options(),Jmp.Helpers.disable_buttons_in_shared_folder_when_real_time(),Jmp.Helpers.update_storage_updates_real_time(b.storage_used,b.parent))},onNewBucketFilesInBucket:function(b){if(Jmp.Helpers.is_valid_location_for_real_time_updates(b.bucket_id)){if(Jmp.Helpers.is_mobile())return!1;for(var h=b.new_bucket_files,k=0;k<h.length;k++){var l=$(h[k]),m=l.attr("data-id");l.attr("data-extension");l.find(".options .download").attr("data-link");if("undefined"!=typeof is_valid_owner&&
"false"==is_valid_owner){var n=l.attr("data-file-url")&&""!=l.attr("data-file-url")?l.find(".js-dropdown-menu").find(".view_original"):l.find(".js-dropdown-menu").find(".download");n.length&&(n=n[0].outerHTML);l.find(".js-dropdown-menu").html("<span class='arrow icn-dd-top-arrow-panel'></span><li><a data-id='"+m+"' class='import'>Save</a></li><li>"+n+"</li>");l.find(".icn-edit").remove()}$("#files_container").append(l);Jmp.Helpers.add_viewer_real_time({bucket_file_code:m,file_id:m})}Jmp.Helpers.remove_splash();
Jmp.Helpers.display_sorting_options();Jmp.Helpers.enable_buttons_in_shared_folder_when_real_time();Jmp.Helpers.update_bucket_name(b.new_bucket_name,b.new_bucket_grid_name);Jmp.Helpers.update_storage_updates_real_time(b.new_storage_used,b.bucket_id)}},onLinkUploadingState:function(b){UploadViaLink.set_panel_ui_status(b.id,b.state.charAt(0).toUpperCase()+b.state.slice(1));(b.bucket_file_code=b.code)&&Jmp.Helpers.add_viewer_real_time(b)},onItemThumbUpdate:function(b){if(Jmp.Helpers.is_valid_location_for_real_time_updates(b.item.parent)){var h=
Jmp.Helpers.get_item(b.item.code);if(0<h.length){var k=h.find(".thumbnail");"undefined"!=typeof b.thumbs&&k.find("img").attr("src","undefined"!=typeof b.thumbs[2]?b.thumbs[2].url:"undefined"!=typeof b.thumbs[1]?b.thumbs[1].url:b.thumbs[0].url).removeAttr("class");k.removeClass("open-view");"video"==h.data("type")&&k.addClass("icn-thumb-play");b=b.item.data_tags.split("|");for(var l=0;l<b.length-1;l++)if(""!=b[l]){var m=b[l].split("=");k.find("img").attr(m[0],m[1].replace(/"/g,""))}if("video"==h.data("type")||
"audio"==h.data("type"))k=k.find("img").attr("data-media-duration"),h.find(".thumb_video_duration").removeClass("hide"),h.find(".thumb_video_duration").text(Jmp.Helpers.format_video_duration(Math.floor(k)))}else h.attr("data-status",2)}},onFolderHierarchyUpload:function(b){if("undefined"!=typeof b.parent&&!Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)||Jmp.Helpers.is_mobile())return!1;"folder"==b.type&&$.post(WS_PREFIX+"/c/"+b.code,Jmp.Helpers.get_secure_params({}),function(h){if(1==
h.status){var k=Jmp.Helpers.adjust_bucket_panel_ui_real_time(h.bucket_template),l=Jmp.Helpers.get_item(b.code);l.length?l.replaceWith(k):"root"==b.parent||"team"==b.parent?0<$("ul.buckets > li.thead").length?$("ul.buckets > li:nth-child(1)").after(k):$("ul.buckets").prepend(k):$("ul.buckets").append(k);$("#empty_item_message").remove();k=$("#folder-meta").find(".folders");l=parseInt(k.attr("data-items-count"))+1;var m=Jmp.Helpers.get_string_based_on_count(l,"item","items",!0);k.html(m).attr("data-items-count",
l);Jmp.Helpers.update_storage_updates_real_time(h.storage_used,h.parent);Jmp.Helpers.remove_splash();Jmp.Helpers.enable_buttons_in_shared_folder_when_real_time();h=$(".sort_by.active");k=h.find("span");Jmp.Helpers.list_sort(h.attr("data-val"),k.attr("data-val"))}})},onFolderProgress:function(b){var h=Jmp.Helpers.get_item(b.code);h.length&&(0==h.find(".js-thumb-overlay-uploading").length&&h.find(".thumbnail").after(Jmp.Handler.Buckets._bucket_upload_template()),b=b.progress,b=Math.floor(b.uploading/
b.total*100),h.find(".js-progress-bar").css("width",b+"%"))},onFolderNewTemplate:function(b){var h=Jmp.Helpers.get_item(b.bucket_id);h.length&&(b=Jmp.Helpers.adjust_bucket_panel_ui_real_time(b.bucket_template),h.replaceWith(b))},onFolderUploadingCancel:function(b){Jmp.Uploader._remove_thumb_overlay_from_bucket(b.code);this.onBucketUploadCancel(b)},onBucketsDeleted:function(b){Jmp.Helpers.get_item(b.code).remove();Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.is_valid_location_for_real_time_updates(b.parent)&&
(Jmp.Helpers.hide_sorting_options(),Jmp.Helpers.disable_buttons_in_shared_folder_when_real_time(),Jmp.Helpers.update_storage_updates_real_time(b.storage_used,b.parent))},onFeedbackPopup:function(b){Jmp.App.Lightbox.show({type:"feedback"},function(){var h=this,k={};k.message=Jmp.Helpers.strip_tags($("#feed").val());k.screen_res=screen.width+"x"+screen.height;k.browser=navigator.userAgent;""!=k.message?"Sending ..."!=$(this).html()&&($(this).html("Sending ...").addClass("disabled"),$.post(BASEURL_WS+
"contacts/send_feedback",Jmp.Helpers.get_secure_params(k),function(l){1==l.status?(Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"success",message:"Thanks for your Feedback"}).close_notification()):($(h).html("Send Feedback").removeClass("disabled"),"undefined"!=typeof l.message?Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Feedback could not be sent, please try again"}).close_notification())})):
Jmp.App.Notifications.display_notification({type:"error",message:"Please type your feedback"}).close_notification()});$("#feed").focus();$("#modal .modal-content").addClass("modal-feedback")},onUpgradeSurvey:function(){Jmp.App.Lightbox.show({type:"upgrade_survey"},function(b){if(""==$("#upgrade_survey_reason").val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please type what convinced you to upgrade"}).close_notification(),!1;b={};b.screen_res=screen.width+"x"+screen.height;
b.browser=navigator.userAgent;b.reason=$("#upgrade_survey_reason").val();b.old_service=$("#upgrade_survey_previous_service").val();var h=$("#modal").find(".btn-submit.btn-blue:first");h.attr("disabled",!0).text("Sending ...").addClass("disabled");$.post(WS_PREFIX+"/contacts/submit_upgrade_survey",Jmp.Helpers.get_secure_params(b),function(k){k.status?(Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"success",message:"Thank you for your time. Survey submitted successfully"}).close_notification()):
(Jmp.App.Notifications.display_notification({type:"error",message:"Oops, something went wrong. Please try again"}).close_notification(),h.attr("disabled",!1).text("Submit").removeClass("disabled"))})})},onPasswordChangeReminder:function(){Jmp.App.Lightbox.show({type:"password_change_reminder",is_sticky:!0,hide_close:!0},function(b){window.location.href=WS_PREFIX+"/settings/personal/account?change-password"})},onPasswordChangeForceful:function(){Jmp.App.Lightbox.show({type:"password_change_forceful",
is_sticky:!0,hide_close:!0},function(b){window.location.href=WS_PREFIX+"/settings/personal/account?change-password&f=1"})},onBucketsRemoved:function(b){Jmp.Helpers.is_valid_location_for_real_time_updates(b.code)&&($("#files_container li.grid").remove(),Jmp.Helpers.update_storage_updates_real_time({files_count:0,views_count:0,total_size:0},b.code),"Viewer"==Jmp.App.getView().type&&ViewerPanel.close_viewer())},onUpdateSortCriteria:function(b){var h=$(b.target);if(!h.hasClass("sort_by")&&!h.hasClass("sort_order"))return!1;
if(h.hasClass("sort_by")){var k=h.attr("data-val");var l="asc"==h.children("span").attr("data-val")?"desc":"asc";setTimeout(function(){$(h).parent().parent().parent().removeClass("open")},100)}else h.hasClass("sort_order")&&(k=h.parent().attr("data-val"),l="asc"==h.attr("data-val")?"desc":"asc");b={};b.code=Jmp.App.getView().data.id;b.sort_by=k;b.order=l;Jmp.Handler.BucketFiles._actions_after_sorting_mode();var m=Jmp.Helpers.get_folder_items_count(),n=Jmp.Helpers.get_lazy_load_items_threshold();m>
n?(Jmp.Handler.BucketFiles.onUpdateSortCriteriaActive(h,k,l),$.post(WS_PREFIX+"/buckets/update_sort",Jmp.Helpers.get_secure_params(b),function(){window.location.reload()})):($.post(WS_PREFIX+"/buckets/update_sort",Jmp.Helpers.get_secure_params(b),function(){}),Jmp.Handler.BucketFiles.onUpdateSortCriteriaActive(h,k,l),Jmp.Helpers.list_sort(k,l),Jmp.Helpers.adjust_viewers_after_sorting());return!1},onUpdateSortCriteriaActive:function(b,h,k){if(b.hasClass("sort_by")){h=b.children("span");if(b.hasClass("active"))h.removeClass("asc"==
k?"icn-arrow-desc":"icn-arrow-asc");else{var l=$(".sorting").find(".active");l.children("span").attr("data-val","desc").removeClass("icn-arrow-asc").removeClass("icn-arrow-desc");l.removeClass("active");b.addClass("active")}h.addClass("icn-arrow-"+k);h.attr("data-val",k)}else b.hasClass("sort_order")&&(b.removeClass("asc"==k?"icn-arrow-desc":"icn-arrow-asc"),b.addClass("icn-arrow-"+k),b.attr("data-val",k))},onRearrangeSortOrder:function(){var b=Jmp.Helpers.get_folder_items_count(),h=Jmp.Helpers.get_lazy_load_items_threshold();
b>h?(Jmp.Helpers.start_page_loading(),b=Jmp.ItemsScroller.get_current_folder_code(),$.get("/b/"+b+"?page=all_items",function(k){Jmp.Helpers.stop_page_loading();1==k.status&&($(Jmp.ItemsScroller.get_container()).html(k.items),Jmp.Helpers.post_processing_after_items_fetched_from_lazy_loading(k.items),$("img.lazy").lazyload(),a.BucketFiles._actions_on_rearrange_sort(),Jmp.ItemsScroller.disable())})):a.BucketFiles._actions_on_rearrange_sort();return!1},onViewStats:function(b){1<PLANID?Jmp.App.changeAddress(WS_PREFIX+
"/analytics/file/"+$(this).data("id"),!1):"system"==UTYPE?window.location.href="/pricing":Jmp.App.changeAddress(WS_PREFIX+"/analytics",!1);return!1},_remove_bucket_items:function(b){Jmp.Helpers.get_item(b.code).remove();"Viewer"==Jmp.App.getView().type?Jmp.Helpers.cancel_viewer_real_time({bucket_file_code:b.code}):Jmp.Helpers.delete_viewer(b.code)},_actions_on_rearrange_sort:function(){$("body").addClass("rearrange-mode");$("#CopyBucketDiv").remove();$(".sorting_menu");var b=$(".sorting");$(".sorting_menu").removeClass("hide");
__sort_by=b.find(".sort_by.active");__sort_or=__sort_by.find("span");__sort_ls=[];__pre_sort_ls=[];0==__sort_by.length&&(__pre_sort_ls=$("#files_container").find("li.grid"));$("#files_container li.grid").addClass("dragable");$("#global-actions").find(".show_actions").addClass("hide");$("#files_container").sortable({items:"li.grid",placeholder:"dragable",start:function(h,k){k.item.addClass("selected")},update:function(h,k){b.find(".active").removeClass("active").children(".sort_order").removeClass("icn-arrow-asc").removeClass("icn-arrow-desc")},
stop:function(h,k){k.item.removeClass("selected")}});$(".more_dropdown_toggle").trigger("click");$("#folder-meta").addClass("hide");$("#sidebar_sorting_message").removeClass("hide");$("#sidebar_message").addClass("hide");$("#files_container").parent().addClass("sorting-enabled")},_actions_after_sorting_mode:function(){$(".sorting_menu").addClass("hide");$("#global-actions").find(".show_actions").removeClass("hide");$("#more_menu").parent().removeClass("open");$("#files_container li.grid").removeClass("dragable");
$("#files_container").sortable("destroy");Jmp.Handler.BucketFiles.initialize_copier();$("#folder-meta").removeClass("hide");$("#sidebar_sorting_message").addClass("hide");$("#sidebar_message").removeClass("hide");$("#files_container").parent().removeClass("sorting-enabled")}});a.BucketFiles=new c})(Jmp.Handler);
$(function(){$(document).bind("BucketFiles_load",Jmp.Handler.BucketFiles.onLoad);$("div.btn-cog-wheel .file-stats, #more_menu .file-stats, #viewer_more_menu .file-stats").live("click",Jmp.Handler.BucketFiles.onViewStats);$("#global-actions .copymove:not(.disabled)").live("click",Jmp.Handler.BucketFiles.onCopyMoveItems);$("#global-actions .move:not(.disabled)").live("click",Jmp.Handler.BucketFiles.onMoveFiles);$("#copy-move-toggle-list li").live("click",Jmp.Handler.BucketFiles.onToggleCopyMove);$(".move_file").live("click",
Jmp.Handler.BucketFiles.onSubmitMoveFilesForm);$("#global-actions .copy:not(.disabled)").live("click",Jmp.Handler.BucketFiles.onCopyFiles);$(".copy_file").live("click",Jmp.Handler.BucketFiles.onSubmitCopyFilesForm);$("ul.buckets_list li").live("click",Jmp.Handler.BucketFiles.onSelectBucket);$(".sorting").live("click",Jmp.Handler.BucketFiles.onUpdateSortCriteria);$("#folders .icn-expand-folder").live("click",Jmp.Handler.BucketFiles.get_folder_list);$("#folders .icn-collapse-folder").live("click",Jmp.Handler.BucketFiles.hide_folder_list);
$("#global-actions .import:not(.disabled), li.folder .js-dropdown-menu .import:not(.oi)").live("click",Jmp.Handler.BucketFiles.onBucketImport);$("#move_files_form .new_bucket_name, #copy_files_form .new_bucket_name, #import_files_form .new_bucket_name").live("click",function(a){Jmp.Handler.BucketFiles.remove_selection_of_current_bucket();return!1});$("#feedback").live("click",Jmp.Handler.BucketFiles.onFeedbackPopup);$(".upgrade_survey").live("click",Jmp.Handler.BucketFiles.onUpgradeSurvey);$("ul.workspace_act_dropdown .workspace_dropdown").live("click",
function(){var a=$(this).attr("data-link");$(this).parent().hasClass("active")||(Jmp.Helpers.start_page_loading(),window.location=a);$("div.btn-group").removeClass("open")});$("#add_new_workspace").live("click",function(){Jmp.App.Lightbox.show({type:"new_workspace_form"});$("#txt_new_workspace_name").focus();$("div.btn-group").removeClass("open")});$("#change_default_workspace").live("click",function(){Jmp.App.Lightbox.show({type:"default_workspace_form"});$("div.btn-group").removeClass("open")});
$(".cta_wind_dropdown .list_workspaces li").live("click",function(){$("#button_style_workspaces i").text($(this).find("a").text()).attr("data-code",$(this).attr("data-code"))});$("#btn_add_new_workspace").live("click",Jmp.Handler.Team.onSubmitWorkspaceCreateForm);$("#change_default_workspace_submit").live("click",Jmp.Handler.Team.onSubmitChangeDefaultWorkspaceForm);$(".rearrange_sort_order").live("click",Jmp.Handler.BucketFiles.onRearrangeSortOrder);$(".sorting_menu").live("click",function(a){a=$(a.target);
if(a.hasClass("done_sorting")){$("body").removeClass("rearrange-mode");a=$("#files_container").find("li.grid");for(var c=a.length,b=0;b<c;b++){var h=a.eq(b);h=h.hasClass("folder")?"b_"+h.attr("id"):"f_"+h.attr("id");20<=h.length&&__sort_ls.push(h)}$(".sorting");a={};a.custom=__sort_ls;$.isEmptyObject(a)||(a.code=Jmp.App.getView().data.id,$.post(WS_PREFIX+"/buckets/update_sort",Jmp.Helpers.get_secure_params(a),function(){}),Jmp.Helpers.adjust_viewers_after_sorting(),Jmp.App.Notifications.display_notification({type:"success",
message:"Changes saved"}).close_notification());Jmp.Handler.BucketFiles._actions_after_sorting_mode()}else a.hasClass("cancel_sorting")&&($("body").removeClass("rearrange-mode"),1<=__sort_by.length&&1<=__sort_or.length?(Jmp.Helpers.list_sort(__sort_by.attr("data-val"),__sort_or.attr("data-val")),Jmp.Handler.BucketFiles.onUpdateSortCriteriaActive(__sort_by,__sort_by.attr("data-val"),__sort_or.attr("data-val"))):($(this).find(".sort_by.active").removeClass("active"),$(this).find(".sort_order.active").removeClass("active"),
Jmp.Helpers.revert_custom_sort(__pre_sort_ls)),Jmp.Handler.BucketFiles._actions_after_sorting_mode());return!1})});(function(a){function c(){this.fbInit=!0;this.email_schedule_date="Schedule"}c.prototype.index=function(b,h){if(Jmp.App.isFakeRequest())return!1;b=$(`#${h[1]}`).attr("data-type");"video"==b||"audio"==b?"undefined"==typeof MediaElementPlayer?ViewerPanel.viewers_factory.loadScript("https://static.jumpshare.com/res/mediaplayer/jmp_player.js").then(k=>{ViewerPanel.render(h[1]);ViewerPanel.viewers_factory.loadJS("https://assets.calendly.com/assets/external/widget.js");ViewerPanel.viewers_factory.loadJS("https://unpkg.com/roughjs@latest/bundled/rough.js");
ViewerPanel.viewers_factory.loadCSS("https://assets.calendly.com/assets/external/widget.css")}):ViewerPanel.render(h[1]):"document"==b||"presentation"==b?"undefined"==typeof pdfjsLib?ViewerPanel.viewers_factory.loadScript("https://static.jumpshare.com/res/css/pdfjs/jspdf.min.js").then(k=>{ViewerPanel.render(h[1])}):ViewerPanel.render(h[1]):ViewerPanel.render(h[1]);return!1};c.prototype.onShowEmailForm=function(b){b&&b.preventDefault();b=$(this).attr("data-id");var h=$(this).attr("data-type"),k=$(this);
0<$("li.grid").length?k=$("li.grid[data-id='"+b+"']"):0<$("li.share_item").length?k=$("li.share_item[data-id='"+b+"']"):0<$("li.search_item").length&&(k=$("li.search_item[data-id='"+b+"']"));var l=k.attr("data-team"),m=k.attr("data-name"),n=k.attr("data-file-url"),p=k.attr("data-type");"file"==h&&(m+=""!=k.attr("data-extension")?"."+k.attr("data-extension"):"");"1"==VERIFIED||"2"==VERIFIED||"system"==UTYPE?("undefined"!=typeof $(this).data("popup")?(Jmp.App.Lightbox.show({title:""+Jmp.Helpers.formatFileName(m,
38),type:"send_email",form:"popup_email_form",item_type:h,file_type:p,item_id:b,is_team_upload:l,submit:"Send",verified:VERIFIED,file_url:n}),$("body").removeClass("self-destruct-dtpicker"),$("#lightbox").find(".modal-header").append('<div class="modal-share tabs_share_ui">\t\t\t\t\t<a href="" id="share_modal_tab" class="modal-share-icon active">Send</a>'+("1"!=l?'<a href="" id="collaborate_tab" class="modal-share-icon">Invite</a>':"")+("video"==p||"image"==p?'<a href="" id="embed_modal_tab" class="modal-share-icon">Embed</a>':
"")+'<a href="" id="advance_modal_tab" class="modal-share-icon">Advanced Link</a><a href="" id="CPS_modal_tab" class="modal-share-icon">Privacy Settings</a>\t\t\t\t\t\t\t</div>'),$("#share li, div.modal-dialog").addClass("modal-email-share"),$("ul.modal-suggestion-box").length?$("ul.modal-suggestion-box").html(""):""!=$("ul.email_form").html()&&$("ul.email_form").html("")):(Jmp.App.Lightbox.show({title:""+Jmp.Helpers.formatFileName($(this).attr("data-title"),38),type:"send_email",form:"popup_email_form",
item_type:h,file_type:p,item_id:b,is_team_upload:l,submit:"Send",verified:VERIFIED}),$("#lightbox").find(".modal-header").append('<div class="modal-share tabs_share_ui">\t\t\t\t\t\t\t\t\t<a href="" id="share_modal_tab" class="modal-share-icon active">Send</a><a href="" id="collaborate_tab" class="modal-share-icon">Invite</a>'+("video"==p||"image"==p?'<a href="" id="embed_modal_tab" class="modal-share-icon">Embed</a>':"")+'<a href="" id="advance_modal_tab" class="modal-share-icon">Advanced Link</a><a href="" id="CPS_modal_tab" class="modal-share-icon">Privacy Settings</a>\t\t\t\t\t\t\t\t</div>'),
$("#share li, div.modal-dialog").addClass("modal-email-share"),$("ul.viewer_email_dropdown").length?$("ul.viewer_email_dropdown").html(""):""!=$("ul.email_form").html()&&$("ul.email_form").html("")),a.Viewer.getContactList(),a.Viewer.getTeamList(h,b),a.Viewer.getResourcePrivacy(h,b),a.Viewer.showPrivacyUpgradeTags(),a.Viewer.setScheduleCalendar(),"video"!=p&&"image"!=p||a.Viewer.EnableEmbedCopyCode()):Jmp.App.Lightbox.show({title:"Verify your email address",type:"resend_verify_email",email:$("ul.dropdown-menu").find(".dropdown-detail").first().text(),
verified:VERIFIED});setTimeout(function(){$(".register-popup_home").bind("click",function(r){r.preventDefault();$(".modal-share .close").trigger("click");$("#home_register_form, #home_form_backdrop").removeClass("hide");$("#home_register_form").find("#firstName").focus().select();return!1})},1E3)};c.prototype.showPrivacyUpgradeTags=function(b){2<=PLANID&&$(".lnk-privacy-menu .utp.plus").remove();Jmp.Helpers.isBusinessOrHigherPlan()&&$(".lnk-privacy-menu .utp.business").remove()};c.prototype.onCollabUserRemove=
function(b){var h=$("#item_id").val(),k=$("#item_type").val();$(b.currentTarget);var l=$(b.currentTarget).parents("li");b=l.attr("data-user-email");var m=l.attr("data-user-id");k=Jmp.Helpers.get_secure_params({item_code:h,item_type:k,email:b,user_id:m});$.post(BASEURL_WS+"buckets/remove_item_collaborator",k,function(n){"success"==n.status&&(l.remove(),void 0!==n.result.remaining_collaborators&&0==parseInt(n.result.remaining_collaborators)&&Jmp.Helpers.get_item(h).remove(),Jmp.App.Notifications.display_notification({type:"success",
message:"User successfuly removed."}).close_notification());$("#lightbox").find(".cancel").trigger("click")})};c.prototype.getResourcePrivacy=function(b,h){$(".email_invitee_list_cps ul").html("");$.post(BASEURL_WS+"buckets/get_privacy_settings",Jmp.Helpers.get_secure_params({item_code:h,item_type:b}),function(k){if(k){var l=k.resource_privacy;"emails"==l?k.users.map(function(m){m='<li><span class="invitee_email"> '+m.user_email+' </span><span class="icn-close"></span></li>';$(".email_invitee_list_cps ul").append(m)}):
"password"==l&&$("#password_access_cps").find("input").val(k.resource_privacy_pwd);if("undefined"==typeof PRIVACY||"password"!=PRIVACY||"password"==l)k=$(".lnk-privacy-menu li[data-val='"+l+"']"),0<k.length&&($(".lnk-privacy-menu .selected").removeClass("selected"),k.addClass("selected"),k=$(".lnk-privacy-menu .selected a").html(),$(".lnk-privacy-txt").html(k),k=$(".lnk-privacy-menu li.selected").attr("data-val"),l=Jmp.App.Lightbox._get_lnk_privacy_foot_note(k),$(".cta_wind_dropdown .info_note").html(l),
-1!=["everyone","everyone_workspace","only_you"].indexOf(k)?$(".modal-CPS .btn-save").addClass("hide"):$(".modal-CPS .btn-save").removeClass("hide"))}})};c.prototype.onSubmitInviteToCollaborateForm=function(b){var h=$("#popup_collaborate_invite_form");if(Jmp.Helpers.is_connected())if(Jmp.Helpers.is_storage_left()){var k="",l=$(this),m=l.text();l.attr("disabled",!0).text("Inviting ...").addClass("disabled");if(0<h.find("#email_data").length)k=Jmp.Helpers.strip_tags(h.find("#email_data").val());else{var n=
h.find("li.acjs-data").length;h.find("li.acjs-data").each(function(u){k+=$("a",this).data("email");n>1+u&&(k+=",")})}if(""==k)Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification(),l.removeAttr("disabled").text(m).removeClass("disabled");else{var p=!1,r=Jmp.Helpers.strip_tags(h.find("#item_id").val());"bucket"==h.find("#item_type").val()&&"undefined"!=typeof Jmp.Uploader.bucketUploads&&0!=Object.keys(Jmp.Uploader.bucketUploads).length?
$.ajax({url:WS_PREFIX+"/buckets/get_hierarchy",async:!1,type:"POST",data:Jmp.Helpers.get_secure_params({item_id:r}),success:function(u){u.length&&$.each(u,function(v,x){"undefined"!=typeof Jmp.Uploader.bucketUploadCounts[x]&&Jmp.Uploader.bucketUploadCounts[x].total!=Jmp.Uploader.bucketUploadCounts[x].uploaded&&(p=!0)})}}):"file"==h.find("#item_type").val()&&1<=$("li.grid[data-id="+r+"]").length&&$("li.grid[data-id="+r+"]").attr("id")!=r&&(p=!0);if(p){Jmp.App.Notifications.display_notification({type:"email_sent",
message:"Invite users when upload completes"}).close_notification();return}if(!navigator.onLine){l.removeAttr("disabled").text(m).removeClass("disabled");Jmp.App.Lightbox.hide();Jmp.App.Notifications.display_notification({type:"error",message:"Failed to invite, unable to connect to the internet"}).close_notification();return}h.find("#email_to_collaborate").val(k).hide();r=Jmp.Helpers.queryStringArrayToJSON(h.serializeArray());Jmp.Handler.BucketFiles.move_in_progress=!0;$("ul.buckets_list li.is-selected").data("name")||
Jmp.Helpers.strip_tags($(".new_bucket_name").val());var q=Jmp.App.getView().data.id;q=Jmp.App.getView().type==Jmp.Handler.getRule("team")&&0==q?-1:q;"Search"==Jmp.App.getView().type&&(q=""!=$("#parent_bucket_id").val()?$("#parent_bucket_id").val():0);$.ajax({url:BASEURL_WS+"buckets/send_collaboration_invite",type:"post",timeout:0,data:Jmp.Helpers.get_secure_params(r),complete:function(){Jmp.Handler.BucketFiles.move_in_progress=!1},success:function(u){if(u.status){Jmp.App.Lightbox.hide();Jmp.App.Notifications.display_notification({type:"email_sent",
message:u.message}).close_notification();var v=[];"file"==u.item_type?("Search"!=Jmp.App.getView().type&&"Collaboration"!=Jmp.App.getView().type?Jmp.Helpers.get_item(u.item_id).remove():Jmp.Helpers.get_item(u.item_id).find(".copy_move_item").attr("data-bucket",0),v.push({parent:"0"==q||0==q?"root":-1==q?"team":q,code:u.item_id,type:"file",state:"deleted"}),v.push({parent:"shared",code:u.item_id,type:"file",state:"created"})):("Search"!=Jmp.App.getView().type&&"Collaboration"!=Jmp.App.getView().type?
Jmp.Helpers.get_item(u.item_id).remove():Jmp.Helpers.get_item(u.item_id).find(".copy_move_item").attr("data-bucket",0),v.push({parent:"0"==q||0==q?"root":-1==q?"team":q,code:u.item_id,type:"folder",state:"deleted"}),v.push({parent:"shared",code:u.item_id,type:"folder",state:"created"}),Jmp.Uploader.stop_bucket_uploading_if_in_progress(u.item_id),"undefined"!=typeof Jmp.Uploader.emailQueue&&"undefined"!=typeof Jmp.Uploader.emailQueue[u.item_id]&&delete Jmp.Uploader.emailQueue[u.item_id],"undefined"!=
typeof u.parent_bucket_code&&u.parent_bucket_code?Jmp.App.changeAddress("/b/"+u.parent_bucket_code,!1):"undefined"!=typeof u.team_bucket&&u.team_bucket?Jmp.App.changeAddress(WS_PREFIX+"/team",!1):Jmp.App.changeAddress(WS_PREFIX+"/personal",!1));ViewerPanel.is_open()&&ViewerPanel.close_viewer();EditMode.update_buckets_count(1);Jmp.Helpers.display_empty_message_if_no_favorite_collection_found();Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.hide_sorting_options();Jmp.Helpers.adjust_more_menu();
Jmp.Helpers.delete_viewer(u.item_id);Socket.push("items_updated",v);ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.Helpers.hide_collection_sorting_options()}else"Invalid user"==u.message?window.location="/":ViewerPanel.is_mobile?h.find("#email_to_collaborate").focus():(h.find("#email_to_collaborate").val("").show(),Jmp.App.Notifications.display_notification({type:"error",message:u.message}).close_notification(),l.removeAttr("disabled").text(m).removeClass("disabled"))},fail:function(u,
v){l.removeAttr("disabled").val(m).removeClass("disabled");Jmp.App.Lightbox.hide();Jmp.App.Notifications.display_notification({type:"error",message:"Failed to invite, please try again"}).close_notification()}})}b.preventDefault()}else Jmp.App.Lightbox.hide(),Jmp.App.Lightbox.show({type:"no_storage_left_share_disabled"});else Jmp.Helpers.show_notification_on_disconnected()};c.prototype.onSubmitEmailCodeVerificationForm=function(b){b.preventDefault();if("system"==UTYPE){var h=$(this),k=h.text();h.attr("disabled",
!0).text("Verifying ...").addClass("disabled");b=$("#verification_code").val();""==b?(Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid verification code"}).close_notification(),h.removeAttr("disabled").text(k).removeClass("disabled")):(params={v_code:b},$.ajax({type:"post",url:BASEURL+"auth/verify_email_guest",data:Jmp.Helpers.get_secure_params(params),success:function(l){"1"==l.status?($("#verification_code_container").addClass("hide"),$(".modal-share").removeClass("verification_code_modal"),
VERIFIED="1",GUEMAIL="undefined"==typeof l.email?"":l.email,$("#popup_email_form ~ div.modal-footer > button.send_mail").click()):Jmp.App.Notifications.display_notification({type:"1"==l.status?"success":"error",message:l.message}).close_notification();h.removeAttr("disabled").text(k).removeClass("disabled")},complete:function(l){}}))}};c.prototype.onSubmitEmailForm=function(b){var h=$("#popup_email_form");if(Jmp.Helpers.is_connected())if(ViewerPanel.is_mobile||Jmp.Helpers.is_storage_left()){var k=
"";from_email="";if(ViewerPanel.is_mobile)k=Jmp.Helpers.strip_tags(h.find("#email_to").val());else{var l=$(this),m=l.text();l.attr("disabled",!0).text("Send"==m?"Sending ...":"Scheduling ...").addClass("disabled");if(0<h.find("#email_data").length)k=Jmp.Helpers.strip_tags(h.find("#email_data").val());else if("system"==UTYPE){k=$("#email_share_to").val();if(""==k||!Jmp.Helpers.looksLikeEMail(k)){Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification();
l.removeAttr("disabled").text(m).removeClass("disabled");return}from_email=$("#email_share_from").val();if(""==from_email||!Jmp.Helpers.looksLikeEMail(from_email)){Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid from email address"}).close_notification();l.removeAttr("disabled").text(m).removeClass("disabled");return}}else{var n=h.find("li.acjs-data").length;h.find("li.acjs-data").each(function(v){k+=$("a",this).data("email");n>1+v&&(k+=",")})}}if(""==k)ViewerPanel.is_mobile?
h.find("#email_to").focus():($("#share_modal_tab").hasClass("active")&&Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification(),l.removeAttr("disabled").text(m).removeClass("disabled"));else{if("system"==UTYPE&&"0"==VERIFIED){params={email:from_email};$.ajax({type:"post",url:BASEURL+"auth/send_verification_email_guest",data:Jmp.Helpers.get_secure_params(params),success:function(v){"1"==v.status?($("#verification_code_container").removeClass("hide"),
$(".modal-share").addClass("verification_code_modal"),$(".modal-title").text("Confirm your email")):Jmp.App.Notifications.display_notification({type:"1"==v.status?"success":"error",message:v.message}).close_notification();l.removeAttr("disabled").text(m).removeClass("disabled")},complete:function(v){}});return}var p=!1,r=Jmp.Helpers.strip_tags(h.find("#item_id").val());if(1<PLANID&&"checked"==h.find("#expire_after").attr("checked")&&""==h.find("#expire_after_number").val())return h.find("#expire_after_number").focus(),
Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid expiry number for "+h.find("#expire_after_type").val()}).close_notification(),l.removeAttr("disabled").text(m).removeClass("disabled"),!1;"bucket"==h.find("#item_type").val()&&"undefined"!=typeof Jmp.Uploader.bucketUploads&&0!=Object.keys(Jmp.Uploader.bucketUploads).length?$.ajax({url:WS_PREFIX+"/buckets/get_hierarchy",async:!1,type:"POST",data:Jmp.Helpers.get_secure_params({item_id:r}),success:function(v){v.length&&
$.each(v,function(x,y){"undefined"!=typeof Jmp.Uploader.bucketUploadCounts[y]&&Jmp.Uploader.bucketUploadCounts[y].total!=Jmp.Uploader.bucketUploadCounts[y].uploaded&&(p=!0)})}}):"file"==h.find("#item_type").val()&&1<=$("li.grid[data-id="+r+"]").length&&$("li.grid[data-id="+r+"]").attr("id")!=r&&(p=!0);if(p)Jmp.App.Notifications.display_notification({type:"email_sent",message:"File(s) will be sent when upload completes"}).close_notification(),Jmp.Uploader.emailQueue[r]={et:k,msg:Jmp.Helpers.strip_tags(h.find("#email_message").val()),
ea:"checked"==h.find("#expire_after").attr("checked")?1:0,ean:h.find("#expire_after_number").val(),eat:h.find("#expire_after_type").val(),dd:"checked"==h.find("#disable_download").attr("checked")?1:0,ed:h.find("#email_date").val()},Jmp.App.Lightbox.hide(),$("ul.viewer_email_dropdown").length?$("ul.viewer_email_dropdown").html(""):$("ul.email_form").html("");else{ViewerPanel.is_mobile||h.find("#email_to").val(k).hide();r="";var q=h.find("#email_date").text().trim();"file"==h.find("#item_type").val()?
(r="files/send_email","system"==UTYPE&&(r="files/send_email_guest")):r="buckets/send_email";if(navigator.onLine){var u=Jmp.Helpers.queryStringArrayToJSON(h.serializeArray());$.post(BASEURL_WS+r,Jmp.Helpers.get_secure_params(u),function(v){if(v.status){if(Jmp.App.Lightbox.hide(),$("#popup_email_form .js-link-plus-tip").remove(),Jmp.Uploader.emailmsg?(setTimeout(function(){Jmp.App.Notifications.display_notification({type:"email_sent",message:v.message}).close_notification()},3E3),Jmp.Uploader.emailmsg=
0):ViewerPanel.is_mobile?($("#js_share_container").addClass("hide"),$("#js_container").removeClass("hide"),ViewerPanel.is_open()?($("body").addClass("viewer-open").removeClass("share-page"),$("#viewer_wrapper").show()):$("body").removeClass("share-page")):Jmp.App.Notifications.display_notification({type:"email_sent",message:v.message}).close_notification(),!ViewerPanel.is_mobile){if("undefined"!=typeof u.update){var x=$("#"+u.item_id);if("undefined"!=typeof v.schedule){var y={};1==u.disable_download&&
(y.dd=1);1==u.expire_after&&(y.eat=u.expire_after_type,y.ean=u.expire_after_number);var B=[],C="",H="";h.find("li.acjs-data").each(function(E){$("a",this).text()!=$("a",this).data("email")?(B.push($("a",this).text()+" ("+$("a",this).data("email")+")"),C+=",",H+=",",C+=$("a",this).text()):(B.push($("a",this).data("email")),C+=",",H+=",",C+="");H+=$("a",this).data("email")});x.find("div.to-meta div.receiver").remove();x.data("username",C);x.data("email",H);for(var F=0;F<B.length;F++)x.find("div.msg-to-receiver").before('<div class="receiver">'+
B[F]+"</div>");""!=u.email_message&&"undefined"!=typeof u.email_message?x.find("div.msg-to-receiver").text("\u201c"+u.email_message+"\u201d"):x.find("div.msg-to-receiver").text("");x.find("div.scheduled").text(v.schedule);x.data("calander",u.email_date);x.find("#opt").val(JSON.stringify(y))}else x.remove()}"Send"!=m&&""!=q&&$("#schemail").addClass("active");$("ul.viewer_email_dropdown").length?$("ul.viewer_email_dropdown").html(""):$("ul.email_form").html("");$("#temp_email_form").length&&$("#temp_email_form").remove();
0==Jmp.Uploader.counts.uploaded&&Jmp.Uploader.bucketUploadComplete("");"undefined"!=typeof v.desktop_push_notifications_web_popup&&Jmp.Helpers.is_desktop_notifications_supported()&&(x=$("#lightbox"),Jmp.App.Lightbox.show({type:"desktop_push_notifications_web_popup"}),x.find(".close").addClass("close_icon disable_desktop_push_notifications_web desktop_push_notifications_web_setting").removeClass("close"),x.find(".icn-close").addClass("disable_desktop_push_notifications_web desktop_push_notifications_web_setting"),
x.find(".disable_desktop_push_notifications_web").removeClass("btn-blue"),$("#modal").wrap("<div id='desktop_push_notifications_web_popup'></div>"));"undefined"!=typeof v.desktop_push_notification_web_setting_enabled&&Jmp.Helpers.is_desktop_notifications_supported()&&DesktopPushNotificationsWeb.show_browser_permission_dialog(Notification.permission)}}else"Invalid user"==v.message?window.location="/":"undefined"!=typeof v.error&&"share_limit_free"==v.error?(x=Jmp.Helpers.getEmailShareLimitMessage("free"),
Jmp.App.Notifications.display_notification({type:"info",message:x}).close_notification(7),l.removeAttr("disabled").text(m).removeClass("disabled")):"undefined"!=typeof v.error&&"share_limit_plus"==v.error?(x=Jmp.Helpers.getEmailShareLimitMessage("plus"),Jmp.App.Notifications.display_notification({type:"info",message:x}).close_notification(7),l.removeAttr("disabled").text(m).removeClass("disabled")):"undefined"!=typeof v.error&&"share_limit_business"==v.error?(x=Jmp.Helpers.getEmailShareLimitMessage("business"),
Jmp.App.Notifications.display_notification({type:"info",message:x}).close_notification(7),l.removeAttr("disabled").text(m).removeClass("disabled")):"undefined"!=typeof v.error&&"share_limit_business_trial"==v.error?(x=Jmp.Helpers.getEmailShareLimitMessage("business_trial"),Jmp.App.Notifications.display_notification({type:"info",message:x}).close_notification(7),l.removeAttr("disabled").text(m).removeClass("disabled")):"undefined"!=typeof v.error&&"share_limit_enterprise"==v.error?(x=Jmp.Helpers.getEmailShareLimitMessage("enterprise"),
Jmp.App.Notifications.display_notification({type:"info",message:x}).close_notification(7),l.removeAttr("disabled").text(m).removeClass("disabled")):ViewerPanel.is_mobile?h.find("#email_to").focus():(h.find("#email_to").val("").show(),Jmp.App.Notifications.display_notification({type:"error",message:v.message}).close_notification(),l.removeAttr("disabled").text(m).removeClass("disabled"))}).fail(function(v,x){l.removeAttr("disabled").text(m).removeClass("disabled");Jmp.App.Lightbox.hide();Jmp.App.Notifications.display_notification({type:"error",
message:"Sending failed, please try again"}).close_notification()})}else ViewerPanel.is_mobile?h.find("#email_to").focus():(l.removeAttr("disabled").text(m).removeClass("disabled"),Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"error",message:"Sending failed, unable to connect to the internet"}).close_notification())}}ViewerPanel.is_mobile||b.preventDefault()}else Jmp.App.Lightbox.hide(),Jmp.App.Lightbox.show({type:"no_storage_left_share_disabled"});else Jmp.Helpers.show_notification_on_disconnected()};
c.prototype.EnableGenerateLinkButton=function(b){"checked"==$("#expire_after_copy_link").attr("checked")||"checked"==$("#disable_download_copy_link").attr("checked")?$("#generate_adv_copylink").removeClass("blockUI").text("Generate Link"):$("#generate_adv_copylink").addClass("blockUI").text("Generate Link")};c.prototype.GenerateAdvCopyLink=function(b){b.preventDefault();b=$("#popup_advcopylink_form");var h=$(this);h.addClass("blockUI").text("Generating...");if(1<PLANID&&"checked"==b.find("#expire_after_copy_link").attr("checked")&&
""==b.find("#expire_after_number_copy_link").val())return b.find("#expire_after_number_copy_link").focus(),Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid expiry number for "+b.find("#expire_after_type_copy_link").val()}).close_notification(),h.removeClass("blockUI").text("Generate Link"),!1;$(".js-link-plus-tip").hide().prev().hide();var k=Jmp.Helpers.strip_tags(b.find("#item_type").val());b=Jmp.Helpers.queryStringArrayToJSON(b.serializeArray());$.post(BASEURL_WS+
"buckets/generate_adv_link",Jmp.Helpers.get_secure_params(b),function(l){if(0==l.status)return Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification(),h.removeClass("blockUI").text("Generate Link"),!1;Jmp.App.Notifications.display_notification({type:"success",message:"Link generated successfully"}).close_notification();h.text("Generate Link");c.prototype.highlightCopyLinkField();22==l.link.length&&"image"==$("#file_type").val()&&$(".js-link-plus-tip").show().prev().show();
$("#adv_copylink").val(SHORT_BASEURL+l.link);$("#copy_advLink").attr("data-link",SHORT_BASEURL+l.link).attr("data-type",k);a.Viewer.EnableAdvanceCopyLink()})};c.prototype.highlightCopyLinkField=function(){$(".option.center_button").addClass("highlight_border");setTimeout(function(){$(".option.center_button").removeClass("highlight_border")},1E3)};c.prototype.RemoveAdvCopyLink=function(b){};c.prototype.EnableEmbedCopyCode=function(b){b=$("#copy_embedCode");var h=$("#txt_embedCode");"undefined"!==typeof b&&
(b.attr("data-link"),b.attr("data-type"));b.unbind("click").bind("click",function(k){k.preventDefault();Jmp.Handler.Viewer.updateEmbedCode();"undefined"!=typeof Clipboard&&Clipboard.is_supported?(k=h.val(),$("body").append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; top: -3000px;' value='"+k+"' />"),$("#clipboard_textbox").focus().get(0).setSelectionRange(0,k.length),document.execCommand("copy"),$("#clipboard_textbox").remove(),Jmp.App.Notifications.display_notification({type:"embed_code_copied"}).close_notification()):
h.focus().select()})};c.prototype.EnableAdvanceCopyLink=function(b){var h=$("#copy_advLink");b=$("#copy_advLink_direct");if("undefined"!==typeof h){h.attr("data-link");var k=h.attr("data-type")}h.unbind("click").bind("click",function(l){"undefined"!=typeof Clipboard&&Clipboard.is_supported?(l=h.attr("data-link"),h.attr("data-type"),$("body").append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; top: -3000px;' value='"+l+"' />"),$("#clipboard_textbox").focus().get(0).setSelectionRange(0,
l.length),document.execCommand("copy"),$("#clipboard_textbox").remove(),"bucket"==k?Jmp.App.Notifications.display_notification({type:"folder_advanced_link_copied"}).close_notification():Jmp.App.Notifications.display_notification({type:"file_advanced_link_copied"}).close_notification()):$("#adv_copylink").focus().select()});b.unbind("click").bind("click",function(l){"undefined"!=typeof Clipboard&&Clipboard.is_supported?(l=$("#adv_copy_directlink").val(),$("body").append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; top: -3000px;' value='"+
l+"' />"),$("#clipboard_textbox").focus().get(0).setSelectionRange(0,l.length),document.execCommand("copy"),$("#clipboard_textbox").remove(),Jmp.App.Notifications.display_notification({type:"file_direct_link_copied"}).close_notification()):$("#copy_advLink_direct").focus().select()})};c.prototype.setScheduleCalendar=function(){var b=$("#email_date");b.datepicker("destroy");1<PLANID?(Jmp.Helpers.showCalendar(b),b.autoGrowInput({comfortZone:8,maxWidth:200}),b.blur(),b.parent().children("span.caret").click(function(){b.focus();
$(".send_mail, .tweet, .share").text("Send")})):(b.unbind("click.sch_popup").bind("click.sch_popup",function(){$(".schedule_dropdown_message").hasClass("hide")?$(".schedule_dropdown_message").removeClass("hide"):$(".schedule_dropdown_message").addClass("hide")}),b.parent().children("span.caret").click(function(){b.trigger("click.sch_popup")}))};c.prototype.getContactList=function(){var b=[""];$.get(BASEURL_WS+"contacts/get",function(h){""!=h?(b=h.split(","),$("ul.acjs-holder").autoCompleteJS({urlLookup:b})):
$("ul.acjs-holder").autoCompleteJS()})};c.prototype.getTeamList=function(b,h){var k=[""];$.get(BASEURL_WS+"teams/get_team_members?scu=true",function(l){0<l.length?(item_data={item_code:h,item_type:b},$.get(BASEURL_WS+"buckets/get_collaborators",item_data).done(function(m){var n=m.users;0<n.length&&(l=l.filter(function(p){for(var r=0;r<n.length;r++)if(n[r].email==p.email)return!1;return!0}));a.Viewer.addCollaborators(m);k=l.map(function(p){return p.email+"|"+p.full_name});$("ul.acjs-team-holder").autoCompleteJS({urlLookup:k,
acOptions:{allowCustom:!1}});$(".email-cps-holder").autoCompleteJS({urlLookup:k,acOptions:{allowCustom:!0}})})):($("ul.acjs-team-holder").autoCompleteJS({acOptions:{allowCustom:!1}}),$(".email-cps-holder").autoCompleteJS({acOptions:{allowCustom:!0}}))})};c.prototype.addCollaborators=function(b){var h=b.users;b=b.is_owner;var k=$(".modal-frm-collaborate .invite_member_list");k.removeClass("hide");k.html("");0<h.length&&$(".empty-team-text").addClass("hide");for(var l=0;l<h.length;l++){var m=h[l];var n=
1==m.access_level_id?"<span> Owner </span>":b?'<a href="javascript:void(0)" class="remove_user"> Remove </a>':!b&&m.current_user?'<a href="javascript:void(0)" class="remove_user"> Leave </a>':"<span> Member </span>";var p="";m.current_user&&(p="<span>&nbsp;(you)</span>");k.append('<li data-user-email="'+m.email+'" data-user-id="'+m.id+'" >\t\t\t\t\t\t<div class="invitee_img_container">\t\t\t\t\t\t\t<img src="'+m.avatar_path+'" />\t\t\t\t\t\t\t<p>'+m.first_name+" "+m.last_name+p+'</p>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="invitee_info">\t\t\t\t\t\t\t'+
n+"\t\t\t\t\t\t</div>\t\t\t\t\t</li>")}};c.prototype.onFileImport=function(){var b=$(this).data("id"),h=$("li#"+b).length?$("li#"+b).data("name")+"."+$("li#"+b).data("extension"):$("#viewer_title").text();"true"==Jmp.Uploader.options.iur?$.ajax({url:BASEURL_WS+"buckets/get_list/?files_count=1",success:function(k){Jmp.App.Lightbox.show({title:"Save '"+h+"' to your account.",type:"import_file",item_id:b,item_type:"file",item_name:h,body:k,form:"import_files_form"})}}):setTimeout(function(){$.post("/auth/lr",
Jmp.Helpers.get_secure_params({item_id:b,item_type:"file",item_parent_id:Jmp.App.getView().data.id,view_type:Jmp.App.getView().type,type:"import"}),function(k){Jmp.App.Lightbox.show({title:"Save file to Jumpshare",type:"signup_form",item_name:h,login_form:k.login_form,the_item_type:"file",register_form:k.register_form});$("#the_sign_up #promotion_code").hide();$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog signupPupupWithLogin");$("#modal div.leftImgContainer").addClass("signupPupupWithLogin");
$("#modal").addClass("modal-fullscreen");$("#the_sign_up").find("#firstName").focus().select();showLastUsedLabel(Jmp.Helpers.get_cookie("lastlogin"))})},50)};c.prototype.onSubmitImportFilesForm=function(){var b=$(this).find(".import-button");b.attr("disabled",!0).val("Saving ...").addClass("disabled");if($("#folders li.is-selected").length||""!=$.trim($(".new_bucket_name").val())){b=$("#folders li.is-selected").data("id");var h=Jmp.Helpers.strip_tags($("#file_code").val());$("#folders li.is-selected").data("name")||
Jmp.Helpers.strip_tags($(".new_bucket_name").val());var k=Jmp.Helpers.strip_tags($(".new_bucket_name").val());$.post(WS_PREFIX+"/files/import",Jmp.Helpers.get_secure_params({bucket_id:Jmp.App.getView().data.id,new_bucket_id:b,new_bucket_name:k,file_code:h}),function(l){if(1==l.status){var m=[];Jmp.App.Lightbox.hide();Jmp.App.imported_id=l.file_code;Jmp.App.Notifications.display_notification({type:"files_imported",message:"1 file saved successfully"}).close_notification();ViewerPanel.uninitialize();
$("#viewer_logo").remove();$("#viewer_wrapper").removeClass("dark").removeClass("white").addClass(l.vc).find(".viewer-header").prepend(l.vl);$("#main_container").removeClass("hide");$("#activity_container").removeClass("hide").removeClass("blockUI");$("#video_editing_panel").removeClass("hide").removeClass("blockUI");$("#add_cta").removeClass("hide");"undefined"!=typeof l.is_team_import&&l.is_team_import&&0==l.bucket_code?(redirectTo=WS_PREFIX+"/team",parent="team"):0!=l.bucket_code?(redirectTo="/b/"+
l.bucket_code,parent=l.bucket_code):(redirectTo=WS_PREFIX+"/personal",parent="root");m.push({parent,code:l.file_code,name:l.file_name,type:"file",state:"created"});m.push({parent,code:l.bucket_code,type:"folder",state:"renamed",bucket_name:l.new_bucket_name,bucket_grid_name:l.new_bucket_grid_name});Socket.push("items_updated",m);$('link[rel="shortcut icon"]').remove();$("head").append('<link id="favicon" href="/res/favicon.png" rel="shortcut icon" type="image/png" />');Jmp.App.changeAddress(redirectTo,
!1)}else Jmp.App.Lightbox.hide(),-1!=l.status&&(-2==l.status?Jmp.App.Notifications.display_notification({type:"error",message:"Save failed, not enough space"}).close_notification():-3==l.status?(l=$("#"+h),Jmp.App.Lightbox.show({type:"file_size_error",items:[{name:l.attr("data-name")}],action:"save"})):Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification())})}else Jmp.App.Notifications.display_notification({type:"error",message:"Please select a folder to save file"}).close_notification(),
b.removeAttr("disabled").val("Save").removeClass("disabled");return!1};c.prototype.onSelectedFilesDownload=function(b){b.preventDefault();var h=$(this);$(this).html("Downloading ...").addClass("disabled").addClass("blockUI");b=$(Jmp.Helpers.get_container()+" li .checkbox .checked");if(1>b.length)return $(this).html("Download").removeClass("disabled").removeClass("blockUI"),Jmp.App.Notifications.display_notification({type:"error",message:"Please select atleast 1 file to download"}).close_notification(),
!1;var k={bucket_file_ids:[],size:0};b.each(function(){var m=$(this).attr("data-id");if(Jmp.Helpers.get_item(m).hasClass("folder"))return k.size=0,!1;k.bucket_file_ids.push(m);k.size+=parseInt($(this).attr("data-size"))});if(0==k.size)return $(this).html("Download").removeClass("disabled").removeClass("blockUI"),Jmp.App.Notifications.display_notification({type:"error",message:"Select files only, deselect the folder(s)"}).close_notification(),!1;var l="";1==b.length&&1==k.bucket_file_ids.length?l=
Jmp.Helpers.get_item(k.bucket_file_ids[0]).find(".js-dropdown-menu").find(".download").data("link"):$.ajax({url:WS_PREFIX+"/get_download_link",async:!1,type:"POST",data:Jmp.Helpers.get_secure_params(k),success:function(m){1==m.status&&(l=m.link)}});if(""==l)return Jmp.App.Notifications.display_notification({type:"error",message:"Please select valid file"}).close_notification(),!1;4294967296<=k.size&&("windows"==Jmp.Helpers.os()?Jmp.App.Lightbox.show({type:"download_large_zip",header:"Use 7-Zip to extract large zip files",
body:"You are downloading a large zip file. Windows can only extract zip files up to 5 GB in size. Please use <strong>7-zip</strong> software to extract large zip files.",dl_button_text:"Download 7-zip"},function(){Jmp.App.Lightbox.hide();window.open("http://www.7-zip.org/")}):"mac"==Jmp.Helpers.os()&&Jmp.App.Lightbox.show({type:"download_large_zip",header:"Use The Unarchiver to extract large zip files",body:"You are downloading a large zip file. MacOS can only extract zip files up to a limited size. Please use <strong>The Unarchiver</strong> software to extract large zip files.",
dl_button_text:"Download The Unarchiver"},function(){Jmp.App.Lightbox.hide();window.open("https://theunarchiver.com/")}));0==$("#_dif").length&&$("body").append('<iframe id="_dif" name="_dif" style="display:none"></iframe>');$("#_dif").attr("src",l);setTimeout(function(){h.html("Download").removeClass("disabled").removeClass("blockUI")},1E4);$("#global-actions .cancel").trigger("click")};c.prototype.onFileDownload=function(b){var h=$(this);b.preventDefault();if("true"!=is_valid_owner||Jmp.Helpers.is_storage_left()){if(0==
$("#_dif").length&&$("body").append('<iframe id="_dif" name="_dif" style="display:none"></iframe>'),$(this).is("[data-link]")&&""!=$(this).data("link")){var k=$(this).text().trim();$(this).html("Downloading ...").addClass("disabled").addClass("blockUI");var l=b="";if("Download"==k||"Download File"==k){setTimeout(function(){h.html(k).removeClass("disabled").removeClass("blockUI")},1E4);l=$(this).closest("ul.js-dropdown-menu");var m=l.find(".import");m.length?b="bucket"==$("#"+m.data("id")).data("type")?
"folder":"file":l.find(".hide_save_file_viewer").length?(m=l.find(".hide_save_file_viewer"),b="file"):l.find(".hide_save_folder_view").length&&(m=l.find(".hide_save_folder_view"),b="folder");m.length||(m=$(this).closest("div.actions").find(".import"),m.length||(m=$(this).closest("div.actions").find(".hide_save_folder_view")),b="folder")}else if("Download Files"==k||"Download All"==k)setTimeout(function(){h.html(k).removeClass("disabled").removeClass("blockUI")},1E4),"undefined"!==typeof $(this).data("link")&&
4294967296<=$(".size").data("size")&&("windows"==Jmp.Helpers.os()?Jmp.App.Lightbox.show({type:"download_large_zip",header:"Use 7-Zip to extract large zip files",body:"You are downloading a large zip file. Windows can only extract zip files up to 5 GB in size. Please use <strong>7-zip</strong> software to extract large zip files.",dl_button_text:"Download 7-zip"},function(){Jmp.App.Lightbox.hide();window.open("http://www.7-zip.org/")}):"mac"==Jmp.Helpers.os()&&Jmp.App.Lightbox.show({type:"download_large_zip",
header:"Use The Unarchiver to extract large zip files",body:"You are downloading a large zip file. MacOS can only extract zip files up to a limited size. Please use <strong>The Unarchiver</strong> software to extract large zip files.",dl_button_text:"Download The Unarchiver"},function(){Jmp.App.Lightbox.hide();window.open("https://theunarchiver.com/")})),m=$(this).closest("div.actions").find(".import"),m.length||(m=$(this).closest("div.actions").find(".hide_save_folder_view")),b="folder";m.length&&
(l=m.data("id"),a.Viewer[b+"_downloaded"]&&a.Viewer[b+"_downloaded"]==l||(a.Viewer[b+"_downloaded"]=l,JumpshareAnalytics.TrackBoth(b,l)));$("#_dif").attr("src",$(this).data("link"))}}else Jmp.App.Lightbox.show({type:"no_storage_left_download_disabled"})};c.prototype.disable_links=function(b){Jmp.App.op=b};c.prototype.onReportFile=function(){Jmp.App.Lightbox.hide();var b=Jmp.App.getView().data.id,h=Jmp.App.getView().type,k=$("#viewer_title_text").text();Jmp.App.Lightbox.show({type:"report_file_suspicious"},
function(){var l=$("#report_your_name"),m=$("#report_your_email"),n=$("#report_your_reason");l.removeClass("error");m.removeClass("error");n.removeClass("error");if(""==l.val().trim())return l.addClass("error"),Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your name"}).close_notification(),!1;if(""==m.val().trim())return m.addClass("error"),Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your email"}).close_notification(),!1;if(""!=m.val()&&
!Jmp.Helpers.looksLikeEMail(m.val()))return m.addClass("error"),Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email"}).close_notification(),!1;if(""==n.val().trim())return n.addClass("error"),Jmp.App.Notifications.display_notification({type:"error",message:"Please enter report reason"}).close_notification(),!1;"Viewer"==h&&(Jmp.App.Lightbox.hide(),$.post("/report-file",Jmp.Helpers.get_secure_params({id:b,name:k,your_name:l.val(),your_email:m.val(),your_reason:n.val()}),
function(p){p.status&&Jmp.App.Notifications.display_notification({type:"success",message:"File has been reported"}).close_notification()}))})};c.prototype.updateEmbedCode=function(b){var h=$("input[name='embed_type']:checked").val(),k=$("#txt_embedCode").data("item_id"),l=$("#"+k),m=l.attr("data-dimensions");m="undefined"!=typeof m?m.split("x"):[];2==m.length?(width=m[0],height=m[1]):(width=640,height=400);widthRatio=height/width;if("undefined"!=typeof b)"vid_width"==b.id&&$("#vid_height").val(Math.round(parseInt($(b).val())*
widthRatio)),"vid_height"==b.id&&$("#vid_width").val(Math.round(parseInt($(b).val())/widthRatio));else if(""==$("#vid_width").val()||""==$("#vid_height").val)$("#vid_width").val(640),$("#vid_height").val(Math.round(640*widthRatio));b=$("#hide_video_title").is(":checked")?"hideTitle=true":"";m=$("#disable_embed_download_video").is(":checked")?"disableDownload=true":"";k=BASEURL+"embed/"+k+`${b||m?"?":""}`+b+`${m?"&":""}`+m+(c.prototype.hide_title_on_embed?"?hideTitle=true":"");2==h?(h='<iframe src="EMBED_URL" frameborder="0" width="FRAME_WIDTH" height="FRAME_HEIGHT" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>'.replace("EMBED_URL",
k).replace("FRAME_WIDTH",$(".video_size_embed #vid_width").val()).replace("FRAME_HEIGHT",$(".video_size_embed #vid_height").val()),$(".video_size_embed").show()):(h='<div style="position: relative; padding-bottom: 56.25%; height: 0;"><iframe src="EMBED_URL" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe></div>'.replace("EMBED_URL",k),$(".video_size_embed").hide());$("#txt_embedCode").val(h);
0==$(".emebd-window .actual-media").find("iframe").length&&($(".preview_window .actual-media").html('<iframe src="EMBED_URL" frameborder="0" width="FRAME_WIDTH" height="FRAME_HEIGHT" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>'.replace("EMBED_URL",k+"?preview").replace("FRAME_WIDTH","448").replace("FRAME_HEIGHT","252")),"video"==l.data("type")?(0<l.find(".thumb-footer").find(".icn-locked").length?$(".preview_window .code").find("p").text("Password Protected Video - Watch Video"):
$(".preview_window .code").find("p").text(l.data("name")+" - Watch Video"),$(".preview_window .code").find("img").attr("src",l.find(".thumbnail").find("img").data("video-poster-embed")).attr("src",l.find(".thumbnail").find("img").attr("data-video-poster-embed")).css({"max-width":"400px"})):"image"==l.data("type")&&(0<l.find(".thumb-footer").find(".icn-locked").length?$(".preview_window .code").find("p").text("Password Protected Image - View Image"):$(".preview_window .code").find("p").text(l.data("name")+
" - View Image"),$(".preview_window .code").find("img").attr("src",l.find(".thumbnail").find("img").data("full-image-embed")).attr("src",l.find(".thumbnail").find("img").attr("data-full-image-embed")).css({"max-width":"400px"})))};c.prototype.onCopyThumbnail=function(b){b.preventDefault();var h=$(".preview_window .code"),k=$("#item_id").val();b=document.createElement("a");b.href=SHORT_BASEURL+""+VIEWER_SUBDIR+"/"+k;b.innerHTML=h.html();document.body.appendChild(b);h=document.createRange();h.setStartBefore(b);
h.setEndAfter(b);h.selectNode(b);k=window.getSelection();k.removeAllRanges();k.addRange(h);document.execCommand("Copy");"undefined"!=typeof k.removeRange&&k.removeRange(h);document.body.removeChild(b);Jmp.App.Notifications.display_notification({type:"success",message:"Thumbnail copied to clipboard"}).close_notification()};c.prototype.onCopyThumbnailCode=function(b){b.preventDefault();var h=$(".preview_window .code"),k=$("#item_id").val();b=document.createElement("a");b.href=SHORT_BASEURL+""+VIEWER_SUBDIR+
"/"+k;b.innerHTML=h.html();h=document.createElement("div");h.appendChild(b);b=document.createElement("textarea");b.value=h.innerHTML;b.style.padding=0;b.style.border="none";b.style.outline="none";b.style.boxShadow="none";document.body.appendChild(b);b.focus();b.select();document.execCommand("Copy");document.body.removeChild(b);Jmp.App.Notifications.display_notification({type:"success",message:"Thumbnail code copied to clipboard"}).close_notification()};a.Viewer=new c})(Jmp.Handler);
$(function(){$("body").keydown(function(a){if(0==a.shiftKey&&13==a.which&&$("#modal .modal-dialog").length&&0==$("#feed").length&&0==$("#cancel_plan_reason").length&&0==$("#delete_account_reason").length){var c=$("#modal .modal-dialog"),b=c.find(".btn-submit.btn-blue");if(c.hasClass("tag-as"))b=$("#new_tag_bucket").is(":focus")?c.find(".create_tag_bucket"):c.find(".btn-submit.btn-blue");else if(c.hasClass("modal-email-share")){if("email_to"==$(a.target).attr("id")||"email_message"==$(a.target).attr("id"))return;
b=c.find(".modal-email .btn-submit.btn-blue")}else if(c.hasClass("modal-twitter-share"))b=c.find(".modal-twitter .btn-submit.btn-blue");else if(c.hasClass("modal-facebook-share"))b=c.find(".modal-facebook .btn-submit.btn-blue");else if(c.hasClass("modal-note"))return;b.trigger("click")}});$("#invite_email_analytics, #invite_email_referral").live("click",function(){var a=$(this).data("code"),c=$(this).data("popup"),b='<span class="icn-secure" style="margin-right: 10px;"></span>Who viewed your file',
h="Invite 3 people to Jumpshare and instantly unlock the ability to see who viewed and downloaded your file.";"undefined"!=typeof c&&"common"==c&&(b="Invite your friends to Jumpshare",h="Jumpshare is better when your friends are using it too. Communicate visually and be more productive, together.");Jmp.App.Lightbox.show({type:"invite_through_email",code:a,header:b,description:h});$(".modal-dialog").addClass("invite_eml_modal")});$("#global-actions .download_selected:not(.disabled)").live("click",
Jmp.Handler.Viewer.onSelectedFilesDownload);$(".download").live("click",Jmp.Handler.Viewer.onFileDownload);$("#generate_adv_copylink").live("click",Jmp.Handler.Viewer.GenerateAdvCopyLink);$("li.file .js-dropdown-menu .import:not(.oi), #viewer_import").live("click",Jmp.Handler.Viewer.onFileImport);$("#import_files_form").live("submit",Jmp.Handler.Viewer.onSubmitImportFilesForm);$("span.cancel").live("click",function(a){a=$(this);"email_date"==a.parent().children("#email_date").attr("id")?(a.parent().children("tester").remove(),
a.parent().children("#email_date").val("Schedule").blur().autoGrowInput({comfortZone:8,maxWidth:200}),$("#popup_email_form #send_mail").val("Send")):"expire_date"==a.parent().children("#expire_date").attr("id")&&(a.parent().children("#expire_date").val("Date/Time").blur().datepicker("destroy"),Jmp.Helpers.showCalendar(a.parent().children("#expire_date")));a.removeClass("cancel");return!1});$("#report_file").live("click",Jmp.Handler.Viewer.onReportFile);$("#popup_email_form ~ div.modal-footer > button.send_mail").live("click",
Jmp.Handler.Viewer.onSubmitEmailForm);$("#verify_email_code").live("click",Jmp.Handler.Viewer.onSubmitEmailCodeVerificationForm);$("#go_back_share_modal").live("click",function(a){a.preventDefault();$(".modal-share").removeClass("verification_code_modal");$("#verification_code_container").addClass("hide");$("#modal").find(".modal-title").text("Share '"+$("#modal").find(".item_name").text()+"'")});$(".modal-frm-collaborate button.invite_to_collaborate").live("click",Jmp.Handler.Viewer.onSubmitInviteToCollaborateForm);
$("#viewer_share, #global-actions .email, .btn-cog-wheel .email").live("click",Jmp.Handler.Viewer.onShowEmailForm);$(".invite_member_list .remove_user").live("click",Jmp.Handler.Viewer.onCollabUserRemove);$(".modal-share #share_modal_tab").live("click",function(a){$("#modal").find(".modal-title").text("Share '"+$("#modal").find(".item_name").text()+"'");$("#CopyAdvlinkDiv").remove();$(".modal-share-icon").removeClass("active");$(this).addClass("active");$("#modal .modal-dialog").removeClass("modal-aclink-share modal-embed-media modal-collaborate-share modal-CPS-share").addClass("modal-email-share");
""==Jmp.Handler.Viewer.email_schedule_date&&(Jmp.Handler.Viewer.email_schedule_date="Schedule");$("#modal .schedule_calendar").html("");$("#popup_email_form .schedule_calendar").html('<span class="icn-schedule-calendar"></span><input type="text" class="distxts" name="email_date" id="email_date" placeholder="" value="'+Jmp.Handler.Viewer.email_schedule_date+'" style="width:66px;" readonly="" /><span class="caret"></span>');$(".schedule_dropdown_message").addClass("hide");Jmp.Handler.Viewer.setScheduleCalendar();
a.preventDefault()});$("#embed_copy_thumb").live("click",Jmp.Handler.Viewer.onCopyThumbnail);$("#embed_copy_thumb_code").live("click",Jmp.Handler.Viewer.onCopyThumbnailCode);$(".modal-share #advance_modal_tab").live("click",function(a){a.preventDefault();$("#modal .modal-dialog").removeClass("modal-email-share modal-embed-media modal-collaborate-share modal-CPS-share").addClass("modal-aclink-share");$(".modal-share-icon").removeClass("active");$(this).addClass("active");Jmp.Handler.Viewer.EnableAdvanceCopyLink()});
$(".modal-share #collaborate_tab").live("click",function(a){a.preventDefault();$("#modal .modal-dialog").removeClass("modal-email-share modal-embed-media modal-aclink-share modal-CPS-share").addClass("modal-collaborate-share");$(".modal-share-icon").removeClass("active");$(this).addClass("active")});$(".modal-share #CPS_modal_tab").live("click",function(a){a.preventDefault();$("#modal .modal-dialog").removeClass("modal-email-share modal-embed-media modal-aclink-share modal-collaborate-share").addClass("modal-CPS-share");
$(".modal-share-icon").removeClass("active");$(this).addClass("active")});$(".modal-share #embed_modal_tab").live("click",function(a){a.preventDefault();$("#modal .modal-dialog").removeClass("modal-email-share modal-aclink-share modal-collaborate-share modal-CPS-share").addClass("modal-embed-media");$(".modal-share-icon").removeClass("active");$(this).addClass("active");Jmp.Handler.Viewer.updateEmbedCode()});$(".embed-type-optoins input[name='embed_type']").live("change",function(a){a.preventDefault();
2==$(this).val()?$(".video_size_embed input").removeAttr("disabled"):$(".video_size_embed input").attr("disabled","disbaled");Jmp.Handler.Viewer.updateEmbedCode()});$(".video_size_embed input").live("input",function(){Jmp.Handler.Viewer.updateEmbedCode(this)});$(document).live("click",function(a){$(a.target).parent().hasClass("popover")||("email_share_to"===a.target.id?$("#email_from_popover").addClass("hide"):"email_share_from"===a.target.id?$("#email_to_popover").addClass("hide"):($("#email_from_popover").addClass("hide"),
$("#email_to_popover").addClass("hide"),$("#leave_comment_popover").addClass("hide")))});$("#email_share_to").live("focusin",function(){$("#email_to_popover").removeClass("hide");$("#email_from_popover").addClass("hide")});$("#email_share_from").live("focusin",function(){$("#email_from_popover").removeClass("hide");$("#email_to_popover").addClass("hide")});$("#email_message").live("focusin",function(){$("#email_from_popover").addClass("hide");$("#email_to_popover").addClass("hide")});$(".embed-type-optoins input[name='hide_video_title']").live("change",
function(a){a.preventDefault();$(this).prop("checked")?Viewer.prototype.hide_title_on_embed=!0:Viewer.prototype.hide_title_on_embed=!1;$(".actual-media").find("iframe").remove();Jmp.Handler.Viewer.updateEmbedCode()});$(".btn-join-js").live("click",function(a){a.preventDefault();setTimeout(function(){$.post("/auth/lr",Jmp.Helpers.get_secure_params({item_type:"file",type:"join"}),function(c){Jmp.App.Lightbox.show({type:"signup_form",item_name:"",login_form:c.login_form,the_item_type:"file",register_form:c.register_form});
$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog signupPupupWithLogin");$("#modal div.leftImgContainer").addClass("signupPupupWithLogin");$("#modal").addClass("modal-fullscreen");$("#the_sign_up").find("#firstName").focus().select();showLastUsedLabel(Jmp.Helpers.get_cookie("lastlogin"))})},50)})});$(function(){});
Jmp.Account={HasAccountInfoChanged:!1,avatar:{avatar:{name:"#avatar",control:void 0,parent:void 0,bootstrap:function(){this.control=$(this.name)},update:function(a){if(""==$.trim(a))return!1;this.control.html(a)}},change_avatar:{name:"#change_avatar",control:void 0,parent:void 0,_bind_event:function(){this.control.bind("click",$.proxy(this._onclick,this))},_onclick:function(){this.parent.file_control.control.trigger("click")},bootstrap:function(){this.control=$(this.name);this._bind_event()}},clear_avatar:{name:"#clear_avatar",
control:void 0,parent:void 0,bootstrap:function(){this.control=$(this.name);this._bind_event()},_bind_event:function(){this.control.bind("click",$.proxy(this._onclick,this))},_onclick:function(){var a=this;Jmp.App.Lightbox.show({type:"remove_photo",header:"Remove Photo?",body:"Are you sure you want to remove your photo?"},function(){$(this).html("Removing ...").addClass("disabled");$("#lightbox").find(".cancel").trigger("click");var c=$("#choose_avatar");c.wrap("<form>").parent("form").trigger("reset");
c.unwrap();a._on_confirm()});return!1},_on_confirm:function(){$.get(WS_PREFIX+"/accounts/clear_avatar",$.proxy(this._on_success,this))},_on_success:function(a){a.status&&this.parent.avatar.update(a.fh)}},file_control:{name:"#choose_avatar",control:void 0,parent:void 0,_bind_event:function(){this.control.bind("change",$.proxy(this._onchange,this))},_onchange:function(){this.parent.form.control.trigger("submit");$("#avatar").addClass("loading")},bootstrap:function(){this.control=$(this.name);this._bind_event()}},
form:{controls:void 0,name:"#choose_avatar_form",message_placeholder:{name:"#profile_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(a){this.control=$(this.name);this.controls=a;this.controls.change_avatar.bootstrap();this.controls.file_control.bootstrap();this.controls.avatar.bootstrap();this.controls.clear_avatar.bootstrap();this._bind_event()},_bind_event:function(){this.control.ajaxForm($.proxy(this._on_success,this))},_on_success:function(a){"1"==a.status?this.controls.avatar.update(a.fh):
Jmp.App.Notifications.display_notification({type:"error",message:a.message}).close_notification();$("#avatar").removeClass("loading")}},bootstrap:function(){this.form.bootstrap({change_avatar:this.change_avatar,file_control:this.file_control,avatar:this.avatar,clear_avatar:this.clear_avatar});this.change_avatar.parent=this.file_control.parent=this.clear_avatar.parent=this}},account:{username:{name:"username",selector:"#",error_placeholder:{name:"#username_error",set_error_message:function(a){""!=
a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name},get_value:function(){return Jmp.Helpers.strip_tags($(this.get_name()).val())},set_new_name_at_front_end:function(a){a=Jmp.Helpers.encode_string(a);$("#username_front").text(a)}},email:{name:"email",selector:"#",error_placeholder:{name:"#email_error",
set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},get_name:function(){return this.selector+this.name},get_value:function(){return Jmp.Helpers.strip_tags($(this.get_name()).val())}},confirm_email:{name:"confirm_email",selector:"#",error_placeholder:{name:"#confirm_email_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},get_name:function(){return this.selector+
this.name},get_value:function(){return Jmp.Helpers.strip_tags($(this.get_name()).val())}},account_password:{name:"account_password",selector:"#",error_placeholder:{name:"#account_password_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},get_name:function(){return this.selector+this.name},get_value:function(){return Jmp.Helpers.strip_tags($(this.get_name()).val())}},old_password:{name:"old_password",selector:"#",error_placeholder:{name:"#old_password_error",
set_error_message:function(a){$(this.name).html(a)}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name}},new_password:{name:"new_password",selector:"#",error_placeholder:{name:"#new_password_error",set_error_message:function(a){$(this.name).html(a)}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),
a)},get_name:function(){return this.selector+this.name}},confirm_new_password:{name:"confirm_new_password",selector:"#",error_placeholder:{name:"#confirm_new_password_error",set_error_message:function(a){$(this.name).html(a)}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name}},cnew_password:{name:"cnew_password",selector:"#",error_placeholder:{name:"#cnew_password_error",
set_error_message:function(a){$(this.name).html(a)}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name}},confirm_cnew_password:{name:"confirm_cnew_password",selector:"#",error_placeholder:{name:"#confirm_cnew_password_error",set_error_message:function(a){$(this.name).html(a)}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):
Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name}},form1:{name:"#form_email",submit_button:"#update_email",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==$("#form_email").find("#email").val())return Jmp.App.Notifications.display_notification({type:"error",
message:"Please enter new email address"}).close_notification(),!1;if(""==$("#form_email").find("#confirm-email").val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please confirm new email address"}).close_notification(),!1;if(""!=$("#form_email").find("#email").val()&&$("#form_email").find("#email").val()!=$("#form_email").find("#confirm_email").val())return Jmp.App.Notifications.display_notification({type:"error",message:"New email and confirmed email should match"}).close_notification(),
!1;if(""==$("#form_email").find("#account_password").val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter account password"}).close_notification(),!1;if($("#g_login_button").parent().hasClass("hide"))return Jmp.App.Notifications.display_notification({type:"error",message:"Disconnect Google login to change your email address"}).close_notification(),!1;$("#g_revoke_button").parent().hasClass("hide")&&$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,
this));return!1},_on_success:function(a){1==a.status?(this._clear_error_messages(),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),this.populate_old_values(),$(".close_inline_modal").click()):("undefined"!=typeof a.response.account_password&&""!=a.response.account_password&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.account_password}).close_notification(),ViewerPanel.is_mobile&&$("#account_password").addClass("has-error")),
"undefined"!=typeof a.response.email&&""!=a.response.email&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.email}).close_notification(),ViewerPanel.is_mobile&&$("#email").addClass("has-error")))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},
message_placeholder:{name:"#form_email",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.email=Jmp.Helpers.strip_tags($("#email").val());$("#form_email").find("#email").val("");$("#form_email").find("#confirm-email").val("");$("#form_email").find("#account_password").val("")},verify_if_changes_applied:function(){return!0}},form2:{name:"#form_username",submit_button:"#update_username",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=
$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==Jmp.Helpers.strip_tags($("#firstName").val()).trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid First name"}).close_notification(),!1;if(""==Jmp.Helpers.strip_tags($("#lastName").val()).trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid Last name"}).close_notification(),
!1;$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){1==a.status?(this._clear_error_messages(),this.controls.username.set_new_name_at_front_end(a.first_name+" "+a.last_name),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),this.populate_old_values(),$("#avatar figure").attr("data-initials",a.first_name[0].toUpperCase()),$(".dropdown-toggle figure").attr("data-initials",
a.first_name[0].toUpperCase()),$("#comment_new figure").attr("data-initials",a.first_name[0].toUpperCase()),$(".reply-card figure").attr("data-initials",a.first_name[0].toUpperCase()),$(".close_inline_modal").click()):"undefined"!=typeof a.response.first_name&&""!=a.response.first_name?(Jmp.App.Notifications.display_notification({type:"error",message:a.response.first_name}).close_notification(),ViewerPanel.is_mobile&&$("#firstName").addClass("has-error")):"undefined"!=typeof a.response.last_name&&
""!=a.response.last_name&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.last_name}).close_notification(),ViewerPanel.is_mobile&&$("#lastName").addClass("has-error"))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},
message_placeholder:{name:"#form_username",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.username=Jmp.Helpers.strip_tags($("#firstName").val())+Jmp.Helpers.strip_tags($("#lastName").val())},verify_if_changes_applied:function(){var a=!0,c=Jmp.Helpers.strip_tags($("#firstName").val())+Jmp.Helpers.strip_tags($("#lastName").val());this.old_values.username!=c&&(a=!1);return a}},form3:{name:"#form_password",submit_button:"#update_password",controls:{},form:void 0,
bootstrap:function(a){this.form=$(this.name);this.controls=a;this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){var a=this._prepare_params();"undefined"!=typeof a.old_password&&""!=a.old_password&&"undefined"!=typeof a.new_password&&""!=a.new_password&&"undefined"!=typeof a.confirm_new_password&&""!=a.confirm_new_password?(Jmp.Account.HasAccountInfoChanged=!0,$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,
this))):Jmp.App.Notifications.display_notification({type:"error",message:"Required fields are missing"}).close_notification();return!1},_on_success:function(a){1==a.status?(this._clear_error_messages(),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),$("#update_password").parents(".show-on-demand").addClass("hide"),$("#update_password").parents("#form_password").find("div.show-always").removeClass("hide"),$("#old_password, #new_password, #confirm_new_password").val(""),
$(".show-password").prop("checked",!1),$(".password_policy_wrapper").remove(),$(".close_inline_modal").click()):""!=a.response.old_password?(Jmp.App.Notifications.display_notification({type:"error",message:a.response.old_password}).close_notification(),ViewerPanel.is_mobile&&$("#old_password").addClass("has-error")):""!=a.response.new_password?(Jmp.App.Notifications.display_notification({type:"error",message:a.response.new_password}).close_notification(),ViewerPanel.is_mobile&&$("#new_password").addClass("has-error")):
""!=a.response.confirm_new_password&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.confirm_new_password}).close_notification(),ViewerPanel.is_mobile&&$("#confirm_new_password").addClass("has-error"))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},
message_placeholder:{name:"#form_password",set_message:function(a){$(this.name).html(a)}},verify_if_changes_applied:function(){var a=!0;if($("#form_password").find(".show-on-demand").hasClass("hide"))return a;var c=Jmp.Helpers.strip_tags($("#old_password").val()),b=Jmp.Helpers.strip_tags($("#new_password").val()),h=Jmp.Helpers.strip_tags($("#confirm_new_password").val());if(""!=c||""!=b||""!=h)a=!1;return a}},form4:{name:"#form_create_password",submit_button:"#create_password",controls:{},form:void 0,
bootstrap:function(a){this.form=$(this.name);this.controls=a;this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){var a=this._prepare_params();"undefined"!=typeof a.cnew_password&&""!=a.cnew_password&&"undefined"!=typeof a.confirm_cnew_password&&""!=a.confirm_cnew_password?(Jmp.Account.HasAccountInfoChanged=!0,$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this))):Jmp.App.Notifications.display_notification({type:"error",
message:"Required fields are missing"}).close_notification();return!1},_on_success:function(a){1==a.status?(this._clear_error_messages(),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),$("#form_create_password").parent().remove(),$("#form_password").parent().removeClass("hide")):""!=a.response.cnew_password?(Jmp.App.Notifications.display_notification({type:"error",message:a.response.cnew_password}).close_notification(),ViewerPanel.is_mobile&&
$("#cnew_password").addClass("has-error")):""!=a.response.confirm_cnew_password&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.confirm_cnew_password}).close_notification(),ViewerPanel.is_mobile&&$("#confirm_cnew_password").addClass("has-error"))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},
_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_create_password",set_message:function(a){$(this.name).html(a)}},verify_if_changes_applied:function(){var a=!0;if($("#form_create_password").find(".show-on-demand").hasClass("hide"))return a;var c=Jmp.Helpers.strip_tags($("#cnew_password").val()),b=Jmp.Helpers.strip_tags($("#confirm_cnew_password").val());if(""!=c||""!=b)a=!1;return a}},bootstrap:function(){this.form1.bootstrap({email:this.email,
confirm_email:this.confirm_email,account_password:this.account_password});this.form2.bootstrap({username:this.username});this.form3.bootstrap({old_password:this.old_password,new_password:this.new_password,confirm_new_password:this.confirm_new_password});this.form4.bootstrap({cnew_password:this.cnew_password,confirm_cnew_password:this.confirm_cnew_password})},verify_if_changes_applied:function(){return this.form1.verify_if_changes_applied()&&this.form2.verify_if_changes_applied()&&this.form3.verify_if_changes_applied()&&
this.form4.verify_if_changes_applied()}},notificaitons:{form:{name:"#notification_form",submit_button:"#update_notification_form",form:void 0,old_values:{},message_placeholder:{name:"#notification_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){this.message_placeholder.set_message("");$.post(this.form.attr("action"),
this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification();this.populate_old_values()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){for(var a="fsm ss vbr dbr oos jn cf mc fri vbrl dbrl".split(" "),c=a.length,b=0;b<c;b++){var h=
a[b];document.getElementById("notification["+h+"]")&&(this.old_values[h]=document.getElementById("notification["+h+"]").checked)}},verify_if_changes_applied:function(){for(var a=!0,c="fsm ss vbr dbr oos jn cf mc fri vbrl dbrl".split(" "),b=c.length,h=0;h<b;h++){var k=c[h];if(this.old_values[k]!=document.getElementById("notification["+k+"]").checked){a=!1;break}}return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},
p_notificaitons:{form:{name:"#p_notification_form",submit_button:"#update_push_notification_form",form:void 0,old_values:{},message_placeholder:{name:"#p_notification_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){this.message_placeholder.set_message("");$.post(this.form.attr("action"),this._prepare_params(),
$.proxy(this._on_success,this));return!1},_on_success:function(a){Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification();this.populate_old_values()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){for(var a="pfsm pvbr pdbr pcf pmc pfri pvbrl pdbrl".split(" "),c=a.length,b=0;b<c;b++){var h=a[b];document.getElementById("p_notification["+
h+"]")&&(this.old_values[h]=document.getElementById("p_notification["+h+"]").checked)}},verify_if_changes_applied:function(){for(var a=!0,c="pfsm pvbr pdbr pcf pmc pfri pvbrl pdbrl".split(" "),b=c.length,h=0;h<b;h++){var k=c[h];if(this.old_values[k]!=document.getElementById("p_notification["+k+"]").checked){a=!1;break}}return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},urlshortner:{form:{name:"#urlshortner_form",
submit_button:"#update_urlshortner_form",form:void 0,old_values:{},message_placeholder:{name:"#urlshortner_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){this.message_placeholder.set_message("");$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},
_on_success:function(a){SHORT_BASEURL=a.sUrl;Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification();$("#remove_all_shorts",this.form).removeAttr("checked");$("#urlshortner_form_message").addClass("hide");this.populate_old_values()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values={};$("#short_url").length&&
(this.old_values.urlshortner=$("#short_url").get(0).checked?"short_url":"long_url","long_url"==this.old_values.urlshortner&&(this.old_values.remove_all_shorts=$("#remove_all_shorts").get(0).checked))},verify_if_changes_applied:function(){var a=!0,c=$("#short_url").get(0).checked?"short_url":"long_url";this.old_values.urlshortner!=c?a=!1:"long_url"==this.old_values.urlshortner&&this.old_values.remove_all_shorts!=$("#remove_all_shorts").get(0).checked&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},
verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},timezone:{form:{name:"#timezone_form",submit_button:"#update_timezone_form",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==$("#select_city").val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please select your city to set timezone"}).close_notification(),
!1;$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status?(Jmp.App.Notifications.display_notification({type:"success",message:"Timezone updated"}).close_notification(),this.populate_old_values()):Jmp.App.Notifications.display_notification({type:"error",message:"Please select your city to set timezone"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},
populate_old_values:function(){this.old_values.timezone=Jmp.Helpers.strip_tags($("#select_city").val())},verify_if_changes_applied:function(){var a=!0,c=Jmp.Helpers.strip_tags($("#select_city").val());this.old_values.timezone!=c&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},inbox:{form:{name:"#inbox_form",submit_button:"#update_inbox_form",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);
this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==$("#inbox_name").val()&&""==$.trim($(".inbox-name").find("strong").text()))return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your inbox name to set inbox URL"}).close_notification(),!1;$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status?
(a.inbox_unset?($(".inbox-info").addClass("hide"),$("#edit_inbox_form").addClass("hide"),$("#inbox_field").addClass("hide"),$(this.submit_button).text("Done"),$("#hide_inbox_form").addClass("hide"),$(".edit-inbox").removeClass("edit-inbox").addClass("setup-inbox"),$(".inbox-name").find("strong").text("")):($("#inbox_field").addClass("hide"),$("#inbox_field .notes").text("Note: Changing your inbox name will delete your existing Inbox link."),$(".inbox-info").removeClass("hide"),$(this.submit_button).addClass("hide"),
$("#edit_inbox_form").removeClass("hide"),$("#hide_inbox_form").addClass("hide"),$(".inbox-name > strong").text($("#inbox_name").val()),$(".inbox-link > a").attr("href",BASEURL_WS+"i/"+$("#inbox_name").val().toLowerCase()).text(BASEURL_WS+"i/"+$("#inbox_name").val().toLowerCase())),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),this.populate_old_values()):Jmp.App.Notifications.display_notification({type:"error",message:a.response.message}).close_notification()},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values.inbox=Jmp.Helpers.strip_tags($("#inbox_name").val())},verify_if_changes_applied:function(){var a=!0;1<PLANID&&this.old_values.inbox!=$("#inbox_name").val()&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},viewer:{form:{name:"#viewer_form",
submit_button:"#update_viewer_theme",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&(Jmp.App.Notifications.display_notification({type:"success",message:"Viewer settings updated"}).close_notification(),
this.populate_old_values())},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){var a=$(this.name).serializeArray();a.length&&(this.old_values.viewer=a[0].value,$("#viewer_wrapper").removeClass("white").removeClass("dark"),$("#viewer_wrapper").addClass(this.old_values.viewer),1<PLANID&&("undefined"!==typeof $("#hide_save_file_viewer").get(0)&&(this.old_values.hide_save_file_viewer=
$("#hide_save_file_viewer").get(0).checked),"undefined"!==typeof $("#hide_sidebar_default").get(0)&&(this.old_values.hide_sidebar_default=$("#hide_sidebar_default").get(0).checked)))},verify_if_changes_applied:function(){var a=!0,c=$(this.name).serializeArray();this.old_values.viewer!=c[0].value?a=!1:1<PLANID&&this.old_values.hide_save_file_viewer!=$("#hide_save_file_viewer").get(0).checked?a=!1:1<PLANID&&this.old_values.hide_sidebar_default!=$("#hide_sidebar_default").get(0).checked&&(a=!1);return a}},
bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},auto_captions:{form:{name:"#auto_caption_form",submit_button:"#update_auto_caption",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},
_on_success:function(a){a.status&&Jmp.App.Notifications.display_notification({type:"success",message:"Automatic Captioning settings updated"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},
auto_title:{form:{name:"#auto_title_form",submit_button:"#update_auto_title",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&(a=$("input[name='file_title']:checked").val(),$("#video_editing_panel").attr("data-auto-title",
"enable"==a?"1":"0"),Jmp.App.Notifications.display_notification({type:"success",message:"Automatic Title settings updated"}).close_notification())},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},auto_chapters:{form:{name:"#auto_chapter_form",
submit_button:"#update_auto_chapter",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&(a=$("input[name='chapters']:checked").val(),$("#video_editing_panel").attr("data-auto-chapters","enable"==a?"1":"0"),Jmp.App.Notifications.display_notification({type:"success",
message:"Automatic Chapters settings updated"}).close_notification())},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},auto_summary:{form:{name:"#auto_summary_form",submit_button:"#update_auto_summary",form:void 0,
old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&(a=$("input[name='summary']:checked").val(),$("#video_editing_panel").attr("data-auto-summary","enable"==a?"1":"0"),Jmp.App.Notifications.display_notification({type:"success",message:"Automatic Summary settings updated"}).close_notification())},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},player_color:{form:{name:"#player_color_form",submit_button:"#update_player_color",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},
_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&($("#video_editing_panel").attr("data-player-color",$("#player_color").val()),$("#video_editing_panel").attr("data-player-color-rgba",$("#player_color_rgba").val()),Jmp.App.Notifications.display_notification({type:"success",message:"Player color settings updated"}).close_notification())},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},custom_captions:{form:{name:"#custom_captions_form",submit_button:"#update_custom_captions",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this._bind_event()},
_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&($("#video_editing_panel").attr("data-caption-style",$("#select_style_value").val()),$("#video_editing_panel").attr("data-caption-text-color",$("#captions_text_color").val()),$("#video_editing_panel").attr("data-caption-text-outline-color",$("#text_outline_color_rgba").val()),
$("#video_editing_panel").attr("data-caption-background-color",$("#captions_background_color_rgba").val()),$("#video_editing_panel").attr("data-caption-length",$("#select_length_value").val()),$("#video_editing_panel").attr("data-caption-font-size",$("#select_caption_style_value").val()),$("#video_editing_panel").attr("data-caption-font-style",$("#select_font_caption_style_value").val()),Jmp.App.Notifications.display_notification({type:"success",message:"Custom Captions setting updated"}).close_notification())},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){},verify_if_changes_applied:function(){}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},files_view:{form:{name:"#files_view_form",submit_button:"#update_files_view",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this.populate_old_values();
this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){a.status&&(Jmp.App.Notifications.display_notification({type:"success",message:"Files view updated"}).close_notification(),this.populate_old_values())},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},
populate_old_values:function(){var a=$(this.name).serializeArray();a.length&&(this.old_values.files_view=a[0].value)},verify_if_changes_applied:function(){var a=!0,c=$(this.name).serializeArray();this.old_values.files_view!=c[0].value&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},custom_domain:{form:{name:"#custom_domain_form",submit_button:"#update_custom_domain_form, #update_custom_domain_ssl_form",
remove_button:"#remove_custom_domain_form",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this));$(this.remove_button).bind("click",$.proxy(this._onclick_remove,this))},_onclick:function(){"remove_custom_domain_form"==$(this.submit_button).attr("id")&&$("#cd").val("");Jmp.Helpers.strip_tags($("#cd").val());$.post(this.form.attr("action"),this._prepare_params(),
$.proxy(this._on_success,this))},_onclick_remove:function(){$("#cd").val("");$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this))},_on_success:function(a){var c=Jmp.Helpers.strip_tags($("#cd").val());1==a.status?(Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),this.populate_old_values(),this.form.find(".input_group").addClass("hide"),this.form.find(".dns_status.pending").removeClass("hide"),this.form.find(".dns_status.approved").addClass("hide"),
this.form.find("#update_custom_domain_form").addClass("hide"),this.form.find("#update_custom_domain_ssl_form").removeClass("hide"),this.form.find("#remove_custom_domain_form").removeClass("hide"),this.form.find("h4").text(c),this.form.find(".dns_status.pending").find(".dns_records p.type").text("CNAME"),this.form.find(".dns_status.pending").find(".dns_records p.host").text(a.response.subdomain)):2==a.status?($("#cd").val(""),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),
this.form.find(".input_group").removeClass("hide"),this.form.find(".dns_status.pending").addClass("hide"),this.form.find(".dns_status.approved").addClass("hide"),this.form.find("#update_custom_domain_form").removeClass("hide"),this.form.find("#update_custom_domain_ssl_form").addClass("hide"),this.form.find("#remove_custom_domain_form").addClass("hide")):3==a.status?(this.populate_old_values(),Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification(),
this.form.find(".input_group").addClass("hide"),this.form.find(".dns_status.pending").addClass("hide"),this.form.find(".dns_status.approved").removeClass("hide"),this.form.find("#update_custom_domain_form").addClass("hide"),this.form.find("#update_custom_domain_ssl_form").addClass("hide"),this.form.find("#remove_custom_domain_form").removeClass("hide"),this.form.find("h4").text(c),this.form.find(".dns_status.pending").find(".dns_records p.type").text("CNAME"),this.form.find(".dns_status.pending").find(".dns_records p.host").text(a.response.subdomain)):
Jmp.App.Notifications.display_notification({type:"error",message:a.response.message}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values.custom_domain=Jmp.Helpers.strip_tags($("#cd").val())},verify_if_changes_applied:function(){var a=!0;1<PLANID&&this.old_values.custom_domain!=$("#cd").val()&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},
verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},domain:{form:{name:"#domain_form",submit_button:"#update_domain_form",form:void 0,old_values:[],message_placeholder:{name:"#domain_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){this.message_placeholder.set_message("");
var a=Jmp.Helpers.strip_tags($("#cdhp").val());""!=a&&-1==a.search("http://")&&-1==a.search("https://")&&$("#cdhp").val("http://"+a);$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification();this.populate_old_values();var c=Jmp.Helpers.strip_tags($("#cdhp").val()),b=Jmp.Helpers.strip_tags($("#cd").val());
""!=c&&-1<c.search("http://")&&(c=c.replace("http://",""));""!=c&&-1<c.search("https://")&&(c=c.replace("https://",""));var h=c.split("/");h=h[0].split(".");2<=h.length&&(c=h[h.length-2]+"."+h[h.length-1]);""==b?($("#redirect_url_exp").show().text("."+c),b=$("#custom_domain_form"),""!=c?($("#use_anotherdomain").show(),$("#use_subdomain").hide(),b.find("span.js-csd-tip").text("Tip: Please enter a subdomain of "+c+" which you would like to use to share your files, e.g, cloud."+c+", files."+c+", etc."),
b.find("div.form-group").removeClass("form-ad"),b.find("div.form-group").addClass("form-sd"),b.find("#cd").attr("placeholder","files, cloud, etc")):($("#use_anotherdomain").hide(),$("#use_subdomain").hide(),$("#redirect_url_exp").text(""),b.find("span.js-csd-tip").text("This domain name will be used as a personalized URL for all the links you share."),b.find("div.form-group").removeClass("form-sd"),b.find("div.form-group").addClass("form-ad"),b.find("#cd").attr("placeholder","example.com or cloud.example.com"))):
(""!=c?($("#use_subdomain").show(),$("#use_anotherdomain").hide(),$("#redirect_url_exp").text("."+c)):($("#use_anotherdomain").hide(),$("#use_subdomain").hide()),$("#custom_domain_form").find("span.js-csd-tip").text("This domain name will be used as a personalized URL for all the links you share."));a.show_custom_logo_popup&&($("#modal").html(a.custom_logo_popup_html),$("#lightbox").removeClass("hide"))}else Jmp.App.Notifications.display_notification({type:"error",message:a.response.message}).close_notification()},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values.domain=Jmp.Helpers.strip_tags($("#cdhp").val())},verify_if_changes_applied:function(){var a=!0;1<PLANID&&this.old_values.domain!=$("#cdhp").val()&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap();this.custom_brand_image.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()},
custom_brand_image:{custom_brand_image:{name:".custom_brand_image",control:void 0,parent:void 0,bootstrap:function(){this.control=$(this.name)},update:function(a,c){var b=a.thumb_url+"?"+(new Date).getTime();this._update(b,c);this.current_control.removeClass("default-logo-dimensions").addClass("custom-logo-dimensions");this._set_dimensions(a.width,a.height);"folder"==c?this.current_control.removeClass("logo"):"black-viewer"==c?this.current_control.removeClass("icn-logo-viewer"):"white-viewer"==c?
this.current_control.removeClass("icn-logo-white-viewer"):"favicon"==c?this.current_control.removeClass("logo-favicon"):"workspace_logo"==c&&($(".workspace_dropdown.main .avtar img, .workspace_act_dropdown li.active .avtar img").attr("src",b).removeClass("hide"),$(".workspace_dropdown.main .avtar span, .workspace_act_dropdown li.active .avtar span").attr("src",b).addClass("hide"))},update_to_default:function(a,c){this._update(a,c);this.current_control.removeClass("custom-logo-dimensions").addClass("default-logo-dimensions");
"folder"==c?this.current_control.parent().append('<div style="background-color: #fff; position: absoluate; z-index: 10; padding: 5px; display: flex; align-items: center; justify-content: center;"><svg width="160" height="28" viewBox="0 0 181 33" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M43.2718 7.01139L42.3683 5.81569C42.2501 5.65891 42.086 5.54373 41.8993 5.48649C41.4637 5.35405 40.3004 5.18048 39.711 5.15108C39.6073 5.14465 39.5067 5.11342 39.4173 5.05996C39.3279 5.0065 39.2525 4.93235 39.1971 4.84362C38.6341 3.9677 36.6523 1.88172 36.1906 1.97156C35.6693 2.07305 35.8544 2.33491 35.9505 2.8404C36.2259 4.2935 37.4874 6.21241 37.4874 6.21241C37.4874 6.21241 36.6716 8.65553 35.3031 8.92186C32.9224 9.38543 30.6818 4.77716 24.1645 4.73214C7.66044 4.73214 10.1527 27.856 0.805276 27.856C0.0912487 27.856 0.00344809 28.25 0.00344809 28.3329C0.00344809 28.5012 -0.0804139 28.8931 1.2827 28.8931C11.7013 28.8931 13.1969 15.4886 16.0829 15.4886C17.1395 15.4886 17.0448 18.6853 17.0448 19.7321C17.0448 25.3243 14.7682 26.5694 14.7682 28.1779C14.7682 28.7891 15.1256 29.216 15.9653 29.6138C18.1179 30.6326 24.185 32.6277 25.7793 32.6277C27.3737 32.6277 23.1797 29.3705 22.0224 29.3705C20.865 29.3705 18.3096 29.0083 18.3096 27.346C18.3096 25.4889 26.1118 22.068 26.1118 18.0547C28.0982 18.0547 29.8071 17.8207 31.2911 17.4206C31.5865 18.1462 32.0947 19.4367 32.1924 19.9529C32.2716 20.371 32.0291 21.0576 31.3771 21.1844C30.7252 21.3112 29.4943 22.2032 29.569 22.5993C29.6436 22.9954 30.6174 23.3325 31.2693 23.2057C31.9211 23.0789 33.5046 22.5725 33.7153 21.0703C33.8166 20.3483 34.2924 17.4797 34.8468 15.946C37.5235 14.3758 39.1589 12.1873 40.4568 10.3C40.5082 10.2248 40.5743 10.161 40.651 10.1126C40.7278 10.0642 40.8135 10.0322 40.9029 10.0186C41.4077 9.87578 41.9293 9.80293 42.4536 9.80205C43.3165 9.80205 44.0928 10.1434 44.5957 10.1434C45.1714 10.1434 45.4964 9.43433 45.4964 9.1063C45.4969 8.15296 43.2718 7.01139 43.2718 7.01139Z" fill="#168EEA"></path><path d="M55.5049 28.8763L55.3721 26.3048C55.7584 26.3692 56.181 26.4014 56.6398 26.4014C57.5331 26.4014 58.1368 26.172 58.4507 25.7133C58.7646 25.2545 58.9215 24.4979 58.9215 23.4436V7.26611H62.2053V23.2263C62.2053 24.2404 62.1127 25.0935 61.9276 25.7857C61.7506 26.4859 61.4447 27.0775 61.0101 27.5604C60.5835 28.0514 60.0121 28.4095 59.2958 28.6349C58.5875 28.8602 57.7062 28.9729 56.6518 28.9729C56.2092 28.9729 55.8269 28.9407 55.5049 28.8763ZM75.2197 23.9627C74.1654 24.8239 72.777 25.2545 71.0546 25.2545C69.3322 25.2545 67.9439 24.8239 66.8895 23.9627C65.8432 23.1015 65.3201 21.8379 65.3201 20.1719V11.733H68.4952V20.0512C68.4952 21.0411 68.7004 21.7574 69.1109 22.2001C69.5294 22.6428 70.1894 22.8641 71.0908 22.8641C71.9762 22.8641 72.6201 22.6468 73.0225 22.2122C73.4329 21.7695 73.6382 21.0492 73.6382 20.0512V11.733H76.8012V20.1719C76.8012 21.8299 76.2741 23.0935 75.2197 23.9627ZM79.6987 25.001V11.733H82.2581L82.6203 13.4232C82.7813 13.222 82.9342 13.0449 83.0791 12.892C83.232 12.731 83.4372 12.554 83.6948 12.3608C83.9604 12.1596 84.2381 11.9946 84.5278 11.8658C84.8256 11.7371 85.1878 11.6284 85.6144 11.5399C86.049 11.4513 86.5118 11.4071 87.0027 11.4071C88.0571 11.4071 88.8981 11.6203 89.5259 12.0469C90.1618 12.4735 90.6084 12.9725 90.866 13.5439C91.3409 12.8598 91.9566 12.3326 92.7131 11.9624C93.4697 11.5922 94.3108 11.4071 95.2363 11.4071C96.7575 11.4071 97.8722 11.8377 98.5805 12.6988C99.2968 13.56 99.655 14.8357 99.655 16.5259V25.001H96.4798V17.4676C96.4798 16.1718 96.3349 15.2381 96.0452 14.6667C95.7635 14.0872 95.2202 13.7975 94.4154 13.7975C93.184 13.7975 92.2986 14.3528 91.7594 15.4635C91.534 15.9545 91.3811 16.546 91.3006 17.2382V25.001H88.1376V17.3227C88.1376 16.1396 87.9806 15.2583 87.6667 14.6788C87.3528 14.0993 86.7854 13.8095 85.9645 13.8095C85.2964 13.8095 84.721 13.9786 84.2381 14.3166C83.7551 14.6546 83.3889 15.0973 83.1394 15.6446C82.9543 16.4575 82.8618 17.4314 82.8618 18.5662V25.001H79.6987ZM102.782 30.5182V11.733H105.498L105.836 13.5922C106.271 12.892 106.846 12.3528 107.563 11.9745C108.287 11.5882 109.092 11.395 109.977 11.395C111.064 11.395 112.017 11.6968 112.838 12.3004C113.667 12.9041 114.295 13.7291 114.722 14.7754C115.148 15.8136 115.362 16.9887 115.362 18.3006C115.362 20.353 114.863 22.0271 113.865 23.3229C112.875 24.6106 111.531 25.2545 109.832 25.2545C108.995 25.2545 108.235 25.0895 107.551 24.7595C106.874 24.4215 106.307 23.9667 105.848 23.3953C105.913 24.5543 105.945 25.2062 105.945 25.3511V30.3613L102.782 30.5182ZM109.156 22.84C110.098 22.84 110.838 22.4456 111.378 21.6568C111.925 20.8681 112.199 19.7413 112.199 18.2765C112.199 16.7875 111.925 15.6687 111.378 14.9202C110.83 14.1717 110.07 13.7975 109.096 13.7975C107.003 13.7975 105.945 15.2221 105.921 18.0712C105.921 19.7131 106.19 20.9204 106.73 21.693C107.277 22.4577 108.086 22.84 109.156 22.84ZM122.183 25.2424C120.227 25.2424 118.661 24.9084 117.486 24.2404L117.812 21.8621C118.344 22.1518 119.02 22.4134 119.841 22.6468C120.662 22.8721 121.41 22.9848 122.086 22.9848C122.786 22.9848 123.33 22.8561 123.716 22.5985C124.11 22.3329 124.312 21.9466 124.32 21.4395C124.32 20.9808 124.134 20.6186 123.764 20.353C123.402 20.0874 122.706 19.7574 121.676 19.363C121.322 19.2342 121.092 19.1497 120.988 19.1095C119.764 18.6346 118.883 18.1074 118.344 17.5279C117.804 16.9404 117.535 16.1476 117.535 15.1496C117.535 13.9423 117.969 13.0168 118.839 12.3729C119.716 11.729 120.935 11.4071 122.497 11.4071C124.187 11.4071 125.672 11.725 126.951 12.3608L126.167 14.546C124.903 13.9584 123.7 13.6647 122.557 13.6647C121.921 13.6647 121.422 13.7733 121.06 13.9906C120.706 14.1999 120.529 14.5218 120.529 14.9565C120.529 15.3669 120.702 15.6889 121.048 15.9223C121.394 16.1476 122.07 16.4454 123.076 16.8157C123.108 16.8237 123.213 16.8599 123.39 16.9243C123.567 16.9887 123.704 17.041 123.8 17.0813C125.016 17.5239 125.909 18.0551 126.481 18.6749C127.052 19.2865 127.338 20.0874 127.338 21.0773C127.33 22.4053 126.879 23.4315 125.986 24.1559C125.092 24.8802 123.825 25.2424 122.183 25.2424ZM129.849 25.001V6.84357L133.012 6.63833V10.4654C133.012 10.6505 133 11.1656 132.976 12.0107C132.952 12.8477 132.94 13.2743 132.94 13.2904C133.994 12.0348 135.41 11.4071 137.189 11.4071C138.67 11.4071 139.817 11.8336 140.63 12.6868C141.451 13.5319 141.861 14.8357 141.861 16.5983V25.001H138.698V16.9485C138.698 15.8619 138.525 15.0651 138.179 14.5581C137.833 14.051 137.245 13.7975 136.416 13.7975C135.708 13.7975 135.08 13.9786 134.533 14.3407C133.986 14.6949 133.575 15.1536 133.302 15.717C133.109 16.4575 133.012 17.4233 133.012 18.6145V25.001H129.849ZM148.489 25.2545C147.258 25.2545 146.26 24.9165 145.495 24.2404C144.739 23.5563 144.36 22.5744 144.36 21.2946C144.36 19.9184 144.811 18.9002 145.712 18.2402C146.614 17.5722 147.974 17.1497 149.793 16.9726C150.043 16.9404 150.312 16.9082 150.602 16.876C150.892 16.8438 151.218 16.8116 151.58 16.7794C151.942 16.7472 152.228 16.7191 152.437 16.6949V15.9947C152.437 15.1899 152.252 14.6063 151.882 14.2442C151.511 13.8739 150.948 13.6888 150.191 13.6888C149.113 13.6888 147.781 13.9906 146.195 14.5943C146.187 14.5701 146.055 14.2039 145.797 13.4956C145.539 12.7874 145.407 12.4252 145.399 12.4091C146.96 11.7411 148.65 11.4071 150.469 11.4071C152.256 11.4071 153.556 11.7974 154.369 12.5781C155.182 13.3508 155.588 14.6063 155.588 16.3448V25.001H153.246C153.238 24.9688 153.149 24.6992 152.98 24.1921C152.811 23.685 152.727 23.4154 152.727 23.3832C152.067 24.0271 151.419 24.502 150.783 24.8078C150.155 25.1056 149.391 25.2545 148.489 25.2545ZM149.346 23.009C150.079 23.009 150.715 22.8359 151.254 22.4898C151.801 22.1357 152.192 21.7091 152.425 21.2101V18.6507C152.401 18.6507 152.188 18.6668 151.785 18.699C151.391 18.7312 151.177 18.7473 151.145 18.7473C149.866 18.86 148.928 19.1014 148.332 19.4717C147.737 19.8419 147.439 20.4375 147.439 21.2584C147.439 21.8218 147.604 22.2564 147.934 22.5623C148.264 22.8601 148.735 23.009 149.346 23.009ZM158.787 25.001V11.733H161.443L161.854 13.7612C162.723 12.3689 163.983 11.6727 165.633 11.6727C165.979 11.6727 166.26 11.6888 166.478 11.721L166.429 14.3649C166.107 14.3166 165.773 14.2925 165.427 14.2925C164.26 14.2925 163.387 14.6023 162.807 15.2221C162.236 15.8418 161.95 16.703 161.95 17.8056V25.001H158.787ZM174.421 25.2545C172.289 25.2545 170.627 24.6428 169.435 23.4194C168.252 22.188 167.661 20.4898 167.661 18.3247C167.661 16.216 168.22 14.5379 169.339 13.2904C170.458 12.0429 171.983 11.4151 173.914 11.4071C175.741 11.4071 177.158 11.9785 178.164 13.1214C179.178 14.2643 179.685 15.7814 179.685 17.6728C179.685 17.8096 179.681 18.031 179.673 18.3368C179.673 18.6427 179.673 18.868 179.673 19.0129H170.848C170.88 20.2524 171.218 21.2142 171.862 21.8983C172.514 22.5744 173.407 22.9124 174.542 22.9124C175.991 22.9124 177.383 22.5341 178.719 21.7776L179.166 24.0231C177.838 24.844 176.257 25.2545 174.421 25.2545ZM170.908 17.0209H176.703C176.703 15.9424 176.458 15.1134 175.967 14.5339C175.476 13.9544 174.796 13.6647 173.926 13.6647C173.114 13.6647 172.425 13.9464 171.862 14.5098C171.307 15.0732 170.989 15.9102 170.908 17.0209Z" fill="#168EEA"></path></svg></div>'):
"black-viewer"==c?this.current_control.parent().append('<div style="background-color: #000; position: absolute; z-index: 10; padding: 5px; display: flex; align-items: center; justify-content: center;"><svg width="130" height="23" viewBox="0 0 130 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M31.3056 3.64838L30.6519 2.78328C30.5664 2.66985 30.4477 2.58652 30.3126 2.5451C29.9975 2.44929 29.1558 2.32371 28.7294 2.30244C28.6544 2.29778 28.5815 2.27519 28.5169 2.23651C28.4522 2.19783 28.3976 2.14418 28.3575 2.07998C27.9503 1.44625 26.5164 -0.0629666 26.1823 0.0020351C25.8052 0.0754604 25.9391 0.26492 26.0086 0.630642C26.2079 1.68197 27.1206 3.07031 27.1206 3.07031C27.1206 3.07031 26.5303 4.83792 25.5402 5.03061C23.8178 5.36601 22.1967 2.0319 17.4814 1.99933C5.54061 1.99933 7.34375 18.7296 0.580856 18.7296C0.0642525 18.7296 0.000728344 19.0146 0.000728344 19.0746C0.000728344 19.1964 -0.0599463 19.4799 0.926277 19.4799C8.46418 19.4799 9.54624 9.78171 11.6343 9.78171C12.3988 9.78171 12.3303 12.0945 12.3303 12.8519C12.3303 16.8978 10.6831 17.7987 10.6831 18.9625C10.6831 19.4047 10.9417 19.7136 11.5492 20.0014C13.1067 20.7384 17.4962 22.1819 18.6497 22.1819C19.8032 22.1819 16.7689 19.8253 15.9315 19.8253C15.0942 19.8253 13.2453 19.5633 13.2453 18.3606C13.2453 17.017 18.8903 14.5419 18.8903 11.6383C20.3274 11.6383 21.5638 11.469 22.6375 11.1795C22.8512 11.7044 23.219 12.6381 23.2896 13.0116C23.3469 13.3141 23.1715 13.8109 22.6998 13.9026C22.2281 13.9944 21.3375 14.6397 21.3916 14.9263C21.4456 15.2129 22.1501 15.4568 22.6217 15.365C23.0934 15.2733 24.239 14.9069 24.3914 13.8201C24.4648 13.2977 24.809 11.2223 25.2101 10.1126C27.1467 8.97655 28.3299 7.39321 29.269 6.02768C29.3061 5.97328 29.354 5.92715 29.4095 5.89214C29.465 5.85713 29.527 5.83398 29.5917 5.82411C29.9569 5.72078 30.3344 5.66807 30.7136 5.66743C31.338 5.66743 31.8996 5.91438 32.2635 5.91438C32.68 5.91438 32.9151 5.40139 32.9151 5.16406C32.9155 4.47431 31.3056 3.64838 31.3056 3.64838Z" fill="#fff"/><path d="M40.1547 19.4663L40.0586 17.6058C40.3381 17.6524 40.6438 17.6757 40.9757 17.6757C41.6221 17.6757 42.0588 17.5097 42.2859 17.1778C42.513 16.8459 42.6266 16.2985 42.6266 15.5357V3.83116H45.0024V15.3784C45.0024 16.1121 44.9355 16.7294 44.8015 17.2302C44.6734 17.7368 44.4521 18.1648 44.1377 18.5142C43.8291 18.8694 43.4156 19.1285 42.8974 19.2916C42.3849 19.4546 41.7473 19.5361 40.9845 19.5361C40.6642 19.5361 40.3876 19.5129 40.1547 19.4663Z" fill="#fff"/><path d="M54.4184 15.9112C53.6556 16.5343 52.6511 16.8459 51.405 16.8459C50.1588 16.8459 49.1543 16.5343 48.3915 15.9112C47.6345 15.2882 47.256 14.3739 47.256 13.1686V7.063H49.5532V13.0812C49.5532 13.7974 49.7017 14.3157 49.9987 14.636C50.3015 14.9563 50.779 15.1164 51.4312 15.1164C52.0717 15.1164 52.5376 14.9592 52.8287 14.6447C53.1257 14.3244 53.2742 13.8033 53.2742 13.0812V7.063H55.5627V13.1686C55.5627 14.3681 55.1813 15.2823 54.4184 15.9112Z" fill="#fff"/><path d="M57.659 16.6624V7.063H59.5108L59.7728 8.28585C59.8893 8.14028 59.9999 8.01217 60.1047 7.90153C60.2154 7.78506 60.3639 7.65696 60.5502 7.5172C60.7424 7.37162 60.9433 7.25225 61.1529 7.15908C61.3684 7.06591 61.6304 6.9873 61.939 6.92324C62.2535 6.85919 62.5883 6.82716 62.9435 6.82716C63.7063 6.82716 64.3149 6.98147 64.7691 7.2901C65.2291 7.59872 65.5523 7.95976 65.7386 8.3732C66.0822 7.87823 66.5276 7.49682 67.075 7.22896C67.6224 6.96109 68.2309 6.82716 68.9006 6.82716C70.0011 6.82716 70.8076 7.1387 71.3201 7.76177C71.8383 8.38485 72.0975 9.30781 72.0975 10.5307V16.6624H69.8002V11.212C69.8002 10.2745 69.6954 9.59897 69.4858 9.18553C69.282 8.76626 68.8889 8.55663 68.3066 8.55663C67.4157 8.55663 66.7751 8.95843 66.385 9.76202C66.2219 10.1172 66.1113 10.5452 66.0531 11.046V16.6624H63.7646V11.1072C63.7646 10.2512 63.651 9.61353 63.4239 9.19426C63.1968 8.775 62.7863 8.56536 62.1923 8.56536C61.709 8.56536 61.2927 8.68765 60.9433 8.93222C60.5939 9.17679 60.3289 9.49707 60.1484 9.89304C60.0145 10.4812 59.9475 11.1858 59.9475 12.0068V16.6624H57.659Z" fill="#fff"/><path d="M74.3598 20.6542V7.063H76.3251L76.5696 8.40814C76.8841 7.90153 77.3004 7.51138 77.8187 7.23769C78.3428 6.95818 78.9251 6.81842 79.5656 6.81842C80.3518 6.81842 81.0418 7.03679 81.6358 7.47353C82.2355 7.91026 82.6898 8.50713 82.9984 9.26414C83.307 10.0153 83.4613 10.8655 83.4613 11.8147C83.4613 13.2996 83.1003 14.5108 82.3782 15.4483C81.662 16.38 80.6895 16.8459 79.4608 16.8459C78.8552 16.8459 78.3049 16.7265 77.81 16.4877C77.3208 16.2432 76.9103 15.9142 76.5784 15.5007C76.625 16.3392 76.6483 16.8109 76.6483 16.9157V20.5406L74.3598 20.6542ZM78.9717 15.0989C79.653 15.0989 80.1887 14.8136 80.5789 14.2429C80.9748 13.6723 81.1728 12.857 81.1728 11.7972C81.1728 10.7199 80.9748 9.91051 80.5789 9.36896C80.1829 8.82741 79.6326 8.55663 78.928 8.55663C77.414 8.55663 76.6483 9.58732 76.6308 11.6487C76.6308 12.8366 76.8259 13.7101 77.216 14.2691C77.612 14.8223 78.1972 15.0989 78.9717 15.0989Z" fill="#fff"/><path d="M88.3964 16.8371C86.9814 16.8371 85.8488 16.5955 84.9986 16.1121L85.2345 14.3914C85.6188 14.601 86.1079 14.7903 86.7019 14.9592C87.2959 15.1222 87.8374 15.2037 88.3265 15.2037C88.8332 15.2037 89.2262 15.1106 89.5057 14.9242C89.7911 14.7321 89.9366 14.4526 89.9425 14.0857C89.9425 13.7538 89.8085 13.4917 89.5407 13.2996C89.2786 13.1074 88.7749 12.8687 88.0296 12.5833C87.7734 12.4902 87.6074 12.429 87.5317 12.3999C86.6466 12.0563 86.0089 11.6749 85.6188 11.2557C85.2286 10.8306 85.0336 10.257 85.0336 9.53492C85.0336 8.66145 85.348 7.99179 85.9769 7.52594C86.6116 7.06008 87.4938 6.82716 88.6235 6.82716C89.8464 6.82716 90.9208 7.05717 91.8466 7.5172L91.2789 9.09818C90.3646 8.67309 89.4941 8.46055 88.6672 8.46055C88.2072 8.46055 87.8461 8.53916 87.5841 8.69638C87.3279 8.84779 87.1998 9.08071 87.1998 9.39516C87.1998 9.69214 87.325 9.92507 87.5754 10.0939C87.8258 10.257 88.3149 10.4724 89.0428 10.7403C89.0661 10.7461 89.1418 10.7723 89.2699 10.8189C89.398 10.8655 89.497 10.9034 89.5669 10.9325C90.4462 11.2527 91.0925 11.6371 91.506 12.0854C91.9194 12.528 92.1261 13.1074 92.1261 13.8237C92.1203 14.7845 91.7942 15.5269 91.1479 16.051C90.5015 16.5751 89.5843 16.8371 88.3964 16.8371Z" fill="#fff"/><path d="M93.943 16.6624V3.52544L96.2314 3.37695V6.14585C96.2314 6.27978 96.2227 6.65247 96.2052 7.26389C96.1878 7.8695 96.179 8.17813 96.179 8.18977C96.9419 7.28136 97.9667 6.82716 99.2537 6.82716C100.325 6.82716 101.155 7.13579 101.743 7.75304C102.337 8.36447 102.634 9.30781 102.634 10.5831V16.6624H100.345V10.8364C100.345 10.0503 100.22 9.47377 99.9699 9.10692C99.7195 8.74006 99.2944 8.55663 98.6946 8.55663C98.1822 8.55663 97.728 8.68765 97.332 8.94969C96.936 9.20591 96.6391 9.53783 96.4411 9.94545C96.3013 10.4812 96.2314 11.18 96.2314 12.0418V16.6624H93.943Z" fill="#fff"/><path d="M107.429 16.8459C106.538 16.8459 105.816 16.6013 105.263 16.1121C104.716 15.6172 104.442 14.9068 104.442 13.9809C104.442 12.9851 104.768 12.2485 105.42 11.771C106.073 11.2877 107.057 10.982 108.373 10.8539C108.553 10.8306 108.748 10.8073 108.958 10.784C109.168 10.7607 109.403 10.7374 109.665 10.7141C109.927 10.6908 110.134 10.6704 110.286 10.653V10.1463C110.286 9.56403 110.152 9.14185 109.884 8.87981C109.616 8.61195 109.208 8.47802 108.661 8.47802C107.881 8.47802 106.917 8.69639 105.77 9.13312C105.764 9.11565 105.668 8.8507 105.481 8.33826C105.295 7.82583 105.199 7.56379 105.193 7.55214C106.323 7.06882 107.546 6.82716 108.862 6.82716C110.155 6.82716 111.095 7.10958 111.683 7.67443C112.271 8.23345 112.565 9.14185 112.565 10.3997V16.6624H110.871C110.865 16.6391 110.801 16.4441 110.679 16.0772C110.556 15.7103 110.495 15.5153 110.495 15.492C110.018 15.9578 109.549 16.3014 109.089 16.5227C108.635 16.7381 108.082 16.8459 107.429 16.8459ZM108.05 15.2212C108.579 15.2212 109.039 15.096 109.43 14.8456C109.826 14.5894 110.108 14.2808 110.277 13.9197V12.068C110.259 12.068 110.105 12.0796 109.814 12.1029C109.529 12.1262 109.374 12.1379 109.351 12.1379C108.425 12.2194 107.747 12.3941 107.316 12.6619C106.885 12.9298 106.669 13.3607 106.669 13.9547C106.669 14.3623 106.789 14.6767 107.028 14.898C107.266 15.1135 107.607 15.2212 108.05 15.2212Z" fill="#fff"/><path d="M114.88 16.6624V7.063H116.802L117.099 8.53043C117.728 7.52302 118.639 7.01932 119.833 7.01932C120.083 7.01932 120.287 7.03097 120.444 7.05426L120.409 8.96716C120.176 8.93222 119.935 8.91475 119.684 8.91475C118.84 8.91475 118.208 9.13894 117.789 9.58732C117.375 10.0357 117.169 10.6588 117.169 11.4565V16.6624H114.88Z" fill="#fff"/><path d="M126.191 16.8459C124.648 16.8459 123.446 16.4033 122.584 15.5182C121.728 14.6272 121.3 13.3986 121.3 11.8321C121.3 10.3065 121.705 9.09236 122.514 8.18977C123.324 7.28719 124.427 6.83298 125.825 6.82716C127.146 6.82716 128.171 7.2406 128.899 8.06749C129.633 8.89437 130 9.99203 130 11.3605C130 11.4595 129.997 11.6196 129.991 11.8409C129.991 12.0622 129.991 12.2252 129.991 12.33H123.606C123.629 13.2268 123.874 13.9226 124.34 14.4176C124.811 14.9068 125.458 15.1513 126.279 15.1513C127.327 15.1513 128.334 14.8776 129.301 14.3303L129.624 15.9549C128.663 16.5489 127.519 16.8459 126.191 16.8459ZM123.65 10.8888H127.842C127.842 10.1085 127.665 9.50871 127.31 9.08945C126.954 8.67018 126.462 8.46055 125.833 8.46055C125.245 8.46055 124.747 8.66436 124.34 9.07198C123.938 9.4796 123.708 10.0852 123.65 10.8888Z" fill="#fff"/></svg></div>'):
"white-viewer"==c?this.current_control.parent().append('<div style="background-color: #fff; position: absoluate; z-index: 10; padding: 5px; display: flex; align-items: center; justify-content: center;"><svg width="130" height="23" viewBox="0 0 130 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M31.3056 3.64838L30.6519 2.78328C30.5664 2.66985 30.4477 2.58652 30.3126 2.5451C29.9975 2.44929 29.1558 2.32371 28.7294 2.30244C28.6544 2.29778 28.5815 2.27519 28.5169 2.23651C28.4522 2.19783 28.3976 2.14418 28.3575 2.07998C27.9503 1.44625 26.5164 -0.0629666 26.1823 0.0020351C25.8052 0.0754604 25.9391 0.26492 26.0086 0.630642C26.2079 1.68197 27.1206 3.07031 27.1206 3.07031C27.1206 3.07031 26.5303 4.83792 25.5402 5.03061C23.8178 5.36601 22.1967 2.0319 17.4814 1.99933C5.54061 1.99933 7.34375 18.7296 0.580856 18.7296C0.0642525 18.7296 0.000728344 19.0146 0.000728344 19.0746C0.000728344 19.1964 -0.0599463 19.4799 0.926277 19.4799C8.46418 19.4799 9.54624 9.78171 11.6343 9.78171C12.3988 9.78171 12.3303 12.0945 12.3303 12.8519C12.3303 16.8978 10.6831 17.7987 10.6831 18.9625C10.6831 19.4047 10.9417 19.7136 11.5492 20.0014C13.1067 20.7384 17.4962 22.1819 18.6497 22.1819C19.8032 22.1819 16.7689 19.8253 15.9315 19.8253C15.0942 19.8253 13.2453 19.5633 13.2453 18.3606C13.2453 17.017 18.8903 14.5419 18.8903 11.6383C20.3274 11.6383 21.5638 11.469 22.6375 11.1795C22.8512 11.7044 23.219 12.6381 23.2896 13.0116C23.3469 13.3141 23.1715 13.8109 22.6998 13.9026C22.2281 13.9944 21.3375 14.6397 21.3916 14.9263C21.4456 15.2129 22.1501 15.4568 22.6217 15.365C23.0934 15.2733 24.239 14.9069 24.3914 13.8201C24.4648 13.2977 24.809 11.2223 25.2101 10.1126C27.1467 8.97655 28.3299 7.39321 29.269 6.02768C29.3061 5.97328 29.354 5.92715 29.4095 5.89214C29.465 5.85713 29.527 5.83398 29.5917 5.82411C29.9569 5.72078 30.3344 5.66807 30.7136 5.66743C31.338 5.66743 31.8996 5.91438 32.2635 5.91438C32.68 5.91438 32.9151 5.40139 32.9151 5.16406C32.9155 4.47431 31.3056 3.64838 31.3056 3.64838Z" fill="#168EEA"/><path d="M40.1547 19.4663L40.0586 17.6058C40.3381 17.6524 40.6438 17.6757 40.9757 17.6757C41.6221 17.6757 42.0588 17.5097 42.2859 17.1778C42.513 16.8459 42.6266 16.2985 42.6266 15.5357V3.83116H45.0024V15.3784C45.0024 16.1121 44.9355 16.7294 44.8015 17.2302C44.6734 17.7368 44.4521 18.1648 44.1377 18.5142C43.8291 18.8694 43.4156 19.1285 42.8974 19.2916C42.3849 19.4546 41.7473 19.5361 40.9845 19.5361C40.6642 19.5361 40.3876 19.5129 40.1547 19.4663Z" fill="#168EEA"/><path d="M54.4184 15.9112C53.6556 16.5343 52.6511 16.8459 51.405 16.8459C50.1588 16.8459 49.1543 16.5343 48.3915 15.9112C47.6345 15.2882 47.256 14.3739 47.256 13.1686V7.063H49.5532V13.0812C49.5532 13.7974 49.7017 14.3157 49.9987 14.636C50.3015 14.9563 50.779 15.1164 51.4312 15.1164C52.0717 15.1164 52.5376 14.9592 52.8287 14.6447C53.1257 14.3244 53.2742 13.8033 53.2742 13.0812V7.063H55.5627V13.1686C55.5627 14.3681 55.1813 15.2823 54.4184 15.9112Z" fill="#168EEA"/><path d="M57.659 16.6624V7.063H59.5108L59.7728 8.28585C59.8893 8.14028 59.9999 8.01217 60.1047 7.90153C60.2154 7.78506 60.3639 7.65696 60.5502 7.5172C60.7424 7.37162 60.9433 7.25225 61.1529 7.15908C61.3684 7.06591 61.6304 6.9873 61.939 6.92324C62.2535 6.85919 62.5883 6.82716 62.9435 6.82716C63.7063 6.82716 64.3149 6.98147 64.7691 7.2901C65.2291 7.59872 65.5523 7.95976 65.7386 8.3732C66.0822 7.87823 66.5276 7.49682 67.075 7.22896C67.6224 6.96109 68.2309 6.82716 68.9006 6.82716C70.0011 6.82716 70.8076 7.1387 71.3201 7.76177C71.8383 8.38485 72.0975 9.30781 72.0975 10.5307V16.6624H69.8002V11.212C69.8002 10.2745 69.6954 9.59897 69.4858 9.18553C69.282 8.76626 68.8889 8.55663 68.3066 8.55663C67.4157 8.55663 66.7751 8.95843 66.385 9.76202C66.2219 10.1172 66.1113 10.5452 66.0531 11.046V16.6624H63.7646V11.1072C63.7646 10.2512 63.651 9.61353 63.4239 9.19426C63.1968 8.775 62.7863 8.56536 62.1923 8.56536C61.709 8.56536 61.2927 8.68765 60.9433 8.93222C60.5939 9.17679 60.3289 9.49707 60.1484 9.89304C60.0145 10.4812 59.9475 11.1858 59.9475 12.0068V16.6624H57.659Z" fill="#168EEA"/><path d="M74.3598 20.6542V7.063H76.3251L76.5696 8.40814C76.8841 7.90153 77.3004 7.51138 77.8187 7.23769C78.3428 6.95818 78.9251 6.81842 79.5656 6.81842C80.3518 6.81842 81.0418 7.03679 81.6358 7.47353C82.2355 7.91026 82.6898 8.50713 82.9984 9.26414C83.307 10.0153 83.4613 10.8655 83.4613 11.8147C83.4613 13.2996 83.1003 14.5108 82.3782 15.4483C81.662 16.38 80.6895 16.8459 79.4608 16.8459C78.8552 16.8459 78.3049 16.7265 77.81 16.4877C77.3208 16.2432 76.9103 15.9142 76.5784 15.5007C76.625 16.3392 76.6483 16.8109 76.6483 16.9157V20.5406L74.3598 20.6542ZM78.9717 15.0989C79.653 15.0989 80.1887 14.8136 80.5789 14.2429C80.9748 13.6723 81.1728 12.857 81.1728 11.7972C81.1728 10.7199 80.9748 9.91051 80.5789 9.36896C80.1829 8.82741 79.6326 8.55663 78.928 8.55663C77.414 8.55663 76.6483 9.58732 76.6308 11.6487C76.6308 12.8366 76.8259 13.7101 77.216 14.2691C77.612 14.8223 78.1972 15.0989 78.9717 15.0989Z" fill="#168EEA"/><path d="M88.3964 16.8371C86.9814 16.8371 85.8488 16.5955 84.9986 16.1121L85.2345 14.3914C85.6188 14.601 86.1079 14.7903 86.7019 14.9592C87.2959 15.1222 87.8374 15.2037 88.3265 15.2037C88.8332 15.2037 89.2262 15.1106 89.5057 14.9242C89.7911 14.7321 89.9366 14.4526 89.9425 14.0857C89.9425 13.7538 89.8085 13.4917 89.5407 13.2996C89.2786 13.1074 88.7749 12.8687 88.0296 12.5833C87.7734 12.4902 87.6074 12.429 87.5317 12.3999C86.6466 12.0563 86.0089 11.6749 85.6188 11.2557C85.2286 10.8306 85.0336 10.257 85.0336 9.53492C85.0336 8.66145 85.348 7.99179 85.9769 7.52594C86.6116 7.06008 87.4938 6.82716 88.6235 6.82716C89.8464 6.82716 90.9208 7.05717 91.8466 7.5172L91.2789 9.09818C90.3646 8.67309 89.4941 8.46055 88.6672 8.46055C88.2072 8.46055 87.8461 8.53916 87.5841 8.69638C87.3279 8.84779 87.1998 9.08071 87.1998 9.39516C87.1998 9.69214 87.325 9.92507 87.5754 10.0939C87.8258 10.257 88.3149 10.4724 89.0428 10.7403C89.0661 10.7461 89.1418 10.7723 89.2699 10.8189C89.398 10.8655 89.497 10.9034 89.5669 10.9325C90.4462 11.2527 91.0925 11.6371 91.506 12.0854C91.9194 12.528 92.1261 13.1074 92.1261 13.8237C92.1203 14.7845 91.7942 15.5269 91.1479 16.051C90.5015 16.5751 89.5843 16.8371 88.3964 16.8371Z" fill="#168EEA"/><path d="M93.943 16.6624V3.52544L96.2314 3.37695V6.14585C96.2314 6.27978 96.2227 6.65247 96.2052 7.26389C96.1878 7.8695 96.179 8.17813 96.179 8.18977C96.9419 7.28136 97.9667 6.82716 99.2537 6.82716C100.325 6.82716 101.155 7.13579 101.743 7.75304C102.337 8.36447 102.634 9.30781 102.634 10.5831V16.6624H100.345V10.8364C100.345 10.0503 100.22 9.47377 99.9699 9.10692C99.7195 8.74006 99.2944 8.55663 98.6946 8.55663C98.1822 8.55663 97.728 8.68765 97.332 8.94969C96.936 9.20591 96.6391 9.53783 96.4411 9.94545C96.3013 10.4812 96.2314 11.18 96.2314 12.0418V16.6624H93.943Z" fill="#168EEA"/><path d="M107.429 16.8459C106.538 16.8459 105.816 16.6013 105.263 16.1121C104.716 15.6172 104.442 14.9068 104.442 13.9809C104.442 12.9851 104.768 12.2485 105.42 11.771C106.073 11.2877 107.057 10.982 108.373 10.8539C108.553 10.8306 108.748 10.8073 108.958 10.784C109.168 10.7607 109.403 10.7374 109.665 10.7141C109.927 10.6908 110.134 10.6704 110.286 10.653V10.1463C110.286 9.56403 110.152 9.14185 109.884 8.87981C109.616 8.61195 109.208 8.47802 108.661 8.47802C107.881 8.47802 106.917 8.69639 105.77 9.13312C105.764 9.11565 105.668 8.8507 105.481 8.33826C105.295 7.82583 105.199 7.56379 105.193 7.55214C106.323 7.06882 107.546 6.82716 108.862 6.82716C110.155 6.82716 111.095 7.10958 111.683 7.67443C112.271 8.23345 112.565 9.14185 112.565 10.3997V16.6624H110.871C110.865 16.6391 110.801 16.4441 110.679 16.0772C110.556 15.7103 110.495 15.5153 110.495 15.492C110.018 15.9578 109.549 16.3014 109.089 16.5227C108.635 16.7381 108.082 16.8459 107.429 16.8459ZM108.05 15.2212C108.579 15.2212 109.039 15.096 109.43 14.8456C109.826 14.5894 110.108 14.2808 110.277 13.9197V12.068C110.259 12.068 110.105 12.0796 109.814 12.1029C109.529 12.1262 109.374 12.1379 109.351 12.1379C108.425 12.2194 107.747 12.3941 107.316 12.6619C106.885 12.9298 106.669 13.3607 106.669 13.9547C106.669 14.3623 106.789 14.6767 107.028 14.898C107.266 15.1135 107.607 15.2212 108.05 15.2212Z" fill="#168EEA"/><path d="M114.88 16.6624V7.063H116.802L117.099 8.53043C117.728 7.52302 118.639 7.01932 119.833 7.01932C120.083 7.01932 120.287 7.03097 120.444 7.05426L120.409 8.96716C120.176 8.93222 119.935 8.91475 119.684 8.91475C118.84 8.91475 118.208 9.13894 117.789 9.58732C117.375 10.0357 117.169 10.6588 117.169 11.4565V16.6624H114.88Z" fill="#168EEA"/><path d="M126.191 16.8459C124.648 16.8459 123.446 16.4033 122.584 15.5182C121.728 14.6272 121.3 13.3986 121.3 11.8321C121.3 10.3065 121.705 9.09236 122.514 8.18977C123.324 7.28719 124.427 6.83298 125.825 6.82716C127.146 6.82716 128.171 7.2406 128.899 8.06749C129.633 8.89437 130 9.99203 130 11.3605C130 11.4595 129.997 11.6196 129.991 11.8409C129.991 12.0622 129.991 12.2252 129.991 12.33H123.606C123.629 13.2268 123.874 13.9226 124.34 14.4176C124.811 14.9068 125.458 15.1513 126.279 15.1513C127.327 15.1513 128.334 14.8776 129.301 14.3303L129.624 15.9549C128.663 16.5489 127.519 16.8459 126.191 16.8459ZM123.65 10.8888H127.842C127.842 10.1085 127.665 9.50871 127.31 9.08945C126.954 8.67018 126.462 8.46055 125.833 8.46055C125.245 8.46055 124.747 8.66436 124.34 9.07198C123.938 9.4796 123.708 10.0852 123.65 10.8888Z" fill="#168EEA"/></svg></div>'):
"favicon"==c&&this.current_control.parent().append('<div style="background-color: #fff; position: absoluate; z-index: 10; padding: 5px; display: flex; align-items: center; justify-content: center;"><svg width="37" height="25" viewBox="0 0 37 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.7247 4.04684L33.9996 3.08726C33.9047 2.96144 33.773 2.86901 33.6232 2.82307C33.2737 2.71679 32.3401 2.57749 31.8671 2.5539C31.7839 2.54874 31.7031 2.52367 31.6314 2.48077C31.5597 2.43787 31.4991 2.37836 31.4546 2.30715C31.0029 1.60421 29.4124 -0.0698436 29.0419 0.00225737C28.6235 0.0837019 28.7721 0.293854 28.8491 0.699519C29.0702 1.86567 30.0826 3.40564 30.0826 3.40564C30.0826 3.40564 29.4279 5.3663 28.3296 5.58004C26.4191 5.95207 24.621 2.25382 19.3907 2.21769C6.14573 2.21769 8.1458 20.7751 0.644294 20.7751C0.0712699 20.7751 0.000807891 21.0913 0.000807891 21.1579C0.000807891 21.2929 -0.0664933 21.6075 1.02744 21.6075C9.3886 21.6075 10.5888 10.85 12.9049 10.85C13.7529 10.85 13.6769 13.4154 13.6769 14.2555C13.6769 18.7434 11.8498 19.7426 11.8498 21.0335C11.8498 21.524 12.1367 21.8666 12.8106 22.1858C14.5381 23.0034 19.4071 24.6046 20.6866 24.6046C21.9661 24.6046 18.6003 21.9906 17.6715 21.9906C16.7427 21.9906 14.6919 21.6999 14.6919 20.3659C14.6919 18.8755 20.9534 16.1301 20.9534 12.9093C22.5475 12.9093 23.919 12.7216 25.1099 12.4005C25.3469 12.9828 25.7548 14.0184 25.8332 14.4327C25.8968 14.7682 25.7022 15.3193 25.179 15.421C24.6557 15.5228 23.6679 16.2386 23.7278 16.5565C23.7877 16.8744 24.5692 17.1449 25.0924 17.0432C25.6155 16.9414 26.8863 16.535 27.0554 15.3295C27.1367 14.75 27.5185 12.4479 27.9634 11.2171C30.1115 9.95694 31.424 8.20066 32.4656 6.686C32.5068 6.62566 32.5599 6.57449 32.6215 6.53566C32.683 6.49682 32.7518 6.47114 32.8236 6.4602C33.2287 6.34558 33.6473 6.28712 34.068 6.28641C34.7606 6.28641 35.3835 6.56033 35.7872 6.56033C36.2492 6.56033 36.51 5.99131 36.51 5.72805C36.5104 4.96297 34.7247 4.04684 34.7247 4.04684Z" fill="#168EEA"/></svg></div>');
this._remove_dimensions();"folder"==c?this.current_control.addClass("logo"):"black-viewer"==c?this.current_control.addClass("icn-logo-viewer"):"white-viewer"==c?this.current_control.addClass("icn-logo-white-viewer"):"favicon"==c&&this.current_control.addClass("logo-favicon")},_update:function(a,c){if(""==$.trim(a))return!1;this.current_control=this.control.filter("."+c);this.current_control.attr("src",a);this._load_event(c)},_set_dimensions:function(a,c){this.current_control.css("width",Math.round(a/
2)).css("height",Math.round(c/2))},_remove_dimensions:function(){this.current_control.css("width","").css("height","")},_load_event:function(a){this.current_control.bind("load",$.proxy(function(){this.hide_loading(a)},this))},show_loading:function(a){a=this.control.filter("."+this.parent.change_custom_brand_image.type).parent();$(a).parent().find("svg").parent().remove();a.addClass("loading")},hide_loading:function(a){this.control.filter("."+a).parent().removeClass("loading")},add_corresponding_class:function(a){this.control.filter("."+
a).addClass(a+"-page")},remove_corresponding_class:function(a){this.control.filter("."+a).removeClass(a+"-page")}},change_custom_brand_image:{name:".change_custom_brand_image",control:void 0,parent:void 0,_bind_event:function(){this.control.bind("click",$.proxy(this._onclick,this))},_onclick:function(a){this.type=$(a.target).attr("data-type");this.parent.form.update("[name=type]",{value:this.type});this.parent.file_control.control.trigger("click")},bootstrap:function(){this.control=$(this.name);this._bind_event()}},
clear_custom_brand_image:{name:".clear_custom_brand_image",control:void 0,parent:void 0,bootstrap:function(){this.control=$(this.name);this._bind_event()},_bind_event:function(){this.control.bind("click",$.proxy(this._onclick,this))},_onclick:function(a){var c=this;this.type=$(a.target).attr("data-type");Jmp.App.Lightbox.show({type:"remove_photo",header:"Remove Logo?",body:"Are you sure you want to remove your logo?"},function(){$(this).html("Removing ...").addClass("disabled");$("#lightbox").find(".cancel").trigger("click");
c._on_confirm()});return!1},_on_confirm:function(){$.get(WS_PREFIX+"/accounts/clear_custom_brand_image/"+this.type,$.proxy(this._on_success,this))},_on_success:function(a){a.status&&(this.parent.custom_brand_image.add_corresponding_class(a.type),this.parent.custom_brand_image.update_to_default(a.fh,a.type),this.hide_control(a.type))},show_control:function(a){$(".js-custom-logo-"+a).find(".clear_custom_brand_image_container").removeClass("hide");$(".custom-branding-alert").removeClass("hide")},hide_control:function(a){$(".js-custom-logo-"+
a).find(".clear_custom_brand_image_container").addClass("hide");1>$(".clear_custom_brand_image_container").not(".hide").length&&$(".custom-branding-alert").addClass("hide")}},file_control:{name:".choose_custom_brand_image",control:void 0,parent:void 0,_bind_event:function(){this.control.bind("change",$.proxy(this._onchange,this))},_onchange:function(){var a=this.parent.change_custom_brand_image.type;this.parent.form.control.trigger("submit");this.parent.custom_brand_image.show_loading(a);this.parent.clear_custom_brand_image.hide_control(a)},
bootstrap:function(){this.control=$(this.name);this._bind_event()},clear:function(){this.control.val(null)}},form:{controls:void 0,name:"#choose_custom_brand_image_form",parent:void 0,message_placeholder:{name:"#profile_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(a){this.control=$(this.name);this.controls=a;this.controls.change_custom_brand_image.bootstrap();this.controls.file_control.bootstrap();this.controls.custom_brand_image.bootstrap();this.controls.clear_custom_brand_image.bootstrap();
this._bind_event()},_bind_event:function(){this.control.ajaxForm($.proxy(this._on_success,this))},_on_success:function(a){"1"==a.status?(this.controls.custom_brand_image.update(a.custom_brand_data,a.type),this.controls.custom_brand_image.remove_corresponding_class(a.type),this.controls.clear_custom_brand_image.show_control(a.type),this.controls.file_control.clear()):Jmp.App.Notifications.display_notification({type:"error",message:a.error.error}).close_notification();this.parent.custom_brand_image.hide_loading(a.type)},
update:function(a,c){this.control.find(a).attr(c)}},bootstrap:function(){this.form.bootstrap({change_custom_brand_image:this.change_custom_brand_image,file_control:this.file_control,custom_brand_image:this.custom_brand_image,clear_custom_brand_image:this.clear_custom_brand_image});this.change_custom_brand_image.parent=this.file_control.parent=this.clear_custom_brand_image.parent=this.custom_brand_image.parent=this.form.parent=this}}},billing:{form:{name:"#billing_form",submit_button:"#update_billing_form",
form:void 0,bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){1==a.status?Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:a.response.message}).close_notification()},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))}},bootstrap:function(){this.form.bootstrap()}},comments:{form:{name:"#comments_form",submit_button:"#update_comments",triggereing_radio_button:"comments_status",form:void 0,bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this));$("input[type=radio][name=comments_status]").change(function(){"enable"===
this.value?($("#container_allow_outside_comments").removeClass("blockUI"),$("#comments_wrapper").attr("data-comments-disabled","0")):($("#container_allow_outside_comments").addClass("blockUI"),$("#comments_wrapper").attr("data-comments-disabled","1"))})},_onclick:function(a){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this))},_on_success:function(a){1==a.status?Jmp.App.Notifications.display_notification({type:"success",message:"Setting updated successfully"}).close_notification():
Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred. Please try again"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))}},bootstrap:function(){this.form.bootstrap()}},custom_mesage:{form:{name:"#custom_message_form",textarea:"#onefourtychrachter",submit_button:"#update_custom_message_form",form:void 0,bootstrap:function(){this.form=$(this.name);this._bind_event()},
_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(a){a=$(this.textarea).data("limit");var c=Jmp.Helpers.strip_tags($(this.textarea).val());c=c.replace(/\(.*?\)\s?/g,"");0>a-c.length?Jmp.App.Notifications.display_notification({type:"error",message:"You can use maximum "+a+" characters."}).close_notification():$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this))},_on_success:function(a){1==a.status?Jmp.App.Notifications.display_notification({type:"success",
message:"Setting updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred. Please try again"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))}},bootstrap:function(){this.form.bootstrap()}},custom_email_footer:{form:{name:"#custom_email_footer_form",textarea:"#seventycharachter",submit_button:"#update_custom_email_footer_form",
form:void 0,bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(a){a=$(this.textarea).data("limit");var c=Jmp.Helpers.strip_tags($(this.textarea).val());c=c.replace(/\(.*?\)\s?/g,"");0>a-c.length?Jmp.App.Notifications.display_notification({type:"error",message:"You can use maximum "+a+" characters."}).close_notification():$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,
this))},_on_success:function(a){1==a.status?Jmp.App.Notifications.display_notification({type:"success",message:"Setting updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred. Please try again"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))}},bootstrap:function(){this.form.bootstrap()}},sharing:{form:{name:"#sharing_form",
submit_button:"#update_sharings",form:void 0,bootstrap:function(){this.form=$(this.name);this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(a){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this))},_on_success:function(a){1==a.status?Jmp.App.Notifications.display_notification({type:"success",message:"Setting updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",
message:"Some error occurred. Please try again"}).close_notification()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))}},bootstrap:function(){this.form.bootstrap()}},selfdestruct:{form:{name:"#self_destruct_form",submit_button:"#set_self_destruct_setting",form:void 0,old_values:{},message_placeholder:{name:"#self_destruct_form_message",set_message:function(a){$(this.name).html(a)}},bootstrap:function(){this.form=
$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.name+" .dropdown-menu li").bind("click",$.proxy(this._onchange,this));$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onchange:function(a){a=$(a.target);var c="";a.parent().find("a")&&(c=a.text());console.log(c);$("#self_destruct_setting").val(c);$("#select_time_duration").html(c+" <span class='caret'></span>").attr("data-new-value",c)},_onclick:function(){this.message_placeholder.set_message("");
if(this.verify_if_changes_applied())return $.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this)),!1},_on_success:function(a){Jmp.App.Notifications.display_notification({type:"success",message:"Settings updated successfully"}).close_notification();$("#self_destruct_form_message").addClass("hide");this.populate_old_values()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values=
{};this.old_values.self_destruct_setting=$("#select_time_duration").attr("data-new-value");$("#select_time_duration").attr("data-value",this.old_values.self_destruct_setting)},verify_if_changes_applied:function(){var a=!0;$("#select_time_duration").attr("data-value")==$("#select_time_duration").attr("data-new-value")&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},display_login_register_popup:function(a){$.ajax({type:"POST",
url:BASEURL+"/auth/lr",data:Jmp.Helpers.get_secure_params(a),success:function(c){Jmp.App.Lightbox.show({type:"signup_form",item_name:"",login_form:c.login_form,the_item_type:"file",register_form:c.register_form});$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog");$("#modal").addClass("modal-fullscreen");$("#the_sign_up").find("#firstName").focus().select()}})},display_login_register_popup_container:function(a,c){Jmp.App.Lightbox.show({type:"signup_form",item_name:"",login_form:"<div></div>",
the_item_type:"file",register_form:$("#"+a).html()});$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog signupPupupWithLogin");$("#modal div.leftImgContainer").addClass("signupPupupWithLogin");$("#modal").addClass("modal-fullscreen");$("#the_sign_up").find("#firstName").focus().select()},bootstrap:function(){for(var a in this)"object"==typeof this[a]&&this[a].bootstrap()},verify_if_changes_applied:function(){for(var a in this)if("object"==typeof this[a]&&"undefined"!=typeof this[a].verify_if_changes_applied&&
!this[a].verify_if_changes_applied())return"Please save your changes before exiting"},some_function:function(){console.log("some function")}};var xhr=void 0,timeout=void 0;
(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("Search_load"):(Jmp.Helpers.start_page_loading(),$.ajax({url:b,success:function(k){Jmp.App.infinitescroll_obj&&(Jmp.App.infinitescroll_obj.infinitescroll("destroy"),$("#search_result").infinitescroll("destroy"));$("#main_container").html(k);$.event.trigger("Search_load");$(document).scrollTop("0px")}}))},onLoad:function(){1!=$("#files_container li.file").length||0!=$("#search_result").length||
0!=Jmp.App.getLastAddress().indexOf("/v/")&&0!=Jmp.App.getLastAddress().indexOf("/j/")||window.location.reload();Jmp.Helpers.assign_route_class("search-page");$("#main_container").removeAttr("class");$("#CopyBucketDiv").remove();Jmp.Handler.Buckets.last_scroll_top=0;"undefined"!=typeof window.attach_placeholder&&attach_placeholder();Jmp.Helpers.update_browser_title($("#header_search_title").text());Jmp.Helpers.set_focus($("#search-text"));ViewerPanel.uninitialize();ViewerPanel.hide().initialize();
$('[data-tooltip="true"]').tooltip();a.Search.initialize_infinite_scroll();$("#top_welcome_bar").length?($("body").addClass("global-notice"),Jmp.App.Notifications._adjust_body_on_gloabl_notice()):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");Jmp.Helpers.show_announcement_bar()},initialize_infinite_scroll:function(){try{Jmp.App.infinitescroll_obj=$("#search_result").infinitescroll({loading:{finished:void 0,finishedMsg:"No more files",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",
msgText:"",selector:"#search_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#search_container_nav",nextSelector:"#search_container_next_page",itemSelector:"li.search_item",path:function(b){var h=$("#search-text").val().replace(/ /g,"+"),k=$("#search-filter").val().replace(/ /g,"+");""==h&&(h=$("#search-text-hidden").val().replace(/ /g,"+"),k=$("#search-filter-hidden").val().replace(/ /g,"+"));return WS_PREFIX+"/search/page/"+b+"?q="+h+"&filter="+k}})}catch(b){return!1}},ajaxSearch:function(){xhr&&
4!=xhr.readyState?xhr.abort():xhr=void 0;var b=/^\s*[a-zA-Z0-9 \\s\\-\\.'\\"\\,@\^_=#\$%&\*\(\)\+\-!<>\?\/;:`~\{\[\}\]\|\b]+\s*$/;if(""!=$("#search-text").val()&&!b.test($("#search-text").val()))return!1;timeout&&clearTimeout(timeout);var h=encodeURIComponent($("#search-text").val());timeout=setTimeout(function(){var k=$("#search-filter").val();var l=$.address.value().startsWith(WS_PREFIX+"/search")?"undefined"!=typeof Jmp.Helpers.getUrlParam("r")?Jmp.Helpers.getUrlParam("r"):WS_PREFIX+"/personal":
$.address.value();h?($("#content_data ul li").addClass("blockUI"),$("#content_data").css("height",$(window).height()-113),""!=$("#buckets_container")&&($("h3.title").text("Searching..."),$("#set_favorite").addClass("hide")),$("#header_search_title").text("Searching..."),$("#set_favorite").addClass("hide"),xhr=$.get(WS_PREFIX+"/search?q="+h+"&filter="+k,function(m){Jmp.App.infinitescroll_obj&&(Jmp.App.infinitescroll_obj.infinitescroll("destroy"),$("#search_result").infinitescroll("destroy"));$("#content_data").removeClass("blockUI");
$("#content_data").css("height",0);$("#main_container").html(m);$(".reset_search a.ajax").attr("href",l);Jmp.Helpers.set_focus($("#search-text"));$(document).scrollTop("0px");Jmp.App.changeAddress(WS_PREFIX+"/search?q="+h+"&filter="+k+"&r="+l,!0)})):(""!=$("#buckets_container")&&($("h3.title").text("Search your files"),$("h3.title").prepend('<a href="/" class="icn-back pull-left"></a>')),$("#header_search_title").text("Search your files"),Jmp.Helpers.assign_route_class("search-page"),$("#content_data").removeClass("blockUI").css("height",
0).html('<div class="content_fluid is-empty pull-right"> \t\t\t\t\t\t<div class="empty noborder"> \t\t\t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t\t\t<div class="icon"></div> \t\t\t\t\t\t\t\t<div class="title">No result found</div> \t\t\t\t\t\t\t\t<div class="tagline">Please update your search and try again</div> \t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div> \t\t\t\t\t</div>'),Jmp.Helpers.set_focus($("#search-text")),$(document).scrollTop("0px"))},1E3);h||"Search"===Jmp.App.getView().type||clearTimeout(timeout);
return!1},onCopyMoveItem:function(){var b=[],h=[];"bucket"==$(this).data("type")&&b.push($(this).data("id"));"file"==$(this).data("type")&&h.push($(this).data("id"));var k=b.length+h.length,l=$(this).data("bucket");$.ajax({url:BASEURL_WS+"buckets/get_list/?files_count="+k,success:function(m){Jmp.App.Lightbox.show({type:"copy_move_items",form:"copy_move_files_form",bucket_ids:b,file_ids:h,body:m,total_items:k,bucket_id:l});Jmp.Handler.BucketFiles.js_lightbox_folder_search()}});return!1},onLocateInUploads:function(b){"undefined"==
typeof b&&(b=$(this));console.log("Locating...");b=b.data("id");Jmp.App.imported_id=b}});a.Search=new c})(Jmp.Handler);
$(function(){$("div.btn-cog-wheel .locate").live("click",Jmp.Handler.Search.onLocateInUploads);$("div.btn-cog-wheel").find(".copy_move_item").live("click",Jmp.Handler.Search.onCopyMoveItem);Jmp.Helpers.is_ie()?$("#search-text").live("keyup",function(a){Jmp.Handler.Search.ajaxSearch()}):$("#search-text").live("input",function(a){Jmp.Handler.Search.ajaxSearch()});$(document).ready(function(){$(document).bind("Search_load",Jmp.Handler.Search.onLoad);Jmp.Handler.Search.initialize_infinite_scroll()});
$("#filter_forward li a").live("click",function(a){a=Jmp.Helpers.strip_tags($("#search-text").val());$("#search-filter").val($(this).text().toLowerCase());var c=$("#search-filter").val();$("#filter").html($(this).text()+'<span class="caret"></span>');$("#filter").parent().removeClass("open");""!=a&&Jmp.App.changeAddress(WS_PREFIX+"/search?q="+a+"&filter="+c);return!1})});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("Shared_load"):(Jmp.Handler.Shared.infinite_scroll&&Jmp.Handler.Shared.infinite_scroll.infinitescroll("destroy"),Jmp.Helpers.start_page_loading(),a.Shared.load_content(b),$("#CopyBucketDiv").remove())},updateDate:function(b){var h={};0<b.length&&(h.item_type=b.parent().parent("li").data("item-type"),h.item_code=b.parent().parent("li").data("id"),h.ai=b.parent().parent("li").data("ai"),h.item_date=
b.val(),$.post(BASEURL_WS+"/schedules/update",Jmp.Helpers.get_secure_params(h),function(k){k.status?(b.parent().next().children().text(k.schedule),Jmp.App.Notifications.display_notification({type:"success",message:k.message}).close_notification()):"undefined"!=typeof k.message&&Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification()}))},load_content:function(b){var h=Jmp.App.getView().data.hash;b=Jmp.Helpers.getUrlParam("filter",b);"undefined"!=typeof b?(email=
b,"with-me"==h?$.get(WS_PREFIX+"/shared",Jmp.Helpers.get_secure_params({filter:email,type:"with"}),function(k){$("#main_container").html(k);$(document).scrollTop("0px");Jmp.Handler.Shared.infinite_scroll=$("#share_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_share_filter_with_me_options);$.event.trigger("Shared_load")}):"by-me"==h?$.get(WS_PREFIX+"/shared",Jmp.Helpers.get_secure_params({filter:email,type:"by"}),function(k){$("#main_container").html(k);$(document).scrollTop("0px");Jmp.Handler.Shared.infinite_scroll=
$("#share_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_share_filter_by_me_options);$.event.trigger("Shared_load")}):"scheduled"==h&&$.get(WS_PREFIX+"/schedules",Jmp.Helpers.get_secure_params({filter:email}),function(k){$("#main_container").html(k);$(document).scrollTop("0px");Jmp.Handler.Shared.infinite_scroll=$("#schedule_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_schedule_filter_options);$.event.trigger("Shared_load")})):-1!=h.indexOf("-")?(share_text=h.replace("-",
"_"),$.get(WS_PREFIX+"/shared/"+share_text,function(k){k&&($("#main_container").html(k),$(document).scrollTop("0px"),Jmp.Handler.Shared.infinite_scroll=$("#share_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_share_options,Jmp.Handler.Shared.onContentLoadedviaLazyLoading),$.event.trigger("Shared_load"));k="buckets-page";$("#share_result").hasClass("view-list")&&(k="search-page");Jmp.Helpers.assign_route_class("shared-"+h+"-page "+k);$("#top_welcome_bar").length?$("body").addClass("global-notice"):
$("#download_app_dashboard").length&&$("body").addClass("download-app-notice")}),Jmp.Helpers.update_browser_title("Shared "+share_text.replace("_"," "))):($.get(WS_PREFIX+"/schedules/",function(k){k&&($("#main_container").html(k),$(document).scrollTop("0px"),Jmp.Handler.Shared.infinite_scroll=$("#schedule_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_schedule_options),$.event.trigger("Shared_load"));1<PLANID?Jmp.Helpers.assign_route_class("scheduled-shares-page"):Jmp.Helpers.assign_route_class("scheduled-shares-page free-user");
$("#top_welcome_bar").length?$("body").addClass("global-notice"):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice")}),Jmp.Helpers.update_browser_title("Scheduled Shares"))},onLoad:function(){var b=Jmp.App.getView().data.hash;Jmp.Helpers.end_second_tour_forcefully();Jmp.Helpers.end_tour_forcefully();var h="buckets-page";$("#share_result").hasClass("view-list")&&(h="search-page");Jmp.Helpers.assign_route_class("shared-"+b+"-page "+h);$("#main_container").removeAttr("class");
$('[data-tooltip="true"]').tooltip();$("#top_welcome_bar").length?$("body").addClass("global-notice"):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");Jmp.Helpers.show_announcement_bar();$(".c-avatar").tooltip();Jmp.Helpers.update_browser_title("Shared with me");$("img.lazy").lazyload();ViewerPanel.uninitialize();ViewerPanel.hide().initialize()},infinite_scroll_share_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",
msgText:"",selector:"#share_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#share_container_nav",nextSelector:"#share_container_next_page",itemSelector:"li.grid"},infinite_scroll_share_filter_by_me_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",msgText:"",selector:"#share_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#share_container_nav",nextSelector:"#share_container_next_page",
itemSelector:"li.grid",path:function(b){return WS_PREFIX+"/shared/page_filter_by_me/"+encodeURIComponent(email)+"/"+b}},infinite_scroll_share_filter_with_me_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",msgText:"",selector:"#share_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#share_container_nav",nextSelector:"#share_container_next_page",itemSelector:"li.grid",path:function(b){return WS_PREFIX+
"/shared/page_filter_with_me/"+encodeURIComponent(email)+"/"+b}},infinite_scroll_schedule_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",msgText:"",selector:"#schedule_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#schedule_container_nav",nextSelector:"#schedule_container_next_page",itemSelector:"li.schedule_item",path:function(b){return WS_PREFIX+"/schedules/page/"+b}},infinite_scroll_schedule_filter_options:{loading:{finished:void 0,
finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",msgText:"",selector:"#schedule_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"#schedule_container_nav",nextSelector:"#schedule_container_next_page",itemSelector:"li.schedule_item",path:function(b){return WS_PREFIX+"/schedules/page_filter/"+encodeURIComponent(email)+"/"+b}},onRemoveShare:function(b){var h=$(this);b=h.attr("data-type");var k=$("#"+h.attr("data-id")),l=h.attr("data-item-name");
Jmp.App.Lightbox.show({type:"remove_share",item_type:b,item_name:l},function(m){$(this).html("Removing ...").addClass("disabled");m={};m.share=h.attr("data-share").replace("share-","");$.post(BASEURL_WS+"shared/remove/"+h.attr("data-from"),Jmp.Helpers.get_secure_params(m),function(n){$("#lightbox").find(".cancel").trigger("click");n.status&&k.remove()})})},onViewShareItemDetails:function(b){b=$(this);var h=b.closest("li.grid"),k=h.find(".share_data"),l={};l.item_type=b.attr("data-item-type");l.from_username=
k.find(".from_username").text();l.from_email=k.find(".from_email").text();l.message=k.find(".message").text();l.status=k.find(".status").html();l.modified_date=k.find(".modified_date").text();l.size=h.find(".thumb-meta").find(".size-num").text();l.shared=h.find(".thumb-footer").find(".shared").text();l.type=h.attr("data-type");l.extension=h.attr("data-extension");"folder"==l.item_type?(l.item_name=h.attr("data-name"),l.image="<i class='sicn icn-thumb-"+l.item_type+"' style='width:42px;height:34px;margin-top:-5px;'></i> Folder"):
(l.item_name=h.attr("data-gridname"),h.find(".thumbnail").find("img"),l.image="<i class='sicn icn-thumb-"+l.type+" icn-thumb-"+l.extension+"'></i> "+l.extension+" "+l.type);Jmp.App.Lightbox.show({type:"view_share_item_details",share_info:l});$("#lightbox").find(".modal-share").removeClass(".modal-share").addClass("modal-detail");return!1},onShowScheduleEdit:function(b){Jmp.App.Lightbox.hide();var h=$(this).parents("li").attr("id"),k=$(this).parents("li").data("ai"),l=$(this).parents("li").data("item-type"),
m=$(this).parents("li").data("name"),n=$(this).parents("li").data("username").split(","),p=$(this).parents("li").data("email").split(","),r=$(this).parents("li").data("calander"),q=$.parseJSON($(this).parents("li").find("#opt").val()),u="";$(this).parents("li").find("div.receiver").each(function(){n.push($(this).text())});for(var v=0;v<p.length;v++)"Facebook"!=p[v]&&"Twitter"!=p[v]&&""!=p[v]&&(u+='<li class="acjs-data emx old-email"><a href="#" class="btn btn-blue" data-email='+p[v]+">"+(""!=n[v]?
n[v]:p[v])+'<span class="icn-clear"></span></a></li>');"file"==l&&(m+="."+$(this).parents("li").data("extension"));"undefined"!=typeof $(this).data("status")?(Jmp.App.Lightbox.show({title:""+Jmp.Helpers.formatFileName(m,40),type:"send_email",form:"popup_email_form",item_type:l,item_id:h,submit:"Update"}),$("#share li, div.modal-dialog").removeClass("modal-email-share"),$("#share li, div.modal-dialog").addClass("modal-email-share"),$("ul.modal-email-wrapper").prepend(u),Jmp.Handler.Viewer.getContactList(),
$("li.old-email .icn-clear").click(function(x){$(this).parent().parent().remove();x.preventDefault()})):(Jmp.App.Lightbox.show({title:""+Jmp.Helpers.formatFileName(m,40),type:"send_email",form:"popup_email_form",item_type:l,item_id:h,submit:"Update"}),$("#share li, div.modal-dialog").removeClass("modal-email-share").addClass("modal-email-share"),$("ul.modal-email-wrapper").prepend(u),Jmp.Handler.Viewer.getContactList(),$("li.old-email .icn-clear").click(function(x){$(this).parent().parent().remove();
x.preventDefault()}));h=$("#popup_email_form");"Twitter"==p[0]?($("#modal .schedule_calendar").html(""),$("div.modal-dialog").removeClass("modal-email-share").addClass("modal-twitter-share"),$("#popup_twitter_form .schedule_calendar").html('<span class="icn-schedule-calendar"></span><input type="text" class="distxts" name="email_date" id="email_date" placeholder="" value="'+r+'" style="width:66px;" readonly="" /><span class="caret"></span>')):"Facebook"==p[0]?($("#modal .schedule_calendar").html(""),
$("div.modal-dialog").removeClass("modal-email-share").addClass("modal-facebook-share"),$("#popup_facebook_form .schedule_calendar").html('<span class="icn-schedule-calendar"></span><input type="text" class="distxts" name="email_date" id="email_date" placeholder="" value="'+r+'" style="width:66px;" readonly="" /><span class="caret"></span>')):($("#modal .schedule_calendar").html(""),$("#popup_email_form .schedule_calendar").html('<span class="icn-schedule-calendar"></span><input type="text" class="distxts" name="email_date" id="email_date" placeholder="" value="'+
r+'" style="width:66px;" readonly="" /><span class="caret"></span>'));""!=q&&"undefined"!=typeof q&&null!=q&&("undefined"!=typeof q.eat&&(h.find("#expire_after_type").val(q.eat),1<q.ean&&(q.eat+="s"),h.find("#expire_after").attr("checked",!0),h.find("button.dropdown-toggle").html(q.eat+"<span class='caret'></span>"),h.find("#expire_after_number").val(q.ean)),"undefined"!=typeof q.dd&&null!=q.dd&&h.find("#disable_download").attr("checked",!0));Jmp.Handler.Viewer.setScheduleCalendar();p=$(this).parents("li").find("div.msg-to-receiver").text().trim();
$("#popup_email_form #email_message, #popup_twitter_form #message, #popup_facebook_form #message").text(p.substring(1,p.length-1)).after("<input type='hidden' name='update' value="+k+">");b.preventDefault()},onContentLoadedviaLazyLoading:function(){$(".c-avatar").tooltip()}});a.Shared=new c})(Jmp.Handler);
$(function(){$(document).ready(function(){share_text="with_me";Jmp.Handler.Shared.infinite_scroll=$("#share_result").infinitescroll(Jmp.Handler.Shared.infinite_scroll_share_options,Jmp.Handler.Shared.onContentLoadedviaLazyLoading);$(document).bind("Shared_load",Jmp.Handler.Shared.onLoad)});$("#show_hidden_recipients").live("click",function(a){$(this).hide().prev().removeAttr("class");a.preventDefault()});$("a#edit-share").live("click",Jmp.Handler.Shared.onShowScheduleEdit);$(".remove-share").live("click",
Jmp.Handler.Shared.onRemoveShare);$(".view_share_item_details").live("click",Jmp.Handler.Shared.onViewShareItemDetails);$("#cancel-share").live("click",function(a){var c={},b=this;c.item_type=$(this).parents("li").data("item-type");c.item_code=$(this).parents("li").attr("id");c.ai=$(this).parents("li").data("ai");Jmp.App.Lightbox.show({type:"delete_schedule"},function(){$(this).html("Removing ...").addClass("disabled");$.post(BASEURL_WS+"/schedules/delete",Jmp.Helpers.get_secure_params(c),function(h){h.status?
($("#lightbox .cancel").trigger("click"),$(b).parents("li").remove(),Jmp.App.Notifications.display_notification({type:"success",message:h.message}).close_notification(),1>$("#schedule-result li").length&&($("#schedule-result").remove(),$("#items").html('<div id="splash" class="empty-msg">No shares scheduled</div>'),$("#schemail").removeClass("active"))):(Jmp.App.Notifications.display_notification({type:"error",message:h.message}).close_notification(),$(this).html("Remove").removeClass("disabled"))})});
a.preventDefault()});$("#ui-datepicker-div, .ui-datepicker-prev, .ui-datepicker-next").live("click",function(){return!1});$("form a.cancel").live("click",function(a){a=$(this);"email_date"==a.parent().children("button").attr("id")?(a.parent().children("button").val("Schedule").blur().datepicker("destroy"),$("#popup_email_form input.action").val("Send")):"expire_date"==a.parent().children("button").attr("id")&&a.parent().children("button").val("Date/Time").blur().datepicker("destroy");a.hide();Jmp.Helpers.showCalendar(a.parent().children("button#expire_date"));
return!1});$(".ui-datepicker-close").live("click",function(){""!=Jmp.Handler.Shared.thisCalendarfield&&0<$(Jmp.Handler.Shared.thisCalendarfield).length&&($(Jmp.Handler.Shared.thisCalendarfield).val(Jmp.Handler.Shared.selectedDate),Jmp.Handler.Shared.selectedDate=null,Jmp.Handler.Shared.thisCalendarfield="")});$(".filter_with_me").live("click",function(a){a=$(this).attr("href");Jmp.App.changeAddress(a);return!1})});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("Activities_load"):(Jmp.Helpers.start_page_loading(),a.Activities.load_activities())},load_activities:function(){$("#activities_filter .active").removeClass("active");var b=Jmp.App.getView().data.hash;"undefined"==typeof b&&(b="general");var h=$("#"+b+"_activities");h.parent().addClass("active");Jmp.Helpers.start_page_loading();Jmp.Helpers.update_browser_title(h.text());$.get(WS_PREFIX+"/activities/index/1?activity_origin="+
b,function(k){k?(Jmp.Handler.Activities.infinite_scroll&&Jmp.Handler.Activities.infinite_scroll.infinitescroll("destroy"),$("#main_container").html(k),Jmp.Handler.Activities.infinite_scroll_options.state={currPage:1},Jmp.Handler.Activities.infinite_scroll=$("#activity-list").infinitescroll(Jmp.Handler.Activities.infinite_scroll_options)):(Jmp.Handler.Activities.infinite_scroll&&Jmp.Handler.Activities.infinite_scroll.infinitescroll("destroy"),$("#activity-list").replaceWith('<ul id="activity-list" class="activity-list group items clearfix"><span id="splash" class="empty-msg">No Activity Found.</span></ul>'));
$.event.trigger("Activities_load")})},onLoad:function(){Jmp.Helpers.end_second_tour_forcefully();Jmp.Helpers.end_tour_forcefully();Jmp.Helpers.update_browser_title($("#activities_filter .active a").text());Jmp.Helpers.assign_route_class("activity-page");$("#main_container").removeAttr("class");a.Activities.infinite_scroll=$("#activity-list").infinitescroll(a.Activities.infinite_scroll_options);"undefined"!=typeof window.attach_placeholder&&attach_placeholder();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();
ViewerPanel.dom_parser.assign_url_suffix();$('[data-tooltip="true"]').tooltip();$(ActivityManager.activity_container.get_container_name).find(".badge").remove();setTimeout(function(){$(".activity-new").removeClass("activity-new")},5E3);$("#top_welcome_bar").length?($("body").addClass("global-notice"),Jmp.App.Notifications._adjust_body_on_gloabl_notice()):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");Jmp.Helpers.show_announcement_bar();$(window).scrollTop(0)},get_current_activity_origin:function(){var b=
$("#activities_filter .active a").data("type");"undefined"==typeof b&&(b=Jmp.App.getView().data.hash);return b},infinite_scroll_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",msgText:"",selector:"#activity_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"div#navigation",nextSelector:"div#navigation a:first",itemSelector:"li.js-activity",path:function(b){var h=a.Activities.get_current_activity_origin();
return WS_PREFIX+"/activities/page/"+b+"?activity_origin="+h}}});a.Activities=new c})(Jmp.Handler);$(function(){$(document).bind("Activities_load",Jmp.Handler.Activities.onLoad)});(function(a){function c(){this.adjust_top=120;this.sub_domain=this.domain_url=""}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("Settings_load"):(Jmp.Helpers.start_page_loading(),$.ajax({url:b,success:function(k){$("#main_container").html(k);$.event.trigger("Settings_load")}}))},scroll_to:function(){var b=$(this).data("element");"undefined"!=typeof b&&(b=$("h3[data-this="+b+"]").offset().top,$("aside li").removeClass("active"),$(this).addClass("active"),$(document).unbind("scroll"),
$("html, body").stop().animate({scrollTop:b-a.Settings.adjust_top},500,"easeInOutExpo",function(){$(document).bind("scroll",Jmp.Handler.Settings.scroll)}));return!1},scroll:function(){for(var b=$(document).scrollTop(),h=$("h3[data-this]"),k=0;k<h.length;k++){var l=$(h[k]),m=$(h[k+1]),n=l.offset().top-a.Settings.adjust_top;if(m.length)if(n<=b&&b<m.offset().top-a.Settings.adjust_top){$("ul.nav-settings li").removeClass("active");$('li[data-element="'+l.data("this")+'"]').addClass("active");break}else b<
$(h[0]).offset().top&&($("ul.nav-settings li").removeClass("active"),$('li[data-element="'+$(h[0]).data("this")+'"]').addClass("active"));else $("ul.nav-settings li").removeClass("active"),$('li[data-element="'+$(h[k]).data("this")+'"]').addClass("active")}},view_referrals:function(b){$.get(WS_PREFIX+"/referrals/view_referral_details",function(h){Jmp.App.Lightbox.show({type:"referrals_details",data:h});"undefined"==h||""==h?$(".lightbox").addClass("invite-box empty"):$(".lightbox").addClass("invite-box")});
b.preventDefault()},download_pdf:function(){window.location=WS_PREFIX+"/accounts/download/"+$(this).data("row")},pay_now:function(){var b=$(this);b.html("Processing ...").removeClass("pay_now");$.post(WS_PREFIX+"/accounts/pay_now",Jmp.Helpers.get_secure_params({id:$(this).data("row")}),function(h){1==h.status?(b.removeClass("pay_now").addClass("download_pdf").text("Download Invoice"),Jmp.App.Notifications.display_notification({type:"success",message:h.message}).close_notification()):2==h.status?window.location=
"/plus":111==h.status?stripe.confirmCardPayment(h.cs).then(function(k){console.log(k);k.paymentIntent?(b.text("Pay Now").addClass("pay_now"),b.trigger("click")):(b.text("Pay Now").addClass("pay_now"),Jmp.App.Notifications.display_notification({type:"error",message:k.error.message}).close_notification())}):(b.text("Pay Now").addClass("pay_now"),Jmp.App.Notifications.display_notification({type:"error",message:h.message}).close_notification())})},onUpdateNotifyBilling:function(){var b=0;$("#notify_billing_updates").is(":checked")&&
(b=1);b=Jmp.Helpers.get_secure_params({notify_billing_updates:b});$.post(BASEURL_WS+"settings/update_notify_billing",b,function(h){1==h.status?Jmp.App.Notifications.display_notification({type:"success",message:"Setting updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred. Please try again"}).close_notification()})},onLoad:function(){Jmp.Account.bootstrap();Jmp.Helpers.update_browser_title("Settings");Jmp.Helpers.assign_route_class("settings-page");
$("#main_container").removeAttr("class");"undefined"!=typeof window.attach_placeholder&&attach_placeholder();$("#long_url:radio").is(":checked")&&$("#remove_all_shorts").parent().removeClass("hide").show();$("#top_welcome_bar").length?$("body").addClass("global-notice"):$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");Jmp.App.Notifications._adjust_body_on_gloabl_notice();Jmp.Helpers.show_announcement_bar();Jmp.TeamsConsole.bootstrap();getTeamList();showPrivacyUpgradeTags();
get_privacy_settings();loadChangeTimezone()}});a.Settings=new c})(Jmp.Handler);
$(function(){$(document).bind("Settings_load",Jmp.Handler.Settings.onLoad);$("ul.nav-settings li").live("click touchend",Jmp.Handler.Settings.scroll_to);$("#view_referrals").live("click",Jmp.Handler.Settings.view_referrals);$("div.billing button.download_pdf").live("click",Jmp.Handler.Settings.download_pdf);$("div.billing button.pay_now").live("click",Jmp.Handler.Settings.pay_now);$("#update_notify_billing_option").live("click",Jmp.Handler.Settings.onUpdateNotifyBilling);$(document).unbind("scroll").bind("scroll",
Jmp.Handler.Settings.scroll);$(".close-account").live("click",function(a){$(this).parent().not("ca1")&&$("#form_password").parent().hasClass("hide")?display_delete_account_light_box():(Jmp.Helpers.display_password_authentication_lightbox(display_delete_account_light_box),$("#password_authentication").focus());return!1});$(".export-your-data").live("click",function(a){$(this).parent().not("ca1")&&$("#form_password").parent().hasClass("hide")?display_export_data_light_box():(display_export_data_light_box(),
$("#password_authentication").focus());return!1});$(".btn_zapier_integration").live("click",function(a){"1"==$(this).attr("allowed")?action_integration("zapier"):Jmp.App.Lightbox.show({type:"zapier_integration_popup",state:$(this).html()});return!1});$(".btn_slack_integration").live("click",function(a){if("1"==$(this).attr("allowed")){if("Connect"==$(this).html())return;action_integration("slack")}else Jmp.App.Lightbox.show({type:"slack_integration_popup",state:$(this).html()});return!1});$("#update_notification_form_team").live("click",
function(a){a=$("#slack_channel_id").find(".value").attr("data-value");if(""==a)return Jmp.App.Notifications.display_notification({type:"error",message:"Please select Channel first to proceed"}).close_notification(),!1;var c=$("#file_viewed").is(":checked")?1:0,b=$("#file_downloaded").is(":checked")?1:0,h=$("#file_uploaded").is(":checked")?1:0,k=$("#inbox_shared").is(":checked")?1:0,l=$("#file_commented").is(":checked")?1:0,m=$("#file_mentioned").is(":checked")?1:0;$.ajax({type:"POST",data:Jmp.Helpers.get_secure_params({channel_id:a,
file_viewed_team:c,file_downloaded_team:b,file_uploaded_team:h,inbox_shared_team:k,file_commented_team:l,file_mentioned_team:m}),url:WS_PREFIX+"/teams/action_slack_notifications_team/",success:function(n){"0"==n.error?Jmp.App.Notifications.display_notification({type:"success",message:"Team notifications for Slack updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Something went wrong, please try again later"}).close_notification()}});return!1});
$("#update_notification_form_personal").live("click",function(a){a=$("#slack_channel_id_personal").find(".value").attr("data-value");if(""==a)return Jmp.App.Notifications.display_notification({type:"error",message:"Please select Channel first to proceed"}).close_notification(),!1;var c=$("#file_viewed_personal").is(":checked")?1:0,b=$("#file_downloaded_personal").is(":checked")?1:0,h=$("#inbox_shared_personal").is(":checked")?1:0,k=$("#file_commented_personal").is(":checked")?1:0,l=$("#file_mentioned_personal").is(":checked")?
1:0;$.ajax({type:"POST",data:Jmp.Helpers.get_secure_params({channel_id:a,file_viewed_personal:c,file_downloaded_personal:b,file_uploaded_personal:0,inbox_shared_personal:h,file_commented_personal:k,file_mentioned_personal:l}),url:WS_PREFIX+"/teams/action_slack_notifications_personal/",success:function(m){"0"==m.error?Jmp.App.Notifications.display_notification({type:"success",message:"Personal notifications for Slack updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",
message:"Something went wrong, please try again later"}).close_notification()}});return!1});$("a[href='#change']").live("click",function(a){var c=$(this);c.parent().addClass("hide");c.parent().next().removeClass("hide");"form_username"!=c.parent().parent().attr("id")||ViewerPanel.is_mobile||($('label[for="firstName"] strong').text("First Name"),$('label[for="lastName"]').removeClass("hide"));a.preventDefault()});$("#hide-password-form").live("click",function(a){$(this).parent().parents("#form_password").find(".show-on-demand").addClass("hide");
$(this).parents("#form_password").find(".show-always").removeClass("hide");a.preventDefault()});$("#hide-create-password-form").live("click",function(a){$(this).parent().parents("#form_create_password").find(".show-on-demand").addClass("hide");$(this).parents("#form_create_password").find(".show-always").removeClass("hide");a.preventDefault()});$("#hide-username-form, #hide-email-form").live("click",function(a){var c=$(this);c.parent().addClass("hide");c.parent().prev().removeClass("hide");"form_username"!=
c.parent().parent().attr("id")||ViewerPanel.is_mobile||($('label[for="firstName"] strong').text("First and Last name"),$('label[for="lastName"]').addClass("hide"));a.preventDefault()});$("#long_url:radio").live("change",function(){$(this).is("checked")?$("#remove_all_shorts").parent().addClass("hide"):($("#remove_all_shorts").parent().removeClass("hide"),$("#remove_all_shorts").parent().show())});$("#short_url:radio").live("change",function(){$(this).is("checked")?$("#remove_all_shorts").parent().removeClass("hide"):
($("#remove_all_shorts").parent().addClass("hide"),$("#remove_all_shorts").attr("checked",!1),$("#urlshortner_form_message").addClass("hide"))});$("#remove_all_shorts").live("change",function(){$(this).is(":checked")?$("#urlshortner_form_message").removeClass("hide"):$("#urlshortner_form_message").addClass("hide")});$("#cd").live("change",function(){$("#cd_ssl").removeAttr("checked")});$("#cd_ssl").live("change",function(){$(this).is(":checked")?($("#custom_domain_form").find(".custom-branding-notice").removeClass("hide"),
$("#custom_domain_form").find(".custom-branding-error").addClass("hide")):$("#custom_domain_form").find(".custom-branding-notice").addClass("hide")});$(".edit-address").click(function(){$(this).hide();$(".address-list").is(":hidden")?$(".address-list").slideDown("slow"):$(".address-list").slideUp("slow")});$("#invite").live("click",function(){Jmp.App.changeAddress(WS_PREFIX+"/referrals")});$(".theme-shot-wrapper").live("click",function(){$(".theme-shot-wrapper").removeClass("active");$(this).addClass("active");
$("#viewer_form .note-wrapper").removeClass("hide")});$(".video-options-wrapper").live("click",function(){$(".video-options-wrapper").removeClass("active");$(this).addClass("active")});$(".view-shot-wrapper").live("click",function(){$(".view-shot-wrapper").removeClass("active");$(this).addClass("active");$("#files_view_form .note-wrapper").removeClass("hide")});$("#setup_inbox_form").live("click",function(){$("#inbox_form").parent().removeClass("setup-inbox").addClass("edit-inbox");$("#inbox_field").removeClass("hide");
$(".inbox-info").addClass("hide");return!1});$("#setting_palyment_btn").live("click",function(){$("#setting_payment_paln").removeClass("hide");$("#setting_payment_plan_top").addClass("hide");return!1});$("#hide_console_payment_form").live("click",function(){$("#setting_payment_plan_top").removeClass("hide");$("#setting_payment_paln").addClass("hide");return!1});$("#edit_inbox_form").live("click",function(){$("#inbox_field").removeClass("hide");$(".inbox-info").addClass("hide");$(this).addClass("hide");
$("#hide_inbox_form").removeClass("hide");$("#update_inbox_form").removeClass("hide").text("Update");return!1});$("#hide_inbox_form").live("click",function(){$("#inbox_field").addClass("hide");$(".inbox-info").removeClass("hide");$(this).addClass("hide");$("#edit_inbox_form").removeClass("hide");$("#update_inbox_form").addClass("hide");return!1});$("#use_anotherdomain").live("click",function(a){a.preventDefault();$(this).hide();a=Jmp.Helpers.strip_tags($("#cdhp").val());""!=a&&-1<a.search("http://")&&
(a=a.replace("http://",""));""!=a&&-1<a.search("https://")&&(a=a.replace("https://",""));var c=a.split("/");c=c[0].split(".");2<=c.length&&(a=c[c.length-2]+"."+c[c.length-1]);$("#redirect_url_exp").hide();""!=$("#cd").val()?Jmp.Handler.Settings.sub_domain=Jmp.Helpers.strip_tags($("#cd").val()):Jmp.Handler.Settings.sub_domain="";""!=Jmp.Handler.Settings.domain_url?$("#cd").val(Jmp.Handler.Settings.domain_url):$("#cd").val("");$("#cd").attr("placeholder","example.com").css("width","250px");$(this).parent().removeClass("form-sd").addClass("form-ad");
$("#use_subdomain").show();$("#custom_domain_form").find("span.js-csd-tip").text("This domain name will be used as a personalized URL for all the links you share. We recommend you use a subdomain of "+a)});$("#use_subdomain").live("click",function(a){a.preventDefault();$(this).parent().removeClass("form-ad").addClass("form-sd");$(this).hide();a=Jmp.Helpers.strip_tags($("#cdhp").val());""!=a&&-1<a.search("http://")&&(a=a.replace("http://",""));""!=a&&-1<a.search("https://")&&(a=a.replace("https://",
""));var c=a.split("/");c=c[0].split(".");2<=c.length&&(a=c[c.length-2]+"."+c[c.length-1]);$("#redirect_url_exp").show();""!=$("#cd").val()?Jmp.Handler.Settings.domain_url=Jmp.Helpers.strip_tags($("#cd").val()):Jmp.Handler.Settings.domain_url="";$("#cd").val(Jmp.Handler.Settings.sub_domain).attr("placeholder","files, cloud, etc").css("width","140px");$("#use_anotherdomain").show();$("#custom_domain_form").find("span.js-csd-tip").text("Tip: Please enter a subdomain of "+a+" which you would like to use to share your files, e.g, cloud."+
a+", files."+a+", etc.")});$(".dismiss_announcment_bar .icn-close").live("click",function(a){a=$(this).parent();var c=a.attr("data-code");a.parent().remove();$("body").removeClass("global-notice");Jmp.App.Notifications._reset_body_spacing_on_gloabl_notice_close();$.post(WS_PREFIX+"/dismiss_announcement",Jmp.Helpers.get_secure_params({code:c}),function(b){});return!1});$(".dismiss_upload_limit_bar .icn-close").live("click",function(a){$(this).parent().parent().remove();$("body").removeClass("global-notice");
Jmp.App.Notifications._reset_body_spacing_on_gloabl_notice_close();$.post(WS_PREFIX+"/files/dismiss_upload_limit_notification",Jmp.Helpers.get_secure_params({type:"upload_limit"}),function(c){});return!1});$(".dismiss_request_upgrade .icn-close").live("click",function(a){$(this).parent().parent().remove();$("body").removeClass("global-notice");Jmp.App.Notifications._reset_body_spacing_on_gloabl_notice_close();$.post(WS_PREFIX+"/files/dismiss_notification",Jmp.Helpers.get_secure_params({code:$(this).attr("data-code"),
purpose:$(this).attr("data-purpose"),type:$(this).attr("data-type")}),function(c){});return!1});$("#firstName, #lastName, #email, #confirm_email, #account_password, #old_password, #new_password, #confirm_new_password, #cnew_password, #confirm_cnew_password, #select_city, #cdhp, #cd").live("keypress",function(a){var c="";switch($(a.target).attr("id")){case "firstName":case "lastName":c="update_username";break;case "email":case "confirm_email":case "account_password":c="update_email";break;case "old_password":case "new_password":case "confirm_new_password":c=
"update_password";break;case "cnew_password":case "confirm_cnew_password":c="create_password";break;case "select_city":c="update_timezone_form";break;case "cdhp":c="update_domain_form";break;case "cd":c="update_custom_domain_form"}if(13==a.which)return $("#"+c).trigger("click"),!1});$(".restricted_acces_cps_share .btn-add").live("click",onAddLnkPrivacyEmail);$(".btn-save-privacy-setting").live("click",savePrivacySettings);$(".update-invoice-name").live("click",saveInvoiceName);$(".update-invoice-email").live("click",
saveInvoiceEmail);$(".wrk_update_comments").live("click",onSaveCommentStatus);$("#form_business_sso").live("submit",function(){$("#update_sso_setup").html("Updating ...").addClass("disabled").attr("disabled",!0);var a=Jmp.Helpers.queryStringArrayToJSON($(this).serializeArray());$.post($(this).attr("action"),Jmp.Helpers.get_secure_params(a),function(c){1==c.status?($("#load_url").attr("href",c.admin_link),window.location.href=c.admin_link):2==c.status?Jmp.App.Notifications.display_notification({type:"success",
message:c.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:c.message}).close_notification();$("#update_sso_setup").html("Update").removeClass("disabled").removeAttr("disabled")});return!1});$("#delete_sso_setup").live("click",function(){var a=$(this).data("org");Jmp.App.Lightbox.show({type:"generic_confirmation_dialog",header:"Delete SSO Configuration?",body:"Removing SSO will force your team members to sign in using their last login method before SSO was enabled. If they did not sign up using any login method, they can reset their password and then sign in using their login credentials. Are you sure you want to continue?",
buttons:[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}]},function(){var c=$(this);c.html("Deleting ...").addClass("disabled").attr("disabled",!0);$.post(WS_PREFIX+"/settings/delete_sso",Jmp.Helpers.get_secure_params({org_id:a}),function(b){1==b.status?(Jmp.App.Lightbox.hide(),$("#sso_name").val(""),$("#sso_domain").val(""),$("div.input-lg").html(""),$("#sso_implement").removeAttr("checked"),c.html("Delete").removeClass("disabled").removeAttr("disabled").addClass("hide"),$(".sso_status").removeClass("active"),
Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification(),setTimeout(function(){window.location=""},3E3)):(Jmp.App.Lightbox.hide(),c.html("Delete").removeClass("disabled").removeAttr("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:b.message}).close_notification())})});return!1});if(1==ACCESS_LEVEL||2==ACCESS_LEVEL){const a=new URLSearchParams(window.location.search);a.has("addon")&&"yes"===a.get("addon")&&upgradeMix()}$("#copy_subdomain, #copy_target_domain").live("click",
function(){if("undefined"!=typeof Clipboard&&Clipboard.is_supported){var a=this.parent().find("span").text();this.after("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; z-index: -3000;' value='"+a+"' />");$("#clipboard_textbox").focus().get(0).setSelectionRange(0,a.length);document.execCommand("copy");$("#clipboard_textbox").remove();Jmp.App.Notifications.display_notification({type:"success",message:"Copied successfully"}).close_notification()}})});
function loadChangeTimezone(){ViewerPanel.is_mobile||$("#select_city").autocomplete({source:function(a,c){$("#select_city").next("div").show();$.post(WS_PREFIX+"/settings/search_city",Jmp.Helpers.get_secure_params({maxRows:15,name_startsWith:a.term}),function(b){c($.map(b,function(h){return{label:h.city+(h.state?" - "+h.state:"")+" - "+h.country_name,value:h.city+(h.state?" - "+h.state:"")+" - "+h.country_name,row:h.id,local_time:h.local_time}}));$("#select_city").next("div").hide()})},minLength:2,
select:function(a,c){$("#timezone_form p.dtl").html("The local time here is "+c.item.local_time+"<span class='icon icn-timer'></span>");$("#timezone_form #tid").val(c.item.row);$(this).val(c.item.value)},open:function(){var a=$(this).offset();$("#timezone_form #tid").attr("value","");$("ul.ui-autocomplete").css({left:a.left+"px",top:a.top+$(this).outerHeight()+"px"})},close:function(){$(this).next("div").hide();$("ul.ui-autocomplete li").remove()}})}
function onSaveCommentStatus(){var a=$("input[name=comments_status_outsiders]:checked").val();a={comments_status:$("input[name=comments_status]:checked").val(),comments_status_outsiders:a};a=Jmp.Helpers.get_secure_params(a);$.post(BASEURL_WS+"settings/update_comments_settings",a,function(c){1==c.status?Jmp.App.Notifications.display_notification({type:"success",message:"Setting updated successfully"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred. Please try again"}).close_notification()})}
function get_privacy_settings(){$.get(BASEURL_WS+"settings/get_global_privacy_setting",[],function(a){1==a.success&&(a=$(".lnk-privacy-menu li[data-val='"+a.settings.privacy_setting+"']"),0<a.length&&($(".lnk-privacy-menu .selected").removeClass("selected"),a.addClass("selected"),a=$(".lnk-privacy-menu .selected a").html(),$(".lnk-privacy-txt").html(a),a=$(".lnk-privacy-menu li.selected").attr("data-val"),a=Jmp.App.Lightbox._get_lnk_privacy_foot_note(a),$(".cta_wind_dropdown .info_note").html(a)))})}
function saveInvoiceName(a){var c=$(a.currentTarget);a={name_on_invoice:$(".name_on_invoice").val()};a=Jmp.Helpers.get_secure_params(a);$.post(BASEURL_WS+"teams/save_billing_settings",a,function(b){1==b.success?(Jmp.App.Notifications.display_notification({type:"success",message:"Invoice name has been updated"}).close_notification(),"name_on_invoice"in b.data&&$("#name_on_invoice_label").html(b.data.name_on_invoice),c.parents().find(".cancel_chnges_settings").trigger("click")):Jmp.App.Notifications.display_notification({type:"error",
message:b.message}).close_notification()})}
function saveInvoiceEmail(a){var c=$(a.currentTarget);a={email_on_invoice:$(".email_on_invoice").val()};a=Jmp.Helpers.get_secure_params(a);$.post(BASEURL_WS+"teams/save_billing_settings",a,function(b){1==b.success?(Jmp.App.Notifications.display_notification({type:"success",message:"Invoice email has been updated"}).close_notification(),"email_on_invoice"in b.data&&$("#email_on_invoice_label").html(b.data.email_on_invoice),c.parents().find(".cancel_chnges_settings").trigger("click")):Jmp.App.Notifications.display_notification({type:"error",
message:b.message}).close_notification()})}
function savePrivacySettings(){var a=$(".lnk-privacy-menu li.selected").attr("data-val"),c=[],b={setting_option:a};"emails"==a?($(".email_invitee_list_cps li span.invitee_email").each(function(h,k){c.push($(k).html())}),b.users=c):"password"==a&&(b.password=$("#privacy_password").val());a=Jmp.Helpers.get_secure_params(b);$.post(BASEURL_WS+"settings/save_privacy_settings",a,function(h){1==h.success&&Jmp.App.Notifications.display_notification({type:"success",message:"Privacy Settings have been saved"}).close_notification()})}
function onAddLnkPrivacyEmail(){for(var a=$(".email-cps-holder").find("li.acjs-data"),c=0;c<a.length;c++){var b=$(a[c]).find("a").attr("data-email");Jmp.App.Lightbox._validateEmail(b)&&($(".email-cps-holder input").val(""),$(".modal-cps .btn-save").removeClass("disabled"),$(".email_invitee_list_cps ul").append("<li><span class='invitee_email'>"+b+"</span><span class='icn-close'></span></li>"))}$(".email-cps-holder .icn-clear").trigger("click")}
function showPrivacyUpgradeTags(){2<=PLANID&&$(".lnk-privacy-menu .utp.plus").remove();Jmp.Helpers.isBusinessOrHigherPlanByPlanID(PLANID)&&$(".lnk-privacy-menu .utp.business").remove()}
function display_export_data_light_box(){$.ajax({type:"GET",url:WS_PREFIX+"/teams/get_team_members/",success:function(a){Jmp.App.Lightbox.show({type:"export_data",members:a},function(){$(this).html("Downloading ...").addClass("disabled");var c=!1,b=Jmp.Helpers.strip_tags($("#export_of").val()),h="";$.ajax({type:"POST",data:Jmp.Helpers.get_secure_params({export_of:b}),url:WS_PREFIX+"/accounts/validate_export_user/",success:function(k){h=k.token;c=!0},async:!1});c&&(window.location=WS_PREFIX+"/export/"+
h,Jmp.App.Lightbox.hide())})}})}
function action_integration(a){$.ajax({type:"POST",data:Jmp.Helpers.get_secure_params({app_name:a}),url:WS_PREFIX+"/teams/action_integration/",success:function(c){"0"==c.error&&("1"==c.action_type?"zapier"==a?($(".btn_zapier_integration").html("Connect"),$(".btn_zapier_integration").removeClass("btn-red").addClass("btn-blue"),$("#zapier_help_link").attr("href","https://support.jumpshare.com/article/230-how-to-connect-jumpshare-to-zapier-and-add-a-zap"),$("#zapier_help_link").html("Learn to connect Zapier")):($(".btn_slack_integration").html("Connect"),
$(".btn_slack_integration").removeClass("btn-red").addClass("btn-blue"),location.reload()):"zapier"==a?($(".btn_zapier_integration").html("Disconnect"),$(".btn_zapier_integration").removeClass("btn-blue").addClass("btn-red"),$("#zapier_help_link").attr("href","/integrations/zapier"),$("#zapier_help_link").html("Example Zaps")):($(".btn_slack_integration").html("Disconnect"),$(".btn_slack_integration").removeClass("btn-blue").addClass("btn-red")))}})}
function getTeamList(){var a=[""];$.get(WS_PREFIX+"/teams/get_team_members?scu=true",function(c){0<c.length?(a=c.map(function(b){return b.email+"|"+b.full_name}),$(".email-cps-holder").autoCompleteJS({urlLookup:a,acOptions:{allowCustom:!0,attachTo:".email-cps-holder",suggestionTop:"138px"}})):$(".email-cps-holder").autoCompleteJS({acOptions:{allowCustom:!0}})})}
function display_delete_account_light_box(){Jmp.App.Lightbox.show({type:"delete_account"},function(){var a=this;$(this).html("Closing ...").addClass("disabled");var c=Jmp.Helpers.strip_tags($("#delete_account_reason").val());if(""==c.trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your reason for closing account"}).close_notification(),$(this).html("Close my account").removeClass("disabled"),!1;$.post(BASEURL_WS+"teams/delete_account",Jmp.Helpers.get_secure_params({reason:c}),
function(b){1==b.status?(Jmp.App.Lightbox.hide(),window.location="/logged-out"):(Jmp.App.Notifications.display_notification({type:"error",message:b.message}).close_notification(),$(a).html("Close my account").removeClass("disabled"))})})};timeout=xhr=void 0;
(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("TeamsConsole_load"):(Jmp.Helpers.start_page_loading(),$.ajax({url:b,success:function(k){$("#main_container").html(k);$(window).scrollTop(0);$.event.trigger("TeamsConsole_load")}}))},processInviteForm:function(b){for(var h=[],k=$(".acjs-data"),l=k.length,m=0;m<l;m++){var n=k.eq(m);h.push(n.find("a").attr("data-email"))}if(0==h.length)return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification(),
$(this).one("click",arguments.callee),!1;k={};k.emails=h;k.message=$("#invite_members_message").val();k.src="undefined"!=typeof b?b:"";this.send_invites(k)},send_invites:function(b){var h={};h.emails=b.emails;h.message=b.message;if("setup"==b.src){var k=$("#btn_invite_members").text();$("#btn_invite_members").attr("disabled",!0).text("Inviting ...").addClass("disabled")}else $("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Inviting ...").addClass("disabled");$.post(WS_PREFIX+
"/teams/send_invites",Jmp.Helpers.get_secure_params(h),function(l){"setup"!=b.src&&Jmp.App.Lightbox.hide();if(l.status){var m=$(".team_invite").find(".email"),n=m.length,p=l.invitations,r=p.length,q=l.pending_invitations;l=p[0].email;1<p.length&&(l=l+" and "+(p.length-1)+" other"+(1<p.length-1?"s":""));l="Invitation sent to "+l;if("setup"!=b.src){$("#invitation_count").text(q);for(q=0;q<r;q++){for(var u=!0,v=p[q],x=0;x<n;x++){var y=m.eq(x);$.trim(y.text())==v.email&&(u=!1)}u&&$("#members_list").append(v.template)}Jmp.App.Notifications.display_notification({type:"success",
message:l}).close_notification()}else Jmp.Helpers.set_cookie("accmsg",l),window.location=WS_PREFIX+"/settings/workspace#general"}else l.message&&"members_cant_invite"==l.message?Jmp.App.Notifications.display_notification({type:"error",message:"You are not allowed to invite new members."}).close_notification():l.message&&"members_cant_invite_limit"==l.message?Jmp.App.Notifications.display_notification({type:"info",message:"You have exceeded the hourly sending limit. Try again after an hour."}).close_notification():
l.message&&"domain_mismatch"==l.message?Jmp.App.Notifications.display_notification({type:"info",message:"Only company domain members can be invited. To change this, contact admin."}).close_notification():l.message&&"exceeded_member_invite_limit"==l.message?l.invite_limit&&100==l.invite_limit?Jmp.App.Notifications.display_notification({type:"info",message:"You can only invite 100 team members per hour. Please try again later."}).close_notification():l.invite_limit&&3==l.invite_limit?Jmp.App.Notifications.display_notification({type:"info",
message:"You can only invite 3 team members per hour. Please try again later."}).close_notification():Jmp.App.Notifications.display_notification({type:"info",message:"You have exceeded the limit of team member invite. Please try again later."}).close_notification():l.message&&"exceeded_member_invite_limit_out_org"==l.message?Jmp.App.Notifications.display_notification({type:"info",message:"You can only invite 3 members outside your company per hour. Please try again later."}).close_notification():
l.message&&"exceeded_member_reinvite_limit"==l.message?Jmp.App.Notifications.display_notification({type:"info",message:"You can only resend invitation to 5 members per hour. Please try again later."}).close_notification():Jmp.App.Notifications.display_notification({type:"info",message:"Member(s) already part of a team"}).close_notification(),"setup"==b.src&&$("#btn_invite_members").attr("disabled",!1).text(k).removeClass("disabled")})},resend_invitation:function(b){var h={};h.emails=[b];h.message=
"resend";this.send_invites(h)},remove_invitation:function(b){var h=b.parents(".team_invite"),k=h.find(".email").text();Jmp.App.Lightbox.show({type:"remove_invitation",email:k},function(l){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Cancelling ...").addClass("disabled");$.post(WS_PREFIX+"/teams/cancel_invite",Jmp.Helpers.get_secure_params({email:k}),function(m){Jmp.App.Lightbox.hide();m.status?(h.remove(),m=m.pending_invitations,$("#invitation_count").text(m),Jmp.App.Notifications.display_notification({type:"success",
message:"Invitation cancelled successfully"}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})},make_owner:function(b){var h=b.parents(".team_member"),k=h.find(".name").text().trim();Jmp.App.Lightbox.show({type:"make_owner",member_name:k},function(l){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Wait ...").addClass("disabled");l=h.find(".email").text();$.post(WS_PREFIX+"/teams/make_owner",
Jmp.Helpers.get_secure_params({email:l}),function(m){Jmp.App.Lightbox.hide();m.status?(h.replaceWith(m.new_owner_template),Jmp.App.Notifications.display_notification({type:"success",message:k+" is now the owner"}).close_notification(),setTimeout(function(){window.location.reload(1)},2E3)):Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})},make_admin:function(b){var h=b.parents(".team_member"),k=h.find(".name").text();Jmp.App.Lightbox.show({type:"make_admin",
member_name:k},function(l){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Wait ...").addClass("disabled");l=h.find(".email").text();$.post(WS_PREFIX+"/teams/make_admin",Jmp.Helpers.get_secure_params({email:l}),function(m){Jmp.App.Lightbox.hide();m.status?(h.replaceWith(m.new_admin_template),Jmp.App.Notifications.display_notification({type:"success",message:k+" is now an administrator"}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})},
remove_admin_status:function(b){var h=b.parents(".team_member"),k=h.find(".name").text();Jmp.App.Lightbox.show({type:"remove_admin_status",admin_name:k},function(l){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Wait ...").addClass("disabled");l=h.find(".email").text();$.post(WS_PREFIX+"/teams/remove_admin_status",Jmp.Helpers.get_secure_params({email:l}),function(m){Jmp.App.Lightbox.hide();1==m.status?(h.replaceWith(m.new_member_template),Jmp.App.Notifications.display_notification({type:"success",
message:k+" removed as admin"}).close_notification()):-1==m.status?Jmp.App.Notifications.display_notification({type:"error",message:"Please set another user as admin and ask that admin to remove you from the team"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})},reset_password:function(b){var h=b.parents(".team_member"),k=h.find(".name").text();Jmp.App.Lightbox.show({type:"reset_password",user_name:k},function(l){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",
!0).text("Resetting ...").addClass("disabled");l=h.find(".email").text();$.post(WS_PREFIX+"/teams/reset_password",Jmp.Helpers.get_secure_params({email:l}),function(m){Jmp.App.Lightbox.hide();if(m.status)Jmp.App.Notifications.display_notification({type:"success",message:"Reset password email sent to "+k}).close_notification();else{var n="Some error occurred. Please try again later.";"undefined"!==typeof m.message&&(n=m.message);Jmp.App.Notifications.display_notification({type:"error",message:n}).close_notification()}})})},
remove_user:function(b){var h=b.parents(".team_member"),k=h.find(".name").text();Jmp.App.Lightbox.show({type:"remove_user_confirmation",user_name:k},function(l){Jmp.App.Lightbox.show({type:"remove_user",user_name:k},function(m){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Removing ...").addClass("disabled");m=h.find(".email").text();var n=$("input[name=member_files]:checked").val();$.post(WS_PREFIX+"/teams/remove_user",Jmp.Helpers.get_secure_params({email:m,member_files:n}),
function(p){Jmp.App.Lightbox.hide();1==p.status?(h.remove(),"undefined"!=typeof p.members_count&&$("#members_count").text(p.members_count),Jmp.App.Notifications.display_notification({type:"success",message:k+" has been removed successfully"}).close_notification()):-1==p.status?Jmp.App.Notifications.display_notification({type:"error",message:"Please set another user as admin and ask that admin to remove you from the team"}).close_notification():-2==p.status?Jmp.App.Notifications.display_notification({type:"error",
message:"Access denied. Owner account can't be removed"}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})})},memberSearch:function(){xhr&&4!=xhr.readyState?xhr.abort():xhr=void 0;var b=/^\s*[a-zA-Z0-9 \\s\\-\\.'\\"\\,@\^_=#\$%&\*\(\)\+\-!<>\?\/;:`~\{\[\}\]\|\b]+\s*$/;if(""!==$("#search-members-text").val()&&!b.test($("#search-members-text").val()))return!1;timeout&&clearTimeout(timeout);timeout=setTimeout(function(){var h=
encodeURIComponent($("#search-members-text").val());if(""!==h){var k=$("#header_search_title").text();$("h3.title").text("Searching...");$("#header_search_title").text("Searching...");$("#content").addClass("blockUI");$("#content").css("height",$(window).height()-113);xhr=$.get(WS_PREFIX+"/teams/search?q="+h,function(l){$("#members_list tr").addClass("hide");if(0===l.matches.length)$(".no-members-found").removeClass("hide");else{$(".no-members-found").removeClass("hide").addClass("hide");for(var m in l.matches)$("#members_list tr td.email:contains('"+
l.matches[m].email+"')").parent().removeClass("hide")}$("h3.title").text("");$("#header_search_title").text(k);$("#content").removeClass("blockUI");Jmp.Helpers.set_focus($("#search-members-text"))})}else $("#members_list tr").removeClass("hide"),$(".no-members-found").removeClass("hide").addClass("hide")},1E3);return!1},update_seats:function(b){var h=$(this);b=$(this).attr("data-seats");var k=$(this).data("allowed-seats");Jmp.App.Lightbox.show({type:"add_seats",seats:b},function(){$("#modal").find("button.btn-blue").attr("disabled",
!0).addClass("disabled");var l=$("#new_seats").val();l<k?($("#modal").find("button.btn-blue").removeAttr("disabled").removeClass("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:"You cannot set less than "+k+" seats"}).close_notification()):$.post(WS_PREFIX+"/teams/update_seats",Jmp.Helpers.get_secure_params({seats:l}),function(m){$("#modal").find("button.btn-blue").removeAttr("disabled").removeClass("disabled");Jmp.App.Lightbox.hide();1==m.status?(h.attr("data-seats",
l),h.closest(".workspace_seats_info").find("strong").html(l+" seats"),Jmp.App.Notifications.display_notification({type:"success",message:m.message}).close_notification()):2==m.status?stripe.confirmCardPayment(m.cs).then(function(n){n.paymentIntent?$.post(WS_PREFIX+"/teams/update_seats",Jmp.Helpers.get_secure_params({seats:l,piid:n.paymentIntent.id}),function(p){1==p.status?(h.attr("data-seats",l),h.closest("workspace_seats_info").find("strong").html(l+" seats"),Jmp.App.Notifications.display_notification({type:"success",
message:p.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:p.message}).close_notification()}):Jmp.App.Notifications.display_notification({type:"error",message:n.error.message}).close_notification()}):Jmp.App.Notifications.display_notification({type:"error",message:m.message}).close_notification()})});return!1},onLoad:function(){Jmp.Helpers.update_browser_title("Admin Console");Jmp.TeamsConsole.bootstrap();Jmp.Helpers.assign_route_class("settings-page teams");
$("#main_container").removeAttr("class");$("#top_welcome_bar").length&&$("body").addClass("global-notice");Jmp.App.Notifications._adjust_body_on_gloabl_notice();Jmp.Helpers.show_announcement_bar()}});a.TeamsConsole=new c})(Jmp.Handler);
Jmp.TeamsConsole={member_settings:{form:{name:"#member_settings_form",submit_button:"#update_member_settings",form:void 0,old_values:{},bootstrap:function(){this.form=$(this.name);this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){SHORT_BASEURL=a.sUrl;Jmp.App.Notifications.display_notification({type:"success",
message:"Settings updated successfully"}).close_notification();$("#remove_all_shorts",this.form).removeAttr("checked");$("#urlshortner_form_message").addClass("hide");this.populate_old_values()},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},populate_old_values:function(){this.old_values={};$("#short_url").length&&(this.old_values.urlshortner=$("#short_url").get(0).checked?"short_url":"long_url","long_url"==
this.old_values.urlshortner&&(this.old_values.remove_all_shorts=$("#remove_all_shorts").get(0).checked))},verify_if_changes_applied:function(){var a=!0,c=$("#short_url").get(0).checked?"short_url":"long_url";this.old_values.urlshortner!=c?a=!1:"long_url"==this.old_values.urlshortner&&this.old_values.remove_all_shorts!=$("#remove_all_shorts").get(0).checked&&(a=!1);return a}},bootstrap:function(){this.form.bootstrap()},verify_if_changes_applied:function(){return this.form.verify_if_changes_applied()}},
business:{business_name:{name:"business_name",selector:"#",error_placeholder:{name:"#business_name_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){$(".workspace_dropdown.main h4, .workspace_act_dropdown li.active h4").text(a);
WORKSPACE_NAME=a}},domain_names:{name:"domain_names",selector:"#",error_placeholder:{name:"#business_name_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){}},
businessNameForm:{name:"#form_business_name",submit_button:"#update_business_name",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==Jmp.Helpers.strip_tags(this.controls.business_name.get_value()).trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid Workspace name"}).close_notification(),
!1;$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){this._clear_error_messages();var c=$("#business_name").val();this.controls.business_name.set_new_name_at_front_end(c);Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();this.populate_old_values()}else"undefined"!=typeof a.response.business_name&&""!=a.response.business_name&&(Jmp.App.Notifications.display_notification({type:"error",
message:a.response.business_name}).close_notification(),ViewerPanel.is_mobile&&$("#business_name").addClass("has-error"))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},
message_placeholder:{name:"#form_business_name",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.business_name=$("#business_name").val()},verify_if_changes_applied:function(){var a=!0,c=$("#business_name").val();this.old_values.business_name!=c&&(a=!1);return a}},domainNameForm:{name:"#form_domain_names",submit_button:"#update_domain_names",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=$(this.name);this.controls=a;this.populate_old_values();
this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){if(""==Jmp.Helpers.strip_tags(this.controls.domain_names.get_value()).trim()&&""==$("#domain_names").data("value"))return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter at least one domain."}).close_notification(),!1;$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==
a.status){this._clear_error_messages();var c=$("#domain_names").val();this.controls.domain_names.set_new_name_at_front_end(c);Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();this.populate_old_values()}else"undefined"!=typeof a.response.message&&""!=a.response.message&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.message}).close_notification(),ViewerPanel.is_mobile&&$("#domain_names").addClass("has-error"))},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_domain_names",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.domain_names=
$("#domain_names").val()},verify_if_changes_applied:function(){var a=!0,c=$("#domain_names").val();this.old_values.domain_names!=c&&(a=!1);return a}},business_domain:{name:"business_domain",selector:"#",error_placeholder:{name:"#business_domain_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),
a)},get_name:function(){return this.selector+this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){a=Jmp.Helpers.encode_string(a);$("#form_business_domain").find("div.show-always").html(a+" <a style='color: #168EEA; padding-left: 6px;' href='#change'> Change</a>");$(".dropdown-menu").find(".dropdown-title").text(a)}},businessDomainForm:{name:"#form_business_domain",submit_button:"#update_business_domain",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=
$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){this._clear_error_messages();var c="undefined"!=typeof a.business_domain&&""!=a.business_domain?a.business_domain:$("#business_domain").val();this.controls.business_domain.set_new_name_at_front_end(c);
Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();$("#update_business_domain").parent().addClass("hide");$("#update_business_domain").parent().prev().removeClass("hide");this.populate_old_values()}else"undefined"!=typeof a.response.business_domain&&""!=a.response.business_domain&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.business_domain}).close_notification(),ViewerPanel.is_mobile&&$("#business_domain").addClass("has-error"))},
_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_business_domain",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.business_domain=
$("#business_domain").val()},verify_if_changes_applied:function(){var a=!0,c=$("#business_domain").val();this.old_values.business_domain!=c&&(a=!1);return a}},business_address:{name:"business_address",selector:"#",error_placeholder:{name:"#business_address_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),
a)},get_name:function(){return this.selector+this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){a=Jmp.Helpers.encode_string(a);$("#form_business_address").find("div.show-always").html(a+" <a style='color: #168EEA; padding-left: 6px;' href='#change'> Change</a>");$(".dropdown-menu").find(".dropdown-title").text(a)}},businessAddressForm:{name:"#form_business_address",submit_button:"#update_business_address",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=
$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){this._clear_error_messages();var c="undefined"!=typeof a.business_address&&""!=a.business_address?a.business_address:$("#business_address").val();this.controls.business_address.set_new_name_at_front_end(c);
$("#form_business_address_lbl").html(c);Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();$("body").removeClass("inline_modal_open");this.populate_old_values()}else"undefined"!=typeof a.response.business_address&&""!=a.response.business_address&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.business_address}).close_notification(),ViewerPanel.is_mobile&&$("#business_address").addClass("has-error"))},_prepare_params:function(){var a=
this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_business_address",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.business_address=
$("#business_address").val()},verify_if_changes_applied:function(){var a=!0,c=$("#business_address").val();this.old_values.business_address!=c&&(a=!1);return a}},contact_number:{name:"contact_number",selector:"#",error_placeholder:{name:"#contact_number_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),
a)},get_name:function(){return this.selector+this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){a=Jmp.Helpers.encode_string(a);$("#form_contact_number").find("div.show-always").html(a+" <a style='color: #168EEA; padding-left: 6px;' href='#change'> Change</a>");$(".dropdown-menu").find(".dropdown-title").text(a)}},contactNumberForm:{name:"#form_contact_number",submit_button:"#update_contact_number",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=
$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){this._clear_error_messages();var c="undefined"!=typeof a.contact_number&&""!=a.contact_number?a.contact_number:$("#contact_number").val();this.controls.contact_number.set_new_name_at_front_end(c);
$("#form_phone-lbl").html(c);Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();$("body").removeClass("inline_modal_open");this.populate_old_values()}else"undefined"!=typeof a.response.contact_number&&""!=a.response.contact_number&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.contact_number}).close_notification(),ViewerPanel.is_mobile&&$("#contact_number").addClass("has-error"))},_prepare_params:function(){var a=
this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_contact_number",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.contact_number=
$("#contact_number").val()},verify_if_changes_applied:function(){var a=!0,c=$("#contact_number").val();this.old_values.contact_number!=c&&(a=!1);return a}},vat:{name:"vat",selector:"#",error_placeholder:{name:"#var_error",set_error_message:function(a){""!=a?$(this.name).html(a).prev(".msg").hide():$(this.name).html(a).prev(".msg").show()}},set_error_message_in_tooltip:function(a){""==a?Jmp.Helpers.hide_tooltip($(this.get_name())):Jmp.Helpers.show_tooltip($(this.get_name()),a)},get_name:function(){return this.selector+
this.name},get_value:function(){return $(this.get_name()).val()},set_new_name_at_front_end:function(a){a=Jmp.Helpers.encode_string(a);$("#form_vat").find("div.show-always").html(a+" <a style='color: #168EEA; padding-left: 6px;' href='#change'> Change</a>");$(".dropdown-menu").find(".dropdown-title").text(a)}},vatForm:{name:"#form_vat",submit_button:"#update_vat",controls:{},form:void 0,old_values:{},bootstrap:function(a){this.form=$(this.name);this.controls=a;this.populate_old_values();this._bind_event()},
_bind_event:function(){$(this.submit_button).bind("click",$.proxy(this._onclick,this))},_onclick:function(){$.post(this.form.attr("action"),this._prepare_params(),$.proxy(this._on_success,this));return!1},_on_success:function(a){if(1==a.status){this._clear_error_messages();var c="undefined"!=typeof a.vat&&""!=a.vat?a.vat:$("#vat").val();this.controls.vat.set_new_name_at_front_end(c);$("#form_vat_lbl").html(c);Jmp.App.Notifications.display_notification({type:"success",message:a.response.message}).close_notification();
$("body").removeClass("inline_modal_open");this.populate_old_values()}else"undefined"!=typeof a.response.vat&&""!=a.response.vat&&(Jmp.App.Notifications.display_notification({type:"error",message:a.response.vat}).close_notification(),ViewerPanel.is_mobile&&$("#vat").addClass("has-error"))},_prepare_params:function(){var a=this.form.serializeArray();return Jmp.Helpers.get_secure_params(Jmp.Helpers.queryStringArrayToJSON(a))},_display_error_messages:function(a){for(var c in a.response)this.controls[c].error_placeholder.set_error_message(a.response[c])},
_clear_error_messages:function(){for(var a in this.controls)this.controls[a].error_placeholder.set_error_message("")},message_placeholder:{name:"#form_vat",set_message:function(a){$(this.name).html(a)}},populate_old_values:function(){this.old_values.vat=$("#vat").val()},verify_if_changes_applied:function(){var a=!0,c=$("#vat").val();this.old_values.vat!=c&&(a=!1);return a}},bootstrap:function(){this.businessNameForm.bootstrap({business_name:this.business_name});this.domainNameForm.bootstrap({domain_names:this.domain_names});
this.businessDomainForm.bootstrap({business_domain:this.business_domain});this.businessAddressForm.bootstrap({business_address:this.business_address});this.contactNumberForm.bootstrap({contact_number:this.contact_number});this.vatForm.bootstrap({vat:this.vat})}},bootstrap:function(){for(var a in this)"object"==typeof this[a]&&this[a].bootstrap()},verify_if_changes_applied:function(){for(var a in this)if("object"==typeof this[a]&&"undefined"!=typeof this[a].verify_if_changes_applied&&!this[a].verify_if_changes_applied())return"Please save your changes before exiting"},
HandleInvitePopupEvents:function(){var a=$("#copy_inviteLink"),c=$("#generate-invite-link");"undefined"!==typeof inviteLink&&inviteLink.attr("data-link");a.unbind("click").bind("click",function(b){"undefined"!=typeof Clipboard&&Clipboard.is_supported?(b=a.attr("data-link"),$("body").append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; top: -3000px;' value='"+b+"' />"),$("#clipboard_textbox").focus().get(0).setSelectionRange(0,b.length),document.execCommand("copy"),
$("#clipboard_textbox").remove(),Jmp.App.Notifications.display_notification({type:"invite_link_copied"}).close_notification()):$("#team_invite_link").focus().select()});c.unbind("click").bind("click",function(b){b.preventDefault();var h=$(this);h.addClass("blockUI").text("Generating new link...");$.get(WS_PREFIX+"/teams/generate_invite_link","",function(k){if(0==k.status)return Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification(),h.removeClass("blockUI").text("Generate new link"),
!1;Jmp.App.Notifications.display_notification({type:"success",message:"Link generated successfully"}).close_notification();h.removeClass("blockUI").text("Generate new link");$("#team_invite_link").val(BASEURL+"teams/invite/"+k.code);$("#copy_inviteLink").attr("data-link",BASEURL+"teams/invite/"+k.code);$(".invite_members").attr("data-invite-code",k.code)})})}};$(function(){$(document).bind("TeamsConsole_load",Jmp.Handler.TeamsConsole.onLoad)});
$(".leave_workspace").live("click",function(a){Jmp.Helpers.display_password_authentication_lightbox(display_leave_workspace_light_box);$("#password_authentication").focus()});$(".delete_workspace").live("click",function(a){Jmp.Helpers.display_password_authentication_lightbox(display_delete_workspace_light_box);$("#password_authentication").focus()});$(".workspace_seats_info").find(".add_seats").live("click",Jmp.Handler.TeamsConsole.update_seats);
function display_leave_workspace_light_box(){Jmp.App.Lightbox.show({type:"leave_workspace"},function(){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Leaving ...").addClass("disabled");$.post(WS_PREFIX+"/teams/leave_workspace",Jmp.Helpers.get_secure_params({}),function(a){Jmp.App.Lightbox.hide();1==a.status?(Jmp.App.Notifications.display_notification({type:"success",message:a.message}).close_notification(),window.location.href="/"):a.message?Jmp.App.Notifications.display_notification({type:"error",
message:a.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})}
function display_delete_workspace_light_box(){Jmp.App.Lightbox.show({type:"delete_workspace"},function(){var a=$("#modal").find(".btn-submit.btn-blue:first");a.attr("disabled",!0).text("Deleting ...").addClass("disabled");var c=Jmp.Helpers.strip_tags($("#delete_workspace_reason").val());if(""==c.trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your reason for deleting workspace"}).close_notification(),a.removeAttr("disabled").text("Delete Workspace").removeClass("disabled"),
!1;$.post(WS_PREFIX+"/teams/delete_workspace",Jmp.Helpers.get_secure_params({reason:c}),function(b){Jmp.App.Lightbox.hide();1==b.status?(Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification(),window.location.href="/"):b.message?Jmp.App.Notifications.display_notification({type:"error",message:b.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()})})}
$(".cancel_business_plan").live("click",function(a){Jmp.Helpers.display_cancel_business_plan_light_box(this);return!1});$(".cancel_enterprise_plan").live("click",function(a){Jmp.Helpers.display_cancel_enterprise_plan_light_box(this);return!1});
$("#business_buy_now").live("click",function(a){$(this).parent().not("ca1")?Jmp.Helpers.display_buy_now_business_plan_light_box():(Jmp.Helpers.display_password_authentication_lightbox(Jmp.Helpers.display_buy_now_business_plan_light_box),$("#password_authentication").focus());return!1});$("#cancel_downgrade_process").live("click",function(a){Jmp.Helpers.display_cancel_downgrade_process_light_box();return!1});
$(".invite_not_allowed").live("click",function(a){Jmp.App.Lightbox.show({type:"invite_not_allowed"},function(c){});return!1});
$(".invite_members").live("click",function(a){if($(this).parent().hasClass("members_invite_topsec")){$("div.btn-group").removeClass("open");a=$(this).data("seats");var c=parseInt($("#members_count").text());Jmp.App.Lightbox.show({type:"invite_members",code:$(".invite_members").attr("data-invite-code"),seats:a,members:c},function(b){Jmp.Handler.TeamsConsole.processInviteForm()});$("#modal").find(".modal-dialog").addClass("modal-email-share");$("#modal").find(".acjs-holder").autoCompleteJS();$(".dropdown.user-info.pull-right").removeClass("open");
Jmp.TeamsConsole.HandleInvitePopupEvents()}else window.location=WS_PREFIX+"/settings/workspace/members";return!1});$(".dashboard_mobile_nav, .close_sidebar_mobile_overlay, .close_sidebar").live("click",function(a){Jmp.Helpers.toggle_sidebar_dashboard();return!1});
$("#larg_grid").live("click",function(){$("#icon_grid_lg, #icon_grid, #icon_list").hide();$("#icon_grid_lg").show();$("#content_data ul").removeClass("view-list small_grid");$("#content_data ul").addClass("view-grid");$(".gird_list_view").removeClass("open");Jmp.Helpers.set_thumbs_width_on_resize();$.removeCookie("grid_view",{path:"/"});$.cookie("grid_view","view-grid-large",{path:"/",expires:365});return!1});
$("#grid").live("click",function(){$("#icon_grid_lg, #icon_grid, #icon_list").hide();$("#icon_grid").show();$("#content_data ul").removeClass("view-list");$("#content_data ul").addClass("small_grid view-grid");$(".gird_list_view").removeClass("open");Jmp.Helpers.set_thumbs_width_on_resize();$.removeCookie("grid_view",{path:"/"});$.cookie("grid_view","view-grid",{path:"/",expires:365});return!1});
$("#list").live("click",function(){$("#icon_grid_lg, #icon_grid, #icon_list").hide();$("#icon_list").show();$("#content_data ul").removeClass("small_grid view-grid");$("#content_data ul").addClass("view-list");$(".thumbnail-wrapper .thumbnail.clearfix").css({height:"34px"});$(".folder-grid .thumbnail.clearfix").css({"background-color":"transparent",border:"none"});$(".gird_list_view").removeClass("open");Jmp.Helpers.set_thumbs_width_on_resize();$.removeCookie("grid_view",{path:"/"});$.cookie("grid_view",
"view-list",{path:"/",expires:365});return!1});$("#btn_invite_members").live("click",function(a){Jmp.Handler.TeamsConsole.processInviteForm("setup")});
$("#members_list").live("click",function(a){var c=$(a.target);c.hasClass("resend_invitation")?(c=c.parents(".team_invite").find(".email").text(),Jmp.Handler.TeamsConsole.resend_invitation(c)):c.hasClass("remove_invitation")?Jmp.Handler.TeamsConsole.remove_invitation(c):c.hasClass("make_admin")?Jmp.Handler.TeamsConsole.make_admin(c):c.hasClass("make_owner")?Jmp.Handler.TeamsConsole.make_owner(c):c.hasClass("remove_admin_status")?Jmp.Handler.TeamsConsole.remove_admin_status(c):c.hasClass("reset_password")?
Jmp.Handler.TeamsConsole.reset_password(c):c.hasClass("remove_user")&&Jmp.Handler.TeamsConsole.remove_user(c);a.preventDefault()});$(".dismiss_team_invitation_blue_bar").live("click",function(a){a=$(this);var c=a.attr("data-invite-code");a.parents(".team_invitation_blue_bar").remove();0==$(".team_invitation_blue_bar").length&&$("body").removeClass("global-notice");$.post(WS_PREFIX+"/teams/dismiss_invitation",Jmp.Helpers.get_secure_params({invite_code:c}),function(b){});return!1});
$(function(){Jmp.Helpers.is_ie()?$("#search-members-text").live("keyup",function(c){Jmp.Handler.TeamsConsole.memberSearch()}):$("#search-members-text").live("input",function(c){Jmp.Handler.TeamsConsole.memberSearch()});var a=$.cookie("accmsg");a&&(Jmp.App.Notifications.display_notification({type:"success",message:a}).close_notification(10),Jmp.Helpers.delete_cookie("accmsg"));$("#console_billing_btn, .console_billing_btn").live("click",function(c){c.preventDefault();$("#admin_console_payment_frm").removeClass("hide");
$("#admin_console_payment_details_panel").addClass("hide");return!1});$("#hide_console_payment_form").live("click",function(c){c.preventDefault();$("#admin_console_payment_details_panel").removeClass("hide");$("#admin_console_payment_frm").addClass("hide");return!1});$("#business_name, #business_domain, #business_address, #contact_number, #vat").live("keypress",function(c){var b="";switch($(c.target).attr("id")){case "business_name":b="update_business_name";break;case "business_domain":b="update_business_domain";
break;case "business_address":b="update_business_address";break;case "contact_number":b="update_contact_number";break;case "vat":b="update_vat"}if(13==c.which)return $("#"+b).trigger("click"),!1})});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.App.isFakeRequest()?$.event.trigger("TeamActivities_load"):a.TeamsActivities.load_activities()},load_activities:function(){$("#activities_filter .active").removeClass("active");var b=Jmp.App.getView().data.hash;"undefined"==typeof b&&(b="all");var h=$("#"+b+"_activities");h.parent().addClass("active");Jmp.Helpers.start_page_loading();Jmp.Helpers.update_browser_title(h.text());$.get(WS_PREFIX+"/admin/activities/1?activity_origin="+
b,function(k){k?(Jmp.Handler.TeamsActivities.infinite_scroll&&Jmp.Handler.TeamsActivities.infinite_scroll.infinitescroll("destroy"),$("#main_container").html(k),Jmp.Handler.TeamsActivities.infinite_scroll_options.state={currPage:1},Jmp.Handler.TeamsActivities.infinite_scroll=$("#team-activity-list").infinitescroll(Jmp.Handler.TeamsActivities.infinite_scroll_options)):(Jmp.Handler.TeamsActivities.infinite_scroll&&Jmp.Handler.TeamsActivities.infinite_scroll.infinitescroll("destroy"),$("#team-activity-list").replaceWith('<ul id="activity-list" class="activity-list group items clearfix"><span id="splash" class="empty-msg">No Activity Found.</span></ul>'));
$.event.trigger("TeamActivities_load")})},onLoad:function(){a.TeamsActivities.infinite_scroll=$("#team-activity-list").infinitescroll(a.TeamsActivities.infinite_scroll_options);"undefined"!=typeof window.attach_placeholder&&attach_placeholder()},get_current_activity_origin:function(){var b="all";"undefined"==typeof b&&(b=Jmp.App.getView().data.hash);return b},infinite_scroll_options:{loading:{finished:void 0,finishedMsg:"No more results",img:"/res/img/loader.gif",img_opts:"style='position: initial;'",
msgText:"",selector:"#activity_container_loading",speed:"slow",start:void 0},debug:!1,navSelector:"div#navigation",nextSelector:"div#navigation a:first",itemSelector:"li.js-activity",path:function(b){var h=a.TeamsActivities.get_current_activity_origin();return WS_PREFIX+"/teams/activities/"+b+"?activity_origin="+h}}});a.TeamsActivities=new c})(Jmp.Handler);$(function(){$(document).bind("TeamActivities_load",Jmp.Handler.TeamsActivities.onLoad);Jmp.Handler.TeamsActivities.onLoad()});(function(a){function c(){this.uri=""}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Team.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Team_load"):a.Team.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Team.uri,success:function(b){$("#buckets_container").infinitescroll("destroy");$("#main_container").html(b);$(document).scrollTop("0px");$("#CopyBucketDiv").remove();$.event.trigger("Team_load");Jmp.Uploader.showBucketUploads(0);Socket.join_dashboard("team")}})},
onLoad:function(b){Jmp.Helpers.assign_route_class("team-page");Jmp.Helpers.update_browser_title("Team Library");Jmp.Handler.Buckets.show_uploading_progress_for_buckets();$("img.lazy").lazyload();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.ItemsScroller.enable();$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(h){h=$(h.target);var k=h.data();"object"!=typeof k||"undefined"==typeof k["bs.tooltip"]||h.parent().hasClass("open")||k["bs.tooltip"].hide()});
$("#top_welcome_bar").length&&($("body").addClass("global-notice"),Jmp.App.Notifications._adjust_body_on_gloabl_notice());Jmp.Helpers.show_announcement_bar()},onSubmitWorkspaceCreateForm:function(b){b=Jmp.Helpers.strip_tags($("#txt_new_workspace_name").val());if(""==$.trim(b))return Jmp.App.Notifications.display_notification({type:"error",message:"Please name your workspace"}).close_notification(),!1;var h=$(this),k=h.text();h.attr("disabled",!0).text("Creating ...").addClass("disabled");b={workspace_name:b};
Jmp.Helpers.start_page_loading();$.ajax({url:WS_PREFIX+"/workspaces/add",type:"post",data:Jmp.Helpers.get_secure_params(b),success:function(l){if(1==l.status){var m=Jmp.Helpers.replace_all($(".wspace_template").html(),{"[IS_ACTIVE]":"","[WS_SHORT_CODE]":l.team.short_code,"[WS_IS_DEFAULT]":0,"[AVATAR_TEXT_CLASS]":"","[AVATAR_TEXT]":l.team.name.charAt(0).toUpperCase(),"[AVATAR_URL_CLASS]":"hide","[AVATAR_URL]":"","[WS_NAME]":l.team.name,"[WS_PLAN]":Jmp.Helpers.capitalize_first_letter(l.team.plan),"[WS_MEMBERS]":l.team.members_count+
" member","[ACTIVE_TICK]":"hide","\x3c!--":"","--\x3e":""});$(".lst_workspaces_container").append($(m));$("#change_default_workspace").removeClass("hide");$("#modal").find(".cancel").trigger("click");Jmp.App.Notifications.display_notification({type:"success",message:l.message}).close_notification()}else h.removeAttr("disabled").text(k).removeClass("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification();Jmp.Helpers.stop_page_loading()}})},onSubmitChangeDefaultWorkspaceForm:function(b){console.log($("#button_style_workspaces i").attr("data-code"));
var h=$("#button_style_workspaces i").attr("data-code"),k=$(this),l=k.text();k.attr("disabled",!0).text("Updating ...").addClass("disabled");$.ajax({url:WS_PREFIX+"/workspaces/set-default",type:"post",data:Jmp.Helpers.get_secure_params({workspace_code:h}),success:function(m){if(1==m.status){$("#modal").find(".cancel").trigger("click");$("ul.workspace_act_dropdown .workspace_dropdown").attr("data-is-default","0");var n=$('ul.workspace_act_dropdown .workspace_dropdown[data-code="'+h+'"]');$(".lst_workspaces_container").prepend(n.parent());
n.attr("data-is-default","1");Jmp.App.Notifications.display_notification({type:"success",message:m.message}).close_notification()}else k.removeAttr("disabled").text(l).removeClass("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:m.message}).close_notification();Jmp.Helpers.stop_page_loading()}})}});a.Team=new c})(Jmp.Handler);$(function(){$(document).bind("Team_load",Jmp.Handler.Team.onLoad)});(function(a){function c(){this.uri=""}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Collaboration.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Collaboration_load"):a.Collaboration.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Collaboration.uri,success:function(b){$("#buckets_container").infinitescroll("destroy");$("#main_container").html(b);$(document).scrollTop("0px");$("#CopyBucketDiv").remove();$.event.trigger("Collaboration_load");Jmp.Uploader.showBucketUploads(0);
Socket.join_dashboard("collaboration")}})},onLoad:function(b){Jmp.Helpers.assign_route_class("collaboration-page");Jmp.Helpers.update_browser_title("Shared Library");Jmp.Handler.Buckets.show_uploading_progress_for_buckets();$("img.lazy").lazyload();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.ItemsScroller.enable();$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(h){h=$(h.target);var k=h.data();"object"!=typeof k||"undefined"==typeof k["bs.tooltip"]||
h.parent().hasClass("open")||k["bs.tooltip"].hide()});$("#top_welcome_bar").length&&($("body").addClass("global-notice"),Jmp.App.Notifications._adjust_body_on_gloabl_notice());Jmp.Helpers.show_announcement_bar()}});a.Collaboration=new c})(Jmp.Handler);$(function(){$(document).bind("Collaboration_load",Jmp.Handler.Collaboration.onLoad)});+function(a){a.fn.emulateTransitionEnd=function(c){var b=!1,h=this;a(this).one(a.support.transition.end,function(){b=!0});setTimeout(function(){b||a(h).trigger(a.support.transition.end)},c);return this};a(function(){var c=a.support;a:{var b=document.createElement("bootstrap");var h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},k;for(k in h)if(void 0!==b.style[k]){b={end:h[k]};break a}b=!1}c.transition=
b})}(jQuery);
+function(a){var c=function(h,k){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",h,k)};c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};c.prototype.init=function(h,k,l){this.enabled=!0;this.type=h;this.$element=a(k);this.options=this.getOptions(l);h=this.options.trigger.split(" ");for(k=
h.length;k--;)if(l=h[k],"click"==l)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=l){var m="hover"==l?"mouseleave":"focusout";this.$element.on(("hover"==l?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(m+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=
function(){return c.DEFAULTS};c.prototype.getOptions=function(h){h=a.extend({},this.getDefaults(),this.$element.data(),h);h.delay&&"number"==typeof h.delay&&(h.delay={show:h.delay,hide:h.delay});return h};c.prototype.getDelegateOptions=function(){var h={},k=this.getDefaults();this._options&&a.each(this._options,function(l,m){k[l]!=m&&(h[l]=m)});return h};c.prototype.enter=function(h){var k=h instanceof this.constructor?h:a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
clearTimeout(k.timeout);k.hoverState="in";if(!k.options.delay||!k.options.delay.show)return k.show();k.timeout=setTimeout(function(){"in"==k.hoverState&&k.show()},k.options.delay.show)};c.prototype.leave=function(h){var k=h instanceof this.constructor?h:a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(k.timeout);k.hoverState="out";if(!k.options.delay||!k.options.delay.hide)return k.hide();k.timeout=setTimeout(function(){"out"==k.hoverState&&k.hide()},k.options.delay.hide)};
c.prototype.show=function(){var h=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(h),!h.isDefaultPrevented())){var k=this;h=this.tip();this.setContent();this.options.animation&&h.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,h[0],this.$element[0]):this.options.placement,m=/\s?auto?\s?/i,n=m.test(l);n&&(l=l.replace(m,"")||"top");h.detach().css({top:0,left:0,display:"block"}).addClass(l);this.options.container?
h.appendTo(this.options.container):h.insertAfter(this.$element);m=this.getPosition();var p=h[0].offsetWidth,r=h[0].offsetHeight;if(n){var q=this.$element.parent();n=l;var u=document.documentElement.scrollTop||document.body.scrollTop,v="body"==this.options.container?window.innerWidth:q.outerWidth(),x="body"==this.options.container?window.innerHeight:q.outerHeight();q="body"==this.options.container?0:q.offset().left;l="bottom"==l&&m.top+m.height+r-u>x?"top":"top"==l&&0>m.top-u-r?"bottom":"right"==l&&
m.right+p>v?"left":"left"==l&&m.left-p<q?"right":l;h.removeClass(n).addClass(l)}m=this.getCalculatedOffset(l,m,p,r);this.applyPlacement(m,l);this.hoverState=null;l=function(){k.$element.trigger("shown.bs."+k.type)};a.support.transition&&this.$tip.hasClass("fade")?h.one(a.support.transition.end,l).emulateTransitionEnd(150):l()}};c.prototype.applyPlacement=function(h,k){var l=this.tip(),m=l[0].offsetWidth,n=l[0].offsetHeight,p=parseInt(l.css("margin-top"),10),r=parseInt(l.css("margin-left"),10);isNaN(p)&&
(p=0);isNaN(r)&&(r=0);h.top+=p;h.left+=r;a.offset.setOffset(l[0],a.extend({using:function(u){l.css({top:Math.round(u.top),left:Math.round(u.left)})}},h),0);l.addClass("in");p=l[0].offsetWidth;r=l[0].offsetHeight;if("top"==k&&r!=n){var q=!0;h.top=h.top+n-r}/bottom|top/.test(k)?(k=0,0>h.left&&(k=-2*h.left,h.left=0,l.offset(h),p=l[0].offsetWidth,r=l[0].offsetHeight),this.replaceArrow(k-m+p,p,"left")):this.replaceArrow(r-n,r,"top");q&&l.offset(h)};c.prototype.replaceArrow=function(h,k,l){this.arrow().css(l,
h?50*(1-h/k)+"%":"")};c.prototype.setContent=function(){var h=this.tip(),k=this.getTitle();h.find(".tooltip-inner")[this.options.html?"html":"text"](k);h.removeClass("fade in top bottom left right")};c.prototype.hide=function(){function h(){"in"!=k.hoverState&&l.detach();k.$element.trigger("hidden.bs."+k.type)}var k=this,l=this.tip(),m=a.Event("hide.bs."+this.type);this.$element.trigger(m);if(!m.isDefaultPrevented())return l.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?l.one(a.support.transition.end,
h).emulateTransitionEnd(150):h(),this.hoverState=null,this};c.prototype.fixTitle=function(){var h=this.$element;(h.attr("title")||"string"!=typeof h.attr("data-original-title"))&&h.attr("data-original-title",h.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(){var h=this.$element[0];return a.extend({},"function"==typeof h.getBoundingClientRect?h.getBoundingClientRect():{width:h.offsetWidth,height:h.offsetHeight},this.$element.offset())};
c.prototype.getCalculatedOffset=function(h,k,l,m){return"bottom"==h?{top:k.top+k.height,left:k.left+k.width/2-l/2}:"top"==h?{top:k.top-m,left:k.left+k.width/2-l/2}:"left"==h?{top:k.top+k.height/2-m/2,left:k.left-l}:{top:k.top+k.height/2-m/2,left:k.left+k.width}};c.prototype.getTitle=function(){var h=this.$element,k=this.options;return h.attr("data-original-title")||("function"==typeof k.title?k.title.call(h[0]):k.title)};c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)};
c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(h){h=h?a(h.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;h.tip().hasClass("in")?
h.leave(h):h.enter(h)};c.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var b=a.fn.tooltip;a.fn.tooltip=function(h){return this.each(function(){var k=a(this),l=k.data("bs.tooltip"),m="object"==typeof h&&h;if(l||"destroy"!=h)if(l||k.data("bs.tooltip",l=new c(this,m)),"string"==typeof h)l[h]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.noConflict=function(){a.fn.tooltip=b;return this}}(jQuery);
+function(a){var c=function(h,k){this.init("popover",h,k)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=
function(){var h=this.tip(),k=this.getTitle(),l=this.getContent();h.find(".popover-title")[this.options.html?"html":"text"](k);h.find(".popover-content")[this.options.html?"string"==typeof l?"html":"append":"text"](l);h.removeClass("fade top bottom left right in");h.find(".popover-title").html()||h.find(".popover-title").hide()};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var h=this.$element,k=this.options;return h.attr("data-content")||
("function"==typeof k.content?k.content.call(h[0]):k.content)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};c.prototype.tip=function(){this.$tip||(this.$tip=a(this.options.template));return this.$tip};var b=a.fn.popover;a.fn.popover=function(h){return this.each(function(){var k=a(this),l=k.data("bs.popover"),m="object"==typeof h&&h;if(l||"destroy"!=h)if(l||k.data("bs.popover",l=new c(this,m)),"string"==typeof h)l[h]()})};a.fn.popover.Constructor=c;a.fn.popover.noConflict=
function(){a.fn.popover=b;return this}}(jQuery);
(function(a,c){var b=c.document;var h=function(){function k(l){try{var m=c.localStorage}catch(n){m=!1}this._options=a.extend({name:"tour",steps:[],container:"body",keyboard:!0,storage:m,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev</button> <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;</button> <button class='btn btn-sm btn-default' data-role='pause-resume' data-pause-text='Pause' data-resume-text='Resume'>Pause</button> </div> <button class='btn btn-sm btn-default' data-role='end'>End tour</button> </div> </div>",afterSetState:function(n,
p){},afterGetState:function(n,p){},afterRemoveState:function(n){},onStart:function(n){},onEnd:function(n){},onShow:function(n){},onShown:function(n){},onHide:function(n){},onHidden:function(n){},onNext:function(n){},onPrev:function(n){},onPause:function(n,p){},onResume:function(n,p){}},l);this._inited=this._force=!1;this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1};this}k.prototype.addSteps=function(l){var m;var n=0;for(m=l.length;n<m;n++){var p=
l[n];this.addStep(p)}return this};k.prototype.addStep=function(l){this._options.steps.push(l);return this};k.prototype.getStep=function(l){if(null!=this._options.steps[l])return a.extend({id:"step-"+l,path:"",placement:"right",title:"",content:"<p></p>",next:l===this._options.steps.length-1?-1:l+1,prev:l-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,
onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[l])};k.prototype.init=function(l){this._force=l;if(this.ended())return this._debug("Tour ended, init prevented."),this;this.setCurrentStep();this._initMouseNavigation();this._initKeyboardNavigation();this._onResize(function(m){return function(){return m.showStep(m._current)}}(this));
null!==this._current&&this.showStep(this._current);this._inited=!0;return this};k.prototype.start=function(l){null==l&&(l=!1);this._inited||this.init(l);null===this._current&&(l=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(l,this.showStep,0));return this};k.prototype.next=function(){var l=this.hideStep(this._current);return this._callOnPromiseDone(l,this._showNextStep)};k.prototype.prev=function(){var l=this.hideStep(this._current);return this._callOnPromiseDone(l,
this._showPrevStep)};k.prototype.goTo=function(l){var m=this.hideStep(this._current);return this._callOnPromiseDone(m,this.showStep,l)};k.prototype.end=function(){var l=function(n){return function(p){a(b).off("click.tour-"+n._options.name);a(b).off("keyup.tour-"+n._options.name);a(c).off("resize.tour-"+n._options.name);n._setState("end","yes");n._inited=!1;n._force=!1;n._clearTimer();if(null!=n._options.onEnd)return n._options.onEnd(n)}}(this);var m=this.hideStep(this._current);return this._callOnPromiseDone(m,
l)};k.prototype.ended=function(){return!this._force&&!!this._getState("end")};k.prototype.restart=function(){this._removeState("current_step");this._removeState("end");return this.start()};k.prototype.pause=function(){var l=this.getStep(this._current);if(!l||!l.duration)return this;this._paused=!0;this._duration-=(new Date).getTime()-this._start;c.clearTimeout(this._timer);this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining).");if(null!=l.onPause)return l.onPause(this,
this._duration)};k.prototype.resume=function(){var l=this.getStep(this._current);if(!l||!l.duration)return this;this._paused=!1;this._start=(new Date).getTime();this._duration=this._duration||l.duration;this._timer=c.setTimeout(function(m){return function(){return m._isLast()?m.next():m.end()}}(this),this._duration);this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration);if(null!=l.onResume&&this._duration!==l.duration)return l.onResume(this,this._duration)};k.prototype.hideStep=
function(l){var m;if(m=this.getStep(l)){this._clearTimer();var n=this._makePromise(null!=m.onHide?m.onHide(this,l):void 0);var p=function(r){return function(q){q=a(m.element);q.data("bs.popover")||q.data("popover")||(q=a("body"));q.popover("destroy").removeClass("tour-"+r._options.name+"-element tour-"+r._options.name+"-"+l+"-element");m.reflex&&q.css("cursor","").off("click.tour-"+r._options.name);m.backdrop&&r._hideBackdrop();if(null!=m.onHidden)return m.onHidden(r)}}(this);this._callOnPromiseDone(n,
p);return n}};k.prototype.showStep=function(l){var m;if(this.ended())return this._debug("Tour ended, showStep prevented."),this;if(m=this.getStep(l)){var n=l<this._current;var p=this._makePromise(null!=m.onShow?m.onShow(this,l):void 0);var r=function(q){return function(u){q.setCurrentStep(l);var v=function(){switch({}.toString.call(m.path)){case "[object Function]":return m.path();case "[object String]":return this._options.basePath+m.path;default:return m.path}}.call(q);u=[b.location.pathname,b.location.hash].join("");
if(q._isRedirect(v,u))q._redirect(m,v);else{if(q._isOrphan(m)){if(!m.orphan){q._debug("Skip the orphan step "+(q._current+1)+". Orphan option is false and the element doesn't exist or is hidden.");n?q._showPrevStep():q._showNextStep();return}q._debug("Show the orphan step "+(q._current+1)+". Orphans option is true.")}m.backdrop&&q._showBackdrop(q._isOrphan(m)?void 0:m.element);q._scrollIntoView(m.element,function(){if(q.getCurrentStep()===l){null!=m.element&&m.backdrop&&q._showOverlayElement(m.element);
q._showPopover(m,l);if(null!=m.onShown)m.onShown(q);return q._debug("Step "+(q._current+1)+" of "+q._options.steps.length)}});if(m.duration)return q.resume()}}}(this);this._callOnPromiseDone(p,r);return p}};k.prototype.getCurrentStep=function(){return this._current};k.prototype.setCurrentStep=function(l){null!=l?(this._current=l,this._setState("current_step",l)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10));return this};k.prototype._setState=
function(l,m){if(this._options.storage){var n=""+this._options.name+"_"+l;try{this._options.storage.setItem(n,m)}catch(p){l=p,l.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,m)}null==this._state&&(this._state={});return this._state[l]=m};k.prototype._removeState=function(l){if(this._options.storage)return l=""+this._options.name+"_"+l,this._options.storage.removeItem(l),this._options.afterRemoveState(l);
if(null!=this._state)return delete this._state[l]};k.prototype._getState=function(l){if(this._options.storage){var m=""+this._options.name+"_"+l;m=this._options.storage.getItem(m)}else null!=this._state&&(m=this._state[l]);if(void 0===m||"null"===m)m=null;this._options.afterGetState(l,m);return m};k.prototype._showNextStep=function(){var l=this.getStep(this._current);var m=function(p){return function(r){return p.showStep(l.next)}}(this);var n=this._makePromise(null!=l.onNext?l.onNext(this):void 0);
return this._callOnPromiseDone(n,m)};k.prototype._showPrevStep=function(){var l=this.getStep(this._current);var m=function(p){return function(r){return p.showStep(l.prev)}}(this);var n=this._makePromise(null!=l.onPrev?l.onPrev(this):void 0);return this._callOnPromiseDone(n,m)};k.prototype._debug=function(l){if(this._options.debug)return c.console.log("Bootstrap Tour '"+this._options.name+"' | "+l)};k.prototype._isRedirect=function(l,m){return null!=l&&""!==l&&("[object RegExp]"==={}.toString.call(l)&&
!l.test(m)||"[object String]"==={}.toString.call(l)&&l.replace(/\?.*$/,"").replace(/\/?$/,"")!==m.replace(/\/?$/,""))};k.prototype._redirect=function(l,m){if(a.isFunction(l.redirect))return l.redirect.call(this,m);if(!0===l.redirect)return this._debug("Redirect to "+m),b.location.href=m};k.prototype._isOrphan=function(l){return null==l.element||!a(l.element).length||a(l.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==a(l.element)[0].namespaceURI};k.prototype._isLast=function(){return this._current<
this._options.steps.length-1};k.prototype._showPopover=function(l,m){var n;a(".tour-"+this._options.name).remove();var p=a.extend({},this._options);var r=a.isFunction(l.template)?a(l.template(m,l)):a(l.template);var q=r.find(".popover-navigation");if(n=this._isOrphan(l))l.element="body",l.placement="top",r=r.addClass("orphan");var u=a(l.element);r.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+m);u.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+m+
"-element");l.options&&a.extend(p,l.options);if(l.reflex&&!n)u.css("cursor","pointer").on("click.tour-"+this._options.name,function(v){return function(){return v._isLast()?v.next():v.end()}}(this));0>l.prev&&q.find("[data-role='prev']").addClass("disabled");0>l.next&&q.find("[data-role='next']").addClass("disabled");l.duration||q.find("[data-role='pause-resume']").remove();l.template=r.clone().wrap("<div>").parent().html();u.popover({placement:l.placement,trigger:"manual",title:l.title,content:l.content,
html:!0,animation:l.animation,container:l.container,template:l.template,selector:l.element}).popover("show");m=u.data("bs.popover")?u.data("bs.popover").tip():u.data("popover").tip();m.attr("id",l.id);this._reposition(m,l);if(n)return this._center(m)};k.prototype._reposition=function(l,m){var n=l[0].offsetWidth;var p=l[0].offsetHeight;var r=l.offset();var q=r.left;var u=r.top;var v=a(b).outerHeight()-r.top-l.outerHeight();0>v&&(r.top+=v);v=a("html").outerWidth()-r.left-l.outerWidth();0>v&&(r.left+=
v);0>r.top&&(r.top=0);0>r.left&&(r.left=0);l.offset(r);if("bottom"===m.placement||"top"===m.placement){if(q!==r.left)return this._replaceArrow(l,2*(r.left-q),n,"left")}else if(u!==r.top)return this._replaceArrow(l,2*(r.top-u),p,"top")};k.prototype._center=function(l){return l.css("top",a(c).outerHeight()/2-l.outerHeight()/2)};k.prototype._replaceArrow=function(l,m,n,p){return l.find(".arrow").css(p,m?50*(1-m/n)+"%":"")};k.prototype._scrollIntoView=function(l,m){var n=a(l);if(!n.length)return m();
var p=a(c);l=n.offset().top;var r=p.height();var q=Math.max(0,l-r/2);this._debug("Scroll into view. ScrollTop: "+q+". Element offset: "+l+". Window height: "+r+".");var u=0;return a("body,html").stop(!0,!0).animate({scrollTop:Math.ceil(q)},function(v){return function(){if(2===++u)return m(),v._debug("Scroll into view. Animation end element offset: "+n.offset().top+". Window height: "+p.height()+".")}}(this))};k.prototype._onResize=function(l,m){return a(c).on("resize.tour-"+this._options.name,function(){clearTimeout(m);
return m=setTimeout(l,100)})};k.prototype._initMouseNavigation=function(){var l=this;return a(b).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+
this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']:not(.disabled)",function(m){return function(n){n.preventDefault();return m.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']:not(.disabled)",function(m){return function(n){n.preventDefault();return m.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(m){return function(n){n.preventDefault();return m.end()}}(this)).on("click.tour-"+
this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(m){m.preventDefault();m=a(this);m.text(l._paused?m.data("pause-text"):m.data("resume-text"));return l._paused?l.resume():l.pause()})};k.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return a(b).on("keyup.tour-"+this._options.name,function(l){return function(m){if(m.which)switch(m.which){case 39:return m.preventDefault(),l._isLast()?l.next():l.end();case 37:m.preventDefault();if(0<
l._current)return l.prev();break;case 27:return m.preventDefault(),l.end()}}}(this))};k.prototype._makePromise=function(l){return l&&a.isFunction(l.then)?l:null};k.prototype._callOnPromiseDone=function(l,m,n){return l?l.then(function(p){return function(r){return m.call(p,n)}}(this)):m.call(this,n)};k.prototype._showBackdrop=function(l){if(!this.backdrop.backgroundShown)return this.backdrop=a("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,a("body").append(this.backdrop)};k.prototype._hideBackdrop=
function(){this._hideOverlayElement();return this._hideBackground()};k.prototype._hideBackground=function(){if(this.backdrop)return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1};k.prototype._showOverlayElement=function(l){var m;if((m=a(l))&&0!==m.length&&!this.backdrop.overlayElementShown){this.backdrop.overlayElementShown=!0;l=a("<div/>");var n=m.offset();n.top=n.top;n.left=n.left;l.width(m.innerWidth()).height(m.innerHeight()).addClass("tour-step-background").offset(n);
m.addClass("tour-step-backdrop");a("body").append(l);this.backdrop.$element=m;return this.backdrop.$background=l}};k.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1};k.prototype._clearTimer=function(){c.clearTimeout(this._timer);return this._duration=this._timer=null};return k}();
return c.Tour=h})(jQuery,window);(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){$.event.trigger("Plus_load")},changeDetailsForm:function(b){b=!1;$(".change_details_button").text("Processing ...").attr("disabled","disabled").addClass("disabled");$("#hide_console_payment_form").addClass("hide");$(".msg").text("");Jmp.Helpers.strip_tags($("#plan").val());Jmp.Helpers.strip_tags($(".payment_method").val());var h=Jmp.Helpers.strip_tags($("#card-number").val()),k=Jmp.Helpers.strip_tags($("#card-cvc").val()),l=Jmp.Helpers.strip_tags($("#card-expiry-month").val()),
m=Jmp.Helpers.strip_tags($("#card-expiry-year").val()),n=Jmp.Helpers.strip_tags($("#card-name").val()),p=Jmp.Helpers.strip_tags($("#zip-code").val());if(-1==h.indexOf("*")||-1==k.indexOf("*")){""==h&&(b=!0,reportError("Please enter your credit card number."),Jmp.Helpers.is_mobile()&&$("#card-number-error").text("Please enter credit card number."));Stripe.validateCardNumber(h)||(b=!0,reportError("Credit card number is invalid."),Jmp.Helpers.is_mobile()&&$("#card-number-error").text("Credit card number is invalid."));
""==k&&(b=!0,reportError("Please enter your CVC number."),Jmp.Helpers.is_mobile()&&$("#card-cvc-error").text("Please enter your CVC number."));Stripe.validateCVC(k)||(b=!0,reportError("CVC number does not match."),Jmp.Helpers.is_mobile()&&$("#card-cvc-error").text("CVC number does not match."));if(""==l||""==m)b=!0,reportError("Please enter an expiry date for your credit card."),Jmp.Helpers.is_mobile()&&$("#expiry-date-error").text("Please enter an expiry date.");Stripe.validateExpiry(l,m)||(b=!0,
reportError("The expiration date appears to be invalid."),Jmp.Helpers.is_mobile()&&$("#expiry-date-error").text("The expiration date appears to be invalid."));b?($(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),$("#hide_console_payment_form").removeClass("hide")):Stripe.createToken({name:n,number:h,cvc:k,exp_month:l,exp_year:m,address_zip:p},stripeChangeCardResponseHandler)}else stripeChangeCardResponseHandler(200,{error:0,id:0});return!1},changePlanMonthly:function(){$(".yearly-detail").addClass("hide");
$(".monthly-detail").removeClass("hide");$("form input.plan").val(6)},changePlanYearly:function(){$(".yearly-detail").removeClass("hide");$(".monthly-detail").addClass("hide");$("form input.plan").val(7)},changeEnterprisePlanMonthly:function(){$(".yearly-detail").addClass("hide");$(".monthly-detail").removeClass("hide");$("form input.plan").val(8)},changeEnterprisePlanYearly:function(){$(".yearly-detail").removeClass("hide");$(".monthly-detail").addClass("hide");$("form input.plan").val(9)},onLoad:function(){Jmp.Helpers.assign_route_class("plus-page");
$("header.header-wrap").removeClass("fixed");0<$(".notice-wrapper.discount").length&&$("body").addClass("global-notice").css("padding-top","50px");Jmp.Helpers.show_announcement_bar();Jmp.App.Notifications._adjust_body_on_gloabl_notice()}});a.Plus=new c})(Jmp.Handler);
$(function(){$(document).ready(function(){$(document).bind("Plus_load",Jmp.Handler.Plus.onLoad);$("#change_details_form").live("submit",Jmp.Handler.Plus.changeDetailsForm);$("#plan_monthly_business").live("click",Jmp.Handler.Plus.changePlanMonthly);$("#plan_yearly_business").live("click",Jmp.Handler.Plus.changePlanYearly);$("#plan_monthly_enterprise").live("click",Jmp.Handler.Plus.changeEnterprisePlanMonthly);$("#plan_yearly_enterprise").live("click",Jmp.Handler.Plus.changeEnterprisePlanYearly)});
$(".cta_wind_dropdown .list_workspaces_dropdown li").live("click",function(){$("#button_style_workspaces i").text($(this).find("a").text()).attr("data-code",$(this).attr("data-code"));window.location="?wsn="+$(this).find("a").text()+"&w="+$(this).attr("data-code")});$("#advanced_pack").live("change",function(){$("#plan_monthly_radio").prop("checked")?$("#plan_monthly").click():$("#plan_yearly").click()});$("#plan_monthly").live("click",function(){$(".yearly-detail").addClass("hide");$(".video-pack-yearly-detail").addClass("hide");
$(".monthly-detail").removeClass("hide");$("#advanced_pack").prop("checked")?$("form input.plan").val(20):$("form input.plan").val($("#plan_monthly_radio").val());$("#video_pack_discount_off_yearly_rndm").addClass("hide");$("#discount_off_yearly_rndm").addClass("hide");$("#addon_pricing").text("($5 per user/month)");UpdateBillingSummary()});$("#plan_yearly").live("click",function(){$(".yearly-detail").addClass("hide");$(".video-pack-yearly-detail").addClass("hide");$(".monthly-detail").addClass("hide");
$("#advanced_pack").prop("checked")?($("#discount_off_yearly_rndm").addClass("hide"),$("form input.plan").val(21),$("#video_pack_discount_off_yearly_rndm").removeClass("hide"),$(".video-pack-yearly-detail").removeClass("hide")):($("form input.plan").val($("#plan_yearly_radio").val()),$("#discount_off_yearly_rndm").removeClass("hide"),$("#video_pack_discount_off_yearly_rndm").addClass("hide"),$(".yearly-detail").removeClass("hide"));$("#addon_pricing").text("($50 per user/year)");UpdateBillingSummary()});
$("#advanced_pack").prop("checked")&&$("#advanced_pack").trigger("change");$("#change_detail").live("click",function(){$("#payment_options").removeClass("hide");$("#plan_options").removeClass("hide");$("#jpf").addClass("hide");$('#upgrade-target input[type="button"]').addClass("hide");"paypal"!=$(".payment_method").val()&&$('#upgrade-target input[type="submit"]').removeClass("hide");$("#cancel_changes").removeClass("hide")});$("#change_detail_business").live("click",function(){Jmp.Helpers.isBusinessPlanUser()||
Jmp.Helpers.isEnterprisePlanUser()?window.location.href=WS_PREFIX+"/settings/team/billing":Jmp.Helpers.isPlusPlanUser()&&(window.location.href=WS_PREFIX+"/settings/team/billing")});$("#cancel_changes").live("click",function(){$("#plan_options").addClass("hide");$("#payment_options").addClass("hide");$("#jpf").removeClass("hide");$('#upgrade-target input[type="button"]').addClass("hide");$('#upgrade-target input[type="submit"]').removeAttr("disabled").addClass("hide");$("#change_detail, #cancel_plan").removeClass("hide");
if("undefined"!=typeof $("#jpf").find(".cc-form")){$("#card-number").val($("#jpf").find(".cc-form").find(".card").text().replace(" ",""));var a=$("#jpf").find(".cc-form").find(".expiry").text().split(" / ");$("#card-expiry-month").val(a[0]);$("#card-expiry-year").val(a[1]);$("#monthly_offer").hasClass("hide")?$("#plan_yearly_radio").attr("checked","checked"):$("#yearly_offer").hasClass("hide")&&$("#plan_monthly_radio").attr("checked","checked")}});$("#cancel_plan,.cancel_plan").live("click",function(){$(this).parent().not("ca1")?
Jmp.Helpers.display_cancel_plan_light_box():(Jmp.Helpers.display_password_authentication_lightbox(Jmp.Helpers.display_cancel_plan_light_box),$("#password_authentication").focus());return!1});$("#business-users").live("change",function(){if(10>$(this).val())return $(this).attr("min")==$(this).data("plan-members")?($(this).css("border-color","#f00"),$(".info-message").find("label").text("The plan starts with a minimum of "+$(this).data("plan-members")+" users.")):($(this).css("border-color","#f00"),
$(".info-message").find("label").text("Users cannot be less than the members in your Workspace")),$(".info-message").removeClass("hide"),!1;if($(this).val()<$(this).attr("min"))return $(this).css("border-color","#f00"),$(".info-message").find("label").text("Users cannot be less than the members in your Workspace"),$(".info-message").removeClass("hide"),!1;$(this).css("border-color","");$(".info-message").addClass("hide");calculateSummaryData($(this).val());getUpdatedSummary();UpdateBillingSummary();
return!1});$("#card-expiry-month").live("blur",function(a){0<$(this).val()&&10>$(this).val()&&2>$(this).val().length&&$(this).val("0"+$(this).val())});$("#register_with_payment").live("click",function(a){a.preventDefault();a=$(this).val();Jmp.Helpers.strip_tags($("#register_payment_form #mode").val());$(this).attr("disabled","disabled").addClass("disabled").val("Upgrading ...");var c=$("#register_payment_form #user_email").val();if(!("undefined"!=typeof c&&""!==c||0<PLANID)){c=$("#register_payment_form #firstName");
var b=$("#register_payment_form #lastName"),h=$("#register_payment_form #email"),k=$("#register_payment_form #password");if(""==c.val())return error=!0,reportError("Please enter your first name"),c.focus(),$(this).removeClass("disabled").val(a),!1;if(""==b.val())return error=!0,reportError("Please enter your last name"),b.focus(),$(this).removeClass("disabled").val(a),!1;if(""==h.val())return error=!0,reportError("Please enter your email address"),h.focus(),$(this).removeClass("disabled").val(a),
!1;if(!Jmp.Helpers.looksLikeEMail(h.val()))return error=!0,reportError("Invalid email address"),h.focus(),$(this).removeClass("disabled").val(a),!1;if(""==k.val())return error=!0,reportError("Please enter a password"),k.focus(),$(this).removeClass("disabled").val(a),!1;if(6>k.val().length)return error=!0,reportError("Password must be at least 6 characters long"),k.focus(),$(this).removeClass("disabled").val(a),!1}c=Jmp.Helpers.strip_tags($("#card-number").val());b=Jmp.Helpers.strip_tags($("#card-cvc").val());
h=Jmp.Helpers.strip_tags($("#card-expiry-month").val());k=Jmp.Helpers.strip_tags($("#card-expiry-year").val());var l=Jmp.Helpers.strip_tags($("#card-name").val()),m=Jmp.Helpers.strip_tags($("#zip-code").val());error=!1;if(""==c)return error=!0,reportError("Please enter your credit card number."),$("#card-number").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateCardNumber(c))return error=!0,reportError("Credit card number is invalid."),$("#card-number").focus(),$(this).removeClass("disabled").val(a),
!1;if(""==h||""==k)return error=!0,reportError("Please enter an expiry date for your credit card."),$("#card-expiry-month").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateExpiry(h,k))return error=!0,reportError("The expiration date appears to be invalid."),$("#card-expiry-year").focus(),$(this).removeClass("disabled").val(a),!1;if(""==b)return error=!0,reportError("Please enter your CVC number."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateCVC(b))return error=
!0,reportError("CVC number does not match."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),!1;if(!$("#agree-to-terms").is(":checked"))return error=!0,reportError("You must agree to Terms Agreement to continue"),$("#agree-to-terms").focus(),$(this).removeClass("disabled").val(a),!1;error||Stripe.createToken({name:l,number:c,cvc:b,exp_month:h,exp_year:k,address_zip:m},stripePaymentResponseHandlerPlus)});$("#register_with_payment_business").live("click",function(a){a.preventDefault();
a=$(this).val();var c=$("#register_payment_form_business #mode").val();$(this).attr("disabled","disabled").addClass("disabled").val("buy"==c?"Upgrading ...":"Starting Free Trial ...");c=Jmp.Helpers.strip_tags($("#register_payment_form_business #user_email").val());var b="undefined"!=typeof c&&""!==c||(0<PLANID?!0:!1),h=0<$("#register_payment_form_business #has_payment_details").length&&""!=$("#register_payment_form_business #has_payment_details").val()?!0:!1,k=$("#register_payment_form_business #firstName"),
l=$("#register_payment_form_business #lastName"),m=$("#register_payment_form_business #email"),n=$("#register_payment_form_business #password");c=$("#register_payment_form_business #button_style_workspaces").find("i");error=!1;if(!b){if(""==k.val())return error=!0,reportErrorBusiness("Please enter your first name"),k.focus(),$(this).val(a),!1;if(""==l.val())return error=!0,reportErrorBusiness("Please enter your last name"),l.focus(),$(this).removeClass("disabled").val(a),!1;if(""==m.val())return error=
!0,reportErrorBusiness("Please enter your email address"),m.focus(),$(this).removeClass("disabled").val(a),!1;if(!Jmp.Helpers.looksLikeEMail(m.val()))return error=!0,reportErrorBusiness("Invalid email address"),m.focus(),$(this).removeClass("disabled").val(a),!1;if(""==n.val())return error=!0,reportErrorBusiness("Please enter a password"),n.focus(),$(this).removeClass("disabled").val(a),!1;if(8>n.val().length)return error=!0,reportErrorBusiness("Password must be at least 8 characters long"),n.focus(),
$(this).removeClass("disabled").val(a),!1}if("undefined"!=typeof c.data("code")&&""==c.data("code"))return error=!0,reportErrorBusiness("Please select your workspace"),c.focus(),$(this).removeClass("disabled").val(a),!1;b=$("#register_payment_form_business").find("#business-users");if("undefined"!=typeof b){if(10>b.val())return error=!0,reportErrorBusiness("Users cannot be less than 10 members for Enterprise plan"),b.focus(),$(this).removeClass("disabled").val(a),!1;if(b.val()<b.attr("min"))return error=
!0,reportErrorBusiness("Users cannot be less than the members in your Workspace"),b.focus(),$(this).removeClass("disabled").val(a),!1}if(!h){var p=Jmp.Helpers.strip_tags($("#card-number").val()),r=Jmp.Helpers.strip_tags($("#card-cvc").val()),q=Jmp.Helpers.strip_tags($("#card-expiry-month").val()),u=Jmp.Helpers.strip_tags($("#card-expiry-year").val()),v=Jmp.Helpers.strip_tags($("#card-name").val()),x=Jmp.Helpers.strip_tags($("#zip-code").val());error=!1;if(""==p)return error=!0,reportErrorBusiness("Please enter your credit card number."),
$("#card-number").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateCardNumber(p))return error=!0,reportErrorBusiness("Credit card number is invalid."),$("#card-number").focus(),$(this).removeClass("disabled").val(a),!1;if(""==r)return error=!0,reportErrorBusiness("Please enter your CVC number."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateCVC(r))return error=!0,reportErrorBusiness("CVC number does not match."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),
!1;if(""==q||""==u)return error=!0,reportErrorBusiness("Please enter an expiry date for your credit card."),$("#card-expiry-month").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateExpiry(q,u))return error=!0,reportErrorBusiness("The expiration date appears to be invalid."),$("#card-expiry-year").focus(),$(this).removeClass("disabled").val(a),!1}if(!$("#agree-to-terms").is(":checked"))return error=!0,reportErrorBusiness("You must agree to Terms Agreement to continue"),$("#agree-to-terms").focus(),
$(this).removeClass("disabled").val(a),!1;error||(h?(p=$("#register_payment_form_business"),r=p.attr("action"),"undefined"!=typeof c.data("code")&&""!=c.data("code")&&p.attr("action","/w/"+c.data("code")+r),p.submit()):Stripe.createToken({name:v,number:p,cvc:r,exp_month:q,exp_year:u,address_zip:x},stripePaymentResponseHandlerBusiness))});$("#register_with_payment_enterprise").live("click",function(a){a.preventDefault();a=$(this).val();var c=$("#register_payment_form_enterprise #mode").val();$(this).attr("disabled",
"disabled").addClass("disabled").val("buy"==c?"Upgrading ...":"Starting Free Trial ...");c=Jmp.Helpers.strip_tags($("#register_payment_form_enterprise #user_email").val());var b="undefined"!=typeof c&&""!==c||0<PLANID?!0:!1,h=0<$("#register_payment_form_enterprise #has_payment_details").length&&""!=$("#register_payment_form_enterprise #has_payment_details").val()?!0:!1,k=$("#register_payment_form_enterprise #firstName"),l=$("#register_payment_form_enterprise #lastName"),m=$("#register_payment_form_enterprise #email"),
n=$("#register_payment_form_enterprise #password");c=$("#register_payment_form_business #button_style_workspaces").find("i");error=!1;if(!b){if(""==k.val())return error=!0,reportErrorBusiness("Please enter your first name"),k.focus(),$(this).val(a),!1;if(""==l.val())return error=!0,reportErrorBusiness("Please enter your last name"),l.focus(),$(this).removeClass("disabled").val(a),!1;if(""==m.val())return error=!0,reportErrorBusiness("Please enter your email address"),m.focus(),$(this).removeClass("disabled").val(a),
!1;if(!Jmp.Helpers.looksLikeEMail(m.val()))return error=!0,reportErrorBusiness("Invalid email address"),m.focus(),$(this).removeClass("disabled").val(a),!1;if(""==n.val())return error=!0,reportErrorBusiness("Please enter a password"),n.focus(),$(this).removeClass("disabled").val(a),!1;if(6>n.val().length)return error=!0,reportErrorBusiness("Password must be at least 6 characters long"),n.focus(),$(this).removeClass("disabled").val(a),!1}if(""==business_name.val())return error=!0,reportErrorBusiness("Please enter your business name"),
business_name.focus(),$(this).removeClass("disabled").val(a),!1;if(""==business_domain.val())return error=!0,reportErrorBusiness("Please enter your business domain"),business_domain.focus(),$(this).removeClass("disabled").val(a),!1;if(!h){var p=Jmp.Helpers.strip_tags($("#card-number").val()),r=Jmp.Helpers.strip_tags($("#card-cvc").val()),q=Jmp.Helpers.strip_tags($("#card-expiry-month").val()),u=Jmp.Helpers.strip_tags($("#card-expiry-year").val()),v=Jmp.Helpers.strip_tags($("#card-name").val()),x=
Jmp.Helpers.strip_tags($("#zip-code").val());error=!1;if(""==p)return error=!0,reportErrorBusiness("Please enter your credit card number."),$("#card-number").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateCardNumber(p))return error=!0,reportErrorBusiness("Credit card number is invalid."),$("#card-number").focus(),$(this).removeClass("disabled").val(a),!1;if(""==r)return error=!0,reportErrorBusiness("Please enter your CVC number."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),
!1;if(!Stripe.validateCVC(r))return error=!0,reportErrorBusiness("CVC number does not match."),$("#card-cvc").focus(),$(this).removeClass("disabled").val(a),!1;if(""==q||""==u)return error=!0,reportErrorBusiness("Please enter an expiry date for your credit card."),$("#card-expiry-month").focus(),$(this).removeClass("disabled").val(a),!1;if(!Stripe.validateExpiry(q,u))return error=!0,reportErrorBusiness("The expiration date appears to be invalid."),$("#card-expiry-year").focus(),$(this).removeClass("disabled").val(a),
!1}if(!$("#agree-to-terms").is(":checked"))return error=!0,reportErrorBusiness("You must agree to Terms Agreement to continue"),$("#agree-to-terms").focus(),$(this).removeClass("disabled").val(a),!1;error||(h?(p=$("#register_payment_form_enterprise"),r=p.attr("action"),"undefined"!=typeof c.data("code")&&""!=c.data("code")&&p.attr("action","/w/"+c.data("code")+r),p.submit()):Stripe.createToken({name:v,number:p,cvc:r,exp_month:q,exp_year:u,address_zip:x},stripePaymentResponseHandlerEnterprise))});
$(".remove_video_pack_modal").live("click",function(a){a.preventDefault();Jmp.Helpers.isPlusExtraPlanUserByPlanID(PLANID)&&(Jmp.App.Lightbox.show({type:"remove_advanced_video_pack"}),$("#remove_advanced_addon").unbind("click").bind("click",function(c){c.preventDefault();$("#remove_advanced_addon").text("Removing ...").attr("disabled","disabled").addClass("disabled");c=new FormData;c.append("plan",21==PLANID?"5":"4");c.append("plan_plus_upgrade","no");c.append(CSRF.token_name,CSRF.token_value);$.ajax({url:WS_PREFIX+
"/accounts/change_card/plus",type:"POST",data:c,dataType:"json",processData:!1,contentType:!1,success:function(b){0==b.status?($("#remove_advanced_addon").removeClass("disabled").removeAttr("disabled").text("Remove Add-On"),Jmp.App.Notifications.display_notification({type:"error",message:b.message}).close_notification()):($(".your_account_detail").html(b.account_detail),Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification(),Jmp.App.Lightbox.hide(),setTimeout(function(){window.location.reload(1)},
2E3))},error:function(b,h,k){$("#remove_advanced_addon").removeClass("disabled").removeAttr("disabled").text("Remove Add-On");console.log("Error:",h,k)}})}))})});
function stripePaymentResponseHandlerPlus(a,c){c.error?reportError(c.error.message):(a=$("#register_payment_form"),a.append("<input type='hidden' name='stripeToken' value='"+c.id+"' />"),"undefined"!=typeof a.find("#email").val()?a.submit():(c=Jmp.Helpers.queryStringArrayToJSON(a.serializeArray()),$.post(a.attr("action"),Jmp.Helpers.get_secure_params(c),function(b){1==b.status?(Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification(),setTimeout(function(){window.location=
b.redirect},2E3)):2==b.status?stripe.confirmCardPayment(b.cs).then(function(h){h.paymentIntent?$.post("/accounts/subscription",Jmp.Helpers.get_secure_params({piid:h.paymentIntent.id}),function(k){1==k.status?(Jmp.App.Notifications.display_notification({type:"success",message:k.message}).close_notification(),setTimeout(function(){window.location=k.redirect},2E3)):(reportError(k.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(k.message))}):reportError(h.error.message)}):
(reportError(b.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(b.message))})))}
function stripePaymentResponseHandlerBusiness(a,c){if(c.error)reportErrorBusiness(c.error.message);else{var b=$("#register_payment_form_business");a=b.attr("action");var h=b.find("#button_style_workspaces i");"undefined"!=typeof h.data("code")&&""!=h.data("code")&&(a="/w/"+h.data("code")+a.replace(BASEURL,"/"));b.append("<input type='hidden' name='stripeToken' value='"+c.id+"' />");"undefined"!=typeof b.find("#email").val()?b.submit():(c=Jmp.Helpers.queryStringArrayToJSON(b.serializeArray()),$.post(a,
Jmp.Helpers.get_secure_params(c),function(k){1==k.status?(Jmp.App.Notifications.display_notification({type:"success",message:k.message}).close_notification(),setTimeout(function(){window.location=k.redirect},2E3)):2==k.status?stripe.confirmCardPayment(k.cs).then(function(l){l.paymentIntent?$.post("/accounts/subscription",Jmp.Helpers.get_secure_params({piid:l.paymentIntent.id}),function(m){1==m.status?(Jmp.App.Notifications.display_notification({type:"success",message:m.message}).close_notification(),
setTimeout(function(){window.location=m.redirect},2E3)):(reportErrorBusiness(m.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(m.message))}):reportErrorBusiness(l.error.message)}):3==k.status?stripe.confirmCardSetup(k.cs).then(function(l){console.log(l);l.setupIntent?Jmp.App.Notifications.display_notification({type:"success",message:k.message}).close_notification():reportErrorBusiness("Card 3D Secure authentication failed, but upgraded to Business trial.");setTimeout(function(){window.location=
k.redirect},2E3)}):(reportErrorBusiness(k.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(k.message))}))}}
function stripePaymentResponseHandlerEnterprise(a,c){if(c.error)reportErrorBusiness(c.error.message);else{var b=$("#register_payment_form_enterprise");a=b.attr("action");var h=b.find("#button_style_workspaces i");"undefined"!=typeof h.data("code")&&""!=h.data("code")&&(a="/w/"+h.data("code")+a.replace(BASEURL,"/"));var k=c.id;b.append("<input type='hidden' name='stripeToken' value='"+k+"' />");"undefined"!=typeof b.find("#email").val()?b.submit():(c=Jmp.Helpers.queryStringArrayToJSON(b.serializeArray()),
$.post(a,Jmp.Helpers.get_secure_params(c),function(l){1==l.status?(Jmp.App.Notifications.display_notification({type:"success",message:l.message}).close_notification(),setTimeout(function(){window.location=l.redirect},2E3)):2==l.status?stripe.confirmCardPayment(l.cs).then(function(m){m.paymentIntent?$.post("/accounts/subscription",Jmp.Helpers.get_secure_params({piid:m.paymentIntent.id}),function(n){1==n.status?(Jmp.App.Notifications.display_notification({type:"success",message:n.message}).close_notification(),
setTimeout(function(){window.location=n.redirect},2E3)):(reportErrorBusiness(n.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(n.message))}):reportErrorBusiness(m.error.message)}):3==l.status?stripe.confirmCardSetup(l.cs,{payment_method:{card:{token:k}}}).then(function(m){console.log(m);m.setupIntent?Jmp.App.Notifications.display_notification({type:"success",message:l.message}).close_notification():reportErrorBusiness("Card 3D Secure authentication failed, but upgraded to Enterprise trial.");
setTimeout(function(){window.location=l.redirect},2E3)}):(reportErrorBusiness(l.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(l.message))}))}}
function stripeChangeCardResponseHandler(a,c){c.error?reportError(c.error.message):(a=$("#change_details_form"),c.id&&0!=c.id&&a.append("<input type='hidden' name='stripeToken' value='"+c.id+"' />"),c.id||PLANID!=$("#plan").val()?"stripe"==$(".payment_method").val()&&(console.log("Calling post"),post_change_card(a)):($(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),$("#hide_console_payment_form").removeClass("hide"),Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"error",
message:"You made no changes so far"}).close_notification()))}
function post_change_card(a){var c=Jmp.Helpers.queryStringArrayToJSON(a.serializeArray());$.post(a.attr("action"),Jmp.Helpers.get_secure_params(c),function(b){1==b.status?(PLANID=Jmp.Helpers.strip_tags($("#plan").val()),$(".close_inline_modal").trigger("click"),$(".your_account_detail").text(b.account_detail),"undefined"!=typeof b.pt&&$("#billing_period").text(b.pt.charAt(0).toUpperCase()+b.pt.slice(1)),Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification(),
"undefined"!=typeof b.card&&($("#card_last_digits").text(b.card),$("#card-number").val("************ "+b.card),$("#card-cvc").val("***")),$(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),$("#hide_console_payment_form").removeClass("hide"),$("#hide_console_payment_form").trigger("click"),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("success").text(b.message),"yearly"==b.pt?$("#upgrade_interval_notification").addClass("hide"):$("#upgrade_interval_notification").removeClass("hide")):
2==b.status?stripe.confirmCardPayment(b.cs).then(function(h){h.paymentIntent?post_change_card(a):(reportError(h.error.message),$(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),$("#hide_console_payment_form").removeClass("hide"))}):111==b.status?stripe.confirmCardPayment(b.cs).then(function(h){h.paymentIntent?$("div.billing button.pay_now").trigger("click"):(reportError(h.error.message),$(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),
$("#hide_console_payment_form").removeClass("hide"))}):(reportError(b.message),Jmp.Helpers.is_mobile()&&$("#billing-error").addClass("error").text(b.message),$(".change_details_button").removeClass("disabled").removeAttr("disabled").text("Update"),$("#hide_console_payment_form").removeClass("hide"))})}
function reportError(a){Jmp.App.Notifications.display_notification({type:"error",message:a}).close_notification();$("#register_with_payment").removeClass("disabled").removeAttr("disabled").val("Upgrade Now");return!1}
function reportErrorBusiness(a){Jmp.App.Notifications.display_notification({type:"error",message:a}).close_notification();$("#register_with_payment_business").removeClass("disabled").removeAttr("disabled");$("#register_with_payment_enterprise").removeClass("disabled").removeAttr("disabled");return!1}
function UpdateBillingSummary(){if("undefined"==typeof $("#yearly_total"))return!1;$("#yearly_total, #monthly_total, #yearly_discount, #monthly_discount, #yearly_price_without_discount, #monthly_price_without_discount, #video_pack_yearly_total, #video_pack_monthly_total, #video_pack_yearly_discount, #video_pack_yearly_price_without_discount, #video_pack_monthly_price_without_discount").addClass("hide");$("#advanced_pack").prop("checked")?($("#sidebar_show_yearly_discount").addClass("hide"),"checked"==
$("#plan_yearly_radio").attr("checked")?($("#video_pack_yearly_total, #video_pack_yearly_discount, #video_pack_yearly_price_without_discount").removeClass("hide"),$("#video_pack_sidebar_show_yearly_discount").removeClass("hide")):($("#video_pack_monthly_total, #video_pack_monthly_price_without_discount").removeClass("hide"),$("#video_pack_sidebar_show_yearly_discount").addClass("hide"))):"checked"==$("#plan_yearly_radio").attr("checked")?($("#yearly_total, #yearly_discount, #yearly_price_without_discount").removeClass("hide"),
$("#sidebar_show_yearly_discount").removeClass("hide")):($("#monthly_total, #monthly_discount, #monthly_price_without_discount").removeClass("hide"),$("#sidebar_show_yearly_discount").addClass("hide"))}
function calculateSummaryData(a){Jmp.summaryData.members_count=a;Jmp.summaryData.yearly.total_without_discount=Math.round(12*Jmp.summaryData.monthly.per_user*a);Jmp.summaryData.yearly.total=Math.round(12*Jmp.summaryData.yearly.per_user*a);Jmp.summaryData.monthly.total=Math.round(Jmp.summaryData.monthly.per_user*a);Jmp.summaryData.yearly.discount_per=Math.round(100-Jmp.summaryData.yearly.total/(12*Jmp.summaryData.monthly.total)*100);Jmp.summaryData.yearly.discount_amt=Math.round(12*Jmp.summaryData.monthly.total-
Jmp.summaryData.yearly.total)}
function getUpdatedSummary(a){"undefined"!=typeof a?Jmp.summaryData=a:a=Jmp.summaryData;$(".summary_holder .summary_wrpr div").html('<ul>       <li id="yearly_price_without_discount" class="">           <p>$'+Math.round(a.monthly.per_user)+" x "+a.members_count+" seats x 12 months</p>           <span>$"+Math.round(a.yearly.total_without_discount)+'</span>       </li>       \x3c!-- li id="monthly_price_without_discount" class="hide">           <p>$'+Math.round(a.monthly.per_user)+" x "+a.members_count+
" seats</p>           <span>$"+a.monthly.total+'</span>       </li --\x3e       <li id="discount_off_yearly_rndm">           <p id="sidebar_show_yearly_discount">'+a.yearly.discount_per.toFixed(2)+'% off yearly plan</p>           <span id="yearly_discount" class="" style="color: #04a25a">- $'+Math.round(a.yearly.discount_amt)+'</span>       </li>   </ul>   <h5>Total amount       <span id="yearly_total" class="">$'+Math.round(a.yearly.total)+'</span>       <span id="monthly_total" class="hide">$'+
Math.round(a.monthly.total)+"</span>   </h5>");$("#plan_yearly").find(".charged").text("$"+Math.round(a.yearly.total)+" charged yearly");$(".billing_frm .yearly-detail").text("Save $"+Math.round(a.yearly.discount_amt)+" ("+a.yearly.discount_per.toFixed(2)+"% off). It\u2019s like getting 2 months free!")};(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){$.event.trigger("Business_load")},onLoad:function(){Jmp.Helpers.assign_route_class("business-page");$("header.header-wrap").removeClass("fixed");0<$(".notice-wrapper.discount").length&&$("body").addClass("global-notice").css("padding-top","50px");Jmp.App.Notifications._adjust_body_on_gloabl_notice();Jmp.Helpers.show_announcement_bar()}});a.Business=new c})(Jmp.Handler);
$(function(){$(document).ready(function(){$(document).bind("Business_load",Jmp.Handler.Business.onLoad)})});(function(a){function c(){this.uri="";this.page=1}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Analytics.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Analytics_load"):a.Analytics.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Analytics.uri,success:function(b){$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("Analytics_load");Jmp.Helpers.update_browser_title("Analytics")}})},getMore:function(b){var h=$(b.target);h.hasClass("top-files")&&
0!=a.Analytics.page&&(a.Analytics.page+=1,b=h.data("filter-string"),$.get(WS_PREFIX+"/analytics/more/files/"+a.Analytics.page+"/"+b,function(k){$(k).hasClass("empty-msg")?a.Analytics.page=0:h.find(".list-container.nano-content").append(k)}))},getActivities:function(){var b=Jmp.Handler.Analytics.uri;""==b&&(b=window.location.pathname);b=b.replace(WS_PREFIX+"/analytics",WS_PREFIX+"/analytics/get_activities");-1!=a.Analytics.activity_page&&(a.Analytics.activity_page+=1,$.get(b,function(h){$(h).hasClass("js-activity")?
($("#analytics_activity_list").html(h),$('[data-toggle="tooltip"]').tooltip(),$(".viewer_device_show").mouseenter(function(){580<$(".info_activity_panel").width()&&($(".info_activity_panel .tooltip").css({left:"auto",right:"-10px"}),$(".info_activity_panel .tooltip-arrow").css({left:"auto",right:"15px"}))}),$(".viewer_location_show").mouseenter(function(){580<$(".info_activity_panel").width()&&($(".info_activity_panel .tooltip").css({left:"auto",right:"10px"}),$(".info_activity_panel .tooltip-arrow").css({left:"auto",
right:"16px"}))})):(a.Analytics.activity_page=-1,$("#analytics_activity_list").html('<li class="no_activity" id="no_activity">No activity yet</li>'))}))},onLoad:function(b){1<PLANID?Jmp.Helpers.assign_route_class("analytics-page"):Jmp.Helpers.assign_route_class("analytics-page free-user");a.Analytics.page=1;$(".nano").unbind("scrollend").bind("scrollend",function(h){a.Analytics.getMore(h)});$("#top_welcome_bar").length?($("body").addClass("global-notice"),Jmp.App.Notifications._adjust_body_on_gloabl_notice()):
$("#download_app_dashboard").length&&$("body").addClass("download-app-notice");Jmp.Helpers.show_announcement_bar();$("#main_container").removeAttr("class");a.Analytics.activity_page=0;a.Analytics.getActivities();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.App.Notifications._adjust_body_on_gloabl_notice()}});a.Analytics=new c})(Jmp.Handler);$(function(){$(document).bind("Analytics_load",Jmp.Handler.Analytics.onLoad)});(function(a){function c(){this.uri=""}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Favorites.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Favorites_load"):a.Favorites.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Favorites.uri,success:function(b){$("#buckets_container").infinitescroll("destroy");$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("Favorites_load");$("#CopyBucketDiv").remove()}})},onLoad:function(b){Jmp.Helpers.assign_route_class("favorite-page");
Jmp.Helpers.update_browser_title("Favorites");$("#top_welcome_bar").length&&$("body").addClass("global-notice");Jmp.Helpers.show_announcement_bar();Jmp.Helpers.display_empty_message_if_no_favorite_collection_found();ViewerPanel.uninitialize();ViewerPanel.hide().initialize();$("img.lazy").lazyload();$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(h){h=$(h.target);var k=h.data();"object"!=typeof k||"undefined"==typeof k["bs.tooltip"]||h.parent().hasClass("open")||
k["bs.tooltip"].hide()});Jmp.App.Notifications._adjust_body_on_gloabl_notice()}});a.Favorites=new c})(Jmp.Handler);$(function(){$(document).bind("Favorites_load",Jmp.Handler.Favorites.onLoad)});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.VersionHistory.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("VersionHistory_load"):a.VersionHistory.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.VersionHistory.uri,success:function(b){$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("VersionHistory_load")}})},onLoad:function(){Jmp.Helpers.stop_page_loading();Jmp.Helpers.update_browser_title($("#version_history_file_title").text());
var b="buckets-page";$("#version_history_container").hasClass("view-list")&&(b="search-page");Jmp.Helpers.assign_route_class("version-history-page "+b);$("#viewer_wrapper").removeClass("showing-comments");ViewerPanel.uninitialize();ViewerPanel.initialize();$("img.lazy").lazyload();Jmp.Helpers.show_announcement_bar()}});a.VersionHistory=new c})(Jmp.Handler);
$(function(){$(document).bind("VersionHistory_load",Jmp.Handler.VersionHistory.onLoad);$(".previous_versions_free").live("click",function(a){Jmp.App.Lightbox.show({type:"previous_versions_free_popup"});return!1});$(".previous_versions").live("click",function(a){a=$(this);ViewerPanel.is_open()&&ViewerPanel.close_viewer();ViewerPanel.is_open()?window.location=a.attr("href"):Jmp.App.changeAddress(a.attr("href"));return!1});$(".restore_previous_version").live("click",function(a){a=$(this);var c=$("#"+
a.attr("data-id")),b=$(this).attr("data-version-number"),h={type:"restore_previous_version"};h.file_name=c.attr("data-gridname");var k=c.find(".file_version_restore_date").text().split("--");h.file_version_restore_date=$.trim(k[0]);h.file_version_restore_time=$.trim(k[1]);var l=c.find(".size-num").text(),m=a.attr("data-id-original");Jmp.App.Lightbox.show(h,function(n){$.post(BASEURL_WS+"/version_history/restore_previous_version",Jmp.Helpers.get_secure_params({bucket_file_code:m,version_number:b}),
function(p){Jmp.App.Lightbox.hide();if(p.status){var r=WS_PREFIX+"/personal";"0"!=p.parent?r="/b/"+p.parent:"0"!=p.team&&(r=WS_PREFIX+"/team");Jmp.App.changeAddress(r);Jmp.App.Notifications.display_notification({type:"restore_previous_version",message:h.file_name+" ("+l+")  restored successfully"}).close_notification()}else Jmp.App.Notifications.display_notification({type:"error",message:"Some error occurred"}).close_notification()});return!1});return!1})});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Trash.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Trash_load"):a.Trash.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Trash.uri,success:function(b){$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("Trash_load")}})},onLoad:function(){Jmp.Helpers.stop_page_loading();Jmp.Handler.Trash.display_empty_message_if_no_item_found();Jmp.Helpers.assign_route_class("trash-page");
Jmp.Helpers.update_browser_title("Trash");$("img.lazy").lazyload();$("#top_welcome_bar").length&&$("body").addClass("global-notice");$("#main_container").find("[rel=tooltip]").tooltip({placement:"bottom"}).click(function(b){b=$(b.target);var h=b.data();"object"!=typeof h||"undefined"==typeof h["bs.tooltip"]||b.parent().hasClass("open")||h["bs.tooltip"].hide()});Jmp.App.Notifications._adjust_body_on_gloabl_notice();Jmp.Helpers.show_announcement_bar()},display_empty_message_if_no_item_found:function(){0==
$("#trash_container").find("li.grid").length&&($("#content_data").addClass("is-empty"),$("#trash_container").html('<div id="empty_item_message" class="empty"> \t\t\t\t\t<div class="doted_container">\t\t\t\t\t<div class="icon"></div> \t\t\t\t\t<div class="title">Trash is empty</div> \t\t\t\t\t</div>\t\t\t\t</div>'))},restore_trash_item:function(b){b=$(this).attr("data-id");var h=Jmp.Helpers.get_item(b);if(2>PLANID)b=h.attr("data-gridname"),Jmp.App.Lightbox.show({type:"restore_trash_item_free_popup",
item_name:b});else{Jmp.Helpers.start_page_loading();var k=h.hasClass("file")?"file":"folder";$.post(WS_PREFIX+"/trash/restore_trash_item",Jmp.Helpers.get_secure_params({item_code:b,item_type:k}),function(l){Jmp.Helpers.stop_page_loading();1==l.status?(Jmp.App.Notifications.display_notification({type:"restore_trash_item",message:"Item restored successfully"}).close_notification(),"undefined"!=typeof l.redirect_to_parent&&Jmp.App.changeAddress(l.redirect_to_parent)):-1==l.status?(l=h.attr("data-gridname"),
Jmp.App.Lightbox.show({type:"restore_trash_item_free_popup",item_name:l})):Jmp.App.Notifications.display_notification({type:"error",message:-2==l.status?"Storage full, item(s) cannot be restored":"Some error occurred!"}).close_notification()})}return!1},restore_trash_items:function(b){var h=$(Jmp.Helpers.get_container()+" li .checkbox .checked"),k=[];h.each(function(){var l=$(this).attr("data-id"),m=Jmp.Helpers.get_item(l);k.push({id:l,type:m.hasClass("file")?"file":"folder"})});2>PLANID?Jmp.App.Lightbox.show({type:"restore_trash_item_free_popup",
item_name:"item(s)"}):($(this),b={type:"restore_trash_items_popup",button_text:$(this).text().replace("Restore ","").toLowerCase().trim()},Jmp.App.Lightbox.show(b,function(l){Jmp.Helpers.start_page_loading();$("#modal").find(".btn-submit.btn-red:first").attr("disabled",!0).text("Restoring ...").addClass("disabled");Jmp.App.Lightbox.hide();$.post(WS_PREFIX+"/trash/restore_trash_items",Jmp.Helpers.get_secure_params({items:k}),function(m){Jmp.Helpers.stop_page_loading();1==m.status?(h.each(function(){var n=
$(this).attr("data-id");Jmp.Helpers.get_item(n).remove();Jmp.Helpers.delete_viewer(n)}),Jmp.App.Notifications.display_notification({type:"restore_trash_item",message:"Item(s) restored successfully"}).close_notification(),$(".restore_trash_items").hide(),$(".restore_trash_items").text("Restore"),$(".permanent_delete_trash_items").text("Delete All"),"undefined"!=typeof m.restored_folder_ids&&$.each(m.restored_folder_ids,function(n,p){Jmp.Helpers.get_item(p).remove();Jmp.Helpers.delete_viewer(p)}),Jmp.Handler.Trash.display_empty_message_if_no_item_found()):
-1==m.status?Jmp.App.Lightbox.show({type:"restore_trash_item_free_popup",item_name:"item(s)"}):Jmp.App.Notifications.display_notification({type:"error",message:-2==m.status?"Storage full, item(s) cannot be restored":"Some error occurred!"}).close_notification()})}));return!1},permanent_delete_trash_item:function(b){var h=$(this).attr("data-id"),k=Jmp.Helpers.get_item(h),l=k.hasClass("file")?"file":"folder";b=k.data("gridname");Jmp.App.Lightbox.show({type:"permanent_delete_trash_item_popup",item_id:h,
item_type:l,item_name:b},function(m){$("#modal").find(".btn-submit.btn-red:first").attr("disabled",!0).text("Deleting ...").addClass("disabled");$.post(WS_PREFIX+"/trash/permanent_delete_trash_item",Jmp.Helpers.get_secure_params({item_code:h,item_type:l}),function(n){Jmp.App.Lightbox.hide();1==n.status?(k.remove(),Jmp.Helpers.delete_viewer(h),Jmp.Handler.Trash.display_empty_message_if_no_item_found(),Jmp.App.Notifications.display_notification({type:"permanent_delete_trash_item",message:"1 item permanently deleted"}).close_notification()):
Jmp.App.Notifications.display_notification({type:"error",message:-2==n.status?"Only admin or owner of the file can delete it.":"Some error occurred!"}).close_notification()})});return!1},permanent_delete_trash_items:function(b){var h=$(this),k=$(this).text().replace("Delete ","").toLowerCase().trim();Jmp.App.Lightbox.show({type:"permanent_delete_trash_items_popup",button_text:k},function(l){$("#modal").find(".btn-submit.btn-red:first").attr("disabled",!0).text("Deleting ...").addClass("disabled");
l={};var m=[];if("all"!=k){var n=$(Jmp.Helpers.get_container()+" li .checkbox .checked");n.each(function(){var p=$(this).attr("data-id");m.push(p)});l={items:m.toString()}}else l={items:"all"};$.post(WS_PREFIX+"/trash/permanent_delete_trash_items",Jmp.Helpers.get_secure_params(l),function(p){Jmp.App.Lightbox.hide();h.text("Delete All");1==p.status?("all"!=k?n.each(function(){var r=$(this).attr("data-id");Jmp.Helpers.get_item(r).remove();Jmp.Helpers.delete_viewer(r)}):($(Jmp.Helpers.get_container()+
" li").remove(),k="All items"),Jmp.Handler.Trash.display_empty_message_if_no_item_found(),Jmp.App.Notifications.display_notification({type:"permanent_delete_trash_item",message:k+" permanently deleted"}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:-2==p.status?"Only admin or owner of the file can delete it.":"Some error occurred!"}).close_notification()})});return!1}});a.Trash=new c})(Jmp.Handler);
$(function(){$(document).bind("Trash_load",Jmp.Handler.Trash.onLoad);$(".restore_trash_item").live("click",Jmp.Handler.Trash.restore_trash_item);$(".restore_trash_item_list").live("click",Jmp.Handler.Trash.restore_trash_item);$(".permanent_delete_trash_item").live("click",Jmp.Handler.Trash.permanent_delete_trash_item);$(".permanent_delete_trash_items").live("click",Jmp.Handler.Trash.permanent_delete_trash_items);$(".restore_trash_items").live("click",Jmp.Handler.Trash.restore_trash_items);$(".empty_trash").live("click",
function(a){Jmp.App.Lightbox.show({type:"empty_trash_popup"},function(c){var b=$("#trash_container").find("li.grid");0==b.length?(Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"empty_trash",message:"Trash is already empty"}).close_notification()):(Jmp.Helpers.start_page_loading(),$.post(WS_PREFIX+"/trash/empty_trash",Jmp.Helpers.get_secure_params(),function(h){Jmp.App.Lightbox.hide();Jmp.Helpers.stop_page_loading();b.remove();Jmp.Handler.Trash.display_empty_message_if_no_item_found();
Jmp.App.Notifications.display_notification({type:"empty_trash",message:"The trash has been emptied successfully"}).close_notification()}))});return!1})});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Inbox.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Inbox_load"):a.Inbox.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Inbox.uri,success:function(b){$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("Inbox_load")}})},onChooseFolder:function(){$("#folder_area_wrapper").removeClass("hide");$("#choose_folder_wrapper").addClass("hide");return!1},onSelectFolder:function(b){if(!$(b.target).hasClass("icn-collapse-folder")&&
!$(b.target).hasClass("icn-expand-folder")){var h=$(this).find(".bucket-name").text().trim()+(0!=$(this).data("team")?" (Team Library)":" (Personal Library)");if("0"==$(this).data("id")||"-1"==$(this).data("id"))h=$(this).find(".bucket-name").text().trim();$("#choosed_inbox_folder").val(h).attr("data-id",$(this).data("id")).attr("data-team",$(this).data("team"));$("#choosed_inbox_folder_code").val($(this).data("id"));Jmp.Handler.BucketFiles.onSelectBucket(b)}},onLoad:function(){Jmp.Helpers.stop_page_loading();
Jmp.Helpers.assign_route_class("inbox-page");Jmp.Helpers.update_browser_title("Inbox");$("img.lazy").lazyload();$("#top_welcome_bar").length&&$("body").addClass("global-notice");ViewerPanel.uninitialize();ViewerPanel.hide().initialize();Jmp.App.Notifications._adjust_body_on_gloabl_notice();Jmp.Helpers.show_announcement_bar()},onCreateNewInbox:function(){Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_inbox_dialog",for_plan:"free"}):Jmp.Helpers.isPlusPlanUser()&&0<$("ul#open_inbox").find("li").length?
Jmp.App.Lightbox.show({type:"upgrade_inbox_dialog",for_plan:"plus"}):(Jmp.App.Lightbox.show({type:"create_new_inbox_dialog",inbox_folder_name:"Personal Library",inbox_folder_code:"0",inbox_name:""}),setTimeout(function(){$("#choose_inbox_folder").focus()},100))},onChooseInboxFolder:function(){var b=$("#create_new_inbox_form").find("#inbox_name").val();Jmp.App.Lightbox.hide();$.ajax({url:BASEURL_WS+"buckets/get_list/?src=inbox",success:function(h){Jmp.App.Lightbox.show({type:"choose_inbox_folder_dialog",
inbox_name:b,body:h});Jmp.Handler.BucketFiles.js_lightbox_folder_search();setTimeout(function(){$("#folder-area").find('li[data-id="0"]').addClass("is-selected")},200)}})},onInboxFolderSelected:function(){var b=$("#folder-area").find("li.is-selected");if(0<b.length){var h=b.find(".bucket-name").text().trim(),k=b.data("id"),l=b.data("team");b=$("#inbox_name").val();h={type:"create_new_inbox_dialog",inbox_folder_name:h,inbox_folder_code:k,inbox_folder_location:l,inbox_name:b};Jmp.App.Lightbox.hide();
Jmp.App.Lightbox.show(h);setTimeout(function(){$("#inbox_name").focus();0!=l?$("#choosed_inbox_folder_msg").text("Only your team can see uploaded files unless your team decides to share them."):$("#choosed_inbox_folder_msg").text("Only you can see uploaded files unless you decide to share them.")},300)}},onCreateInbox:function(){var b=$(this);b.attr("disabled",!0).val("Creating ...").addClass("disabled");if(""!=Jmp.Helpers.strip_tags($("#inbox_name").val())){var h=Jmp.Helpers.queryStringArrayToJSON($("#create_new_inbox_form").serializeArray());
$.post(BASEURL_WS+"inbox/create",Jmp.Helpers.get_secure_params(h),function(k){k.status?($("div#open_inbox").remove(),a.Inbox.display_new_created_row(k.response),$("div.new_inbox").removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:k.response.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:k.response.message}).close_notification();Jmp.App.Lightbox.hide();b.removeAttr("disabled").val("Create new inbox").removeClass("disabled")})}else Jmp.App.Notifications.display_notification({type:"error",
message:"Please enter your inbox name to set inbox URL"}).close_notification(),b.removeAttr("disabled").val("Create new inbox").removeClass("disabled")},onDeleteInbox:function(){var b=$(this),h=b.closest("ul").closest("li");0==h.find("h3").length&&(h=b.closest("li"));var k=h.find("h3").data("name"),l=h.closest("ul");Jmp.App.Lightbox.show({type:"delete_inbox_dialog",inbox_name:k},function(){$.post(BASEURL_WS+"inbox/delete",Jmp.Helpers.get_secure_params({inbox_name:k}),function(m){m.status?(Jmp.App.Notifications.display_notification({type:"success",
message:m.response.message}).close_notification(),h.remove(),0==l.find("li").length&&"open_inbox"==l.attr("id")?(l.remove(),$("div.new_inbox").addClass("hide"),a.Inbox.display_empty_message_if_no_item_found_in_open_inbox()):0==l.find("li").length&&"close_inbox"==l.attr("id")&&(l.remove(),a.Inbox.display_empty_message_if_no_item_found_in_close_inbox())):Jmp.App.Notifications.display_notification({type:"error",message:m.response.message}).close_notification();Jmp.App.Lightbox.hide()})})},display_new_created_row:function(b){var h=
$("ul#open_inbox");0==h.length&&($("section.main-content").find("div.content_fluid").append('<ul class="single_inbox_instance" id="open_inbox"></ul>'),h=$("ul#open_inbox"));h.prepend('<li>           <div class="info_about_inbox">             <h3 data-name="'+b.inbox_name+'"><a href="/b/'+b.item_code+'" class="ajax">'+b.friendly_name+'</a></h3>             <div class="thumb-info">               <span>'+b.submissions+" Submissions</span>               <span>\u00b7 "+b.bucket_name+"</span>               <span>"+
b.inbox_user+'</span>             </div>           </div>           <div class="actions_btns">             <button class="btn btn-default share_inbox" data-hash="'+b.inbox_hash+'">Share</button>             <div class="dropdown">               <a href="#" class="dropdown-toggle btn btn-default more_opts" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"><span></span></a>               <ul class="dropdown-menu top-right" role="menu" aria-labelledby="dropdownMenu2">                 <span class="arrow icn-dd-top-arrow"></span>                   <li><a href="#" class="close_inbox">Close</a></li>                   <li><a href="#" class="delete_inbox">Delete</a></li>                 </ul>             </div>           </div>         </li>')},
display_closed_row:function(b){var h=$("ul#close_box");0==h.length&&($("section.main-content").find("div.content_fluid").append('<ul class="single_inbox_instance" id="close_box"></ul>'),h=$("ul#close_box"));h.prepend('<li>           <div class="info_about_inbox">             <h3 data-name="'+b.inbox_name+'"><a href="/b/'+b.item_code+'" class="ajax">'+b.friendly_name+'</a></h3>             <div class="thumb-info">               <span>'+b.submissions+" Submissions</span>               <span>\u00b7 "+
b.bucket_name+"</span>               <span>"+b.inbox_user+'</span>             </div>           </div>           <div class="actions_btns">           \t<button class="btn btn-default open_inbox">Open</button>             <button class="btn btn-red delete_inbox">Delete</button>           </div>         </li>')},display_empty_message_if_no_item_found_in_open_inbox:function(){0==$("div#open_inbox").length&&$("section.main-content").find("div.content_fluid").append('<div class="empty noBg" id="open_inbox"> \t\t\t\t\t<div class="doted_container">\t\t\t\t\t<div class="icon inbox_placeholder_icons"></div> \t\t\t\t\t<div class="title">No Inbox created yet</div> \t\t\t\t\t<div class="tagline">Inbox allows you to receive files from anyone securely without <br>asking them to sign up for a Jumpshare account.</div> \t\t\t\t\t<a class="btn btn-blue create_new_inbox" style="color: #fff; margin-top: 65px;">Create new inbox</a> \t\t\t\t\t</div>\t\t\t\t</div>')},
display_empty_message_if_no_item_found_in_close_inbox:function(){0==$("div#close_inbox").length&&$("section.main-content").find("div.content_fluid").append('<div class="empty noBg" id="close_box"> \t\t\t\t\t<div class="doted_container">\t\t\t\t\t<div class="icon inbox_placeholder_icons"></div> \t\t\t\t\t<div class="title">Closed Inboxes</div> \t\t\t\t\t<div class="tagline">You can close any inbox temporarily to stop receiving files<br>from customers.</div> \t\t\t\t\t</div>\t\t\t\t</div>')},onCloseInbox:function(){var b=
$(this);b.attr("disabled",!0).val("Closing ...").addClass("disabled");var h=b.closest("ul").closest("li"),k=h.find("h3").data("name"),l=h.closest("ul");$.post(BASEURL_WS+"inbox/close",Jmp.Helpers.get_secure_params({inbox_name:k}),function(m){m.status?(Jmp.App.Notifications.display_notification({type:"success",message:m.response.message}).close_notification(),$("div#close_box").remove(),a.Inbox.display_closed_row(m.response),$("ul#close_box").hide(),h.remove(),0==l.find("li").length&&($("ul#open_inbox").remove(),
$("div.new_inbox").addClass("hide"),a.Inbox.display_empty_message_if_no_item_found_in_open_inbox())):(Jmp.App.Notifications.display_notification({type:"error",message:m.response.message}).close_notification(),b.attr("disabled",!0).val("Close").addClass("disabled"));Jmp.App.Lightbox.hide()})},onOpenInbox:function(){if(Jmp.Helpers.isFreePlanUser())Jmp.App.Lightbox.show({type:"upgrade_inbox_dialog",for_plan:"free"});else if(Jmp.Helpers.isPlusPlanUser()&&0<$("ul#open_inbox").find("li").length)Jmp.App.Lightbox.show({type:"upgrade_inbox_dialog",
for_plan:"plus"});else{var b=$(this);b.attr("disabled",!0).val("Opening ...").addClass("disabled");var h=b.closest("li"),k=h.find("h3").data("name"),l=h.closest("ul");$.post(BASEURL_WS+"inbox/open",Jmp.Helpers.get_secure_params({inbox_name:k}),function(m){m.status?(Jmp.App.Notifications.display_notification({type:"success",message:m.response.message}).close_notification(),$("div#open_inbox").remove(),$("div.new_inbox").removeClass("hide"),a.Inbox.display_new_created_row(m.response),$("ul#open_inbox").hide(),
h.remove(),0==l.find("li").length&&($("ul#close_box").remove(),a.Inbox.display_empty_message_if_no_item_found_in_close_inbox())):(Jmp.App.Notifications.display_notification({type:"error",message:m.response.message}).close_notification(),b.attr("disabled",!0).val("Open").addClass("disabled"));Jmp.App.Lightbox.hide()})}},onShareInbox:function(){var b=$(this),h=b.closest("li").find("h3").data("name");Jmp.App.Lightbox.show({type:"share_inbox_dialog",inbox_name:h,inbox_link:b.data("hash")})},onCopyLinkInbox:function(){var b=
$(this).parent().find("input.acjs-input");"undefined"!=typeof Clipboard&&Clipboard.is_supported?(b.focus().get(0).setSelectionRange(0,b.val().length),document.execCommand("copy"),Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"success",message:"Inbox link copied"}).close_notification()):(Jmp.App.Lightbox.show({type:"copy_link",copy_link:b.val()}),$("#modal input[type=text]").focus().select());return!1},onCopyCodeInbox:function(){if("undefined"!=typeof Clipboard&&Clipboard.is_supported){var b=
$(this).parent().find("input.acjs-input");b.focus().get(0).setSelectionRange(0,b.val().length);document.execCommand("copy");Jmp.App.Lightbox.hide();Jmp.App.Notifications.display_notification({type:"success",message:"Inbox embed code copied"}).close_notification()}else Jmp.App.Lightbox.show({type:"copy_link",copy_link:b.val()}),$("#modal input[type=text]").focus().select();return!1},onShareInboxEmail:function(){var b=$("#share_inbox_name").val(),h=$("#share_inbox_email").val(),k=$("#share_inbox_message").val();
""!=b&&(""!=h&&Jmp.Helpers.looksLikeEMail(h)?$.post(BASEURL_WS+"inbox/share",Jmp.Helpers.get_secure_params({inbox_name:b,inbox_emails:h,inbox_message:k}),function(l){l.status?Jmp.App.Notifications.display_notification({type:"success",message:l.response.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:l.response.message}).close_notification();Jmp.App.Lightbox.hide()}):Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification())}});
a.Inbox=new c})(Jmp.Handler);
$(function(){$(document).bind("Inbox_load",Jmp.Handler.Inbox.onLoad);$(".inbox_ui_popup ul.buckets_list li").live("click",Jmp.Handler.Inbox.onSelectFolder);$(".create_new_inbox").live("click",Jmp.Handler.Inbox.onCreateNewInbox);$("#create_new_inbox").live("click",Jmp.Handler.Inbox.onCreateInbox);$("#choose_inbox_folder").live("click",Jmp.Handler.Inbox.onChooseInboxFolder);$("#select_inbox_folder").live("click",Jmp.Handler.Inbox.onInboxFolderSelected);$(".delete_inbox").live("click",Jmp.Handler.Inbox.onDeleteInbox);
$(".close_inbox").live("click",Jmp.Handler.Inbox.onCloseInbox);$(".open_inbox").live("click",Jmp.Handler.Inbox.onOpenInbox);$(".share_inbox").live("click",Jmp.Handler.Inbox.onShareInbox);$("#inbox_copy_link").live("click",Jmp.Handler.Inbox.onCopyLinkInbox);$("#inbox_copy_code").live("click",Jmp.Handler.Inbox.onCopyCodeInbox);$("#share_inbox_send").live("click",Jmp.Handler.Inbox.onShareInboxEmail)});
$("#tab_open_inboxes").live("click",function(){$("#tab_closed_inboxes").removeClass("active");$("#tab_open_inboxes").addClass("active");$("#close_box").hide();$("#open_inbox").show();$(".inbox_placeholder_icons").removeClass("icon-inxbo-close")});$("#tab_closed_inboxes").live("click",function(){$("#tab_open_inboxes").removeClass("active");$("#tab_closed_inboxes").addClass("active");$("#close_box").show();$("#open_inbox").hide();$(".inbox_placeholder_icons").addClass("icon-inxbo-close")});(function(a){function c(){}$.extend(c.prototype,{index:function(b,h){Jmp.Handler.Viewed.uri=b;Jmp.App.isFakeRequest()?$.event.trigger("Viewed_load"):a.Viewed.load()},load:function(){Jmp.Helpers.start_page_loading();$.ajax({url:Jmp.Handler.Viewed.uri,success:function(b){$("#main_container").html(b);$(document).scrollTop("0px");$.event.trigger("Viewed_load")}})},onRemoveViewed:function(b){var h=$(this);b=h.attr("data-type");var k=$("#"+h.attr("data-id")),l=h.attr("data-item-name");Jmp.App.Lightbox.show({type:"remove_viewed",
item_type:b,item_name:l},function(m){$(this).html("Removing ...").addClass("disabled");m={};m.view=h.attr("data-viewed").replace("view-","");$.post(BASEURL_WS+"viewed/remove",Jmp.Helpers.get_secure_params(m),function(n){$("#lightbox").find(".cancel").trigger("click");n.status&&k.remove()})})},onLoad:function(){Jmp.Helpers.stop_page_loading();Jmp.Handler.Viewed.display_empty_message_if_no_item_found();var b="buckets-page";$("#share_result").hasClass("view-list")&&(b="search-page");Jmp.Helpers.assign_route_class("viewed-page "+
b);Jmp.Helpers.update_browser_title("Viewed");$("img.lazy").lazyload();ViewerPanel.uninitialize();ViewerPanel.hide().initialize()},display_empty_message_if_no_item_found:function(){}});a.Viewed=new c})(Jmp.Handler);$(function(){$(document).bind("Viewed_load",Jmp.Handler.Viewed.onLoad);$(".remove_viewed").live("click",Jmp.Handler.Viewed.onRemoveViewed)});var ViewerPanel={is_mobile:!1,ajax_request:null,container_type:"#",container_name:"viewer_wrapper",sub_container_type:"#",sub_container_name:"viewer_container",download_file_msg:"#download_message",components:"viewers_collection dom_parser header media items_list document comments cta activities custom_thumbnail video_trim subtitles transcription annotation".split(" "),initialize:function(){return this.viewers_collection.is_empty()?this.initialize_components():this},uninitialize:function(){this.viewers_collection.empty()},
render:function(a){var c=ViewerPanel.viewers_collection.fetch_by_id(a);this.show();this.manager.move_at_specified(a);this.manager.show_hide_navigation_buttons(c);this.manager.initialize_hide_navigation_buttons_deferred();this.header.show_and_hide_appropriate_buttons(c);this.manager.enable_disable_text_selection(c);this.manager.enable_disable_contextmenu(c);this.add_bar_bottom_footer_behaviour(c);return this},show:function(){$(this.container_type+this.container_name).removeClass("hide");ViewerPanel.is_mobile||
$("body").addClass("viewer-open");this.navigation.initialize();this.manager.show_hide_navigation_buttons_and_footer_thumbs();$("#CopyBucketDiv").remove();Jmp.Helpers.end_first_tour_forcefully();Jmp.Helpers.end_tour_forcefully();this.manager.enable_thumbs_panel_tooltips();return this},hide:function(){$(this.container_type+this.container_name).addClass("hide");ViewerPanel.is_mobile&&$("#files_container").css({"pointer-events":"all"});ViewerPanel.media.video_player_obj&&document.getElementById("video_player_html5").pause();
ViewerPanel.media.audio_player_obj&&ViewerPanel.media.audio_player_obj.pause();return this},is_open:function(){return $(this.container_type+this.container_name).hasClass("hide")?!1:!0},actual_close_viewer:function(){0==ViewerPanel.media.viewer_video_analytics_updated&&0==ViewerPanel.media.viewer_video_is_owner&&0<ViewerPanel.media.viewer_video_percentage_played&&(ViewerPanel.media.viewer_video_analytics_updated=1,ViewerPanel.manager.update_video_analytics(viewer.id));ViewerPanel.hide();ViewerPanel.navigation.uninitialize();
$("body").removeClass("viewer-open");ViewerPanel.header.main_container.removeClass("hide");ViewerPanel.manager.reset_viewers();ViewerPanel.manager.reset_thumb_panel();ViewerPanel.header.uninitialize_copy_link();ViewerPanel.header.hide_title_items_count();Jmp.Helpers.remove_absent_viewers();Jmp.App.Lightbox.hide();ViewerPanel.manager.destroy_thumbs_panel_tooltips();ViewerPanel.media.video_player_obj&&document.getElementById("video_player_html5").pause();ViewerPanel.media.audio_player_obj&&ViewerPanel.media.audio_player_obj.pause();
ViewerPanel.is_mobile?$(".mobile_public_download_file").removeClass("viewer_downloaded"):(ViewerPanel.comments.comment_new_text.atwho("hide"),ViewerPanel.comments.reply_new_text.atwho("hide"));""==ViewerPanel.dom_parser.url_suffix||ViewerPanel.dom_parser.url_suffix==WS_PREFIX?window.location=WS_PREFIX+"/personal":Jmp.App.changeAddress(ViewerPanel.dom_parser.url_suffix,!0);0<$(".smart_app_banner").length&&$(".smart_app_banner").removeClass("smart_app_banner_fixed");ViewerPanel.comments.stop_interval_on_viewer_close();
PasswordPrompt.close();ViewerPanel.custom_thumbnail.cancel_thumbanil_sidebar();ViewerPanel.custom_thumbnail.custom_thumbnail.attr("disabled","disabled");$("#video_wrapper").hasClass("editingVideoPlayer")&&ViewerPanel.video_trim.cancel_trim_action();ViewerPanel.video_trim.handle_video_trim.attr("disabled","disabled");ViewerPanel.is_mobile||(ViewerPanel.comments.reset_comment_activity("reply"),ViewerPanel.comments.reset_comment_activity("comment"));ViewerPanel.media.remove_video_chapters();$("#custom_captions_wrapper_audio span").html("");
ViewerPanel.media.remove_chapters_summary();ViewerPanel.video_trim.reset_to_default();$("#time_stmp_coments_wrpr").css("display","none");$("#time_stmp_coments_wrpr").addClass("hide");$("#hide_captions_sidebar").trigger("click");$("#hide_transcription_sidebar").trigger("click");return!1},close_viewer:function(a){if(!ViewerPanel.header.close.hasClass("hide"))if(ViewerPanel.video_trim.has_trim_iniciated&&0<ViewerPanel.video_trim.currentRevision)Jmp.App.Lightbox.show({type:"trim_away_confirmation"},function(c){ViewerPanel.video_trim.revert_back_to_original();
Jmp.App.Lightbox.hide();ViewerPanel.video_trim.cancel_trim_action();return ViewerPanel.actual_close_viewer()});else return ViewerPanel.actual_close_viewer()},disable_content:function(){$(this.container_type+this.container_name).addClass("distxts").live("contextmenu",function(a){return!1})},enable_content:function(){$(this.container_type+this.container_name).removeClass("distxts").live("contextmenu",function(a){return!0})},is_uploading_viewer:function(){return $(this.container_type+this.container_name).hasClass("upload-viewer")},
is_dark_viewer:function(){return $(this.container_type+this.container_name).hasClass("dark")},initialize_components:function(){for(var a in this.components){var c=this.components[a];c=this[c];"undefined"!=typeof c&&"undefined"!=typeof c.initialize&&(c.initialize(),c.is_initialized=!0)}return this},add_bar_bottom_footer_behaviour:function(a){0!==$("#promo_footer_bar").length&&($("#video_wrapper").css({bottom:"20px"}),a.presentation_mode&&($(".viewer-content-wrapper").css({bottom:"60px !important"}),
$(".viewer-content-wrapper").addClass("thepresbottom")),ViewerPanel.document.is_initialized&&setTimeout(function(){$("#promo_footer_bar").css({opacity:1,bottom:"10px"});768<$(window).width()&&$("#document_controls").css({bottom:"80px"})},6E3),$("#close_promo_bar").click(function(){$("#promo_footer_bar").css({bottom:"-30px",opacity:0});$("#document_controls").css({bottom:"25px"})}));"image"==a.type&&0!==$(".distxts").length&&ViewerPanel.is_mobile&&$("#files_container").css({"pointer-events":"none"})}};ViewerPanel.navigation={next_id:"#viewer_next",back_id:"#viewer_back",item_list_id:"#viewer_items_list",next:void 0,back:void 0,item_list:void 0,list_arrow_prev_id:"#list_arrow_left",list_arrow_next_id:"#list_arrow_right",list_toggle_id:"#list_toggle",next_arrow_wrapper_id:"#next_arrow_wrapper",back_arrow_wrapper_id:"#back_arrow_wrapper"};ViewerPanel.navigation.initialize=function(){this.bootstrap()};
ViewerPanel.navigation.uninitialize=function(){ViewerPanel.is_mobile?this.unattach_swipe():(this.unattach_keys(),this.unattach_direct_clicks(),this.unattach_list_arrow_next(),this.unattach_list_arrow_prev(),this.unattach_list_toggle(),this.unattach_arrow_wrappers());this.unattach_next();this.unattach_back();return this};ViewerPanel.navigation.bootstrap=function(){this.bootstrap_dom().uninitialize().attach_events()};
ViewerPanel.navigation.attach_events=function(){ViewerPanel.is_mobile?this.attach_swipe():(this.attach_keys(),this.attach_direct_clicks(),this.attach_list_arrow_next(),this.attach_list_arrow_prev(),this.attach_list_toggle(),this.attach_arrow_wrappers());this.attach_next();this.attach_back();return this};
ViewerPanel.navigation.bootstrap_dom=function(){this.next=$(this.next_id);this.back=$(this.back_id);this.sub_container=$(ViewerPanel.sub_container_type+ViewerPanel.sub_container_name);ViewerPanel.is_mobile||(this.item_list=$(this.item_list_id),this.list_arrow_prev=$(this.list_arrow_prev_id),this.list_arrow_next=$(this.list_arrow_next_id),this.list_toggle=$(this.list_toggle_id),this.next_arrow_wrapper=$(this.next_arrow_wrapper_id),this.back_arrow_wrapper=$(this.back_arrow_wrapper_id));return this};
ViewerPanel.navigation.attach_keys=function(){var a=!0,c=void 0,b=$(ViewerPanel.container_type+ViewerPanel.container_name);this.keys_handler=function(h){if(!h.target||"textarea"!==h.target.tagName.toLowerCase()&&"p"!==h.target.tagName.toLowerCase()){ViewerPanel.manager.abort_ajax_request();if(!a&&c==h.keyCode)return!1;37==h.keyCode?($(document).fullScreen()||b.hasClass("viewer-full")||b.hasClass("showing-CTA")||$("#video_wrapper").hasClass("editingVideoPlayer")||(ViewerPanel.manager.move_in_direction("backward"),
ViewerPanel.navigation.hide_via_css()),a=!1):39==h.keyCode?($(document).fullScreen()||b.hasClass("viewer-full")||b.hasClass("showing-CTA")||$("#video_wrapper").hasClass("editingVideoPlayer")||(ViewerPanel.manager.move_in_direction("forward"),ViewerPanel.navigation.hide_via_css()),a=!1):27==h.keyCode&&(b.hasClass("viewer-full")?(b.removeClass("viewer-full"),ViewerPanel.media.image.detach_scale_zoom(),setTimeout(function(){$("#document_controls").css("display","none")},20)):ViewerPanel.is_open()&&$("#rename_from_popup_textbox").length?
Jmp.App.Lightbox.hide():ViewerPanel.dom_parser.is_url_suffix_empty()||ViewerPanel.close_viewer());c=h.keyCode}};$(document).keydown(this.keys_handler).keyup(function(h){if(!h.target||"textarea"!==h.target.tagName.toLowerCase()&&"p"!==h.target.tagName.toLowerCase())a=!0})};ViewerPanel.navigation.unattach_keys=function(){$(document).unbind("keydown",this.keys_handler)};ViewerPanel.navigation.attach_direct_clicks=function(a){this.item_list.click(this.direct_click_handler)};
ViewerPanel.navigation.unattach_direct_clicks=function(a){this.item_list.unbind("click")};ViewerPanel.navigation.direct_click_handler=function(a){var c=!1;a=$(a.target);a.is("img")?c=a.parent().parent().attr("data-id"):a.is("li")&&(c=a.attr("data-id"));c&&(ViewerPanel.manager.move_at_specified(c),ViewerPanel.navigation.hide());return!1};
ViewerPanel.navigation.attach_swipe=function(){this.sub_container.swipe({swipe:function(a,c,b,h,k,l){$(ViewerPanel.container_type+ViewerPanel.container_name).hasClass("viewer-full")||("left"==c&&ViewerPanel.navigation.next.trigger("click"),"right"==c&&ViewerPanel.navigation.back.trigger("click"))},tap:function(a,c){a=ViewerPanel.viewers_collection.get_current_viewer();if("presentation"==a.type){if($(c).hasClass("si-wrapper")||$(c).hasClass("si-bg"))$("#si_wrapper").remove(),$(ViewerPanel.container_type+
ViewerPanel.container_name).addClass("slideshow"),$(".pres-controls",$(ViewerPanel.container_type+ViewerPanel.container_name)).removeClass("hide"),ViewerPanel.media.presentation.resize(220),ViewerPanel.navigation.unattach_swipe(),ViewerPanel.media.presentation.attach_swipe(),ViewerPanel.media.presentation.set_timer()}else"video"==a.type&&($(c).hasClass("js-video-src")||$(c).hasClass("si-bg"))&&(window.location=$("#viewer_video_img").attr("data-src"))},threshold:30,fingers:1,allowPageScroll:"auto"})};
ViewerPanel.navigation.unattach_swipe=function(){this.sub_container.swipe("destroy")};ViewerPanel.navigation.attach_next=function(){this.next.click(function(){ViewerPanel.manager.move_in_direction("forward");return!1})};ViewerPanel.navigation.unattach_next=function(){this.next.unbind("click")};ViewerPanel.navigation.attach_back=function(){this.back.click(function(){ViewerPanel.manager.move_in_direction("backward");return!1})};ViewerPanel.navigation.unattach_back=function(){this.back.unbind("click")};
ViewerPanel.navigation.attach_list_arrow_next=function(){this.list_arrow_next.click(function(){ViewerPanel.manager.next_panel();return!1})};ViewerPanel.navigation.unattach_list_arrow_next=function(){this.list_arrow_next.unbind("click")};ViewerPanel.navigation.attach_list_arrow_prev=function(){this.list_arrow_prev.click(function(){ViewerPanel.manager.prev_panel();return!1})};ViewerPanel.navigation.unattach_list_arrow_prev=function(){this.list_arrow_prev.unbind("click")};
ViewerPanel.navigation.attach_list_toggle=function(){this.list_toggle.click(function(){return!1})};ViewerPanel.navigation.unattach_list_toggle=function(){this.list_toggle.unbind("click")};ViewerPanel.navigation.attach_arrow_wrappers=function(){this.attach_next_arrow_wrapper();this.attach_back_arrow_wrapper()};ViewerPanel.navigation.attach_next_arrow_wrapper=function(){this.next_arrow_wrapper.hover(this.arrow_wrapper_mouseover,this.arrow_wrapper_mouseout)};
ViewerPanel.navigation.attach_back_arrow_wrapper=function(){this.back_arrow_wrapper.hover(this.arrow_wrapper_mouseover,this.arrow_wrapper_mouseout)};ViewerPanel.navigation.arrow_wrapper_mouseover=function(){if(1<ViewerPanel.viewers_collection.get_total_items_count()){var a=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.manager.cancel_hide_navigation_buttons_deffered();ViewerPanel.navigation.show();ViewerPanel.manager.show_hide_navigation_buttons(a)}};
ViewerPanel.navigation.arrow_wrapper_mouseout=function(){ViewerPanel.manager.hide_navigation_buttons_deffered()};ViewerPanel.navigation.unattach_arrow_wrappers=function(){this.unattach_next_arrow_wrapper();this.unattach_back_arrow_wrapper()};ViewerPanel.navigation.unattach_next_arrow_wrapper=function(){this.next_arrow_wrapper.unbind("hover")};ViewerPanel.navigation.unattach_back_arrow_wrapper=function(){this.back_arrow_wrapper.unbind("hover")};
ViewerPanel.navigation.show=function(){this.show_back_button();this.show_next_button()};ViewerPanel.navigation.hide=function(){this.hide_back_button();this.hide_next_button()};ViewerPanel.navigation.hide_via_css=function(){$(this.back_id).css("display","none");$(this.next_id).css("display","none")};ViewerPanel.navigation.show_back_button=function(){$(this.back_arrow_wrapper).css("display","block");$(this.back_id).fadeIn(100)};
ViewerPanel.navigation.hide_back_button=function(){$(this.back_id).fadeOut(300,function(){$(this.back_arrow_wrapper).css("display","none")})};ViewerPanel.navigation.hide_back_button_first_item=function(){$(this.back_id).css("display","none")};ViewerPanel.navigation.show_next_button=function(){$(this.next_arrow_wrapper).css("display","block");$(this.next_id).fadeIn(100)};
ViewerPanel.navigation.hide_next_button=function(){$(this.next_id).fadeOut(300,function(){$(this.next_arrow_wrapper).css("display","none")})};ViewerPanel.navigation.hide_next_button_last_item=function(){$(this.next_id).css("display","none")};ViewerPanel.navigation.show_list_arrow_prev=function(){$(this.list_arrow_prev_id).removeClass("hide")};ViewerPanel.navigation.hide_list_arrow_prev=function(){$(this.list_arrow_prev_id).addClass("hide")};ViewerPanel.navigation.show_list_arrow_next=function(){$(this.list_arrow_next_id).removeClass("hide")};
ViewerPanel.navigation.hide_list_arrow_next=function(){$(this.list_arrow_next_id).addClass("hide")};ViewerPanel.navigation.reset_next_arrow_position=function(){};ViewerPanel.items_list={count:0,container_type:"#",container_name:"files_container",viewer_items_list:"#viewer_items_list",list_item_selector:"list_item_",list_arrow_right:"#list_arrow_right",list_arrow_left:"#list_arrow_left",thumbs_panel_width:0,thumbs_viewable_panel_width:0};ViewerPanel.items_list.initialize=function(){this.bootstrap()};ViewerPanel.items_list.bootstrap=function(){};ViewerPanel.dom_parser={main_container:"#files_container"};ViewerPanel.dom_parser.initialize=function(){this.bootstrap()};ViewerPanel.dom_parser.bootstrap=function(){this.prepare()};ViewerPanel.dom_parser.prepare=function(){this.assign_url_suffix();for(var a=0,c=$(this.main_container).find("li.file"),b=c.length,h=0;h<b;h++){var k=c.eq(h),l=k.attr("data-id");l&&-1==l.indexOf("XHR_")&&!k.hasClass("hide")&&(this.prepare_single({index:a,id:l,elem:k,url_suffix:this.url_suffix_address_bar}),a++)}};
ViewerPanel.dom_parser.prepare_single=function(a){var c=ViewerPanel.viewers_factory.prepare(a);ViewerPanel.viewers_collection.add(a.id,c)};ViewerPanel.dom_parser.prepare_ids=function(){$(this.main_container).find("li.file").each(function(a){(a=$(this).attr("data-id"))&&-1==a.indexOf("XHR_")&&ViewerPanel.viewers_collection.add_item_id(a)})};ViewerPanel.dom_parser.is_url_suffix_empty=function(){return""==this.url_suffix};
ViewerPanel.dom_parser.assign_url_suffix=function(){var a=this.prepare_url_suffix();this.url_suffix=a.url_suffix;this.url_suffix_address_bar=a.url_suffix_address_bar};
ViewerPanel.dom_parser.prepare_url_suffix=function(){var a=window.location.href,c=window.location.host,b={url_suffix:"",url_suffix_address_bar:""},h=a.split("?b=");c+=WS_PREFIX;if(1<h.length)return b.url_suffix="/b/"+h[1],b.url_suffix_address_bar="?b="+h[1],b;h=a.split("/b/");if(1<h.length)return b.url_suffix="/b/"+h[1],b.url_suffix_address_bar="?b="+h[1],b;h=a.split(c+"/search");if(1<h.length)return b.url_suffix=WS_PREFIX+"/search"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/analytics");if(1<
h.length)return b.url_suffix=WS_PREFIX+"/analytics"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/share");if(1<h.length)return b.url_suffix=WS_PREFIX+"/share"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/viewed");if(1<h.length)return b.url_suffix=WS_PREFIX+"/viewed"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/team");if(1<h.length)return b.url_suffix=WS_PREFIX+"/team"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/favorites");if(1<h.length)return b.url_suffix=WS_PREFIX+"/favorites"+h[1],
b.url_suffix_address_bar="",b;h=a.split(c+"/activities");if(1<h.length)return b.url_suffix=WS_PREFIX+"/activities"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/history/");if(1<h.length)return b.url_suffix=WS_PREFIX+"/history/"+h[1],b.url_suffix_address_bar="",b;h=a.split(c+"/personal");if(1<h.length)return b.url_suffix=WS_PREFIX+"/personal"+h[1],b.url_suffix_address_bar="",b;Jmp.App.getView().type==Jmp.Handler.getRule("_empty")&&(b.url_suffix=WS_PREFIX+"/personal",b.url_suffix_address_bar="");
return b};ViewerPanel.header={title_id:"#viewer_title",title_controls_id:"#viewer_title_controls",title_edit_box_id:"#viewer_title_edit_box",title_text_id:"#viewer_title_text",title_edit_id:"#viewer_title_edit",copy_link_id:"#viewer_copy_link",share_id:"#viewer_share",download_id:"#viewer_download, #viewer_download_dropdown, #download_file_link",cta_id:"#add_cta",video_edit_panel:"#video_editing_panel",audio_edit_panel:"#audio_editing_panel",image_edit_panel:"#image_editing_panel",visit_original_id:"#viewer_visit_original, #download_visit_original",
importt_id:"#viewer_import",close_id:"#viewer_close",viewer_logo_id:"#viewer_logo",main_container_id:"#main_container",viewer_actions_id:"#viewer_actions",mobile_viewer_more_id:"#mobile_viewer_more",restore_previous_version_id:"#viewer_restore_previous_version",comment_id:"#viewer_comment",items_count_id:"#viewer_title_items_count",viewer_set_favorite_id:"#viewer_set_favorite",copy_link_clip:void 0,page_no_element_id:"#form_control_goto, #viewer_presentation_control_goto",control_zoom_in_id:"#control_zoom_in",
control_zoom_out_id:"#control_zoom_out",controls_color_container_id:"#controls_color_container",controls_grid_container_id:"#controls_grid_container",control_font_small_id:"#control_font_small",control_font_large_id:"#control_font_large",control_font_slider_id:"#control_font_slider",control_font_slide_wrapper_id:"#control_font_slide_wrapper"};ViewerPanel.header.initialize=function(){this.is_initialized||this.bootstrap()};
ViewerPanel.header.bootstrap=function(){this.bootstrap_dom();this.attach_close();this.attach_download();this.bind_events();this.attach_title_text_edit();this.attach_keydown_for_text_edit_box();this.attach_restore_previous_version();this.attach_toggle_comments();this.attach_toggle_cta()};
ViewerPanel.header.bind_events=function(){this.page_no_element=$(this.page_no_element_id);this.control_zoom_in=$(this.control_zoom_in_id);this.control_zoom_out=$(this.control_zoom_out_id);this.controls_color_container=$(this.controls_color_container_id);this.controls_grid_container=$(this.controls_grid_container_id);this.control_font_small=$(this.control_font_small_id);this.control_font_large=$(this.control_font_large_id);this.control_font_slider=$(this.control_font_slider_id);this.control_font_slide_wrapper=
$(this.control_font_slide_wrapper_id);ViewerPanel.manager.attach_control_zoom_in();ViewerPanel.manager.attach_control_zoom_out();ViewerPanel.manager.attach_control_goto_page();ViewerPanel.manager.attach_control_color_container();ViewerPanel.manager.attach_control_grid_container();ViewerPanel.manager.attach_control_font_small();ViewerPanel.manager.attach_control_font_large();ViewerPanel.manager.attach_control_font_slide_wrapper()};
ViewerPanel.header.bootstrap_dom=function(){this.title=$(this.title_id);this.title_controls=$(this.title_controls_id);this.title_edit_box=$(this.title_edit_box_id);this.title_text=$(this.title_text_id);this.title_edit=$(this.title_edit_id);this.copy_link=$(this.copy_link_id);this.share=$(this.share_id);this.download=$(this.download_id);this.cta=$(this.cta_id);this.video_edit_panel=$(this.video_edit_panel);this.audio_edit_panel=$(this.audio_edit_panel);this.image_edit_panel=$(this.image_edit_panel);
this.visit_original=$(this.visit_original_id);this.importt=$(this.importt_id);this.close=$(this.close_id);this.viewer_logo=$(this.viewer_logo_id);this.main_container=$(this.main_container_id);this.viewer_actions=$(this.viewer_actions_id);this.mobile_viewer_more=$(this.mobile_viewer_more_id);this.restore_previous_version=$(this.restore_previous_version_id);this.toggle_comments=$(this.comment_id);this.title_items_count=$(this.items_count_id);this.viewer_set_favorite=$(this.viewer_set_favorite_id)};
ViewerPanel.header.attach_close=function(){this.close.click(ViewerPanel.close_viewer);this.viewer_logo.click(ViewerPanel.close_viewer)};
ViewerPanel.header.attach_download=function(){ViewerPanel.is_mobile||this.download.click(function(){var a=$(this),c=a.text().trim(),b=ViewerPanel.viewers_collection.get_current_viewer(),h=b.id;0==$("#_dif").length&&$("body").append('<iframe id="_dif" name="_dif" style="display:none"></iframe>');""!=b.download&&(a.html("Downloading ...").addClass("disabled").addClass("blockUI"),b&&(b.importt||b.hide_save_file_viewer)&&"undefined"==typeof b.downloaded&&(b.downloaded=1,JumpshareAnalytics.TrackDownload("file",
h)),$("#_dif").attr("src",b.download),setTimeout(function(){a.html(c).removeClass("disabled").removeClass("blockUI")},1E4))})};
ViewerPanel.header.attach_title_text_edit=function(){this.title_text.click(function(a){a=ViewerPanel.viewers_collection.get_current_viewer();if(!(!a||a instanceof UploadingViewer||a.importt||a.hide_save_file_viewer||a.restore_previous_version||20!=a.id.length||ViewerPanel.is_mobile)){var c=ViewerPanel.viewers_collection.get_current_viewer();a=c.id;var b=c.extension;item_type="file";c=c.name;c=Jmp.Helpers.decode_string(c);Jmp.App.Lightbox.show({type:"item_rename_popup",code:a,name:c,item_type,ext:b},
function(){$(this).one("click",arguments.callee);var h=$("#rename_from_popup_textbox");""==$.trim(h.val())?Jmp.App.Notifications.display_notification({type:"error",message:"Please name your "+item_type}).close_notification():Jmp.Handler.Buckets.updateItemName(h)});$(".modal-dialog").addClass("modal-cf");$("#rename_from_popup_textbox").select().focus()}})};
ViewerPanel.header.attach_keydown_for_text_edit_box=function(){var a=this;this.title_edit_box.keydown(function(c){c.stopPropagation();13==c.which?(a.remove_viewer_name_editing(),a.update_name_if_necessary()):27==c.which?(a.remove_viewer_name_editing(),c=ViewerPanel.viewers_collection.get_current_viewer(),a.update_title(c)):(c=setTimeout,$.browser.chrome&&"function"==typeof requestAnimationFrame&&(c=requestAnimationFrame),c(function(){var b=a.title_edit_box.val(),h=ViewerPanel.viewers_collection.get_current_viewer();
h.extension&&(b+="."+h.extension);a.title_text.text(b);b=a.title_text.width()+40;330<=b&&(b=330);a.title_edit_box.css("width",b)}))})};ViewerPanel.header.attach_focusout_for_text_edit_box=function(){var a=this;a.title_edit_box.bind("focusout",function(){a.remove_viewer_name_editing();a.update_name_if_necessary()})};ViewerPanel.header.unattach_focusout_for_text_edit_box=function(){this.title_edit_box.unbind("focusout")};
ViewerPanel.header.remove_viewer_name_editing=function(){this.unattach_focusout_for_text_edit_box();this.title.removeClass("edit");this.title_text.show()};
ViewerPanel.header.update_name_if_necessary=function(){var a=this,c=ViewerPanel.viewers_collection.get_current_viewer(),b=$.trim(this.title_edit_box.val());""!=b&&b!=c.name?$.post(BASEURL_WS+"files/edit",Jmp.Helpers.get_secure_params({id:c.id,name:b,type:"file",ext:c.extension}),function(h){if(h.status){c.name=h.name;var k=$("#"+c.id);1==k.length&&(k.attr("data-name",h.name),k.attr("data-gridname",h.gridname),k.data("gridname",h.gridname),k.find(".meta").removeClass("hide"),k.find(".name-area").removeClass("name-edit"),
k.find(".thumb-title").html(h.gridname),"undefined"!=typeof h.bucket_name&&Jmp.Helpers.update_bucket_name(h.bucket_name,h.bucket_grid_name));Jmp.App.Notifications.display_notification({type:"item_renamed",message:"Rename complete"}).close_notification();k=ViewerPanel.viewers_collection.get_current_viewer();c.id==k.id&&("undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?Jmp.Helpers.update_browser_title(h.name):Jmp.Helpers.update_browser_title_without_sitetitle(h.name),a.update_title(c),a.set_share_data_attr(c),
c instanceof UnknownViewer&&ViewerPanel.unknown.update_name(c))}else a.update_title(c),Jmp.App.Notifications.display_notification({type:"error",message:h.message}).close_notification()}):a.update_title(c)};ViewerPanel.header.update=function(a,c){this._update(a);ViewerPanel.is_mobile&&this._update_mobile(a)};
ViewerPanel.header.fetch_from_dom=function(a){a=$(Jmp.Helpers.get_container()+" #"+a);var c={};c.copy_link=a.find(".copy-link").attr("data-url");c.share=a.find(".share").attr("data-id");c.download=a.find(".download").attr("data-link");return c};ViewerPanel.header._update=function(a){this.update_title(a);this.update_copy_link(a);this.update_menu_dropdown(a);this.set_import_data_attr(a);this.set_share_data_attr(a);this.update_visit_original(a);this.update_title_items_count()};
ViewerPanel.header._update_mobile=function(a){this.update_more(a);this.update_download_button(a)};ViewerPanel.header.update_more=function(a){"undefined"==typeof $(Jmp.Helpers.get_container()+" #"+a.id).find(".download")?this.mobile_viewer_more.addClass("hide").removeAttr("data-id"):this.mobile_viewer_more.removeClass("hide").attr("data-id",a.id)};ViewerPanel.header.update_title=function(a){this.title_text.html(a.name+(""!=a.extension?"."+a.extension:""))};
ViewerPanel.header.update_copy_link=function(a){this.copy_link.hasClass("hide")||(this.uninitialize_copy_link(),a=Jmp.Helpers.get_short_url_code($("li[data-id="+a.id+"]").find(".copy-link")),this.initialize_copy_link(a))};
ViewerPanel.header.update_menu_dropdown=function(a){var c=$("#viewer_more_menu");if("undefined"!=typeof c){var b=$(Jmp.Helpers.get_container()+" #"+a.id).find("ul.js-dropdown-menu");"undefined"!=typeof b&&("Uploading"!=a.status?c.html(b.html()):c.html(""),this.download.addClass("hide"),c.find("a.copy-link").unbind("click").bind("click",function(h){$("#viewer_copy_link").trigger("click")}),c.find("a.email").unbind("click").bind("click",function(h){$("#viewer_share").trigger("click")}),this.viewer_set_favorite.removeClass("star_item_from_menu set active unset"),
this.viewer_set_favorite.addClass(c.find("a.star_item_from_menu").attr("class")),this.viewer_set_favorite.attr("data-id",c.find("a.star_item_from_menu").data("id")),c.find("a.star_item_from_menu").parent().remove(),this.viewer_set_favorite.hasClass("set")?this.viewer_set_favorite.addClass("active"):this.viewer_set_favorite.removeClass("active"))}};
ViewerPanel.header.set_import_data_attr=function(a){this.importt.hasClass("hide")||(this.importt.attr("data-id",a.id),$(Jmp.Helpers.get_container()+" #"+a.id).find(".import").hasClass("oi")&&this.importt.attr("onClick","window.location='"+BASEURL+VIEWER_SUBDIR+"/"+a.id+"?oi=t&item_id="+a.id+"'"))};
ViewerPanel.header.set_share_data_attr=function(a){this.share.hasClass("hide")||this.share.attr("data-id",a.id).attr("data-type","file").attr("data-title",a.name).attr("data-popup","1").attr("data-verified",a.is_verified)};ViewerPanel.header.update_visit_original=function(a){this.visit_original.attr("href",a.file_url).attr("data-link",a.file_url)};ViewerPanel.header.update_download_button=function(a){this.download.attr("href",a.download)};
ViewerPanel.header.show_and_hide_appropriate_buttons_on_navigation=function(a){};
ViewerPanel.header.show_hide_cta_button=function(a){"video"==a.type?($("#handle_annotation").removeClass("hide"),"undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user&&"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?(ViewerPanel.media.viewer_video_is_owner=1,this.video_edit_panel.removeClass("hide"),this.cta.find("p").html("Add CTA"),this.cta.attr("disabled","disabled"),"undefined"!=typeof ViewerPanel.cta&&ViewerPanel.cta.reset_cta_form()):this.video_edit_panel.addClass("hide")):
(this.video_edit_panel.addClass("hide"),$("#handle_annotation").addClass("hide"));"audio"==a.type?"undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user&&"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?(ViewerPanel.media.viewer_video_is_owner=1,this.audio_edit_panel.removeClass("hide")):this.audio_edit_panel.addClass("hide"):this.audio_edit_panel.addClass("hide");"image"!=a.type||"png"!=a.extension&&"jpg"!=a.extension&&"jpeg"!=a.extension?this.image_edit_panel.addClass("hide"):
"undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user&&"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?this.image_edit_panel.removeClass("hide"):this.image_edit_panel.addClass("hide")};
ViewerPanel.header.show_and_hide_appropriate_buttons=function(a){this.restore_previous_version.addClass("hide");this.show_hide_cta_button(a);ViewerPanel.dom_parser.is_url_suffix_empty()?this.close.addClass("hide"):this.close.removeClass("hide");$("#viewer_download_save_dropdown").addClass("hide");$("#download_file_link_group").addClass("hide");$("#comment_new").removeClass("hide");$(".comments-holder").removeClass("non-editable");a.importt?(this.importt.removeClass("hide").removeClass("blockUI"),
$("#viewer_download_save_dropdown").removeClass("hide"),$("#download_file_link_group").removeClass("hide"),$("#viewer_download_single").addClass("hide"),this.copy_link.addClass("hide"),this.cta.addClass("hide"),this.video_edit_panel.addClass("hide"),this.audio_edit_panel.addClass("hide"),this.image_edit_panel.addClass("hide"),this.share.addClass("hide"),this.download.removeClass("hide"),$("#viewer_download_mbile").removeClass("hide")):a.hide_save_file_viewer?(this.importt.addClass("hide"),this.copy_link.addClass("hide"),
this.cta.addClass("hide"),this.video_edit_panel.addClass("hide"),this.audio_edit_panel.addClass("hide"),this.image_edit_panel.addClass("hide"),this.share.addClass("hide"),this.download.removeClass("hide"),$("#viewer_download_mbile").removeClass("hide")):a.restore_previous_version?(this.viewer_actions.find(".btn-group").addClass("hide"),this.importt.addClass("hide"),this.copy_link.addClass("hide"),this.cta.addClass("hide"),this.video_edit_panel.addClass("hide"),this.audio_edit_panel.addClass("hide"),
this.image_edit_panel.addClass("hide"),this.share.addClass("hide"),this.download.removeClass("btn-blue").removeClass("hide").addClass("btn-default"),"Current"===a.restore_previous_version_number?this.restore_previous_version.addClass("hide"):($("#comment_new").addClass("hide"),$(".comments-holder").addClass("non-editable"),this.restore_previous_version.removeClass("hide"))):(this.importt.addClass("hide"),this.copy_link.removeClass("hide"),this.share.removeClass("hide"),this.download.removeClass("hide"),
$("#viewer_download_mbile").removeClass("hide"),$("#viewer_actions #viewer_download").addClass("hide"),$("#viewer_download_mbile").addClass("hide"));a.download?(this.importt.hasClass("hide")||($("#viewer_download").addClass("hide"),$("#viewer_download_mbile").addClass("hide"),$("#download_file_link").addClass("hide")),this.visit_original.addClass("hide")):a.download||a.file_url?!a.download&&a.file_url&&""!=a.file_url&&(this.visit_original.removeClass("hide"),this.download.addClass("hide")):(this.download.addClass("hide"),
this.copy_link.addClass("hide"),this.share.addClass("hide"),this.visit_original.addClass("hide"),ViewerPanel.disable_content());a instanceof AbsentViewer||a instanceof UploadingViewer&&"undefined"!=typeof is_valid_owner&&"false"==is_valid_owner?this.viewer_actions.addClass("hide"):this.viewer_actions.removeClass("hide");ViewerPanel.is_mobile&&a.download&&this.download.removeClass("hide");a&&a instanceof UploadingViewer&&"undefined"!=typeof a.id&&""!=a.id&&("undefined"!=typeof is_valid_owner&&"true"==
is_valid_owner?(this.copy_link.removeClass("hide"),this.share.removeClass("hide"),this.download.addClass("hide"),ViewerPanel.header.update_menu_dropdown(a),this.importt.hasClass("hide")||($("#viewer_download").addClass("hide"),$("#viewer_download_mbile").addClass("hide"))):(this.importt.removeClass("hide"),this.download.removeClass("hide"),this.importt.hasClass("hide")||($("#viewer_download").addClass("hide"),$("#viewer_download_mbile").addClass("hide")),a.is_observing?(this.importt.removeClass("blockUI"),
this.download.removeClass("blockUI")):(this.importt.addClass("blockUI"),this.download.addClass("blockUI")),a.hide_save_file_viewer&&(this.importt.addClass("hide"),this.download.removeClass("hide"))));a instanceof UploadingViewer||a.comments_status_disable?("undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?this.toggle_comments.removeClass("hide"):(this.toggle_comments.addClass("hide"),ViewerPanel.comments.comments_section_mobile.addClass("hide")),ViewerPanel.comments.toggle_comments.hasClass("empty")||
(ViewerPanel.comments.comments_section.addClass("hide"),ViewerPanel.comments.comments_section_mobile.addClass("hide"))):(this.toggle_comments.hasClass("hide")&&this.toggle_comments.removeClass("hide"),!ViewerPanel.is_mobile&&ViewerPanel.comments.comments_section.hasClass("hide")&&(ViewerPanel.comments.comments_section.removeClass("hide"),ViewerPanel.comments.comments_section_mobile.removeClass("hide"),$(ViewerPanel.container_type+ViewerPanel.sub_container_name).hasClass("hsd")||$(ViewerPanel.container_type+
ViewerPanel.container_name).addClass("showing-comments")),$(ViewerPanel.container_type+ViewerPanel.sub_container_name).hasClass("hsd")&&$(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("showing-comments"));ViewerPanel.is_mobile||ViewerPanel.comments.comments_wrapper.removeClass("hide")};
ViewerPanel.header.initialize_copy_link=function(a){var c=ViewerPanel.viewers_collection.get_current_viewer(),b=$("li[data-id="+c.id+"]"),h=Jmp.Helpers.get_copy_link_domain($("li[data-id="+c.id+"]").find(".copy-link"));this.copy_link.unbind("click").bind("click",function(){if("undefined"!=typeof Clipboard&&Clipboard.is_supported){var k=h+a;$("body").append("<input type='text' id='clipboard_textbox' style='position: absolute; right: 0; top: -3000px;' value='"+k+"' />");$("#clipboard_textbox").focus().get(0).setSelectionRange(0,
k.length);document.execCommand("copy");$("#clipboard_textbox").remove();Jmp.App.Notifications.display_notification({type:"file_link_copied"}).close_notification()}else Jmp.App.Lightbox.show({type:"copy_link",copy_link:h+a}),$("#modal input[type=text]").focus().select();Jmp.Helpers.set_short_url_code(b.find(".copy-link"),c.id,c.type,a)})};ViewerPanel.header.uninitialize_copy_link=function(){};
ViewerPanel.header.attach_restore_previous_version=function(){this.restore_previous_version.unbind("click").bind("click",function(a){a=ViewerPanel.viewers_collection.get_current_viewer();$(Jmp.Helpers.get_container()+" #"+a.id).find(".restore_previous_version").trigger("click");return!1})};ViewerPanel.header.attach_toggle_cta=function(){this.cta.unbind("click").bind("click",function(a){a.preventDefault();ViewerPanel.cta.show_hide_cta_form()})};
ViewerPanel.header.attach_toggle_comments=function(){this.toggle_comments.unbind("click").bind("click",function(a){a=$(ViewerPanel.container_type+ViewerPanel.container_name);if(a.hasClass("showing-comments")){$("#cta_container_wrapper").hasClass("hideCTAwindow")||$("#cancel_cta").trigger("click");$("#video_trim_wrapper_id").hasClass("hide_video_trim_wrapper")||$("#cancel_video_trim_id").trigger("click");$("#custom_thumbanil_wrapper_id").hasClass("hide_thumbanil_wrapper")||$("#cancel_thumbnail_frm").trigger("click");
$("#transcription_wrapper_id").hasClass("hide_video_transcription_wrapper")||$("#hide_transcription_sidebar").trigger("click");$("#subtitles_wrapper_id").hasClass("hide_video_subtitles_wrapper")||$("#hide_captions_sidebar").trigger("click");a.removeClass("showing-comments");ViewerPanel.comments.comments_wrapper.addClass("hiding-comments");ViewerPanel.header.toggle_comments.addClass("empty");var c=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.is_open()&&"spreadsheet"===c.type&&($("#viewer_iframe").width($(window).width()),
$(".number-of-sheets").width($(window).width()));$(".modal-cf").css({transform:"translateX(0)",transition:"all 0.3s ease"})}else $(ViewerPanel.container_type+ViewerPanel.sub_container_name).hasClass("hsd")||a.addClass("showing-comments"),ViewerPanel.comments.comments_wrapper.removeClass("hiding-comments"),ViewerPanel.header.toggle_comments.removeClass("empty"),c=ViewerPanel.viewers_collection.get_current_viewer(),ViewerPanel.is_open()&&"spreadsheet"===c.type&&($("#viewer_iframe").width($(window).width()-
330),$(".number-of-sheets").width($(window).width()-330)),$(".modal-cf").css({transform:"translateX(-162px)",transition:"all 0.3s ease"});c=ViewerPanel.viewers_collection.get_current_viewer();"undefined"!=typeof c&&"document"==c.type&&setTimeout(function(){ViewerPanel.document.pdf_manager.adjust_preview_for_comments_toggling(c)},500)})};
ViewerPanel.header.update_title_items_count=function(){var a=ViewerPanel.viewers_collection.get_total_items_count(),c=ViewerPanel.viewers_collection.get_current();1<a?(this.show_title_items_count(),this.title_items_count.html("("+(c+1)+" of "+a+")"),$("body").addClass("gallery_view_header")):(this.hide_title_items_count(),$("body").removeClass("gallery_view_header"))};ViewerPanel.header.show_title_items_count=function(){this.title_items_count.removeClass("hide")};
ViewerPanel.header.hide_title_items_count=function(){this.title_items_count.addClass("hide")};ViewerPanel.manager={previous_classes:"",deferred_update_time:"500",deferred_last_timeout:void 0};ViewerPanel.manager.move_at_specified=function(a){a=ViewerPanel.viewers_collection.get_by_id(a);this.update(a)};ViewerPanel.manager.cta_clicked_count=function(a){a=ViewerPanel.viewers_collection.get_by_id(a);this.update_cta_clicked_count(a)};ViewerPanel.manager.update_video_analytics=function(a){a=ViewerPanel.viewers_collection.get_by_id(a);this.update_video_analytics_data(a)};
ViewerPanel.manager.move_in_direction=function(a){$("#comments_activity_2").hide();$("#time_stmp_coments_wrpr").css("display","none");$("#time_stmp_coments_wrpr").addClass("hide");"backward"==a?this.move_backward():"forward"==a&&this.move_forward();ViewerPanel.is_mobile||(ViewerPanel.comments.reset_comment_activity("reply"),ViewerPanel.comments.reset_comment_activity("comment"))};ViewerPanel.manager.move_forward=function(){var a=ViewerPanel.viewers_collection.get_next();this.update(a)};
ViewerPanel.manager.move_backward=function(){var a=ViewerPanel.viewers_collection.get_previous();this.update(a)};
ViewerPanel.manager.update=function(a){if(a){(new Date).getTime();var c=ViewerPanel;c.media.reset_media();a.uploading&&(a=a.uploading);"image"!=a.type&&"unknown"!=a.type&&(a.is_loaded=!1);ViewerPanel.navigation.next&&ViewerPanel.navigation.next.css("right","0px");PasswordPrompt.close();this.abort_ajax_request();this.update_classes(a);c[a.kind].update(a);ViewerPanel.manager.show_hide_navigation_buttons(a);ViewerPanel.header.show_and_hide_appropriate_buttons_on_navigation(a);ViewerPanel.document_controls.hide_immediately(0);
ViewerPanel.presentation_controls.hide();ViewerPanel.comments.empty_hide_components_during_navigation();ViewerPanel.activities.empty_hide_activities_during_navigation();this.deffered_update(a);"image"!=a.type&&$(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("viewer-full");"failed"!=a.type&&"skipped"!=a.type&&$(ViewerPanel.download_file_msg).addClass("hide");0<$(".smart_app_banner").length&&($(".smart_app_banner").addClass("smart_app_banner_fixed"),$(".smart_app_banner").find(".open_in_app_url").attr("href",
"jumpshare://"+VIEWER_SUBDIR+"/"+a.id),$(ViewerPanel.sub_container_type+ViewerPanel.sub_container_name).addClass("plus-margin").find(".viewer-header").addClass("plus-margin"),$(ViewerPanel.sub_container_type+ViewerPanel.sub_container_name).find(".viewer-content-wrapper").css("margin-bottom","17%"));ViewerPanel.media.remove_chapters_summary();"1"===Jmp.Helpers.getUrlParam("embed")?setTimeout(function(){$("#viewer_share").trigger("click");$(".modal-share #embed_modal_tab").trigger("click")},1E3):"system"==
UTYPE&&"1"===Jmp.Helpers.getUrlParam("lock")&&setTimeout(function(){$("#viewer_share").trigger("click");$(".modal-share #CPS_modal_tab").trigger("click");PLANID=4;$(".lnk-privacy-menu").find("li[data-val=password] a").trigger("click");PLANID=1;$(".lnk-privacy-txt span.utp.plus").remove();$(".lnk-privacy-wrapper button").attr("disabled","disabled");$(".password_form_field input").focus()},1E3)}};
ViewerPanel.manager.load_more=function(){for(var a=ViewerPanel.viewers_collection,c=a.current,b,h=1;5>h;h++){if(c+h<a.item_ids.length-1&&(b=a.get_by_index(c+h),"image"==b.type&&!b.is_loaded)){var k=new Image;k.src=b.full_image_src}0<c-h&&(b=a.get_by_index(c-h),"image"!=b.type||b.is_loaded||(k=new Image,k.src=b.full_image_src))}};ViewerPanel.manager.update_classes=function(a){a=a.prepare_classes();this.remove_classes(this.previous_classes);this.add_classes(a);this.previous_classes=a};
ViewerPanel.manager.add_classes=function(a){$("#"+ViewerPanel.container_name).addClass(a)};ViewerPanel.manager.remove_classes=function(a){$("#"+ViewerPanel.container_name).removeClass(a)};
ViewerPanel.manager.deffered_update=function(a){clearTimeout(this.deferred_last_timeout);this.deferred_last_timeout=setTimeout(function(){if(ViewerPanel.is_open()){ViewerPanel.header.update(a);ViewerPanel.browser_title_updater.update(a.name);ViewerPanel.browser_url_updater.update(a.link,!0);ViewerPanel.header.show_and_hide_appropriate_buttons(a);ViewerPanel.manager.update_view_count(a);ViewerPanel.comments.load_comments(a);ViewerPanel.cta.load_cta(a);ViewerPanel.activities.load_activities(a);if("video"==
a.type||"audio"==a.type)ViewerPanel.video_trim.initiate_trim_section(),ViewerPanel.subtitles.load_titles(a);ViewerPanel.is_mobile&&(ViewerPanel.footer.showhide_count(),ViewerPanel.footer.update_count(a))}},this.deferred_update_time)};ViewerPanel.manager.abort_ajax_request=function(){null!=ViewerPanel.ajax_request&&ViewerPanel.ajax_request.abort()};
ViewerPanel.manager.initialize_hide_navigation_buttons_deferred=function(){$("#blocker").length?$(window).bind("load",function(){ViewerPanel.manager.hide_navigation_buttons_deffered();ViewerPanel.navigation.hide_via_css()}):(ViewerPanel.manager.hide_navigation_buttons_deffered(),ViewerPanel.navigation.hide_via_css())};
ViewerPanel.manager.hide_navigation_buttons_deffered=function(){this.cancel_hide_navigation_buttons_deffered();this.hide_navigation_buttons_timeout=setTimeout(function(){ViewerPanel.navigation.hide()},3E3)};ViewerPanel.manager.cancel_hide_navigation_buttons_deffered=function(){clearTimeout(this.hide_navigation_buttons_timeout)};
ViewerPanel.manager.show_hide_navigation_buttons=function(a){ViewerPanel.navigation.reset_next_arrow_position();0==a.index?(ViewerPanel.navigation.hide_back_button_first_item(),1<ViewerPanel.viewers_collection.get_total_items_count()&&ViewerPanel.navigation.show_next_button()):a.index==ViewerPanel.viewers_collection.get_total_items_count()-1?(ViewerPanel.navigation.hide_next_button_last_item(),ViewerPanel.navigation.show_back_button()):ViewerPanel.navigation.show()};
ViewerPanel.manager.show_hide_navigation_buttons_and_footer_thumbs=function(){1==ViewerPanel.viewers_collection.get_total_items_count()?ViewerPanel.navigation.hide():ViewerPanel.navigation.show()};ViewerPanel.manager.update_cta_clicked_count=function(a){a&&"public"==VIEW&&"undefined"==typeof a.cta_clicked&&(a.cta_clicked=1,JumpshareAnalytics.TrackCtaClicked("file",a.id))};
ViewerPanel.manager.update_video_analytics_data=function(a){a&&"public"==VIEW&&"undefined"==typeof a.updated_video_analtics&&(a.updated_video_analtics=1,JumpshareAnalytics.UpdateVideoAnaltics("file",a.id,ViewerPanel.media.viewer_video_percentage_played,ViewerPanel.media.viewer_video_cta_clicked))};ViewerPanel.manager.update_view_count=function(a){a&&"public"==VIEW&&"undefined"==typeof a.viewed&&(a.viewed=1,JumpshareAnalytics.TrackView("file",a.id))};
ViewerPanel.manager.show_hide_thumbs_panel=function(){var a=$(ViewerPanel.container_type+ViewerPanel.container_name);a.hasClass("no-footer")?a.removeClass("no-footer"):a.addClass("no-footer");a=ViewerPanel.viewers_collection.get_current_viewer();"spreadsheet"==a.type?ViewerPanel.document.spreadsheet.resize_iframe("viewer_iframe"):"document"==a.type&&a.presentation_mode&&ViewerPanel.document.pdf_manager.resize_presentation()};ViewerPanel.manager.next_panel=function(){};
ViewerPanel.manager.prev_panel=function(){};ViewerPanel.manager.reset_thumb_panel=function(){$("#viewer_items_list").css("margin-left","");ViewerPanel.navigation.show_list_arrow_next();ViewerPanel.navigation.hide_list_arrow_prev();ViewerPanel.viewers_collection.current_panel=0};
ViewerPanel.manager.reset_viewers=function(){ViewerPanel.header.uninitialize_copy_link();var a=ViewerPanel.media,c=ViewerPanel.document;c.fid="";c.viewer_document_wrapper.html("");c.pdf_manager.pdf=null;a.fid="";a.font_wrapper.html("");a.viewer_presentation_container.html("");a.reset_media()};ViewerPanel.manager.reset_containers=function(){var a=ViewerPanel.media,c=ViewerPanel.document;c.fid="";c.viewer_document_wrapper.html("");a.fid="";a.font_wrapper.html("");a.viewer_presentation_container.html("")};
ViewerPanel.manager.attach_control_zoom_in=function(){ViewerPanel.header.control_zoom_in.bind("click",function(){var a=ViewerPanel.viewers_collection.get_current_viewer();"document"==a.type?ViewerPanel.document.pdf_manager.zoom_in():"cad"==a.type&&handleKeyDown({keyCode:187});return!1})};
ViewerPanel.manager.attach_control_zoom_out=function(){ViewerPanel.header.control_zoom_out.bind("click",function(){var a=ViewerPanel.viewers_collection.get_current_viewer();"document"==a.type?ViewerPanel.document.pdf_manager.zoom_out():"cad"==a.type&&handleKeyDown({keyCode:189});return!1})};
ViewerPanel.manager.attach_control_goto_page=function(){ViewerPanel.header.page_no_element.bind("keydown",function(a){"document"==ViewerPanel.viewers_collection.get_current_viewer().type&&13==a.which&&ViewerPanel.document.pdf_manager.goto_page($(this).val());a.stopPropagation()})};
ViewerPanel.manager.attach_control_color_container=function(){ViewerPanel.header.controls_color_container.bind("click",function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();"cad"==c.type?ViewerPanel.document.cad.set_background_color(a):"ebook"==c.type&&ViewerPanel.document.ebook.set_color_theme(a);return!1})};
ViewerPanel.manager.attach_control_grid_container=function(){ViewerPanel.header.controls_grid_container.bind("click",function(a){"cad"==ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.document.cad.set_background_grid(a)})};ViewerPanel.manager.attach_control_font_small=function(){ViewerPanel.header.control_font_small.bind("click",function(){"ebook"==ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.document.ebook.set_small_font();return!1})};
ViewerPanel.manager.attach_control_font_large=function(){ViewerPanel.header.control_font_large.bind("click",function(){"ebook"==ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.document.ebook.set_large_font();return!1})};ViewerPanel.manager.attach_control_font_slide_wrapper=function(){ViewerPanel.header.control_font_slide_wrapper.bind("click",function(a){"ebook"==ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.document.ebook.set_font_on_slide(a);return!1})};
ViewerPanel.manager.update_progress=function(a,c){a=ViewerPanel.viewers_collection.fetch_by_id(a);a instanceof UploadingViewer&&ViewerPanel.viewers_collection.is_current_viewer(a)&&(a.progress=c,ViewerPanel.uploading.update(a))};ViewerPanel.manager.enable_disable_text_selection=function(a){20==a.id.length?$(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("distxts"):20<a.id.length&&"undefined"==typeof a.download&&$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("distxts")};
ViewerPanel.manager.enable_disable_contextmenu=function(a){"uploading"in a?$(".toggle-comments").addClass("disabled"):$(".toggle-comments").removeClass("disabled")};
ViewerPanel.manager.enable_disable_download_button=function(a){20==a.id.length?($("#download_file_link").removeClass("hide"),$("#viewer_download_save_dropdown").hasClass("hide")||($("#download_file_link_group").removeClass("hide"),$("#download_file_link").addClass("hide"))):20<a.id.length&&"undefined"==typeof a.download&&$("#download_file_link").addClass("hide");"unknown"==a.type&&a.file_url&&""!=a.file_url&&$("#download_file_link").addClass("hide")};
ViewerPanel.manager.disable_links=function(){if(ViewerPanel.is_mobile)return!1;$("div.document-page").live("click",function(a){Jmp.App.Lightbox.show({type:"links_disabled_for_security_reasons"});return!1});"undefined"!=typeof ViewerPanel.document.viewer_iframe&&ViewerPanel.document.viewer_iframe.contents().find("#data_cell").find("a").bind("click",function(a){Jmp.App.Lightbox.show({type:"links_disabled_for_security_reasons"});return!1})};ViewerPanel.manager.enable_thumbs_panel_tooltips=function(a){};
ViewerPanel.manager.destroy_thumbs_panel_tooltips=function(a){};ViewerPanel.browser_title_updater={};ViewerPanel.browser_title_updater.update=function(a){"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?Jmp.Helpers.update_browser_title(a):Jmp.Helpers.update_browser_title_without_sitetitle(a)};ViewerPanel.browser_url_updater={};ViewerPanel.browser_url_updater.update=function(a,c){Jmp.App.changeAddress(a,c)};ViewerPanel.media={viewer_image_id:"viewer_image",image_gallery_id:"#image_gallery",viewer_image_odd_id:"#viewer_image_1",viewer_image_even_id:"#viewer_image_2",viewer_image_odd_container_id:"viewer_image_container_1",viewer_image_even_container_id:"viewer_image_container_2",viewer_image_last_id:"#viewer_image_2",viewer_audio_player_id:"#audio_player",viewer_video_player_id:"#video_player",viewer_video_percentage_played:0,viewer_video_cta_clicked:0,viewer_video_is_owner:0,viewer_video_analytics_updated:0};
ViewerPanel.media.initialize=function(){this.is_initialized||this.bootstrap()};
ViewerPanel.media.bootstrap=function(){this.viewer_audio_player=$(this.viewer_audio_player_id);this.viewer_video_player=$(this.viewer_video_player_id);this.video_player_obj=this.audio_player_obj=null;this.viewer_presentation_wrapper=$("#presentation_wrapper");this.viewer_presentation_container=$("#presentation_container");this.font_wrapper=$("#font_wrapper");this.viewer_image=document.getElementById(this.viewer_image_id);this.image_gallery=$(this.image_gallery_id);this.viewer_image_odd=$(this.viewer_image_odd_id);
this.viewer_image_even=$(this.viewer_image_even_id);this.viewer_image_odd_container=document.getElementById(this.viewer_image_odd_container_id);this.viewer_image_even_container=document.getElementById(this.viewer_image_even_container_id)};ViewerPanel.media.update=function(a){this["handle_"+a.type](a)};
ViewerPanel.media.reset_media=function(){null!=this.audio_player_obj&&(this.audio_player_obj.pause(),this.viewer_audio_player.attr("src",""));null!=this.video_player_obj&&(document.getElementById("video_player_html5").pause(),this.video_player_obj.setPoster(""),"iOS"!==Jmp.Helpers.detect_mobile_os()?this.video_player_obj.setSrc(""):$("#video_player_html5").attr("src",""),$("source",this.viewer_video_player).attr("src",""),this.viewer_video_player.removeAttr("poster"));this.viewer_presentation_wrapper.addClass("hide");
$(ViewerPanel.embed.embed_iframe_odd_id).attr("src","");$(ViewerPanel.embed.embed_iframe_even_id).attr("src","")};ViewerPanel.media.handle_audio=function(a){var c=[];this.viewer_audio_player.attr("src",a.full_src);document.getElementById("player1");if(null==this.audio_player_obj)this.audio_player_obj=new MediaElementPlayer(ViewerPanel.media.viewer_audio_player_id.substr(1),{loop:!1,defaultAudioHeight:47,defaultAudioWidth:500,startVolume:1,enableAutosize:!1,alwaysShowHours:!1,features:"playpause progress volume current duration fasterslower".split(" "),alwaysShowControls:!0,timeAndDurationSeparator:'<span class="duration_seperator"> / </span>',
enableKeyboard:!0,pauseOtherPlayers:!0,videoVolume:"horizontal",error:function(){},success:function(h){h.load();setTimeout(()=>{h.setSrc(a.full_src)},1E3);$("#audio_wrapper .display-playback-speed").html("<p style='margin-right: 8px;'>1<span style='left: 19px;'>\u00d7</span></p>");var k=1;$("#audio_wrapper .display-playback-speed").click(function(){7<++k&&(k=1);1==k&&(h.playbackRate=1,$(".display-playback-speed").html("<p style='margin-right: 8px;'>1<span style='left: 19px;'>\u00d7</span></p>"));
2==k&&(h.playbackRate=1.25,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.2<span style='left: 27px;'>\u00d7</span></p>"));3==k&&(h.playbackRate=1.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.5<span style='left: 27px;'>\u00d7</span></p>"));4==k&&(h.playbackRate=1.75,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.7<span style='left: 27px;'>\u00d7</span></p>"));5==k&&(h.playbackRate=2,$(".display-playback-speed").html("<p style='margin-right: 8px;'>2<span style='left: 19px;'>\u00d7</span></p>"));
6==k&&(h.playbackRate=2.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>2.5<span style='left: 27px;'>\u00d7</span></p>"));7==k&&(h.playbackRate=.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>0.5<span style='left: 27px;'>\u00d7</span></p>"))});$("#audio_wrapper .mejs__volume-button").mouseenter(function(){50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").css({left:"255px",width:"34.5%"}):$(".audio_mejs_player .mejs__time-rail").css({left:"225px",
width:"40.4%"});$("#audio_wrapper .mejs__time").css({left:"125px"})});$("#audio_wrapper .toggle_caption_container").remove();$('<div class="toggle_caption_container"><span id="captions_regular_dark"></span><span class="hide" id="captions_active_dark"></span></div>').appendTo("#audio_wrapper .mejs__controls ");var l=$("#audio_wrapper .mejs__inner");"iOS"===Jmp.Helpers.detect_mobile_os()&&(l=$(".audio-player"));0===$("#custom_captions_wrapper_audio").length?l.prepend('<div class="custom_captions_wrapper_audio hide" style="width: 100%" id="custom_captions_wrapper_audio"><span>When you are 15 years old, what job did you expect to have as a 30-year-old?</span></div>'):
$("#custom_captions_wrapper_audio").removeClass("hide").addClass("hide");h.addEventListener("loadedmetadata",function(n){$(".mejs__time-rail").removeClass("hide");$(".mejs__controls").css("opacity","1");ViewerPanel.media.loadedMetaData=!0;ViewerPanel.subtitles.attach_subtitles_video_icon_actions("audio");$(".display-playback-speed").html("<p style='margin-right: 8px;'>1<span style='left: 19px;'>\u00d7</span></p>");k=1;$("#handle_audio_trim_id").removeAttr("disabled");$("#custom_captions_wrapper_audio span").html("");
$("#video_eneded_msg_free_users").remove();$("#video_eneded_msg").remove();50<$(".mejs__duration").width()?768<$(window).width()?$(".audio_mejs_player .mejs__time-rail").css({left:"205px",width:"calc(100% - 277px)"}):$(".audio_mejs_player .mejs__time-rail").attr("style","left: 170px; width: calc(100% - 245px) !important"):768<$(window).width()?$(".audio_mejs_player .mejs__time-rail").css({left:"175px",width:"calc(100% - 247px)"}):$(".audio_mejs_player .mejs__time-rail").attr("style","left: 135px; width: calc(100% - 210px) !important");
3599<h.duration?($("#comment_new_placeholder").css({left:"126px"}),$("#comment_new_text").css({width:"calc(100% - 86px)","float":"right","padding-left":"0px"}),$(".mejs__currenttime").text("00:00:00")):($("#comment_new_placeholder").css("left","106px"),$("#comment_new_text").css({width:"calc(100% - 65px)","float":"right","padding-left":"0px"}),$(".mejs__currenttime").text("00:00"))});h.addEventListener("ended",function(n){ViewerPanel.video_trim.has_trim_iniciated?ViewerPanel.video_trim.check_next_video(h):
($("#custom_captions_wrapper_audio").removeClass("hide").addClass("hide"),$("#custom_captions_wrapper_audio span").html(""),ViewerPanel.media.hasVideoEnded=!0)});h.addEventListener("canplay",function(n){ViewerPanel.video_trim.has_trim_iniciated&&(ViewerPanel.video_trim.new_video_added&&(h.play(),h.pause()),$(".trim_loader").addClass("hide"),$(".ui-slider").removeClass("hide"),ViewerPanel.video_trim.new_video_added=!1)});"pro"==$("#comment_new").data("et")&&h.addEventListener("timeupdate",function(n){ViewerPanel.video_trim.has_trim_iniciated&&
ViewerPanel.video_trim.update_editor_cursor(h);0<Jmp.Helpers.video_tracks.length&&0==ViewerPanel.media.hasVideoEnded&&ViewerPanel.media.show_tracks_audio();if(ViewerPanel.video_trim.has_trim_iniciated){n=h.getCurrentTime();let q=0,u=1;$(".editor_timeline_wrapper").each(function(){const v=parseInt($(this).data("maxtimer"));ViewerPanel.video_trim.current_video_index>u&&(q+=v);u++});0<q&&(q/=10);$("#audio_wrapper .mejs__currenttime").text("").text(Jmp.Helpers.secondsToMMSS(n+q));$("#editor_current_time_video").text("").text($("#audio_wrapper .mejs__currenttime").text());
$("#audio_wrapper .mejs__duration").text("").text(Jmp.Helpers.secondsToMMSS(ViewerPanel.video_trim.videos_total_duration))}else{if(3599<h.duration){n=h.currentTime;var p=Math.floor(n%3600/60),r=Math.floor(n%60);n=Math.floor(n/3600).toString().padStart(2,"0")+":"+p.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0");$("#audio_wrapper .mejs__currenttime").text(n)}$("#editor_current_time_video").text("").text($("#audio_wrapper .mejs__currenttime").text())}});h.addEventListener("playing",function(n){ViewerPanel.media.hasVideoEnded=
!1});h.addEventListener("seeking",function(n){if(3599<h.duration){n=h.currentTime;var p=Math.floor(n%3600/60),r=Math.floor(n%60);n=Math.floor(n/3600).toString().padStart(2,"0")+":"+p.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0");$("#audio_wrapper .mejs__currenttime").text(n)}});h.addEventListener("progress",function(n){if(3599<h.duration){n=h.currentTime;var p=Math.floor(n%3600/60),r=Math.floor(n%60);n=Math.floor(n/3600).toString().padStart(2,"0")+":"+p.toString().padStart(2,"0")+":"+
r.toString().padStart(2,"0");$("#audio_wrapper .mejs__currenttime").text(n)}});var m=1;$(".mejs__volume-button").mouseleave(function(){1===m||5===m?ViewerPanel.is_mobile?50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").css({left:"185px",width:"calc(100% - 190px)"}):$(".audio_mejs_player .mejs__time-rail").css({left:"175px",width:"calc(100% - 180px)"}):50<$(".mejs__duration").width()?ViewerPanel.is_mobile?$(".audio_mejs_player .mejs__time-rail").css({left:"170px",width:"calc(100% - 245px)"}):
$(".audio_mejs_player .mejs__time-rail").css({left:"205px",width:"calc(100% - 277px)"}):$(".audio_mejs_player .mejs__time-rail").css({left:"175px",width:"calc(100% - 247px)"}):ViewerPanel.is_mobile?50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").css({left:"185px",width:"calc(100% - 200px)"}):$(".audio_mejs_player .mejs__time-rail").css({left:"175px",width:"calc(100% - 190px)"}):50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").css({left:"185px",width:"calc(100% - 267px)"}):
ViewerPanel.is_mobile?$(".audio_mejs_player .mejs__time-rail").css({left:"170px",width:"calc(100% - 245px)"}):$(".audio_mejs_player .mejs__time-rail").css({left:"205px",width:"calc(100% - 277px)"});$(".mejs__time").css({left:"74px"})});$(".display-playback-speed").click(function(){m++;7<m&&(m=1);1===m||5===m?768>$(window).width()?50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").attr("style","left: 170px; width: calc(100% - 247px) !important"):$(".audio_mejs_player .mejs__time-rail").attr("style",
"width: calc(100% - 210px) !important"):50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").css({width:"calc(100% - 277px)"}):$(".audio_mejs_player .mejs__time-rail").css({width:"calc(100% - 247px)"}):768>$(window).width()?50<$(".mejs__duration").width()?$(".audio_mejs_player .mejs__time-rail").attr("style","left: 170px; width: calc(100% - 260px) !important"):$(".audio_mejs_player .mejs__time-rail").attr("style","width: calc(100% - 225px) !important"):50<$(".mejs__duration").width()?
$(".audio_mejs_player .mejs__time-rail").css({width:"calc(100% - 292px)"}):$(".audio_mejs_player .mejs__time-rail").css({width:"calc(100% - 267px)"})});0==ViewerPanel.media.viewer_video_is_owner&&(h._updateInterval=setInterval(()=>{var n=h.currentTime,p=h.duration;0<p&&0<n&&(n=Math.floor(n/p*100),0<n&&-1==c.indexOf(n)&&(c.push(Math.floor(n)),ViewerPanel.media.update_percentage_played(c)))},100));0==ViewerPanel.media.viewer_video_is_owner&&98<=c.length&&clearInterval(h._updateInterval);$(".mejs__container").bind("mousewheel",
function(){return!1})}}),"classic"==$("#video_editing_panel").attr("data-caption-style")||"highlight"==$("#video_editing_panel").attr("data-caption-style")?$(".custom_captions_wrapper_audio span").css("background-color",$("#video_editing_panel").attr("data-caption-background-color")):$(".custom_captions_wrapper_audio span").css("background-color","rgba(0,0,0,0)");else{var b=$("#audio_wrapper").find(".mejs-pause");0<b.length&&b.removeClass("mejs-pause").addClass("mejs-play")}this.audio.attach_mouse_wheel();
a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);a.media_waveform?($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).removeClass("hide"),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).attr("src",a.media_waveform)):$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).addClass("hide")};
ViewerPanel.media.audio={};ViewerPanel.media.set_video_tracks=function(){for(var a=document.querySelector("video").textTracks.length-1;0<=a;a--)document.querySelector("audio").textTracks[a].mode="disabled";0<Jmp.Helpers.video_tracks.length&&ViewerPanel.media.set_status_video_tracker_audio(!0)};
ViewerPanel.media.set_status_video_tracker_audio=function(a){null!=Jmp.Helpers.video_tracker&&(Jmp.Helpers.video_tracker.mode=a?"showing":"disabled");a?$("#custom_captions_wrapper_audio").removeClass("hide"):$("#custom_captions_wrapper_audio").removeClass("hide").addClass("hide")};
ViewerPanel.media.show_tracks_audio=function(){if($("#captions_regular_dark").hasClass("hide")){var a=$("#audio_player_html5").get(0).currentTime,c="",b="";for(i=Jmp.Helpers.video_tracks.length-1;0<=i;i--)if(a>=Jmp.Helpers.video_tracks[i].start_time&&a<=Jmp.Helpers.video_tracks[i].stop_time){c=Jmp.Helpers.video_tracks[i].value;b=Jmp.Helpers.video_tracks[i].words;break}if(""!=c){var h=c.split(" "),k=-1,l="",m=$("#video_editing_panel").attr("data-caption-style"),n=$("#video_editing_panel").attr("data-caption-text-color"),
p=$("#video_editing_panel").attr("data-caption-text-outline-color"),r=$("#video_editing_panel").attr("data-caption-background-color");$("#video_editing_panel").attr("data-caption-length");c=$("#video_editing_panel").attr("data-caption-font-size");var q=$("#video_editing_panel").attr("data-caption-font-style");l="color: "+n+";";var u=[],v=[];if("Fancy"==m||"Highlight"==m){var x=0;"undefined"!=typeof b&&""!=b&&b.forEach(function(y){var B=y.M.start.S;y=y.M.end.S;"Fancy"==m&&a>=B&&a<=y&&u.push(x);"Highlight"==
m&&a>=B&&u.push(x);"Fancy"==m&&a>=B&&v.push(x);x++})}b=h.map(function(y){if(""!=y){var B="";"Normal"===q?B=";font-weight:normal; font-style: normal;":"Italic"===q?B=";font-weight:normal; font-style: Italic;":"Bold"===q?B=";font-weight:bold; font-style: normal;":"Bolder"===q?B=";font-weight:900; font-style: normal;":"Italic & Bold"===q?B=";font-weight:bold; font-style: Italic;":"Italic & Bolder"===q&&(B=";font-weight:900; font-style: Italic;");highlightStyle="background: rgb(0 0 0 / 0%) !important; padding:0px 0px !important;";
c_text_outline_style="";""!==p&&(c_text_outline_style=`-webkit-text-stroke: 2px ${p}`);k++;"Fancy"==m&&u.includes(k)&&(highlightStyle="opacity: 1 !important; background: "+r+" !important; padding:0px 3px !important; margin-right: -3px; margin-left: -3px; border-radius: 3px; display: inline-block;");"Highlight"==m&&u.includes(k)&&(highlightStyle="opacity: 1 !important;");"Fancy"==m&&v.includes(k)&&(highlightStyle+="opacity: 1 !important;");return'<span class="caption_word_by_word" id="p_caption_word'+
k+'" data-id="'+k+'" data-content="'+y+'" style="'+highlightStyle+l+c_text_outline_style+B+'">'+y+"</span>"}});"Fancy"!==m&&($("#custom_captions_wrapper_audio > span").css("background-color",r),$("#custom_captions_wrapper_audio").css("width","100%"));"Highlight"!==m&&"Fancy"!==m||$("#custom_captions_wrapper_audio").addClass("highlight_caption");"Normal"===c?$("#custom_captions_wrapper > span").css("font-size","calc(0.6vw + 0.6vh + 0.9vmin)"):"Large"===c?$("#custom_captions_wrapper > span").css("font-size",
"calc(0.8vw + 0.8vh + 0.9vmin)"):"Mega"===c&&$("#custom_captions_wrapper > span").css("font-size","calc(1vw + 1vh + 0.9vmin)");b=b.join(" ");$("#custom_captions_wrapper_audio span").html(b);$("#custom_captions_wrapper_audio").removeClass("hide")}else $("#custom_captions_wrapper_audio").removeClass("hide").addClass("hide"),$("#custom_captions_wrapper_audio span").html(c)}else $("#custom_captions_wrapper_audio").removeClass("hide").addClass("hide"),$("#custom_captions_wrapper_audio span").html("")};
ViewerPanel.media.audio.attach_mouse_wheel=function(){var a=ViewerPanel.media;$("#media_wrapper").unbind("mousewheel.audio").bind("mousewheel.audio",function(c){var b=a.audio_player_obj.media.volume;delta=c.originalEvent.wheelDelta;0<delta&&1>b?(b+=.1,a.audio_player_obj.setVolume(1<b?1:b)):0>delta&&0<b&&(b=b.toFixed(1),b-=.1,a.audio_player_obj.setVolume(0>b?0:b))})};
ViewerPanel.media.update_percentage_played=function(a){ViewerPanel.media.viewer_video_percentage_played=98<=a.length?100:0<a.length?98<=a[a.length-1]?a.length+(100-a[a.length-1]):a.length:0};ViewerPanel.media.handle_image=function(a){ViewerPanel.manager.remove_classes("load-viewer");if(this.viewer_image_last_id==this.viewer_image_even_id){var c=this.viewer_image_odd_container;var b=this.viewer_image_odd_id;var h=$(this.viewer_image_even_id);var k=this.viewer_image_odd_id;var l=this.image.prepare_viewer_image_template(a,1)}else c=this.viewer_image_even_container,b=this.viewer_image_even_id,h=$(this.viewer_image_odd_id),k=this.viewer_image_even_id,l=this.image.prepare_viewer_image_template(a,
2);c.innerHTML=l;h.css("opacity","0").addClass("hide");$(b).css("opacity","1");this.viewer_image_last_id=k;ViewerPanel.is_mobile||(this.viewer_image_odd.die("click").live("click",ViewerPanel.media.image.zoom),this.viewer_image_even.die("click").live("click",ViewerPanel.media.image.zoom));a.is_loaded||this.image.load_image(a,this.viewer_image_last_id);ViewerPanel.media.timeoutRef=null;ViewerPanel.media.image.attach_annotate(a);ViewerPanel.manager.load_more()};
ViewerPanel.media.image={$panzoom:void 0,min_scale:.98,max_scale:10,zoom_factor:1,zoom_timeout:0,zoom_interval:0,original_image:void 0};ViewerPanel.media.image.load_image=function(a,c){c=new Image;c.onload=function(){a.is_loaded=!0};c.src=a.full_image_src};
ViewerPanel.media.image.attach_annotate=function(a){$(window).unbind("blur.annotate_image").bind("blur.annotate_image",function(c){"1"!=$("#annotate_image").data("show")&&Socket.connect(!0)});$("#annotate_image").unbind("click.annotate_image").bind("click.annotate_image",function(c){var b=$(this);"1"==b.data("show")?ViewerPanel.media.timeoutRef=setTimeout(function(){Jmp.App.Lightbox.show({type:"show_take_screenshot_modal",downoad_url:b.data("link")});$(".modal-dialog").addClass("promotional_modal_withoutapp")},
100):window.location="jumpshare://annotate/"+a.id})};
ViewerPanel.media.image.zoom=function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();if(""!=c.file_url)return a.stopPropagation,null;a=$(ViewerPanel.container_type+ViewerPanel.container_name);a.hasClass("viewer-full")?(a.removeClass("viewer-full"),ViewerPanel.media.image.detach_scale_zoom()):(a.addClass("viewer-full"),ViewerPanel.document_controls.hide_immediately(),"undefined"!=typeof ga&&ga("send","event","Fullscreen","Image Fullscreen","Image Viewer"),ViewerPanel.media.image.attach_scale_zoom(c),
ViewerPanel.media.image.attach_zoom_in(),ViewerPanel.media.image.attach_zoom_out(),ViewerPanel.media.image.attach_zoomer_container_mousemove());return!1};
ViewerPanel.media.image.attach_scale_zoom=function(a){if($(ViewerPanel.container_type+ViewerPanel.container_name).hasClass("viewer-full")){$(ViewerPanel.media.viewer_image_odd_id).addClass("hide");$(ViewerPanel.media.viewer_image_even_id).addClass("hide");$("#control_zoom_out").addClass("blockUI");$("#control_zoom_in").removeClass("blockUI");var c='<div id="preview-zoomer-container" class="preview-zoomer-container"> \t\t\t\t<div class="xclose"></div> \t\t\t\t<div class="panzoom">';$(ViewerPanel.container_type+
ViewerPanel.container_name).hasClass("dark")?c+='<img src="/res/images/native-loader-black.GIF" srcset="/res/images/native-loader-black@2x.GIF 2x" width="26" height="26"><span class="status" style="position: absolute;top: 50%;transform: translateX(-50%) translateY(-50%);margin-top: 32px;color: #fff">Loading original resolution</span>':$(ViewerPanel.container_type+ViewerPanel.container_name).hasClass("white")&&(c+='<img src="/res/images/search-loader.GIF" srcset="/res/images/search-loader@2x.GIF 2x" width="26" height="26"><span class="status" style="position: absolute;top: 50%;transform: translateX(-50%) translateY(-50%);margin-top: 32px;color: #101010">Loading original resolution</span>');
ViewerPanel.media.image_gallery.append(c+"</div> \t\t\t</div>");ViewerPanel.media.image.attach_close_zoom_mode();ViewerPanel.media.image.original_image=new Image;ViewerPanel.media.image.original_image.onload=function(){$("#viewer_header_total_pages").text("100%");ViewerPanel.document_controls.show_deffered(5E3);"undefined"!=typeof ga&&ga("send","event","Fullscreen Viewed","Image Fullscreen","Image Viewer");(ViewerPanel.media.image.original_image.height>$(window).height()||ViewerPanel.media.image.original_image.width>
$(window).width())&&$("#preview-zoomer-container").find(".panzoom").css({width:ViewerPanel.media.image.original_image.width+"px",height:ViewerPanel.media.image.original_image.height+"px"});var b="",h=Jmp.Helpers.get_browser_with_version();"Chrome"==h[0]?b="image-rendering:-webkit-optimize-contrast;":"Safari"==h[0]&&(b="image-rendering:optimizeSpeed;");$("#preview-zoomer-container").addClass("preview-zoomer-container-loaded").find("img").attr({src:a.original_image_src,style:b,srcset:""}).removeAttr("srcset width height");
$("#preview-zoomer-container").find(".status").remove();ViewerPanel.media.image.$panzoom=$("#preview-zoomer-container").find(".panzoom").panzoom({contain:"invert",cursor:"",minScale:1,maxScale:ViewerPanel.media.image.max_scale,duration:400});ViewerPanel.media.image.$panzoom.parent().unbind("mousewheel.focal DOMMouseScroll.focal").bind("mousewheel.focal DOMMouseScroll.focal",function(k){k.preventDefault();0!=k.originalEvent.detail&&(k.originalEvent.wheelDelta=k.originalEvent.detail);if(0!=k.originalEvent.wheelDelta){var l=
k.delta||k.originalEvent.wheelDelta;ViewerPanel.media.image.$panzoom.panzoom("zoom",l?0>l:0<k.originalEvent.deltaY,{increment:.01,animate:!1,focal:k})}});ViewerPanel.media.image.$panzoom.unbind("panzoomzoom").bind("panzoomzoom",function(k,l,m,n){ViewerPanel.media.image.zoom_factor=m;$("#viewer_header_total_pages").text(Math.round(100*m)+"%");ViewerPanel.document_controls.show_deffered();m>=ViewerPanel.media.image.max_scale?$("#control_zoom_in").addClass("blockUI"):m<=ViewerPanel.media.image.min_scale?
$("#control_zoom_out").addClass("blockUI"):($("#control_zoom_in").removeClass("blockUI"),$("#control_zoom_out").removeClass("blockUI"))});ViewerPanel.media.image.resize_onload(ViewerPanel.media.image.original_image)};ViewerPanel.media.image.original_image.src=a.original_image_src}};
ViewerPanel.media.image.resize_onload=function(a){var c=$("#preview-zoomer-container"),b=c.height();c=c.width();var h=a.height;a=a.width;h>b||a>c?(b=b<h?b/h:c<a?c/a:h>a?b/h:c/a,ViewerPanel.media.image.min_scale=b,ViewerPanel.media.image.zoom_factor=b,ViewerPanel.media.image.$panzoom.panzoom("option",{minScale:ViewerPanel.media.image.min_scale}),ViewerPanel.media.image.$panzoom.panzoom("zoom",ViewerPanel.media.image.min_scale,{animate:!1})):ViewerPanel.media.image.min_scale=1;ViewerPanel.media.image.safari_hack()};
ViewerPanel.media.image.attach_zoom_in=function(){$("#control_zoom_in").unbind("click.zoom-in").bind("click.zoom-in",ViewerPanel.media.image.do_zoom_in);$("#control_zoom_in").unbind("mousedown.zoom-in").bind("mousedown.zoom-in",function(){ViewerPanel.media.image.zoom_timeout=setTimeout(function(){ViewerPanel.media.image.zoom_interval=setInterval(ViewerPanel.media.image.do_zoom_in,100)},500)}).unbind("mouseup.zoom-in mouseleave.zoom-in").bind("mouseup.zoom-in mouseleave.zoom-in",function(){clearTimeout(ViewerPanel.media.image.zoom_timeout);
clearInterval(ViewerPanel.media.image.zoom_interval)})};ViewerPanel.media.image.do_zoom_in=function(){ViewerPanel.media.image.zoom_factor<=ViewerPanel.media.image.max_scale&&(ViewerPanel.media.image.zoom_factor=ViewerPanel.media.image.calculate_zoom_in_factor(),ViewerPanel.media.image.$panzoom.panzoom("zoom",ViewerPanel.media.image.zoom_factor,{animate:!0,silent:!1}))};
ViewerPanel.media.image.calculate_zoom_in_factor=function(){if(1>ViewerPanel.media.image.zoom_factor){var a=Math.round(100*ViewerPanel.media.image.zoom_factor)%25;ViewerPanel.media.image.zoom_factor=0==a?ViewerPanel.media.image.zoom_factor+.25:ViewerPanel.media.image.zoom_factor+Math.abs(25-a)/100}else a=Math.round(100*ViewerPanel.media.image.zoom_factor)%50,ViewerPanel.media.image.zoom_factor=0==a?ViewerPanel.media.image.zoom_factor+.5:ViewerPanel.media.image.zoom_factor+(Math.abs(50-a)/100+.5);
return ViewerPanel.media.image.zoom_factor};
ViewerPanel.media.image.attach_zoom_out=function(){$("#control_zoom_out").unbind("click.zoom-out").bind("click.zoom-out",ViewerPanel.media.image.do_zoom_out);$("#control_zoom_out").unbind("mousedown.zoom-out").bind("mousedown.zoom-out",function(){ViewerPanel.media.image.zoom_timeout=setTimeout(function(){ViewerPanel.media.image.zoom_interval=setInterval(ViewerPanel.media.image.do_zoom_out,100)},500)}).unbind("mouseup.zoom-out mouseleave.zoom-out").bind("mouseup.zoom-out mouseleave.zoom-out",function(){clearTimeout(ViewerPanel.media.image.zoom_timeout);
clearInterval(ViewerPanel.media.image.zoom_interval)})};ViewerPanel.media.image.do_zoom_out=function(){ViewerPanel.media.image.zoom_factor>ViewerPanel.media.image.min_scale&&(ViewerPanel.media.image.zoom_factor=ViewerPanel.media.image.calculate_zoom_out_factor(),ViewerPanel.media.image.$panzoom.panzoom("zoom",ViewerPanel.media.image.zoom_factor,{animate:!0,silent:!1}))};
ViewerPanel.media.image.calculate_zoom_out_factor=function(){if(1>ViewerPanel.media.image.zoom_factor){var a=Math.round(100*ViewerPanel.media.image.zoom_factor)%25;ViewerPanel.media.image.zoom_factor=0==a?ViewerPanel.media.image.zoom_factor-.25:ViewerPanel.media.image.zoom_factor-a/100}else a=Math.round(100*ViewerPanel.media.image.zoom_factor)%50,ViewerPanel.media.image.zoom_factor=0==a?ViewerPanel.media.image.zoom_factor-.5:ViewerPanel.media.image.zoom_factor-a/100;return ViewerPanel.media.image.zoom_factor};
ViewerPanel.media.image.safari_hack=function(){0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&($("#preview-zoomer-container").find(".panzoom").css("position",""),$("#preview-zoomer-container").find(".panzoom").css("position","absolute"))};
ViewerPanel.media.image.detach_scale_zoom=function(){void 0!=ViewerPanel.media.image.$panzoom&&(ViewerPanel.media.image.$panzoom.parent().unbind("mousewheel.focal"),ViewerPanel.media.image.$panzoom.panzoom("destroy"));$("#preview-zoomer-container").find(".xclose").unbind("click");$("#control_zoom_out").unbind("click.zoom-out");$("#control_zoom_in").unbind("click.zoom-in");$(".preview-zoomer-container-loaded").die("mousemove");$(ViewerPanel.media.viewer_image_odd_id).removeClass("hide");$(ViewerPanel.media.viewer_image_even_id).removeClass("hide");
ViewerPanel.document_controls.hide_immediately();ViewerPanel.media.image.min_scale=.98;ViewerPanel.media.image.max_scale=10;ViewerPanel.media.image.zoom_factor=1;ViewerPanel.media.image.zoom_timeout=0;ViewerPanel.media.image.zoom_interval=0;ViewerPanel.media.image.original_image.onload=function(){};ViewerPanel.media.image.original_image=void 0;$("#preview-zoomer-container").removeClass("preview-zoomer-container-loaded").remove()};
ViewerPanel.media.image.attach_close_zoom_mode=function(){$("#preview-zoomer-container").find(".xclose").unbind("click").bind("click",function(){$(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("viewer-full");ViewerPanel.media.image.detach_scale_zoom()})};
ViewerPanel.media.image.prepare_viewer_image_template=function(a,c){var b="",h="",k="zoom-allowed";"undefined"!=typeof a.file_url&&""!=a.file_url&&(k="",b="<a href='"+a.file_url+"' target='_blank' rel='nofollow'>",h="</a>");return b+'<img id="viewer_image_'+c+'" src="'+a.full_image_src+'" class="media-item ab-center '+k+'" style="opacity: 0;" />'+h};ViewerPanel.media.image.attach_zoomer_container_mousemove=function(){$(".preview-zoomer-container-loaded").die("mousemove").live("mousemove",function(a){ViewerPanel.document_controls.show_deffered()})};video_chapters_html="";let validatedChapters=[];
ViewerPanel.media.handle_video=function(a){var c=[];ViewerPanel.media.loadedMetaData=!1;ViewerPanel.media.chapters_loded=!1;ViewerPanel.media.current_clicked_comment_id=!1;jQuery(window).bind("beforeunload",function(){0==ViewerPanel.media.viewer_video_analytics_updated&&0==ViewerPanel.media.viewer_video_is_owner&&0<ViewerPanel.media.viewer_video_percentage_played&&(ViewerPanel.media.viewer_video_analytics_updated=1,ViewerPanel.manager.update_video_analytics(a.id))});this.viewer_video_player.attr("poster",
a.poster_src);ViewerPanel.media.show_loader_before_load();if(600>=$(window).width()){var b=$(".mejs__container");"iOS"===Jmp.Helpers.detect_mobile_os()&&(b=$(".video-player"),$(".video-player").addClass("iosPlayerMobile"));var h=$(window).width();b.css({width:h,height:.5625*h,"padding-bottom":"56.25%"})}if("iOS"===Jmp.Helpers.detect_mobile_os()&&"webm"===a.full_src.split(".").pop())return Jmp.App.Notifications.display_notification({type:"error",message:"WEBM is not supported in iOS Safari"}).close_notification(),
!1;"iOS"===Jmp.Helpers.detect_mobile_os()&&$("#video_player_html5").attr("src",a.full_src);ViewerPanel.custom_thumbnail.poster_type=a.poster_src_type;null==this.video_player_obj?(this.video_player_obj=new MediaElementPlayer(ViewerPanel.media.viewer_video_player_id.substr(1),{defaultVideoWidth:716,defaultVideoHeight:ViewerPanel.is_mobile?300:400,enableAutosize:!0,stretching:"responsive",startVolume:1,features:"playpause progress current duration hdtoggle volume fasterslower fullscreen".split(" "),
videoVolume:"horizontal",hideVideoControlsOnPause:!1,enableProgressTooltip:!1,alwaysShowControls:"iOS"===Jmp.Helpers.detect_mobile_os()?!1:!0,iPadUseNativeControls:!0,iPhoneUseNativeControls:!0,controlsTimeoutMouseEnter:100,controlsTimeoutMouseLeave:100,timeAndDurationSeparator:'<span class="duration_seperator"> / </span>',customError:" ",success:function(k,l,m){k.load();k.setSrc(a.full_src);k.focus();$(k).focus();$("#video_wrapper .mejs__overlay-button").append('\n\t\t\t\t\t<svg class="play_icon" width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path id="play_bg_svg" d="M45 90C69.8529 90 90 69.8527 90 44.9999C90 20.1471 69.8529 0 45 0C20.1472 0 0 20.1471 0 44.9999C0 69.8527 20.1472 90 45 90Z" fill="#168EEA"/>\n\t\t\t\t\t\t<path id="inline_play_icon_svg" d="M35 33.268V56.732C35 58.5212 37.0582 59.6083 38.6432 58.6344L57.8999 46.9025C59.3667 46.0192 59.3667 43.9808 57.8999 43.0749L38.6432 31.3656C37.0582 30.3917 35 31.4788 35 33.268Z" fill="white"/>\n\t\t\t\t\t</svg>');
$('<div class="state_bg_notifier">\n\t\t\t\t\t\t<div class="player_state_notifier hide">\n\t\t\t\t\t\t\t<svg id="play_notifier" style="transform: translateX(2px);" width="24" height="28" viewBox="0 0 24 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="M0 2.26797V25.732C0 27.5212 2.0582 28.6083 3.6432 27.6344L22.8999 15.9025C24.3667 15.0192 24.3667 12.9808 22.8999 12.0749L3.6432 0.365571C2.0582 -0.608329 0 0.478772 0 2.26797Z" fill="white"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<svg id="pause_notifier" width="18" height="26" viewBox="0 0 18 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="M2.45455 0C3.81011 0 4.90909 1.09131 4.90909 2.4375V23.5625C4.90909 24.9087 3.81011 26 2.45455 26C1.09898 26 0 24.9087 0 23.5625V2.4375C0 1.09131 1.09898 0 2.45455 0ZM15.5455 0C16.901 0 18 1.09131 18 2.4375V23.5625C18 24.9087 16.901 26 15.5455 26C14.1899 26 13.0909 24.9087 13.0909 23.5625V2.4375C13.0909 1.09131 14.1899 0 15.5455 0Z" fill="white"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>').insertAfter("#video_wrapper .mejs__mediaelement");
$("#video_wrapper .display-playback-speed").html("<p title='Playback Speed' style='margin-right: 8px;'>1<span style='left: 19px;'>\u00d7</span></p>");var n=1;$("#video_wrapper .display-playback-speed").click(function(){ViewerPanel.media.show_hide_controls_bar();7<++n&&(n=1);1==n&&(k.playbackRate=1,$(".display-playback-speed").html("<p style='margin-right: 8px;'>1<span style='left: 19px;'>\u00d7</span></p>"));2==n&&(k.playbackRate=1.25,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.2<span style='left: 27px;'>\u00d7</span></p>"));
3==n&&(k.playbackRate=1.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.5<span style='left: 27px;'>\u00d7</span></p>"));4==n&&(k.playbackRate=1.75,$(".display-playback-speed").html("<p style='margin-right: 16px;'>1.7<span style='left: 27px;'>\u00d7</span></p>"));5==n&&(k.playbackRate=2,$(".display-playback-speed").html("<p style='margin-right: 8px;'>2<span style='left: 19px;'>\u00d7</span></p>"));6==n&&(k.playbackRate=2.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>2.5<span style='left: 27px;'>\u00d7</span></p>"));
7==n&&(k.playbackRate=.5,$(".display-playback-speed").html("<p style='margin-right: 16px;'>0.5<span style='left: 27px;'>\u00d7</span></p>"))});$("#video_wrapper .mejs__volume-button").mouseenter(function(){$(".mejs__time").css({left:"136px"});50<$(".mejs__duration").width()?$(".chapter_name_controls").css({left:"262px"}):$(".chapter_name_controls").css({left:"242px"})});$(".mejs__volume-button").mouseleave(function(){$(".mejs__time").css({left:"82px"});50<$(".mejs__duration").width()?$(".chapter_name_controls").css({left:"208px"}):
$(".chapter_name_controls").css({left:"192px"})});$(".toggle_mode").remove();$('<div class="toggle_mode"><span title="Theater mode" id="player_mode_large"></span><span title="Normal mode" class="hide" id="player_mode_smaller"></span></div>').appendTo("#video_wrapper .mejs__controls");$("#video_wrapper .toggle_caption_container").remove();$('<div class="toggle_caption_container"><span id="captions_regular"></span><span title="Captions" class="hide" id="captions_active"></span></div>').appendTo("#video_wrapper .mejs__controls ");
$("#video_wrapper .go_to_summary").remove();$('<div class="go_to_summary"><span title="Summary" id="summary_goto"></span></div>').appendTo("#video_wrapper .mejs__controls ");m=$("#video_wrapper .mejs__inner");"iOS"===Jmp.Helpers.detect_mobile_os()&&(m=$(".video-player"));0===$("#custom_captions_wrapper").length?m.prepend('<div class="custom_captions_wrapper hide" id="custom_captions_wrapper"><span></span></div>'):$("#custom_captions_wrapper").removeClass("hide").addClass("hide");$player_mode=$("#video_editing_panel").attr("data-player-mode");
"small"===$player_mode?($("#player_mode_smaller").addClass("hide"),$("#player_mode_large").removeClass("hide"),$(".video-player-wrapper").addClass("small_player"),$(".video-player-wrapper").removeClass("responsivePlayerView")):"large"===$player_mode&&($("#player_mode_large").addClass("hide"),$("#player_mode_smaller").removeClass("hide"),$(".video-player-wrapper").removeClass("small_player"),$(".video-player-wrapper").addClass("responsivePlayerView"));$("#player_mode_large").click(function(){$("#player_mode_large").addClass("hide");
$("#player_mode_smaller").removeClass("hide");$(".video-player-wrapper").removeClass("small_player");$(".video-player-wrapper").addClass("responsivePlayerView");"undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user&&$.post(BASEURL_WS+"/view/player_mode",Jmp.Helpers.get_secure_params({id:a.id,mode:"large"}),function(r){$("#video_editing_panel").attr("data-player-mode","large")});ViewerPanel.media.adjust_summary_chapters_ui()});$("#player_mode_smaller").click(function(){$("#player_mode_smaller").addClass("hide");
$("#player_mode_large").removeClass("hide");$(".video-player-wrapper").addClass("small_player");$(".video-player-wrapper").removeClass("responsivePlayerView");"undefined"!=typeof is_loggedin_user&&"true"==is_loggedin_user&&$.post(BASEURL_WS+"/view/player_mode",Jmp.Helpers.get_secure_params({id:a.id,mode:"small"}),function(r){$("#video_editing_panel").attr("data-player-mode","small")});ViewerPanel.media.adjust_summary_chapters_ui()});$(".mejs__container").bind("mousewheel",function(){return!1});$(".mejs__overlay").click(function(){$(".mejs__controls").css("opacity",
"1");$(".mejs__overlay-button").css("display","none")});k.addEventListener("loadedmetadata",function(r){ViewerPanel.media.loadedMetaData=!0;ViewerPanel.media.player_prepare_on_load();ViewerPanel.comments.update_new_comment_width();ViewerPanel.comments.remvoe_timeline_timed_comments_dom();ViewerPanel.subtitles.attach_subtitles_video_icon_actions("video");ViewerPanel.comments.show_timed_comments();$("#loading_video_wait").addClass("hide");$("#time_stmp_coments_wrpr").addClass("hide");ViewerPanel.media.startedPlaying=
!1;$(".mejs__time-rail").addClass("hide");$(".mejs__layer").first().css("display","none");$(".mejs__overlay-play").removeClass("hide");$(".mejs__overlay-play").css("cursor","pointer");$("#video_loader_anim").remove();$("#handle_video_trim_id").removeAttr("disabled");$("#update_custom_thumbnail_video").removeAttr("disabled");$("#custom_captions_wrapper span").html("");$(".hover_dark_overlay").remove();$(".show_video_timer").remove();$("#video_wrapper .mejs__overlay-play").append(`
							<div class='hover_dark_overlay'></div>
							<span class="show_video_timer">${Jmp.Helpers.format_video_duration(Math.floor(l.getDuration()))}</span>
						`);$(".chapters_container").remove();$(".mejs__time-rail").append('<span class="chapters_container" id="chapter-markers"></span>');$("#custom_captions_wrapper").click(function(){$("#video_wrapper").hasClass("playIsPaused")?k.play():k.pause()});$(".mejs__time-loaded, .mejs__time-current").css("opacity","1");$(".mejs__time-total").css({background:"rgba(255,255,255,0.3)",height:"4px"});$(".mejs__time-total span").css("pointer-events","auto");$(".mejs__time-hovered").css({"pointer-events":"none",
opacity:"1"});$(".chapter_name_controls").remove();$(".video_chapters_container_element").length||ViewerPanel.media.append_chapters_segments();k.addEventListener("canplay",function(q){ViewerPanel.video_trim.has_trim_iniciated&&(console.log("ViewerPanel.video_trim.new_video_added : ",ViewerPanel.video_trim.new_video_added),ViewerPanel.video_trim.new_video_added&&(k.play(),k.pause()),$(".trim_loader").addClass("hide"),$(".ui-slider").removeClass("hide"),ViewerPanel.video_trim.new_video_added=!1)});
$("#handle_annotation").removeClass("blockUI");$("#handle_annotation #remove_annotateion_icon").tooltip({placement:"left",html:!0,title:"Hide drawing tools"});$("#handle_annotation #anotaiton_icon").tooltip({placement:"left",html:!0,title:"Show drawing tools"});$(".comment-edit").removeClass("blockUI")});k.addEventListener("timeupdate",function(r){ViewerPanel.comments.show_comment_during_video(Math.floor(k.getCurrentTime()));ViewerPanel.video_trim.has_trim_iniciated&&ViewerPanel.video_trim.update_editor_cursor(k);
$("#time_stmp_coments_wrpr").removeClass("hide");0<Jmp.Helpers.video_tracks.length&&0==ViewerPanel.media.hasVideoEnded&&ViewerPanel.media.show_tracks();$("#video_wrapper .mejs__controls ").hasClass("hide_controls")?ViewerPanel.media.set_tracks_position("bottom"):ViewerPanel.media.set_tracks_position("top");if(ViewerPanel.video_trim.has_trim_iniciated){r=k.getCurrentTime();let q=0,u=1;$(".editor_timeline_wrapper").each(function(){const v=parseInt($(this).data("maxtimer"));ViewerPanel.video_trim.current_video_index>
u&&(q+=v);u++});0<q&&(q/=10);$("#video_wrapper .mejs__currenttime").text("").text(Jmp.Helpers.secondsToMMSS(r+q));$("#editor_current_time_video").text("").text($("#video_wrapper .mejs__currenttime").text());$("#video_wrapper .mejs__duration").text("").text(Jmp.Helpers.secondsToMMSS(ViewerPanel.video_trim.videos_total_duration))}"iOS"!==Jmp.Helpers.detect_mobile_os()&&ViewerPanel.media.updateProgressBars();ViewerPanel.media.loadedMetaData&&ViewerPanel.media.chapters_loded&&"iOS"!==Jmp.Helpers.detect_mobile_os()&&
ViewerPanel.media.updateLoadedBars();ViewerPanel.annotation.annotation_has_started&&(ViewerPanel.media.current_clicked_comment_id=!1,ViewerPanel.annotation.first_time_clicked||ViewerPanel.annotation.hide_current_annotation_with_time())});k.addEventListener("seeked",()=>{ViewerPanel.media.current_clicked_comment_id&&ViewerPanel.annotation.show_current_annotation_with_time(ViewerPanel.media.current_clicked_comment_id)});let p;k.addEventListener("playing",function(r){$(".hover_dark_overlay").addClass("hide");
$(".show_video_timer").addClass("hide");ViewerPanel.media.startedPlaying&&($(".player_state_notifier").addClass("fade_out_plyer"),$("#play_notifier").show(),$("#pause_notifier").hide(),$(".player_state_notifier").removeClass("hide"),clearTimeout(p),p=setTimeout(()=>{$(".player_state_notifier").removeClass("fade_out_plyer");$(".player_state_notifier").addClass("hide")},400));ViewerPanel.comments.started_typing_comment=!1;ViewerPanel.media.startedPlaying=!0;$("#time_stmp_coments_wrpr").removeClass("hide");
$("#time_stmp_coments_wrpr").css("display","block");ViewerPanel.media.hasVideoEnded=!1;$("#video_eneded_msg").addClass("hide");ViewerPanel.video_trim.has_trim_iniciated||ViewerPanel.media.show_hide_controls_bar();$(".mejs__time-rail").removeClass("hide");$(".mejs__overlay-play").css("cursor","default");"iOS"===Jmp.Helpers.detect_mobile_os()&&(k.controls=!0);0!==$("#time_stmp_coments_wrpr").length||$("#comments_section").hasClass("hide")||ViewerPanel.comments.show_timed_comments();$("#time_stmp_coments_wrpr").removeClass("hide");
$("#video_wrapper .mejs__controls").hasClass("hide_controls")?$("#time_stmp_coments_wrpr").addClass("stick_to_bottom"):$("#time_stmp_coments_wrpr").removeClass("stick_to_bottom");$(".mejs__mediaelement").css({display:"block"});$("#cta_action_button").removeClass("cta_center-button");$("#video_wrapper").removeClass("videoEnded");ViewerPanel.annotation.first_time_clicked=!1;ViewerPanel.annotation.annotation_has_started&&ViewerPanel.annotation.hide_current_annotation_with_time();$(".mejs__overlay-button").css("display",
"none");$("#video_wrapper").removeClass("playIsPaused");$("#time_stmp_coments_wrpr").removeClass("hide");$("#handle_annotation").removeClass("blockUI");$(".video_chapters_container_element").length||ViewerPanel.media.append_chapters_segments()});k.addEventListener("pause",function(r){$(".player_state_notifier").addClass("fade_out_plyer");$("#play_notifier").hide();$("#pause_notifier").show();$(".player_state_notifier").removeClass("hide");clearTimeout(p);p=setTimeout(()=>{$(".player_state_notifier").addClass("hide");
$(".player_state_notifier").removeClass("fade_out_plyer")},400);ViewerPanel.media.startedPlaying&&$("#video_wrapper").addClass("playIsPaused");ViewerPanel.media.remvoe_mouse_events_player();ViewerPanel.is_mobile&&($("#cta_action_button").css({display:"inline-block"}),$("#video_wrapper .mejs__controls").removeClass("hide_controls"));$("#time_stmp_coments_wrpr").removeClass("stick_to_bottom")});$(".mejs__overlay-play").click(function(){ViewerPanel.media.startedPlaying||$(".mejs__mediaelement").css({display:"none"})});
0==ViewerPanel.media.viewer_video_is_owner&&(k._updateInterval=setInterval(()=>{var r=k.currentTime,q=k.duration;0<q&&0<r&&(r=Math.floor(r/q*100),0<r&&-1==c.indexOf(r)&&(c.push(Math.floor(r)),ViewerPanel.media.update_percentage_played(c)))},100));k.addEventListener("progress",function(r){ViewerPanel.media.loadedMetaData&&ViewerPanel.media.chapters_loded&&"iOS"!==Jmp.Helpers.detect_mobile_os()&&ViewerPanel.media.updateLoadedBars()});k.addEventListener("ended",function(r){ViewerPanel.video_trim.has_trim_iniciated||
($("#custom_captions_wrapper").removeClass("hide").addClass("hide"),$("#custom_captions_wrapper span").html(""),ViewerPanel.media.hasVideoEnded=!0,ViewerPanel.media.remvoe_mouse_events_player(),"1"==$("#cta_action_button").attr("data-appearance")&&$("#cta_action_button").removeClass("hide"),$("#video_wrapper").removeClass("playIsPaused"),$("#video_wrapper").addClass("videoEnded"),$(".mejs__overlay-play").css("display","none"),ViewerPanel.media.show_video_end_msg(),ViewerPanel.media.set_tracks_position("bottom"),
$("#time_stmp_coments_wrpr").css("display","none"),$(".inr_wrpr .video_eneded_msg_text , .inr_wrpr img").click(function(){ViewerPanel.media.makePlayableCondition(!0);"1"!=$("#cta_action_button").attr("data-appearance")&&ViewerPanel.video_trim.check_next_video(k)}));$("#handle_annotation").addClass("blockUI");0==ViewerPanel.media.viewer_video_is_owner&&98<=c.length&&clearInterval(k._updateInterval)});$(".mejs__controls").css("opacity","0")},error:function(k){}}),this.video_player_obj.setPoster(a.poster_src)):
"iOS"!==Jmp.Helpers.detect_mobile_os()&&this.video_player_obj.setSrc(a.full_src);$("#video_wrapper .mejs__time-current, #video_wrapper .mejs__time-handle-content").css("background",$("#video_editing_panel").attr("data-player-color"));$("#play_bg_svg").attr("fill",$("#video_editing_panel").attr("data-player-color-rgba"));document.documentElement.style.setProperty("--boxshadowcolor",$("#video_editing_panel").attr("data-player-color-rgba")?$("#video_editing_panel").attr("data-player-color-rgba"):"#168eea");
"classic"==$("#video_editing_panel").attr("data-caption-style")||"highlight"==$("#video_editing_panel").attr("data-caption-style")?$(".custom_captions_wrapper span").css("background-color",$("#video_editing_panel").attr("data-caption-background-color")):$(".custom_captions_wrapper span").css("background-color","rgba(0,0,0,0)");a.media_waveform?($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).removeClass("hide"),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).attr("src",
a.media_waveform)):$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .timeline_editor img`).addClass("hide");a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){$.browser.mozilla&&($(".mejs__container").hasClass("mejs__container-fullscreen")?$(".video-player").css({top:"0",transform:"none"}):$(".video-player").css({top:"50%",
transform:"translateY(-50%)"}))});$(".mejs-fullscreen-button").click(function(){ViewerPanel.is_mobile&&($(".mejs-container").toggleClass("vidohit"),$("#video_player").toggleClass("vidohit"),$("#video_wrapper").toggleClass("video-player-wrapper"))})};
ViewerPanel.media.makePlayableCondition=function(a){ViewerPanel.media.video_player_obj.play();$("#video_eneded_msg").remove();$("#video_eneded_msg_free_users").remove();$("#cta_action_button").removeClass("cta_center-button");"1"==$("#cta_action_button").attr("data-appearance")&&$("#cta_action_button").removeClass("hide").addClass("hide");a||(ViewerPanel.media.remvoe_mouse_events_player(),ViewerPanel.media.video_player_obj.pause())};
ViewerPanel.media.show_tracks=function(){if($("#captions_regular").hasClass("hide")){var a=$("#video_player_html5").get(0).currentTime,c="",b="";for(i=Jmp.Helpers.video_tracks.length-1;0<=i;i--){if(a>=Jmp.Helpers.video_tracks[i].start_time&&a<=Jmp.Helpers.video_tracks[i].stop_time){c=Jmp.Helpers.video_tracks[i].value;b=Jmp.Helpers.video_tracks[i].words;break}new VTTCue(Jmp.Helpers.video_tracks[i].start_time,Jmp.Helpers.video_tracks[i].stop_time,Jmp.Helpers.video_tracks[i].value)}if(""!=c){var h=c.split(" "),
k=-1,l="",m=$("#video_editing_panel").attr("data-caption-style"),n=$("#video_editing_panel").attr("data-caption-text-color"),p=$("#video_editing_panel").attr("data-caption-text-outline-color"),r=$("#video_editing_panel").attr("data-caption-background-color");$("#video_editing_panel").attr("data-caption-length");c=$("#video_editing_panel").attr("data-caption-font-size");var q=$("#video_editing_panel").attr("data-caption-font-style");l="color: "+n+";";var u=[],v=[];if("Fancy"==m||"Highlight"==m){var x=
0;"undefined"!=typeof b&&""!=b&&b.forEach(function(y){var B=y.M.start.S;y=y.M.end.S;"Fancy"==m&&a>=B&&a<=y&&u.push(x);"Highlight"==m&&a>=B&&u.push(x);"Fancy"==m&&a>=B&&v.push(x);x++})}b=h.map(function(y){if(""!=y){var B="";"Normal"===q?B=";font-weight:normal; font-style: normal;":"Italic"===q?B=";font-weight:normal; font-style: Italic;":"Bold"===q?B=";font-weight:bold; font-style: normal;":"Bolder"===q?B=";font-weight:900; font-style: normal;":"Italic & Bold"===q?B=";font-weight:bold; font-style: Italic;":
"Italic & Bolder"===q&&(B=";font-weight:900; font-style: Italic;");highlightStyle="background: rgb(0 0 0 / 0%) !important; padding:0px 0px !important;";c_text_outline_style="";""!==p&&(c_text_outline_style=`-webkit-text-stroke: 2px ${p}`);k++;"Fancy"==m&&u.includes(k)&&(highlightStyle="opacity: 1 !important; background: "+r+" !important; padding:0px 3px !important; margin-right: -3px; margin-left: -3px; border-radius: 3px; display: inline-block;");"Highlight"==m&&u.includes(k)&&(highlightStyle="opacity: 1 !important;");
"Fancy"==m&&v.includes(k)&&(highlightStyle+="opacity: 1 !important;");return'<span class="caption_word_by_word" id="p_caption_word'+k+'" data-id="'+k+'" data-content="'+y+'" style="'+highlightStyle+l+c_text_outline_style+B+'">'+y+"</span>"}});"Fancy"!==m&&($("#custom_captions_wrapper > span").css("background-color",r),$("#custom_captions_wrapper").css("width","100%"));"Highlight"!==m&&"Fancy"!==m||$("#custom_captions_wrapper").addClass("highlight_caption");"Normal"===c?$("#custom_captions_wrapper > span").css("font-size",
"calc(0.6vw + 0.6vh + 0.9vmin)"):"Large"===c?$("#custom_captions_wrapper > span").css("font-size","calc(0.8vw + 0.8vh + 0.9vmin)"):"Mega"===c&&$("#custom_captions_wrapper > span").css("font-size","calc(1vw + 1vh + 0.9vmin)");b=b.join(" ");$("#custom_captions_wrapper span").html(b);$("#custom_captions_wrapper").removeClass("hide")}else $("#custom_captions_wrapper").removeClass("hide").addClass("hide"),$("#custom_captions_wrapper span").html(c)}else $("#custom_captions_wrapper").removeClass("hide").addClass("hide"),
$("#custom_captions_wrapper span").html("")};
ViewerPanel.media.add_video_chapters=function(){$(".summary_chapters_container").remove();$(".media-inner").append('<div class="summary_chapters_container hide">\n\t\t<div class="video_summary_div hide"> \n\t\t\t<div style="display: flex; justify-content: space-between; position: relative;">\n\t\t\t\t<h2 style="margin-bottom : 12px;">Summary</h2>\n\t\t\t\t'+(1==ViewerPanel.media.viewer_video_is_owner?'<a id="remove_summary" style="height: 25px; width: 25px; position: absolute; right: 2px; top: 32px; cursor: pointer; z-index: 1000; background-color: #fff; display: flex; align-items: center; justify-content: center; border-radius: 50px;" class="hide"><img style="width: 17px" src="/res/images/bin.svg"></a>':"")+
"</div>"+(1==ViewerPanel.media.viewer_video_is_owner?'<p style="border: none !important; outline: none !important;" class="video_summary_generate hide">Generating automatic summary. Please wait a moment\u2026</p>':"")+(1==ViewerPanel.media.viewer_video_is_owner?'<p id="editor-summary" class="video_summary" spellcheck="false"></p>':'<p id="editor-summary" class="video_summary"></p>')+'\n\t\t<div class="hide" id="save_summary_action" style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">\n\t\t\t<a href="javascript:;" id="cancel_summary" class="btn btn-white">Cancel</a>\n\t\t\t<a href="javascript:;" id="save_summary" class="btn btn-blue">Save</a>\n\t\t</div>\n\n\t\t</div>\t\n\t</div>');
$(".summary_chapters_container").append('\n\t\t<div class="video_chapters_div hide" style="position: relative;">\n\t\t<div style="display: flex; gap: 10px; align-items: baseline;">\n            <h2 style="margin-top: 10px; margin-bottom: 0;">Chapters</h2>\n            <div class="popover__container">\n                '+(1==ViewerPanel.media.viewer_video_is_owner?'<img id="chapters_popover_action" style="width: 12px; margin-bottom: 2px;" src="/res/images/info-button.svg" alt="">':"")+'<div id="chapters_popover" class="popover custom_popovr_chapters"><span class="arrow icn-dd-top-arrow-panel"></span><p>Each chapter must be entered in a new line. Chapter timestamps must be entered in ascending order and be at least 5 seconds apart, with the first chapter starting at 00:00.</p><a target="_blank" href="https://support.jumpshare.com/article/241-how-to-edit-video-chapters" style="display: block; color: #168eea;">Learn more</a></div>\n            </div>\n        </div>'+
(1==ViewerPanel.media.viewer_video_is_owner?'<p style="margin-top: 12px;" class="video_chapters_generate hide">Generating automatic chapters. Please wait a moment\u2026</p>':"")+'<ul class="video_chapters">\n\t\t\t\n\t\t</ul>\n\t\t<a id="remove_chapters" class="hide" style="height: 22px; width: 17px; position: absolute; right: 6px; top: 46px;"><img style="width: 100%" src="https://jumptesting.com//res/images/bin.svg"></a>\n\t\t<textarea id="chapters_input" placeholder="00:00 Chapter 1\r\n00:20 Chapter 2\r\n00:30 Chapter 3" class="hide"></textarea>\n\t\t<div style="display: flex; gap: 10px; justify-content: space-between; align-items: center; margin-top: 20px;">\n\t\t\t<div id="chapter_error" style="color:#ea532a;"></div>\n\t\t\t<div class="hide" id="save_chapters_action" style="display: flex; gap: 10px; justify-content: flex-end;">\n\t\t\t\t<a href="javascript:;" id="cancel_chapters" class="btn btn-white">Cancel</a>\n\t\t\t\t<a href="javascript:;" id="save_chapters" class="btn btn-blue">Save</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\n\t\t</div>\n\t');
$(".chapter_summ_help_doc").remove();$(".summary_chapters_container").after('\n\t<div class="chapter_summ_help_doc hide">\n\t\t<p>Jumpshare AI <span style="color: #AE05CC;">(Beta)</span> automatically generates summary and chapters for your videos.</p>\n\t\t<div style="display: flex; gap: 10px; justify-content: center; align-items: center;">\n\t\t\t<a target="_blank" href="https://support.jumpshare.com/article/240-how-do-automatic-title-summary-and-chapters-work" class="bottom_link"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.73267 11.6733C8.86597 11.6733 11.4602 9.07349 11.4602 5.9458C11.4602 2.8125 8.86035 0.218262 5.72705 0.218262C2.59937 0.218262 0.00512695 2.8125 0.00512695 5.9458C0.00512695 9.07349 2.60498 11.6733 5.73267 11.6733ZM5.73267 10.7188C3.08228 10.7188 0.965332 8.59619 0.965332 5.9458C0.965332 3.29541 3.07666 1.17285 5.72705 1.17285C8.37744 1.17285 10.5056 3.29541 10.5056 5.9458C10.5056 8.59619 8.38306 10.7188 5.73267 10.7188ZM5.61475 7.10815C5.89551 7.10815 6.06958 6.92847 6.06958 6.70947V6.64209C6.06958 6.32764 6.24927 6.12549 6.64233 5.86719C7.18701 5.50781 7.57446 5.18213 7.57446 4.5083C7.57446 3.57617 6.74341 3.0708 5.78882 3.0708C4.823 3.0708 4.18848 3.53125 4.03687 4.04785C4.00879 4.1377 3.99194 4.22754 3.99194 4.323C3.99194 4.57568 4.18848 4.71045 4.37378 4.71045C4.5647 4.71045 4.68823 4.62061 4.78931 4.48584L4.89038 4.35107C5.08691 4.02539 5.37891 3.83447 5.75513 3.83447C6.26611 3.83447 6.59741 4.12646 6.59741 4.55322C6.59741 4.93506 6.36157 5.12036 5.87305 5.46289C5.46875 5.74365 5.16553 6.04126 5.16553 6.59155V6.66455C5.16553 6.95654 5.32837 7.10815 5.61475 7.10815ZM5.60352 8.78149C5.9292 8.78149 6.20996 8.52319 6.20996 8.19751C6.20996 7.87183 5.93481 7.61353 5.60352 7.61353C5.27222 7.61353 4.99707 7.87744 4.99707 8.19751C4.99707 8.51758 5.27783 8.78149 5.60352 8.78149Z" fill="#168EEA"/></svg>View help article</a>\n\t\t\t<a class="settings_lnk" href="/settings/workspace/customize">\n\t\t\t<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path d="M6.2718 1C6.20996 1.00003 6.15015 1.02203 6.10302 1.06206C6.05589 1.10209 6.02451 1.15756 6.01448 1.21858L5.76072 2.77208C5.45559 2.86083 5.16462 2.98059 4.8904 3.12976L3.60837 2.21416C3.55817 2.17832 3.4969 2.16142 3.43543 2.16646C3.37396 2.1715 3.31626 2.19815 3.27257 2.24168L2.25754 3.2556C2.21416 3.29901 2.18747 3.35631 2.18216 3.41744C2.17685 3.47857 2.19325 3.53961 2.22849 3.58984L3.1304 4.87993C2.97893 5.15572 2.85651 5.4483 2.76556 5.75628L1.21856 6.01359C1.15772 6.02383 1.10249 6.0553 1.06265 6.10241C1.02282 6.14951 1.00097 6.2092 1.00098 6.27089V7.70567C1.00087 7.76699 1.02236 7.82639 1.06168 7.87344C1.101 7.92049 1.15564 7.95219 1.21601 7.96298L2.76403 8.23709C2.85448 8.54454 2.97613 8.83732 3.12786 9.11345L2.21473 10.3908C2.17889 10.441 2.16199 10.5022 2.16703 10.5637C2.17206 10.6252 2.19872 10.6829 2.24225 10.7266L3.25677 11.7415C3.30009 11.7848 3.35726 11.8115 3.41828 11.8169C3.4793 11.8223 3.54028 11.8061 3.59053 11.7711L4.88327 10.8662C5.1583 11.0162 5.44997 11.1369 5.75614 11.2264L6.01448 12.7819C6.02462 12.8429 6.05604 12.8982 6.10316 12.9381C6.15028 12.9781 6.21004 13 6.2718 13H7.70671C7.76811 13.0001 7.82757 12.9785 7.87463 12.9391C7.9217 12.8997 7.95336 12.8449 7.96403 12.7845L8.24072 11.2228C8.54562 11.1319 8.83593 11.0095 9.10951 10.8585L10.4109 11.7716C10.4611 11.8068 10.5222 11.8232 10.5833 11.8179C10.6445 11.8126 10.7018 11.7859 10.7452 11.7425L11.7597 10.7271C11.8034 10.6833 11.8301 10.6253 11.8351 10.5636C11.84 10.5019 11.8229 10.4405 11.7867 10.3903L10.8588 9.10224C11.0072 8.82999 11.1267 8.54145 11.2155 8.23862L12.7854 7.96348C12.8459 7.95281 12.9007 7.92115 12.9401 7.87409C12.9795 7.82703 13.0011 7.76757 13.001 7.70618V6.2714C13.0009 6.20956 12.9789 6.14975 12.9389 6.10263C12.8989 6.0555 12.8434 6.02413 12.7824 6.0141L11.215 5.75781C11.1256 5.45535 11.0057 5.16732 10.8573 4.89521L11.7724 3.59137C11.8077 3.54114 11.8241 3.48009 11.8188 3.41897C11.8135 3.35784 11.7868 3.30054 11.7434 3.25713L10.7284 2.2427C10.6845 2.19898 10.6266 2.17226 10.5649 2.16731C10.5032 2.16237 10.4418 2.17951 10.3915 2.21569L9.10696 3.13944C8.83327 2.98908 8.54277 2.8673 8.23716 2.77717L7.96403 1.21603C7.95346 1.15548 7.92185 1.10061 7.87478 1.06109C7.8277 1.02156 7.76818 0.999931 7.70671 1H6.2718ZM6.49397 1.52174H7.4876L7.74747 3.00493C7.75612 3.05467 7.77902 3.10084 7.81339 3.13783C7.84776 3.17482 7.89212 3.20104 7.9411 3.21332C8.32266 3.30839 8.68102 3.4591 9.00811 3.6571C9.05184 3.68359 9.10239 3.69666 9.15349 3.69466C9.20458 3.69267 9.25396 3.67571 9.2955 3.64589L10.5164 2.76851L11.2191 3.47113L10.3498 4.70975C10.3207 4.75107 10.3043 4.79992 10.3025 4.85039C10.3007 4.90086 10.3136 4.95076 10.3396 4.99406C10.5356 5.32038 10.6843 5.67645 10.7793 6.05588C10.7917 6.10529 10.8183 6.15001 10.8557 6.18451C10.8932 6.219 10.94 6.24177 10.9903 6.25L12.4792 6.49355V7.48709L10.9872 7.74898C10.9374 7.75779 10.8913 7.78088 10.8544 7.81543C10.8175 7.84999 10.7914 7.89452 10.7793 7.94361C10.6854 8.32256 10.5366 8.67861 10.3406 9.00493C10.3143 9.04865 10.3014 9.09912 10.3034 9.15011C10.3055 9.20109 10.3225 9.25035 10.3523 9.29178L11.2338 10.5151L10.5312 11.2182L9.29448 10.3505C9.25295 10.3215 9.20385 10.3051 9.15317 10.3035C9.10249 10.3018 9.05244 10.315 9.00913 10.3414C8.68366 10.5394 8.32494 10.6908 7.94467 10.7872C7.89592 10.7995 7.85176 10.8256 7.8175 10.8624C7.78324 10.8992 7.76034 10.9451 7.75155 10.9946L7.48811 12.4783H6.49295L6.24735 11.0012C6.23899 10.9509 6.2161 10.9042 6.18151 10.8669C6.14692 10.8295 6.10214 10.803 6.0527 10.7908C5.67091 10.6967 5.31094 10.5462 4.98161 10.3485C4.93838 10.3226 4.88856 10.3098 4.8382 10.3116C4.78783 10.3134 4.73906 10.3298 4.69779 10.3587L3.47079 11.2182L2.7676 10.5141L3.63486 9.30197C3.6645 9.26044 3.68131 9.21113 3.68321 9.16015C3.68512 9.10916 3.67203 9.05874 3.64556 9.01512C3.44571 8.68492 3.29457 8.32501 3.19919 7.94158C3.18699 7.89274 3.16092 7.84847 3.12412 7.81412C3.08732 7.77976 3.04137 7.75679 2.9918 7.74796L1.52276 7.48709V6.49202L2.99079 6.24796C3.04097 6.23964 3.08763 6.21683 3.12502 6.18234C3.16241 6.14785 3.1889 6.10319 3.20123 6.05384C3.29743 5.66908 3.4485 5.30923 3.6476 4.97979C3.67386 4.93654 3.68697 4.88659 3.68534 4.83602C3.68371 4.78545 3.66741 4.73645 3.63843 4.69497L2.78136 3.47011L3.48505 2.76698L4.70136 3.63621C4.74274 3.66571 4.79183 3.68249 4.84262 3.68448C4.8934 3.68647 4.94366 3.67359 4.98722 3.64742C5.31481 3.45069 5.67561 3.30141 6.05779 3.20771C6.10747 3.19548 6.15246 3.16892 6.18716 3.13132C6.22186 3.09373 6.24474 3.04676 6.25295 2.99626L6.49397 1.52174ZM7.00098 4.91304C5.85137 4.91304 4.91384 5.8505 4.91384 7C4.91384 8.1495 5.85137 9.08696 7.00098 9.08696C8.15058 9.08696 9.08811 8.1495 9.08811 7C9.08811 5.8505 8.15058 4.91304 7.00098 4.91304ZM7.00098 5.43478C7.86859 5.43478 8.56633 6.13246 8.56633 7C8.56633 7.86754 7.86859 8.56522 7.00098 8.56522C6.13337 8.56522 5.43563 7.86754 5.43563 7C5.43563 6.13246 6.13337 5.43478 7.00098 5.43478Z" fill="#168EEA" stroke="#168EEA" stroke-width="0.5"/>\n\t\t\t</svg>\n\t\t\tSettings</a>\n\t\t</div>\t\t\t\n\t</div>\t\t\t\n\t');
$(".video_chapters").unbind("click").bind("click",function(a){1==ViewerPanel.media.viewer_video_is_owner&&"javascript:;"!=a.target&&(a=$(".summary_chapters_container .video_chapters").height(),20>=a&&(a=50),$("#chapters_input").css("height",a+"px"),$(this).addClass("hide"),$("#chapters_input").removeClass("hide"),$("#save_chapters_action").removeClass("hide"),ViewerPanel.media.adjust_summary_chapters_ui(),$("#chapters_input").val()&&$("#remove_chapters").removeClass("hide"),$("#chapters_input").focus())});
$("#remove_summary").off("click").on("click",function(){""!=$(".video_summary").html()?ViewerPanel.subtitles.update_subtitle_summary("",!0):(Jmp.App.Lightbox.hide(),Jmp.App.Notifications.display_notification({type:"error",message:"Nothing to remove"}).close_notification())});$("#remove_chapters").off("click").on("click",function(){""!=$(".video_chapters").html()?(data_extras=[{summary:$(".video_summary").html(),chapters:{}}],ViewerPanel.subtitles.update_subtitle_chapters(data_extras,!0)):(Jmp.App.Lightbox.hide(),
Jmp.App.Notifications.display_notification({type:"error",message:"Nothing to remove"}).close_notification())});$("#save_chapters").off("click").on("click",function(){if(video_chapters_html!=$("#chapters_input").val()){if(0!=validatedChapters.length){var a=$("#chapters_input").val().split("\n");a=a.filter(c=>""!==c.trim());chapters=[];$.each(a,function(c,b){if(""!==b.trim()&&(b=b.split(" "),2<=b.length)){var h=b[0];b=b.slice(1).join(" ");h=Jmp.Helpers.parse_time_format(h);if(c+1==a.length){c=Math.floor(ViewerPanel.media.video_player_obj.getDuration());
if(isNaN(c)){Jmp.App.Notifications.display_notification({type:"error",message:"Something went wrong, please refresh the page."}).close_notification();return}var k=Math.round(1E3*(ViewerPanel.media.video_player_obj.getDuration()-c));end_time=c+"."+k}else next_line=a[c+1],c=next_line.split(" "),2<=c.length&&(end_time=Jmp.Helpers.parse_time_format(c[0]),end_time-=.001);chapters.push({M:{name:{S:b},start_time:{S:h.toString()},end_time:{S:end_time.toString()}}})}});data_extras=[{summary:$(".video_summary").html(),
chapters}];ViewerPanel.subtitles.update_subtitle_chapters(data_extras,!1)}}else $(".video_chapters").removeClass("hide"),$("#chapters_input").addClass("hide"),$("#save_chapters_action").addClass("hide")});$("#cancel_chapters").off("click").on("click",function(){$("#chapters_input").val(video_chapters_html);$("#chapter_error").html("");$(".video_chapters").removeClass("hide");$("#chapters_input").addClass("hide");$("#save_chapters_action").addClass("hide");ViewerPanel.media.adjust_summary_chapters_ui();
$("#remove_chapters").addClass("hide")});$("#chapters_input").off("focus").on("focus",function(){video_chapters_html=$(this).val()});$("#chapters_input").unbind("mouseenter").bind("mouseenter",function(){""!=$("#chapters_input").val()&&$("#remove_chapters").removeClass("hide")});$("#chapters_input").unbind("mouseleave").bind("mouseleave",function(){$("#remove_chapters").is(":hover")||$("#remove_chapters").addClass("hide")});$("#chapters_input").on("input",ViewerPanel.media.validate_chapters);$(".video_summary").unbind("mouseenter").bind("mouseenter",
function(){$(this).hasClass("editing")&&($(this).is(":empty")||"<br/>"==$(this).html()||$("#remove_summary").removeClass("hide"))});$(".video_summary").unbind("mouseleave").bind("mouseleave",function(){$(this).hasClass("editing")&&($("#remove_summary").is(":hover")||$("#remove_summary").addClass("hide"))})};
ViewerPanel.media.validate_chapters=function(){$("#chapter_error").html("");var a=Math.floor(ViewerPanel.media.video_player_obj.getDuration()),c=Math.round(1E3*(ViewerPanel.media.video_player_obj.getDuration()-a));a=parseFloat(a+"."+c);c=$("#chapters_input").val().split("\n");""==$(this).val()?$("#remove_chapters").addClass("hide"):$("#remove_chapters").removeClass("hide");validatedChapters=[];last_time=0;for(let h=0;h<c.length;h++){var b=c[h];if(!b)continue;const k=b.split(" ");if(2<=k.length){if(0==
h&&"00:00"!=k[0])return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("First chapter must start at 00:00"),!1;if(!/^\d+:\d+$/.test(k[0])||!Jmp.Helpers.validate_time_format(k[0]))return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Incorrect timestamp format on line "+(h+1)),!1;if(""==k.slice(1).join(" ").trim())return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Chapter title must not be empty"),
!1;b=Jmp.Helpers.parse_time_format(k[0]);if(b<last_time)return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Chapter timestamp can't be earlier than previous timestamp on line "+(h+1)),!1;if(validatedChapters.some(l=>l.startTime===k[0]))return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Duplicate timestamp found on line "+(h+1)),!1;if(0<b&&5>b-last_time)return validatedChapters=[],$("#chapters_input").css("border-color",
"#ea532a"),$("#chapter_error").html("Chapters must be at least 5 seconds long"),!1;if(b>a)return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Chapter time exceeds video length on line "+(h+1)),!1;if(""==k.slice(1).join(" ").trim())return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Chapter title must not be empty on line "+(h+1)),!1;if(100<k.slice(1).join(" ").trim().length)return validatedChapters=
[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Chapter title must not exceed 100 characters on line "+(h+1)),!1;validatedChapters.push({startTime:Jmp.Helpers.format_time(b),title:k.slice(1).join(" ").trim()});$("#chapters_input").css("border-color","#168eea");last_time=b}else return validatedChapters=[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("Incorrect format on line "+(h+1)),!1}return 2>validatedChapters.length?(validatedChapters=
[],$("#chapters_input").css("border-color","#ea532a"),$("#chapter_error").html("You must add at least two chapters"),!1):!0};
ViewerPanel.media.append_chapters_segments=function(){if("undefined"!=typeof ViewerPanel.media.chapters_arr&&0!=ViewerPanel.media.chapters_arr.length&&!ViewerPanel.video_trim.has_trim_iniciated){var a=Math.floor(ViewerPanel.media.video_player_obj.getDuration()),c=Math.round(1E3*(ViewerPanel.media.video_player_obj.getDuration()-a)),b=parseFloat(a+"."+c);ViewerPanel.media.chapters_arr=ViewerPanel.media.chapters_arr.map((h,k)=>({start:h.M.start_time.S,end:k===ViewerPanel.media.chapters_arr.length-1?
b:h.M.end_time.S,name:h.M.name.S}));$(".video_chapters li:last-child a").attr("data-chapterstampend",b);ViewerPanel.media.make_seekbar_chapters()}};
ViewerPanel.media.make_seekbar_chapters=function(){$(".chapter_name_controls").remove();if("undefined"!=typeof ViewerPanel.media.chapters_arr&&0!=ViewerPanel.media.chapters_arr.length){$(".chapters_container").html("");var a=ViewerPanel.media.video_player_obj.getDuration()?ViewerPanel.media.video_player_obj.getDuration():0;"undefined"!=typeof ViewerPanel.media.chapters_arr&&0<ViewerPanel.media.chapters_arr.length&&($("#video_wrapper .mejs__time-loaded, .mejs__time-current").css("opacity","0"),$("#video_wrapper .mejs__time-total").css({"background-color":"transparent",
height:"0"}),$("#video_wrapper .mejs__time-total span").css("pointer-events","none"),$("#video_wrapper .mejs__time-hovered").css({"pointer-events":"none",opacity:"0"}));$("#video_wrapper .mejs__controls").append('<span class="chapter_name_controls" style="cursor:pointer;"></span>');$(".chapter_name_controls").unbind("click").bind("click",function(){$(".viewer-content-wrapper").animate({scrollTop:$(".viewer-content-wrapper").height()},500)});ViewerPanel.media.chapters_arr.forEach((c,b)=>{const h=document.createElement("span");
h.className="video_chapters_container_element";h.setAttribute("data-chapterIndex",b);const k=document.createElement("span");k.className="progress-bar";k.style.backgroundColor=$("#video_editing_panel").attr("data-player-color");const l=document.createElement("span");l.className="loaded-bar";const m=document.createElement("span");m.className="chapter_name";0===b&&(m.style.marginLeft="6px");b===ViewerPanel.media.chapters_arr.length-1&&(m.style.overflow="hidden",m.style.maxWidth="100%",m.style.textOverflow=
"ellipsis");b=document.createElement("span");b.className="seekbar_bg";const n=parseFloat(c.start)/a*100,p=parseFloat(c.end)/a*100;h.style.left=`${n}%`;h.style.width=`calc(${p-n}% - 3px)`;m.textContent=c.name;$(".chapters_container").append(h);h.append(k);h.append(l);h.append(m);h.append(b)});$(".video_chapters li a").click(function(c){c.preventDefault();$(".viewer-content-wrapper").scrollTop(0);ViewerPanel.media.video_player_obj.setCurrentTime($(this).attr("data-chapterstamp"));ViewerPanel.media.video_player_obj.play()});
$(".mejs__time-rail").hover(function(){$("#video_wrapper").addClass("hide_the_commention_avtar")},function(){$("#video_wrapper").removeClass("hide_the_commention_avtar")})}};
ViewerPanel.media.updateProgressBars=function(){"undefined"==typeof ViewerPanel.media.chapters_arr||0==ViewerPanel.media.chapters_arr.length||ViewerPanel.video_trim.has_trim_iniciated||($(".progress-bar").css("width","0px"),ViewerPanel.media.chapters_arr.forEach((a,c)=>{var b=$(".mejs__time-total .mejs__time-current").css("transform");if(null!==b&&(b=b.match(/matrix\(([^,]+),/),null!==b&&1<b.length)){b=b[1];b=$(".mejs__time-total .mejs__time-current").width()*parseFloat(b);b=$("#video_wrapper").offset().left+
b;let h=$(".video_chapters_container_element").eq(c).offset().left;b-=h;$(".mejs__container").hasClass("mejs__container-fullscreen")&&(b-=$("#video_wrapper").offset().left);b>$(".progress-bar").eq(c).parent().width()?$(".progress-bar").eq(c).css("width","100%"):($(".progress-bar").eq(c).css("width",b+"px"),0<b&&$(".chapter_name_controls").text(a.name))}}))};
ViewerPanel.media.updateLoadedBars=function(){"undefined"==typeof ViewerPanel.media.chapters_arr||0==ViewerPanel.media.chapters_arr.length||ViewerPanel.video_trim.has_trim_iniciated||($(".loaded-bar").css("width","0px"),ViewerPanel.media.chapters_arr.forEach((a,c)=>{if((a=$(".mejs__time-total .mejs__time-loaded").css("transform").match(/matrix\(([^,]+),/))&&1<a.length){a=a[1];a=$(".mejs__time-total .mejs__time-loaded").width()*parseFloat(a);a=$("#video_wrapper").offset().left+a;let b=$(".video_chapters_container_element").eq(c).offset().left;
a-=b;a>$(".loaded-bar").eq(c).parent().width()?$(".loaded-bar").eq(c).css("width","100%"):$(".loaded-bar").eq(c).css("width",a+"px")}}))};ViewerPanel.media.remove_video_chapters=function(){$(".summary_chapters_container").remove();$(".chapter_summ_help_doc").remove()};
ViewerPanel.media.set_video_tracks=function(){for(var a=document.querySelector("video").textTracks.length-1;0<=a;a--)document.querySelector("video").textTracks[a].mode="disabled";0<Jmp.Helpers.video_tracks.length&&(a=document.querySelector("video"),Jmp.Helpers.video_tracker=a.addTextTrack("captions","Captions","en"),ViewerPanel.media.set_status_video_tracker(!0),$.each(Jmp.Helpers.video_tracks,function(c,b){c=new VTTCue(b.start_time,b.stop_time,b.value);c.line=-2;c.snapToLines=!0;c.lineAlign="center";
Jmp.Helpers.video_tracker.addCue(c)}))};ViewerPanel.media.set_status_video_tracker=function(a){null!=Jmp.Helpers.video_tracker&&(Jmp.Helpers.video_tracker.mode=a?"showing":"disabled");a?$("#custom_captions_wrapper").removeClass("hide"):$("#custom_captions_wrapper").removeClass("hide").addClass("hide")};
ViewerPanel.media.set_tracks_position=function(a="bottom"){if($("#captions_regular").hasClass("hide")){if(0!=$(".msgIcn:hover").length)return!1;"top"==a?0<$(".in_video_comment_single").length?$("#time_stmp_coments_wrpr").hasClass("multicomments")?$("#custom_captions_wrapper").css("bottom","130px"):$("#time_stmp_coments_wrpr").hasClass("singlecomment")?$("#custom_captions_wrapper").css("bottom","114px"):$("#custom_captions_wrapper").css("bottom","78px"):$("#custom_captions_wrapper").css("bottom","70px"):
"bottom"==a&&(0<$(".in_video_comment_single").length?$("#time_stmp_coments_wrpr").hasClass("multicomments")?$("#custom_captions_wrapper").css("bottom","88px"):$("#time_stmp_coments_wrpr").hasClass("singlecomment")?$("#custom_captions_wrapper").css("bottom","70px"):$("#custom_captions_wrapper").css("bottom","35px"):$("#custom_captions_wrapper").css("bottom","14px"));var c=-2;"top"==a?c=-2:"bottom"==a&&(c=-2);for(a=document.querySelector("video").textTracks.length-1;0<=a;a--){for(var b=document.querySelector("video").textTracks[0].cues.length-
1;0<=b;b--)document.querySelector("video").textTracks[a].cues[b].line=c;document.querySelector("video").textTracks[a].mode="disabled";document.querySelector("video").textTracks[a].mode="showing"}}};
ViewerPanel.media.adjust_summary_chapters_ui=function(){$("#video_wrapper").hasClass("responsivePlayerView")?($(".viewer-content-wrapper").css({height:`calc(100% + ${$(".summary_chapters_container").height()+130}px)`,"overflow-y":"auto"}),$(".media-outer").css({height:`calc(100% + ${$(".summary_chapters_container").height()+130}px)`,"overflow-y":"auto"}),$(".summary_chapters_container").css({bottom:`-${$(".summary_chapters_container").height()/2}px`}),$(".chapter_summ_help_doc").css({bottom:`-${$(".summary_chapters_container").height()/
2+25}px`})):$("#video_wrapper").hasClass("small_player")&&($(".viewer-content-wrapper").css({height:`calc(100% + ${$(".summary_chapters_container").height()+85}px)`,"overflow-y":"auto"}),$(".media-outer").css({height:`calc(100% + ${$(".summary_chapters_container").height()+85}px)`,"overflow-y":"auto"}),$(".summary_chapters_container").css({bottom:`-${$(".summary_chapters_container").height()/2-35}px`}),$(".chapter_summ_help_doc").css({bottom:`-${$(".summary_chapters_container").height()/2+-6}px`}))};
window.addEventListener("resize",function(){0<$(".summary_chapters_container").length&&ViewerPanel.media.adjust_summary_chapters_ui()},!0);
ViewerPanel.media.set_default_thumb_type=function(a){if("gif"==a.substr(0,3))switch($("#thumbnail_type_gif").trigger("click"),$("#gif_choice_wrapper_id").removeClass("hide"),a){case "gif_selected":$("#select_gif_thumb_id").trigger("click");break;case "gif_custom":$("#custom_gif_thumb_id").trigger("click");break;default:$("#default_gif_thumb_id").trigger("click")}else switch($("#thumbnail_type_static").trigger("click"),a){case "custom_selected":$("#select_thumb_id").trigger("click");break;case "custom":$("#custom_thumb_id").trigger("click");
break;default:$("#default_thumb_id").trigger("click")}};
ViewerPanel.media.show_video_end_msg=function(){var a=$("#video_wrapper .mejs__inner");"iOS"===Jmp.Helpers.detect_mobile_os()&&(a=$(".video-player"));1<parseInt(O_PLANID)||"false"!==is_loggedin_user?($("#video_eneded_msg").remove(),a.append('<div class="video_eneded_msg" id="video_eneded_msg"> \t\t\t\t\t\t\t\t\t<span class="inr_wrpr">     \t\t\t\t\t\t\t\t\t<img src="/res/images/reply_icon.svg" />    \t\t\t\t\t\t\t\t\t<p class="video_eneded_msg_text">Watch Again</p> \t\t\t\t\t\t\t\t\t</span> \t\t\t\t\t\t\t\t</div>'),$("#cta_action_button").addClass("cta_center-button"),
$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left"),0!=$("#cta_action_button").length&&$("#video_eneded_msg .inr_wrpr").css("transform","translateY(60%)")):($("#video_eneded_msg_free_users").remove(),a.append('<div class="video_eneded_msg_free_users" id="video_eneded_msg_free_users">     \t\t\t\t\t\t\t\t\t<div class="jm_promo_free_msg"> \t    \t\t\t\t\t\t\t\t\t<p class="video_eneded_msg_text">Stop typing long emails. Communicate faster with videos.</p> \t    \t\t\t\t\t\t\t\t\t<a href="https://'+
window.location.hostname+'/?a=signup" target="_blank" rel="noreferrer noopener" class="btn btn-blue">Get Jumpshare For Free</a> \t    \t\t\t\t\t\t\t\t</div>     \t\t\t\t\t\t\t\t\t<span class="inr_wrpr"> \t    \t\t\t\t\t\t\t\t\t<img src="/res/images/reply_icon.svg" />\t    \t\t\t\t\t\t\t\t\t<p class="video_eneded_msg_text">Watch Again</p>     \t\t\t\t\t\t\t\t\t</span>     \t\t\t\t\t\t\t\t</div>'))};
ViewerPanel.media.load_cta_position=function(a){$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left");$("#cta_action_button").addClass(a)};
ViewerPanel.media.player_prepare_on_load=function(){$("#video_eneded_msg_free_users").remove();$("#video_eneded_msg").remove();$(".mejs__container").unbind();$("#cta_action_button").removeClass("cta_center-button");$("#video_wrapper").removeClass("videoEnded");$("#video_wrapper .mejs__controls").addClass("hide_controls");ViewerPanel.media.set_tracks_position("bottom");$("#video_wrapper").removeClass("playIsPaused");$(".mejs__overlay-play").css("display","flex");$(".mejs__overlay-button").css("display",
"block")};var timeOutRef;
ViewerPanel.media.show_hide_controls_bar=function(a){0!=$(".mejs__container:hover").length?($("#video_wrapper .mejs__controls").removeClass("hide_controls"),ViewerPanel.media.set_tracks_position("top"),"0"==$("#cta_action_button").attr("data-appearance")&&(ViewerPanel.media.load_cta_position($("#cta_action_button").attr("data-position")),$("#cta_action_button").removeClass("hide"))):($("#video_wrapper .mejs__controls").addClass("hide_controls"),ViewerPanel.media.set_tracks_position("bottom"),$("#cta_action_button").addClass("hide"));
$(".mejs__container").unbind("mouseenter").bind("mouseenter",function(){$("#video_wrapper").hasClass("editingVideoPlayer")||($("#video_wrapper .mejs__controls").removeClass("hide_controls"),ViewerPanel.media.set_tracks_position("top"),"0"==$("#cta_action_button").attr("data-appearance")&&(ViewerPanel.media.load_cta_position($("#cta_action_button").attr("data-position")),$("#cta_action_button").removeClass("hide")),$(".mejs__controls").css("opacity","1"),"0"==$("#cta_action_button").attr("data-appearance")&&
(ViewerPanel.media.load_cta_position($("#cta_action_button").attr("data-position")),$("#cta_action_button").removeClass("hide")),$("#time_stmp_coments_wrpr").removeClass("stick_to_bottom"),timeOutRef=setTimeout(function(){$("#video_wrapper .mejs__controls").addClass("hide_controls");ViewerPanel.media.set_tracks_position("bottom");$("#time_stmp_coments_wrpr").addClass("stick_to_bottom");$(".mejs__container").hasClass("mejs__container-fullscreen")&&$("#cta_action_button").addClass("hide")},2500))});
$(".mejs__container").unbind("mouseleave").bind("mouseleave",function(){$("#video_wrapper").hasClass("editingVideoPlayer")||(clearTimeout(timeOutRef),$("#video_wrapper .mejs__controls").addClass("hide_controls"),ViewerPanel.media.set_tracks_position("bottom"),$("#cta_action_button").addClass("hide"),$("#time_stmp_coments_wrpr").addClass("stick_to_bottom"))});$(".mejs__container").unbind("mousemove").bind("mousemove",function(){$("#video_wrapper").hasClass("editingVideoPlayer")||(clearTimeout(timeOutRef),
$("#video_wrapper .mejs__controls").removeClass("hide_controls"),ViewerPanel.media.set_tracks_position("top"),"0"==$("#cta_action_button").attr("data-appearance")&&(ViewerPanel.media.load_cta_position($("#cta_action_button").attr("data-position")),$("#cta_action_button").removeClass("hide")),$("#time_stmp_coments_wrpr").removeClass("stick_to_bottom"),timeOutRef=setTimeout(function(){if(0==$(".mejs__controls:hover").length){if(0!==$(".msgIcn:hover").length)return!1;$("#video_wrapper .mejs__controls").addClass("hide_controls");
ViewerPanel.media.set_tracks_position("bottom");$("#time_stmp_coments_wrpr").addClass("stick_to_bottom");$(".mejs__container").hasClass("mejs__container-fullscreen")&&$("#cta_action_button").addClass("hide")}},2500))})};
ViewerPanel.media.remvoe_mouse_events_player=function(a){clearTimeout(timeOutRef);$(".mejs__container").unbind();$("#video_wrapper .mejs__controls").removeClass("hide_controls");ViewerPanel.media.set_tracks_position("top");"0"==$("#cta_action_button").attr("data-appearance")&&(ViewerPanel.media.load_cta_position($("#cta_action_button").attr("data-position")),$("#cta_action_button").removeClass("hide"))};
ViewerPanel.media.show_loader_before_load=function(){$(".mejs__overlay-play").addClass("hide");$("#video_eneded_msg_free_users").addClass("hide");$("#video_eneded_msg").addClass("hide");0===$("#video_loader_anim").length&&$("#video_wrapper").prepend('<div style="width: 100%; height: 100%;" class="mejs__overlay mejs__layer" id="video_loader_anim"><div class="mejs__overlay-loading"><span class="mejs__overlay-loading-bg-img"></span></div></div>')};
ViewerPanel.media.remove_chapters_summary=function(){$(".chapters_container").remove();$(".viewer-content-wrapper").css("height","auto");$(".media-outer").css("height","100%");$(".chapter_summ_help_doc").remove();$(".summary_chapters_container").remove()};ViewerPanel.media.hide_chapter_summary=function(){$(".viewer-content-wrapper").css("height","auto");$(".media-outer").css("height","100%");$(".summary_chapters_container").addClass("hide");$(".chapter_summ_help_doc").addClass("hide")};
ViewerPanel.media.visible_chapters_summary=function(){$(".summary_chapters_container").css("opacity","0").removeClass("hide");setTimeout(function(){$(".viewer-content-wrapper").css({height:`calc(100% + ${$(".summary_chapters_container").height()+80}px)`,"overflow-y":"auto"});$(".media-outer").css({height:`calc(100% + ${$(".summary_chapters_container").height()+80}px)`,"overflow-y":"auto"})},1E3);setTimeout(function(){$(".summary_chapters_container").css("opacity","1");$(".chapter_summ_help_doc").removeClass("hide")},
1500)};ViewerPanel.media.update_percentage_played=function(a){ViewerPanel.media.viewer_video_percentage_played=98<=a.length?100:0<a.length?98<=a[a.length-1]?a.length+(100-a[a.length-1]):a.length:0};ViewerPanel.subtitles={subtitles_wrapper_id:"#subtitles_wrapper_id",transcription_wrapper_id:"#transcription_wrapper_id",handle_subtitles_id:"#handle_subtitles_id, #handle_subtitles_audio_id",cancel_subtitles_id:"#cancel_subtitles_id",handle_transcription_inner_id:"#show_transcription_form, #show_transcription_form_audio",publish_subtitles_id:"#publish_subtitles_id",hide_captions_sidebar_id:"#hide_captions_sidebar",captions_regular_id:"#captions_regular, #captions_regular_dark",captions_active_id:"#captions_active, #captions_active_dark",
loader_id:".loading_animation_activity",hide_transcription_sidebar_id:"#hide_transcription_sidebar",custom_captions_wrapper_id:"#custom_captions_wrapper, #custom_captions_wrapper_audio",edit_word_div:null,edit_word_sentense_id:"",viewer_id:0,updated_hash:"",skip_titles_load:!1,video_summary_html:"",is_summary_initial_added:!1,titles_url:"https://subtitles."+BASEURL.replace("https://","")+"get_titles",initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.loader=
$(this.loader_id);this.subtitles_wrapper=$(this.subtitles_wrapper_id);this.handle_subtitles=$(this.handle_subtitles_id);this.cancel_subtitles=$(this.cancel_subtitles_id);this.publish_subtitles=$(this.publish_subtitles_id);this.hide_captions_sidebar=$(this.hide_captions_sidebar_id);this.captions_regular=$(this.captions_regular_id);this.captions_active=$(this.captions_active_id);this.handle_transcription=$(this.handle_transcription_inner_id);this.transcription_wrapper=$(this.transcription_wrapper_id);
this.hide_transcription_sidebar=$(this.hide_transcription_sidebar_id);this.custom_captions_wrapper=$(this.custom_captions_wrapper_id);this.attach_subtitles_form_handler();this.attach_cancel_subtitles()},show_extras_divs:function(){if("video"==ViewerPanel.viewers_collection.get_current_viewer().type){ViewerPanel.media.add_video_chapters();var a=$("#video_editing_panel").attr("data-auto-summary"),c=$("#video_editing_panel").attr("data-auto-chapters");"1"!=c&&"1"!=a||"private"!=VIEW||($("#media_wrapper").addClass("summary_active"),
$("#video_wrapper").addClass("summary_active"),$(".summary_chapters_container").removeClass("hide"),$(".chapter_summ_help_doc").removeClass("hide"),$(".toggle_caption_container").css("right","140px"),$("#video_wrapper .display-playback-speed").css("right","174px"),$(".go_to_summary").removeClass("hide"));"1"==a&&"private"==VIEW&&($(".video_summary").addClass("hide"),$(".video_summary_generate").removeClass("hide"),$(".video_summary").html(""),$(".video_summary_div").removeClass("hide"));"1"==c&&"private"==
VIEW&&($(".video_chapters").addClass("hide"),$(".video_chapters_generate").removeClass("hide"),$(".video_chapters").html(""),$(".video_chapters_div").removeClass("hide"));"1"!=c&&"1"!=a||"private"!=VIEW||ViewerPanel.media.adjust_summary_chapters_ui()}},disable_caption_links:function(a){ViewerPanel.media.set_status_video_tracker(!1);$("#captions_regular, #captions_regular_dark").removeClass("hide");$("#captions_active, #captions_active_dark").removeClass("hide").addClass("hide");$("#captions_regular, #captions_regular_dark").addClass("span_disabled")},
update_word_count:function(){max_word_count=200;max_char_count=2E3;var a=$(".video_summary").html();a=$("<div>").html(a).text();const c=a.split(/\s+/);if(c.length>max_word_count){c.splice(max_word_count);var b=c.join(" ");$(".video_summary").html(b)}b=c.join(" ");b.length>max_char_count&&(b=b.substring(0,max_char_count),$(".video_summary").html(b));ViewerPanel.media.adjust_summary_chapters_ui();0>=a.length?$("#remove_summary").addClass("hide"):$("#remove_summary").removeClass("hide")},load_titles_extras:function(a){if("video"==
ViewerPanel.viewers_collection.get_current_viewer().type){self=this;var c="",b=[];$.each(a,function(n,p){c=p.summary;b=p.chapters});var h=[];$.each(b,function(n,p){if(p&&p.M&&p.M.line&&void 0!==p.M.line.S){line_number=p.M.line.S;const r=Jmp.Helpers.video_tracks.findIndex(q=>q.number===line_number);0<=r&&(p.M.start_time||(p.M.start_time={},p.M.end_time={}),p.M.start_time.S=Jmp.Helpers.video_tracks[r].start_time,p.M.end_time.S=Jmp.Helpers.video_tracks[r].stop_time)}p&&p.M&&p.M.start_time&&void 0!==
p.M.start_time.S?(p.M.start_time2||(p.M.start_time2={},p.M.end_time2={}),p.M.start_time2.S=p.M.start_time.S,p.M.end_time2.S=p.M.end_time.S):h.push(n)});h.sort(function(n,p){return p-n});h.forEach(function(n){0<=n&&n<b.length&&b.splice(n,1)});$.each(b,function(n,p){p.M.start_time.S=0===n?0:p.M.start_time2.S;if(n<b.length-1)p.M.end_time.S=b[n+1].M.start_time2.S-.001;else{n=Math.floor(document.getElementById("video_player_html5").duration);var r=Math.round(1E3*(document.getElementById("video_player_html5").duration-
n));p.M.end_time.S=n+"."+r}});ViewerPanel.media.chapters_arr=b;a=$("#video_editing_panel").attr("data-auto-summary");var k=$("#video_editing_panel").attr("data-auto-chapters");""!=c||0<b.length||("1"==a||"1"==k)&&"private"==VIEW?(ViewerPanel.media.add_video_chapters(),$(".video_summary_generate").addClass("hide"),$(".video_chapters_generate").addClass("hide"),$("#media_wrapper").addClass("summary_active"),$("#video_wrapper").addClass("summary_active"),$(".summary_chapters_container").removeClass("hide"),
$(".chapter_summ_help_doc").removeClass("hide"),$(".toggle_caption_container").css("right","140px"),$("#video_wrapper .display-playback-speed").css("right","174px"),$(".go_to_summary").removeClass("hide")):($("#media_wrapper").removeClass("summary_active"),$("#video_wrapper").removeClass("summary_active"),$(".summary_chapters_container").addClass("hide"),$(".chapter_summ_help_doc").removeClass("hide"),$(".toggle_caption_container").css("right","100px"),$("#video_wrapper .display-playback-speed").css("right",
"134px"),$(".go_to_summary").addClass("hide"));""!=c||"1"==a&&"private"==VIEW?($(".video_summary").html(c),$(".video_summary_div").removeClass("hide"),$("#cancel_summary").off("click").on("click",function(){$(".video_summary").html(self.video_summary_html);$("#save_summary_action").addClass("hide");$("#remove_summary").addClass("hide");$(".video_summary").removeAttr("contenteditable");$(".video_summary").removeClass("editing");ViewerPanel.media.adjust_summary_chapters_ui()}),$("#save_summary").off("click").on("click",
function(){self.video_summary_html!=$(".video_summary").html()&&(self.is_summary_initial_added=!1,ViewerPanel.subtitles.update_subtitle_summary($(".video_summary").html(),!1));$("#save_summary_action").addClass("hide");$("#remove_summary").addClass("hide");$(".video_summary").removeAttr("contenteditable");$(".video_summary").removeClass("editing");ViewerPanel.media.adjust_summary_chapters_ui()}),$(".video_summary").off("click").on("click",function(){1==ViewerPanel.media.viewer_video_is_owner&&(0==
self.is_summary_initial_added&&(self.video_summary_html=$(this).html(),self.is_summary_initial_added=!0),$(this).addClass("editing"),$("#save_summary_action").removeClass("hide"),$(".video_summary").attr("contenteditable","true"),$(this).is(":empty")||$("#remove_summary").removeClass("hide"),ViewerPanel.media.adjust_summary_chapters_ui())}),$("#editor-summary").on("paste",function(n){n.preventDefault();var p=(n.originalEvent||n).clipboardData.getData("text/plain");n=window.getSelection();if(n.rangeCount){var r=
n.getRangeAt(0);r.deleteContents();p=document.createTextNode(p);r.insertNode(p);r.setStartAfter(p);r.setEndAfter(p);n.removeAllRanges();n.addRange(r);$(this).focus()}}),$(".video_summary").on("input",self.update_word_count)):($(".video_summary").html(""),$(".video_summary_div").addClass("hide"));if(0<b.length||"1"==k&&"private"==VIEW){var l="",m="";$.each(b,function(n,p){end_time=start_time="";start_time=p.M.start_time.S;end_time=p.M.end_time.S;start_time2=p.M.start_time2.S;end_time2=p.M.end_time2.S;
n=Jmp.Helpers.secondsToMS(start_time)/1E3;var r=Jmp.Helpers.secondsToMS(end_time)/1E3,q=Jmp.Helpers.secondsToMS(start_time2)/1E3,u=Jmp.Helpers.secondsToMS(end_time2)/1E3,v=Jmp.Helpers.secondsToMMSS(n);l=l+'<li><a href="javascript:;" data-chapterstamp="'+n+'" data-chapterstampend="'+r+'" data-chapterstamp2="'+q+'" data-chapterstamp2end="'+u+'">'+v+"</a>"+p.M.name.S+"</li>";m=m+v+" "+p.M.name.S+"\r\n"});$(".video_chapters").html(l);$("#chapters_input").val(m);$(".video_chapters_div").removeClass("hide");
$(".video_chapters li a").click(function(n){n.preventDefault();$("#video_player_html5").get(0).currentTime=$(this).attr("data-chapterstamp")})}else $(".video_chapters").html(""),$(".video_chapters_div").addClass("hide");(""!=c||0<b.length||("1"==a||"1"==k)&&"private"==VIEW)&&ViewerPanel.media.adjust_summary_chapters_ui()}},load_titles_cache:function(a,c){var b=ViewerPanel.subtitles.titles_url+"/"+a.id;"undefined"!=typeof a.media_subtitles_hash&&(b=b+"_"+a.media_subtitles_hash,c.updated_hash=a.media_subtitles_hash);
$.ajax({type:"GET",url:b,success:function(h){c.hide_loader();c._validate(a)&&h.status?(ViewerPanel.media.chapters_loded=!0,$.each(h.file_captions,function(k,l){Jmp.Helpers.video_tracks.push({number:l.number,start_time:Jmp.Helpers.convet_time_to_seconds_float(l.startTime),stop_time:Jmp.Helpers.convet_time_to_seconds_float(l.stopTime),value:l.text.trim(),words:l.words})}),c.load_titles_extras(h.subtitle_extras),0<Jmp.Helpers.video_tracks.length?(ViewerPanel.media.set_status_video_tracker(!0),ViewerPanel.media.set_status_video_tracker_audio(!0),
$("#custom_captions_wrapper, #custom_captions_wrapper_audio").removeClass("hide").addClass("hide"),"ar"==a.subtitles_language||"he"==a.subtitles_language||"fa"==a.subtitles_language||"ur"==a.subtitles_language?($("#custom_captions_wrapper, #custom_captions_wrapper_audio").find("span:first-child").removeClass("rtl-flow").addClass("rtl-flow"),$(".captions_or_ts_container").removeClass("rtl-flow-transcription").addClass("rtl-flow-transcription")):($("#custom_captions_wrapper, #custom_captions_wrapper_audio").find("span:first-child").removeClass("rtl-flow"),
$(".captions_or_ts_container").removeClass("rtl-flow-transcription")),"iOS"===Jmp.Helpers.detect_mobile_os()&&(console.log("iOS"),ViewerPanel.media.set_video_tracks()),$("#captions_regular, #captions_regular_dark").removeClass("hide").addClass("hide"),$("#captions_active, #captions_active_dark").removeClass("hide"),$("#captions_regular, #captions_regular_dark").removeClass("span_disabled"),$("#copy_to_clipboard").removeClass("blockUI"),$("#download_transcript").removeClass("blockUI"),$(".input_panel_candt").removeClass("blockUI"),
$(".loading_message_ui").removeClass("hide").addClass("hide"),$(".mejs__controls").removeClass("hidden_captions")):(c.show_subtitles_empty(),""==a.media_acodec||"0"==a.media_acodec?Jmp.Helpers.transcription_no_speech_message():(generating_subtitles_for_code=Jmp.Helpers.get_timed_cookie("generating_subtitles_for_code"))&&generating_subtitles_for_code==a.id?(Jmp.Helpers.transcription_inprocess_message(),c.show_extras_divs(),c.disable_caption_links(c)):Jmp.Helpers.transcription_failed_to_load_message(),
c.disable_caption_links(c)),"private"==VIEW&&c.set_file_captions(h.file_captions)):(c.show_subtitles_empty(),(generating_subtitles_for_code=Jmp.Helpers.get_timed_cookie("generating_subtitles_for_code"))&&generating_subtitles_for_code==a.id?(Jmp.Helpers.transcription_inprocess_message(),c.show_extras_divs(),c.disable_caption_links(c)):Jmp.Helpers.transcription_failed_to_load_message())}})},load_titles:function(a){this.show_loader();var c=this;Jmp.Helpers.video_tracks=[];$("#custom_captions_wrapper, #custom_captions_wrapper_audio").removeClass("hide").addClass("hide");
$("#custom_captions_wrapper, #custom_captions_wrapper_audio").find("span").html("");var b=$("#video_player_html5");0<b.length&&(b=b.get(0),""==a.media_acodec||"0"==a.media_acodec?(b.muted=!0,$(".mejs__volume-button").removeClass("disabled").addClass("disabled"),$(".mejs__volume-button button").attr("disabled","disabled"),$(".mejs__horizontal-volume-slider").css("pointer-events","none")):(b.muted=!1,$(".mejs__volume-button").removeClass("disabled"),$(".mejs__volume-button button").removeAttr("disabled"),
$(".mejs__horizontal-volume-slider").css("pointer-events","all")));this._validate(a)&&(c.hide_subtitles_empty(),c.viewer_id=a.id,1==c.skip_titles_load&&("undefined"!=typeof a.media_subtitles_hash&&(a.media_subtitles_hash=Date.now(),$("#"+a.id).find(".thumbnail img").attr("data-subtitles-hash",a.media_subtitles_hash),c.disable_caption_links(c),ViewerPanel.media.show_tracks(),ViewerPanel.media.show_tracks_audio()),c.skip_titles_load=!1),"audio"!=a.type&&$("#handle_chapters_id").removeAttr("disabled"),
b=parseInt(O_PLANID),Jmp.Helpers.isBusinessOrHigherPlanByPlanID(b)||Jmp.Helpers.isPlusExtraPlanUserByPlanID(b)?(c.show_subtitles_empty(),Jmp.Helpers.transcription_loading_message(),c.handle_transcription.removeAttr("disabled"),c.handle_subtitles.removeAttr("disabled"),"undefined"==typeof a.media_subtitles?($media_subtitle_queued=$subtitles_hash=$has_subtitles="0",$media_acodec="",$.get(WS_PREFIX+"/p/"+a.id,function(h){if("1"==h.status){h=h.data_tags.split("|");for(var k=0;k<h.length-1;k++)if(""!=
h[k]){var l=h[k].split("=");"data-media-subtitles"==l[0]?($has_subtitles=l[1].replace(/"/g,""),a.media_subtitles=$has_subtitles,$("[id='"+a.id+"']").each(function(){$(this).find(".thumbnail img").attr(l[0],l[1].replace(/"/g,""))})):"data-subtitles-hash"==l[0]?($subtitles_hash=l[1].replace(/"/g,""),c.updated_hash=$subtitles_hash,a.media_subtitles_hash=$subtitles_hash,$("[id='"+a.id+"']").each(function(){$(this).find(".thumbnail img").attr(l[0],l[1].replace(/"/g,""))})):"data-media-subtitle-queued"==
l[0]?($media_subtitle_queued=l[1].replace(/"/g,""),a.media_subtitle_queued=$media_subtitle_queued,$("[id='"+a.id+"']").each(function(){$(this).find(".thumbnail img").attr(l[0],l[1].replace(/"/g,""))})):"data-media-acodec"==l[0]&&($media_acodec=l[1].replace(/"/g,""),a.media_acodec=$media_acodec,$("[id='"+a.id+"']").each(function(){$(this).find(".thumbnail img").attr(l[0],l[1].replace(/"/g,""))}))}"1"!=$has_subtitles&&""!=$media_acodec||""==$subtitles_hash||"0"==$subtitles_hash?"1"==$media_subtitle_queued&&
"0"==$has_subtitles?(c.show_subtitles_empty(),Jmp.Helpers.transcription_inprocess_message(),c.show_extras_divs(),c.disable_caption_links(c)):"1"==$has_subtitles&&(""==$subtitles_hash||"0"==$subtitles_hash)||""==$media_acodec?(c.show_subtitles_empty(),Jmp.Helpers.transcription_no_speech_message(),c.disable_caption_links(c),c.load_titles_extras([{summary:"",chapters:[]}])):(c.show_subtitles_empty(),Jmp.Helpers.transcription_retry_message(),$("#captions_regular, #captions_regular_dark").removeClass("hide"),
$("#captions_active, #captions_active_dark").removeClass("hide").addClass("hide")):c.load_titles_cache(a,c)}})):"1"!=a.media_subtitles&&""!=a.media_acodec||""==a.media_subtitles_hash||"0"==a.media_subtitles_hash?"undefined"!=typeof a.media_subtitle_queued&&"1"==a.media_subtitle_queued&&"undefined"==typeof a.media_subtitles?(c.show_subtitles_empty(),Jmp.Helpers.transcription_inprocess_message(),c.show_extras_divs(),c.disable_caption_links(c)):"1"==a.media_subtitles&&(""==a.media_subtitles_hash||"0"==
a.media_subtitles_hash)||""==a.media_acodec?(c.show_subtitles_empty(),Jmp.Helpers.transcription_no_speech_message(),c.disable_caption_links(c),c.load_titles_extras([{summary:"",chapters:[]}])):(c.show_subtitles_empty(),Jmp.Helpers.transcription_retry_message(),$("#captions_regular, #captions_regular_dark").removeClass("hide"),$("#captions_active, #captions_active_dark").removeClass("hide").addClass("hide")):c.load_titles_cache(a,c)):(c.handle_transcription.removeAttr("disabled"),c.handle_subtitles.removeAttr("disabled"),
$("#captions_regular, #captions_regular_dark").removeClass("hide"),$("#captions_active, #captions_active_dark").removeClass("hide").addClass("hide"),$(".mejs__controls").removeClass("hidden_captions").addClass("hidden_captions"),"private"==VIEW&&"audio"!=a.type&&($(".summary_chapters_container").remove(),$(".media-inner").append('<div class="summary_chapters_container">\n\t\t\t\t\t\t<div class="video_summary_div2"> \n\t\t\t\t\t\t\t<div style="display: flex; justify-content: space-between; position: relative;">\n\t\t\t\t\t\t\t\t<h2 style="margin-bottom : 12px;">Summary & Chapters</h2>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style="width: 100%; height: 140px; background-color: #f8f8f8; position: relative; overflow: hidden;">\n\t\t\t\t\t\t\t<p class="placeholder-container">Improve video engagement with automatic AI-generated summary and chapters.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</div>'),
$(".placeholder-container").append(`<a class="btn btn-white" style="display: block; padding: 10px; margin: 0 auto; margin-top: 20px;width: 180px; background: ${Jmp.Helpers.isFreePlanUser()?"#168eea":"linear-gradient(-45deg, #9467ef, #168eea)"}; color: #fff; border: none; position: relative; z-index: 100;" onclick="javascript:;" target="_blank" id="get_video_pack">${Jmp.Helpers.isFreePlanUser()?"Upgrade to Plus":"Get Video Pack"}</a>`),$("#get_video_pack").unbind("click").bind("click",function(h){Jmp.Helpers.isFreePlanUser()?
Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_free",media_type:""}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_plus",media_type:""});$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)});$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"});Jmp.Helpers.register_buy_add_on_event()}),$(".chapter_summ_help_doc").remove(),
$(".summary_chapters_container").after('\n\t\t\t\t\t<div class="chapter_summ_help_doc">\n\t\t\t\t\t\t<p>Jumpshare AI <span style="color: #AE05CC;">(Beta)</span> automatically generates summary and chapters for your videos.</p>\n\t\t\t\t\t\t<div style="display: flex; gap: 8px; justify-content: center; align-items: center;">\n\t\t\t\t\t\t\t<a target="_blank" href="https://support.jumpshare.com/article/240-how-do-automatic-title-summary-and-chapters-work" class="bottom_link"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.73267 11.6733C8.86597 11.6733 11.4602 9.07349 11.4602 5.9458C11.4602 2.8125 8.86035 0.218262 5.72705 0.218262C2.59937 0.218262 0.00512695 2.8125 0.00512695 5.9458C0.00512695 9.07349 2.60498 11.6733 5.73267 11.6733ZM5.73267 10.7188C3.08228 10.7188 0.965332 8.59619 0.965332 5.9458C0.965332 3.29541 3.07666 1.17285 5.72705 1.17285C8.37744 1.17285 10.5056 3.29541 10.5056 5.9458C10.5056 8.59619 8.38306 10.7188 5.73267 10.7188ZM5.61475 7.10815C5.89551 7.10815 6.06958 6.92847 6.06958 6.70947V6.64209C6.06958 6.32764 6.24927 6.12549 6.64233 5.86719C7.18701 5.50781 7.57446 5.18213 7.57446 4.5083C7.57446 3.57617 6.74341 3.0708 5.78882 3.0708C4.823 3.0708 4.18848 3.53125 4.03687 4.04785C4.00879 4.1377 3.99194 4.22754 3.99194 4.323C3.99194 4.57568 4.18848 4.71045 4.37378 4.71045C4.5647 4.71045 4.68823 4.62061 4.78931 4.48584L4.89038 4.35107C5.08691 4.02539 5.37891 3.83447 5.75513 3.83447C6.26611 3.83447 6.59741 4.12646 6.59741 4.55322C6.59741 4.93506 6.36157 5.12036 5.87305 5.46289C5.46875 5.74365 5.16553 6.04126 5.16553 6.59155V6.66455C5.16553 6.95654 5.32837 7.10815 5.61475 7.10815ZM5.60352 8.78149C5.9292 8.78149 6.20996 8.52319 6.20996 8.19751C6.20996 7.87183 5.93481 7.61353 5.60352 7.61353C5.27222 7.61353 4.99707 7.87744 4.99707 8.19751C4.99707 8.51758 5.27783 8.78149 5.60352 8.78149Z" fill="#168EEA"/></svg>View help article</a>\n\t\t\t\t\t\t\t<a class="settings_lnk" href="/settings/workspace/customize"> \n\t\t\t\t\t\t\t<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.2718 1C6.20996 1.00003 6.15015 1.02203 6.10302 1.06206C6.05589 1.10209 6.02451 1.15756 6.01448 1.21858L5.76072 2.77208C5.45559 2.86083 5.16462 2.98059 4.8904 3.12976L3.60837 2.21416C3.55817 2.17832 3.4969 2.16142 3.43543 2.16646C3.37396 2.1715 3.31626 2.19815 3.27257 2.24168L2.25754 3.2556C2.21416 3.29901 2.18747 3.35631 2.18216 3.41744C2.17685 3.47857 2.19325 3.53961 2.22849 3.58984L3.1304 4.87993C2.97893 5.15572 2.85651 5.4483 2.76556 5.75628L1.21856 6.01359C1.15772 6.02383 1.10249 6.0553 1.06265 6.10241C1.02282 6.14951 1.00097 6.2092 1.00098 6.27089V7.70567C1.00087 7.76699 1.02236 7.82639 1.06168 7.87344C1.101 7.92049 1.15564 7.95219 1.21601 7.96298L2.76403 8.23709C2.85448 8.54454 2.97613 8.83732 3.12786 9.11345L2.21473 10.3908C2.17889 10.441 2.16199 10.5022 2.16703 10.5637C2.17206 10.6252 2.19872 10.6829 2.24225 10.7266L3.25677 11.7415C3.30009 11.7848 3.35726 11.8115 3.41828 11.8169C3.4793 11.8223 3.54028 11.8061 3.59053 11.7711L4.88327 10.8662C5.1583 11.0162 5.44997 11.1369 5.75614 11.2264L6.01448 12.7819C6.02462 12.8429 6.05604 12.8982 6.10316 12.9381C6.15028 12.9781 6.21004 13 6.2718 13H7.70671C7.76811 13.0001 7.82757 12.9785 7.87463 12.9391C7.9217 12.8997 7.95336 12.8449 7.96403 12.7845L8.24072 11.2228C8.54562 11.1319 8.83593 11.0095 9.10951 10.8585L10.4109 11.7716C10.4611 11.8068 10.5222 11.8232 10.5833 11.8179C10.6445 11.8126 10.7018 11.7859 10.7452 11.7425L11.7597 10.7271C11.8034 10.6833 11.8301 10.6253 11.8351 10.5636C11.84 10.5019 11.8229 10.4405 11.7867 10.3903L10.8588 9.10224C11.0072 8.82999 11.1267 8.54145 11.2155 8.23862L12.7854 7.96348C12.8459 7.95281 12.9007 7.92115 12.9401 7.87409C12.9795 7.82703 13.0011 7.76757 13.001 7.70618V6.2714C13.0009 6.20956 12.9789 6.14975 12.9389 6.10263C12.8989 6.0555 12.8434 6.02413 12.7824 6.0141L11.215 5.75781C11.1256 5.45535 11.0057 5.16732 10.8573 4.89521L11.7724 3.59137C11.8077 3.54114 11.8241 3.48009 11.8188 3.41897C11.8135 3.35784 11.7868 3.30054 11.7434 3.25713L10.7284 2.2427C10.6845 2.19898 10.6266 2.17226 10.5649 2.16731C10.5032 2.16237 10.4418 2.17951 10.3915 2.21569L9.10696 3.13944C8.83327 2.98908 8.54277 2.8673 8.23716 2.77717L7.96403 1.21603C7.95346 1.15548 7.92185 1.10061 7.87478 1.06109C7.8277 1.02156 7.76818 0.999931 7.70671 1H6.2718ZM6.49397 1.52174H7.4876L7.74747 3.00493C7.75612 3.05467 7.77902 3.10084 7.81339 3.13783C7.84776 3.17482 7.89212 3.20104 7.9411 3.21332C8.32266 3.30839 8.68102 3.4591 9.00811 3.6571C9.05184 3.68359 9.10239 3.69666 9.15349 3.69466C9.20458 3.69267 9.25396 3.67571 9.2955 3.64589L10.5164 2.76851L11.2191 3.47113L10.3498 4.70975C10.3207 4.75107 10.3043 4.79992 10.3025 4.85039C10.3007 4.90086 10.3136 4.95076 10.3396 4.99406C10.5356 5.32038 10.6843 5.67645 10.7793 6.05588C10.7917 6.10529 10.8183 6.15001 10.8557 6.18451C10.8932 6.219 10.94 6.24177 10.9903 6.25L12.4792 6.49355V7.48709L10.9872 7.74898C10.9374 7.75779 10.8913 7.78088 10.8544 7.81543C10.8175 7.84999 10.7914 7.89452 10.7793 7.94361C10.6854 8.32256 10.5366 8.67861 10.3406 9.00493C10.3143 9.04865 10.3014 9.09912 10.3034 9.15011C10.3055 9.20109 10.3225 9.25035 10.3523 9.29178L11.2338 10.5151L10.5312 11.2182L9.29448 10.3505C9.25295 10.3215 9.20385 10.3051 9.15317 10.3035C9.10249 10.3018 9.05244 10.315 9.00913 10.3414C8.68366 10.5394 8.32494 10.6908 7.94467 10.7872C7.89592 10.7995 7.85176 10.8256 7.8175 10.8624C7.78324 10.8992 7.76034 10.9451 7.75155 10.9946L7.48811 12.4783H6.49295L6.24735 11.0012C6.23899 10.9509 6.2161 10.9042 6.18151 10.8669C6.14692 10.8295 6.10214 10.803 6.0527 10.7908C5.67091 10.6967 5.31094 10.5462 4.98161 10.3485C4.93838 10.3226 4.88856 10.3098 4.8382 10.3116C4.78783 10.3134 4.73906 10.3298 4.69779 10.3587L3.47079 11.2182L2.7676 10.5141L3.63486 9.30197C3.6645 9.26044 3.68131 9.21113 3.68321 9.16015C3.68512 9.10916 3.67203 9.05874 3.64556 9.01512C3.44571 8.68492 3.29457 8.32501 3.19919 7.94158C3.18699 7.89274 3.16092 7.84847 3.12412 7.81412C3.08732 7.77976 3.04137 7.75679 2.9918 7.74796L1.52276 7.48709V6.49202L2.99079 6.24796C3.04097 6.23964 3.08763 6.21683 3.12502 6.18234C3.16241 6.14785 3.1889 6.10319 3.20123 6.05384C3.29743 5.66908 3.4485 5.30923 3.6476 4.97979C3.67386 4.93654 3.68697 4.88659 3.68534 4.83602C3.68371 4.78545 3.66741 4.73645 3.63843 4.69497L2.78136 3.47011L3.48505 2.76698L4.70136 3.63621C4.74274 3.66571 4.79183 3.68249 4.84262 3.68448C4.8934 3.68647 4.94366 3.67359 4.98722 3.64742C5.31481 3.45069 5.67561 3.30141 6.05779 3.20771C6.10747 3.19548 6.15246 3.16892 6.18716 3.13132C6.22186 3.09373 6.24474 3.04676 6.25295 2.99626L6.49397 1.52174ZM7.00098 4.91304C5.85137 4.91304 4.91384 5.8505 4.91384 7C4.91384 8.1495 5.85137 9.08696 7.00098 9.08696C8.15058 9.08696 9.08811 8.1495 9.08811 7C9.08811 5.8505 8.15058 4.91304 7.00098 4.91304ZM7.00098 5.43478C7.86859 5.43478 8.56633 6.13246 8.56633 7C8.56633 7.86754 7.86859 8.56522 7.00098 8.56522C6.13337 8.56522 5.43563 7.86754 5.43563 7C5.43563 6.13246 6.13337 5.43478 7.00098 5.43478Z" fill="#168EEA" stroke="#168EEA" stroke-width="0.5"/>\n</svg>\n\n\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t'),
$("#media_wrapper").addClass("summary_active"),$("#video_wrapper").addClass("summary_active"),$(".toggle_caption_container").css("right","140px"),$("#video_wrapper .display-playback-speed").css("right","174px"),$(".go_to_summary").removeClass("hide"),ViewerPanel.media.adjust_summary_chapters_ui())))},generate_transcription:function(a){self=this;const c=Jmp.Helpers.get_timed_cookie("last_generate_caption_click");if(!c||3E5<Date.now()-c){Jmp.Helpers.set_timed_cookie("last_generate_caption_click",Date.now(),
5);$(a).attr("disabled","disabled");var b=ViewerPanel.viewers_collection.get_current_viewer();a=WS_PREFIX+"/g/"+b.id;self.show_subtitles_empty();Jmp.Helpers.transcription_inprocess_message();self.show_extras_divs();$.ajax({type:"GET",url:a,success:function(h){self.hide_loader();self._validate(b)?1==h.status?(b.media_subtitle_queued="1",$("[id='"+b.id+"']").each(function(){$(this).find(".thumbnail img").attr("data-media-subtitle-queued","1")})):0==h.status&&("disable"==h.reason?Jmp.App.Notifications.display_notification({type:"error",
message:"Please enable Automatic Captioning from settings page."}).close_notification():"rights"==h.reason?Jmp.App.Notifications.display_notification({type:"error",message:"You do not have rights to generate Automatic Captioning."}).close_notification():"no_audio"==h.reason?Jmp.App.Notifications.display_notification({type:"error",message:"Media file does not have audio to transcribe."}).close_notification():"file_limit"==h.reason?Jmp.App.Notifications.display_notification({type:"error",message:"Media file must be shorter than 90 minutes to generate transcript."}).close_notification():
Jmp.App.Notifications.display_notification({type:"error",message:"There is an error while generating captions."}).close_notification(),self.show_subtitles_empty(),Jmp.Helpers.transcription_retry_message(),Jmp.Helpers.set_timed_cookie("last_generate_caption_click","",0)):(Jmp.App.Notifications.display_notification({type:"error",message:"There is an error while generating captions"}).close_notification(),self.show_subtitles_empty(),Jmp.Helpers.transcription_retry_message(),Jmp.Helpers.set_timed_cookie("last_generate_caption_click",
"",0))}})}else Jmp.App.Notifications.display_notification({type:"success",message:"Wait 5 minutes before requesting again"}).close_notification()},show_subtitles_empty:function(){$(".captions_or_ts_container").html("");$(".captions_or_ts_container").html('<div class="loading_message_ui"><div><p></p><span></span></div></div>')},add_seektime_event:function(){$(".subtitle_time_data").unbind("click").bind("click",function(){seekTime=$(this).parents(".subtitle_area").attr("data-start_time_milli");var a=
$("#video_player_html5").get(0);$(".viewer-content-wrapper").scrollTop(0);a.currentTime=seekTime/1E3;a.play()})},set_caption_word_event:function(){self=this;$(".video_subtitles_wrappper .caption_word").unbind("click").bind("click",function(){word=$(this).html();word=word.replace("&nbsp;","");self.edit_word_div=$(this);self.edit_word_sentense_id=$(this).parents(".subtitle_area").attr("data-id");$("#txtCaption").val(word);$("#txtCaption").focus();$(".captions_or_ts_container span").removeClass("active");
$(this).addClass("active")})},set_file_captions:function(a){self=this;$("#subtitles_wrapper_id").length&&(strCaptions="",$.each(a,function(c,b){strCaptions=strCaptions+'<div class="subtitle_area" id="subtitle'+b.number+'" data-id="'+b.number+'" data-start_time="'+b.startTime+'" data-stop_time="'+b.stopTime+'" data-start_time_milli="'+b.startTimeInMilli+'"><span class="subtitle_time_data" style="cursor:pointer;">'+b.startTimePortion+"</span><p>"+self.display_word_split_text(b.text.trim())+"</p></div>"}),
""!=strCaptions?$(".captions_or_ts_container").html(strCaptions):(self.show_subtitles_empty(),a=ViewerPanel.viewers_collection.get_current_viewer(),""==a.media_acodec||"0"==a.media_acodec?Jmp.Helpers.transcription_no_speech_message():generating_subtitles_for_code=Jmp.Helpers.get_timed_cookie("generating_subtitles_for_code"),generating_subtitles_for_code&&generating_subtitles_for_code==a.id?(Jmp.Helpers.transcription_inprocess_message(),self.show_extras_divs(),self.disable_caption_links(self)):Jmp.Helpers.transcription_failed_to_load_message()),
self.add_seektime_event(),self.set_caption_word_event(),$(".video_subtitles_wrappper #update_subtitle_word").unbind("click").bind("click",function(){if(null!=ViewerPanel.subtitles.edit_word_div)if(""==$("#txtCaption").val())Jmp.App.Lightbox.show({type:"subtitle_empty_issue"});else if(140<$("#txtCaption").val().length)Jmp.App.Lightbox.show({type:"subtitle_too_long"});else{updated_text=$("#txtCaption").val().trim();updated_values=$("#txtCaption").val().split(" ");var c=parseInt(ViewerPanel.subtitles.edit_word_div.attr("data-index")),
b=c,h=-1,k=!1,l="";$.each(Jmp.Helpers.video_tracks,function(p,r){if(!k&&(h++,r.number==ViewerPanel.subtitles.edit_word_sentense_id&&(l=Jmp.Helpers.video_tracks[h].words,Array.isArray(l))))return editWord=l[c],k=!0,!1});for(var m=0;m<updated_values.length;m++)if(0==m)ViewerPanel.subtitles.edit_word_div.html(updated_values[m]+"&nbsp;"),""!=l&&(l[c].M.text.S=updated_values[m]);else{var n=$('<span class="caption_word">').html(updated_values[m]+"&nbsp;");ViewerPanel.subtitles.edit_word_div.after(n);ViewerPanel.subtitles.edit_word_div=
n;""!=l&&(n={M:{start:{S:editWord.M.start.S},end:{S:editWord.M.end.S},text:{S:updated_values[m]}}},b++,l.splice(b,0,n))}""!=l&&(Jmp.Helpers.video_tracks[h].words=l);ViewerPanel.subtitles.edit_word_div=null;self.update_sub_titles();0<Jmp.Helpers.video_tracks.length&&(ViewerPanel.media.show_tracks(),ViewerPanel.media.show_tracks_audio());self.set_caption_word_event()}}),$("#txtCaption").keypress(function(c){if(13==c.which)return jQuery(this).blur(),$(".video_subtitles_wrappper #update_subtitle_word").focus().click(),
!1}),$(".video_subtitles_wrappper #delete_subtitle_word").unbind("click").bind("click",function(){if(null!=ViewerPanel.subtitles.edit_word_div){var c=ViewerPanel.subtitles.edit_word_div.closest("p"),b=c.find("span").length;ViewerPanel.subtitles.edit_word_div.remove();ViewerPanel.subtitles.edit_word_div=null;1==b&&c.closest(".subtitle_area").remove();self.update_sub_titles(1==b?1:0)}}),$(".video_transcription_wrappper #copy_to_clipboard").unbind("click").bind("click",function(){self.set_srt_action("copy")}),
$(".video_transcription_wrappper #download_transcript").unbind("click").bind("click",function(){self.set_srt_action("download")}))},set_srt_action:function(a){self=this;if(0<Jmp.Helpers.video_tracks.length){var c=ViewerPanel.subtitles.titles_url+"/"+self.viewer_id;"undefined"!=typeof self.updated_hash&&(c=c+"_"+self.updated_hash);$.ajax({type:"GET",url:c,success:function(b){self.hide_loader();if(b.status){b=b.file_captions;var h="",k=1;total_captions=b.length;$.each(b,function(m,n){h=h+k+"\n";h=h+
n.startTime+" --\x3e "+n.stopTime+"\n";h=h+n.text+(total_captions!=k?"\n\n":"");k++});b=$("#copy_to_clipboard");if("copy"==a){var l=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");b.after("<textarea id='clipboard_textbox' style='position: absolute; right: 0; z-index: -3000;'>"+l+"</textarea>");$("#clipboard_textbox").select();document.execCommand("copy");$("#clipboard_textbox").remove();Jmp.App.Notifications.display_notification({type:"transcript_copied"}).close_notification()}else"download"==
a&&Jmp.Helpers.download_srt($("#viewer_share").attr("data-title")+".srt",h.replace("'","'"))}}})}},update_sub_titles:function(a=0){updatedText="";var c=-1;$("#subtitle"+ViewerPanel.subtitles.edit_word_sentense_id).find(".caption_word").each(function(b){c++;$(this).attr("data-index",c);b=$(this).text().replace(/\u00A0/," ");updatedText+=b});""!=updatedText&&(updatedText=updatedText.substr(0,updatedText.length-1));ViewerPanel.subtitles.update_subtitle(ViewerPanel.subtitles.edit_word_sentense_id,updatedText,
a);0<Jmp.Helpers.video_tracks.length&&$.each(Jmp.Helpers.video_tracks,function(b,h){if(h.number==ViewerPanel.subtitles.edit_word_sentense_id)return 1==a?Jmp.Helpers.video_tracks.splice(b,1):h.value=updatedText,"iOS"===Jmp.Helpers.detect_mobile_os()&&ViewerPanel.media.set_video_tracks(),!1});ViewerPanel.subtitles.edit_word_sentense_id="";$("#txtCaption").val("");$(".caption_word").removeClass("active");$(".video_transcription_wrappper .captions_or_ts_container").html($(".video_subtitles_wrappper .captions_or_ts_container").html());
this.add_seektime_event()},update_subtitle_summary:function(a,c){var b=this;a={summary:a};b.show_loader();$.ajax({type:"POST",url:BASEURL_WS+"update_file_summary/"+b.viewer_id,data:Jmp.Helpers.get_secure_params(a),success:function(h){b.hide_loader();h.status&&(b.updated_hash=h.hash_code,$("[id='"+b.viewer_id+"']").each(function(){$(this).find(".thumbnail img").attr("data-subtitles-hash",b.updated_hash)}),ViewerPanel.viewers_collection.get_current_viewer().media_subtitles_hash=b.updated_hash,c&&(Jmp.App.Lightbox.hide(),
$(".video_summary").html(""),ViewerPanel.media.adjust_summary_chapters_ui()))},xhrFields:{}})},update_subtitle_chapters:function(a,c){chapters=JSON.stringify(a[0].chapters);var b=this,h={chapters};b.show_loader();$.ajax({type:"POST",url:BASEURL_WS+"update_file_chapters/"+b.viewer_id,data:Jmp.Helpers.get_secure_params(h),success:function(k){b.hide_loader();k.status&&(b.updated_hash=k.hash_code,$("[id='"+b.viewer_id+"']").each(function(){$(this).find(".thumbnail img").attr("data-subtitles-hash",b.updated_hash)}),
ViewerPanel.viewers_collection.get_current_viewer().media_subtitles_hash=b.updated_hash,b.load_titles_extras(a),ViewerPanel.media.append_chapters_segments(),c&&(Jmp.App.Lightbox.hide(),$(".video_chapters").html(""),$("#chapters_input").val("")),$(".video_chapters").removeClass("hide"),$("#chapters_input").addClass("hide"),$("#save_chapters_action").addClass("hide"))},xhrFields:{}})},update_subtitle:function(a,c,b){var h=this;a={item_code:h.viewer_id,subtitle_id:a,subtitle_value:c,delete_sentence:b};
h.show_loader();$.ajax({type:"POST",url:BASEURL_WS+"analytics/update_subtitle/file/"+h.viewer_id+"/limit/0/viewer/yes",data:Jmp.Helpers.get_secure_params(a),success:function(k){h.hide_loader();k.status&&(h.updated_hash=k.updated_hash,$("[id='"+h.viewer_id+"']").each(function(){$(this).find(".thumbnail img").attr("data-subtitles-hash",h.updated_hash)}))},xhrFields:{}})},display_word_split_text:function(a){strWords="";splitArr=a.split(" ");for(a=0;a<splitArr.length;a++)strWords=strWords+'<span class="caption_word" data-index="'+
a+'">'+splitArr[a]+"&nbsp;</span>";return strWords},show_loader:function(){},hide_loader:function(){},attach_subtitles_form_handler:function(){var a=this,c=parseInt(O_PLANID);$("#handle_chapters_id").unbind("click").bind("click",function(){Jmp.Helpers.isBusinessOrHigherPlanByPlanID(c)||Jmp.Helpers.isPlusExtraPlanUserByPlanID(c)?$(".summary_chapters_container").length&&$(".viewer-content-wrapper").animate({scrollTop:$(".viewer-content-wrapper").height()},500):Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_free",
media_type:""}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_plus",media_type:""});$("#request_upgrade_plan").unbind("click").bind("click",function(b){Jmp.Helpers.request_upgrade_plan(this)});$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(b){b.preventDefault();window.location.href=WS_PREFIX+"/pricing"});Jmp.Helpers.register_buy_add_on_event()});this.handle_subtitles.unbind("click").bind("click",function(b){if(Jmp.Helpers.isBusinessOrHigherPlanByPlanID(c)||
Jmp.Helpers.isPlusExtraPlanUserByPlanID(c))0<Jmp.Helpers.video_tracks.length&&$(".loading_message_ui").removeClass("hide").addClass("hide"),a.subtitles_wrapper.toggleClass("hide_video_subtitles_wrapper");else{var h="video";"handle_subtitles_audio_id"===b.currentTarget.id&&(h="audio");Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_to_business_subtitles_free",media_type:h}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_subtitles_plus",media_type:h});
$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)});$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"});Jmp.Helpers.register_buy_add_on_event()}});this.hide_captions_sidebar.unbind("click").bind("click",function(b){a.subtitles_wrapper.toggleClass("hide_video_subtitles_wrapper")});this.handle_transcription.unbind("click").bind("click",function(b){if(Jmp.Helpers.isBusinessOrHigherPlanByPlanID(c)||
Jmp.Helpers.isPlusExtraPlanUserByPlanID(c))0<Jmp.Helpers.video_tracks.length&&$(".loading_message_ui").removeClass("hide").addClass("hide"),a.transcription_wrapper.toggleClass("hide_video_transcription_wrapper");else{var h="video";"show_transcription_form_audio"===b.currentTarget.id&&(h="audio");Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_to_business_transcription_free",media_type:h}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_transcription_plus",
media_type:h});$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)});$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"});Jmp.Helpers.register_buy_add_on_event()}});this.hide_transcription_sidebar.unbind("click").bind("click",function(b){a.transcription_wrapper.toggleClass("hide_video_transcription_wrapper")})},attach_cancel_subtitles:function(){var a=
this;this.cancel_subtitles.unbind("click").bind("click",function(c){c.preventDefault();a.cancel_subtitles_form()})},attach_subtitles_video_icon_actions:function(a){var c=this,b=parseInt(O_PLANID);$("#captions_regular, #captions_regular_dark").unbind("click").bind("click",function(h){Jmp.Helpers.isBusinessOrHigherPlanByPlanID(b)||Jmp.Helpers.isPlusExtraPlanUserByPlanID(b)?(h=ViewerPanel.viewers_collection.get_current_viewer(),"private"!=VIEW||"undefined"!=typeof h.media_subtitle_queued&&"0"!=h.media_subtitle_queued||
"undefined"!=typeof h.media_subtitles?0<Jmp.Helpers.video_tracks.length?($("#captions_regular, #captions_regular_dark").addClass("hide"),$("#captions_active, #captions_active_dark").removeClass("hide"),ViewerPanel.media.set_status_video_tracker(!0)):Jmp.App.Lightbox.show({type:"ask_owner_for_transcription",media_type:a}):c.transcription_wrapper.toggleClass("hide_video_transcription_wrapper")):"private"==VIEW?(Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_to_business_subtitles_free",
media_type:a}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_subtitles_plus",media_type:a}),$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)}),$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"}),Jmp.Helpers.register_buy_add_on_event()):Jmp.App.Lightbox.show({type:"ask_owner_for_transcription",media_type:a})});
$("#captions_active, #captions_active_dark").unbind("click").bind("click",function(h){$("#captions_active, #captions_active_dark").addClass("hide");$("#captions_regular, #captions_regular_dark").removeClass("hide");ViewerPanel.media.set_status_video_tracker(!1)});$("#summary_goto").unbind().bind("click",function(){$(".mejs__unfullscreen").trigger("click");if(Jmp.Helpers.isBusinessOrHigherPlanByPlanID(b)||Jmp.Helpers.isPlusExtraPlanUserByPlanID(b)){var h=ViewerPanel.viewers_collection.get_current_viewer();
$(".summary_chapters_container").length?$(".viewer-content-wrapper").animate({scrollTop:$(".viewer-content-wrapper").height()},500):"private"!=VIEW||"undefined"!=typeof h.media_subtitle_queued&&"0"!=h.media_subtitle_queued||"undefined"!=typeof h.media_subtitles?"private"==VIEW?Jmp.App.Lightbox.show({type:"subtitle_extras_unavailable_owner",media_type:a}):Jmp.App.Lightbox.show({type:"subtitle_extras_unavailable_guest",media_type:a}):c.transcription_wrapper.toggleClass("hide_video_transcription_wrapper")}else"private"==
VIEW?(Jmp.Helpers.isFreePlanUser()?Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_free",media_type:a}):Jmp.Helpers.isPlusPlanUser()&&Jmp.App.Lightbox.show({type:"upgrade_to_business_AI_plus",media_type:a}),$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)}),$("#go_to_business_pricing, #go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"}),Jmp.Helpers.register_buy_add_on_event()):
Jmp.App.Lightbox.show({type:"subtitle_extras_unavailable_guest",media_type:a})})},cancel_subtitles_form:function(){ViewerPanel.subtitles.subtitles_wrapper.toggleClass("hide_video_subtitles_wrapper")},hide_subtitles_empty:function(){$("#transcription_wrapper_id").removeClass("hide_video_transcription_wrapper").addClass("hide_video_transcription_wrapper");$("#subtitles_wrapper_id").removeClass("hide_video_subtitles_wrapper").addClass("hide_video_subtitles_wrapper")},_validate:function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();
return a&&c&&a.id==c.id&&"undefined"!=typeof this.subtitles_wrapper&&1==this.subtitles_wrapper.length}};ViewerPanel.annotation={handle_annotation_id:"#handle_annotation",annotation_panel_id:"#annotation_panel",annotation_canvas_id:"#annotation_canvas",offsetX:0,offsetY:0,resizeDir:null,rect_count:0,initialWindowWidth:0,initialWindowHeight:0,ctx:null,roughCanvas:null,generator:null,isDrawing:!1,action:null,currentTool:"rectangle",currentColor:"#F73D72",shapes:[],previous_annotation:[],annotation_has_started:!1,editMode:!1,event_added:!1,in_annotation_mode:!1,initialize:function(){this.bootstrap();this.attachWindowResizeListener()},
bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.handle_annotation=$(this.handle_annotation_id);this.annotation_panel=$(this.annotation_panel_id);this.annotation_canvas=$(this.annotation_canvas_id);this.add_annotation_panel();this.initialWindowWidth=$("#video_wrapper").width();this.initialWindowHeight=$("#video_wrapper").height()},px_to_percentage_vertical:function(a,c){return a/c*100},percentage_to_px_vertical:function(a,c){return a*c/100},px_to_percentage_horizontal:function(a,
c){return a/c*100},percentage_to_px_horizontal:function(a,c){return parseFloat(a).toFixed(2)*c/100},add_annotation_panel:function(){this.handle_annotation.unbind().bind("click",()=>{ViewerPanel.annotation.first_time_clicked=!0;$("#annotation_canvas").hasClass("hide")?(this.handle_annotation.addClass("ann_active"),$("#annotation_canvas").removeClass("hide"),this.attach_annotation_panel(),$("#comments_activity").slideDown(100),$("#handle_annotation").css("bottom","7px"),$("#comment_person_icon").css("bottom",
"14px"),setTimeout(function(){ViewerPanel.media.video_player_obj.pause()},10)):(this.handle_annotation.removeClass("ann_active"),$("#annotation_canvas").addClass("hide"),this.ctx&&this.ctx.clearRect(0,0,this.annotation_canvas[0].width,this.annotation_canvas[0].height),this.currentColor="#F73D72",this.currentTool="rectangle",$("#annotation_panel").remove(),this.shapes=[],ViewerPanel.annotation.shapes.splice(0,ViewerPanel.annotation.shapes.length));ViewerPanel.media.startedPlaying||$(".mejs__overlay-button").addClass("hide")})},
hide_seekbar_and_timed_comments:function(){ViewerPanel.media.video_player_obj.pause();$(".mejs__controls").addClass("hide_controls");$("#cta_action_button").addClass("hide");$("#custom_captions_wrapper").addClass("hide");$("#time_stmp_coments_wrpr").addClass("hide");$("#time_stmp_coments_wrpr").addClass("stick_to_bottom")},attach_annotation_to_dom:function(a,c){this.initializ_canvas();a=JSON.parse(a).map(b=>"freehand"===b.type?{color:b.color,type:b.type,id:parseFloat(b.id).toFixed(2),x1:parseFloat(b.x1).toFixed(2),
x2:parseFloat(b.x2).toFixed(2),y1:parseFloat(b.y1).toFixed(2),y2:parseFloat(b.y2).toFixed(2),points:b.points.map(h=>({x2:parseFloat(h.x2).toFixed(2),y2:parseFloat(h.y2).toFixed(2)}))}:this.create_new_element(parseFloat(b.id).toFixed(2),parseFloat(b.x1).toFixed(2),parseFloat(b.y1).toFixed(2),parseFloat(b.x2).toFixed(2),parseFloat(b.y2).toFixed(2),b.type,b.color));this.previous_annotation.push({comment_id:c,annotation:a})},get_distance:function(a,c){return Math.sqrt(Math.pow(a.x-c.x,2)+Math.pow(a.y-
c.y,2))},create_new_element:function(a,c,b,h,k,l,m){var n=this.percentage_to_px_horizontal(c,$("#video_wrapper").width());let p=this.percentage_to_px_vertical(b,$("#video_wrapper").height()),r=this.percentage_to_px_horizontal(h,$("#video_wrapper").width()),q=this.percentage_to_px_vertical(k,$("#video_wrapper").height());if(this.annotation_canvas[0]){if("line"===l)return n=this.generator.line(n,p,r,q,{roughness:0,stroke:m,strokeWidth:4}),{id:a,x1:c,y1:b,x2:h,y2:k,type:l,roughElement:n,color:m};if("rectangle"===
l)return n=this.generator.rectangle(n,p,r-n,q-p,{roughness:0,stroke:m,strokeWidth:4}),{id:a,x1:c,y1:b,x2:h,y2:k,type:l,roughElement:n,color:m};if("arrow"===l){const u=Math.atan2(q-p,r-n);n=`M ${n} ${p} L ${r} ${q}`+`M ${r} ${q} L ${r-10*Math.cos(u-Math.PI/6)} ${q-10*Math.sin(u-Math.PI/6)}`;n+=`M ${r} ${q} L ${r-10*Math.cos(u+Math.PI/6)} ${q-10*Math.sin(u+Math.PI/6)}`;return{id:a,x1:c,y1:b,x2:h,y2:k,type:l,roughElement:n,color:m}}if("freehand"===l)return{id:a,type:l,_x1:n,_y1:p,_x2:r,_y2:q,points:[{x:c,
y:b}],color:m}}},is_on_the_line:function(a,c,b,h,k,l,m=1){a={x:a,y:c};b={x:b,y:h};k={x:k,y:l};k=ViewerPanel.annotation.get_distance(a,b)-(ViewerPanel.annotation.get_distance(a,k)+ViewerPanel.annotation.get_distance(b,k));return Math.abs(k)<m?"inside":null},is_with_element:function(a,c,b){const {type:h,x1:k,x2:l,y1:m,y2:n}=b;if("rectangle"===h){var p=Math.max(k,l),r=Math.min(m,n),q=Math.max(m,n);return a>=Math.min(k,l)&&a<=p&&c>=r&&c<=q}if("line"===h||"arrow"===h)return p={x:k,y:m},r={x:l,y:n},q={x:a,
y:c},p=ViewerPanel.annotation.get_distance(p,r)-(ViewerPanel.annotation.get_distance(p,q)+ViewerPanel.annotation.get_distance(r,q)),1>Math.abs(p);if("freehand"===h)return b.points.some((u,v)=>(v=b.points[v+1])?null!=ViewerPanel.annotation.is_on_the_line(u.x2,u.y2,v.x2,v.y2,a,c,5):!1)?"inside":null},updatedElement:function(a,c,b,h,k,l,m){"freehand"===l?this.shapes[a].points=[...this.shapes[a].points,{x2:h,y2:k}]:(c=ViewerPanel.annotation.create_new_element(a,c,b,h,k,l,m),this.shapes[a]=c);this.render()},
initializ_canvas:function(){this.annotation_has_started=!0;this.annotation_canvas[0]&&(this.ctx=this.annotation_canvas[0].getContext("2d"),this.roughCanvas=rough.canvas(this.annotation_canvas[0]),this.generator=this.roughCanvas.generator,this.annotation_canvas[0].width=$("#video_wrapper").width(),this.annotation_canvas[0].height=$("#video_wrapper").height(),this.ctx.lineWidth=2,this.ctx.strokeStyle=this.currentColor,this.ctx.lineJoin="round",this.ctx.lineCap="round")},attach_drawing_controls:function(a){$("#annotation_panel").remove();
a?$(`#comment_card_${a}`).after('<div class="annotation_panel" id="annotation_panel">\n                                <div id="darwing_shapes_wrapper">\n                                    <span id="delete_shape"><svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 4.25H13" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.5 7.25V11.75" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.5 7.25V11.75" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M1.75 4.25L2.5 13.25C2.5 13.6478 2.65804 14.0294 2.93934 14.3107C3.22064 14.592 3.60218 14.75 4 14.75H10C10.3978 14.75 10.7794 14.592 11.0607 14.3107C11.342 14.0294 11.5 13.6478 11.5 13.25L12.25 4.25" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.75 4.25V2C4.75 1.80109 4.82902 1.61032 4.96967 1.46967C5.11032 1.32902 5.30109 1.25 5.5 1.25H8.5C8.69891 1.25 8.88968 1.32902 9.03033 1.46967C9.17098 1.61032 9.25 1.80109 9.25 2V4.25" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>\n                                    <span id="arrow_shape"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.12624 6.86474C3.01417 6.59497 2.62185 6.6282 2.55674 6.91296L0.726584 14.9175C0.677287 15.1331 0.870297 15.3261 1.0859 15.2768L9.09043 13.4467C9.3752 13.3815 9.40842 12.9892 9.13865 12.8772L6.71887 11.8719L15.7794 0.505069C15.9279 0.318761 15.6846 0.0755057 15.4983 0.224012L4.13151 9.28452L3.12624 6.86474Z" fill="#8F989C"/></svg></span>\n                                    <span id="pencil_shape"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.6038 2.08579L13.6038 5.08579L14.8967 3.79289C15.2872 3.40237 15.2872 2.7692 14.8967 2.37868L13.3109 0.792893C12.9204 0.402369 12.2872 0.402369 11.8967 0.792893L10.6038 2.08579ZM9.75022 2.93934L1.60377 11.0858L0.037062 15.0026C-0.1262 15.4107 0.278839 15.8158 0.686996 15.6525L4.60377 14.0858L12.7502 5.93934C12.9455 5.74408 12.9455 5.4275 12.7502 5.23223L10.4573 2.93934C10.2621 2.74408 9.94548 2.74408 9.75022 2.93934Z" fill="#8F989C"/></svg></span>\n                                    <span id="line_shape"><svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 13.5L13 2.5" stroke="#8F989C" stroke-width="4" stroke-linecap="round"/></svg></span>\n                                    <span id="rect_shape" class="active"><svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_4310_254" fill="white"><rect y="0.5" width="16" height="16" rx="2"/></mask><rect y="0.5" width="16" height="16" rx="2" stroke="#72797C" stroke-width="4.4" mask="url(#path-1-inside-1_4310_254)"/></svg></span>\n                                </div>\n                                <div id="darwing_colors_wrapper">\n                                    <span id="yellow_ann" class="annotation_color yellow"></span>\n                                    <span id="red_ann" class="annotation_color red active"></span>\n                                    <span id="blue_ann" class="annotation_color blue"></span>\n                                    <span id="orange_ann" class="annotation_color orange"></span>\n                                    <span id="green_ann" class="annotation_color green"></span>\n                                </div>\n                            </div>'):
$("#comment_new").after('<div class="annotation_panel" id="annotation_panel">\n                                <div id="darwing_shapes_wrapper">\n                                    <span id="delete_shape"><svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 4.25H13" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.5 7.25V11.75" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.5 7.25V11.75" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M1.75 4.25L2.5 13.25C2.5 13.6478 2.65804 14.0294 2.93934 14.3107C3.22064 14.592 3.60218 14.75 4 14.75H10C10.3978 14.75 10.7794 14.592 11.0607 14.3107C11.342 14.0294 11.5 13.6478 11.5 13.25L12.25 4.25" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.75 4.25V2C4.75 1.80109 4.82902 1.61032 4.96967 1.46967C5.11032 1.32902 5.30109 1.25 5.5 1.25H8.5C8.69891 1.25 8.88968 1.32902 9.03033 1.46967C9.17098 1.61032 9.25 1.80109 9.25 2V4.25" stroke="#8F989C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>\n                                    <span id="arrow_shape"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.12624 6.86474C3.01417 6.59497 2.62185 6.6282 2.55674 6.91296L0.726584 14.9175C0.677287 15.1331 0.870297 15.3261 1.0859 15.2768L9.09043 13.4467C9.3752 13.3815 9.40842 12.9892 9.13865 12.8772L6.71887 11.8719L15.7794 0.505069C15.9279 0.318761 15.6846 0.0755057 15.4983 0.224012L4.13151 9.28452L3.12624 6.86474Z" fill="#8F989C"/></svg></span>\n                                    <span id="pencil_shape"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.6038 2.08579L13.6038 5.08579L14.8967 3.79289C15.2872 3.40237 15.2872 2.7692 14.8967 2.37868L13.3109 0.792893C12.9204 0.402369 12.2872 0.402369 11.8967 0.792893L10.6038 2.08579ZM9.75022 2.93934L1.60377 11.0858L0.037062 15.0026C-0.1262 15.4107 0.278839 15.8158 0.686996 15.6525L4.60377 14.0858L12.7502 5.93934C12.9455 5.74408 12.9455 5.4275 12.7502 5.23223L10.4573 2.93934C10.2621 2.74408 9.94548 2.74408 9.75022 2.93934Z" fill="#8F989C"/></svg></span>\n                                    <span id="line_shape"><svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 13.5L13 2.5" stroke="#8F989C" stroke-width="4" stroke-linecap="round"/></svg></span>\n                                    <span id="rect_shape" class="active"><svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_4310_254" fill="white"><rect y="0.5" width="16" height="16" rx="2"/></mask><rect y="0.5" width="16" height="16" rx="2" stroke="#72797C" stroke-width="4.4" mask="url(#path-1-inside-1_4310_254)"/></svg></span>\n                                </div>\n                                <div id="darwing_colors_wrapper">\n                                    <span id="yellow_ann" class="annotation_color yellow"></span>\n                                    <span id="red_ann" class="annotation_color red active"></span>\n                                    <span id="blue_ann" class="annotation_color blue"></span>\n                                    <span id="orange_ann" class="annotation_color orange"></span>\n                                    <span id="green_ann" class="annotation_color green"></span>\n                                </div>\n                            </div>');
this.attach_controls()},attach_annotation_panel:function(){$("#annotation_canvas").addClass("darwingMode");this.attach_drawing_controls();this.event_added||(this.initializ_canvas(),this.attach_event_listeners_to_canvas())},attach_event_listeners_to_canvas:function(){this.event_added=!0;const a=(c,b,h)=>h.find(k=>this.is_with_element(c,b,k));$("#annotation_canvas").off("mousedown").on("mousedown",c=>{c.stopPropagation();this.hide_seekbar_and_timed_comments();this.in_annotation_mode=!0;const {offsetX:b,
offsetY:h}=c;if("delete"===this.action){c=this.px_to_percentage_horizontal(b,$("#video_wrapper").width());var k=this.px_to_percentage_vertical(h,$("#video_wrapper").height());const l=a(c,k,this.shapes);l&&(this.shapes=this.shapes.filter(m=>m.id!==l.id),this.render())}else{this.action="drawing";this.isDrawing=!0;c=this.shapes.length;k=this.px_to_percentage_horizontal(b,$("#video_wrapper").width());let l=this.px_to_percentage_vertical(h,$("#video_wrapper").height());c=ViewerPanel.annotation.create_new_element(c,
k,l,k,l,this.currentTool,this.currentColor);this.shapes.push(c)}});$("#annotation_canvas").off("mousemove").on("mousemove",c=>{c.stopPropagation();const {offsetX:b,offsetY:h}=c;var k=this.annotation_canvas[0].height/this.annotation_canvas[0].clientHeight*h;c=this.px_to_percentage_horizontal(this.annotation_canvas[0].width/this.annotation_canvas[0].clientWidth*b,$("#video_wrapper").width());k=this.px_to_percentage_vertical(k,$("#video_wrapper").height());"delete"===this.currentTool&&(a(c,k,this.shapes)?
$("#annotation_canvas").addClass("delete_mode"):$("#annotation_canvas").removeClass("delete_mode"));if(this.isDrawing&&"drawing"===this.action){const l=this.shapes.length-1,{x1:m,y1:n}=this.shapes[l];this.updatedElement(l,m,n,c,k,this.currentTool,this.currentColor)}});$("#annotation_canvas").on("mouseup",c=>{c.stopPropagation();this.isDrawing=!1})},attach_controls:function(){$("#rect_shape").unbind().bind("click",()=>{$("#darwing_shapes_wrapper span").removeClass("active");$("#rect_shape").addClass("active");
this.currentTool="rectangle";this.action="drawing"});$("#arrow_shape").unbind().bind("click",()=>{$("#darwing_shapes_wrapper span").removeClass("active");$("#arrow_shape").addClass("active");this.currentTool="arrow";this.action="drawing"});$("#line_shape").unbind().bind("click",()=>{$("#darwing_shapes_wrapper span").removeClass("active");$("#line_shape").addClass("active");this.currentTool="line";this.action="drawing"});$("#pencil_shape").unbind().bind("click",()=>{$("#darwing_shapes_wrapper span").removeClass("active");
$("#pencil_shape").addClass("active");this.currentTool="freehand";this.action="drawing"});$("#delete_shape").unbind().bind("click",()=>{$("#darwing_shapes_wrapper span").removeClass("active");$("#delete_shape").addClass("active");this.currentTool="delete";isDeleteMode=!1;this.action="delete"});$("#green_ann").unbind().bind("click",()=>{$("#darwing_colors_wrapper span").removeClass("active");$("#green_ann").addClass("active");this.currentColor="#34E33B"});$("#blue_ann").unbind().bind("click",()=>{$("#darwing_colors_wrapper span").removeClass("active");
$("#blue_ann").addClass("active");this.currentColor="#3696F6"});$("#red_ann").unbind().bind("click",()=>{$("#darwing_colors_wrapper span").removeClass("active");$("#red_ann").addClass("active");this.currentColor="#F73D72"});$("#yellow_ann").unbind().bind("click",()=>{$("#darwing_colors_wrapper span").removeClass("active");$("#yellow_ann").addClass("active");this.currentColor="#FDF14C"});$("#orange_ann").unbind().bind("click",()=>{$("#darwing_colors_wrapper span").removeClass("active");$("#orange_ann").addClass("active");
this.currentColor="#FB9348"})},render:function(){console.log("render");this.ctx.clearRect(0,0,this.annotation_canvas[0].width,this.annotation_canvas[0].height);this.shapes.forEach(({type:a,roughElement:c,points:b,color:h})=>{if("arrow"===a)this.roughCanvas.path(c,{roughness:0,stroke:h,strokeWidth:4});else if("freehand"===a){this.ctx.beginPath();this.ctx.lineWidth=4;this.ctx.strokeStyle=h;this.ctx.lineJoin="round";this.ctx.lineCap="round";0<b.length&&(a=this.percentage_to_px_horizontal(b[0].x2,$("#video_wrapper").width()),
c=this.percentage_to_px_vertical(b[0].y2,$("#video_wrapper").height()),this.ctx.moveTo(a,c));for(a=1;a<b.length-2;a++){var k=this.percentage_to_px_horizontal(b[a].x2,$("#video_wrapper").width());c=this.percentage_to_px_vertical(b[a].y2,$("#video_wrapper").height());let l=this.percentage_to_px_horizontal(b[a+1].x2,$("#video_wrapper").width());h=this.percentage_to_px_vertical(b[a+1].y2,$("#video_wrapper").height());k=(k+l)/2;c=(c+h)/2;this.ctx.quadraticCurveTo(this.percentage_to_px_horizontal(b[a].x2,
$("#video_wrapper").width()),this.percentage_to_px_vertical(b[a].y2,$("#video_wrapper").height()),k,c)}this.ctx.lineTo(this.percentage_to_px_vertical(b[b.length-1].x2,$("#video_wrapper").width()),this.percentage_to_px_vertical(b[b.length-1].y2,$("#video_wrapper").height()));this.ctx.stroke()}else this.roughCanvas.draw(c)})},append_controls_to_triangle:function(){},show_current_annotation_with_time:function(a){this.reset_annotation();this.annotation_panel.removeClass("hide");$("#annotation_canvas").removeClass("hide");
const c=this.previous_annotation.find(b=>b.comment_id==a);c&&c.annotation&&(this.shapes=c.annotation,this.initializ_canvas(),c.annotation.forEach((b,h)=>{this.updatedElement(h,b.x1,b.y1,b.x2,b.y2,b.type,b.color)}))},hide_current_annotation_with_time:function(){$("#annotation_canvas").addClass("hide");$("#resume_the_video").remove();this.ctx&&this.ctx.clearRect(0,0,this.annotation_canvas[0].width,this.annotation_canvas[0].height);this.shapes=[];$("#annotation_panel").remove();this.annotation_has_started=
!1;$("#annotation_canvas").removeClass("darwingMode");$("#cta_action_button").removeClass("hide");$("#custom_captions_wrapper").removeClass("hide")},reset_annotation:function(a){this.ctx&&this.ctx.clearRect(0,0,this.annotation_canvas[0].width,this.annotation_canvas[0].height);this.shapes=[];$("#annotation_canvas").addClass("hide");this.handle_annotation.removeClass("ann_active");this.currentColor="#F73D72";this.currentTool="rectangle";a&&this.annotation_has_started&&($("#annotation_panel").remove(),
ViewerPanel.media.makePlayableCondition())},attachWindowResizeListener:function(){$("#video_wrapper").resize(()=>{$("#annotation_canvas").hasClass("hide")||($("#annotation_canvas").width($(".video-player").width()),$("#annotation_canvas").height($(".video-player").height()),$("#annotation_canvas").off("mousemove").off("mousedown").off("mouseup"),this.attach_event_listeners_to_canvas())}).resize()}};ViewerPanel.media.handle_presentation=function(a){if(a.id==ViewerPanel.media.fid)a.is_loaded=!0,ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a),this.viewer_presentation_wrapper.removeClass("hide");else{ViewerPanel.manager.reset_containers();this.viewer_header_total_pages=$("#viewer_presentation_control_total_pages");this.viewer_presentation_view_portal=this.viewer_presentation_view=null;this.viewer_presentation_goto=$("#viewer_presentation_control_goto");
this.viewer_presentation_control_fullscreen=$("#viewer_presentation_control_fullscreen");this.slide_wrap_prefix="#page_wrap_";this.viewer_presentation_control_bar=".pres-controls";this.total=a.total_pages;this.loaded=[];this.queue=[];this.pre_load=3;this.ajax_url="/view/pages";this.busy=!1;this.fid=a.id;this.current_slide=1;this.default_width=800;this.default_height=600;this.window_width=$(window).width();this.window_height=$(window).height();this.zoom=1;var c=this;c.viewer_header_total_pages.text("/ "+
c.total);ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.viewer_presentation_container.html(b);c.viewer_presentation_view=c.viewer_presentation_container.find("#presentation_view");c.viewer_presentation_view_portal=c.viewer_presentation_view.find("#view_portal");c.default_width=c.viewer_presentation_view_portal.width();c.default_height=c.viewer_presentation_view_portal.height();
c.viewer_presentation_wrapper.css({width:c.default_width+"px",height:c.default_height+"px"});$("#viewer_presentation_control_first_slide").unbind("click").bind("click",function(l){l.preventDefault();c.presentation.first()});$("#viewer_presentation_control_prev_slide").unbind("click").bind("click",function(l){l.preventDefault();c.presentation.prev()});$("#viewer_presentation_control_next_slide").unbind("click").bind("click",function(l){l.preventDefault();c.presentation.next()});$("#viewer_presentation_control_last_slide").unbind("click").bind("click",
function(l){l.preventDefault();c.presentation.last()});c.viewer_presentation_goto.unbind("keypress").bind("keypress",function(l){13==l.which&&c.presentation.goto_page(parseInt($(this).val()))});c.viewer_presentation_goto.val(c.current_slide);c.viewer_presentation_control_fullscreen.unbind("click").bind("click",function(l){$(document).fullScreen()?c.viewer_presentation_wrapper.fullScreen(!1).css({width:c.default_width+"px",height:c.default_height+"px"}):c.viewer_presentation_wrapper.fullScreen(!0).css({width:"100%",
height:"100%"});l.preventDefault()});var h=!0,k=void 0;$(document).unbind("keydown.3840").bind("keydown.3840",function(l){if(!h&&k==l.keyCode)return!1;if("email_message"!=$(l.target).attr("id")&&"email_to"!=$(l.target).attr("id")){if(37==l.which&&($(document).fullScreen()||ViewerPanel.viewers_collection.is_single_viewer()))return c.presentation.prev(),h=!1;38==l.which&&(c.presentation.prev(),h=!1);if(39==l.which&&($(document).fullScreen()||ViewerPanel.viewers_collection.is_single_viewer()))return c.presentation.next(),
h=!1;40==l.which&&(c.presentation.next(),h=!1)}k=l.keyCode}).unbind("keyup.3840").bind("keyup.3840",function(l){h=!0});$(document).unbind("fullscreenchange").bind("fullscreenchange",function(){$(document).fullScreen()?(c.viewer_presentation_view_portal.css({width:"100%",height:"100%"}),c.viewer_presentation_control_fullscreen.find("span.icn-screen-zoom-in").addClass("icn-screen-zoom-out").removeClass("icn-screen-zoom-in"),$(c.viewer_presentation_control_bar).addClass("hide"),c.viewer_presentation_wrapper.css({top:"40px"}),
c.presentation.resize(10)):(c.viewer_presentation_view_portal.css({width:c.default_width+"px",height:c.default_height+"px"}),c.viewer_presentation_control_fullscreen.find("span.icn-screen-zoom-out").addClass("icn-screen-zoom-in").removeClass("icn-screen-zoom-out"),$(c.viewer_presentation_control_bar).removeClass("hide"),c.viewer_presentation_wrapper.css({top:""}),setTimeout(function(){c.presentation.resize(300)},10))});$(document).unbind("fullscreenerror").bind("fullscreenerror",function(){Jmp.App.Notifications.display_notification({type:"error",
message:"Your browser rejected the fullscreen property"}).close_notification()});for(b=0;b<c.total;b++)c.loaded[b]=!1,b<c.pre_load&&c.presentation.load(b+1,!1)}})}};ViewerPanel.media.presentation={timer:0};
ViewerPanel.media.presentation.load=function(a,c){var b=ViewerPanel.media;a=this.clean_page_no(a);1>a||a>b.total||(b.loaded[a-1]||(opts={url:b.ajax_url,data:{p:a,fid:b.fid},timeout:3E4,type:"GET",cache:!1,error:function(h,k,l){},success:function(h){b.presentation.render(h);1==a&&(b.viewer_presentation_view.show(),b.presentation.resize(300),ViewerPanel.is_mobile&&0==b.viewer_presentation_wrapper.find(".si-wrapper").length&&b.viewer_presentation_wrapper.append('<div id="si_wrapper" class="si-wrapper"><div class="si-bg ab-center"></div></div>'))}},
b.busy?b.queue.push(opts):$.ajax(opts)),c&&this.load_more(a))};ViewerPanel.media.presentation.clean_page_no=function(a){var c=ViewerPanel.media;a=parseInt(a);return isNaN(a)||1>a?1:a>c.total?c.total:a};ViewerPanel.media.presentation.load_more=function(a){for(var c=1;c<=ViewerPanel.media.pre_load;c++)this.load(a+c,!1)};ViewerPanel.media.presentation.render=function(a){var c=ViewerPanel.media,b=a.match(/\x3c!-- Page (.*?) --\x3e/i)[1];$(c.slide_wrap_prefix+b).html(a);c.loaded[b-1]=!0;c.busy=!1;this.process_queue()};
ViewerPanel.media.presentation.show=function(a){var c=ViewerPanel.media;$(c.slide_wrap_prefix+c.current_slide).removeClass("current");$(c.slide_wrap_prefix+a).addClass("current");c.current_slide=a;c.viewer_presentation_goto.val(a);this.load(a,!0)};ViewerPanel.media.presentation.process_queue=function(){var a=ViewerPanel.media;if(a.queue.length){var c=a.queue.pop();a.loaded[c.data.p-1]?this.process_queue():$.ajax(c)}};
ViewerPanel.media.presentation.first=function(){1!=ViewerPanel.media.current_slide&&this.show(1)};ViewerPanel.media.presentation.prev=function(){var a=ViewerPanel.media;1>=a.current_slide||this.show(a.current_slide-1)};ViewerPanel.media.presentation.next=function(){var a=ViewerPanel.media;a.current_slide>=a.total||this.show(a.current_slide+1)};ViewerPanel.media.presentation.last=function(){var a=ViewerPanel.media;a.current_slide!=a.total&&this.show(a.total)};
ViewerPanel.media.presentation.goto_page=function(a){var c=ViewerPanel.media;a=this.clean_page_no(a);a>c.total&&(a=c.total);1>a&&(c.total=1);this.show(a);c.goto_busy=!0};
ViewerPanel.media.presentation.resize=function(a){var c=ViewerPanel.media;ViewerPanel.is_mobile&&c.window_width>c.window_height&&(a-=70);a=ViewerPanel.is_mobile&&c.window_height>c.window_width?parseFloat(((c.window_width-(a-210))/c.default_width).toFixed(3)):parseFloat(((c.window_height-a)/c.default_height).toFixed(3));if(9>a&&0<a){c.zoom=a;this.set_zoom();a=c.default_width*c.zoom;var b=c.default_height*c.zoom;ViewerPanel.is_mobile||$(document).fullScreen()||(b+=38);c.viewer_presentation_view_portal.css({width:a+
2+"px",height:b+2+"px"});c.viewer_presentation_wrapper.css({width:a+"px",height:b+"px"}).removeClass("hide")}};
ViewerPanel.media.presentation.set_zoom=function(){var a=ViewerPanel.media;9>a.zoom&&0<a.zoom&&($.browser.msie&&"8.0"==$.browser.version?a.viewer_presentation_view_portal.css("zoom",a.zoom):a.viewer_presentation_view_portal.css("-moz-transform","scale("+a.zoom+")").css("-webkit-transform","scale("+a.zoom+")").css("-o-transform","scale("+a.zoom+")").css("-ms-transform","scale("+a.zoom+")").css("transform","scale("+a.zoom+")").css("-webkit-transform-origin","0 0").css("-moz-transform-origin","0 0").css("-o-transform-origin",
"0 0").css("-ms-transform-origin","0 0").css("transform-origin","0 0"))};ViewerPanel.media.presentation.attach_swipe=function(){var a=ViewerPanel.media;a.viewer_presentation_view_portal.swipe({swipe:function(c,b,h,k,l,m){"left"==b&&a.presentation.next();"right"==b&&a.presentation.prev();a.presentation.clear_timer();a.presentation.set_timer()},threshold:0})};ViewerPanel.media.presentation.unattach_swipe=function(){ViewerPanel.media.viewer_presentation_view_portal.swipe("destroy")};
ViewerPanel.media.presentation.clear_timer=function(){var a=ViewerPanel.media;clearTimeout(this.timer);1<ViewerPanel.items_list.count&&a.viewer_presentation_wrapper.find(".pres-controls").removeClass("hide")};ViewerPanel.media.presentation.set_timer=function(){var a=ViewerPanel.media;this.timer=setTimeout(function(){a.viewer_presentation_wrapper.find(".pres-controls").addClass("hide")},3E3)};ViewerPanel.document={viewer_document_wrapper_id:"#document_wrapper",page_wrap_prefix:"#page_wrap_",document_outer:"#document_outer"};ViewerPanel.document.initialize=function(){this.viewer_document_wrapper=$(this.viewer_document_wrapper_id)};
ViewerPanel.document.update=function(a){this.document_outer=$(this.document_outer);a.id!=ViewerPanel.document.fid||""==this.viewer_document_wrapper.html()?(ViewerPanel.manager.reset_containers(),this.fid=a.id,this.viewer_document_wrapper.html(""),this["handle_"+a.type](a)):(a.is_loaded=!0,ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a),$("#pages").height()>this.document_outer.height()&&(a=this.scrollbar_width(),ViewerPanel.navigation.next.css("right",a+"px")))};
ViewerPanel.document.scrollbar_width=function(){if(void 0===c){var a=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");var c=a.children();c=c.innerWidth()-c.height(99).innerWidth();a.remove()}return c};ViewerPanel.document.handle_document=function(a){this.loaded=[];this.current_page=1;this.total=a.total_pages;this.ajax_url="/view/pages";this.goto_busy=!1;this.selector=void 0;this.zoom=1;this.scroll_top=null;this.viewer_header_total_pages=$("#viewer_header_total_pages");this.control_zoom_status=$("#control_zoom_status");this.control_zoom_status.text("100%");ViewerPanel.header.page_no_element.val(this.current_page);this.viewer_header_total_pages.text("/ "+this.total);a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&
(this.viewer_document_wrapper.html("<div id='pages' class='document-reader'>"),$("#pages"),ViewerPanel.document.pdf_manager.viewer=a,ViewerPanel.document.pdf_manager.fetch_document(a))};var to_multiply_with_css_unites=1;ViewerPanel.document.pdf_manager=function(){};
ViewerPanel.document.pdf_manager.get_view_port=function(a){if(ViewerPanel.is_mobile){var c=a.getViewport({scale:this.scale*this.css_units});return c.width>this.get_preview_width()?(c=a.getViewport({scale:to_multiply_with_css_unites*this.css_units}),this.scale=c=this.get_preview_width()/c.width,a.getViewport({scale:c*this.css_units})):c}if(this.initial_scale){var b=$("#pages").width(),h=$("#document_wrapper").height();0>=b&&(b=this.get_preview_width());b-=20;c="document"==a.viewer.type&&a.viewer.presentation_mode?
!0:!1;if(this.adjust_by_expanding)return this.initial_scale=!1,c=a.getViewport({scale:1*this.css_units}),h=this.get_preview_height()/c.height,b=this.get_preview_width()/c.width,h<b?(this.adjusted_via_height=!0,c=h):(this.adjusted_via_width=!0,c=b),this.scale=c,a.getViewport({scale:c*this.css_units});if(c)return c=a.getViewport({scale:this.scale*this.css_units}),b=(b-40-40)/c.width,h=(h-40-40)/c.height,c=Math.min(b,h),this.initial_scale=!1,this.scale=this.initial_scale_value=c,a.getViewport({scale:c*
this.css_units});c=a.getViewport({scale:this.scale*this.css_units});return c.width>this.get_preview_width()?(c=(b-100)/c.width,this.initial_scale=!1,this.scale=this.initial_scale_value=c,a.getViewport({scale:c*this.css_units})):c}return a.getViewport({scale:this.scale*this.css_units})};
ViewerPanel.document.pdf_manager.fetch_document=function(a){var c=a.preview_url;c||(c=a.download);c=c+"?_="+(new Date).getTime();var b=ViewerPanel.document.pdf_manager;pdfDoc=pdfjsLib.getDocument(c);pdfDoc.onPassword=b.password_prompt(a);pdfDoc.promise.then(function(h){b.fetch_document_callback(a,h)})};
ViewerPanel.document.pdf_manager.fetch_document_callback=function(a,c){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.id)return!1;var b=ViewerPanel.document.pdf_manager;b.pdf=c;b.pdf.pdf_pages=[];b.initial_scale=!0;b.initial_scale_value=0;b.adjust_by_expanding=!1;b.user_has_zoomed=!1;b.current_page=1;b.pages=$("#pages");b.document_outer=$("#document_outer");b.current_page_textbox=$("#form_control_goto");b.control_zoom_status=$("#control_zoom_status");b.basic_render_count=5;1024>=$(window).width()?
b.scale=.8:b.scale=1.1;ViewerPanel.is_mobile&&(b.basic_render_count=5);b.presentation_mode_activated=!1;b.number_of_pages=c.numPages;b.linkService=new pdfjsViewer.PDFLinkService;ViewerPanel.manager.update_classes(a);$("#viewer_header_total_pages").text("/ "+b.number_of_pages);$("#viewer_presentation_control_total_pages").text("/ "+b.number_of_pages);b.render_pages_layout(a,1,b.number_of_pages);b.set_scroller();ViewerPanel.document_controls.enable_and_disable_buttons(a);ViewerPanel.document_controls.show_deffered(5E3);
ViewerPanel.document_controls.bind_fullscreen();b.css_units=96/72;b.linkService.setDocument(c,null);ViewerPanel.manager.disable_links()};ViewerPanel.document.pdf_manager.render_pages_layout=function(a,c,b){for(var h=c;h<=b;h++)c=h<=this.basic_render_count?"render_it":"",this.pages.append("<div class='document-page document-loading "+c+" hide' id='page_wrap_"+h+"' rel='"+h+"' />"),this.fetch_page_from_server(a,h)};
ViewerPanel.document.pdf_manager.fetch_page_from_server=function(a,c){that=ViewerPanel.document.pdf_manager;that.pdf.getPage(c).then(function(b){b.viewer=a;that.fetch_page_from_server_callback(b)})};ViewerPanel.document.pdf_manager.fetch_page_from_server_callback=function(a){var c=ViewerPanel.document.pdf_manager;c.pdf.pdf_pages[a.pageIndex]=a;c.layout_page(a);$("#page_wrap_"+(a.pageIndex+1)).hasClass("render_it")&&c.render_page(a);c.cache_page_ref(a)};
ViewerPanel.document.pdf_manager.fetch_page=function(a){this.pdf.getPage(a).then(this.fetch_page_callback)};ViewerPanel.document.pdf_manager.fetch_page_callback=function(a){var c=ViewerPanel.document.pdf_manager;c.layout_page(a);c.render_page(a)};
ViewerPanel.document.pdf_manager.layout_page=function(a){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id)return!1;var c=this.get_view_port(a),b=$("#page_wrap_"+(a.pageIndex+1));a.width=Math.floor(c.width);a.height=Math.floor(c.height);b.removeClass("hide").addClass("loaded");a.viewer.presentation_mode&&(this.current_page!=a.pageIndex+1&&b.addClass("hide"),this.presentation_mode_activated||(ViewerPanel.presentation_controls.show(c),this.presentation_mode_activated=!0,this.current_page_textbox=
$("#viewer_presentation_control_goto"),ViewerPanel.presentation_controls.attach_up_and_down_keys_for_navigation(),ViewerPanel.is_mobile&&($("#si_wrapper").removeClass("hide"),$("#document_wrapper").addClass("ab-center").css({width:a.width,height:a.height}),ViewerPanel.presentation_controls.attach_tap())));b.css({width:a.width,height:a.height})};
ViewerPanel.document.pdf_manager.render_page=function(a){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id)return!1;var c=$("#page_wrap_"+(a.pageIndex+1));c.removeClass("render_it").addClass("rendered");0==c.find("canvas").length&&(c.append("<canvas id='canvas_"+(a.pageIndex+1)+"'></canvas>"),c.append("<div id='text_layer_"+(a.pageIndex+1)+"' class='textLayer' />"),this.render_page_to_screen(a))};
ViewerPanel.document.pdf_manager.render_page_to_screen=function(a){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id)return!1;var c=ViewerPanel.document.pdf_manager,b=$("#canvas_"+(a.pageIndex+1)).get(0),h=b.getContext("2d");c=c.get_view_port(a);var k=Jmp.Helpers.get_pdf_output_dpi(h);b.width=a.width*k.sx;b.height=a.height*k.sy;b.style.width=a.width+"px";b.style.height=a.height+"px";k.scaled&&(h._transformMatrix=[k.sx,0,0,k.sy,0,0],h.scale(k.sx,k.sy));a.render({canvasContext:h,
viewport:c}).promise.then(function(){});setTimeout(function(){$("#document_outer").focus()},500)};ViewerPanel.document.pdf_manager.render_page_to_screen_callback=function(a){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id)return!1;$("#page_wrap_"+(a.pageIndex+1)).removeClass("document-loading");clearTimeout(a.render_text_layer_timer);a.render_text_layer_timer=setTimeout(function(){ViewerPanel.document.pdf_manager.render_text_layer(a)},2E3)};
ViewerPanel.document.pdf_manager.render_text_layer=function(a){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id||!a.viewer.download)return!1;a.text_layer?this.render_text_layer_callback(a,a.text_layer):a.getTextContent().then(function(c){a.text_layer=c;ViewerPanel.document.pdf_manager.render_text_layer_callback(a,c)})};
ViewerPanel.document.pdf_manager.render_text_layer_callback=function(a,c){if(ViewerPanel.viewers_collection.get_current_viewer().id!==a.viewer.id)return!1;var b=that.get_view_port(a),h=$("#text_layer_"+(a.pageIndex+1)),k=h.get(0);k=new pdfjsViewer.TextLayerBuilder({textLayerDiv:k,pageIndex:a.pageIndex,viewport:b});k.setTextContent(c);h.css({top:0,left:0,width:Math.floor(b.width),height:Math.floor(b.height)});$("#page_wrap_"+(a.pageIndex+1)).append("<div id='annotations_layer_"+(a.pageIndex+1)+"'></div>");
(new pdfjsViewer.AnnotationLayerBuilder({pageDiv:$("#annotations_layer_"+(a.pageIndex+1)).get(0),pdfPage:a,linkService:that.linkService})).render(b);k.render()};ViewerPanel.document.pdf_manager.set_scroller=function(){var a=this;a.document_outer.unbind("scroll").bind("scroll",function(c){if(a.presentation_mode_activated)return!1;c=$(this).scrollTop();c=a.determine_page_number_based_on_top_scroll(c);a.update_current_page_number(c);a.render_pages_layout_in_ranges(c,!0);ViewerPanel.document_controls.show_deffered()})};
ViewerPanel.document.pdf_manager.determine_page_number_based_on_top_scroll=function(a){if(0>=a)return 1;for(var c=-1,b=ViewerPanel.document.pdf_manager.pdf.pdf_pages,h=0,k=0;k<b.length;k++){var l=b[k],m=18;800>l.height&&(m=9);h+=l.height+m;if(a<=h){c=k+1;break}}return 0>=c?1:c};
ViewerPanel.document.pdf_manager.render_pages_layout_in_ranges=function(a,c){c=this._prepare_pages_numbers_in_ranges(a,c);for(var b=c.length,h=0;h<b;h++){a=c[h];var k=a-that.basic_render_count,l=$("#page_wrap_"+k);k<a&&l.hasClass("rendered")&&l.removeClass("loaded").removeClass("rendered").html("");l=$("#page_wrap_"+a);l.hasClass("rendered")||this.fetch_page(a);k=a+that.basic_render_count;l=$("#page_wrap_"+k);k>a&&l.hasClass("rendered")&&l.removeClass("loaded").removeClass("rendered").html("")}};
ViewerPanel.document.pdf_manager._prepare_pages_numbers_in_ranges=function(a,c){var b=[];1<=a-1&&c&&b.push(a-1);b.push(a);a+1<=this.number_of_pages&&c&&b.push(a+3);return b};ViewerPanel.document.pdf_manager.update_current_page_number=function(a){this.current_page=a;this.current_page_textbox.val(a)};
ViewerPanel.document.pdf_manager.goto_page=function(a){var c=this,b=c.current_page;a=parseInt(a);isNaN(a)||0>=a?a=1:a>c.number_of_pages&&(a=c.number_of_pages);c.update_current_page_number(a);c.presentation_mode_activated?($("#page_wrap_"+b).addClass("hide"),$("#page_wrap_"+a).removeClass("hide"),c.render_pages_layout_in_ranges(a,!0)):(b=$("#page_wrap_"+a).position().top,c.document_outer.unbind("scroll"),c.document_outer.animate({scrollTop:b},500,function(){c.render_pages_layout_in_ranges(a,!0);setTimeout(function(){c.set_scroller()},
500)}))};ViewerPanel.document.pdf_manager.next_page=function(){this.goto_page(this.current_page+1)};ViewerPanel.document.pdf_manager.prev_page=function(){this.goto_page(this.current_page-1)};ViewerPanel.document.pdf_manager.first_page=function(){this.goto_page(1)};ViewerPanel.document.pdf_manager.last_page=function(){this.goto_page(this.number_of_pages)};
ViewerPanel.document.pdf_manager.zoom_in=function(){var a=this.scale+.1,c=parseInt(100*a);400>=c&&(this.scale=a,this.control_zoom_status.text(c+"%"),this.user_has_zoomed=!0,this.zoom())};ViewerPanel.document.pdf_manager.zoom_out=function(){var a=this.scale-.1,c=parseInt(100*a);10<=c&&(this.scale=a,this.control_zoom_status.text(c+"%"),this.user_has_zoomed=!0,this.zoom())};
ViewerPanel.document.pdf_manager.zoom=function(){var a=this;clearTimeout(a.zoom_loaded_pages_timer);var c=a.current_page;jquery_current_page=$("#page_wrap_"+c);a.document_outer.unbind("scroll");for(var b=a.pdf.pdf_pages,h=jquery_current_page.offset(),k=1;k<=c+1;k++){var l=b[k-1];if(l){var m=$("#page_wrap_"+k);a.layout_page(l);k>=c-1&&k<=c+1&&m.hasClass("rendered")&&($("#canvas_"+k).remove(),$("#text_layer_"+k).remove(),$("#annotations_layer_"+k).remove(),m.addClass("document-loading"),a.render_page(l))}}m=
$("#page_wrap_"+c);h=m.position().top+Math.abs(h.top);a.document_outer.scrollTop(h);setTimeout(function(){a.set_scroller()},500);a.zoom_loaded_pages_timer=setTimeout(function(){for(var n=0;n<a.number_of_pages;n++){var p=b[n];if(p){n+1>c+1&&a.layout_page(p);var r=$("#page_wrap_"+(n+1));(n+1<c-1||n+1>c+1)&&r.hasClass("rendered")&&($("#canvas_"+(n+1)).remove(),$("#text_layer_"+(n+1)).remove(),$("#annotations_layer_"+(n+1)).remove(),r.addClass("document-loading"),a.render_page(p))}}},1200)};
ViewerPanel.document.pdf_manager.password_prompt=function(a){return function(c,b){var h=ViewerPanel.viewers_collection.get_current_viewer();if(a.id!=h.id||!ViewerPanel.is_open())return!1;PasswordPrompt.updatePassword=c;PasswordPrompt.reason=b;b===pdfjsLib.PasswordResponses.INCORRECT_PASSWORD&&Jmp.App.Notifications.display_notification({type:"error",message:"Wrong password, please try again"}).close_notification();PasswordPrompt.open();setTimeout(function(){$("#pdf_password").focus()},100)}};
ViewerPanel.document.pdf_manager.cache_page_ref=function(a){this.linkService.cachePageRef(a.pageIndex+1,a.ref)};ViewerPanel.document.pdf_manager.resize_presentation=function(){this.initial_scale=!0;this.zoom();var a=$("#page_wrap_"+this.current_page),c=a.height();a={width:a.width(),height:c};ViewerPanel.presentation_controls.show(a)};
ViewerPanel.document.pdf_manager.get_preview_width=function(){var a=$(ViewerPanel.container_type+ViewerPanel.container_name);return a.hasClass("showing-comments")&&!a.hasClass("fullscreen")?$("#pages").width():window.screen.width};ViewerPanel.document.pdf_manager.get_preview_height=function(){var a=$(ViewerPanel.container_type+ViewerPanel.container_name);return a.hasClass("showing-comments")&&!a.hasClass("fullscreen")?$("#document_wrapper").height():window.screen.height};
ViewerPanel.document.pdf_manager.adjust_preview_for_comments_toggling=function(a){ViewerPanel.viewers_collection.get_current_viewer().id!=a.id||this.user_has_zoomed||(1024>=$(window).width()?this.scale=.8:this.scale=1.1,this.initial_scale=!0,"document"==a.type&&a.presentation_mode&&this.resize_presentation())};ViewerPanel.media.handle_font=function(a){this.font_names="#font_names";this.font_name="#font_name";this.font_preview="#font_preview";this.font_styles="#font_styles";this.font_style_name="#font_style_name";var c=this;ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.font_wrapper.html(b);c.font_names=$(c.font_names);c.font_name=$(c.font_name);c.font_preview=$(c.font_preview);
c.font_styles=$(c.font_styles);c.font_style_name=$(c.font_style_name);c.font_sizes=$("#font_sizes");c.font_size=$("#font_size");c.font_names.unbind("click").bind("click",function(h){c.font.select_font(h)});c.font_styles.unbind("click").bind("click",function(h){c.font.select_font_style(h)});c.font_sizes.unbind("click").bind("click",function(h){c.font.select_font_size(h)});c.font_size.unbind("keypress").bind("keypress",function(h){c.font.enter_font_size(h)});ViewerPanel.is_mobile&&c.font_preview.val("A quick brown fox jumps over the lazy dog.\n1234567890");
c.font_preview.focus()}})};ViewerPanel.media.font={};
ViewerPanel.media.font.select_font=function(a){var c=ViewerPanel.media;a=$(a.target);if(a.is("li > a")){var b=a.html(),h=c.font_name.html();a.data("font");var k=$(".font_styles[data-font='"+b+"']");k.removeClass("hide").addClass("dropdown");1>=k.find("li").length?k.prevAll(".distxts").addClass("blockUI"):k.prevAll(".distxts").removeClass("blockUI");k.find("li").removeClass("hide");c.font_style_name.html(k.find("li:first").addClass("hide").html());c.font_preview.css("font-family","preview-"+k.find("li:first").data("font"));
$(".font_styles[data-font='"+h+"']").removeClass("dropdown").addClass("hide");c.font_name.html(b);a.parent().find("a[data-font='"+h+"']").removeClass("hide");a.parent().find("a[data-font='"+b+"']").addClass("hide")}};
ViewerPanel.media.font.select_font_style=function(a){var c=ViewerPanel.media;a=$(a.target);if(a.is("li > a")){var b=a.text(),h=c.font_style_name.val(),k=a.parent("li").data("font");c.font_preview.css("font-family","preview-"+k);c.font_style_name.val(b).html(b+' <span class="caret"></span>');a.parent().find("[data-style='"+h+"']").removeClass("hide");a.parent().find("[data-style='"+b+"']").addClass("hide")}};
ViewerPanel.media.font.select_font_size=function(a){var c=ViewerPanel.media;a=$(a.target);a.is("li > a")&&(a=a.text(),c.font_size.val(a+"px").html(a+'px <span class="caret"></span>'),c.font_preview.css("font-size",a+"px"))};ViewerPanel.media.font.enter_font_size=function(a){var c=ViewerPanel.media,b=$(a.target);13==a.which&&(a=b.val().match(/\d+/),a=a.length?a[0]:4,4>a&&(a=4),120<a&&(a=120),b.val(a+"px"),c.font_preview.css("font-size",a+"px"))};ViewerPanel.document.handle_cad=function(a){this.svg_preview="#svg_preview";this.grid_off=$("#control_grid_off");this.cad_file_div=this.cad_container=null;var c=this;ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.viewer_document_wrapper.html(b);ViewerPanel.document_controls.show();c.cad_container=$("#cad_container");c.svg_preview=$("#svg_preview");c.cad_file_div=$("#cad_file_div");
ViewerPanel.is_mobile&&(c.cad_container.addClass("hide"),c.cad_file_div.removeClass("hide"),c.cad.attach_view());$("#controls_color_container a.active").removeClass("active");$("#controls_color_container a.switch-to-white").addClass("active")}})};ViewerPanel.document.cad={};
ViewerPanel.document.cad.set_background_color=function(a){var c=ViewerPanel.document;a=$(a.target);a.is("a")&&!a.hasClass("active")&&(c.svg_preview.css("background",""),a.parent().find("a.active").removeClass("active"),c.svg_preview.removeClass("black").removeClass("yellow").removeClass("white").addClass(a.text().toLowerCase()),c.grid_off.hasClass("active")&&c.svg_preview.css("background",c.svg_preview.css("background-color")),a.addClass("active"))};
ViewerPanel.document.cad.set_background_grid=function(a){var c=ViewerPanel.document;a=$(a.target);a.is("a")&&!a.hasClass("active")&&(a.parent().find("a.active").removeClass("active"),"control_grid_on"==a.attr("id")?c.svg_preview.css("background",""):c.svg_preview.css("background",c.svg_preview.css("background-color")),a.addClass("active"))};
ViewerPanel.document.cad.attach_view=function(){var a=ViewerPanel.document;a.cad_file_div.live("click",function(){a.cad_container.removeClass("hide");$(this).addClass("hide");$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("slideshow");$("meta[name=viewport]").attr("content","width=device-width, initial-scale=1, user-scalable=1, minimal-ui");ViewerPanel.navigation.unattach_swipe();return!1})};ViewerPanel.document.handle_code=function(a){var c=this;ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.viewer_document_wrapper.html(b);c.code_container=$("#code_container");c.code_file_div=$("#code_file_div");ViewerPanel.is_mobile&&(c.code_container.addClass("hide"),c.code_file_div.removeClass("hide"),c.code.attach_view());$("#code_container > .highlighttable").height()>
$("#code_container").height()&&(b=c.scrollbar_width(),ViewerPanel.navigation.next.css("right",b+"px"))}})};ViewerPanel.document.code={};ViewerPanel.document.code.attach_view=function(){var a=ViewerPanel.document;a.code_file_div.live("click",function(){a.code_container.removeClass("hide");$(this).addClass("hide");$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("slideshow");ViewerPanel.navigation.unattach_swipe();return!1})};ViewerPanel.document.handle_text=function(a){this.page_wrap_prefix_1=$(this.page_wrap_prefix+1);var c=this;ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.viewer_document_wrapper.html(b);ViewerPanel.manager.disable_links();ViewerPanel.document.disable_links()}})};
ViewerPanel.document.disable_links=function(){ViewerPanel.is_mobile&&$("div.document-page").find("a").live("click",function(a){return!1})};ViewerPanel.document.handle_ebook=function(a){this.loaded=0;this.pre_load=3;this.font_size=12;this.slide_pos=0;this.mouse_down=!1;this.ajax_url="/view/page";this.total=a.total_pages;this.control_font_slider=$("#control_font_slider");this.pages_div=null;var c=this;ViewerPanel.ajax_request=$.ajax({url:a.load_link,success:function(b){a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);c.viewer_document_wrapper.html(b);ViewerPanel.document_controls.show_deffered(5E3);
c.pages_div=$("#pages");c.ebook.initialize_scroller(c.document_outer);c.control_font_slider.unbind("mousedown").bind("mousedown",function(h){c.mouse_down=!0;c.slide_pos=h.clientX}).removeAttr("style");$(document).unbind("mouseup").bind("mouseup",function(h){c.mouse_down=!1;c.slide_pos=0});$("#font_controls").live("mousemove",function(h){c.ebook.set_font_slider_position(h);return!1});ViewerPanel.header.controls_color_container.find("a.active").removeClass("active");ViewerPanel.header.controls_color_container.find("a.switch-to-white").addClass("active");
for(b=0;b<c.total;b++)$(c.page_wrap_prefix+(b+1)).length&&b<c.pre_load&&c.ebook.load(b+1,!1)}})};ViewerPanel.document.ebook=function(){};
ViewerPanel.document.ebook.load=function(a,c){var b=ViewerPanel.document;1>a||a>b.total||b.loaded>a||($(b.page_wrap_prefix+a).addClass("document-loading"),$.ajax({url:b.ajax_url,data:{p:a,fid:b.fid},timeout:1E4,type:"GET",cache:!1,success:function(h,k,l){"success"==k&&(b.ebook.render(h,a),a==b.pre_load&&(b.pages_div.height()<b.viewer_document_wrapper.height()?(b.pre_load+=1,b.ebook.load(b.pre_load,!1)):(h=b.scrollbar_width(),ViewerPanel.navigation.next.css("right",h+"px"))));$(b.page_wrap_prefix+
a).removeClass("document-loading")}}),c&&b.ebook.load_more(a))};ViewerPanel.document.ebook.render=function(a,c){var b=ViewerPanel.document;$(b.page_wrap_prefix+c).html(a);b.loaded=b.loaded<c?c:b.loaded;""==$(b.page_wrap_prefix+(c-1)).html()&&this.load(c-1,!1);setTimeout(function(){$("#document_outer").focus()},500)};ViewerPanel.document.ebook.load_more=function(a){a+=1;""==$(ViewerPanel.document.page_wrap_prefix+a).html()&&this.load(a,!1)};
ViewerPanel.document.ebook.initialize_scroller=function(a){var c=ViewerPanel.document;$(a).unbind("scroll").unbind("scrollstop").bind("scrollstop",function(){var b=parseInt($(a).scrollTop()),h=parseInt($(a).height());c.pages_div.height()<b+h&&c.ebook.load_more(c.loaded)});$(a).bind("scroll",function(b){ViewerPanel.document_controls.show_deffered()})};
ViewerPanel.document.ebook.set_color_theme=function(a){var c=ViewerPanel.document;a=$(a.target);a.is("a")&&!a.hasClass("active")&&(c.pages_div.removeClass("black").removeClass("yellow").removeClass("white").addClass(a.text().toLowerCase()),a.parent().find("a.active").removeClass("active"),a.addClass("active"))};ViewerPanel.document.ebook.set_font_slider_position=function(a){var c=ViewerPanel.document;c.mouse_down&&c.ebook.set_font_and_slide(a.clientX,ViewerPanel.header.control_font_slide_wrapper.offset().left)};
ViewerPanel.document.ebook.set_small_font=function(){var a=ViewerPanel.document,c=parseInt(a.control_font_slider.css("left"))-5;-2<c&&(a.font_size-=2,a.pages_div.css("font-size",a.font_size+"px"),a.control_font_slider.css("left",c+"px"))};ViewerPanel.document.ebook.set_large_font=function(){var a=ViewerPanel.document,c=parseInt(a.control_font_slider.css("left"))+5;92>c&&(a.font_size+=2,a.pages_div.css("font-size",a.font_size+"px"),a.control_font_slider.css("left",c+"px"))};
ViewerPanel.document.ebook.set_font_on_slide=function(a){var c=$(a.target);if(!c.hasClass("slider-control-wrapper"))return!1;ViewerPanel.document.ebook.set_font_and_slide(a.clientX,c.offset().left)};ViewerPanel.document.ebook.set_font_and_slide=function(a,c){var b=ViewerPanel.document;c=a-(c+8);b.slide_pos!=a&&(b.slide_pos=a,-2<c&&96>c&&(b.control_font_slider.css("left",c+"px"),b.font_size=2*Math.floor(c/5)+8,b.pages_div.css("font-size",b.font_size+"px")))};ViewerPanel.document.handle_spreadsheet=function(a){this.scroll_interval=this.total_width=0;for(var c='<div id="container" class="document-reader '+(ViewerPanel.is_mobile?"hide":"")+'"> \t\t\t<div id="content" class="document-page"> \t\t\t\t<iframe id="viewer_iframe" src="/view/load/'+this.fid+'"></iframe> \t\t\t</div> \t\t\t<div class="number-of-sheets"> \t\t\t\t<div id="arrow_container" class="slide-arrows clearfix"> \t\t\t\t\t<a id="sheet_right_arrow" href="#" class="icn-next-sheets pull-right"></a> \t\t\t\t\t<a id="sheet_left_arrow" href="#" class="icn-previous-sheets pull-left"></a> \t\t\t\t</div> \t\t\t\t<div class="sheets-slider clearfix"><ul id="sheets" class="sheet-lists clearfix">',
b=0;b<a.total_sheets;b++)c+='<li><a class="btn btn-default '+(0==b?"active":"")+'" href="#" data-url="/view/load/'+this.fid+"/"+(b+1)+'">'+a.sheet_names[b]+"</a></li>";c+="</ul></div> \t\t\t</div> \t\t</div>";ViewerPanel.is_mobile&&(c+='<div id="spreadsheet_file_div" class="spview-wrapper ab-center"><img class="main-icon-wrapper" src="/res/images/file-icons/thumb/spreadsheet.png" srcset="/res/images/file-icons/thumb/spreadsheet.png 1x, /res/images/file-icons-retina/thumb/spreadsheet@2x.png 2x" alt="" />         <a class="btn btn-blue" href="javascript:void(0);"> View </a></div>');
var h=ViewerPanel.document;a.is_loaded=!0;ViewerPanel.viewers_collection.is_current_viewer(a)&&ViewerPanel.manager.update_classes(a);this.viewer_document_wrapper.html(c);this.sheets_list=$("#sheets");this.arrow_container=$("#arrow_container");this.sheets_slider=$(".sheets-slider");this.viewer_iframe=$("#viewer_iframe");this.arrow_container.unbind("mousedown").bind("mousedown",function(k){"sheet_left_arrow"==$(k.target).attr("id")?h.spreadsheet.start_scroll("left"):"sheet_right_arrow"==$(k.target).attr("id")&&
h.spreadsheet.start_scroll("right")});this.arrow_container.unbind("mouseup").bind("mouseup",function(k){"sheet_left_arrow"!=$(k.target).attr("id")&&"sheet_right_arrow"!=$(k.target).attr("id")||h.spreadsheet.stop_scroll()});h.spreadsheet.resize_iframe("viewer_iframe");window.onresize=function(){h.spreadsheet.resize_iframe("viewer_iframe")};$("a",this.sheets_list).unbind("click").bind("click",function(){$(this).hasClass("active")||(h.viewer_iframe.hide().attr("src",$(this).data("url")),$("a.active",
this.sheets_list).removeClass("active"),$(this).addClass("active"))});$("#spreadsheet_file_div").live("click",function(){$(this).addClass("hide");$("#container").removeClass("hide");$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("slideshow");ViewerPanel.navigation.unattach_swipe();return!1});this.viewer_iframe.load(function(){$("li",h.sheets_list).each(function(){h.total_width+=$(this).outerWidth()});0!=h.total_width?h.sheets_list.width(h.total_width+150):h.sheets_list.width(h.sheets_slider-
80);$(this).show();if($(this).contents().find("#data_cell table").height()>$(this).contents().find("#spreadsheet_container").height()){var k=h.scrollbar_width();ViewerPanel.navigation.next.css("right",k+"px")}ViewerPanel.manager.disable_links()});setTimeout(function(){$("#document_outer").focus()},500);h.sheets_slider.scrollLeft(0)};ViewerPanel.document.spreadsheet={};
ViewerPanel.document.spreadsheet.move_sheets=function(a){var c=ViewerPanel.document,b=c.sheets_slider.scrollLeft();c.sheets_slider.scrollLeft("right"==a?b+10:b-10)};ViewerPanel.document.spreadsheet.start_scroll=function(a){var c=ViewerPanel.document;c.scroll_interval=setInterval(function(){c.spreadsheet.move_sheets(a)},20)};ViewerPanel.document.spreadsheet.stop_scroll=function(){clearInterval(ViewerPanel.document.scroll_interval)};
ViewerPanel.document.spreadsheet.resize_iframe=function(a){ViewerPanel.is_mobile||($("#"+ViewerPanel.container_name).hasClass("no-footer")?$("#"+a).width($(window).width()).height($(window).height()-93):$("#"+a).width($(window).width()).height($(window).height()-193))};
ViewerPanel.document.spreadsheet.load_sheet=function(a){if("left"==a){var c=$("a.active",this.sheets_list).parent().prev();c.length&&c.find("a").trigger("click")}"right"==a&&(a=$("a.active",this.sheets_list).parent().next(),a.length&&a.find("a").trigger("click"))};ViewerPanel.viewers_collection={items:{},item_ids:[],current:0,current_panel:0};ViewerPanel.viewers_collection.initialize=function(){this.bootstrap()};ViewerPanel.viewers_collection.bootstrap=function(){this.empty()};ViewerPanel.viewers_collection.is_empty=function(){return 0==this.item_ids.length};ViewerPanel.viewers_collection.is_single_viewer=function(){return 1==this.get_total_items_count()};ViewerPanel.viewers_collection.empty=function(){this.items={};this.current=0;this.empty_item_ids()};
ViewerPanel.viewers_collection.empty_item_ids=function(){this.item_ids=[]};ViewerPanel.viewers_collection.add=function(a,c){this.add_item_id(a,c.index);this.items[a]=c};ViewerPanel.viewers_collection.add_item_id=function(a,c){"undefined"==typeof c?this.item_ids.push(a):this.item_ids.splice(c,0,a)};ViewerPanel.viewers_collection.remove=function(a){this.get_by_id(a);var c=$.inArray(a,this.item_ids);-1!=c&&this.remove_index(c);delete this.items[a]};
ViewerPanel.viewers_collection.remove_index=function(a){this.item_ids.splice(a,1)};ViewerPanel.viewers_collection.remove_item_only=function(a){delete this.items[a]};ViewerPanel.viewers_collection.get_list=function(){return this.items};ViewerPanel.viewers_collection.get_item_ids=function(){return this.item_ids};ViewerPanel.viewers_collection.get_total_items_count=function(){return this.item_ids.length};
ViewerPanel.viewers_collection.get_by_id=function(a){a=this.items[a];"undefined"!=typeof a&&(this.current=a.index);return a};ViewerPanel.viewers_collection.fetch_by_id=function(a){return this.items[a]};ViewerPanel.viewers_collection.get_by_index=function(a){return this.items[this.item_ids[a]]};ViewerPanel.viewers_collection.get_current=function(){return this.current};ViewerPanel.viewers_collection.get_current_viewer=function(){return this.get_by_index(this.get_current())};
ViewerPanel.viewers_collection.get_next=function(){return this.current<this.item_ids.length-1?(this.current+=1,this.get_by_index(this.current)):!1};ViewerPanel.viewers_collection.get_previous=function(){if(0==this.current)return!1;--this.current;return this.get_by_index(this.current)};ViewerPanel.viewers_collection.adjust_viewers=function(){for(var a=this.get_total_items_count(),c=0;c<a;c++){var b=this.get_by_index(c);"undefined"!=typeof b&&(b.index=c)}};
ViewerPanel.viewers_collection.is_current_viewer=function(a){return a.index==this.get_current()};ViewerPanel.viewers_factory={};
ViewerPanel.viewers_factory.prepare=function(a){var c=a.elem,b=a.index,h=a.id,k=c.attr("data-name"),l=c.attr("data-gridname"),m=c.attr("data-extension"),n=c.attr("data-type"),p=c.find(".copy-link").attr("data-link"),r=c.find(".email").attr("data-verified"),q=c.find(".download").attr("data-link"),u=1<=c.find(".import").length?!0:!1,v="/"+VIEWER_SUBDIR+"/"+h+a.url_suffix,x="icn-thumb-"+(m?m:"file"),y=1<=c.find(".hide_save_file_viewer").length?!0:!1;a=c.attr("data-comment-status")||"enabled";"xml"==
n&&(n="code");b={index:b,id:h,name:k,gridname:l,extension:m,type:n,copy_link:p,is_verified:r,download:q,link:v,importt:u,class_name:x,hide_save_file_viewer:y,comments_disabled:a};1<=c.find(".restore_previous_version").length&&(b.restore_previous_version=!0,b.restore_previous_version_number=c.find(".restore_previous_version").attr("data-version-number"));1<=c.find(".comments_status_disable").length&&(b.comments_status_disable=!0);a&&(b.comments_status_disable="enabled"==a?!1:!0);k=c.find(".thumbnail img");
if(-1!=c.attr("id").indexOf("XHR_"))return(new UploadingViewer).construct(b);if("undefined"!=typeof c.attr("data-absent")&&1==c.attr("data-absent"))return(new AbsentViewer).construct(b);if("unknown"==n||"unknown"!=n&&"embed"!=n&&("2"==c.attr("data-status")||"3"==c.attr("data-status")||"4"==c.attr("data-status")))return"2"==c.attr("data-status")?b.type="failed":"3"==c.attr("data-status")?b.type="skipped":"4"==c.attr("data-status")?b.type="unsupported":b.type="unknown",b.size=Jmp.Helpers.formatSize(c.data("size")),
b.uploaded=c.find(".footer_timer").text(),b.file_url=c.attr("data-file-url"),b.file_url&&""!=b.file_url&&(b.class_name=""),(new UnknownViewer).construct(b);if("embed"==n)return b.file_url=c.attr("data-file-url"),b.file_embed_url=c.attr("data-file-embed-url"),b.embedding_service=c.attr("data-file-mime-type"),(new EmbedViewer).construct(b);if("image"==n||"video"==n||"audio"==n||"font"==n)"audio"==n?("undefined"==typeof MediaElementPlayer&&ViewerPanel.viewers_factory.loadScript("https://static.jumpshare.com/res/mediaplayer/jmp_player.js").then(B=>
{}),b.full_src=k.attr("data-full-audio-src"),b.media_subtitles=k.attr("data-media-subtitles"),b.media_subtitles_hash=k.attr("data-subtitles-hash"),b.media_waveform=k.attr("data-media-waveform"),b.media_subtitle_queued=k.attr("data-media-subtitle-queued"),b.media_acodec=k.attr("data-media-acodec"),b.subtitles_language=k.attr("data-subtitles-language")):"video"==n?("undefined"==typeof MediaElementPlayer&&ViewerPanel.viewers_factory.loadScript("https://static.jumpshare.com/res/mediaplayer/jmp_player.js").then(B=>
{ViewerPanel.viewers_factory.loadJS("https://assets.calendly.com/assets/external/widget.js");ViewerPanel.viewers_factory.loadJS("https://unpkg.com/roughjs@latest/bundled/rough.js");ViewerPanel.viewers_factory.loadCSS("https://assets.calendly.com/assets/external/widget.css")}),b.full_src=k.attr("data-full-video-src"),b.hd_src=k.attr("data-hd-video-src"),b.poster_src=k.attr("data-video-poster"),b.poster_src_type=k.attr("data-video-poster-type"),b.media_subtitles=k.attr("data-media-subtitles"),b.media_subtitles_hash=
k.attr("data-subtitles-hash"),b.media_waveform=k.attr("data-media-waveform"),b.media_subtitle_queued=k.attr("data-media-subtitle-queued"),b.media_acodec=k.attr("data-media-acodec"),b.subtitles_language=k.attr("data-subtitles-language")):"image"==n?(b.full_image_src=k.attr("data-full-image-src"),b.original_image_src=k.attr("data-original-image-src"),b.file_url=c.attr("data-file-url"),b.name.match("^Screen Shot")&&(b.full_image_src=k.attr("data-original-image-src"))):"font"==n&&(b.load_link="/view/load/"+
h),h=(new MediaViewer).construct(b);else{if("document"==n||"ebook"==n||"presentation"==n){if("document"==n||"presentation"==n)"undefined"==typeof pdfjsLib&&ViewerPanel.viewers_factory.loadScript("https://static.jumpshare.com/res/css/pdfjs/jspdf.min.js").then(B=>{}),b.preview_url=c.find(".preview").attr("data-preview-url"),"presentation"==n&&(b.type="document",b.presentation_mode=!0);b.total_pages=k.attr("data-total-pages")}else"spreadsheet"==n&&(b.total_sheets=k.attr("data-total-sheets"),k=k.attr("data-sheet_names"),
b.sheet_names=k?k.split(","):"");b.load_link="/view/load/"+h;h=(new DocumentViewer).construct(b)}!(h instanceof DocumentViewer||h instanceof MediaViewer)||"0"!=c.attr("data-status")&&""!=c.attr("data-status")||"unknown"==n||(b.progress=100,b.is_observing=!0,c=(new UploadingViewer).construct(b),h.uploading=c);return h};
ViewerPanel.viewers_factory.loadJS=function(a,c=!0){let b=document.createElement("script");b.setAttribute("src",a);b.setAttribute("type","text/javascript");b.setAttribute("async",c);document.body.appendChild(b);b.addEventListener("load",()=>{console.log("File loaded",a);return!0});b.addEventListener("error",h=>{console.log("File failed",a);return!1})};
ViewerPanel.viewers_factory.loadCSS=function(a){let c=document.createElement("link");c.setAttribute("href",a);c.setAttribute("rel","stylesheet");document.body.appendChild(c);c.addEventListener("load",()=>{console.log("File loaded",a)})};
ViewerPanel.viewers_factory.loadScript=(a,c=!0,b="text/javascript")=>new Promise((h,k)=>{try{const l=document.createElement("script");l.type=b;l.async=c;l.src=a;l.addEventListener("load",m=>{h({status:!0})});l.addEventListener("error",m=>{k({status:!1,message:`Failed to load the script ${a}`})});document.body.appendChild(l)}catch(l){k(l)}});ViewerPanel.unknown={download_file_icon_id:"#download_file_icon",download_file_name_id:"#download_file_name",download_file_meta_id:"#download_file_meta",download_file_link_id:"#download_file_link",previous_classes:""};ViewerPanel.unknown.update=function(a){this.download_file_icon=$(this.download_file_icon_id);this.download_file_name=$(this.download_file_name_id);this.download_file_meta=$(this.download_file_meta_id);this.download_file_link=$(this.download_file_link_id);this["handle_"+a.type](a)};
ViewerPanel.unknown.handle_unknown=function(a){$(ViewerPanel.download_file_msg).addClass("hide");this.apply_classes(a);this.update_name(a);var c=" \u22c5 ";ViewerPanel.is_mobile&&(c="");this.download_file_meta.text(a.uploaded+c+a.size)};ViewerPanel.unknown.handle_unsupported=function(a){$(ViewerPanel.download_file_msg).addClass("hide");this.apply_classes(a);this.update_name(a);var c=" \u22c5 ";ViewerPanel.is_mobile&&(c="");this.download_file_meta.text(a.uploaded+c+a.size)};
ViewerPanel.unknown.handle_skipped=function(a){"private"==VIEW&&($(ViewerPanel.download_file_msg).removeClass("hide"),$(ViewerPanel.download_file_msg).find(".message").css({width:"400px","text-transform":"none"}).text("This file is bigger than usual, so we're not displaying the preview to keep things fast."));this.apply_classes(a);this.update_name(a);var c=" \u22c5 ";ViewerPanel.is_mobile&&(c="");this.download_file_meta.text(a.uploaded+c+a.size)};
ViewerPanel.unknown.handle_failed=function(a){"private"==VIEW&&($(ViewerPanel.download_file_msg).removeClass("hide"),$(ViewerPanel.download_file_msg).find(".message").css({width:"200px","text-transform":"capitalize"}).text("Preview Not Available"));this.apply_classes(a);this.update_name(a);var c=" \u22c5 ";ViewerPanel.is_mobile&&(c="");this.download_file_meta.text(a.uploaded+c+a.size)};
ViewerPanel.unknown.update_name=function(a){a=a.name+(""!=a.extension?"."+a.extension:"");"undefined"!=typeof this.download_file_name&&this.download_file_name.text(a)};ViewerPanel.unknown.apply_classes=function(a){this.download_file_icon.removeClass(this.previous_classes);var c=a.class_name;a.file_url&&""!=a.file_url&&(c="icn-thumb-link");this.download_file_icon.addClass(c);this.previous_classes=c};ViewerPanel.uploading={upload_container:"#upload_container",viewer_progress:"#viewer_progress",upload_status:"#upload_status"};ViewerPanel.uploading.update=function(a){this.reset_controls();this.update_progress(a)};ViewerPanel.uploading.reset_controls=function(){$("#radial_progress").removeClass("hide");$("#downloadcirkel").removeClass("hide");$("#upload_processing_loader").addClass("hide");$("#upload_status").removeAttr("style");$("#upload_processing_loader_image").removeAttr("style")};
ViewerPanel.uploading.update_progress=function(a){this.update_progress_bar(a)};
ViewerPanel.uploading.update_progress_bar=function(a){100>a.progress?(a.status="Uploading",$(this.viewer_progress).text(a.progress+"%"),this.animate_progress_bar(a),$(this.upload_container).removeClass("done"),this.update_status(a)):100<=a.progress&&(a.is_observing?($("#"+a.id).attr("data-status"),a.status="Processing",this.update_elements_while_in_processing(),this.update_status(a),this.check_processing(a)):(a.status="Finishing",$(this.upload_container).addClass("done"),this.update_status(a),this.animate_progress_bar({progress:0})))};
ViewerPanel.uploading.animate_progress_bar=function(a){var c=["-webkit-transform","-ms-transform","transform"];a=1.8*a.progress;for(var b=2*a,h=c.length,k=0;k<h;k++)$(".circle .fill, .circle .mask.full").css(c[k],"rotate("+a+"deg)"),$(".circle .fill.fix").css(c[k],"rotate("+b+"deg)")};
ViewerPanel.uploading.check_processing=function(a){var c=ViewerPanel.uploading,b=a;a=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.is_open()&&b.id==a.id&&$.get(WS_PREFIX+"/p/"+b.id,function(h){if("0"!=h.status){$("#"+b.id).attr("data-status",h.status);if("1"==h.status){for(var k=h.data_tags.split("|"),l=0;l<k.length-1;l++)if(""!=k[l]){var m=k[l].split("=");$("#"+b.id).find(".thumbnail img").attr(m[0],m[1].replace(/"/g,""))}$("#"+b.id).find(".preview").attr("data-preview-url",h.preview_url)}b=
ViewerPanel.viewers_collection.fetch_by_id(b.id);"undefined"!=typeof b.uploading&&delete b.uploading;ViewerPanel.is_open()&&(ViewerPanel.document.fid=void 0,ViewerPanel.media.fid=void 0);Jmp.Helpers.update_viewer(b.id)}else setTimeout(function(){c.check_processing(b)},2E3)})};ViewerPanel.uploading.update_status=function(a){$(this.upload_status).text(a.status)};
ViewerPanel.uploading.update_elements_while_in_processing=function(){$("#radial_progress").addClass("hide");$("#downloadcirkel").addClass("hide");$("#upload_processing_loader").removeClass("hide");$("#upload_status").css("margin-top","82px");var a=ViewerPanel.is_dark_viewer()?"native-loader-black":"search-loader";$("#upload_processing_loader_image").css({width:"24px",height:"24px",background:'url("/res/images/'+a+'.GIF")',backgroundSize:"24px 24px"})};ViewerPanel.absent={};ViewerPanel.absent.update=function(){};ViewerPanel.embed={embed_iframe_odd_id:"#embed_iframe_odd",embed_iframe_even_id:"#embed_iframe_even",active:"even"};
ViewerPanel.embed.update=function(a){var c=this.get_height_and_width(a);a=this.prepare_file_embed_url(a);"even"==this.active?($(this.embed_iframe_odd_id).attr("src",a).css(c),$(this.embed_iframe_even_id).attr("src","").css("display","none"),this.active="odd"):($(this.embed_iframe_even_id).attr("src",a).css(c),$(this.embed_iframe_odd_id).attr("src","").css("display","none"),this.active="even")};
ViewerPanel.embed.get_height_and_width=function(a){var c={height:"100%",width:"100%",display:"inline"};"instagram"==a.embedding_service&&(c.height="692px",c.width="612px");return c};ViewerPanel.embed.prepare_file_embed_url=function(a){a=a.file_embed_url;a=a.replace("https://","//");return a=a.replace("http://","//")};ViewerPanel.document_controls={wrapper_id:"#document_controls_wrapper",controls_id:"#document_controls"};ViewerPanel.document_controls.show_deffered=function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();if("document"==c.type&&c.presentation_mode)return!1;a="undefined"==typeof a?3E3:a;this.show()&&this.hide_deffered(a)};ViewerPanel.document_controls.hide_deffered=function(a){var c=this;c.hide_deffered_timeout=setTimeout(function(){c.hide()},a)};
ViewerPanel.document_controls.show=function(){var a=ViewerPanel.viewers_collection.get_current_viewer();if("document"==a.type&&a.presentation_mode)return!1;a=$(ViewerPanel.container_type+ViewerPanel.container_name);return a.hasClass("document")||a.hasClass("ebook")||a.hasClass("cad")||a.hasClass("image")?(clearTimeout(this.hide_deffered_timeout),$(this.controls_id).fadeIn(200),!0):!1};ViewerPanel.document_controls.hide=function(){$(this.controls_id).fadeOut(200)};
ViewerPanel.document_controls.hide_immediately=function(){$(this.controls_id).css("display","none")};
ViewerPanel.document_controls.bind_fullscreen=function(){$("#viewer_control_fullscreen, #viewer_presentation_control_fullscreen").unbind("click").bind("click",function(a){ViewerPanel.document.document_outer.fullScreen(!0);ViewerPanel.document_controls.bind_exit_fullscreen();a.preventDefault()});$(document).unbind("fullscreenchange").bind("fullscreenchange",function(){if($(document).fullScreen()){if(ViewerPanel.document.pdf_manager.temp_scale=ViewerPanel.document.pdf_manager.scale,ViewerPanel.document.pdf_manager.initial_scale=
!0,ViewerPanel.document.pdf_manager.presentation_mode_activated&&(ViewerPanel.document.pdf_manager.adjust_by_expanding=!0),$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("fullscreen"),ViewerPanel.document.pdf_manager.zoom(),"undefined"!=typeof ga&&ga("send","event","Fullscreen","Document Fullscreen","Document Viewer"),ViewerPanel.document.document_outer.css({width:"100%",height:"100%"}),$("body").addClass("fullscreen"),ViewerPanel.document.pdf_manager.presentation_mode_activated){$("#pres_controls").addClass("hide");
$(document).bind("keydown",ViewerPanel.presentation_controls.next_or_prev_page_in_fullscreen);ViewerPanel.presentation_controls.detach_up_and_down_keys_for_navigation();var a=$("#page_wrap_1").height();if(ViewerPanel.document.pdf_manager.adjusted_via_width){var c=screen.height;c=Math.ceil((c-a)/2);20>c&&(c=-20);$("#pages").css("margin-top",c)}else $("#pages").css("margin-top","-20px");$("#document_wrapper").css("overflow","hidden")}}else $(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("fullscreen"),
ViewerPanel.document.pdf_manager.scale=ViewerPanel.document.pdf_manager.temp_scale,ViewerPanel.document.pdf_manager.zoom(),ViewerPanel.document.document_outer.removeAttr("style"),$("body").removeClass("fullscreen"),ViewerPanel.document.pdf_manager.presentation_mode_activated&&($("#pres_controls").removeClass("hide"),$(document).unbind("keydown",ViewerPanel.presentation_controls.next_or_prev_page_in_fullscreen),ViewerPanel.presentation_controls.attach_up_and_down_keys_for_navigation(),$("#pages").removeAttr("style"),
$("#document_wrapper").removeAttr("style"),ViewerPanel.document.pdf_manager.adjust_by_expanding=!1)})};ViewerPanel.document_controls.bind_exit_fullscreen=function(){$("#xclose").unbind("click").bind("click",function(a){ViewerPanel.document.document_outer.fullScreen(!1)})};
ViewerPanel.document_controls.enable_and_disable_buttons=function(a){if(!a)return!1;$("#control_zoom_in").removeClass("blockUI");$("#control_zoom_out").removeClass("blockUI");a.download?$("#viewer_control_print").removeClass("blockUI"):a.download||$("#viewer_control_print").addClass("blockUI")};$(ViewerPanel.document_controls.controls_id).live("mouseenter",function(){ViewerPanel.document_controls.show();return!1});
$(ViewerPanel.document_controls.controls_id).live("mouseleave",function(){$(ViewerPanel.container_type+ViewerPanel.container_name).hasClass("cad")||ViewerPanel.document_controls.show_deffered();return!1});$("#document_wrapper").live("mousemove",function(a){a.stopPropagation();$(ViewerPanel.container_type+ViewerPanel.container_name).hasClass("cad")||ViewerPanel.document_controls.show_deffered()});
$("#viewer_control_print").live("click",function(a){"undefined"!=typeof ga&&ga("send","event","Print Clicked","Document Print","Document Viewer");var c=window.open(ViewerPanel.document.pdf_manager.viewer.preview_url,"Jumpshare-Print-Window");window.print();setTimeout(function(){c.close()},10);return!1});ViewerPanel.presentation_controls={id:"#pres_controls"};
ViewerPanel.presentation_controls.show=function(a){ViewerPanel.is_mobile||($(this.id).removeClass("hide"),$(this.id).css({width:Math.floor(a.width),top:Math.floor(a.height+20)}))};ViewerPanel.presentation_controls.hide=function(){$(this.id).addClass("hide");this.detach_up_and_down_keys_for_navigation();ViewerPanel.is_mobile&&($("#si_wrapper").addClass("hide"),$("#document_wrapper").removeClass("ab-center").removeAttr("style"))};
ViewerPanel.presentation_controls.next_or_prev_page_in_fullscreen=function(a){37==a.keyCode||38==a.keyCode?ViewerPanel.document.pdf_manager.prev_page():(39==a.keyCode||40==a.keyCode)&&ViewerPanel.document.pdf_manager.next_page();a.stopPropagation()};$("#viewer_presentation_control_next_slide").live("click",function(a){ViewerPanel.document.pdf_manager.next_page();return!1});$("#viewer_presentation_control_prev_slide").live("click",function(a){ViewerPanel.document.pdf_manager.prev_page();return!1});
$("#viewer_presentation_control_first_slide").live("click",function(a){ViewerPanel.document.pdf_manager.first_page();return!1});$("#viewer_presentation_control_last_slide").live("click",function(a){ViewerPanel.document.pdf_manager.last_page();return!1});ViewerPanel.presentation_controls.attach_up_and_down_keys_for_navigation=function(){$(document).bind("keydown",ViewerPanel.presentation_controls.next_or_prev_page)};
ViewerPanel.presentation_controls.detach_up_and_down_keys_for_navigation=function(){$(document).unbind("keydown",ViewerPanel.presentation_controls.next_or_prev_page)};ViewerPanel.presentation_controls.next_or_prev_page=function(a){38==a.keyCode?ViewerPanel.document.pdf_manager.prev_page():40==a.keyCode&&ViewerPanel.document.pdf_manager.next_page();a.stopPropagation()};
ViewerPanel.presentation_controls.attach_tap=function(){$("#si_wrapper").swipe({tap:function(a,c){$("#si_wrapper").addClass("hide");$(ViewerPanel.container_type+ViewerPanel.container_name).addClass("slideshow");$("#pres_controls").removeClass("hide");$("#document_wrapper").css("top","-44px");ViewerPanel.navigation.unattach_swipe();ViewerPanel.presentation_controls.attach_swipe();return!1}})};
ViewerPanel.presentation_controls.attach_swipe=function(){$("#pages").swipe({swipe:function(a,c,b,h,k,l){"left"==c?ViewerPanel.document.pdf_manager.next_page():"right"==c&&ViewerPanel.document.pdf_manager.prev_page();a.preventDefault();a.stopPropagation()},threshold:0})};ViewerPanel.presentation_controls.detach_swipe=function(){$("#pages").swipe("destroy")};ViewerPanel.comments={loader_id:"#comments_loader",toggle_comments_id:"#viewer_comment",mobile_comments_country_btn_id:"#mobile_comments_bar_toggle",comments_empty_id:"#comments_empty",comment_new_id:"#comment_new",comments_container_id:"#comments_container",comments_wrapper_id:"#comments_wrapper",comments_section_id:"#comments_section",comments_section_mobile_id:"#mobile_comments_bar_toggle",comment_new_text_id:"#comment_new_text",comment_new_placeholder_id:"#comment_new_placeholder",comments_count_sidebar_id:"#comments_count_sidebar",
reply_new_id:"#reply_new",reply_new_text_id:"#reply_new_text",reply_new_placeholder_id:"#reply_new_placeholder",player_timestamp_timer:"#player_timestamp_timer",contacts:!1,initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.loader=$(this.loader_id);this.toggle_comments=$(this.toggle_comments_id);this.mobile_comments_counter=$(this.mobile_comments_country_btn_id);this.comments_empty=$(this.comments_empty_id);this.comment_new=$(this.comment_new_id);
this.comments_container=$(this.comments_container_id);this.comments_wrapper=$(this.comments_wrapper_id);this.comments_section=$(this.comments_section_id);this.comments_section_mobile=$(this.comments_section_mobile_id);this.comment_new_text=$(this.comment_new_text_id);this.comment_new_placeholder=$(this.comment_new_placeholder_id);this.comments_count_sidebar=$(this.comments_count_sidebar_id);this.reply_new=$(this.reply_new_id);this.reply_new_text=$(this.reply_new_text_id);this.reply_new_placeholder=
$(this.reply_new_placeholder_id);this.player_timestamp_timer=$(this.player_timestamp_timer);this.attach_keys_with_comments_wrapper();this.attach_click_with_comments_wrapper();this.attach_tooltip(".icn-mention-comment");this.attach_paste_event(this.comment_new_text)},load_comments:function(a,c){$(ViewerPanel.container_type+ViewerPanel.sub_container_name).hasClass("hsd")&&($(ViewerPanel.container_type+ViewerPanel.container_name).removeClass("showing-comments"),a instanceof UploadingViewer||$(ViewerPanel.container_type+
ViewerPanel.sub_container_name).removeClass("hsd"));if(this._validate(a)){var b=this;this.timed_comments_timestamps=[];this.timed_comments_timestamps_second=[];this.timed_comments_timestamps_temp=[];this.comments_to_highlight=[];this.comments_multiple_timestamp=[];this.empty_comments_container();this.hide_comments_empty();this.dim_comment_new();this.comment_new_text.html("");this.comment_new_placeholder.removeClass("hide");this.reply_new_text.html("");this.reply_new_placeholder.removeClass("hide");
this.reset_comment_activity("comments");this.reset_comment_activity("reply");this.update_new_comment_width();var h={item_code:a.id};this.contacts||(h.include_user_contacts=!0);var k={};ViewerPanel.comments._at_custom_domain()&&(k.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"comments/get_parent_comments",data:Jmp.Helpers.get_secure_params(h),success:function(l){b.remove_dim_comment_new();if(b._validate(a)&&l.status){b.empty_comments_container();var m=parseInt(l.total_comments_and_replies_count);
b.set_comments_counter(m);b.show_hide_comments_empty(m);b.display_parent_comments(l.comments);b.show_media_comment_timestempt_timer();var n=[];"undefined"!=typeof l.contacts&&l.contacts.map(function(p){n.push({avatar_url:p.avatar_url,email:p.email,name:p.name.replace(/(^\s+|\s+$)/g,"")})});m=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.is_open()&&"video"===m.type&&(b.comments_list=l.comments,l.comments.map(function(p){b.timed_comments_timestamps_second.push(Math.floor(p.media_timestamp));
for(var r=Math.floor(p.media_timestamp);r<Math.floor(p.media_timestamp)+5;r++)-1===b.timed_comments_timestamps.indexOf(r)&&b.timed_comments_timestamps.push(r)}),ViewerPanel.media.loadedMetaData&&ViewerPanel.comments.show_timed_comments());b.contacts||(b.contacts=n);b.attach_contacts_as_mentions(b.comment_new_text)}c||b.display_locally_saved_comments();Socket.join_item(a.id,"file")},xhrFields:k})}},formatTime:function(a){var c;var b=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.is_open()&&
"video"===b.type?c=document.getElementById("video_player_html5").duration:ViewerPanel.is_open()&&"audio"===b.type&&(c=ViewerPanel.media.audio_player_obj.getDuration());if(3599<a||3599<c)return c=Math.floor(a/60/60),b=Math.floor(a/60)-60*c,a=Math.floor(a%60),c.toString().padStart(1,"0")+":"+b.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0");b=Math.floor(a/60);a=Math.floor(a%60);return(10<=b?b:"0"+b)+":"+(10<=a?a:"0"+a)},show_media_comment_timestempt_timer:function(){var a=ViewerPanel.viewers_collection.get_current_viewer();
"video"===a.type||"audio"===a.type?$(".comment-media-time").show():$(".comment-media-time").hide()},update_new_comment_width:function(){var a=ViewerPanel.viewers_collection.get_current_viewer();if("video"===a.type||"audio"===a.type){$(".comment-new").addClass("player_timestamp_timer_style");var c;ViewerPanel.is_open()&&"video"===a.type?c=null!=ViewerPanel.media.audio_player_obj&&ViewerPanel.media.video_player_obj.getDuration()&&void 0!==ViewerPanel.media.video_player_obj.getDuration()?ViewerPanel.media.video_player_obj.getDuration():
document.getElementById("video_player_html5").duration:ViewerPanel.is_open()&&"audio"===a.type&&null!=ViewerPanel.media.audio_player_obj&&ViewerPanel.media.audio_player_obj.getDuration()&&void 0!==ViewerPanel.media.audio_player_obj.getDuration()&&(c=ViewerPanel.media.audio_player_obj.getDuration());3599<c?($("#comment_new_placeholder").css("left","110px"),$("#comment_new_text").css("width","calc(100% - 70px)")):$("#comment_new_placeholder").css("left","96px");"video"===a.type?null!=ViewerPanel.media.video_player_obj&&
null!=document.getElementById("video_player_html5").duration&&3599<document.getElementById("video_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"}):"audio"===a.type&&(null!=ViewerPanel.media.audio_player_obj&&null!=document.getElementById("audio_player_html5").duration&&3599<document.getElementById("audio_player_html5").duration&&
$("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"}));$("#player_timestamp_timer").show();var b=this;Jmp.Helpers.timeoutRef=window.setInterval(function(){"video"===a.type&&null!=ViewerPanel.media.video_player_obj?($("#player_timestamp_timer").text(b.formatTime(document.getElementById("video_player_html5").currentTime)),$("#player_timestamp_timer").attr("data-media_timestamp",document.getElementById("video_player_html5").currentTime)):
"audio"===a.type&&null!=ViewerPanel.media.audio_player_obj&&($("#player_timestamp_timer").text(b.formatTime(ViewerPanel.media.audio_player_obj.getCurrentTime())),$("#player_timestamp_timer").attr("data-media_timestamp",ViewerPanel.media.audio_player_obj.getCurrentTime()))},500)}else window.clearInterval(Jmp.Helpers.timeoutRef),$(".comment-new").removeClass("player_timestamp_timer_style"),$("#comment_new_text").css({width:"auto",float:"none","padding-left":"8px"}),$("#player_timestamp_timer").hide(),
$("#comment_new_placeholder").css("left","50px");$("#player_timestamp_timer").text("");$("#player_timestamp_timer").on("shown.bs.popover",function(){for(var h=document.getElementsByClassName("navigate_pricing"),k=0;k<h.length;k++)h[k].onclick=function(){window.location.href=WS_PREFIX+"/pricing";target="_blank"}})},stop_interval_on_viewer_close:function(){window.clearInterval(Jmp.Helpers.timeoutRef)},show_loader:function(){this.loader.removeClass("hide")},hide_loader:function(){this.loader.addClass("hide")},
show_hide_comments_empty:function(a){a?this.hide_comments_empty():this.show_comments_empty()},show_comments_empty:function(){this.comments_empty.removeClass("hide")},remove_dim_comment_new:function(){this.comment_new.removeClass("dim-light")},dim_comment_new:function(){this.comment_new.addClass("dim-light")},hide_comments_empty:function(){this.comments_empty.addClass("hide")},display_parent_comments:function(a){for(var c=a.length,b=0;b<c;b++){var h=a[b],k=this.single_comment_template(h);this.comments_container.append(k);
1<parseInt(h.replies_count)&&(k=this.load_more_replies_template(h),$("#comment_card_"+h.id).addClass("load_more_replies").append(k));h.latest_reply?(k=this.single_reply_template(h.latest_reply),$("#comment_card_"+h.id).append(k),this.add_reply_button(h.latest_reply.id)):this.add_reply_button(h.id)}},single_comment_template:function(a,c){var b=ViewerPanel.viewers_collection.get_current_viewer();c="<div class='comment-card'>"+this.basic_single_comment_template(a,c);c=$(c+"</div>");c.attr("id","comment_card_"+
a.id).attr("data-id",a.id);c.find(".comment").attr("id","comment_"+a.id).attr("data-id",a.id);"video"===b.type||"audio"===b.type?(c.find(".comment-media-time").html(this.formatTime(a.media_timestamp)),c.attr("data-timedcommenttime",a.media_timestamp),a.annotation_json&&(b=a.annotation_json?JSON.parse(a.annotation_json)[0].color:"",c.append(`<span class="comment_ann_icn" style="background-color: ${b}"></span>`))):c.find(".comment-media-time").css("display","none");c.find(".comment-text").html(a.comment);
c.find(".commenter-time").text(a.comment_time);c.find(".commenter-name").text(a.user.first_name+" "+a.user.last_name);c.find(".c-avatar").append(a.user.avatar_hash);c.find(".reply-button").attr("data-id",a.id).attr("data-parent-comment-id",a.id);a.is_super_owner||a.is_owner?c.find(".comment-delete").attr("data-id",a.id):c.find(".comment-delete").remove();return c},single_reply_template:function(a){var c=this.basic_single_comment_template();c=$(c);c.attr("id","comment_"+a.id).attr("data-id",a.id).addClass("reply-to");
c.find(".comment-text").html(a.comment);c.find(".commenter-time").text(a.comment_time);c.find(".commenter-name").text(a.user.first_name+" "+a.user.last_name);c.find(".c-avatar").append(a.user.avatar_hash);c.find(".reply-button").attr("data-id",a.id).attr("data-parent-comment-id",a.parent_comment_id);c.find(".comment-media-time").remove();a.is_super_owner||a.is_owner?c.find(".comment-delete").attr("data-id",a.id):c.find(".comment-delete").remove();return c},add_reply_button:function(a){$("#comment_"+
a).find(".reply-button").removeClass("hide")},hide_reply_button:function(a){$("#comment_"+a).find(".reply-button").addClass("hide")},hide_reply_button_from_container:function(a){$("#comment_card_"+a).find(".reply-button").addClass("hide")},empty_comments_container:function(){this.comments_container.html("")},reset_comment_activity:function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();"comment"===a?($("#comment_new_text").show(),$("#comment_new_text").html(""),ViewerPanel.comments.comment_new_placeholder.removeClass("hide"),
$("#comment_person_icon").show(),$("#comments_activity").slideUp(100),$("#handle_annotation").css("bottom","17px"),$("#comment_person_icon").css("bottom","24px"),"undefined"==typeof c||"video"!==c.type&&"audio"!==c.type||("video"===c.type?null!=ViewerPanel.media.video_player_obj&&3599<document.getElementById("video_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",
float:"right","padding-left":"0px"}):"audio"===c.type&&(null!=ViewerPanel.media.audio_player_obj&&3599<document.getElementById("audio_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"}))),$("#guest_user_name").addClass("hide")):"reply"===a?($("#reply_new_text").show(),$("#reply_new_text").html(""),
ViewerPanel.comments.reply_new_placeholder.removeClass("hide"),$(".icn-mention-reply").show(),$("#comments_activity_2").slideUp(100)):"guest"===a?(this.comment_new_text.show(),$("#comment_person_icon").show(),$("#guest_user_name").addClass("hide"),this.comment_new_text.focus(),a=this.comment_new_text.text().length,this.comment_new_text.caret("pos",a),$("#player_timestamp_timer").show(),"undefined"==typeof c||"video"!==c.type&&"audio"!==c.type||("video"===c.type?null!=ViewerPanel.media.video_player_obj&&
3599<document.getElementById("video_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"}):"audio"===c.type&&(null!=ViewerPanel.media.audio_player_obj&&3599<document.getElementById("audio_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",
float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"})))):"guest_reply"===a&&(this.reply_new_text.show(),$("#player_timestamp_timer").show(),$(".icn-mention-reply").show(),$("#guest_user_name_reply").addClass("hide"),this.reply_new_text.focus(),c=this.reply_new_text.text().length,this.reply_new_text.caret("pos",c))},update_comment_area_width_for_media_files:function(){var a=ViewerPanel.viewers_collection.get_current_viewer();
if("video"===a.type||"audio"===a.type)0===$("#comment_new_text").text().length?"video"===a.type?null!=ViewerPanel.media.video_player_obj&&3599<document.getElementById("video_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"}):"audio"===a.type&&(null!=ViewerPanel.media.audio_player_obj&&3599<document.getElementById("audio_player_html5").duration?
($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"auto",float:"none","padding-left":"8px"})},attach_keys_with_comments_wrapper:function(){$("#comment_new_text").unbind("click").bind("click",function(a){ViewerPanel.comments.pause_the_video_on_comment_typing()});this.comments_wrapper.unbind("keydown").bind("keydown",
function(a){a.stopPropagation()});this.comments_wrapper.unbind("keyup").bind("keyup",function(a){ViewerPanel.comments.started_typing_comment=!0;a.stopPropagation();var c=$(a.target);c.hasClass("comment_new_text")?(0===$("#comment_new_text").text().length&&$("#comment_new_text").html(""),ViewerPanel.comments.update_comment_area_width_for_media_files(),8===a.which&&$("#comment_new_text span").hasClass("atwho-query")&&($("span.atwho-query").remove(),$(".atwho-view").hide(),$(".atwho-inserted").length&&
($("span.atwho-query").remove(),$(".atwho-view").hide())),0==$("#comment_new_text").text().length?($("#comments_activity").slideUp(100),$("#handle_annotation").css("bottom","17px"),$("#comment_person_icon").css("bottom","24px"),ViewerPanel.comments.comment_new_placeholder.removeClass("hide")):(ViewerPanel.comments.comment_new_placeholder.addClass("hide"),$("#comments_activity").slideDown(100),$("#handle_annotation").css("bottom","7px"),$("#comment_person_icon").css("bottom","14px"))):c.hasClass("reply_new_text")&&
(0===$("#reply_new_text").text().length&&$("#reply_new_text").html(""),8===a.which&&$("#reply_new_text span").hasClass("atwho-query")&&($("span.atwho-query").remove(),$(".atwho-view").hide(),$(".atwho-inserted").length&&($("span.atwho-query").remove(),$(".atwho-view").hide())),0==$("#reply_new_text").text().length?($("#comments_activity_2").slideUp(100),ViewerPanel.comments.reply_new_placeholder.removeClass("hide")):(ViewerPanel.comments.reply_new_placeholder.addClass("hide"),$("#comments_activity_2").slideDown(100)),
$("#post_reply").unbind("click").bind("click",function(){ViewerPanel.comments.handle_new_reply();if("undefined"!=typeof is_valid_owner&&"false"==is_valid_owner)return!1;$("#comments_activity_2").slideUp(100)}),$("#cancel_reply").unbind("click").bind("click",function(){"undefined"!=typeof is_valid_owner&&"false"==is_valid_owner?$("#guest_user_name_reply").hasClass("hide")?ViewerPanel.comments.reset_comment_activity("reply"):ViewerPanel.comments.reset_comment_activity("guest_reply"):ViewerPanel.comments.reset_comment_activity("reply")}))});
$("#post_comment").unbind("click").bind("click",function(){ViewerPanel.comments.handle_new_comment();if("undefined"!=typeof is_valid_owner&&"false"==is_valid_owner||"system"==UTYPE)return!1});$("#cancel_comment").unbind("click").bind("click",function(){"undefined"!=typeof is_valid_owner&&"false"==is_valid_owner?$("#guest_user_name").hasClass("hide")?ViewerPanel.comments.reset_comment_activity("comment"):ViewerPanel.comments.reset_comment_activity("guest"):ViewerPanel.comments.reset_comment_activity("comment");
1<parseInt(O_PLANID)&&ViewerPanel.comments.reset_comment_activity("comment");ViewerPanel.annotation.reset_annotation(!0)});$("#comment_new_text").live("focusin",function(){$("#leave_comment_popover").removeClass("hide").css({top:$(this).offset().top-100+"px"})})},enable_guest_user_to_comment:function(a){1===a?(this.comment_new_text.hide(),$("#player_timestamp_timer").hide(),$("#comment_person_icon").hide(),$("#guest_user_name").val(""),$("#guest_user_name").removeClass("hide"),$("#guest_user_name").focus()):
2===a&&(this.reply_new_text.hide(),$("#player_timestamp_timer").hide(),$(".icn-mention-reply").hide(),$("#guest_user_name_reply").val(""),$("#guest_user_name_reply").removeClass("hide"),$("#guest_user_name_reply").focus())},pause_the_video_on_comment_typing:function(){var a=ViewerPanel.viewers_collection.get_current_viewer();"video"===a.type?(ViewerPanel.media.video_player_obj.pause(),$("#time_stmp_coments_wrpr").removeClass("stick_to_bottom"),$(".mejs__currenttime").text(this.formatTime(document.getElementById("video_player_html5").currentTime))):
"audio"===a.type&&(ViewerPanel.media.audio_player_obj.pause(),$(".mejs__currenttime").text(this.formatTime(document.getElementById("audio_player_html5").currentTime)))},basic_single_comment_template:function(a,c){ViewerPanel.viewers_collection.get_current_viewer();c=" <div class='comment'> \t\t\t\t  <div class='commenter-photo pull-left' > \t\t\t\t\t  <div class='c-avatar' > \t\t\t\t\t  </div> \t\t\t\t  </div> \t\t\t\t  <div class='comment-body pull-left'> \t\t\t\t\t  <img class='comment-delete icn-delete pull-right' src='/res/images/spacer.gif'>";
a&&a.is_owner&&(c+="<span class='comment-edit'><svg width='14' height='14' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M11.1002 4.04801L11.4525 4.40031L11.806 4.04926L12.6322 3.22895L12.6335 3.2277C12.8948 2.96635 13.0699 2.63699 13.08 2.26752C13.0903 1.89394 12.9298 1.55543 12.6655 1.28701L12.3023 0.91796L12.3022 0.917872C12.0299 0.641322 11.6841 0.485729 11.3082 0.501021C10.9411 0.515955 10.6117 0.690834 10.3497 0.944961L10.3497 0.944937L10.3456 0.949012L9.52529 1.76347L9.1692 2.11701L9.52402 2.47184L11.1002 4.04801ZM3.40843 12.3951L3.51013 12.357L3.58687 12.2802L11.04 4.81531L11.393 4.46176L11.0397 4.10848L9.46355 2.53231L9.10972 2.17848L8.75616 2.53259L1.30304 9.99743L1.22624 10.0743L1.18831 10.1762L0.555495 11.8754L0.555453 11.8754L0.553186 11.8818C0.286392 12.6288 1.03493 13.2793 1.70037 13.0349L1.70038 13.0349L1.70335 13.0338L3.40843 12.3951Z' stroke='#949DA2'/></svg></span>");
return c+"<div class='comment-top-bar'> \t\t\t\t\t\t  <div class='commenter-name pull-left'></div> \t\t\t\t\t\t  <div class='commenter-time pull-left'></div> \t\t\t\t\t  </div>\t\t  <div class='reply_media_timestamp_container'><div class='comment-media-time'></div><div class='comment-text'> \t\t\t\t\t\t\t  <span></span> \t\t\t\t\t\t  </div> \t\t\t\t\t  </div>\t\t\t\t\t\t  <a class='reply-button hide'>Reply</a> \t\t\t\t  </div> \t\t\t  </div>  "},load_more_replies_template:function(a){var c=" \t\t\t\t\t  <div class='reply-break break_text_replies'> \t\t\t\t\t\t  <a href='#' style='padding-left: 7px;' class='load_more_replies'></a> \t\t\t\t\t  </div>  ",
b=parseInt(a.replies_count)-1;c=$(c);c.attr("id","comment_load_more_replies_"+a.id).attr("data-id",a.id);c.find(".load_more_replies").attr("data-id",a.id).text("Load "+Jmp.Helpers.get_string_based_on_count(b,"more reply","more replies",!0));return c},attach_click_with_comments_wrapper:function(){this.comments_wrapper.unbind("click").bind("click",function(a){"comment_new_text"!==a.target.id&&$("#leave_comment_popover").addClass("hide");a=$(a.target);if(a.hasClass("load_more_replies"))ViewerPanel.comments.load_more_replies(a);
else if(a.hasClass("reply-button"))ViewerPanel.comments.append_reply(a.attr("data-parent-comment-id"));else if(a.hasClass("comment-delete"))ViewerPanel.comments.handle_comment_delete(a);else if(a.parent().hasClass("comment-edit"))ViewerPanel.comments.handle_comment_edit(a);else if(a.hasClass("cancel_edit_comment"))ViewerPanel.comments.handle_edit_cancel_comment(a);else if(a.hasClass("post_edit_comment"))ViewerPanel.comments.handle_edit_post_comment(a);else if(a.hasClass("comment-media-time"))ViewerPanel.comments.handle_media_forward(a);
else if(a.hasClass("comment-body"))ViewerPanel.comments.highlight_annotated_comment(a);else if(a.hasClass("icn-mention-comment"))ViewerPanel.comments.handle_clicked_mention_for_comment();else if(a.hasClass("icn-mention-comment_edit"))ViewerPanel.comments.handle_clicked_mention_for_comment_edit(a);else if(a.hasClass("icn-mention-reply"))ViewerPanel.comments.handle_clicked_mention_for_reply();else if(a.hasClass("comment_link")||a.hasClass("link"))return;return!1})},load_more_replies:function(a){a.text("Loading...");
var c=ViewerPanel.viewers_collection.get_current_viewer(),b=a.attr("data-id");$.post(WS_PREFIX+"/comments/get_comment_replies",Jmp.Helpers.get_secure_params({item_code:c.id,parent_comment_id:b}),function(h){if(h.status){$("#comment_load_more_replies_"+b).remove();var k=$("#comment_card_"+b);k.removeClass("load_more_replies").find(".reply-to").remove();h=h.replies;for(var l=h.length,m=0;m<l;m++){var n=ViewerPanel.comments.single_reply_template(h[m]);k.append(n)}ViewerPanel.comments.add_reply_button(h[l-
1].id);k.find(".comment-reply").length&&k.append(ViewerPanel.comments.reply_new)}})},handle_media_forward:function(a){a=$(a).closest(".comment-card").attr("data-id");$(".in_video_comment_single").find(`[data-id='${a}']`).trigger("click")},handle_post_annotated_comment:function(){ViewerPanel.comments.handle_new_comment()},handle_update_annotation:function(a){var c=$("#comment_"+a).find(".comment-text").html(),b=ViewerPanel.viewers_collection.get_current_viewer();c=c.replace(/\n/g,"<br>").replace(/<div>/g,
"<br>").replace(/<\/div>/g,"").replace(/\s\s+/g,"").replace(/<p>/g,"<br>").replace(/<\/p>/g,"").replace(/^\s*<br\s*\/?>|<br\s*\/?>\s*$/g,"").replace(/(<div><br><\/div>)/g,"").replace(/(<br>)+/g,"<br>");if(""==$.trim(c))return Jmp.App.Notifications.display_notification({type:"error",message:"Oops! Comment cannot be empty."}).close_notification(),!1;var h=+this.player_timestamp_timer.attr("data-media_timestamp"),k="";"undefined"!=typeof $("#guest_user_name")&&"undefined"!=typeof $("#guest_user_name").data("posted")&&
"1"==$("#guest_user_name").data("posted")&&(k=""!=$("#guest_user_name").val()?$("#guest_user_name").val():"Anonymous user");$.ajax({type:"POST",url:BASEURL_WS+"comments/update_comment",data:Jmp.Helpers.get_secure_params({comment_id:a,comment:c,player_timestamp:h,guest_name:k}),success:function(l){l.status&&1==l.status&&(0<ViewerPanel.annotation.shapes.length&&(l=ViewerPanel.annotation.shapes[0].color,$(".in_video_comment_single").find(`[data-id='${a}']`).append(`<span class="annotated_icn_wrpr" style="background-color: ${l}"></span>`)),
l=$("#comment_"+a).find(".comment-text").html(),$("#timed_comment_"+a).find("p").text(`${l}`),$("#comment_"+a).removeClass("editing_comment"),$("#comments_activity_edit").remove(),ViewerPanel.comments.load_comments(b),$("#comments_activity").slideUp(100),$("#comment_person_icon").css("bottom","24px"),"video"===b.type&&ViewerPanel.annotation.reset_annotation())}})},handle_new_comment:function(){var a=this,c=a.comment_new_text.html(),b=ViewerPanel.viewers_collection.get_current_viewer(),h=+a.player_timestamp_timer.attr("data-media_timestamp"),
k="";"undefined"!=typeof $("#guest_user_name")&&"undefined"!=typeof $("#guest_user_name").data("posted")&&"1"==$("#guest_user_name").data("posted")&&(k=""!=$("#guest_user_name").val()?$("#guest_user_name").val():"Anonymous user");c=c.replace(/\n/g,"<br>").replace(/<div>/g,"<br>").replace(/<\/div>/g,"").replace(/\s\s+/g,"").replace(/<p>/g,"<br>").replace(/<\/p>/g,"").replace(/^\s*<br\s*\/?>|<br\s*\/?>\s*$/g,"").replace(/(<div><br><\/div>)/g,"").replace(/(<br>)+/g,"<br>");let l=ViewerPanel.annotation.shapes.map(({color:n,
id:p,type:r,x1:q,y1:u,x2:v,y2:x,points:y})=>{q=parseFloat(q).toFixed(2);u=parseFloat(u).toFixed(2);v=parseFloat(v).toFixed(2);x=parseFloat(x).toFixed(2);return{color:n,id:p,type:r,x1:q,y1:u,x2:v,y2:x,points:y}});if(""==$.trim(c))return Jmp.App.Notifications.display_notification({type:"error",message:"Oops! Comment cannot be empty."}).close_notification(),!1;this.disable_comment_new_text();var m={};ViewerPanel.comments._at_custom_domain()&&(m.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+
"comments/save_comment",data:Jmp.Helpers.get_secure_params({item_code:b.id,comment:c,player_timestamp:h,guest_name:k,annotation_json:l}),success:function(n){a.comment_new_text.removeClass("dim");if(n.status)if(-1==n.status)a.enable_comment_new_text(),a.save_comment_locally({comment:c}),a.enable_guest_user_to_comment(1),$("#guest_user_name").data("posted","1");else if(-2==n.status)a.enable_comment_new_text(),a.display_comments_limit_exceeded_popup(n.is_owner);else{$("#comment_new_text").html("");$("#comments_activity").slideUp(100);
$("#handle_annotation").removeClass("ann_active");$("#handle_annotation").css("bottom","17px");$("#comment_person_icon").css("bottom","24px");if("video"===b.type||"audio"===b.type)if("video"===b.type){ViewerPanel.comments.load_comments(b,!0);ViewerPanel.media.show_hide_controls_bar();ViewerPanel.media.makePlayableCondition();a.include_new_comment(n.comment);a.timed_comments_timestamps_second.push(Math.floor(n.comment.media_timestamp));for(var p=Math.floor(n.comment.media_timestamp);p<Math.floor(n.comment.media_timestamp)+
5;p++)-1===a.timed_comments_timestamps.indexOf(p)&&a.timed_comments_timestamps.push(p);null!=ViewerPanel.media.video_player_obj&&3599<document.getElementById("video_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right","padding-left":"0px"});0<ViewerPanel.annotation.shapes.length&&(p=ViewerPanel.annotation.shapes[0].color,
$(".in_video_comment_single:last").find(".msgIcn").append(`<span class="annotated_icn_wrpr" style="background-color: ${p}"></span>`));ViewerPanel.annotation.reset_annotation()}else"audio"===b.type&&(null!=ViewerPanel.media.audio_player_obj&&3599<document.getElementById("audio_player_html5").duration?($("#comment_new_placeholder").css("left","110px;"),$("#comment_new_text").css({width:"calc(100% - 70px)",float:"right","padding-left":"0px"})):$("#comment_new_text").css({width:"calc(100% - 57px)",float:"right",
"padding-left":"0px"}));a.comment_new_placeholder.removeClass("hide");p=parseInt(n.total_comments_and_replies_count);a.set_comments_counter(p);a.show_hide_comments_empty(p);p=a.single_comment_template(n.comment,!0);a.comments_container.append(p);a.add_reply_button(n.comment.id);$("#cancel_comment").trigger("click");a.enable_comment_new_text();a.scroll_to_comment(n.comment.id);Socket.push("comment",{id:n.comment.id,state:"added",item:{code:b.id,type:"file"},comment:n.comment})}},xhrFields:m})},handle_new_reply:function(){var a=
this,c=this.reply_new.attr("data-parent-comment-id"),b=a.reply_new_text.html(),h="";"undefined"!=typeof $("#guest_user_name_reply")&&"undefined"!=typeof $("#guest_user_name_reply").data("posted")&&"1"==$("#guest_user_name_reply").data("posted")&&(h=""!=$("#guest_user_name_reply").val()?$("#guest_user_name_reply").val():"Anonymous user");b=b.replace(/\n/g,"<br>").replace(/<div>/g,"<br>").replace(/<\/div>/g,"").replace(/<p>/g,"<br>").replace(/<\/p>/g,"").replace(/^\s*<br\s*\/?>|<br\s*\/?>\s*$/g,"").replace(/(<div><br><\/div>)/g,
"").replace(/(<br>)+/g,"<br>");if(""==$.trim(b))return Jmp.App.Notifications.display_notification({type:"error",message:"Oops! Reply cannot be empty."}).close_notification(),!1;var k=ViewerPanel.viewers_collection.get_current_viewer();this.disable_reply_new_text();var l={};ViewerPanel.comments._at_custom_domain()&&(l.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"comments/save_comment",data:Jmp.Helpers.get_secure_params({item_code:k.id,comment:b,parent_comment_id:c,guest_name:h}),success:function(m){if(m.status)if(-1==
m.status)a.enable_reply_new_text(),a.save_comment_locally({comment:b,parent_comment_id:c}),a.enable_guest_user_to_comment(2),$("#guest_user_name_reply").data("posted","1");else if(-2==m.status)a.enable_reply_new_text(),a.display_comments_limit_exceeded_popup(m.is_owner);else{a.reply_new_text.html("");a.reply_new_placeholder.removeClass("hide");var n=parseInt(m.total_comments_and_replies_count);a.set_comments_counter(n);0<$("#timed_comment_"+c+" .reply_wrpr").length?(n=$("#timed_comment_"+c+" .reply_wrpr").text().replace(/\D/g,
""),$("#timed_comment_"+c+" .reply_wrpr").text(parseInt(+n+1)+" + other comment")):$("#timed_comment_"+c+" .comment_wrpr").append("<span class='reply_wrpr'>1 + other comment</span>");n=a.single_reply_template(m.reply);$("#comment_card_"+c).append(n);a.hide_reply_button_from_container(m.reply.parent_comment_id);a.add_reply_button(m.reply.id);$("#cancel_reply").trigger("click");a.enable_reply_new_text();a.reply_new.addClass("hide");a.comments_wrapper.append(a.reply_new);Socket.push("comment",{parent:c,
id:m.reply.id,state:"added",item:{code:k.id,type:"file"},comment:m.reply})}},xhrFields:l})},disable_comment_new_text:function(){this.comment_new_text.addClass("dim").removeAttr("contenteditable")},enable_comment_new_text:function(){this.comment_new_text.removeClass("dim").attr("contenteditable","true")},disable_reply_new_text:function(){this.reply_new_text.addClass("dim").removeAttr("contenteditable")},enable_reply_new_text:function(){this.reply_new_text.removeClass("dim").attr("contenteditable",
"true")},append_reply:function(a){$("#comment_card_"+a).append(this.reply_new);this.reply_new.attr("data-parent-comment-id",a).removeClass("hide");this.reply_new_text.focus();this.attach_tooltip(".icn-mention-reply");this.attach_contacts_as_mentions(this.reply_new_text);this.attach_paste_event(this.reply_new_text)},handle_comment_edit:function(a){a=a.closest(".comment-card").attr("data-id");var c=$("#comment_"+a);ViewerPanel.viewers_collection.get_current_viewer();$("#comments_activity_edit").remove();
c.find(".comment-text").addClass("edit_comment_input").attr("contenteditable","true").focus();document.execCommand("selectAll",!1,null);document.getSelection().collapseToEnd();c.find(".reply_media_timestamp_container").append('<div class="comment_acitivty_wrapper_edit" id="comments_activity_edit">\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t  <a href="" class="btn btn-blue post_edit_comment">Post</a>\n\t\t\t\t\t\t\t\t\t\t\t  <a href="" class="cancel_edit_comment">Cancel</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div id="comment_person_icon_second" style="bottom: 10px;" class="icn-mention icn icn-mention-comment_edit pull-right" title="@mention someone"></div>\n\t\t\t\t\t\t\t\t\t\t  </div>');
c.addClass("editing_comment");c.find(".reply-button").addClass("hide");ViewerPanel.comments.attach_contacts_as_mentions(c.find(".comment-text"));ViewerPanel.media.startedPlaying&&$(".msgIcn[data-id='"+a+"']").trigger("click")},highlight_annotated_comment:function(a){a=a.closest(".comment-card").attr("data-id");ViewerPanel.media.startedPlaying&&$(".msgIcn[data-id='"+a+"']").trigger("click")},handle_edit_cancel_comment:function(a){a=a.closest(".comment-card").attr("data-id");a=$("#comment_"+a);$("#comments_activity_edit").remove();
a.find(".reply-button").removeClass("hide");a.removeClass("editing_comment");a.find(".comment-text").removeClass("edit_comment_input").removeAttr("contenteditable")},handle_edit_post_comment:function(a){a=a.closest(".comment-card").attr("data-id");$("#comment_"+a);ViewerPanel.comments.handle_update_annotation(a)},handle_annotation_edit:function(a){a.closest(".comment-card").attr("data-id");ViewerPanel.media.startedPlaying||$(".mejs__overlay-button").addClass("hide")},handle_comment_delete:function(a){var c=
a.attr("data-id"),b=$("#comment_"+c),h=b.hasClass("reply-to")?"reply":"comment",k=ViewerPanel.viewers_collection.get_current_viewer();Jmp.App.Lightbox.show({type:"delete_comment",comment_type:h},function(l){$(this).text("Deleting...").addClass("disabled");l={};ViewerPanel.comments._at_custom_domain()&&(l.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"comments/delete_comment",data:Jmp.Helpers.get_secure_params({comment_id:c}),success:function(m){m.status?(m=parseInt(m.total_comments_and_replies_count),
ViewerPanel.comments.set_comments_counter(m),ViewerPanel.comments.show_hide_comments_empty(m),"reply"==h?(b.find(".reply-button").hasClass("hide")||ViewerPanel.comments.add_reply_button(b.prev(".comment").attr("data-id")),b.remove()):$("#comment_card_"+c).remove(),"video"===k.type&&ViewerPanel.comments.delete_timed_comment(c),Socket.push("comment",{id:c,state:"deleted",item:{code:k.id,type:"file"},comment_type:h})):Jmp.App.Notifications.display_notification({type:"error",message:"An error occurred while deleting the comment"}).close_notification();
Jmp.App.Lightbox.hide()},xhrFields:l})})},add_comment_real_time:function(a){if(ViewerPanel.is_open()&&ViewerPanel.viewers_collection.get_current_viewer().id==a.item.code){var c=ViewerPanel.comments.get_comments_counter()+1;ViewerPanel.comments.set_comments_counter(c);ViewerPanel.comments.show_hide_comments_empty(c);if("undefined"==typeof is_valid_owner||"undefined"!=typeof is_valid_owner&&"false"==is_valid_owner)a.comment.is_super_owner=a.comment.is_owner=!1;if("0"==a.comment.parent_comment_id)c=
ViewerPanel.comments.single_comment_template(a.comment),ViewerPanel.comments.comments_container.append(c),ViewerPanel.comments.add_reply_button(a.comment.id);else if(c=$("#comment_card_"+a.comment.parent_comment_id),c.length){var b=ViewerPanel.comments.single_reply_template(a.comment);c.append(b);ViewerPanel.comments.hide_reply_button_from_container(a.comment.parent_comment_id);ViewerPanel.comments.add_reply_button(a.comment.id)}}},delete_comment_real_time:function(a){if(ViewerPanel.is_open()&&ViewerPanel.viewers_collection.get_current_viewer().id==
a.item.code){var c=$("#comment_"+a.id);c.length&&("comment"==a.comment_type?$("#comment_card_"+a.id).remove():(c.find(".reply-button").hasClass("hide")||ViewerPanel.comments.add_reply_button(c.prev().attr("data-id")),c.remove()));a=ViewerPanel.comments.get_comments_counter()-1;ViewerPanel.comments.set_comments_counter(a);ViewerPanel.comments.show_hide_comments_empty(a)}},display_login_register_popup:function(a){a.item_id=a.item_code+ViewerPanel.dom_parser.url_suffix_address_bar;a.item_type="file";
a.item_parent_id=a.item_code;a.type="item_comment";a.sign_up_origin="item_comment";$.ajax({type:"POST",url:BASEURL_WS+"/comments/lr",data:Jmp.Helpers.get_secure_params(a),success:function(c){Jmp.App.Lightbox.show({type:"signup_form",item_name:"",login_form:c.login_form,the_item_type:"file",register_form:c.register_form});$("#modal div.modal-dialog").addClass("modal-signup promotionalDialog signupPupupWithLogin");$("#modal div.leftImgContainer").addClass("signupPupupWithLogin");$("#modal").addClass("modal-fullscreen");
$("#the_sign_up").find("#firstName").focus().select()}})},save_comment_locally:function(a){"undefined"!=typeof Storage&&"undefined"!=typeof sessionStorage&&sessionStorage.setItem("item_comment",JSON.stringify(a))},display_locally_saved_comments:function(){if("undefined"!=typeof Storage&&"undefined"!=typeof sessionStorage){var a=sessionStorage.getItem("item_comment");a&&(a=JSON.parse(a),a.parent_comment_id?(this.append_reply(a.parent_comment_id),this.reply_new_placeholder.addClass("hide"),this.reply_new_text.html(a.comment)):
(this.comment_new_placeholder.addClass("hide"),this.comment_new_text.html(a.comment)),sessionStorage.removeItem("item_comment"))}},attach_contacts_as_mentions:function(a){var c={at:"@",data:this.contacts,displayTpl:"<li><img class='avatar' src='${avatar_url}'/><a>${name}</a><small>${email}</small></li>",insertTpl:"<span class='mention' data-user='email:${email}:email'>${name}</span>",limit:3,callbacks:{filter:function(b,h,k){var l;k=[];var m=h.length;if(b){for(l=0;l<m;l++){var n=h[l];~(new String(n.name)).toLowerCase().indexOf(b.toLowerCase())?
(k.push(n),n.filter_key="name"):~(new String(n.email)).toLowerCase().indexOf(b.toLowerCase())&&(k.push(n),n.filter_key="email")}0==k.length&&k.push({displayCustomMessage:!0,type:"no_match_found",message:"No person found"})}else k.push({displayCustomMessage:!0,type:"initial_state",message:"Type name or email address"});return k},sorter:function(b,h,k){var l;if(!b)return h;if(1<=h.length){var m=h[0];if(m.displayCustomMessage)return h}k=[];var n=0;for(l=h.length;n<l;n++)m=h[n],m.atwho_order=(new String(m[m.filter_key])).toLowerCase().indexOf(b.toLowerCase()),
-1<m.atwho_order&&k.push(m);return k.sort(function(p,r){return p.atwho_order-r.atwho_order})},tplEval:function(b,h){var k=b;try{return"string"!==typeof b&&(k=b(h)),h.displayCustomMessage&&(k="<li class='displayCustomMessage' data-type=${type}>${message}</li>"),k.replace(/\$\{([^\}]*)\}/g,function(l,m,n){return h[m]})}catch(l){return""}}}};"string"===typeof is_valid_owner&&"false"!==is_loggedin_user&&a.atwho(c)},handle_clicked_mention_for_comment:function(){this.comment_new_placeholder.addClass("hide");
this.handle_clicked_mention_for_comment_or_reply(this.comment_new_text)},handle_clicked_mention_for_comment_edit:function(a){a=a.parent().prev();this.handle_clicked_mention_for_comment_or_reply(a)},handle_clicked_mention_for_reply:function(){this.reply_new_placeholder.addClass("hide");this.handle_clicked_mention_for_comment_or_reply(this.reply_new_text)},handle_clicked_mention_for_comment_or_reply:function(a){if(0==a.text().length)a.text("@").focus();else{var c=a.html();a.html(c+" @").focus()}c=a.text().length;
a.caret("pos",c);a.trigger("keyup");$(a).animate({scrollTop:$(a).height()},200)},empty_hide_components_during_navigation:function(){this.empty_comments_counter();this.empty_comments_container();this.hide_comments_empty();this.dim_comment_new()},get_comments_counter:function(){return parseInt(this.comments_count_sidebar.text())},set_comments_counter:function(a){99<a?(a="99+",this.comments_count_sidebar.addClass("max"),this.toggle_comments.addClass("max")):(this.comments_count_sidebar.removeClass("max"),
this.toggle_comments.removeClass("max"));$("body").hasClass("guest")&&(this.comments_count_sidebar.text(a),this.toggle_comments.find("span").text(a));1==a?this.comments_count_sidebar.text(a+" Comment"):this.comments_count_sidebar.text(a+" Comments");this.mobile_comments_counter.find("span").text(a)},scroll_to_comment:function(a){a=$("#comment_"+a);a.length&&(a=a.offset().top,this.comments_wrapper.scrollTo(a,"slow"))},attach_tooltip:function(a){$(a).tooltip({placement:function(c,b){b=".icn-mention-comment"==
a?"false"==is_loggedin_user||!Jmp.Helpers.isBusinessPlanUser()&&!Jmp.Helpers.isEnterprisePlanUser()?"guest-user-icon":"person-icon-comment":"person-icon-reply";ViewerPanel.comments.comments_wrapper.get(0).scrollHeight>ViewerPanel.comments.comments_wrapper.height()&&(b+="-extended");$(c).removeClass("person-icon-comment person-icon-reply person-icon-comment-extended person-icon-reply-extended").addClass(b);return"left"},html:!0}).data("bs.tooltip").tip()},display_comments_limit_exceeded_popup:function(a){Jmp.App.Lightbox.show({type:"comments_limit_exceeded",
is_owner:a})},empty_comments_counter:function(){},attach_paste_event:function(a){a.unbind("paste").bind("paste",function(c){c.preventDefault();document.execCommand("inserttext",!1,event.clipboardData.getData("text/plain"));a.hasClass("comment_new_text")?(ViewerPanel.comments.comment_new_placeholder.addClass("hide"),$("#comments_activity").slideDown(100),$("#handle_annotation").css("bottom","7px"),$("#comment_person_icon").css("bottom","14px")):a.hasClass("reply_new_text")&&(ViewerPanel.comments.reply_new_placeholder.addClass("hide"),
$("#comments_activity_2").slideDown(100));a.animate({scrollTop:1E3},200)})},_at_custom_domain:function(){return BASEURL!=CUSTOM_DOMAIN_URL&&CUSTOM_DOMAIN_URL},_validate:function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();return a&&c&&a.id==c.id},show_timed_comments:function(){this.timed_comments_timestamps_temp=[];var a=null!=ViewerPanel.media.audio_player_obj&&ViewerPanel.media.video_player_obj.getDuration()&&void 0!==ViewerPanel.media.video_player_obj.getDuration()?ViewerPanel.media.video_player_obj.getDuration():
document.getElementById("video_player_html5").duration;0===$("#time_stmp_coments_wrpr").length&&$(".mejs__inner").prepend('<div class="time_stamp_comments_container hide" id="time_stmp_coments_wrpr"></div>');var c=this;c.comments_list&&c.comments_list.map(function(b){c.attach_timed_comment_template(b,a)})},remvoe_timeline_timed_comments_dom:function(){$("#time_stmp_coments_wrpr").remove()},include_new_comment:function(a){var c=null!=ViewerPanel.media.audio_player_obj&&ViewerPanel.media.video_player_obj.getDuration()&&
void 0!==ViewerPanel.media.video_player_obj.getDuration()?ViewerPanel.media.video_player_obj.getDuration():document.getElementById("video_player_html5").duration;this.attach_timed_comment_template(a,c);a.annotation_json&&ViewerPanel.annotation.attach_annotation_to_dom(a.annotation_json,a.id)},delete_timed_comment:function(a){$("#timed_comment_"+a).parent().remove()},attach_timed_comment_template:function(a,c){var b=0;this.timed_comments_timestamps_temp.push(Math.floor(a.media_timestamp));b=Jmp.Helpers.count_occurance_in_array(this.timed_comments_timestamps_temp,
Math.floor(a.media_timestamp));c=Jmp.Helpers.calculate_percentage(Math.floor(a.media_timestamp),c);0==c&&(c=1);if(1<b){var h=$("#time_stmp_coments_wrpr div[data-timestamp="+Math.floor(a.media_timestamp)+"]");this.comments_to_highlight.push($(h[0]).attr("data-id"));this.comments_multiple_timestamp.push(Math.floor(a.media_timestamp));$(h[0]).parent().remove()}h='<div class="in_video_comment_single">';var k=a.annotation_json?JSON.parse(a.annotation_json)[0].color:"";h+='<div class="msgIcn dimm_out" style="left:'+
(95<+c?"auto":c+"%")+"; right:"+(95<+c?"5px":"")+'" data-id='+a.id+" data-timedcommenttime="+a.media_timestamp+" >"+a.user.avatar_hash;a.annotation_json&&(h+=`<span class="annotated_icn_wrpr" style="background-color: ${k}"></span>`);h=h+'</div><div style="left: '+(c+'%" class="timed_comment_tooltip" data-id='+a.id+" id=timed_comment_"+a.id+" data-timestamp="+Math.floor(a.media_timestamp)+">");1<b?(h+='<div class="comment_wrpr" data-id='+a.id+">",h+="<h5>"+a.user.first_name+" "+a.user.last_name+" <span>"+
a.comment_time+"</span></h5>",h+="<p>"+a.comment+"</p>",h+="<span>+"+(b-1)+" other comment</span></div>"):(h+=`<div data-id='${a.id}' class="comment_wrpr">
				<div>
					<h5>
						${a.user.first_name} ${a.user.last_name} 
						<span>${a.comment_time}</span>
					</h5>
					<p>${a.comment}</p>
				`,0<a.replies_count&&(h+='<span class="reply_wrpr">'+a.replies_count+`+ ${2>=a.replies_count?"other comment":"other comments"}</span>`),h+='</div><svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 13L7 7L1 1" stroke="#f1f1f1" stroke-width="1.5" stroke-linejoin="round"/></svg></div>');h+="</div></div>";0===$("#timed_comment_"+a.id).length&&$("#time_stmp_coments_wrpr").append(h);ViewerPanel.comments.attach_timed_comment_mouse_events();setTimeout(function(){if(15>
ViewerPanel.comments.find_diff_comment_tooltip_and_player($("#timed_comment_"+a.id))||15<ViewerPanel.comments.find_diff_comment_tooltip_and_player_left_edge($("#timed_comment_"+a.id)))return!1},200);a.annotation_json&&ViewerPanel.annotation.attach_annotation_to_dom(a.annotation_json,a.id)},attach_timed_comment_mouse_events:function(){var a=this;$(".msgIcn").unbind("click").bind("click",function(c){c=$(c.target);ViewerPanel.media.makePlayableCondition();if(ViewerPanel.comments.comments_multiple_timestamp.includes(parseInt($(c).next().attr("data-timestamp")))){var b=
a.comments_to_highlight;-1===a.comments_to_highlight.indexOf(c.attr("data-id"))&&b.push(c.attr("data-id"));ViewerPanel.comments.highlight_single_timed_comment_vieo(b,c)}else ViewerPanel.comments.highlight_single_timed_comment_vieo([c.attr("data-id")],c);ViewerPanel.media.video_player_obj.setCurrentTime(c.attr("data-timedcommenttime"));ViewerPanel.media.video_player_obj.pause();c=c.attr("data-id");ViewerPanel.annotation.hide_current_annotation_with_time();ViewerPanel.media.current_clicked_comment_id=
c;return!1});$(".timed_comment_tooltip").unbind("click").bind("click",function(c){var b=$(c.target).parent();$(b).closest(".timed_comment_tooltip").prev().trigger("click");ViewerPanel.comments.comments_multiple_timestamp.includes(parseInt($(b).parent().attr("data-timestamp")))?(c=a.comments_to_highlight,c.push(b.attr("data-id")),ViewerPanel.comments.highlight_single_timed_comment_vieo(c)):ViewerPanel.comments.highlight_single_timed_comment_vieo($(c.target).attr("data-id"),$(c.target));return!1})},
show_single_timed_comment_vieo:function(a){var c=a.attr("data-id");$("#timed_comment_"+c).hasClass("showingThatTime")||(15>ViewerPanel.comments.find_diff_comment_tooltip_and_player(a.next())&&a.next().css({left:"auto",right:"10px",transform:"none"}),15>ViewerPanel.comments.find_diff_comment_tooltip_and_player_left_edge(a.next())&&a.next().css({right:"auto",left:"10px",transform:"none"}),$("#timed_comment_"+c).removeClass("dimm_out"),30<$("#timed_comment_"+c).height()?$("#time_stmp_coments_wrpr").addClass("multicomments"):
15<$("#timed_comment_"+c).height()&&$("#time_stmp_coments_wrpr").addClass("singlecomment"),$("#time_stmp_coments_wrpr").hasClass("multicomments")?$("#custom_captions_wrapper").css("bottom","130px"):$("#time_stmp_coments_wrpr").hasClass("singlecomment")&&$("#custom_captions_wrapper").css("bottom","114px"))},hide_single_timed_comment_vieo:function(a){a=a.attr("data-id");$("#timed_comment_"+a).hasClass("showingThatTime")||($("#time_stmp_coments_wrpr").removeClass("singlecomment multicomments"),$("#custom_captions_wrapper").css("bottom",
"78px"))},highlight_single_timed_comment_vieo:function(a,c){Jmp.Helpers.highlight_comments(a,!0)},find_diff_comment_tooltip_and_player:function(a){if(a){a=$(window).width()-(a.offset()&&a.offset().left+a.outerWidth());var c=$(window).width()-($(".mejs__mediaelement").offset().left+$(".mejs__mediaelement").outerWidth());return a-c}},find_diff_comment_tooltip_and_player_left_edge:function(a){if(a){a=a.offset()&&a.offset().left;var c=$(".mejs__mediaelement").offset().left;return a-c}},show_comment_during_video:function(a){function c(h,
k){var l;h.some(function(m){if(m>k)return!0;l=m});return l}if(this.timed_comments_timestamps){var b=this.timed_comments_timestamps_second.sort(function(h,k){return h-k});b=c(b,a);b=$("#time_stmp_coments_wrpr div[data-timestamp="+b+"]");$(".timed_comment_tooltip").removeClass("showComment");this.timed_comments_timestamps.includes(a)?(b&&15>ViewerPanel.comments.find_diff_comment_tooltip_and_player(b)?b.css({left:"auto",right:"10px",transform:"none"}):b&&15>ViewerPanel.comments.find_diff_comment_tooltip_and_player_left_edge(b)&&
b.css({right:"auto",left:"10px",transform:"none"}),b.addClass("showComment"),b.prev().removeClass("dimm_out"),$(".msgIcn").addClass("dimm_out"),b.prev().removeClass("dimm_out"),30<b.height()?$("#time_stmp_coments_wrpr").addClass("multicomments"):15<b.height()&&$("#time_stmp_coments_wrpr").addClass("singlecomment")):(b.removeClass("showComment"),b.prev().addClass("dimm_out"),b.prev().length&&(b.prev().is(":hover")||b.prev().addClass("dimm_out")),$("#time_stmp_coments_wrpr").removeClass("singlecomment multicomments"))}}};ViewerPanel.cta={save_cta_id:"#save_cta",cancel_cta_id:"#cancel_cta",delete_cta_id:"#delete_cta",has_cta:!1,allow_cta:!1,has_initiated:!1,default_button_color:"#1891ED",default_text_color:"#FFFFFF",default_button_type:"1",default_button_location:"top-right",default_button_style:"2",temp_from_va:{},default_colopicker_pallet:"#fd346e #ff2a1a #ff9331 #1891ED #fef333 #00e528 #ffffff #000000".split(" "),initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.cta_cancel=
$(this.cancel_cta_id);this.cta_save=$(this.save_cta_id);this.cta_delete=$(this.delete_cta_id);this.cta_delete.unbind("click").bind("click",function(a){a.preventDefault();ViewerPanel.cta.handle_delete_cta();ViewerPanel.cta.hide_cta_form()});this.cta_save.unbind("click").bind("click",function(a){a.preventDefault();ViewerPanel.cta.handle_save_cta()});this.cta_cancel.unbind("click").bind("click",function(a){a.preventDefault();ViewerPanel.cta.show_hide_cta_form()});"pro"!=$("#comment_new").data("et")&&
($("#cta_container_wrapper .info_legend a.utp").remove(),$("#cta_container_wrapper .info_legend").append('<a href="'+WS_PREFIX+'/pricing" class="utp label">Upgrade</a>'),$("#save_cta").addClass("blockUI"));$("#button_text_cta").unbind("change keyup input").bind("change keyup input",function(a){0<$.trim($(this).val()).length?$("#cta_action_button").text($(this).val()):$("#cta_action_button").text("Call-to-action")});$("#button_url_cta").unbind("change keyup input").bind("change keyup input",function(a){ViewerPanel.cta.update_cta_type_link()});
$("#button_color_cta").unbind("change keyup input").bind("change keyup input",function(a){$("#cta_action_button").css("background-color",$(this).val())});$("#cta_form_btn_types li").unbind("click").bind("click",function(a){a=$(this).data("value");var c=$(this).data("value2");$("#button_type_cta i").text(c);$("#cta_form_btn_types li").removeClass("selected");$(this).addClass("selected");ViewerPanel.cta.load_cta_type_text(a);$("#button_url_cta").val("");ViewerPanel.cta.update_cta_type_link()});$("#cta_form_btn_location li").unbind("click").bind("click",
function(a){a=$(this).data("value");var c=$(this).data("value2");$("#button_location_cta i").text(c);$("#cta_form_btn_location li").removeClass("selected");$(this).addClass("selected");ViewerPanel.cta.load_cta_position(a)});$("#text_color_cta").unbind("change keyup input").bind("change keyup input",function(a){$("#cta_action_button").css("color",$(this).val())});$("#cta_form_btn_styles li").unbind("click").bind("click",function(a){a=$(this).data("value");$("#button_style_cta i").text(a);$("#cta_action_button").removeClass("Rounded Square Slightly");
$("#cta_action_button").addClass($(this).text().split(" ")[0]);$("#cta_form_btn_styles li").removeClass("selected");$(this).addClass("selected")})},load_cta:function(a){this.hide_cta_form();this.get_cta()},show_hubspot:function(a){Jmp.App.Lightbox.show({type:"show_hubspot_modal",script_src:a});$("#lightbox").find(".modal-dialog").removeClass(".hubspot_modal").addClass("hubspot_modal")},show_loader:function(){this.loader.removeClass("hide")},hide_loader:function(){this.loader.addClass("hide")},remove_dim_cta:function(){this.comment_new.removeClass("dim-light")},
dim_cta:function(){this.comment_new.addClass("dim-light")},validate_hex_color:function(a){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(a)},validate_url:function(a){/^https?:\/\//i.test(a)||(a="http://"+a);return RegExp("^(https?:\\/\\/)?[\\w\\-]+(\\.[\\w\\-]+)+.*$","i").test(a)},validete_email_link:function(a){return-1!=a.indexOf(":")&&"mailto"==a.substr(0,6)?(a=a.split(":"),Jmp.Helpers.looksLikeEMail(a[1])):!1},prepare_link_for_preview:function(a){if(!this.validate_url(a)&&!this.validete_email_link(a))a=
"#";else if(-1==a.indexOf(":")||"mailto"!=a.substr(0,6))/^((http|https|ftp):\/\/)/.test(a)||(a="http://"+a);return a},handle_save_cta:function(){var a=ViewerPanel.viewers_collection.get_current_viewer(),c=$("#button_text_cta").val().trim(),b=$("#button_url_cta").val().trim(),h=$("#button_color_cta").val().trim(),k=$("#text_color_cta").val().trim(),l=$("#cta_form_btn_styles li.selected").data("key");"undefined"==typeof l&&(l=ViewerPanel.cta.default_button_style);var m=$("#cta_form_btn_location li.selected").data("key");
"undefined"==typeof m&&(m=ViewerPanel.cta.default_button_location);var n=$("#cta_form_btn_types li.selected").data("value"),p=$("#cta_form_btn_appearances").is(":checked")?1:0;if(""==n)return Jmp.App.Notifications.display_notification({type:"error",message:"Please select CTA type."}).close_notification(),!1;if(""==c)return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter button text."}).close_notification(),!1;if(""==b||!ViewerPanel.cta.validate_url(b)&&!ViewerPanel.cta.validete_email_link(b))return Jmp.App.Notifications.display_notification({type:"error",
message:"Please enter valid URL."}).close_notification(),!1;if(""!=h&&ViewerPanel.cta.validate_hex_color(h))if(""!=k&&ViewerPanel.cta.validate_hex_color(k)){if(/^https?:\/\//i.test(b)||(b="http://"+b),"calendly"==n||"hubspot"==n){try{var r=new URL(b)}catch(q){r=!1}if(!r){Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid URL."}).close_notification();return}try{if("calendly"==n&&!r.host.includes("calendly.com"))return Jmp.App.Notifications.display_notification({type:"error",
message:"Please type valid Calendly url."}).close_notification(),!1;if("hubspot"==n&&!r.host.includes("hubspot.com"))return Jmp.App.Notifications.display_notification({type:"error",message:"Please type valid Hubspot url."}).close_notification(),!1}catch(q){Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid URL."}).close_notification}}}else return Jmp.App.Notifications.display_notification({type:"error",message:"Text color should be a valid hex color."}).close_notification(),
!1;else return Jmp.App.Notifications.display_notification({type:"error",message:"Button color should be a valid hex color."}).close_notification(),!1;r={};ViewerPanel.cta._at_custom_domain()&&(r.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"cta/save",data:Jmp.Helpers.get_secure_params({item_code:a.id,title:c,link:b,color:h,text_color:k,cta_shape:l,select_position_cta:m,select_type_cta:n,select_appearance_cta:p}),success:function(q){if("undefined"!=typeof q.status){if(0==q.status)return Jmp.App.Notifications.display_notification({type:"error",
message:q.message}).close_notification(),!1;if(1==q.status)return Jmp.App.Notifications.display_notification({type:"success",message:"CTA saved successfully."}).close_notification(),ViewerPanel.cta.hide_cta_form(),ViewerPanel.header.cta.removeAttr("disabled"),ViewerPanel.header.cta.find("p").html("Edit CTA"),$("#delete_cta").removeClass("hide"),$("#video_eneded_msg .inr_wrpr").css({transform:"translateY(60%)"}),$("#cta_action_button").attr("data-appearance",p),"1"==p?$("#cta_action_button").removeClass("hide").addClass("hide"):
$("#cta_action_button").removeClass("hide"),$("#cta_action_button").attr("data-position",m),null!=ViewerPanel.media.video_player_obj&&ViewerPanel.media.video_player_obj.getCurrentTime()===ViewerPanel.media.video_player_obj.getDuration()?($("#cta_action_button").addClass("cta_center-button"),$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left")):$("#cta_action_button").removeClass("cta_center-button"),null!=ViewerPanel.media.video_player_obj&&0==ViewerPanel.media.video_player_obj.getCurrentTime()&&
($(".mejs__overlay-button").css("display","block"),$("#cta_action_button").addClass("hide cta_center-button"),$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left")),q=$("#cta_form_btn_types li.selected").data("value"),"calendly"==q?($("#cta_action_button").attr("onclick","Calendly.initPopupWidget({url: '"+ViewerPanel.cta.prepare_link_for_preview($("#button_url_cta").val().trim())+"'});return false;"),$("#cta_action_button").attr("href","javascript:;")):"hubspot"==q?($("#cta_action_button").attr("onclick",
"ViewerPanel.cta.show_hubspot('"+$("#button_url_cta").val().trim()+"');return false;"),$("#cta_action_button").attr("href","javascript:;")):($("#cta_action_button").attr("href",ViewerPanel.cta.prepare_link_for_preview($("#button_url_cta").val().trim())),$("#cta_action_button").removeAttr("onclick")),q=$("#cta_form_btn_location li.selected").data("value"),ViewerPanel.cta.load_cta_position(q),$("#time_stmp_coments_wrpr").removeClass("comment_disbaled_timed"),!1}},xhrFields:r})},update_cta_type_link:function(){var a=
ViewerPanel.cta.prepare_link_for_preview($("#button_url_cta").val()),c=$("#cta_form_btn_types li.selected").data("value");"Edit CTA"===ViewerPanel.header.cta.find("p").text()&&("calendly"==c?($("#cta_action_button").attr("onclick","Calendly.initPopupWidget({url: '"+a+"'});return false;"),$("#cta_action_button").attr("href","javascript:;")):"hubspot"==c?($("#cta_action_button").attr("onclick","ViewerPanel.cta.show_hubspot('"+a+"');return false;"),$("#cta_action_button").attr("href","javascript:;")):
($("#cta_action_button").attr("href",a),$("#cta_action_button").removeAttr("onclick")))},load_cta_type_text:function(a){"link"==a&&$("#label_url_cta").html("Button link (URL)");"calendly"==a&&$("#label_url_cta").html("Calendly link (URL)");"hubspot"==a&&$("#label_url_cta").html("Hubspot link (URL)")},load_cta_position:function(a){$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left");$("#cta_action_button").addClass(a)},get_cta:function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();
$("#cta_action_button").remove();c&&"video"==c.type&&(a={},ViewerPanel.cta._at_custom_domain()&&(a.withCredentials=!0),$.ajax({type:"POST",url:BASEURL_WS+"cta/get",data:Jmp.Helpers.get_secure_params({item_code:c.id}),success:function(b){if("undefined"!=typeof b.status)if(1==b.status){$("#button_text_cta").val(b.title);$("#button_url_cta").val(b.link);$("#button_color_cta").val(b.btn_color);$("#text_color_cta").val(b.txt_color);$("#cta_form_btn_types li").removeClass();var h=$("#cta_form_btn_types li[data-value='"+
b.cta_type+"']").data("value2");$("#cta_form_btn_types li[data-value='"+b.cta_type+"']").addClass("selected");$("#button_type_cta i").text(h);ViewerPanel.cta.load_cta_type_text(b.cta_type);$("#cta_form_btn_location li").removeClass();h=$("#cta_form_btn_location li[data-value='"+b.cta_position+"']").data("value2");$("#cta_form_btn_location li[data-value='"+b.cta_position+"']").addClass("selected");$("#button_location_cta i").text(h);ViewerPanel.cta.load_cta_position(b.cta_position);$("#cta_form_btn_appearances").attr("checked",
0==b.cta_appearance?!1:!0);$("#cta_form_btn_styles li").removeClass();h=$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").data("value");$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").addClass("selected");$("#button_style_cta i").text(h);if("undefined"!=typeof ColorPicker&&2>=$("[id^=colorpicker-]").length){h=new ColorPicker.Default("#button_color_cta",{color:b.btn_color,history:{colors:ViewerPanel.cta.default_colopicker_pallet}});$("#button_color_cta").val(b.btn_color);var k=new ColorPicker.Default("#text_color_cta",
{color:b.txt_color,placement:"top",history:{colors:ViewerPanel.cta.default_colopicker_pallet}});$("#text_color_cta").val(b.txt_color);h.on("change",function(l){$("#cta_action_button").css("background-color",l.rgba);$("#button_color_cta").val(l.hex)});k.on("change",function(l){$("#cta_action_button").css("color",l.rgba);$("#text_color_cta").val(l.hex)})}h="Rounded";1==b.btn_type?h="Slightly":2==b.btn_type?h="Rounded":3==b.btn_type&&(h="Square");k=$(".mejs__inner");"iOS"===Jmp.Helpers.detect_mobile_os()&&
(k=$(".video-player"));$("#cta_action_button").length||("calendly"==b.cta_type?k.append('<a class="btn hide top-right cta_action_btn '+h+" "+b.cta_position+' " rel="nofollow noreferrer noopener" id="cta_action_button" data-position="'+b.cta_position+'" data-appearance="'+b.cta_appearance+'" style="background-color: '+b.btn_color+"; color: "+b.txt_color+';" href="javascript:;" onclick="Calendly.initPopupWidget({url: \''+b.link+'\'});return false;" target="_blank">'+b.title+"</a>"):"hubspot"==b.cta_type?
k.append('<a class="btn hide top-right cta_action_btn '+h+" "+b.cta_position+' " rel="nofollow noreferrer noopener" id="cta_action_button" data-position="'+b.cta_position+'" data-appearance="'+b.cta_appearance+'" style="background-color: '+b.btn_color+"; color: "+b.txt_color+';" href="javascript:;" onclick="ViewerPanel.cta.show_hubspot(\''+b.link+'\');return false;" target="_blank">'+b.title+"</a>"):k.append('<a class="btn hide top-right cta_action_btn '+h+" "+b.cta_position+' " rel="nofollow noreferrer noopener" id="cta_action_button" data-position="'+
b.cta_position+'" data-appearance="'+b.cta_appearance+'" style="background-color: '+b.btn_color+"; color: "+b.txt_color+';" href="'+b.link+'" target="_blank">'+b.title+"</a>"));$("#delete_cta").removeClass("hide");ViewerPanel.header.cta.find("p").html("Edit CTA");$("#cta_container_wrapper .info_legend .inf_txt_heading").html("Edit CTA");null!=ViewerPanel.media.video_player_obj&&ViewerPanel.header.cta.removeAttr("disabled");$("#cta_action_button").unbind("click").bind("click",function(l){ViewerPanel.manager.cta_clicked_count(c.id);
ViewerPanel.media.viewer_video_cta_clicked=1})}else null!=ViewerPanel.media.video_player_obj&&ViewerPanel.header.cta.removeAttr("disabled"),$("#cta_container_wrapper .info_legend .inf_txt_heading").html("Add a CTA"),btn_color="undefined"!=typeof b.btn_color&&""!=b.btn_color?b.btn_color:ViewerPanel.cta.default_button_color,txt_color="undefined"!=typeof b.txt_color&&""!=b.txt_color?b.txt_color:ViewerPanel.cta.default_text_color,$("#cta_form_btn_location li").removeClass(),h=$("#cta_form_btn_location li[data-value='"+
b.cta_position+"']").data("value2"),$("#cta_form_btn_location li[data-value='"+b.cta_position+"']").addClass("selected"),$("#button_location_cta i").text(h),$("#button_location_cta").attr("value",b.cta_position),ViewerPanel.cta.load_cta_position(b.cta_position),$("#cta_form_btn_appearances").attr("checked",0==b.cta_appearance?!1:!0),"undefined"!=typeof ColorPicker&&2>=$("[id^=colorpicker-]").length?($("#cta_form_btn_styles li").removeClass(),h=$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").data("value"),
$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").addClass("selected"),$("#button_style_cta i").text(h),h=new ColorPicker.Default("#button_color_cta",{color:btn_color,history:{colors:ViewerPanel.cta.default_colopicker_pallet}}),$("#button_color_cta").val(btn_color),k=new ColorPicker.Default("#text_color_cta",{color:txt_color,placement:"top",history:{colors:ViewerPanel.cta.default_colopicker_pallet}}),$("#text_color_cta").val(txt_color),h.on("change",function(l){$("#cta_action_button").css("background-color",
l.rgba);$("#button_color_cta").val(l.hex)}),k.on("change",function(l){$("#cta_action_button").css("color",l.rgba);$("#text_color_cta").val(l.hex)})):($("#cta_form_btn_styles li").removeClass(),h=$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").data("value"),$("#cta_form_btn_styles li[data-key='"+b.btn_type+"']").addClass("selected"),$("#button_style_cta i").text(h),$("#button_color_cta").val(btn_color),$("#text_color_cta").val(txt_color));else $("#button_color_cta").val(ViewerPanel.cta.default_button_color),
$("#text_color_cta").val(ViewerPanel.cta.default_text_color)},xhrFields:a}))},handle_delete_cta:function(a){if((a=ViewerPanel.viewers_collection.get_current_viewer())&&"video"==a.type){var c={};ViewerPanel.cta._at_custom_domain()&&(c.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"cta/delete",data:Jmp.Helpers.get_secure_params({item_code:a.id}),success:function(b){"undefined"!=typeof b.status&&1==b.status&&(ViewerPanel.cta.hide_cta_form(),ViewerPanel.cta.reset_cta_form(),ViewerPanel.header.cta.removeAttr("disabled"),
ViewerPanel.header.cta.find("p").html("Add CTA"),$("#cta_action_button").remove(),$("#video_eneded_msg .inr_wrpr").css({transform:"translateY(-50%)"}),Jmp.App.Notifications.display_notification({type:"success",message:"CTA deleted successfully."}).close_notification(),null!=ViewerPanel.media.video_player_obj&&0==ViewerPanel.media.video_player_obj.getCurrentTime()&&$(".mejs__overlay-button").css("display","block"),$("#time_stmp_coments_wrpr").removeClass("comment_disbaled_timed"))},xhrFields:c})}},
_validate:function(a){var c=ViewerPanel.viewers_collection.get_current_viewer();return a&&c&&a.id==c.id&&("undefined"==typeof a.comments_status_disable||0==a.comments_status_disable)},reset_cta_form:function(){$("#button_text_cta").val("");$("#button_url_cta").val("");$("#cta_form_btn_types li").removeClass();var a=$("#cta_form_btn_types li[data-key='"+ViewerPanel.cta.default_button_type+"']").data("value2");$("#cta_form_btn_types li[data-key='"+ViewerPanel.cta.default_button_type+"']").addClass("selected");
$("#button_type_cta i").text(a);ViewerPanel.cta.load_cta_type_text($("#cta_form_btn_types li[data-key='"+ViewerPanel.cta.default_button_type+"']").attr("data-value"));$("#cta_form_btn_styles li").removeClass();a=$("#cta_form_btn_styles li[data-key='"+ViewerPanel.cta.default_button_style+"']").data("value2");$("#cta_form_btn_styles li[data-key='"+ViewerPanel.cta.default_button_style+"']").addClass("selected");$("#button_style_cta i").text(a);$("#cta_action_button").removeClass("Rounded Square Slightly");
1==ViewerPanel.cta.default_button_style?$("#cta_action_button").addClass("Slightly"):2==ViewerPanel.cta.default_button_style?$("#cta_action_button").addClass("Rounded"):3==ViewerPanel.cta.default_button_style&&$("#cta_action_button").addClass("Square");$("#cta_form_btn_location li").removeClass();a=$("#cta_form_btn_location li[data-key='"+ViewerPanel.cta.default_button_location+"']").data("value2");$("#cta_form_btn_location li[data-key='"+ViewerPanel.cta.default_button_location+"']").addClass("selected");
$("#button_location_cta i").text(a);ViewerPanel.cta.load_cta_position($("#cta_form_btn_location li[data-key='"+ViewerPanel.cta.default_button_location+"']").attr("data-value"));$("#button_color_cta").val(ViewerPanel.cta.default_button_color);$("#text_color_cta").val(ViewerPanel.cta.default_text_color);$("#delete_cta").addClass("hide")},hide_cta_form:function(){$("#cta_container_wrapper").addClass("hideCTAwindow");$(".viewer-wrapper").removeClass("showing-CTA");$("#disableVideoControlsLayer").remove();
$("#video_wrapper").removeClass("centerCTAbtnWhileEditing")},add_preview_cta_button:function(){$("#cta_action_button, #disableVideoControlsLayer").remove();var a=$("#button_text_cta").val(),c=$("#button_url_cta").val().trim(),b=$("#cta_form_btn_types li.selected").data("value"),h=$("#cta_form_btn_location li.selected").data("value");"undefined"==typeof h&&(h=ViewerPanel.cta.default_button_location);""==a&&(a="Call-to-action");c=this.prepare_link_for_preview(c);"Edit CTA"===ViewerPanel.header.cta.find("p").text()?
"calendly"==b?$(".mejs__inner").append('<a target="_blank" rel="nofollow noreferrer noopener" class="btn '+h+" cta_action_btn "+$("#button_style_cta i").text().split(" ")[0]+'" id="cta_action_button" data-appearance="0" data-position="'+h+'" style="background-color: '+$("#button_color_cta").val()+"; color : "+$("#text_color_cta").val()+';" href="javascript:;" onclick="Calendly.initPopupWidget({url: \''+c+"'});return false;\">"+a+"</a>"):"hubspot"==b?$(".mejs__inner").append('<a target="_blank" rel="nofollow noreferrer noopener" class="btn '+
h+" cta_action_btn "+$("#button_style_cta i").text().split(" ")[0]+'" id="cta_action_button" data-appearance="0" data-position="'+h+'" style="background-color: '+$("#button_color_cta").val()+"; color : "+$("#text_color_cta").val()+';" href="javascript:;" onclick="ViewerPanel.cta.show_hubspot(\''+c+"');return false;\">"+a+"</a>"):$(".mejs__inner").append('<a target="_blank" rel="nofollow noreferrer noopener" class="btn '+h+" cta_action_btn "+$("#button_style_cta i").text().split(" ")[0]+'" id="cta_action_button" data-appearance="0" data-position="'+
h+'" style="background-color: '+$("#button_color_cta").val()+"; color : "+$("#text_color_cta").val()+';" href="'+c+'">'+a+"</a>"):$(".mejs__inner").append('<a target="_blank" rel="nofollow noreferrer noopener" class="btn '+h+" cta_action_btn "+$("#button_style_cta i").text().split(" ")[0]+'" id="cta_action_button" data-appearance="0" data-position="'+h+'" style="background-color: '+$("#button_color_cta").val()+"; color : "+$("#text_color_cta").val()+';">'+a+"</a>");$(".mejs__inner").prepend('<div id="disableVideoControlsLayer" class="disableVideoControlsLayer"></div>')},
show_hide_cta_form:function(a){$("#cta_container_wrapper").toggleClass("hideCTAwindow");$(".viewer-wrapper").toggleClass("showing-CTA");$("#cta_container_wrapper").hasClass("hideCTAwindow")?("Edit CTA"!==ViewerPanel.header.cta.find("p").text()&&$("#cta_action_button").remove(),null!=ViewerPanel.media.video_player_obj&&ViewerPanel.media.video_player_obj.getCurrentTime()!=ViewerPanel.media.video_player_obj.getDuration()?$("#cta_action_button").removeClass("cta_center-button"):($("#cta_action_button").addClass("cta_center-button"),
$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left")),null!=ViewerPanel.media.video_player_obj&&0==ViewerPanel.media.video_player_obj.getCurrentTime()&&($(".mejs__overlay-button").show(),$("#cta_action_button").addClass("hide cta_center-button"),$("#cta_action_button").removeClass("top-left top-right bottom-right bottom-left")),$("#disableVideoControlsLayer").remove(),$("#video_wrapper").removeClass("centerCTAbtnWhileEditing"),$("#button_text_cta").val(ViewerPanel.cta.temp_from_va.cta_title),
$("#button_url_cta").val(ViewerPanel.cta.temp_from_va.cta_url),$("#button_color_cta").val(ViewerPanel.cta.temp_from_va.btn_color),$("#text_color_cta").val(ViewerPanel.cta.temp_from_va.text_color),$("#button_style_cta i").text(ViewerPanel.cta.temp_from_va.cta_style),$("#button_type_cta i").text(ViewerPanel.cta.temp_from_va.cta_type),$("#button_appearance_cta i").text(ViewerPanel.cta.temp_from_va.cta_appearance),$("#button_location_cta i").text(ViewerPanel.cta.temp_from_va.cta_position),$("#cta_action_button").text(ViewerPanel.cta.temp_from_va.cta_title),
a=$("#cta_form_btn_types li.selected").data("value"),"calendly"==a?($("#cta_action_button").attr("onclick","Calendly.initPopupWidget({url: '"+ViewerPanel.cta.temp_from_va.cta_url+"'});return false;"),$("#cta_action_button").attr("href","javascript:;")):"hubspot"==a?($("#cta_action_button").attr("onclick","ViewerPanel.cta.show_hubspot('"+ViewerPanel.cta.temp_from_va.cta_url+"');return false;"),$("#cta_action_button").attr("href","javascript:;")):($("#cta_action_button").attr("href",ViewerPanel.cta.temp_from_va.cta_url),
$("#cta_action_button").removeAttr("onclick")),$("#cta_action_button").css("background-color",ViewerPanel.cta.temp_from_va.btn_color),$("#cta_action_button").css("color",ViewerPanel.cta.temp_from_va.text_color),$("#time_stmp_coments_wrpr").removeClass("comment_disbaled_timed")):(ViewerPanel.cta.temp_from_va={cta_title:$("#button_text_cta").val(),cta_url:$("#button_url_cta").val(),btn_color:$("#button_color_cta").val(),text_color:$("#text_color_cta").val(),cta_style:$("#button_style_cta i").text(),
cta_type:$("#button_type_cta i").text(),cta_appearance:$("#button_appearance_cta i").text(),cta_position:$("#button_location_cta i").text()},ViewerPanel.cta.add_preview_cta_button(),null!=ViewerPanel.media.video_player_obj&&ViewerPanel.media.video_player_obj.pause(),$(".mejs__overlay-button").css("display","none"),$("#time_stmp_coments_wrpr").addClass("comment_disbaled_timed"))},_at_custom_domain:function(){return BASEURL!=CUSTOM_DOMAIN_URL&&CUSTOM_DOMAIN_URL}};ViewerPanel.custom_thumbnail={custom_thumbnail_id:"#update_custom_thumbnail_video",thumbanil_wrapper_id:"#custom_thumbanil_wrapper_id",cancel_thumbnail_frm:"#cancel_thumbnail_frm",default_thumb:"#default_thumb_id, #default_gif_thumb_id",custom_thumb:"#custom_thumb_id, #custom_gif_thumb_id",select_thumb:"#select_thumb_id, #select_gif_thumb_id",thumb_choice_wrapper:"#thumb_choice_wrapper_id",gif_choice_wrapper:"#gif_choice_wrapper_id",thumb_upload_id:"#thumb_upload_id",thumb_browse:"#thumb_browse",
drag_drop_thumb_wrappr_id:"#drag_drop_thumb_wrappr_id",select_thumbanail_wrapper_id:"#select_thumbanail_wrapper_id",video_container_id:"#video_wrapper",thumb_settings_checkbox:"#thumb_settings_checkbox",thumb_has_iniciated_id:"#thumb_has_iniciated_id",destroy_croppie_thumb:"#destroy_croppie_thumb",save_thumbnail:"#save_thumbnail",initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.custom_thumbnail=$(this.custom_thumbnail_id);this.thumbanil_wrapper=
$(this.thumbanil_wrapper_id);this.cancel_thumbnail=$(this.cancel_thumbnail_frm);this.default_thumb_btn=$(this.default_thumb);this.custom_thumb_btn=$(this.custom_thumb);this.select_thumb_btn=$(this.select_thumb);this.thumb_choice_wrapper=$(this.thumb_choice_wrapper);this.gif_choice_wrapper=$(this.gif_choice_wrapper);this.thumb_upload=$(this.thumb_upload_id);this.thumb_browse=$(this.thumb_browse);this.drag_drop_thumb_wrappr=$(this.drag_drop_thumb_wrappr_id);this.select_thumbanail_wrapper=$(this.select_thumbanail_wrapper_id);
this.video_container=$(this.video_container_id);this.thumb_settings_checkbox=$(this.thumb_settings_checkbox);this.thumb_has_iniciated=$(this.thumb_has_iniciated_id);this.destroy_croppie_thumb=$(this.destroy_croppie_thumb);this.save_thumbnail=$(this.save_thumbnail);this.attach_thumbnail_update_handler();this.attach_cancel_thumbnail();this.attach_destroy_thumbnail();this.attach_save_thumbnail();this.attach_handle_thumbnail_type_change();this.attach_brrowse_thumbnail();this.attach_drag_drop_thumb_upload();
"pro"!=$("#comment_new").data("et")&&($("#custom_thumbanil_wrapper_id .info_legend a.utp").remove(),$("#custom_thumbanil_wrapper_id .info_legend").append('<a href="'+WS_PREFIX+'/pricing" class="utp label">Upgrade</a>'),$("#save_thumbnail").addClass("blockUI"))},attach_thumbnail_update_handler:function(){var a=this;this.custom_thumbnail.unbind("click").bind("click",function(c){ViewerPanel.media.set_default_thumb_type(ViewerPanel.custom_thumbnail.poster_type);a.thumbanil_wrapper.toggleClass("hide_thumbanil_wrapper")})},
attach_cancel_thumbnail:function(){this.cancel_thumbnail.unbind("click").bind("click",function(a){a.preventDefault();ViewerPanel.custom_thumbnail.cancel_thumbanil_sidebar()})},attach_destroy_thumbnail:function(){var a=this;this.destroy_croppie_thumb.unbind("click").bind("click",function(c){"undefined"!=typeof ViewerPanel.custom_thumbnail.croppie_ref&&ViewerPanel.custom_thumbnail.croppie_ref.croppie("destroy");a.drag_drop_thumb_wrappr.removeClass("hide");a.thumb_has_iniciated.addClass("hide");a.thumb_has_iniciated.find("#thumb_has_iniciated_inner_span").removeClass("hide");
$("#drag_to_position").remove();ViewerPanel.custom_thumbnail.targetFile=void 0;a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")})},cancel_thumbanil_sidebar:function(){ViewerPanel.custom_thumbnail.thumbanil_wrapper.addClass("hide_thumbanil_wrapper");"undefined"!=typeof ViewerPanel.custom_thumbnail.croppie_ref&&ViewerPanel.custom_thumbnail.croppie_ref.croppie("destroy");ViewerPanel.custom_thumbnail.drag_drop_thumb_wrappr.addClass("hide");ViewerPanel.custom_thumbnail.thumb_has_iniciated.addClass("hide");
ViewerPanel.custom_thumbnail.thumb_has_iniciated.find("#thumb_has_iniciated_inner_span").removeClass("hide");$("#drag_to_position").remove();ViewerPanel.custom_thumbnail.save_thumbnail.removeAttr("disabled").text("Save");ViewerPanel.custom_thumbnail.custom_thumb_btn.removeClass("active");ViewerPanel.custom_thumbnail.default_thumb_btn.addClass("active");ViewerPanel.custom_thumbnail.drag_drop_thumb_wrappr.addClass("hide");ViewerPanel.custom_thumbnail.thumb_settings_checkbox.removeClass("hide");ViewerPanel.custom_thumbnail.remove_croppie_container();
this.thumb_choice_wrapper.removeClass("hide");this.gif_choice_wrapper.addClass("hide");$(".thumbnail_form_wrapper ul li .custom-controls").removeClass("active");$(".thumbnail_form_wrapper ul li:eq(0) input[type=radio]").attr("checked","checked");$(".thumbnail_form_wrapper ul li:eq(0) .custom-controls ").addClass("active");this.cancel_single_farame_slider();ViewerPanel.custom_thumbnail.poster_type=""},attach_save_thumbnail:function(){var a=this;this.save_thumbnail.unbind("click").bind("click",function(c){c.preventDefault();
$(this).attr("disabled","disabled").addClass("blockUI").text("Generating...");c=$("#custom_thumbanil_wrapper_id").find(".custom-controls.active").find("input[name=thumnail_type]").val();var b=ViewerPanel.viewers_collection.get_current_viewer(),h={id:b.id,bucket_id:0};if(2==c)if(ViewerPanel.custom_thumbnail.poster_type="gif",a.custom_thumb_btn.hasClass("active"))"undefined"!=typeof ViewerPanel.custom_thumbnail.targetFile?"image/gif"!=ViewerPanel.custom_thumbnail.targetFile.type?(Jmp.App.Notifications.display_notification({type:"error",
message:"Upload GIF image and try again"}).close_notification(),a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")):(ViewerPanel.custom_thumbnail.poster_type="gif_custom",a.handle_save_thumbnail(ViewerPanel.custom_thumbnail.targetFile)):(Jmp.App.Notifications.display_notification({type:"error",message:"Upload image and try again"}).close_notification(),a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save"));else{if(a.default_thumb_btn.hasClass("active")||
a.select_thumb_btn.hasClass("active"))a.select_thumb_btn.hasClass("active")&&(h.frame=a.take_frame_from_video(),ViewerPanel.custom_thumbnail.poster_type="gif_selected"),$.post(BASEURL_WS+"gif/thumbnail",Jmp.Helpers.get_secure_params(h),function(k){1==k.status?($("#"+b.id).find(".thumbnail").find("img").attr("data-video-poster",k.poster).attr("data-video-poster-type",ViewerPanel.custom_thumbnail.poster_type).attr("data-video-poster-embed",k.embed_poster),$("#"+b.id).find(".thumbnail").find("img").attr("src",
k.thumb),ViewerPanel.is_open()&&ViewerPanel.viewers_collection.is_current_viewer(b)&&(ViewerPanel.media.viewer_video_player.attr("poster",k.poster),ViewerPanel.media.video_player_obj.setPoster(k.poster),b.poster_src_type=ViewerPanel.custom_thumbnail.poster_type,Jmp.Helpers.update_viewer(b.id)),a.cancel_thumbnail.trigger("click")):Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification();a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")})}else if(1==
c)if(ViewerPanel.custom_thumbnail.poster_type="default",a.custom_thumb_btn.hasClass("active"))"undefined"!=typeof ViewerPanel.custom_thumbnail.croppie_ref&&"undefined"!=typeof ViewerPanel.custom_thumbnail.croppie_ref.croppie?ViewerPanel.custom_thumbnail.croppie_ref.croppie("result","blob").then(function(k){ViewerPanel.custom_thumbnail.poster_type="custom";a.handle_save_thumbnail(k)}):(Jmp.App.Notifications.display_notification({type:"error",message:"Upload image and try again"}).close_notification(),
a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save"));else if(a.default_thumb_btn.hasClass("active")||a.select_thumb_btn.hasClass("active"))a.select_thumb_btn.hasClass("active")&&(h.frame=a.take_frame_from_video(),ViewerPanel.custom_thumbnail.poster_type="custom_selected"),$.post(BASEURL_WS+"static/thumbnail",Jmp.Helpers.get_secure_params(h),function(k){1==k.status?($("#"+b.id).find(".thumbnail").find("img").attr("data-video-poster",k.poster).attr("data-video-poster-type",ViewerPanel.custom_thumbnail.poster_type).attr("data-video-poster-embed",
k.embed_poster),$("#"+b.id).find(".thumbnail").find("img").attr("src",k.thumb),ViewerPanel.is_open()&&ViewerPanel.viewers_collection.is_current_viewer(b)&&(ViewerPanel.media.viewer_video_player.attr("poster",k.poster),ViewerPanel.media.video_player_obj.setPoster(k.poster),b.poster_src_type=ViewerPanel.custom_thumbnail.poster_type,Jmp.Helpers.update_viewer(b.id)),a.cancel_thumbnail.trigger("click")):Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification();a.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")})})},
attach_handle_thumbnail_type_change:function(){var a=this;$("input[type=radio][name=thumnail_type]").change(function(){$(".custom-controls.radio").removeClass("active");$(this).parent(".custom-controls").addClass("active");1==this.value?($(this).attr("checked","checked"),a.thumb_choice_wrapper.removeClass("hide"),a.gif_choice_wrapper.addClass("hide"),a.custom_thumb_btn.removeClass("active"),a.default_thumb_btn.addClass("active"),a.drag_drop_thumb_wrappr.addClass("hide"),a.select_thumbanail_wrapper.addClass("hide"),
a.select_thumb_btn.removeClass("active"),a.cancel_single_farame_slider()):2==this.value&&($(this).attr("checked","checked"),a.thumb_choice_wrapper.addClass("hide"),a.gif_choice_wrapper.removeClass("hide"),a.drag_drop_thumb_wrappr.addClass("hide"),a.custom_thumb_btn.removeClass("active"),a.default_thumb_btn.addClass("active"),a.thumb_settings_checkbox.removeClass("hide"),a.thumb_has_iniciated.addClass("hide"),a.thumb_has_iniciated.find("#thumb_has_iniciated_inner_span").removeClass("hide"),a.select_thumbanail_wrapper.addClass("hide"),
a.select_thumb_btn.removeClass("active"),$("#drag_to_position").remove(),a.croppie_ref&&a.croppie_ref.croppie("destroy"),a.cancel_single_farame_slider())});this.default_thumb_btn.unbind("click").bind("click",function(c){a.custom_thumb_btn.removeClass("active");a.select_thumb_btn.removeClass("active");a.default_thumb_btn.addClass("active");a.drag_drop_thumb_wrappr.addClass("hide");a.select_thumbanail_wrapper.addClass("hide");a.thumb_settings_checkbox.removeClass("hide");a.remove_croppie_container();
a.cancel_single_farame_slider()});this.custom_thumb_btn.unbind("click").bind("click",function(c){a.custom_thumb_btn.addClass("active");a.default_thumb_btn.removeClass("active");a.select_thumb_btn.removeClass("active");a.drag_drop_thumb_wrappr.removeClass("hide");a.select_thumbanail_wrapper.addClass("hide");a.thumb_settings_checkbox.addClass("hide");a.append_croppie_container();a.cancel_single_farame_slider();$("#video_wrapper").addClass("hide_timestamp_and_cta");"Upload GIF"==$(this).text()?a.drag_drop_thumb_wrappr.find(".files_allowed").text(".gif only, max 1 MB"):
a.drag_drop_thumb_wrappr.find(".files_allowed").text(".png or .jpg only, max 5 MB")});this.select_thumb_btn.unbind("click").bind("click",function(c){a.select_thumb_btn.addClass("active");a.custom_thumb_btn.removeClass("active");a.default_thumb_btn.removeClass("active");a.drag_drop_thumb_wrappr.addClass("hide");a.select_thumbanail_wrapper.removeClass("hide");a.thumb_settings_checkbox.addClass("hide");$(".mejs__controls").prepend('<div id="slider_range_contnr" class="selector"></div>');ViewerPanel.custom_thumbnail.remove_croppie_container();
a.iniciate_frame_select_slider_dom();"select_gif_thumb_id"==$(this).attr("id")?(a.select_thumbanail_wrapper.find("p").text("Select any frame from the video to generate a 3 secs animation"),a.append_slider_to_select_frame("make_gif")):(a.select_thumbanail_wrapper.find("p").text("Select any frame from the video to generate a thumbnail"),a.append_slider_to_select_frame("static_frame"))})},append_slider_to_select_frame:function(a){var c=ViewerPanel.media.video_player_obj.getDuration();ViewerPanel.custom_thumbnail.frame_slider=
$("#slider-range").slider({min:0,max:100*c,slide:function(h,k){ViewerPanel.media.video_player_obj.pause();if("make_gif"===a&&k.value/100+3>c)return!1;ViewerPanel.media.video_player_obj.setCurrentTime(k.value/100)}});if("gif_selected"==ViewerPanel.custom_thumbnail.poster_type||"custom_selected"==ViewerPanel.custom_thumbnail.poster_type){var b=ViewerPanel.viewers_collection.get_current_viewer();b=$("#"+b.id).find(".thumbnail img").attr("data-video-poster-frame");ViewerPanel.media.video_player_obj.setCurrentTime(b);
ViewerPanel.custom_thumbnail.frame_slider.slider("value",100*b)}else ViewerPanel.media.video_player_obj.setCurrentTime(3),ViewerPanel.custom_thumbnail.frame_slider.slider("value",300)},iniciate_frame_select_slider_dom:function(){this.show_player_controls();$("#slider_range_contnr").prepend('<div class="select_frame_slider"><div id="slider-range" class="ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"><div class="ui-slider-range ui-corner-all ui-widget-header"></div><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>\t</div></div>')},
show_player_controls:function(){$("#video_wrapper").addClass("hide_timestamp_and_cta");ViewerPanel.media.video_player_obj.play();ViewerPanel.media.video_player_obj.pause();$("#video_wrapper").addClass("frame_thumb_active")},cancel_single_farame_slider:function(){$("#video_wrapper").removeClass("hide_timestamp_and_cta frame_thumb_active");$("#slider_range_contnr").remove();this.select_thumbanail_wrapper.addClass("hide");this.select_thumb_btn.removeClass("active");ViewerPanel.custom_thumbnail.frame_slider&&
ViewerPanel.custom_thumbnail.frame_slider.slider("destroy")},attach_brrowse_thumbnail:function(){var a=this;this.thumb_browse.unbind("change").bind("change",function(c){a.iniciate_croppie_thumb(c.target.files[0])})},append_croppie_container:function(){0===$("#crop_thumb_wrapper").length&&this.video_container.prepend('<div id="crop_thumb_wrapper"></div>')},remove_croppie_container:function(){$("#crop_thumb_wrapper").remove()},iniciate_croppie_thumb:function(a){if(5242880<a.size)return Jmp.App.Notifications.display_notification({type:"error",
message:"File size has exceeded the limit."}).close_notification(),!1;"image/png"==a.type||"image/jpeg"==a.type||"image/jpg"==a.type||"image/webp"==a.type?(ViewerPanel.custom_thumbnail.croppie_ref=$("#crop_thumb_wrapper").croppie({viewport:{width:this.video_container.width(),height:this.video_container.height()},enableExif:!0}),this.render_croppie(a,ViewerPanel.custom_thumbnail.croppie_ref),a=document.getElementsByClassName("cr-boundary"),(new MutationObserver(function(c,b){$("#drag_to_position").toggleClass("hide")})).observe(a[0],
{attributes:!0,attributeFilter:["aria-dropeffect"]}),ViewerPanel.custom_thumbnail.croppie_ref.on("update.croppie",function(c,b){ViewerPanel.custom_thumbnail.zoom_scale=b.zoom})):"image/gif"==a.type?(ViewerPanel.custom_thumbnail.targetFile=a,this.drag_drop_thumb_wrappr.addClass("hide"),this.thumb_has_iniciated.removeClass("hide"),this.thumb_has_iniciated.find("#thumb_has_iniciated_inner_span").addClass("hide")):Jmp.App.Notifications.display_notification({type:"error",message:"Only png and jpg is allowed"}).close_notification()},
render_croppie:function(a,c){var b=this;if(a){var h=new FileReader;h.onload=function(k){c.croppie("bind",{url:k.target.result}).then(function(){0===$("#drag_to_position").length&&$("#crop_thumb_wrapper").append('<span id="drag_to_position">Drag to Position<span/>');$(".cr-slider-wrap").append('<span id="increment_zoom_cropie">+</span><span id="decrement_zoom_cropie">-</span>');b.attach_croppie_zoom_events(c);b.drag_drop_thumb_wrappr.addClass("hide");b.thumb_has_iniciated.removeClass("hide");b.thumb_has_iniciated.find("#thumb_has_iniciated_inner_span").removeClass("hide");
ViewerPanel.custom_thumbnail.targetFile=void 0})};h.readAsDataURL(a)}else Jmp.App.Notifications.display_notification({type:"error",message:"Sorry - you're browser doesn't support the FileReader API."}).close_notification()},attach_croppie_zoom_events:function(a){$("#increment_zoom_cropie").unbind("click").bind("click",function(c){a.croppie("setZoom",ViewerPanel.custom_thumbnail.zoom_scale+.05)});$("#decrement_zoom_cropie").unbind("click").bind("click",function(c){a.croppie("setZoom",ViewerPanel.custom_thumbnail.zoom_scale-
.05)})},attach_drag_drop_thumb_upload:function(){this.drag_drop_thumb_wrappr.unbind("dragover").on("dragover",this.handle_drag_over);this.drag_drop_thumb_wrappr.unbind("dragleave").on("dragleave",this.handle_drag_leave);this.drag_drop_thumb_wrappr.unbind("drop").on("drop",this.handle_drop_upload)},handle_drag_over:function(a){ViewerPanel.custom_thumbnail.drag_drop_thumb_wrappr.addClass("active")},handle_drag_leave:function(a){ViewerPanel.custom_thumbnail.drag_drop_thumb_wrappr.removeClass("active")},
handle_drop_upload:function(a){ViewerPanel.custom_thumbnail.iniciate_croppie_thumb(a.originalEvent.dataTransfer.files[0]);ViewerPanel.custom_thumbnail.drag_drop_thumb_wrappr.removeClass("active")},take_frame_from_video:function(){return ViewerPanel.media.video_player_obj.getCurrentTime()},handle_save_thumbnail:function(a){(window.URL||window.webkitURL).createObjectURL(a);var c=ViewerPanel.viewers_collection.get_current_viewer(),b=this,h=new FormData;h.append("id",c.id);h.append("fblob",a);h.append(CSRF.token_name,
CSRF.token_value);$.ajax({type:"POST",url:BASEURL_WS+"custom/thumbnail",data:h,processData:!1,contentType:!1,success:function(k){1==k.status?($("#"+c.id).find(".thumbnail").find("img").attr("data-video-poster",k.poster).attr("data-video-poster-type",ViewerPanel.custom_thumbnail.poster_type).attr("data-video-poster-embed",k.embed_poster),$("#"+c.id).find(".thumbnail").find("img").attr("src",k.thumb),ViewerPanel.is_open()&&ViewerPanel.viewers_collection.is_current_viewer(c)&&(ViewerPanel.media.viewer_video_player.attr("poster",
k.poster),ViewerPanel.media.video_player_obj.setPoster(k.poster),c.poster_src_type=ViewerPanel.custom_thumbnail.poster_type,Jmp.Helpers.update_viewer(c.id)),b.cancel_thumbnail.trigger("click")):Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification();ViewerPanel.custom_thumbnail.targetFile=void 0;b.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")},error:function(){Jmp.App.Notifications.display_notification({type:"error",message:"Request cannot be processed, please try again"}).close_notification();
b.save_thumbnail.removeAttr("disabled").removeClass("blockUI").text("Save")}})}};ViewerPanel.video_trim={video_trim_wrapper_id:"#video_trim_wrapper_id",handle_video_trim_id:"#handle_video_trim_id, #handle_audio_trim_id",cancel_video_eiting_id:"#cancel_video_eiting_id",publish_video_trim_id:"#publish_video_trim_id",split_selected_part_id:"#split_selected_part",save_and_publish_id:"#save_and_publish_id",rever_to_original_id:"#rever_to_original",delete_clip_editor_id:"#delete_clip_editor",undo_action_id:"#undo_action_id",redo_action_id:"#redo_action_id",add_clips_id:"#merge_videos_together",
slider_min_value:0,slider_max_value:0,slider_max_sliding_value:0,trimed_clips_state:[],sorted_clips_timestamps:[],currentTimestampIndex:0,currentRevision:0,has_responsive_class:!1,videos_array:[],videos_total_duration:0,current_video_index:1,total_videos:1,new_video_added:!1,force_switch_video:0,initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},initiate_trim_section:function(){"video"===ViewerPanel.viewers_collection.get_current_viewer().type&&"mp4"!=ViewerPanel.viewers_collection.get_current_viewer().extension?
(ViewerPanel.video_trim.add_clips_id.css("display","none").attr("style","display: none !important;"),$("#merge_add_clip_text").css("display","none")):(ViewerPanel.video_trim.add_clips_id.css("display","inline-flex").attr("style","display: inline-flex !important;"),$("#merge_add_clip_text").css("display","inline"))},load_merge_media:function(a,c=0){self=this;1==a&&(Jmp.App.Lightbox.show({type:"merge_videos_together",media_type:ViewerPanel.viewers_collection.get_current_viewer().type}),$(".merge_file_search").off("input").on("input",
Jmp.Helpers.debounce(b=>{$merge_files_offset=$merge_reached_end=0;self.post_load_merge_files(0,1)})));self.post_load_merge_files(a,c)},post_load_merge_files:function(a,c=0){self=this;1==a||1==c?($merge_reached_end=$merge_files_offset=0,$(".vidoes_list_to_merge").html("")):$merge_files_offset+=$merge_files_limit;1!=a&&1!=c?$(".vidoes_list_to_merge").append('<div id="lazy_loader" style="text-align:center;padding-top:0px;"><img src="/res/img/loader.gif" /><p style="text-align: center; color: #888;">Fetching file list</p></div>'):
$(".vidoes_list_to_merge").append('<div id="lazy_loader" style="text-align:center;"><img src="/res/img/loader.gif" /><p style="text-align: center; color: #888;">Fetching file list</p></div>');var b=ViewerPanel.viewers_collection.get_current_viewer();b={keyword:$(".merge_file_search").val(),file_ext:b.extension,limit:$merge_files_limit,offset:$merge_files_offset,file_type:ViewerPanel.viewers_collection.get_current_viewer().type,bucket_file_code:b.id};$.ajax({type:"POST",url:WS_PREFIX+"/get_merge_media_files",
data:Jmp.Helpers.get_secure_params(b),success:function(h){console.log("simple success request",h);if(1==h.status&&(1==c&&$(".vidoes_list_to_merge").html(""),videos_html="",0==h.files.length&&($merge_reached_end=1,0==$(".vidoes_list_to_merge li").length&&$(".vidoes_list_to_merge").append('<div class="result_not_found">\n\t\t\t\t\t\t\t\t<img src="/res/images/no-results.png" style="width: 100%;"/>\n\t\t\t\t\t\t\t\t<h4>No results found</h4>\n\t\t\t\t\t\t\t\t<p>You may want to try different keywords or check for any possible typos.</p>\n\t\t\t\t\t\t\t</div>')),
$.each(h.files,function(k,l){bucket_file_code=l.bucket_file_code;waveform=l.waveform;""==waveform&&(waveform=self.generate_random_transparent_image());src=l.src;duration=l.duration;subtitles=l.subtitles;subtitles_hash=l.subtitles_hash;videos_html+='<li onclick="self.add_another_clip_to_editor(this);" style="cursor:pointer;" data-code="'+bucket_file_code+'" data-duration="'+duration+'" data-subtitles="'+subtitles+'" data-subtitles_hash="'+subtitles_hash+'" data-src="'+src+'" data-waveform="'+waveform+
'" data-name="'+l.bucket_file_name+'">';videos_html+='<div class="thumb_container">';videos_html+='<img src="'+l.thumbnail+'" />';"video"===ViewerPanel.viewers_collection.get_current_viewer().type&&(videos_html+='<span><img src="/res/images/sprites-retina/play-for-thumb.png" /></span>',videos_html+='<p class="views_badge">'+l.bucket_file_view_count+" Views</p>");videos_html+="</div>";videos_html+='<div class="main_info_container">';videos_html+="<h4>"+l.bucket_file_name+"</h4>";videos_html+='<div class="more-info"><span>'+
l.bucket_file_date_text+'</span><span class="viduration">'+Jmp.Helpers.format_video_duration(Math.floor(duration))+"</span></div>";videos_html+='<div class="more-info" style="margin-top:5px;"><span>'+l.bucket_path+"</span></div>";videos_html+="</div>";videos_html+="</li>"}),$(".vidoes_list_to_merge").append(videos_html),1==a))$(".vidoes_list_to_merge").off("scroll").on("scroll",function(k){k=$(this);var l=k.scrollTop(),m=k.height();l>k[0].scrollHeight-m-100&&0==$(".vidoes_list_to_merge #lazy_loader").length&&
0==$merge_reached_end&&self.load_merge_media(0,0)});$("#lazy_loader").remove()}})},bootstrap_dom:function(){this.video_trim_wrapper=$(this.video_trim_wrapper_id);this.handle_video_trim=$(this.handle_video_trim_id);this.cancel_video_eiting=$(this.cancel_video_eiting_id);this.publish_video_trim=$(this.publish_video_trim_id);this.split_selected_part=$(this.split_selected_part_id);this.save_and_publish=$(this.save_and_publish_id);this.rever_to_original=$(this.rever_to_original_id);this.delete_clip_editor=
$(this.delete_clip_editor_id);this.undo_action=$(this.undo_action_id);this.redo_action=$(this.redo_action_id);this.add_clips_id=$(this.add_clips_id);this.attach_video_trim_form_handler();this.attach_split_selected_video_handler();this.attach_publish_action_handler();this.attach_move_left_right_videos();"pro"!=$("#comment_new").data("et")&&($("#video_trim_wrapper_id .info_legend a.utp").remove(),$("#video_trim_wrapper_id .info_legend").append('<a href="'+WS_PREFIX+'/pricing" class="utp label">Upgrade</a>'),
$("#publish_video_trim_id").addClass("blockUI"));$(window).on("beforeunload",function(a){var c=!1;ViewerPanel.video_trim.has_trim_iniciated&&1<ViewerPanel.video_trim.trimed_clips_state.length&&(c=!0);if(c)return(a||window.event).returnValue="You have unsaved changes. Are you sure you want to leave this page?"})},attach_move_left_right_videos:function(){var a=this;$(".move_to_left").unbind("click").bind("click",function(c){c.preventDefault();c=parseInt($(this).parents(".editor_timeline_wrapper").attr("id").split("_").pop());
c!=a.current_video_index&&a.switch_between_videos("#editor_timeline_container_"+c,null);a.shift_elements(c,c-1);a.update_left_right_videos_status();a.attach_range_slider(!0);a.re_attach_on_dimension_change();"video"===ViewerPanel.viewers_collection.get_current_viewer().type?(ViewerPanel.media.video_player_obj.play(),ViewerPanel.media.video_player_obj.pause()):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(ViewerPanel.media.audio_player_obj.play(),ViewerPanel.media.audio_player_obj.pause())});
$(".move_to_right").unbind("click").bind("click",function(c){c.preventDefault();c=parseInt($(this).parents(".editor_timeline_wrapper").attr("id").split("_").pop());c!=a.current_video_index&&a.switch_between_videos("#editor_timeline_container_"+c,null);a.shift_elements(c,c+1);a.update_left_right_videos_status();a.attach_range_slider(!0);a.re_attach_on_dimension_change();"video"===ViewerPanel.viewers_collection.get_current_viewer().type?(ViewerPanel.media.video_player_obj.play(),ViewerPanel.media.video_player_obj.pause()):
"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(ViewerPanel.media.audio_player_obj.play(),ViewerPanel.media.audio_player_obj.pause())});a.update_left_right_videos_status()},update_left_right_videos_status:function(){var a=this;$(".editor_timeline_wrapper").each(function(){var c=parseInt($(this).attr("id").split("_").pop());1==c?$(this).find(".move_to_left").addClass("blockUI"):$(this).find(".move_to_left").removeClass("blockUI");c==a.total_videos?$(this).find(".move_to_right").addClass("blockUI"):
$(this).find(".move_to_right").removeClass("blockUI")})},attach_video_trim_form_handler:function(){var a=this;this.handle_video_trim.unbind("click").bind("click",function(c){if(1<parseInt(O_PLANID)){$("#captions_active").trigger("click");$("#captions_active_dark").trigger("click");$(".toggle_caption_container").addClass("blockUI");a.video_trim_wrapper.removeClass("hide_video_trim_wrapper");a.iniciate_trim_actions();$("#viewer_comment").trigger("click");$("#video_wrapper").hasClass("responsivePlayerView")&&
($("#video_wrapper").removeClass("responsivePlayerView"),a.has_responsive_class=!0);ViewerPanel.video_trim.has_trim_iniciated=!0;$("#video_wrapper").addClass("editingVideoPlayer");a.attach_seekbar_editor_handler();$("#viewer_comment").addClass("blockUI");$("#viewer_copy_link").addClass("blockUI");$("#viewer_share").addClass("blockUI");$(".btn-group.pull-left").addClass("blockUI");$(".mejs__fullscreen-button").addClass("blockUI");$(".toggle_mode").addClass("blockUI");$("body").addClass("video_editor_active");
$(".mejs__controls").css("opacity","1");$("#redo_action_id").addClass("blockUI");if("video"===ViewerPanel.viewers_collection.get_current_viewer().type){var b=ViewerPanel.media.video_player_obj.volume;ViewerPanel.media.video_player_obj.volume=0;var h=ViewerPanel.media.video_player_obj.getCurrentTime();ViewerPanel.media.video_player_obj.play();setTimeout(()=>{ViewerPanel.media.video_player_obj.pause();ViewerPanel.media.video_player_obj.setCurrentTime(h);ViewerPanel.media.video_player_obj.volume=b},
50);$("#trim_media_type_helper").text("video");a.videos_total_duration=ViewerPanel.media.video_player_obj.getDuration();$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration",a.videos_total_duration)}else"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(b=ViewerPanel.media.audio_player_obj.volume,ViewerPanel.media.audio_player_obj.volume=0,h=ViewerPanel.media.audio_player_obj.getCurrentTime(),ViewerPanel.media.audio_player_obj.play(),
setTimeout(()=>{ViewerPanel.media.audio_player_obj.pause();ViewerPanel.media.audio_player_obj.setCurrentTime(h);ViewerPanel.media.audio_player_obj.volume=b},50),$("#trim_media_type_helper").text("audio"),a.videos_total_duration=ViewerPanel.media.audio_player_obj.getDuration(),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration",a.videos_total_duration));$("#editor_container").on("click",".editor_timeline_wrapper",function(k){k.stopPropagation();a.switch_between_videos(this,
k)});$("#back_arrow_wrapper").addClass("hide");$("#next_arrow_wrapper").addClass("hide");ViewerPanel.media.hide_chapter_summary()}else Jmp.App.Lightbox.show({type:"uprade_to_plus_trim"}),$("#request_upgrade_plan").unbind("click").bind("click",function(k){Jmp.Helpers.request_upgrade_plan(this)}),$("#go_to_plus_pricing").unbind("click").bind("click",function(k){k.preventDefault();window.location.href=WS_PREFIX+"/pricing"})});this.cancel_video_eiting.unbind("click").bind("click",function(c){c.preventDefault();
ViewerPanel.video_trim.has_trim_iniciated&&0<ViewerPanel.video_trim.currentRevision?Jmp.App.Lightbox.show({type:"trim_away_confirmation"},function(b){a.revert_back_to_original();Jmp.App.Lightbox.hide();a.cancel_trim_action()}):a.cancel_trim_action()});this.rever_to_original.unbind("click").bind("click",function(c){c.preventDefault();a.revert_back_to_original()});this.delete_clip_editor.unbind("click").bind("click",function(c){c.preventDefault();c=$(".ui-slider-range").attr("data-currentindex");isNaN(parseInt(c))||
a.delete_a_clip(parseInt(c))});this.undo_action.unbind("click").bind("click",function(c){c.preventDefault();a.undo_trim_action()});this.redo_action.unbind("click").bind("click",function(c){c.preventDefault();a.redo_trim_action()});this.add_clips_id.unbind("click").bind("click",function(c){c.preventDefault();a.load_merge_media(1)});window.addEventListener("resize",function(c){a.re_attach_on_dimension_change()},!0)},re_attach_on_dimension_change:function(){this.calculate_area_to_be_selected();this.redraw_elements(this.currentRevision);
this.attach_seekbar_editor_handler();$("#editor_timeline_container_"+self.current_video_index).find(".seekbar_editor").removeClass("hide")},get_all_videos_duration:function(){let a=0;$(".editor_timeline_wrapper").each(function(){const c=parseInt($(this).data("maxtimer"));a+=c});return a},generate_random_transparent_image:function(){const a=document.createElement("canvas");a.width=1;a.height=1;a.getContext("2d").clearRect(0,0,a.width,a.height);return a.toDataURL("image/gif")},add_clip:function(a,c,
b,h,k,l,m=!1,n){updated_file_duration=10*c;self.videos_total_duration=parseInt(self.videos_total_duration)+parseInt(c);this.remove_current_slider_events();this.current_video_index=this.total_videos+=1;h=`<div class="editor_timeline_wrapper" id="editor_timeline_container_${this.current_video_index}" data-currentTimer="0" data-minTimer="0" data-maxTimer="${updated_file_duration}" data-code="${a}" data-duration="${c}" data-subtitles="${b}" data-subtitles_hash="${h}" data-src="${k}" data-waveform="${l}" data-name="${n}">
			<div class="trim_loader"><img width="32" src="../res/img/loader.gif"></div>

			<span class="seekbar_editor"></span>	
			<div id="timeline_slider_${this.current_video_index}" class="slider" data-value-0="#first" data-value-1="#second" data-range="#third"></div>
			<span class="timeline_editor">
				<img class="waveform_editor_timeline" src="${l}" alt="">
			</span>
			<span class="hovered_timeline_indicator hide"></span>
			<div class="switch_order_wrapper">
				<span class="move_to_left"><svg viewBox="0 0 24 24" fill="#000"><path fill-rule="evenodd" clip-rule="evenodd" d="M 20,12 A -1,1 0 0 0 19,11 H 5 a -1,1 0 1 0 0,2 h 14 a -1,1 0 0 0 1,-1 z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m 9.707,7.293 a -1,1 0 0 0 -1.414,0 l -4,4 a -1,1 0 0 0 0,1.414 l 4,4 A -1,1 0 0 0 9.707,15.293 L 6.414,12 9.707,8.707 a -1,1 0 0 0 0,-1.414 z" fill="currentColor"></path></svg></span>
				<span class="video_name">${n}</span>
				<span class="move_to_right"><svg viewBox="0 0 24 24" fill="#000"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 12a1 1 0 011-1h14a1 1 0 110 2H5a1 1 0 01-1-1z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M14.293 7.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L17.586 12l-3.293-3.293a1 1 0 010-1.414z" fill="currentColor"></path></svg></span>	
			</div>
		</div>`;$(".switch_order_wrapper").removeClass("hide");for(var p=$(".editor_timeline_wrapper").length,r="",q=0;q<p;q++)0<q&&(r+=" "),r+="1fr";$("#editor_container").append(h);$("#editor_container").css("grid-template-columns",`${r} 7fr`);"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setSrc(k):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.setSrc(k);ViewerPanel.video_trim.new_video_added=
!0;m?(this.update_revision_state_elements(),this.sort_current_revision_array()):this.update_trimmed_clip_state(a,0,0,updated_file_duration,c,b,subtitles_hash,k,l,n);this.handle_single_undo_trim();this.rever_to_original.removeClass("blockUI");this.delete_clip_editor.removeClass("blockUI");$(".move_to_left").removeClass("blockUI");$(".move_to_right").removeClass("blockUI");$(".switch_order_wrapper:first .move_to_left").addClass("blockUI");$(".switch_order_wrapper:last .move_to_right").addClass("blockUI");
$(".ui-slider").addClass("hide");setTimeout(()=>{$(".trim_loader").addClass("hide");$(".ui-slider").removeClass("hide")},500);this.attach_range_slider(!0);this.re_attach_on_dimension_change()},add_another_clip_to_editor:function(a){bucket_code=$(a).attr("data-code");file_duration=$(a).attr("data-duration");file_subtitles=$(a).attr("data-subtitles");file_subtitles_hash=$(a).attr("data-subtitles_hash");file_src=$(a).attr("data-src");file_waveform=$(a).attr("data-waveform");file_name=$(a).attr("data-name");
this.add_clip(bucket_code,file_duration,file_subtitles,file_subtitles_hash,file_src,file_waveform,!1,file_name);Jmp.App.Lightbox.hide()},remove_current_slider_events:function(){$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind();$("#timeline_slider_"+ViewerPanel.video_trim.current_video_index).slider("destroy");$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".seekbar_editor").addClass("hide")},switch_between_videos:function(a,c,
b=!1){if(0!=$(a).length){var h=parseInt($(a).attr("id").split("_")[3]);if(parseInt(h)!=this.current_video_index||1==ViewerPanel.video_trim.force_switch_video)if(ViewerPanel.video_trim.force_switch_video=0,this.remove_current_slider_events(),this.current_video_index=h,this.re_attach_on_dimension_change(),$(".seekbar_editor").addClass("hide"),$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".seekbar_editor").removeClass("hide"),a=$(a).attr("data-src"),"video"===ViewerPanel.viewers_collection.get_current_viewer().type?
ViewerPanel.media.video_player_obj.setSrc(a):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.setSrc(a),ViewerPanel.video_trim.new_video_added=!0,this.manage_video_timelines(h),$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".trim_loader").removeClass("hide"),console.log(" in_case_of_undo_redo => ",b),null!=c&&!b){if($(c.target).hasClass("trim_holder")){var k=parseInt($(c.target).attr("data-trimindex"));console.log("inner_index => ",
k,c.target);var l=!1;this.trimed_clips_state[this.currentRevision].videos.forEach((m,n)=>{var p=!1;m.clips.forEach((r,q)=>{r.active=!1;m.index===h&&(q===k?(l=r.active=!0,console.log("clip.active INSIDE => ",r)):r.active=!1,p=!0)});p&&0==l&&(m.clips[0].active=!0)});c=parseInt($(c.target).attr("data-minslider"))/10}else k=parseInt($("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".trim_holder").first().attr("data-trimindex")),this.trimed_clips_state[this.currentRevision].videos.forEach((m,
n)=>{m.clips.forEach((p,r)=>{r===k&&(p.active=m.index==h?!0:!1)})}),c=parseInt($("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".trim_holder").first().attr("data-minslider"))/10;"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setCurrentTime(c):ViewerPanel.media.audio_player_obj.setCurrentTime(c)}$(".move_to_left").removeClass("blockUI");$(".move_to_right").removeClass("blockUI");$(".switch_order_wrapper:first .move_to_left").addClass("blockUI");
$(".switch_order_wrapper:last .move_to_right").addClass("blockUI");console.log("this.trimed_clips_state =>",this.trimed_clips_state);$(".ui-slider").addClass("hide");this.attach_range_slider(!0);this.re_attach_on_dimension_change()}},attach_seekbar_editor_handler:function(){if(ViewerPanel.video_trim.has_trim_iniciated){var a=parseInt($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration")),c=document.getElementById(`editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).getBoundingClientRect();
$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind("mouseenter").bind("mouseenter",function(b){$(b.target).hasClass("trim_holder")&&$(this).find(".hovered_timeline_indicator").removeClass("hide")});$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind("mousemove").bind("mousemove",function(b){var h=Math.min(Math.max(0,b.pageX-c.x),c.width)/c.width,k=h*a;$(this).attr("data-currentTimer",k);$(b.target).hasClass("trim_holder")&&$(this).find(".hovered_timeline_indicator").css("left",
100*h+"%")});$(".trim_holder").unbind("mouseenter").bind("mouseenter",function(b){$(".hovered_timeline_indicator").addClass("hide");$(this).siblings(".hovered_timeline_indicator").removeClass("hide")});$(".trim_holder").unbind("mousemove").bind("mousemove",function(b){b=Math.min(Math.max(0,b.pageX-c.x),c.width)/c.width;$(this).siblings(".hovered_timeline_indicator").css("left",100*b+"%")});$(".trim_holder").unbind("mouseleave").bind("mouseleave",function(b){$(".hovered_timeline_indicator").addClass("hide")});
$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind("mouseleave").bind("mouseleave",function(b){$(this).find(".hovered_timeline_indicator").addClass("hide")});$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind("click").bind("click",function(b){b.stopPropagation();var h=this.getBoundingClientRect();b=(b.clientX-h.left)/(h.right-h.left);"video"===ViewerPanel.viewers_collection.get_current_viewer().type?(b*=ViewerPanel.media.video_player_obj.getDuration(),
ViewerPanel.media.video_player_obj.setCurrentTime(b)):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(b*=ViewerPanel.media.audio_player_obj.getDuration(),ViewerPanel.media.audio_player_obj.setCurrentTime(b))});$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("tabindex",1).focus();$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).unbind("keydown").bind("keydown",function(b){if(b.target===b.currentTarget)if("video"===
ViewerPanel.viewers_collection.get_current_viewer().type){var h=ViewerPanel.media.video_player_obj.getCurrentTime();37==b.which?ViewerPanel.media.video_player_obj.setCurrentTime(h-.1):39==b.which&&ViewerPanel.media.video_player_obj.setCurrentTime(h+.1)}else"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(h=ViewerPanel.media.audio_player_obj.getCurrentTime(),37==b.which?ViewerPanel.media.audio_player_obj.setCurrentTime(h-1):39==b.which&&ViewerPanel.media.audio_player_obj.setCurrentTime(h+
1))});$("#video_wrapper").hasClass("editingVideoPlayer")&&$(".mejs__controls").removeClass("hide_controls")}},attach_mousemove_trimholder:function(){},get_trim_state_element(a,c){var b=null;this.trimed_clips_state[a].videos.forEach(h=>{h.index==c&&(b=h)});return b},get_sorted_timestamps_element(a){var c=null;this.sorted_clips_timestamps.forEach(b=>{b.index==a&&(c=b)});return c},check_next_video:function(a){ViewerPanel.video_trim.has_trim_iniciated&&(self=this,self.total_videos>self.current_video_index?
(self.switch_between_videos("#editor_timeline_container_"+(self.current_video_index+1),null),"video"===ViewerPanel.viewers_collection.get_current_viewer().type?(videoPlayer=$(a),videoPlayer.off("loadedmetadata.event1").on("loadedmetadata.event1",function(){videoPlayer.off("canplay.event1").on("canplay.event1",function(){videoPlayer[0].play();videoPlayer.off("loadedmetadata.event1");videoPlayer.off("canplay.event1")})})):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(audioPlayer=
$(a),audioPlayer.off("loadedmetadata.event1").on("loadedmetadata.event1",function(){audioPlayer.off("canplay.event1").on("canplay.event1",function(){audioPlayer[0].play();audioPlayer.off("loadedmetadata.event1");audioPlayer.off("canplay.event1")})}))):self.total_videos==self.current_video_index&&("video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.pause():"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.pause()))},
update_editor_cursor:function(a){$(".seekbar_editor").addClass("hide");$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".seekbar_editor").removeClass("hide");var c=$(".mejs__time-current").css("transform");if(c){var b=c.split("(")[1];if("undefined"!=typeof b&&(b=b.split(")")[0],b=b.split(","),c=b[0],b=b[1],c=Math.sqrt(c*c+b*b),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .seekbar_editor`).css("width",`${100*c}%`),matched_element=ViewerPanel.video_trim.get_sorted_timestamps_element(ViewerPanel.video_trim.current_video_index),
this.calculate_area_to_be_selected(),this.sorted_clips_timestamps&&matched_element.clips.length)){var h;"video"===ViewerPanel.viewers_collection.get_current_viewer().type?h=parseInt(Math.round(10*ViewerPanel.media.video_player_obj.getCurrentTime())):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(h=parseInt(Math.round(10*ViewerPanel.media.audio_player_obj.getCurrentTime())));c=!1;for(b=0;b<matched_element.clips.length;b++)if(h>=matched_element.clips[b].from&&h<=matched_element.clips[b].to){c=
!0;break}c||(h=this.get_next_timestamp(h,matched_element.index),"video"===ViewerPanel.viewers_collection.get_current_viewer().type?h?ViewerPanel.media.video_player_obj.setCurrentTime(h.from/10):(ViewerPanel.media.video_player_obj.pause(),0<matched_element.clips.length?ViewerPanel.media.video_player_obj.setCurrentTime(matched_element.clips[0].from/10):ViewerPanel.media.video_player_obj.setCurrentTime(ViewerPanel.media.video_player_obj.getDuration()),videoPlayer=$(a),videoPlayer.off("loadedmetadata.event1").on("loadedmetadata.event1",
function(){videoPlayer.off("canplay.event1").on("canplay.event1",function(){videoPlayer[0].play();videoPlayer.off("loadedmetadata.event1");videoPlayer.off("canplay.event1")})})):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(h?ViewerPanel.media.audio_player_obj.setCurrentTime(h.from/10):(ViewerPanel.media.audio_player_obj.pause(),0<matched_element.clips.length?ViewerPanel.media.audio_player_obj.setCurrentTime(matched_element.clips[0].from/10):ViewerPanel.media.audio_player_obj.setCurrentTime(ViewerPanel.media.audio_player_obj.getDuration()),
audioPlayer=$(a),audioPlayer.off("loadedmetadata.event1").on("loadedmetadata.event1",function(){audioPlayer.off("canplay.event1").on("canplay.event1",function(){audioPlayer[0].play();audioPlayer.off("loadedmetadata.event1");audioPlayer.off("canplay.event1")})}))))}}},get_next_timestamp:function(a,c){var b=null;this.sorted_clips_timestamps.forEach(h=>{if(c==h.index)for(var k=0;k<h.clips.length;k++)if(a<h.clips[k].from)return b=h.clips[k],null});null==b&&this.total_videos>c&&this.switch_between_videos("#editor_timeline_container_"+
(c+1),null);return b},calculate_area_to_be_selected:function(){if(ViewerPanel.video_trim.has_trim_iniciated&&$(".ui-slider-range").length){var a=parseInt($(".ui-slider-range").css("left").replace("px","")),c=parseInt($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index} .seekbar_editor`).css("width").replace("px",""))-a;$("#to_be_selected_area_id").css({width:`${c}px`,left:`${a}px`});if("video"===ViewerPanel.viewers_collection.get_current_viewer().type){var b=10*ViewerPanel.media.video_player_obj.getCurrentTime()-
ViewerPanel.video_trim.trim_slider.slider("values")[0];var h=ViewerPanel.video_trim.trim_slider.slider("values")[1]-10*ViewerPanel.media.video_player_obj.getCurrentTime()}else"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(b=10*ViewerPanel.media.audio_player_obj.getCurrentTime()-ViewerPanel.video_trim.trim_slider.slider("values")[0],h=ViewerPanel.video_trim.trim_slider.slider("values")[1]-10*ViewerPanel.media.audio_player_obj.getCurrentTime());5>b?ViewerPanel.video_trim.split_selected_part.addClass("blockUI"):
5>h?ViewerPanel.video_trim.split_selected_part.addClass("blockUI"):ViewerPanel.video_trim.split_selected_part.removeClass("blockUI")}},cancel_trim_action:function(){this.video_trim_wrapper.addClass("hide_video_trim_wrapper");$("#viewer_comment").trigger("click");this.has_responsive_class&&$("#video_wrapper").addClass("responsivePlayerView");$("body").removeClass("video_editor_active");$("#video_wrapper").removeClass("editingVideoPlayer");$("#video_wrapper .mejs__controls").addClass("hide_controls").css("opacity",
"1");$("#back_arrow_wrapper").removeClass("hide");$("#next_arrow_wrapper").removeClass("hide");this.reset_to_default()},reset_to_default:function(){"undefined"!=typeof ViewerPanel.video_trim.trim_slider&&ViewerPanel.video_trim.trim_slider.slider("destroy");ViewerPanel.video_trim.has_trim_iniciated=!1;ViewerPanel.video_trim.trimed_clips_state=[];ViewerPanel.video_trim.sorted_clips_timestamps=[];ViewerPanel.video_trim.currentTimestampIndex=0;ViewerPanel.video_trim.currentRevision=0;$(".trim_holder").remove();
$(".ui-slider-range").attr("data-currentindex",0);$("#viewer_comment").removeClass("blockUI");$("#viewer_copy_link").removeClass("blockUI");$("#viewer_share").removeClass("blockUI");$(".btn-group.pull-left").removeClass("blockUI");$(".mejs__fullscreen-button").removeClass("blockUI");$(".toggle_mode").removeClass("blockUI");$(".toggle_caption_container").removeClass("blockUI");ViewerPanel.media.visible_chapters_summary();ViewerPanel.video_trim.trimed_clips_state=[];ViewerPanel.video_trim.sorted_clips_timestamps=
[];ViewerPanel.video_trim.currentTimestampIndex=0;ViewerPanel.video_trim.currentRevision=0;ViewerPanel.video_trim.has_responsive_class=!1;ViewerPanel.video_trim.videos_array=[];ViewerPanel.video_trim.videos_total_duration=0;ViewerPanel.video_trim.current_video_index=1;ViewerPanel.video_trim.total_videos=1;$(".editor_timeline_wrapper").each(function(){1!=parseInt($(this).attr("id").split("_").pop())?$(this).remove():$("#editor_timeline_container_1").removeAttr("data-duration")});$("#editor_container").css("grid-template-columns",
"7fr");$(".switch_order_wrapper .video_name").html("Original Media");ViewerPanel.video_trim.initialize();ViewerPanel.video_trim.re_attach_on_dimension_change()},iniciate_trim_actions:function(){this.attach_range_slider()},attach_range_slider:function(a=!1,c,b){var h=this;ViewerPanel.video_trim.trim_slider=$("#timeline_slider_"+ViewerPanel.video_trim.current_video_index);var k=$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration"),l;"video"===ViewerPanel.viewers_collection.get_current_viewer().type?
l=k?k:ViewerPanel.media.video_player_obj.getDuration():"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(l=k?k:ViewerPanel.media.audio_player_obj.getDuration());this.slider_min_value=c?c:0;this.slider_max_value=b?b:10*l;this.slider_max_sliding_value=b?b:10*l;k||($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-minTimer",0),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-maxTimer",this.slider_max_value),
$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-code",ViewerPanel.viewers_collection.get_current_viewer().id),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration",l),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-subtitles",ViewerPanel.viewers_collection.get_current_viewer().media_subtitles),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-subtitles_hash",
ViewerPanel.viewers_collection.get_current_viewer().media_subtitles_hash),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-src",ViewerPanel.viewers_collection.get_current_viewer().full_src),waveform_data=ViewerPanel.viewers_collection.get_current_viewer().media_waveform,""==waveform_data&&(waveform_data=h.generate_random_transparent_image()),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-waveform",waveform_data),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-name",
"Original Media"));ViewerPanel.video_trim.trim_slider.slider({range:!0,min:0,max:this.slider_max_value,values:[this.slider_min_value,this.slider_max_value],step:1,minRange:10,create(){$(".ui-slider-handle:eq(0)").append('<span id="min_slider_timer" class="slider_timer">00:00:0</span>');$(".ui-slider-handle:eq(1)").append('<span id="max_slider_timer" class="slider_timer">'+Jmp.Helpers.msToTime(ViewerPanel.video_trim.slider_max_value/10)+"</span>");$("#to_be_selected_area_id").remove();ViewerPanel.video_trim.trim_slider.append('<span id="to_be_selected_area_id" class="to_be_selected_area"></span>');
if(!a){var m="<span class='trim_holder' id='trim_holder_0' style='width: 100%; left: 0;' data-trimIndex=0 data-minTimestamp=0 data-maxTimstamp="+10*l+" data-minslider=0 data-maxslider="+10*l+" ></span>";$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).append(m)}$(".ui-slider-range").attr("data-currentindex",0);"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setCurrentTime(0):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&
ViewerPanel.media.audio_player_obj.setCurrentTime(0);left_percentage=0;width_percentage=100;a||(h.trimed_clips_state.push({revision_index:h.trimed_clips_state.length,videos:[{id:ViewerPanel.viewers_collection.get_current_viewer().id,index:ViewerPanel.video_trim.current_video_index,currentTimer:0,minTimer:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-minTimer"),maxTimer:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-maxTimer"),
duration:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-duration"),subtitles:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-subtitles"),subtitles_hash:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-subtitles_hash"),src:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-src"),waveform:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-waveform"),
name:$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-name"),clips:[{from:0,to:h.slider_max_value,left:left_percentage,width:width_percentage,active:!0}]}]}),h.sorted_clips_timestamps.push({id:ViewerPanel.viewers_collection.get_current_viewer().id,index:ViewerPanel.video_trim.current_video_index,clips:[{from:0,to:h.slider_max_value}]}))},start(m,n){$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+$(".ui-slider-range").attr("data-currentindex")).addClass("hide")},
slide(m,n){let p=$(".ui-slider-range").attr("data-currentindex");var r=null;element_index=parseInt($(".ui-slider-range").parents(".editor_timeline_wrapper").attr("id").split("_").pop());r=ViewerPanel.video_trim.get_sorted_timestamps_element(element_index);let q=r.clips.findIndex(v=>parseInt(v.from)===parseInt($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+p).attr("data-minslider"))),u=0<q?r.clips[q-1].to:0;r=r.clips[q+1]?r.clips[q+1].from:10*l;u>
n.values[0]&&m.preventDefault();r<n.values[1]&&m.preventDefault();(u<n.values[0]||r>n.values[1])&&h.udpate_tooltip_timer(n);m=n.values.findIndex(v=>v===n.value);0===m?$("#min_slider_timer").text(Jmp.Helpers.msToTime(n.values[0]/10)):1==m&&$("#max_slider_timer").text(Jmp.Helpers.msToTime(n.values[1]/10))},stop(m,n){$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index+" #trim_holder_"+$(".ui-slider-range").attr("data-currentindex")).removeClass("hide").width($(".ui-slider-range").width()).css("left",
$(".ui-slider-range").position().left);"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setCurrentTime(n.value/10):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.setCurrentTime(n.value/10);h.update_slider_and_trim_holder(n);h.update_trimmed_clip_state()}})},udpate_tooltip_timer:function(a){0==a.handleIndex?$("#min_slider_timer").text(Jmp.Helpers.msToTime(a.values[0]/10)):1==a.handleIndex&&
$("#max_slider_timer").text(Jmp.Helpers.msToTime(a.values[1]/10))},update_slider_and_trim_holder:function(a){let c=a.values.findIndex(h=>h===a.value);var b=$(".ui-slider-range").attr("data-currentindex");0===c?$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+b).attr("data-minslider",a.values[0]):1==c&&$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+b).attr("data-maxslider",a.values[1])},attach_split_selected_video_handler:function(){var a=
this;this.split_selected_part.unbind("click").bind("click",function(c){c.preventDefault();$(this).hasClass("blockUI")||(c=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find(".trim_holder").length,a.split_clip(c));a.calculate_area_to_be_selected()})},split_clip:function(a){this.make_new_trim_holder_item(a);this.update_trimmed_clip_state();this.handle_single_undo_trim();this.rever_to_original.removeClass("blockUI");this.delete_clip_editor.removeClass("blockUI")},update_trimmed_clip_state:function(a=
"",c,b,h,k,l,m,n,p,r){var q=this,u=-1;"delete_video"==a&&(a="",u=c);var v=!1;""==a?a=$(".ui-slider-handle").parents(".editor_timeline_wrapper").attr("data-code"):v=!0;this.currentRevision<this.trimed_clips_state.length-1&&q.trimed_clips_state.splice(q.currentRevision+1,q.trimed_clips_state.length-1-q.currentRevision);this.currentRevision=this.trimed_clips_state.length;updated_clips=[];-1==u&&(1<=$(".trim_holder").length&&!v?$(".trim_holder").each(function(){element_index=parseInt($(this).parents(".editor_timeline_wrapper").attr("id").split("_").pop());
if(element_index==q.current_video_index){var B=parseInt($(this).attr("data-trimindex"))===parseInt($(".ui-slider-range").attr("data-currentindex"))?!0:!1;left_percentage=$(this).position().left/$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).width()*100;width_percentage=$(this).width()/$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).width()*100;updated_clips.push({from:$(this).attr("data-minslider"),to:$(this).attr("data-maxslider"),left:left_percentage,
width:width_percentage,active:B})}}):(console.log("this is running only at some pointns"),updated_clips.push({from:0,to:10*k,left:0,width:100,active:!0})));let x=[];q.trimed_clips_state.forEach((B,C)=>{let H={id:B.id,videos:[]};B.videos.forEach(F=>{F={id:F.id,index:F.index,currentTimer:F.currentTimer,minTimer:F.minTimer,maxTimer:F.maxTimer,duration:F.duration,subtitles:F.subtitles,subtitles_hash:F.subtitles_hash,src:F.src,waveform:F.waveform,name:F.name,clips:[...F.clips]};H.videos.push(F)});x.push(H)});
v=!1;let y;if(-1!=u){v=!0;y=x[this.currentRevision-1].videos;for(let B=0;B<y.length;B++)if(y[B].index==u){y.splice(B,1);break}}else for(y=x[this.currentRevision-1].videos,u=0;u<y.length;u++)if(y[u].index===this.current_video_index){y[u].clips=updated_clips;v=!0;break}v||y&&y.push({id:a,index:this.current_video_index,currentTimer:c,minTimer:b,maxTimer:h,duration:k,subtitles:l,subtitles_hash:m,src:n,waveform:p,name:r,clips:updated_clips});q.trimed_clips_state.push({revision_index:q.trimed_clips_state.length,
videos:y});this.update_revision_state_elements();this.sort_current_revision_array()},sort_current_revision_array:function(){this.sorted_clips_timestamps=[];for(let c=0;c<this.trimed_clips_state[this.currentRevision].videos.length;c++){var a=this.trimed_clips_state[this.currentRevision].videos[c].clips.map(b=>({from:parseInt(b.from),to:parseInt(b.to)}));a.sort(function(b,h){return b.from-h.from});this.sorted_clips_timestamps.push({id:this.trimed_clips_state[this.currentRevision].videos[c].id,index:this.trimed_clips_state[this.currentRevision].videos[c].index,
clips:a})}this.attach_move_left_right_videos()},make_new_trim_holder_item:function(a){if("video"===ViewerPanel.viewers_collection.get_current_viewer().type){var c=$(".ui-slider-range").attr("data-currentindex");a="<span class='trim_holder' id='trim_holder_"+a+"' style='left: "+$("#to_be_selected_area_id").position().left+"px; width: "+$("#to_be_selected_area_id").width()+"px' data-trimIndex="+a+" data-minTimestamp="+$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-minTimer")+
" data-maxTimstamp="+ViewerPanel.media.video_player_obj.getCurrentTime()+" data-minSlider="+ViewerPanel.video_trim.trim_slider.slider("values")[0]+" data-maxSlider="+10*ViewerPanel.media.video_player_obj.getCurrentTime()+" data-createdSplit='true'></span>";$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).append(a);ViewerPanel.video_trim.trim_slider.slider("values",[Math.round(10*ViewerPanel.media.video_player_obj.getCurrentTime()),ViewerPanel.video_trim.trim_slider.slider("values")[1]]);
$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).find("#trim_holder_"+c).attr("data-minslider",10*ViewerPanel.media.video_player_obj.getCurrentTime()).width($(".ui-slider-range").width()).css("left",$(".ui-slider-range").position().left)}else"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&(c=$(".ui-slider-range").attr("data-currentindex"),a="<span class='trim_holder' id='trim_holder_"+a+"' style='left: "+$("#to_be_selected_area_id").position().left+"px; width: "+
$("#to_be_selected_area_id").width()+"px' data-trimIndex="+a+" data-minTimestamp="+$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).attr("data-minTimer")+" data-maxTimstamp="+ViewerPanel.media.audio_player_obj.getCurrentTime()+" data-minSlider="+ViewerPanel.video_trim.trim_slider.slider("values")[0]+" data-maxSlider="+10*ViewerPanel.media.audio_player_obj.getCurrentTime()+" data-createdSplit='true'></span>",$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).append(a),
ViewerPanel.video_trim.trim_slider.slider("values",[Math.round(10*ViewerPanel.media.audio_player_obj.getCurrentTime()),ViewerPanel.video_trim.trim_slider.slider("values")[1]]),$(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+c).attr("data-minslider",10*ViewerPanel.media.audio_player_obj.getCurrentTime()).width($(".ui-slider-range").width()).css("left",$(".ui-slider-range").position().left));var b=document.getElementById(`editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).getBoundingClientRect();
$(".trim_holder").unbind("mouseenter").bind("mouseenter",function(h){$(".hovered_timeline_indicator").addClass("hide");$(this).siblings(".hovered_timeline_indicator").removeClass("hide")});$(".trim_holder").unbind("mousemove").bind("mousemove",function(h){h=Math.min(Math.max(0,h.pageX-b.x),b.width)/b.width;$(this).siblings(".hovered_timeline_indicator").css("left",100*h+"%")});$(".trim_holder").unbind("mouseleave").bind("mouseleave",function(h){$(".hovered_timeline_indicator").addClass("hide")})},
handle_single_undo_trim:function(a){$(".trim_holder").unbind("click").bind("click",function(c){c=parseInt($(this).attr("data-trimIndex"));$(".ui-slider-range").attr("data-currentindex",c);ViewerPanel.video_trim.trim_slider.slider("values",[+$(this).attr("data-minSlider"),+$(this).attr("data-maxSlider")])})},revert_back_to_original:function(){var a=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");this.currentRevision=0;this.video_element_update(this.currentRevision);
this.redraw_elements(this.currentRevision);this.update_revision_state_elements();this.sort_current_revision_array();var c=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");a!=c&&(ViewerPanel.video_trim.force_switch_video=1,ViewerPanel.video_trim.switch_between_videos("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index,null))},redraw_elements:function(a){if("undefined"!=typeof this.trimed_clips_state[a]){$(".trim_holder").remove();
for(let l=0;l<this.trimed_clips_state[a].videos.length;l++){var c=this.trimed_clips_state[a].videos[l],b=c.index;$(`#editor_timeline_container_${b}`).attr("data-minTimer",c.minTimer);$(`#editor_timeline_container_${b}`).attr("data-maxTimer",c.maxTimer);$(`#editor_timeline_container_${b}`).attr("data-code",c.id);$(`#editor_timeline_container_${b}`).attr("data-duration",c.duration);$(`#editor_timeline_container_${b}`).attr("data-subtitles",c.subtitles);$(`#editor_timeline_container_${b}`).attr("data-subtitles_hash",
c.subtitles_hash);$(`#editor_timeline_container_${b}`).attr("data-src",c.src);$(`#editor_timeline_container_${b}`).attr("data-waveform",c.waveform);$(`#editor_timeline_container_${b}`).attr("data-name",c.name);$(`#editor_timeline_container_${b}`).find(".video_name").html(c.name);$(`#editor_timeline_container_${b}`).find(".waveform_editor_timeline").attr("src",c.waveform);c=this.trimed_clips_state[a].videos[l].clips;var h=0,k=!1;c.forEach(m=>{left_pixel=$("#editor_timeline_container_"+b).width()/100*
m.left;width_pixel=$("#editor_timeline_container_"+b).width()/100*m.width;var n="<span class='trim_holder' style='width: "+width_pixel+"px; left: "+left_pixel+"px;' id='trim_holder_"+h+"' data-trimIndex="+h+" data-minslider="+m.from+" data-maxslider="+m.to+" ></span>";$("#editor_timeline_container_"+b).append(n);console.log("IN the REDO : ",l+1,this.current_video_index);m.active&&b==this.current_video_index&&(ViewerPanel.video_trim.trim_slider.slider("values",[Math.round(parseInt(m.from)),Math.round(parseInt(m.to))]),
$(".ui-slider-range").attr("data-currentindex",h),k=!0);h++});0==k&&b==this.current_video_index&&(ViewerPanel.video_trim.trim_slider.slider("values",[Math.round(parseInt(c[0].from)),Math.round(parseInt(c[0].to))]),$(".ui-slider-range").attr("data-currentindex",0))}this.handle_single_undo_trim()}},update_revision_state_elements:function(){video_index=ViewerPanel.video_trim.current_video_index-1;0<this.trimed_clips_state.length&&0<this.currentRevision?$("#rever_to_original").removeClass("blockUI"):
$("#rever_to_original").addClass("blockUI");0<this.currentRevision?$("#undo_action_id").removeClass("blockUI"):$("#undo_action_id").addClass("blockUI");this.currentRevision<this.trimed_clips_state.length-1?$("#redo_action_id").removeClass("blockUI"):$("#redo_action_id").addClass("blockUI");1==$(".trim_holder").length?$("#delete_clip_editor").addClass("blockUI"):$("#delete_clip_editor").removeClass("blockUI")},delete_a_clip:function(a){var c=!1,b=this.get_trim_state_element(this.currentRevision,ViewerPanel.video_trim.current_video_index);
b.clips[a-1]?(ViewerPanel.video_trim.trim_slider.slider("values",[b.clips[a-1].from,b.clips[a-1].to]),$(".ui-slider-range").attr("data-currentindex",a-1),"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setCurrentTime(b.clips[a-1].from/10):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.setCurrentTime(b.clips[a-1].from/10)):b.clips[a+1]?(ViewerPanel.video_trim.trim_slider.slider("values",[b.clips[a+
1].from,b.clips[a+1].to]),$(".ui-slider-range").attr("data-currentindex",a+1),"video"===ViewerPanel.viewers_collection.get_current_viewer().type?ViewerPanel.media.video_player_obj.setCurrentTime(b.clips[a+1].from/10):"audio"===ViewerPanel.viewers_collection.get_current_viewer().type&&ViewerPanel.media.audio_player_obj.setCurrentTime(b.clips[a+1].from/10)):c=!0;c?1<this.total_videos&&(a=this.current_video_index,this.videos_total_duration=parseInt(this.videos_total_duration)-parseInt($("#editor_timeline_container_"+
this.current_video_index).attr("data-duration")),$("#editor_timeline_container_"+this.current_video_index).remove(),this.current_video_index=--this.total_videos,this.update_trimmed_clip_state("delete_video",a),this.reindex_elements(this.currentRevision),this.manage_video_timelines(this.current_video_index),this.attach_range_slider(!0),this.sort_current_revision_array(),this.re_attach_on_dimension_change(),ViewerPanel.video_trim.force_switch_video=1,this.switch_between_videos("#editor_timeline_container_"+
this.total_videos,null,!0)):($(`#editor_timeline_container_${ViewerPanel.video_trim.current_video_index}`).find("#trim_holder_"+a).remove(),this.update_trimmed_clip_state(),this.redraw_elements(this.currentRevision))},shift_elements:function(a,c){a<c?this.current_video_index++:this.current_video_index--;this.currentRevision=this.trimed_clips_state.length;var b=$("#editor_timeline_container_"+a),h=$("#editor_timeline_container_"+c);0<b.length&&0<h.length&&(b.detach(),a<c?b.insertAfter(h):b.insertBefore(h));
let k=[];this.trimed_clips_state.forEach((m,n)=>{let p={id:m.id,videos:[]};m.videos.forEach(r=>{r={id:r.id,index:r.index,currentTimer:r.currentTimer,minTimer:r.minTimer,maxTimer:r.maxTimer,duration:r.duration,subtitles:r.subtitles,subtitles_hash:r.subtitles_hash,src:r.src,waveform:r.waveform,name:r.name,clips:[...r.clips]};p.videos.push(r)});k.push(p)});b=k[this.currentRevision-1].videos;h=b.findIndex(m=>m.index===a);let l=b.findIndex(m=>m.index===c);-1!==h&&-1!==l&&([b[h],b[l]]=[b[l],b[h]]);this.trimed_clips_state.push({revision_index:this.trimed_clips_state.length,
videos:b});this.reindex_elements(this.currentRevision,!0);this.manage_video_timelines(this.current_video_index);this.update_revision_state_elements();this.sort_current_revision_array()},reindex_elements:function(a,c=!1){var b=1;$(".editor_timeline_wrapper").each(function(){var h=parseInt($(this).attr("id").split("_").pop());if(h!=b)if($(this).attr("id","editor_timeline_container_"+b),$(this).find(".slider").attr("id","timeline_slider_"+b),0==c)for(let k=0;k<self.trimed_clips_state[a].videos.length;k++){if(self.trimed_clips_state[a].videos[k].index==
h){self.trimed_clips_state[a].videos[k].index=b;break}}else for(h=0;h<self.trimed_clips_state[a].videos.length;h++)if(h+1==b){self.trimed_clips_state[a].videos[h].index=b;break}b++})},video_element_update:function(a,c=!1){self=this;$(".editor_timeline_wrapper").each(function(){var b=!1,h=$(this).attr("id").split("_").pop();for(let l=0;l<self.trimed_clips_state[a].videos.length;l++){var k=self.trimed_clips_state[a].videos[l].index;if($(this).attr("id")=="editor_timeline_container_"+k){b=!0;break}}b||
(console.log("This is not found"),self.videos_total_duration=parseInt(self.videos_total_duration)-parseInt($("#editor_timeline_container_"+h).attr("data-duration")),--self.total_videos,self.switch_between_videos("#editor_timeline_container_"+self.total_videos,null,!0),b=self.get_max_video_index(),self.current_video_index=b,$("#editor_timeline_container_"+h).remove(),self.manage_video_timelines(self.current_video_index),self.attach_range_slider(!0),self.re_attach_on_dimension_change())});for(let b=
0;b<self.trimed_clips_state[a].videos.length;b++)0==$("#editor_timeline_container_"+self.trimed_clips_state[a].videos[b].index).length&&(bucket_code=self.trimed_clips_state[a].videos[b].id,file_duration=self.trimed_clips_state[a].videos[b].duration,file_subtitles=self.trimed_clips_state[a].videos[b].subtitles,file_subtitles_hash=self.trimed_clips_state[a].videos[b].subtitles_hash,file_src=self.trimed_clips_state[a].videos[b].src,file_waveform=self.trimed_clips_state[a].videos[b].waveform,file_name=
self.trimed_clips_state[a].videos[b].name,self.add_clip(bucket_code,file_duration,file_subtitles,file_subtitles_hash,file_src,file_waveform,c,file_name));$(".move_to_left").removeClass("blockUI");$(".move_to_right").removeClass("blockUI");$(".switch_order_wrapper:first .move_to_left").addClass("blockUI");$(".switch_order_wrapper:last .move_to_right").addClass("blockUI")},get_max_video_index:function(){let a=-1;for(let c=0;c<ViewerPanel.video_trim.trimed_clips_state[ViewerPanel.video_trim.currentRevision].videos.length;c++){let b=
ViewerPanel.video_trim.trimed_clips_state[ViewerPanel.video_trim.currentRevision].videos[c].index;b>a&&(a=b)}return a},manage_video_timelines:function(a){var c=0,b="";$(".editor_timeline_wrapper").each(function(){var h=parseInt($(this).attr("id").split("_").pop());0<c&&(b+=" ");b=a==h?b+"7fr":b+"1fr";c++});$("#editor_container").css("grid-template-columns",`${b}`)},undo_trim_action:function(){if(0<this.currentRevision&&0<this.trimed_clips_state.length){var a=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");
this.currentRevision--;this.video_element_update(this.currentRevision,!0);this.redraw_elements(this.currentRevision);this.update_revision_state_elements();this.sort_current_revision_array();var c=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");a!=c&&(ViewerPanel.video_trim.force_switch_video=1,ViewerPanel.video_trim.switch_between_videos("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index,null))}},redo_trim_action:function(){if(this.currentRevision<
this.trimed_clips_state.length-1){var a=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");this.currentRevision++;this.video_element_update(this.currentRevision,!0);this.redraw_elements(this.currentRevision);this.update_revision_state_elements();this.sort_current_revision_array();var c=$("#editor_timeline_container_"+ViewerPanel.video_trim.current_video_index).attr("data-waveform");a!=c&&(ViewerPanel.video_trim.force_switch_video=1,ViewerPanel.video_trim.switch_between_videos("#editor_timeline_container_"+
ViewerPanel.video_trim.current_video_index,null))}},attach_publish_action_handler:function(){var a=this;this.save_and_publish.unbind("click").bind("click",function(c){c.preventDefault();a.save_changes_trim()});$("#save_trim_as_new_file").unbind("click").bind("click",function(c){c.preventDefault();var b=ViewerPanel.viewers_collection.get_current_viewer();c=b.id;var h=b.extension;b=b.name;b=Jmp.Helpers.decode_string(b);b=String(b).replace(/'/g,"&#039;")+" (1)";Jmp.App.Lightbox.show({type:"trim_save_as_popup",
code:c,name:b,ext:h},function(){var k=$("#trim_save_as_textbox");""==$.trim(k.val())?Jmp.App.Notifications.display_notification({type:"error",message:"Please name your file"}).close_notification():(a.save_changes_trim(1,$.trim(k.val())),Jmp.App.Lightbox.hide())});$(".modal-dialog").addClass("modal-cf");$("#trim_save_as_textbox").select().focus()})},save_changes_trim:function(a=0,c=""){var b=this;if(0==b.currentRevision)Jmp.App.Notifications.display_notification({type:"error",message:"Please select an area to trim"}).close_notification();
else if(b.sorted_clips_timestamps&&b.sorted_clips_timestamps[0].clips.length){for(var h=[],k=0,l=!1,m=0;m<b.sorted_clips_timestamps.length;m++){for(var n=[],p=0;p<b.sorted_clips_timestamps[m].clips.length;p++){var r=b.sorted_clips_timestamps[m].clips[p].from/10,q=b.sorted_clips_timestamps[m].clips[p].to/10,u=q-r;if(7200<k+u){l=!0;break}n.push([r,q]);k+=u}if(l)break;h.push({id:b.sorted_clips_timestamps[m].id,clips:n})}if(l)Jmp.App.Notifications.display_notification({type:"error",message:"The total length of the video must not exceed 90 minutes."}).close_notification();
else{console.log(h);$("#save_and_publish_id").text("Publishing...");$(".action_panel_editing .btn-group").addClass("blockUI");var v=ViewerPanel.viewers_collection.get_current_viewer();ViewerPanel.subtitles.skip_titles_load=!0;k=v.extension;l=null;l=1==a?{id:v.id,trim_values_set:h,bucket_id:0,save_new_file:a,file_info:{name:c+"."+k,type:v.type,ext:k,size:$("#"+v.id).data("size")}}:{id:v.id,trim_values_set:h,bucket_id:0,replace:1,save_new_file:a,file_info:{name:v.name+"."+k,type:v.type,ext:k,size:$("#"+
v.id).data("size")}};$.post(BASEURL_WS+"trim/upload",Jmp.Helpers.get_secure_params(l),function(x){if(0==x.status)Jmp.App.Notifications.display_notification({type:"error",message:x.message}).close_notification();else if("1"==x.is_subtitles_enable&&Jmp.Helpers.set_timed_cookie("generating_subtitles_for_code",x.bucket_file_code,5),1==a){var y="",B=v.link;B.includes("?")&&(B=B.split("?"),0<B.length&&(y=B[B.length-1]));ViewerPanel.video_trim.trimed_clips_state=[];window.location.href=BASEURL+"v/"+x.bucket_file_code+
(""!=y?"?"+y:"")}else $("#add_cta").attr("disabled","disabled"),$("#handle_video_trim_id").attr("disabled","disabled"),$("#update_custom_thumbnail_video").attr("disabled","disabled"),$("#show_transcription_form").attr("disabled","disabled"),$("#handle_subtitles_id").attr("disabled","disabled"),$("#handle_chapters_id").attr("disabled","disabled"),$("#"+v.id).data("status","0").attr("data-status","0"),Jmp.Helpers.update_viewer(v.id),$("#save_and_publish_id").text("Save Changes"),$(".action_panel_editing .btn-group").removeClass("blockUI"),
b.cancel_trim_action()})}}}};ViewerPanel.activities={activities_limit:3,loader_id:".loading_animation_activity",activity_container_id:"#activity_container",activity_wrapper_id:"#activity_wrapper",activity_placeholder_wrapper_id:"#activity_placeholder_wrapper",no_activity_id:"#no_activity",activity_list_id:"#activity_list",view_all_activity_id:"#view_all_activity",engagement_insights_id:"#show_engagement_insights",hide_insights_id:"#hide_insights",show_individual_insights_id:"#show_individual_insights_id",hide_insights_individual_id:"#hide_insights_individual",
viewers_offset:0,viewer_id:0,initialize:function(){this.bootstrap()},bootstrap:function(){this.bootstrap_dom()},bootstrap_dom:function(){this.loader=$(this.loader_id);this.activity_container=$(this.activity_container_id);this.activity_wrapper=$(this.activity_wrapper_id);this.activity_placeholder_wrapper=$(this.activity_placeholder_wrapper_id);this.no_activity=$(this.no_activity_id);this.activity_list=$(this.activity_list_id);this.view_all_activity=$(this.view_all_activity_id);this.hide_insights=$(this.hide_insights_id);
this.show_individual_insights=$(this.show_individual_insights_id);this.hide_insights_individual=$(this.hide_insights_individual_id);this.engagement_insights=$(this.engagement_insights_id);this.activity_container_info=this.activity_container.find(".info_legend")},load_activities:function(a){this.show_loader();var c=this;if("private"==VIEW&&this._validate(a)){c.set_tool_tip();c.hide_activity_empty();c.empty_activity_container();c.unset_view_downloads();c.hide_view_all_activity();c.bind_insight_sidebar();
c.attach_invididual_activity_insight();var b={item_code:a.id};c.viewer_id=a.id;var h={};ViewerPanel.activities._at_custom_domain()&&(h.withCredentials=!0);$.ajax({type:"POST",url:BASEURL_WS+"analytics/get_activities/file/"+a.id+"/limit/"+this.activities_limit+"/viewer/yes",data:Jmp.Helpers.get_secure_params(b),success:function(k){c.hide_loader();c._validate(a)&&k.status?(c.empty_activity_container(),""==k.activities||0==parseInt(k.views)+parseInt(k.downloads)+parseInt(k.clicks)?c.show_activity_empty():
(c.set_view_downloads(k),c.set_video_analytics(k),c.display_activities(k.activities,a),c.show_view_all_activity(k,a),$('[data-toggle="tooltip"]').tooltip(),c.set_tool_tip(),""!=k.video_stats_html?(5<k.video_stats_count&&$("#show_more_viewers").removeClass("hide"),$("#insights_analytics_id").html(k.video_stats_html),c.viewers_offset+=5):$("#insights_analytics_id").html(""),c.attach_invididual_activity_insight())):c.show_activity_empty();c.set_tool_tip()},xhrFields:h})}else c.set_tool_tip()},load_next_viewers:function(){var a=
this,c={item_code:a.viewer_id};a.show_loader();$.ajax({type:"POST",url:BASEURL_WS+"analytics/get_video_stats/file/"+a.viewer_id+"/offset/"+a.viewers_offset+"/viewer/yes",data:Jmp.Helpers.get_secure_params(c),success:function(b){a.hide_loader();b.status&&(""!=b.video_stats_html?($("#insights_analytics_id").append(b.video_stats_html),a.viewers_offset+=5):$("#show_more_viewers").removeClass("hide").addClass("hide"),a.attach_invididual_activity_insight())},xhrFields:{}})},attach_events:function(){$("#referral_invite").live("click",
function(a){a=$(this).data("code");Jmp.App.Lightbox.show({type:"invite_through_email",code:a});$(".modal-dialog").addClass("invite_eml_modal")})},empty_hide_activities_during_navigation:function(){this.show_loader();this.hide_activity_empty();this.empty_activity_container();this.unset_view_downloads();this.hide_view_all_activity()},set_tool_tip:function(){Jmp.Helpers.isBusinessPlanUser()||Jmp.Helpers.isEnterprisePlanUser()?this.activity_container.find(".info_tooltip").tooltip({placement:"bottom",
html:!0,title:"Analytics is only visible to you<br>in Personal Library and to your team<br>in Team Library"}):this.activity_container.find(".info_tooltip").tooltip({placement:"bottom",html:!0,title:"Analytics is only visible to you<br>because you're the owner of<br>this file."});$(".viewer_device_show").mouseenter(function(){$(".info_activity_panel .tooltip").removeClass("updateTooltip_location");$(".info_activity_panel .tooltip").addClass("updateTooltip")});$(".viewer_location_show").mouseenter(function(){$(".info_activity_panel .tooltip").removeClass("updateTooltip");
$(".info_activity_panel .tooltip").addClass("updateTooltip_location")})},set_view_downloads:function(a){this.activity_container_info.length&&(this.activity_container_info.html('<span class="activity_contianer_infotext">'+a.views+" Views, "+a.downloads+' Downloads</span><span class="info_tooltip"><img src="/res/images/info-button.svg" alt=""></span><a href="#" id="view_all_activity" style="font-weight: normal; float: right; margin-right: 16px; font-size: 13px; color: #168EEA;" class="hide">All activity</a>'),
this.view_all_activity=$(this.view_all_activity_id))},unset_view_downloads:function(){this.activity_container_info.length&&(this.activity_container_info.html('<span class="activity_contianer_infotext">0 Views, 0 Downloads</span> <span class="info_tooltip"><img src="/res/images/info-button.svg" alt=""></span><a href="#" id="view_all_activity" style="font-weight: normal; float: right; margin-right: 16px; font-size: 13px; color: #168EEA;" class="hide">All activity</a>'),this.view_all_activity=$(this.view_all_activity_id))},
set_video_analytics:function(a){$("#engagement_insights_panels").length&&($("#engagement_insights_panels #viewes_analytic_id").html(a.views),$("#engagement_insights_panels #download_analytic_id").html(a.downloads),$("#engagement_insights_panels #conversion_analytic_id").html(a.clicks),$("#engagement_insights_panels #completion_analytic_id").html(a.completion_rate+"%"),$("#show_media_insights_id  .total_analytic_viewers").html(a.video_stats_count+(1>=a.video_stats_count?" viewer":" viewers")))},unset_video_analytics:function(){$("#engagement_insights_panels").length&&
($("#engagement_insights_panels #viewes_analytic_id").html("0"),$("#engagement_insights_panels #download_analytic_id").html("0"),$("#engagement_insights_panels #conversion_analytic_id").html("0"),$("#engagement_insights_panels #completion_analytic_id").html("0%"),$("#show_media_insights_id  .total_analytic_viewers").html("viewers"))},bind_insight_sidebar:function(){var a=this;this.engagement_insights.unbind("click").bind("click",function(){$("#show_media_insights_id").toggleClass("hide_show_media_insights")});
this.hide_insights.unbind("click").bind("click",function(){$("#show_media_insights_id").toggleClass("hide_show_media_insights")});$("#show_more_viewers").unbind("click").bind("click",function(){a.load_next_viewers()});this.hide_insights_individual.unbind("click").bind("click",function(){a.toggle_invididual_analytic_view()})},toggle_invididual_analytic_view:function(){this.show_individual_insights.toggleClass("hide_individual_insights")},attach_invididual_activity_insight:function(){var a=this,c='<ul class="engagement_insights_panels engagement_insights_panels_ins" id="engagement_insights_panels_ins">';
c+='<li class="viewes_analytic">';c+="<h4>Video Views</h4>";c+='<h3 id="viewes_analytic_id_ins">0</h3>';c+="</li>";c+='<li class="download_analytic">';c+="<h4>Video Downloads</h4>";c+='<h3 id="download_analytic_id_ins">0</h3>';c+="</li>";c+='<li class="conversion_analytic">';c+='<h4>Call-to-Action Clicks <img class="analtctooltip" data-tooltip="true" data-placement="top" data-trigger="hover" data-html="true" title="This feature was released on  Jan 30, 2023. The data<br />is tracked from  Jan 30th and onwards." width="12" id="annotation_tooltip" style="transform: translateX(3px) translateY(-2px);" src="/res/images/info-button.svg" alt=""></h4>';
c+='<h3 id="conversion_analytic_id_ins">0</h3>';c+="</li>";c+='<li class="completion_analytic">';c+='<h4>Completion Rate <img class="analtctooltip" data-tooltip="true" data-placement="top" data-trigger="hover" data-html="true" title="This feature was released on  Jan 30, 2023. The data<br />is tracked from  Jan 30th and onwards." width="12" id="annotation_tooltip" style="transform: translateX(3px) translateY(-2px);" src="/res/images/info-button.svg" alt=""></h4>';c+='<h3 id="completion_analytic_id_ins">0%</h3>';
c+="</li>";c+="</ul>";$("#insights_analytics_id li").unbind("click").bind("click",function(){$(".engagement_insights_panels_ins").remove();$(".individual_analytic_show li").html($(this).html());$(".individual_analytic_show").parent().append(c);$("#viewes_analytic_id_ins").html($(this).attr("data-views"));$("#download_analytic_id_ins").html($(this).attr("data-downloads"));$("#conversion_analytic_id_ins").html($(this).attr("data-clicks"));$("#completion_analytic_id_ins").html($(this).attr("data-completion"));
var b=$(this).attr("data-view-times");$("#views_time_section_id").remove();$(".analtctooltip").tooltip();b='<div class="views_time_section" id="views_time_section_id"><h3>View Times</h3><p>'+b+"</p></div>";$(".individual_analytic_show").parent().append(b);a.toggle_invididual_analytic_view();$(".individual_analytic_show .tooltip").remove();$(".individual_analytic_show .viewer_location_tooltip").each(function(){$(this).tooltip({placement:"top",html:!0,title:$(this).attr("title")})});$(".individual_analytic_show .viewer_device_tooltip").each(function(){$(this).tooltip({placement:"top",
html:!0,title:$(this).attr("title")})})});$(".viewer_location_tooltip").each(function(){$(this).tooltip({placement:"top",html:!0,title:$(this).attr("title")})});$(".viewer_device_tooltip").each(function(){$(this).tooltip({placement:"top",html:!0,title:$(this).attr("title")})})},show_loader:function(){this.loader.removeClass("hide")},hide_loader:function(){this.loader.addClass("hide")},show_activity_empty:function(){this.no_activity.removeClass("hide")},hide_activity_empty:function(){this.no_activity.addClass("hide");
$("#show_media_insights_id").removeClass("hide_show_media_insights").addClass("hide_show_media_insights");$("#show_individual_insights_id").removeClass("hide_individual_insights").addClass("hide_individual_insights")},show_view_all_activity:function(a,c){parseInt(a.views)+parseInt(a.downloads)>this.activities_limit&&(this.view_all_activity.removeClass("hide"),this.view_all_activity.attr("href",BASEURL_WS+"analytics/file/"+c.id).attr("onclick","window.location='"+BASEURL_WS+"analytics/file/"+c.id+
"'"));"video"===c.type&&this.engagement_insights.removeClass("hide")},hide_view_all_activity:function(){$("#view_all_activity").addClass("hide");this.view_all_activity.attr("href","#");this.engagement_insights.addClass("hide")},display_activities:function(a,c){this.activity_list.html(a).removeClass("hide")},empty_activity_container:function(){this.activity_list.html("").addClass("hide")},_at_custom_domain:function(){return BASEURL!=CUSTOM_DOMAIN_URL&&CUSTOM_DOMAIN_URL},_validate:function(a){var c=
ViewerPanel.viewers_collection.get_current_viewer();return a&&c&&a.id==c.id&&"undefined"!=typeof this.activity_placeholder_wrapper&&1==this.activity_placeholder_wrapper.length&&!ViewerPanel.header.toggle_comments.hasClass("hide")}};var Viewer=function(){this.classes=""};Viewer.prototype.construct=function(a){for(var c in a)this[c]=a[c];return this};Viewer.prototype.prepare_classes=function(){if("image"==this.type||this instanceof UnknownViewer||this.is_loaded||"undefined"==typeof this.loading_classes){var a=this.classes+" "+this.type;"image"==this.type&&this.file_url&&""!=this.file_url&&(a+=" link-upload");return a}return this.loading_classes};var MediaViewer=function(){this.classes="media-viewer";this.loading_classes="load-viewer";this.kind="media"};MediaViewer.prototype=new Viewer;var DocumentViewer=function(){this.classes="document-viewer";this.loading_classes="load-viewer";this.kind="document"};DocumentViewer.prototype=new Viewer;var UnknownViewer=function(){this.classes="download-viewer";this.kind="unknown"};UnknownViewer.prototype=new Viewer;var UploadingViewer=function(){this.classes="upload-viewer";this.kind="uploading";this.progress=0;this.status=""};UploadingViewer.prototype=new Viewer;var AbsentViewer=function(){this.classes="error-viewer";this.kind="absent"};AbsentViewer.prototype=new Viewer;var EmbedViewer=function(){this.classes="embed-viewer";this.kind="embed"};EmbedViewer.prototype=new Viewer;Jmp.Helpers={is_version_link:!1,version_extension:"",version_bucket_file_code:"",calInst:null,video_tracks:[],video_tracker:null,getPlanType:function(){return"undefined"===typeof PLANID||2>PLANID?"free":6>PLANID?"plus":8>PLANID?"business":10>PLANID?"enterprise":19<PLANID&&22>PLANID?"plus":"free"},isBusinessOrHigherPlan:function(){return"undefined"===typeof PLANID?!1:5<PLANID&&20>PLANID?!0:!1},isBusinessOrHigherPlanByPlanID:function(a){return 5<a&&20>a?!0:!1},isFreePlanUser:function(){return"free"===
Jmp.Helpers.getPlanType()},isPlusPlanUser:function(){return"plus"===Jmp.Helpers.getPlanType()},isPlusPlanUserByPlanID:function(a){return 3<a&&6>a||19<a&&22>a?!0:!1},isPlusExtraPlanUserByPlanID:function(a){return 19<a&&22>a?!0:!1},isBusinessPlanUser:function(){return"business"===Jmp.Helpers.getPlanType()},isBusinessPlanTrialUser:function(){return"business"===Jmp.Helpers.getPlanType()&&"undefined"!==typeof IS_TRIAL&&1==IS_TRIAL},isEnterprisePlanUser:function(){return"enterprise"===Jmp.Helpers.getPlanType()},
getPlanRecurringPeriod(a){plan_type="yearly";0==a%2&&(plan_type="monthly");return plan_type},getEmailShareLimit:function(){return Jmp.Helpers.isFreePlanUser()?1:Jmp.Helpers.isPlusPlanUser()?10:Jmp.Helpers.isBusinessPlanUser()?20:Jmp.Helpers.isBusinessPlanTrialUser()?1:Jmp.Helpers.isEnterprisePlanUser()?30:1},getEmailShareLimitMessage:function(a){"undefined"===typeof a&&(a=Jmp.Helpers.getPlanType());return"plus"==a?"To share with over 10 recipients per hour, upgrade your account. <a id='alert-link' href='"+
BASEURL_WS+"pricing'>Upgrade</a>":"business"!=a||"undefined"!=typeof IS_TRIAL&&0!=IS_TRIAL?"business_trial"==a||"business"==a&&"undefined"!==typeof IS_TRIAL&&1==IS_TRIAL?"To share with multiple recipients per hour, buy the Business plan.  <a id='alert-link' href='"+BASEURL_WS+"settings/workspace/billing?buynow'>Buy Now</a>":"enterprise"==a?"To share with over 30 recipients per hour, please contact sales. <a id='alert-link' href='mailto:business@jumpshare.com'>Contact</a>":"To share with multiple recipients per hour, upgrade your account. <a id='alert-link' href='"+
BASEURL_WS+"pricing'>Upgrade</a>":"To share with over 20 recipients per hour, please contact sales. <a id='alert-link' href='mailto:business@jumpshare.com'>Contact</a>"},os:function(){return $("html").hasClass("mac")?"mac":$("html").hasClass("windows")?"windows":"unknown"},getExtension:function(a){return(/(?:\.([^.]+))?$/.exec(a)[1]||"").toLowerCase()},formatSize:function(a){if(0==a)return"0 KB";var c="B KB MB GB TB PB".split(" ");for(i=0;1024<a;i++)a/=1024;return 0==i?"1 KB":1==i?Math.max(a,.1).toFixed(0)+
" "+c[i]:Math.max(a,.1).toFixed(1)+" "+c[i]},formatSizeSmall:function(a,c){c=c?" ":"";if(0==a)return"0"+c+"kb";var b="b kb mb gb tb pb".split(" ");for(i=0;1024<a;i++)a/=1024;return 0==i?"1"+c+"kb":1==i?Math.max(a,.1).toFixed(0)+c+b[i]:Math.max(a,.1).toFixed(1)+c+b[i]},getTypeCount:function(a,c){switch(a){case "image":return c+" "+(1==c?"image":"images");case "audio":return c+" "+(1==c?"audio":"audios");case "video":return c+" "+(1==c?"video":"videos");case "font":return c+" "+(1==c?"font":"fonts");
case "document":case "text":return c+" "+(1==c?"document":"documents");case "spreadsheet":return c+" "+(1==c?"spreadsheet":"spreadsheets");case "ebook":return c+" "+(1==c?"eBook":"eBooks");case "presentation":return c+" "+(1==c?"presentation":"presentations");case "code":return c+" code "+(1==c?"file":"files");case "xml":return c+" xml "+(1==c?"file":"files");case "cad":return c+" CAD "+(1==c?"file":"files");default:return c+" "+(1==c?"file":"files")}},formatFileName:function(a,c){a=Jmp.Helpers.decode_string(a);
a.length>c&&(a=a.slice(0,c-7)+"..."+a.slice(-7));return Jmp.Helpers.encode_string(a)},looksLikeEMail:function(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},looksLikeDomain:function(a){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(a)},getViewerType:function(a){switch(a){case "image":case "audio":case "video":case "presentation":a="black";break;case "cad":a=
"black cad";break;case "font":a="white fv";break;case "code":case "xml":a="black code";break;case "document":case "spreadsheet":case "ebook":case "text":case "unknown":a="white";break;default:a="black"}return a},urlParamExists:function(a,c){"undefined"==typeof c||""==c?(c=window.location.search.substring(1),c=c.split("&")):c=c.slice(c.indexOf("?")+1).split("&");for(var b=0;b<c.length;b++)if(c[b].split("=")[0]==a)return!0},getUrlParam:function(a,c){"undefined"==typeof c||""==c?(c=window.location.search.substring(1),
c=c.split("&")):c=c.slice(c.indexOf("?")+1).split("&");for(var b=0;b<c.length;b++){var h=c[b].split("=");if(h[0]==a)return h[1]}},get_secure_params:function(a){"undefined"===typeof a&&(a={});var c={};c[CSRF.token_name]=CSRF.token_value;return $.parseJSON(JSON.stringify($.extend(a,c)))},queryStringToJSON:function(a){var c=[];if(""!=a){a=a.split("&");for(var b=0;b<a.length;b++){var h=a[b].split("=");c.push('"'+h[0]+'":"'+h[1]+'"')}}alert(c.join(","));return $.parseJSON("{"+c.join(",")+"}")},queryStringArrayToJSON:function(a){var c=
{};if(0==a.length)return"";for(var b=0;b<a.length;b++)c[a[b].name]=a[b].value;return c},strip_tags:function(a){return(new DOMParser).parseFromString(a,"text/html").body.textContent||""},get_user_display_name:function(a){a=$.trim(a);if(""==a)return"";a=a.split(" ",2).join(" ");if(20>=a.length)return a.split(" ",2).join(" ");a=a.split(" ")[0];return 20>=a.length?a:a.substr(0,14)+"..."+a.substr(-3)},convert_seconds_to_time:function(a){var c=Math.floor(a/60);var b=Math.floor(c/60);return{d:Math.floor(b/
24),h:b%24,m:c%60,s:a%60}},convet_time_to_seconds_float(a){if(!a.includes(":"))return parseFloat(a);const [c,b,h]=a.split(":"),[k,l]=h.split(",");return(1E3*(3600*+c+60*+b+ +k)+ +l)/1E3},update_bucket_name:function(a,c){$("#bucket_name_header").html(c).attr("data-gridname",c).attr("title",a);Jmp.App.getView().type==Jmp.Handler.getRule("b")&&Jmp.Helpers._update_bucket_name_at_different_places(a)},update_bucket_name_when_in_viewer:function(a,c,b){$("#header-inner .bucket_name").html(b).attr("data-gridname",
b).attr("title",c);$("#viewer_title_text").html(b);0<$("#download_file_name").length&&$("#download_file_name").html(b);Jmp.App.getView().type!=Jmp.Handler.getRule("v")&&Jmp.App.getView().type!=Jmp.Handler.getRule("j")&&Jmp.App.getView().type!=Jmp.Handler.getRule("s")||!Jmp.Helpers.is_bucket_id_in_url(a)||Jmp.Helpers._update_bucket_name_at_different_places(c)},_update_bucket_name_at_different_places:function(a){Jmp.Helpers.update_browser_title(a);$("#global-actions .email").attr("data-title",a)},update_browser_title:function(a){var c=
[];"undefined"!=typeof a&&""!=$.trim(a)&&c.push(a);c.push(SITETITLE);$(document).attr("title",Jmp.Helpers.decode_string(c.join(" - ")))},update_browser_title_without_sitetitle:function(a){var c=[];"undefined"!=typeof a&&""!=$.trim(a)&&(c.push(a),$(document).attr("title",Jmp.Helpers.decode_string(c.join(" - "))))},update_storage_updates:function(a,c){var b=Jmp.App.getView();if(a&&"undefined"!=typeof a.storage_used_template&&""!=$.trim(a.storage_used_template)){var h=a.storage_used_template;Jmp.Helpers._update_storage_progress_bar(h.progress_bar);
Jmp.Helpers._update_storaged_used_text(h.storage)}"undefined"!=typeof c&&b.type==Jmp.Handler.getRule("b")&&b.data.id==c?Jmp.Helpers._update_storage_details_in_sidebar(a):"undefined"==typeof c||"undefined"==typeof is_valid_owner||"false"!=is_valid_owner||b.type!=Jmp.Handler.getRule("b")||b.data.id!=c&&b.data.child_id!=c||Jmp.Helpers._update_storage_details_in_sidebar(a)},update_storage_updates_real_time:function(a,c){if("undefined"==typeof a)return!1;var b=Jmp.App.getView().type;b==Jmp.Handler.getRule("b")?
Jmp.Helpers.update_storage_updates(a,c):(b==Jmp.Handler.getRule("v")||b==Jmp.Handler.getRule("j")||b==Jmp.Handler.getRule("s"))&&Jmp.Helpers.update_storage_updates_when_in_viewer(a,c)},update_storage_updates_when_in_viewer:function(a,c){var b=Jmp.App.getView();"undefined"==typeof c||b.type!=Jmp.Handler.getRule("v")&&b.type!=Jmp.Handler.getRule("j")&&b.type!=Jmp.Handler.getRule("s")||!Jmp.Helpers.is_bucket_id_in_url(c)||Jmp.Helpers._update_storage_details_in_sidebar(a)},_update_storage_details_in_sidebar:function(a){var c=
Jmp.Helpers.get_string_based_on_count(a.files_count,"item","items",!0),b=$("#folder-meta");b.find(".folders").html(c).attr("data-items-count",a.files_count).attr("data-folder-status",a.folder_status);b.find(".views").html(a.views_count);b.find(".size").html(Jmp.Helpers.formatSize(a.total_size)).attr("data-size",a.total_size)},_update_storage_progress_bar:function(a){$(".storage-info .progress:not(.js-progress-full)").html(a)},_update_storaged_used_text:function(a){var c=a.storage_used;a=a.public_share_size_limit-
c;var b=Jmp.Helpers.formatSize(c);if($(".storage-used .usage").length){var h=$(".storage-used .usage").text().trim().split("/")[1];$(".storage-used .usage").text(b+" / "+h.trim()).attr("data-storage-used",c).attr("data-storage-left",a)}},is_storage_left:function(){if($(".storage-used .usage").length)return 0>=parseInt($(".storage-used .usage").attr("data-storage-left"))?!1:!0},start_page_loading:function(){ViewerPanel.is_mobile||(NProgress.isStarted()&&(NProgress.done(),NProgress.remove()),NProgress.start(),
Jmp.Helpers.is_connected()&&NProgress.set(.6))},stop_page_loading:function(){ViewerPanel.is_mobile||(NProgress.configure({speed:500}),NProgress.done())},display_empty_message_if_no_item_found:function(){0==$("#buckets_container").find("li.grid").length&&(ViewerPanel.is_mobile||(Jmp.App.getView().type==Jmp.Handler.getRule("shared")?$("#buckets_container").html('<div id="empty_item_message" class="empty noBg" style="background-image: none;"> \t\t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t\t<div class="icon"></div>\t\t\t\t\t\t\t<div class="title">Nobody invited yet</div> \t\t\t\t\t\t\t<div class="tagline" style="margin-bottom: 30px">Invite team members to your files to share and collaborate with them privately.</div> \t\t\t\t\t\t</div>'):
Jmp.App.getView().type==Jmp.Handler.getRule("team")?$("#buckets_container").html('<div id="empty_item_message" class="empty noBg" > \t\t\t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t\t\t<svg style="margin-bottom: 15px;" width="62" height="58" viewBox="0 0 62 58" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.75 25.75H56C58.8995 25.75 61.25 28.1005 61.25 31V52C61.25 54.8995 58.8995 57.25 56 57.25H39.75V25.75Z" fill="white" stroke="#168EEA" stroke-width="1.5"/><path d="M0.75 6C0.75 3.10051 3.10051 0.75 6 0.75H36C38.8995 0.75 41.25 3.1005 41.25 6V57.25H6C3.1005 57.25 0.75 54.8995 0.75 52V6Z" fill="#E6F0FB" stroke="#168EEA" stroke-width="1.5"/><rect x="11" y="11" width="20" height="1.5" rx="0.75" fill="#168EEA"/><rect x="11" y="17" width="20" height="1.5" rx="0.75" fill="#168EEA"/><rect x="11" y="23" width="20" height="1.5" rx="0.75" fill="#168EEA"/></svg>\t\t\t\t\t\t\t\t<div class="title">Teamwork makes the dream work</div> \t\t\t\t\t\t\t\t<div class="tagline" style="margin-bottom: 30px">Move your files here to share and collaborate with all team members in your workspace.</div> \t\t\t\t\t\t\t\t\t<div style="display: flex; justify-content: center;">\t\t\t\t\t\t\t\t\t\t<a href="#" data-invite-code="'+
TEAM_INVITE_CODE+'" class="btn btn-blue invite_members">Invite teammates</a> \t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>'):$("#buckets_container").html('<div id="empty_item_message" class="empty uploads_empty_container""> \t\t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t\t<svg style="margin-bottom: 15px;" width="59" height="59" viewBox="0 0 59 59" fill="none" xmlns="http://www.w3.org/2000/svg">\t\t\t\t\t\t\t\t<rect x="42.8928" y="4.96338" width="11.1429" height="19.5714" rx="2.75" fill="white" stroke="#158EEA" stroke-width="1.5"/>\t\t\t\t\t\t\t\t<path d="M0.75 23.4374C0.75 21.7086 1.60111 20.0906 3.02572 19.1112L2.60083 18.4932L3.02572 19.1112L26.5257 2.95496C28.3173 1.72325 30.6827 1.72326 32.4743 2.95496L55.9743 19.1112C57.3989 20.0906 58.25 21.7086 58.25 23.4374V53C58.25 55.8995 55.8995 58.25 53 58.25H6C3.10051 58.25 0.75 55.8995 0.75 53V23.4374Z" fill="#E6F0FB" stroke="#158EEA" stroke-width="1.5"/>\t\t\t\t\t\t\t\t<path d="M19.1875 35.4582C19.1875 33.9395 20.4187 32.7083 21.9375 32.7083H37.0625C38.5813 32.7083 39.8125 33.9395 39.8125 35.4583V58.2499H19.1875V35.4582Z" fill="white" stroke="#158EEA" stroke-width="1.5"/>\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t<div class="title">Nothing uploaded yet</div>\t\t\t\t\t\t\t<div class="tagline">Drag files here to start sharing, or click the Upload button in sidebar. This is your private library.</div>\t\t\t\t\t\t</div>')),
Jmp.App.getView().type==Jmp.Handler.getRule("_empty")||Jmp.App.getView().type==Jmp.Handler.getRule("team"))&&($("#buckets_container").parent().addClass("is-empty"),Jmp.Helpers.disable_edit_button(),$("#buckets_container").find("li.thead").addClass("hide"));if(0==$("#files_container").find("li.grid").length){var a="This "+$("#folder-meta").data("page-type")+" is empty",c="";"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner&&(c=1024>$(window).width()?"Tap the + button below to add files.":
'Drag & drop files here to upload, or <a href="#" id="upload_files_empty_message">click here</a> to browse files from your computer.');ViewerPanel.is_mobile||$("#files_container").html('<div id="empty_item_message" class="empty"> \t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t<div class="icon"></div> \t\t\t\t\t\t<div class="title">'+a+'</div> \t\t\t\t\t\t<div class="tagline">'+c+"</div> \t\t\t\t\t</div>\t\t\t\t</div>");Jmp.App.getView().type==Jmp.Handler.getRule("b")&&($("#files_container").parent().addClass("is-empty"),
Jmp.Helpers.disable_edit_button(),$("#files_container").find("li.thead").addClass("hide"))}},display_empty_message_if_no_favorite_collection_found:function(){"Favorites"==Jmp.App.getView().type&&($("#empty_item_message").remove(),0==$("#buckets_container").find("li.grid[data-favorite-date!='']").length?($("#buckets_container").append('<div id="empty_item_message" class="empty"> \t\t\t\t\t<div class="doted_container">\t\t\t\t\t\t<div class="icon"></div> \t\t\t\t\t\t<div class="title">No favorite items yet</div> \t\t\t\t\t\t<div class="tagline">Favorite your items to access them quickly</div> \t\t\t\t\t</div>\t\t\t\t</div>'),
$("#content_data").addClass("is-empty")):($("#empty_item_message").remove(),$("#content_data").removeClass("is-empty")))},display_loader_during_uploading_if_no_items_found:function(){0==$("li.grid").length&&$("#content_data").addClass("blockUI")},remove_loader_during_uploading:function(){$("#content_data").removeClass("blockUI")},display_loader_during_uploading:function(){$("#content_data").addClass("blockUI")},display_error_message_within_lightbox:function(a){$(".lightbox p.error").html(a)},show_announcement_bar:function(){var a=
$("#announcement_bar");"undefined"!=typeof a&&0<a.length&&setTimeout(function(){$("body").addClass("global-notice");Jmp.App.Notifications._adjust_body_on_gloabl_notice()},1E3)},is_opera:function(){return $.browser.opera},is_safari:function(){return/^((?!Chrome|CriOS|FxiOS|EdgiOS|OPiOS|mercury).)*Safari/.test(navigator.userAgent)},is_outdated_browser:function(){var a=!1,c=this.get_browser_with_version();if("Firefox"==c[0]&&28>c[1]||"Chrome"==c[0]&&28>c[1]||("IE"==c[0]||"MSIE"==c[0])&&10>c[1]||"Opera"==
c[0]&&18>c[1])a=!0;return a},get_browser_with_version:function(){var a=navigator.userAgent,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1])){var b=/\brv[ :]+(\d+)/g.exec(a)||[];return"IE "+(b[1]||"")}if("Chrome"===c[1]&&(b=a.match(/\bOPR\/(\d+)/),null!=b))return"Opera "+b[1];c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]);return c},lpad:function(a,c,b){for(a=String(a);a.length<
c;)a=b+a;return a},list_sort:function(a,c){var b=$("#files_container"),h=[],k=[],l=[];if("size"==a)"asc"==c?(h.push("li.folder"),k.push("date"),l.push(c),h.push("li.file"),k.push("date"),l.push(c),h.push("li.file"),k.push(a)):(h.push("li.file"),k.push("date"),l.push(c),h.push("li.file"),k.push(a),l.push(c),h.push("li.folder"),k.push("date"));else if("type"==a){if("asc"==c){h.push("li.folder");k.push("date");l.push(c);for(var m="image video document presentation spreadsheet code audio".split(" "),
n=m.length,p=0;p<n;p++)h.push('li.file[data-file-url=""][data-type="'+m[p]+'"]'),k.push("date"),l.push(c);var r="";for(p=0;p<n;p++)r+="[data-type!='"+m[p]+"']";h.push('li.file[data-file-url=""]'+r);k.push("date");l.push(c);h.push('li.file[data-file-url=""]'+r);k.push("type");l.push(c);h.push('li.file[data-file-url!=""]')}else{h.push('li.file[data-file-url!=""]');k.push("date");l.push(c);m="audio code spreadsheet presentation document video image".split(" ");n=m.length;r="";for(p=0;p<n;p++)r+="[data-type!='"+
m[p]+"']";h.push('li.file[data-file-url=""]'+r);k.push("date");l.push(c);h.push('li.file[data-file-url=""]'+r);k.push("type");l.push(c);for(p=0;p<n;p++)h.push('li.file[data-file-url=""][data-type="'+m[p]+'"]'),k.push("date"),l.push(c);h.push("li.folder")}k.push("date")}else"name"==a?(h.push("li.grid"),k.push("date"),l.push(c),h.push("li.grid"),k.push(a)):"modified_date"==a?(h.push("li.grid"),k.push(a)):"recently_added"==a?(b=$("#buckets_container"),h.push("li.grid"),k.push("date")):"last_modified"==
a?(b=$("#buckets_container"),h.push("li.grid"),k.push("modified_date")):"favorite"==a?(b=$("#buckets_container"),h.push("li.grid[data-favorite-date!='']"),k.push("favorite")):(h.push("li"),k.push(a));l.push(c);n=h.length;for(p=0;p<n;p++)m=h[p],a=k[p],c=l[p],b.children(m).sort(function(q,u){switch(a){case "name":return $(q),q=$(q),u=$(u),q=q.data("name").toString().toUpperCase(),u=u.data("name").toString().toUpperCase(),u=q.localeCompare(u,void 0,{numeric:!0}),"desc"===c&&(u*=-1),u;case "size":return q=
parseInt($(q).data("size")),u=parseInt($(u).data("size")),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0;case "ext":return q=$(q).data("extension"),u=$(u).data("extension"),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0;case "type":return q=$(q).data("type"),u=$(u).data("type"),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0;case "modified_date":return q=parseInt($(q).attr("data-modified-date")),u=parseInt($(u).attr("data-modified-date")),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0;case "favorite":return q=parseInt($(q).attr("data-favorite-date")),
u=parseInt($(u).attr("data-favorite-date")),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0;default:return q=parseInt($(q).data("date")),u=parseInt($(u).data("date")),"desc"==c?q>u?-1:q<u?1:0:q<u?-1:q>u?1:0}}).appendTo(b)},revert_custom_sort:function(a){a&&0<a.length&&a.appendTo($("#files_container"))},get_file_index_if_custom_sort:function(a){a=$("#"+a);var c=$(".sorting");if(1<=a.length){var b=c.find(".sort_by.active");c=c.find(".sort_order.active");if(0==b.length&&0==c.length)return a.index()}},show_tooltip:function(a,
c){"undefined"==typeof a.data("tooltipsy")&&a.tooltipsy({alignTo:"element",offset:[0,1,1,1],hideEvent:"focusout",showEvent:"",className:"tooltipsy bottom"});c=Jmp.Helpers.remove_tags(c,"<p>");c=Jmp.Helpers.remove_tags(c,"</p>");a.attr("title",c).data("tooltipsy").show()},hide_tooltip:function(a){"undefined"!==typeof a.data("tooltipsy")&&a.data("tooltipsy").hide()},extract_file_extension:function(a){a=a.split(".");return a[a.length-1]},set_focus:function(a){if("undefined"==typeof a)return!1;var c=
a.val();a.val("").focus().val(c)},remove_tags:function(a,c){return a.replace(c,"")},update_iur:function(a){try{Jmp.Uploader.options.iur=a}catch(c){Jmp.Uploader={options:{iur:a}}}},disable_edit_button:function(){$("#global-actions .show_actions .edit").addClass("disabled")},enable_edit_button:function(){$("#global-actions .show_actions .edit").removeClass("disabled")},in_edit_mode:function(){return $("body").hasClass("edit-mode")},remove_field:function(a,c){if("undefined"==typeof a)return{};delete a[c];
return a},remove_splash:function(){$("#buckets_container").parent().removeClass("is-empty");$("#files_container").parent().removeClass("is-empty");$("#empty_item_message").remove()},enable_buttons_in_shared_folder_when_real_time:function(){$("#files_container").find("li").length&&($(".show_actions .import").removeClass("disabled"),$(".show_actions .download").removeClass("disabled blockUI"))},disable_buttons_in_shared_folder_when_real_time:function(){0==$("#files_container").find("li").length&&($(".show_actions .import").addClass("disabled"),
$(".show_actions .download").addClass("disabled blockUI"))},showCalendar:function(a){var c=new Date,b=null;a.datetimepicker({constrainInput:!0,dayNamesMin:$.datepicker._defaults.dayNamesShort,showOtherMonths:!0,selectOtherMonths:!0,minDateTime:new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),defaultDate:new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours()+4+TZ_OFFSET,c.getUTCMinutes()),controlType:"select",dateFormat:"M d, yy",timeFormat:"hh:mm",showAnim:"",onSelect:function(h,
k){b="undefined"!=typeof k.settings?k.settings.timepicker.formattedDateTime:k.formattedDateTime;setTimeout(function(){1>$("#ui-datepicker-div .icn-dd-right-arrow").length&&$("#ui-datepicker-div").append('<span class="arrow icn-dd-right-arrow"></span>')},10)},onClose:function(h,k){setTimeout(function(){"Schedule"!=a.val()&&"Date/Time"!=a.val()||"date-picker"!=a.attr("id")||a.parent().next().val("Send");a.blur()},20)},beforeShow:function(h,k){calInst=k;if(""==a.val()&&"email_date"==a.attr("id"))a.val("Schedule");
else if(""==a.val()&&"expire_date"==a.attr("id"))a.val("Date/Time");else if("Schedule"==a.val()||"Date/Time"==a.val())h=c.getUTCHours()+4+TZ_OFFSET,23<h&&(h-=24);b="undefined"!=typeof k.settings?k.settings.timepicker.formattedDateTime:k.formattedDateTime;"Schedule"!=a.val()&&"Date/Time"!=a.val()&&b!=a.val()&&(b=a.val());a.offset();setTimeout(function(){$(document).scrollTop();$("#ui-datepicker-div").append('<span class="arrow icn-dd-right-arrow"></span>')},10)}}).focus(function(){var h=$(this);h.datepicker("show");
$(".ui-datepicker-close").click(function(){""==b&&"undefined"!=typeof calInst.settings&&(b=calInst.settings.timepicker.formattedDateTime);h.val(b);"email_date"==h.attr("id")&&(h.parent().children("span.caret").addClass("cancel"),$(".send_mail, .tweet, .share").text("Schedule Send"))})}).parent().hover()},set_cookie:function(a,c,b){var h=Jmp.Helpers.get_cookie_domain(),k=$.cookie(a);k&&(c=k+","+c);h={domain:h,path:"/"};"undefined"!==typeof b&&(h.expires=b);$.cookie(a,c,h)},set_fresh_cookie:function(a,
c,b){$.cookie(a)&&$.cookie(a,null,{domain:Jmp.Helpers.get_cookie_domain(),path:"/"});this.set_cookie(a,c,b)},delete_cookie:function(a){$.cookie(a)&&$.cookie(a,null,{domain:Jmp.Helpers.get_cookie_domain(),path:"/"})},get_cookie:function(a){return $.cookie(a)},get_cookie_domain:function(){return"."+window.location.host},remove_bucket_code_from_cookie_if_exist:function(a){var c=$.cookie("buckets_to_delete"),b=[];if(c){c=c.split(",");for(i=0;i<c.length;i++)c[i]!=a&&b.push(c[i]);c.length!=b.length&&(Jmp.Helpers.delete_cookie("buckets_to_delete"),
Jmp.Helpers.set_cookie("buckets_to_delete",b.join(",")))}},are_cookies_enabled:function(){var a=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1);return a},display_password_authentication_lightbox:function(a){Jmp.App.Lightbox.show({type:"password_authentication"},function(){var c=$("#password_authentication").val();if(""==c)return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your password"}).close_notification(),
!1;$.post(WS_PREFIX+"/accounts/authenticate_password",Jmp.Helpers.get_secure_params({password:c}),function(b){1==b.status?(Jmp.App.Lightbox.hide(),jQuery.isFunction(a)&&a()):Jmp.App.Notifications.display_notification({type:"error",message:b.message.replace("Old ","")}).close_notification()})})},display_cancel_plan_light_box:function(){var a=$(".cancel_plan").data("trial"),c=$("#upgrade-target .payment_method").val();Jmp.App.Lightbox.show({type:"cancel_plan",is_trial:a},function(){var b=this;$(this).html("Cancelling ...").addClass("disabled");
var h=$("#cancel_plan_reason").val();if(""==h.trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your reason for cancelling"}).close_notification(),$(this).html("Cancel Jumpshare Plus").removeClass("disabled"),!1;if("stripe"==c||"itunes"==c){var k=$('input[name="downgrade_option"]:checked').val();$.post(WS_PREFIX+"/accounts/downgrade/user",Jmp.Helpers.get_secure_params({pm:c,reason:h,downgrade_option:k}),function(l){1==l.status?($(".close_inline_modal").trigger("click"),
"immediately"==k?Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Free Plan."):Jmp.Helpers.set_cookie("accmsg","Your account will be downgraded to the Free plan when your current subscription expires"),$("#setting_palyment_btn").addClass("hide"),$(".cancel_plan").addClass("hide"),window.location=WS_PREFIX+"/personal"):(Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification(),$(b).html("Cancel Jumpshare Plus").removeClass("disabled"))})}else"paypal"==
c&&(Jmp.App.Lightbox.hide(),window.location="/paypal/cancel_paypal_account?reason="+encodeURIComponent(h))})},display_cancel_business_plan_light_box:function(a){var c=$(".cancel_business_plan").data("trial"),b=$("#payment_method").val(),h=parseInt($(a).data("plan")),k=1!==h?"cancel_business_plan_to_plus_reason":"cancel_business_plan_to_free_reason";Jmp.App.Lightbox.show(1!==h?{type:k,next_plan_id:h}:{type:k,is_trial:c},function(){var l=this;$(this).html("Cancelling ...").addClass("disabled");var m=
$("#cancel_plan_reason").val();if(""==m.trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your reason for cancelling"}).close_notification(),$(this).html("Cancel Jumpshare Business").removeClass("disabled"),!1;if("cancel_business_plan_to_free_reason"==k){var n=$('input[name="downgrade_option"]:checked').val();"stripe"==b?$.post(WS_PREFIX+"/accounts/downgrade/team",Jmp.Helpers.get_secure_params({pm:b,reason:m,downgrade_option:n}),function(p){1==p.status?("immediately"==
n?Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Free Plan."):Jmp.Helpers.set_cookie("accmsg","Your account will be downgraded to the Free plan when your current subscription expires"),window.location=WS_PREFIX+"/personal",$(".close_inline_modal").trigger("click"),$("#cancel_business_plan").addClass("hide"),$("#console_billing_btn").addClass("hide")):(Jmp.App.Notifications.display_notification({type:"error",message:p.message}).close_notification(),$(l).html("Cancel Jumpshare Business").removeClass("disabled"))}):
"paypal"==b&&(Jmp.App.Lightbox.hide(),window.location="/paypal/cancel_paypal_account?reason="+encodeURIComponent(m))}else"cancel_business_plan_to_plus_reason"==k&&"stripe"==b&&$.post(WS_PREFIX+"/accounts/downgrade/team",Jmp.Helpers.get_secure_params({pm:b,reason:m,npi:h}),function(p){1==p.status?(Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Plus plan"),window.location=WS_PREFIX+"/personal",$(".close_inline_modal").trigger("click")):(Jmp.App.Notifications.display_notification({type:"error",
message:p.message}).close_notification(),$(l).html("Cancel Jumpshare Business").removeClass("disabled"))})})},display_cancel_enterprise_plan_light_box:function(a){var c=$(".cancel_enterprise_plan").data("trial"),b=$("#payment_method").val(),h=parseInt($(a).data("plan")),k=5<h?"cancel_enterprise_plan_to_business_reason":1<h?"cancel_enterprise_plan_to_plus_reason":"cancel_enterprise_plan_to_free_reason";Jmp.App.Lightbox.show({type:k,next_plan_id:h,is_trial:c},function(){var l=this;$(this).html("Cancelling ...").addClass("disabled");
var m=$("#cancel_plan_reason").val();if(""==m.trim())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your reason for cancelling"}).close_notification(),$(this).html("Cancel Jumpshare Enterprise").removeClass("disabled"),!1;if("cancel_enterprise_plan_to_free_reason"==k){var n=$('input[name="downgrade_option"]:checked').val();"stripe"==b?$.post(WS_PREFIX+"/accounts/downgrade/team",Jmp.Helpers.get_secure_params({pm:b,reason:m,downgrade_option:n}),function(p){1==
p.status?("immediately"==n?Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Free Plan."):Jmp.Helpers.set_cookie("accmsg","Your account will be downgraded to the Free plan when your current subscription expires"),window.location=WS_PREFIX+"/personal",Jmp.App.Lightbox.hide(),$("#cancel_business_plan").addClass("hide"),$("#console_billing_btn").addClass("hide")):(Jmp.App.Notifications.display_notification({type:"error",message:p.message}).close_notification(),$(l).html("Cancel Jumpshare Enterprise").removeClass("disabled"))}):
"paypal"==b&&(Jmp.App.Lightbox.hide(),window.location="/paypal/cancel_paypal_account?reason="+encodeURIComponent(m))}else"cancel_enterprise_plan_to_plus_reason"!=k&&"cancel_enterprise_plan_to_business_reason"!=k||"stripe"!=b||$.post(WS_PREFIX+"/accounts/downgrade/team",Jmp.Helpers.get_secure_params({pm:b,reason:m,npi:h}),function(p){1==p.status?("cancel_enterprise_plan_to_plus_reason"==k?Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Plus plan"):"cancel_enterprise_plan_to_business_reason"==
k&&Jmp.Helpers.set_cookie("accmsg","Your account has been downgraded to the Business plan"),window.location=WS_PREFIX+"/personal",Jmp.App.Lightbox.hide()):(Jmp.App.Notifications.display_notification({type:"error",message:p.message}).close_notification(),$(l).html("Cancel Jumpshare Enterprise").removeClass("disabled"))})})},display_buy_now_business_plan_light_box:function(){var a=$("#business_buy_now").data("days"),c=$("#business_buy_now").data("plan-name");Jmp.App.Lightbox.show({type:"buy_now_business_plan",
daysLeft:a,planName:c},function(){$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Processing ...").addClass("disabled");Jmp.Helpers.process_buy_now_business_plan()})},process_buy_now_business_plan:function(){var a=$("#business_buy_now").data("row");$.post(WS_PREFIX+"/accounts/buy_business_now",Jmp.Helpers.get_secure_params({id:a}),function(c){Jmp.App.Lightbox.hide();1==c.status?($("#business_buy_now").parent().parent().addClass("hide"),$("#cancel_business_plan").text("Cancel Account"),
$("#div_account_status").text("Renewal date "+c.next_renewal),Jmp.App.Notifications.display_notification({type:"success",message:c.message}).close_notification()):111==c.status?stripe.confirmCardPayment(c.cs).then(function(b){b.paymentIntent?Jmp.Helpers.process_buy_now_business_plan():Jmp.App.Notifications.display_notification({type:"error",message:b.error.message}).close_notification()}):Jmp.App.Notifications.display_notification({type:"error",message:c.message}).close_notification()})},display_cancel_downgrade_process_light_box:function(){var a=
$("#cancel_downgrade_process").data("expire-time"),c=$("#cancel_downgrade_process").data("plan-name");Jmp.App.Lightbox.show({type:"cancel_downgrade_process",expireTime:a,planName:c},function(){var b=$("#cancel_downgrade_process").data("row");$("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Processing ...").addClass("disabled");$.post(WS_PREFIX+"/accounts/cancel_downgrade_process",Jmp.Helpers.get_secure_params({id:b}),function(h){Jmp.App.Lightbox.hide();1==h.status?($("#cancel_downgrade_process").parent().parent().addClass("hide"),
Jmp.App.Notifications.display_notification({type:"success",message:h.message}).close_notification(),$("#setting_palyment_btn").removeClass("hide"),$(".cancel_plan").removeClass("hide"),$("#cancel_business_plan").removeClass("hide"),$("#console_billing_btn").removeClass("hide")):Jmp.App.Notifications.display_notification({type:"error",message:h.message}).close_notification()})})},display_trial_modal:function(a,c){Jmp.App.Lightbox.show({type:"show_trial_modal",modal_type:a,user:c},function(){""==$("#firstNameTrial").val()||
""==$("#lastNameTrial").val()||""==$("#workemail").val()||""==$("#job_title_trial").val()||""==$("#companyname").val()||""==$("#companydomain").val()||"Please select"==$("#employees_text").text()?Jmp.App.Notifications.display_notification({type:"error",message:"Please complete the form, all fields are required."}).close_notification():($("#modal").find(".btn-submit.btn-blue:first").attr("disabled",!0).text("Submiting ...").addClass("disabled"),$.post(BASEURL+"/jumpshare/request_trial",Jmp.Helpers.get_secure_params({first_name:$("#firstNameTrial").val(),
last_name:$("#lastNameTrial").val(),email:$("#workemail").val(),job_title:$("#job_title_trial").val(),company_name:$("#companyname").val(),company_domain:$("#companydomain").val(),company_size:$("#employees_text").text(),plan:1==a?"Business":"Enterprise"}),function(b){1==b.status?Jmp.App.Notifications.display_notification({type:"success",message:b.message}).close_notification():Jmp.App.Notifications.display_notification({type:"error",message:b.message}).close_notification();Jmp.App.Lightbox.hide()}))});
""===c.logged_in||"0"===c.logged_in?$("#firstNameTrial").focus():$("#job_title_trial").focus();$(".trial_get_employees li a").click(function(b){b.preventDefault();$("#company_employees #employees_text").text($(this).text())})},is_lightbox_present:function(){return $("#lightbox").hasClass("hide")?!1:!0},is_at_valid_uploading_view:function(){var a=Jmp.App.getView().type;return("Team"==a&&(Jmp.Helpers.isBusinessPlanUser()||Jmp.Helpers.isEnterprisePlanUser()||Jmp.Helpers.isPlusPlanUser()||Jmp.Helpers.isFreePlanUser())||
"Buckets"==a||"BucketFiles"==a)&&("undefined"==typeof window.is_valid_owner||"true"==window.is_valid_owner)&&"true"==Jmp.Uploader.options.iur},is_connected:function(){return!0},show_notification_on_disconnected:function(){},remove_disconnected_notification:function(){Jmp.App.Notifications._get_total_entries().each(function(){var a=$(this);a.hasClass("permanent")&&a.remove()})},get_string_based_on_count:function(a,c,b,h){c=1==a?c:b;"undefined"!=typeof h&&(c=a+" "+c);return c},is_valid_location_for_real_time_updates:function(a){return a===
Jmp.App.getView().data.id||"root"==a&&"Buckets"==Jmp.App.getView().type||"team"==a&&"Team"==Jmp.App.getView().type||Jmp.Helpers.is_bucket_id_in_url(a)},is_bucket_id_in_url:function(a){return(a=window.location.href.toString().match(a))&&1<=a.length&&""!=a[0]},assign_route_class:function(a){$("body").hasClass("bucket-locked-page")&&(a+=" bucket-locked-page");$("body").removeAttr("class").attr("class",a)},add_viewer:function(a){var c=$("#"+a);0==c.length&&(c=$("li[data-id="+a+"]"));if(c.length){a=c.index();
var b=ViewerPanel.dom_parser;""==b.url_suffix&&b.assign_url_suffix();var h=c.attr("data-id");b.prepare_single({index:a,id:h,elem:c,url_suffix:b.url_suffix_address_bar});this.adjust_viewers();ViewerPanel.viewers_collection.fetch_by_id(h);ViewerPanel.manager.show_hide_navigation_buttons_and_footer_thumbs();ViewerPanel.header.update_title_items_count()}},update_viewer:function(a){var c=$("#"+a);if(c.length){var b=ViewerPanel.viewers_collection,h;if(h=b.fetch_by_id(a)){var k=h.index;b.remove_item_only(h.id);
b.remove_index(k);var l=h}else k=c.index();h=ViewerPanel.dom_parser;""==h.url_suffix&&h.assign_url_suffix();h.prepare_single({index:k,id:a,elem:c,url_suffix:h.url_suffix_address_bar});h=b.fetch_by_id(a);l&&l instanceof UploadingViewer&&(h instanceof DocumentViewer||h instanceof MediaViewer)&&(h.uploading=l,h.uploading.is_observing=!0,h.uploading.progress=100,h.loading_classes="load-viewer");ViewerPanel.viewers_collection.is_current_viewer(h)&&ViewerPanel.is_open()&&ViewerPanel.manager.move_at_specified(h.id)}},
delete_viewer:function(a){this.delete_viewers([a])},delete_viewers:function(a){for(var c=a.length,b=0;b<c;b++)ViewerPanel.viewers_collection.remove(a[b]);this.adjust_viewers()},adjust_viewers:function(){ViewerPanel.viewers_collection.adjust_viewers()},adjust_viewers_after_sorting:function(){ViewerPanel.viewers_collection.empty_item_ids();ViewerPanel.dom_parser.prepare_ids();ViewerPanel.viewers_collection.adjust_viewers()},add_viewer_real_time:function(a){ViewerPanel.viewers_collection.fetch_by_id(a.code)||
(a.id=a.code,a.bucket_file_code=a.code,a.bucket=a.parent,this.post_processing_after_creating_information_for_uploading_file(a),this.add_viewer(a.id))},update_viewer_real_time:function(a){ViewerPanel.viewers_collection.fetch_by_id(a.code)&&this.update_viewer(a.code)},cancel_viewer_real_time:function(a){"undefined"!=typeof a.bucket_file_code&&ViewerPanel.viewers_collection.fetch_by_id(a.bucket_file_code)&&($("#files_container").append(this.get_absent_item_for_viewer(a.bucket_file_code)),this.update_viewer(a.bucket_file_code))},
remove_absent_viewers:function(){if("BucketFiles"!=Jmp.App.getView().type)return!1;for(var a=ViewerPanel.viewers_collection.item_ids.length,c=[],b=0;b<a;b++){var h=ViewerPanel.viewers_collection.get_by_index(b);h&&h instanceof AbsentViewer&&(c.push(h.id),$("#"+h.id).remove())}this.delete_viewers(c)},remove_uploading_viewers:function(){if("BucketFiles"!=Jmp.App.getView().type)return!1;for(var a=ViewerPanel.viewers_collection.item_ids.length,c=[],b=0;b<a;b++){var h=ViewerPanel.viewers_collection.get_by_index(b);
h&&h instanceof UploadingViewer&&c.push(h.id)}this.delete_viewers(c)},get_absent_item_for_viewer:function(a){return"<li id='"+a+"' data-id='"+a+"' data-name='404' data-absent='1' class='grid hide'></li>"},decode_string:function(a){return null==a?"":String(a).replace(/&([^;]+);/g,function(c,b){var h;return b in escapeChars?escapeChars[b]:(h=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(h[1],16)):(h=b.match(/^#(\d+)$/))?String.fromCharCode(~~h[1]):c})},encode_string:function(a){if(null==
a)return"";a=String(a).replace(/[<>:"\/\\|?*]+/g,"");return String(a).replace(/[<>"']/g,function(c){return"&"+reversedEscapeChars[c]+";"})},get_copy_link_domain:function(a){var c=SHORT_BASEURL;Jmp.App.getView().type==Jmp.Handler.getRule("shared")?c=BASEURL:"undefined"==typeof SHORT_URL_STATUS||"0"!=SHORT_URL_STATUS&&""!=SHORT_URL_STATUS||"undefined"!=typeof a.attr("data-url")&&""!=a.attr("data-url")||(c=BASEURL);return c},get_short_url_code:function(a){var c="";if("undefined"!=typeof SHORT_URL_STATUS&&
("0"==SHORT_URL_STATUS||""==SHORT_URL_STATUS||Jmp.App.getView().type==Jmp.Handler.getRule("shared")))c=a.attr("data-link");else if("undefined"!=typeof SHORT_URL_STATUS&&"1"==SHORT_URL_STATUS&&"undefined"!=typeof a.attr("data-url")&&""!=a.attr("data-url"))c=a.attr("data-url");else if("undefined"!=typeof VIEW&&"public"!=VIEW){a=$.cookie("sc");if(null==a)return c;a=a.split("$");c=a[0]}return c},set_short_url_code:function(a,c,b,h){0==a.data("enabled")&&$.post(BASEURL_WS+"files/set_link/"+c,Jmp.Helpers.get_secure_params({type:b,
short_code:h}),function(k){1==k.status&&a.attr("data-url",k.link).data("url",k.link)})},post_processing_after_creating_information_for_uploading_file:function(a){var c=$("#"+a.id);if(1<=c.length){c.attr("data-id",a.bucket_file_code);c.find(".icn-cog-wheel").attr("data-id",a.id);c.find(".icn-checkbox").attr("data-id",a.id);a.bucket?c.find(".fake_ajax").removeClass("fake_ajax").addClass("ajax").removeAttr("onclick").attr("href","/"+VIEWER_SUBDIR+"/"+a.bucket_file_code+ViewerPanel.dom_parser.url_suffix_address_bar):
(c.find(".fake_ajax").removeClass("fake_ajax").addClass("temp_ajax").removeAttr("onclick").attr("href","/"+VIEWER_SUBDIR+"/"+a.bucket_file_code+ViewerPanel.dom_parser.url_suffix_address_bar).attr("data-id",a.bucket_file_code),c.find(".thumb-overlay").addClass("trigger_temp_ajax"));var b=c.find(".js-dropdown-menu");b.removeClass("hide");b.find(".email").removeClass("hide").attr("data-id",a.bucket_file_code);b.find(".copy-link").removeClass("hide").attr("data-link",""+VIEWER_SUBDIR+"/"+a.bucket_file_code);
b.find(".disabled").removeClass("hide");"1"==SHORT_URL_STATUS&&a.bucket_file_short_code?b.find(".copy-link").attr("data-url",a.bucket_file_short_code).attr("data-enabled","0"):-1==SHORT_BASEURL.indexOf("jmp.")&&b.find(".copy-link").attr("data-url",""+VIEWER_SUBDIR+"/"+a.bucket_file_code);if(a=$.cookie("pp_uploading"))"yes"==a&&c.find(".temp_ajax").trigger("click"),Jmp.Helpers.delete_cookie("pp_uploading")}},start_second_tour:function(){"undefined"!=typeof second_tour&&"Buckets"==Jmp.App.getView().type&&
(second_tour.init(),second_tour.restart())},end_first_tour_forcefully:function(){"undefined"!=typeof first_tour&&(first_tour.end(),$(".popover.tour").remove())},end_second_tour_forcefully:function(){"undefined"!=typeof second_tour&&(second_tour.end(),$(".popover.tour").remove(),second_tour=void 0)},end_tour_forcefully:function(){$(".popover.tour").remove()},check_uploading:function(a){if("undefined"!=typeof single_file_real_time_upload)return!1;single_file_real_time_upload=!0;Jmp.Helpers._check_uploading(a)},
_check_uploading:function(a){setTimeout(function(){$.get(WS_PREFIX+"/u/"+a,function(c){1==c.status?($("#"+a).replaceWith(c.bucket_file_template),Jmp.Helpers.update_viewer(a)):Jmp.Helpers._check_uploading(a)})},2E3)},show_folder_upload_not_supported:function(){Jmp.App.Lightbox.show({type:"upload_folder"});$("#upload_folder_downloading").replaceWith("<a href='/apps' id='upload_folder_downloading' class='btn btn-submit pull-right btn-blue' target='_blank'>Download Jumpshare</a>");$("#upload_folder_downloading").click(function(a){$("#lightbox").find(".cancel").trigger("click")})},
is_ie:function(){return $.browser.msie||Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},is_edge:function(){return-1<window.navigator.userAgent.indexOf("Edge")},enable_panel_ui_navigation:function(a){a=$("#"+a).find(".fake_ajax");a.attr("href",a.attr("data-href")).removeAttr("data-href").removeClass("fake_ajax").addClass("ajax")},disable_panel_ui_navigation:function(a){a=$("#"+a).find(".ajax");a.attr("data-href",a.attr("href")).attr("href","javascript:void(0)").removeClass("ajax").addClass("fake_ajax")},
display_sorting_options:function(){var a=Jmp.Helpers.get_folder_items_count(),c=Jmp.Helpers.get_lazy_load_items_threshold();1<=a&&a<=c&&$(".rearrange_sort_order").removeClass("disabled blockUI")},hide_sorting_options:function(){var a=Jmp.Helpers.get_folder_items_count(),c=Jmp.Helpers.get_lazy_load_items_threshold();(0==a||a>c)&&$(".rearrange_sort_order").addClass("disabled blockUI")},show_collection_sorting_options:function(){Jmp.Handler.getRule("_empty")==Jmp.App.getView().type&&$("#buckets_container").length&&
1<=$("#buckets_container").find("li.grid").length&&$(".collection_sorting").removeClass("hide")},hide_collection_sorting_options:function(){Jmp.Handler.getRule("_empty")==Jmp.App.getView().type&&$("#buckets_container").length&&0==$("#buckets_container").find("li.grid").length&&$(".collection_sorting").addClass("hide")},adjust_bucket_panel_ui_real_time:function(a){if("undefined"==typeof is_valid_owner||"true"!=is_valid_owner){a=$(a);var c="/b/"+Jmp.App.getView().data.id+"/"+a.attr("data-id"),b=a.find(".download").attr("data-link");
a.find(".thumb-title").attr("href",c);a.find(".icn-edit").remove();a.find(".js-panel-ui-label").remove();a.find(".js-dropdown-menu").html("<li><a class='import' data-id='"+a.attr("data-id")+"'>Save</a></li> <li><a class='download' data-link='"+b+"'>Download</a></li>")}return a},adjust_more_menu:function(){0==$("#files_container").find("li.grid").length?$("#more_menu").find(".download").addClass("disabled blockUI"):$("#more_menu").find(".download").removeClass("disabled blockUI")},highlight_items_timer:function(){""!=
Jmp.App.imported_id&&void 0!=Jmp.App.imported_id&&setTimeout(function(){$(Jmp.Helpers.get_container()+" #"+Jmp.App.imported_id).length&&Jmp.Helpers.highlight_items(Jmp.App.imported_id);Jmp.App.imported_id=""},500)},highlight_items:function(a,c){"undefined"==typeof c&&(c=!0);"array"!=$.type(a)&&(a=[a]);for(var b=a.length,h=0;h<b;h++)$(Jmp.Helpers.get_container()+" #"+a[h]).addClass("active");c&&b&&(c=$(Jmp.Helpers.get_container()+" #"+a[0]).offset().top,$("html, body").animate({scrollTop:c-165},2E3));
setTimeout(function(){for(var k=0;k<b;k++)$(Jmp.Helpers.get_container()+" #"+a[k]).removeClass("active")},5E3)},highlight_comments:function(a,c,b){"undefined"==typeof c&&(c=!0);"array"!=$.type(a)&&(a=[a]);var h=a.length;for(b=0;b<h;b++)$("#comment_card_"+a[b]).addClass("active");c&&h&&(c=$("#comment_card_"+a[0]).offset().top+$("#comments_wrapper").scrollTop(),console.log(c),$("#comments_wrapper").stop(),$("#comments_wrapper").animate({scrollTop:c-100},1E3));setTimeout(function(){for(var k=0;k<h;k++)$("#comment_card_"+
a[k]).removeClass("active")},3E3)},prepare_bucket_parents:function(){var a=$(".icn-back"),c=[];if(a.length&&"/"!=a.attr("href")){var b=a.next(".dropdown-menu").find("li");b.length?b.each(function(){var h=$(this).find("a");h.length&&"/"!=h.attr("href")&&c.push(h.attr("data-id"))}):c.push(a.attr("data-id"))}Jmp.App.getView().data.parents=c},is_custom_sort_menu_open:function(){return $(".sorting_menu").hasClass("hide")?!1:!0},get_pdf_output_dpi:function(a){var c=window.devicePixelRatio||2;2>c&&(c=2);
a=c/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1);return{sx:a,sy:a,scaled:1!==a}},is_mobile:function(){return ViewerPanel.is_mobile},get_folder_items_count:function(){return parseInt($("#folder-meta").find(".folders").attr("data-items-count"))},get_lazy_load_items_threshold:function(){return parseInt($("#folder-meta").find(".folders").attr("data-lazy-load-items-threshold"))},post_processing_after_items_fetched_from_lazy_loading:function(a){a=
js_uploader._uploadHandler._files;for(var c=a.length,b=Jmp.App.getView().data.id,h=!1,k=0;k<c;k++){var l=a[k];if(l&&l.bucket_file_code&&l.bucket==b&&l.replace){var m=$("#"+l.id);if(m.length&&$("#"+l.bucket_file_code).length&&0==$("#"+l.bucket_file_code+"-replace").length){h=$("#"+l.bucket_file_code);var n="";h.attr("id",l.bucket_file_code+"-replace").addClass("hide");m.attr("data-date",h.attr("data-date"));m.find(".thumb-footer .time").html(h.find(".time").html());m.find(".copy-link").attr("data-url",
h.find(".copy-link").attr("data-url"));n=h[0].outerHTML;h.replaceWith(m);$(Jmp.Uploader.options.listContainer()).append(n);h=!0}}}a=$("li.grid.replace");a.length&&a.each(function(p,r){r=$(r);p=r.attr("id");1<$("li.grid[id="+p+"]").length&&r.remove()});Jmp.Handler.Buckets.show_uploading_progress_for_buckets();h&&js_uploader._options._sort_uploading_files();ViewerPanel.uninitialize();ViewerPanel.initialize()},is_desktop_notifications_supported:function(){return"Notification"in window&&!ViewerPanel.is_mobile},
capitalize_word:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},small_case_first_letter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},is_global_comments_enabled:function(){return 1>$(".comments_status_disable").length},update_input_keyup:function(){$(".input-dependant").on("load propertychange keyup input paste",function(){var a=$(this).data("limit"),c=a-$(this).val().length;0>=c&&$(this).val($(this).val().substring(0,a));$(".countdown").text(0>=c?0:c)});$(".input-dependant").trigger("load")},
deepCountFolders:function(a){for(var c=Object.keys(a),b=0,h=0;h<c.length;h++)"object"===typeof a[c[h]]&&(b++,b+=Jmp.Helpers.deepCountFolders(a[c[h]]));return b},detect_mobile_os:function(){var a=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(a)?"windows_phone":/android/i.test(a)?"android":/iPad|iPhone|iPod/.test(a)&&!window.MSStream?"iOS":"unknown"},set_thumbs_width_on_resize:function(){$("#content_data").resize(function(){var a=$(".buckets.view-grid .thumbnail-wrapper .thumbnail.clearfix"),
c=a.width();a.css({height:.77*c})}).resize()},toggle_sidebar_dashboard:function(){$("aside").toggleClass("openSidebar");$(".close_sidebar_mobile_overlay").fadeToggle()},hide_sidebar_dashboard:function(){$("aside").removeClass("openSidebar");$(".close_sidebar_mobile_overlay").fadeOut()},is_mobile:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return!0;!1},get_container:function(a){var c=".buckets";0<$("#buckets_container").length?c="#buckets_container":
0<$("#files_container").length?c="#files_container":0<$("#search_result").length?c="#search_result":0<$("#trash_container").length&&(c="#trash_container");return"undefined"!=typeof a&&1==a?$(c):c},get_item:function(a){var c=$(Jmp.Helpers.get_container()+" #"+a);0==c.length&&(c=$("#"+a).first());return c},get_workspace_name:function(){return WORKSPACE_NAME},calculate_percentage:function(a,c){return(a/c*100).toFixed(4)},count_occurance_in_array:function(a,c){var b=0;a.forEach(function(h){h===c&&b++});
return b},msToTime:function(a){var c=new Date(1E3*a);a=c.getUTCHours();var b=c.getUTCMinutes();const h=c.getUTCSeconds().toString().padStart(2,"0");c=c.getUTCMilliseconds().toString().match(/[1-9]/)?.[0];b=`${b.toString().padStart(2,"0")}:${h}:${c?c:0}`;1<=a&&(b=`${a.toString().padStart(2,"0")}:${b}`);return b},secondsToMMSS:function(a){a=Math.floor(a);var c=Math.floor(a/60);a%=60;return(10>c?"0":"")+c+":"+(10>a?"0":"")+a},secondsToMS:function(a){var c=a.toString().split(".");a=parseInt(c[0]);c=1<
c.length?parseFloat("0."+c[1]):0;return 1E3*a+1E3*c},show_inline_modals:function(a){var c=!1,b=a.hasClass("forced"),h=a.closest("form").find(".modal_inline");0<h.length&&b?(h.addClass("sticky_modal hide_close"),c=!0,a.removeClass("forced")):0<h.length&&!b&&h.removeClass("sticky_modal hide_close");$("body").addClass("inline_modal_open");$(".inline_modal_wrapper").addClass("hide");a.parent().next().hasClass("inline_modal_wrapper")?a.parent().next().removeClass("hide"):a.parent().next().find(".inline_modal_wrapper").removeClass("hide");
a.parent().next().find(".modal_inline .form-control").first().focus();$(".modal_inline .modal-footer").removeClass("hide");a.parent().next().find(".inline_modal_wrapper").removeClass("hide");0===$(".modal_inline_backdrop").length&&$(".inline_modal_wrapper").append('<div class="modal_inline_backdrop"></div>');$(document).keyup(function(k){"Escape"!==k.key||c||($("body").removeClass("inline_modal_open"),k.stopPropagation())});$(".inline_modal_wrapper").live("mousedown",function(k){$(k.target).hasClass("modal_inline")&&
!$(k.target).hasClass("sticky_modal")&&Jmp.Helpers.hide_inline_modal()})},hide_inline_modal:function(){$("body").removeClass("inline_modal_open");$(document).unbind("keyup")},replace_all:function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a=a.split(b).join(c[b]));return a},capitalize_first_letter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},popup_center:function({url:a,title:c,w:b,h}){const k=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:
screen.width,l=k/window.screen.availWidth;a=window.open(a,c,`
		  scrollbars=yes,
		  width=${b/l}, 
		  height=${h/l}, 
		  top=${((window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)-h)/2/l+(void 0!==window.screenTop?window.screenTop:window.screenY)}, 
		  left=${(k-b)/2/l+(void 0!==window.screenLeft?window.screenLeft:window.screenX)}
		  `);window.focus&&a.focus()},download_srt:function(a,c){var b=document.createElement("a");b.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(c));b.setAttribute("download",a);b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b)},format_video_duration:function(a){const c=Math.floor(a/3600),b=Math.floor(a%3600/60);a%=60;return 0<c?`${1<c?`${c} hrs`:`${c} hr`} ${b} min`:0<b?0<a?`${b} min ${a} sec`:`${b} min`:`${a} sec`},validate_time_format:function(a){const [c,
b]=a.split(":").map(Number);return 0<=c&&0<=b&&59>=b?!0:!1},parse_time_format:function(a){const [c,b]=a.split(":").map(Number);return 60*c+b},format_time:function(a){const c=a%60;return String(Math.floor(a/60)).padStart(2,"0")+":"+String(c).padStart(2,"0")},format_media_time:function(a){const c=Math.floor(a/3600),b=Math.floor(a%3600/60);a%=60;return 0<c?`${c} : ${b} : ${a}`:`${b} : ${a}`},register_buy_add_on_event:function(){$("#go_to_buy_addon").unbind("click").bind("click",function(a){a.preventDefault();
$("#go_to_buy_addon").text("Buying ...").attr("disabled","disabled").addClass("disabled");a=new FormData;a.append("plan",5==PLANID?"21":"20");a.append("plan_plus_upgrade","yes");a.append(CSRF.token_name,CSRF.token_value);$.ajax({url:WS_PREFIX+"/accounts/change_card/plus",type:"POST",data:a,dataType:"json",processData:!1,contentType:!1,success:function(c){0==c.status?($("#go_to_buy_addon").removeClass("disabled").removeAttr("disabled").text("Buy Add-on"),Jmp.App.Notifications.display_notification({type:"error",
message:c.message}).close_notification()):(Jmp.App.Notifications.display_notification({type:"success",message:c.message}).close_notification(),Jmp.App.Lightbox.hide(),setTimeout(function(){window.location.reload(1)},2E3))},error:function(c,b,h){$("#go_to_buy_addon").removeClass("disabled").removeAttr("disabled").text("Buy Add-on");console.log("Error:",b,h)}})})},transcription_loading_message:function(){$(".loading_message_ui p").html("Loading...");$(".loading_message_ui span").html("");$(".loading_message_ui").removeClass("hide")},
transcription_no_speech_message:function(){$(".loading_message_ui p").html("Transcription is unavailable because not enough speech was detected. <br/> <br/> If you think this is a mistake, please <a style='color: #168eea;' href='mailto:hello@jumpshare.com'>Contact us</a>.");$(".loading_message_ui").removeClass("hide")},transcription_inprocess_message:function(){$(".loading_message_ui p").html("Generating transcription...");$(".loading_message_ui span").html("This may take a moment. If it's taking too long, please try refreshing the page.");
$(".loading_message_ui").removeClass("hide")},transcription_retry_message:function(){$(".loading_message_ui p").html("Transcript is unavailable");$(".loading_message_ui span").html("<a href='javascript:ViewerPanel.subtitles.generate_transcription(this);'>Generate transcription</a>");$(".loading_message_ui").removeClass("hide")},transcription_failed_to_load_message:function(){$(".loading_message_ui p").html("Transcript is unavailable");$(".loading_message_ui span").html("");$(".loading_message_ui").removeClass("hide")},
set_timed_cookie:function(a,c,b){const h=new Date;h.setTime(h.getTime()+6E4*b);b="expires="+h.toUTCString();document.cookie=a+"="+c+";"+b+";path=/"},get_timed_cookie:function(a){a+="=";const c=decodeURIComponent(document.cookie).split(";");for(let b=0;b<c.length;b++){let h=c[b];for(;" "==h.charAt(0);)h=h.substring(1);if(0==h.indexOf(a))return h.substring(a.length,h.length)}return null},request_upgrade_plan:function(a){var c=$(a),b=c.text();c.attr("disabled",!0).text("Sending ...").addClass("disabled");
"undefined"!==typeof ViewerPanel&&Jmp.Helpers.start_page_loading();$.ajax({url:WS_PREFIX+"/workspaces/request-upgrade?type=addon",type:"get",success:function(h){1==h.status?Jmp.App.Notifications.display_notification({type:"success",message:h.message}).close_notification():(c.removeAttr("disabled").text(b).removeClass("disabled"),Jmp.App.Notifications.display_notification({type:"error",message:h.message}).close_notification());$("#modal").find(".close").trigger("click");"undefined"!==typeof ViewerPanel&&
Jmp.Helpers.stop_page_loading()}})},debounce:function(a,c=300){let b;return(...h)=>{clearTimeout(b);b=setTimeout(()=>{a.apply(this,h)},c)}}};$(".request-upgrade").live("click",function(a){a.preventDefault();Jmp.App.Lightbox.show({type:"request_upgrade"},function(){Jmp.Helpers.request_upgrade_plan(this)})});
$("#version_upload_link").live("click",function(a){Jmp.Helpers.is_version_link=!0;Jmp.Helpers.version_extension=$(this).attr("data-ext");Jmp.Helpers.version_bucket_file_code=$(this).attr("data-id");$("#_upload_input").removeAttr("multiple")});$("#version_upload_link_free").live("click",function(a){Jmp.App.Lightbox.show({type:"previous_versions_free_popup"});return!1});var escapeChars={lt:"<",gt:">",quot:'"',apos:"'"},reversedEscapeChars={},key;
for(key in escapeChars)reversedEscapeChars[escapeChars[key]]=key;reversedEscapeChars["'"]="#39";ActivityManager={timer:void 0,interval:3E4,activity_container:{name:"#sidebar_nav_activities",head_container_name:"#head_notifications_container",get_container_name:function(){return this.name},get_head_container_name:function(){return this.head_container_name}},save_activity:function(a){$.post(WS_PREFIX+"/activities/save_activity",Jmp.Helpers.get_secure_params(a),function(){})},get_updates:function(){1<=$(this.activity_container.get_container_name()).length&&$.get(WS_PREFIX+"/activities/get_updates",
$.proxy(function(a){if(1<=$(this.activity_container.get_container_name()).length){if(1==a.status&&1<=a.new_activities_count){var c=$(this.activity_container.get_container_name());c.find(".badge").remove();c.append("<span class='badge'>"+a.new_activities_count+"</span>")}this.start_updater()}},this))},refresh_notifications:function(){ActivityManager.all_notifications_loaded=!1;ActivityManager.loading_notifications=!1;1<=$(this.activity_container.get_head_container_name()).length&&$.get(WS_PREFIX+"/activities/refresh_activities_panel",
$.proxy(function(a){1<=$(this.activity_container.get_head_container_name()).length&&($("#head_notifications_list_container").html(a),a=$("#head_notifications_list_container > span").first().attr("data-new_activities_count"),0<parseInt(a)?$(".top_activity_lnk .new_activity_count ").html(a).removeClass("hide"):$(".top_activity_lnk .new_activity_count ").addClass("hide"),$(this.activity_container.get_head_container_name()).attr("data-all_notifications_loaded","false"),$(this.activity_container.get_head_container_name()).attr("data-page",
"1"))},this))},loading_notifications:!1,load_next_notifications:function(){if(1<=$(this.activity_container.get_head_container_name()).length&&"true"!=$(this.activity_container.get_head_container_name()).attr("data-all_notifications_loaded")&&!ActivityManager.loading_notifications){ActivityManager.loading_notifications=!0;$("#notifications_container_loading div").css("visibility","").css("display","block");var a=$(this.activity_container.get_head_container_name()).attr("data-page");a=parseInt(a)+1;
$.get(WS_PREFIX+"/activities/refresh_activities_panel/page/"+a,$.proxy(function(c){ActivityManager.loading_notifications=!1;0==c.trim().length?($(this.activity_container.get_head_container_name()).attr("data-all_notifications_loaded","true"),$("#notifications_container_loading div").css("visibility","").css("display","none")):$("#notifications_container_loading div").css("display","").css("visibility","hidden");1<=$(this.activity_container.get_head_container_name()).length&&0<c.length&&($("#head_notifications_list_container").append(c),
$(this.activity_container.get_head_container_name()).attr("data-page",a))},this))}},start_updater:function(){this.clear_timeout();this.timer=setTimeout($.proxy(this.get_updates,this),this.interval)},clear_timeout:function(){clearTimeout(this.timer)},update_interval:function(a){"undefined"==typeof a&&(a=1);this.interval*=a;alert(this.interval)}};
PageVisibility={page_visibility_value:"",is_page_visibility_supported:null,bootstrap:function(){(this.page_visibility_value=this.check_page_visibility_supported())?(this.is_page_visibility_supported=!0,this.bind_page_visibility(this.get_event_name())):this.is_page_visibility_supported=!1},check_page_visibility_supported:function(){if("hidden"in document)return"hidden";var a=["webkit","moz","ms","o"];for(i=0;i<a.length;i++){var c=a[i];if(c+"Hidden"in document)return c+"Hidden"}return null},bind_page_visibility:function(a){$(document).bind(a,
$.proxy(function(){document[this.page_visibility_value]?ActivityManager.clear_timeout():ActivityManager.start_updater()},this))},get_event_name:function(){return this.page_visibility_value.replace(/[H|h]idden/,"")+"visibilitychange"}};
$("li.js-activity").live("click",function(a){$(this).removeClass("new-activity");if("false"==$(this).attr("data-isvalid"))setTimeout(function(){Jmp.App.Notifications.display_notification({type:"error",message:"Item no longer exists, the owner may have removed it."}).close_notification()},1E3);else if($(this).hasClass("locate"))Jmp.Handler.Search.onLocateInUploads($(this));a=$(this).attr("data-href");Jmp.App._address.path==a&&($(".top_activity_lnk").removeClass("open"),Jmp.Helpers.highlight_items_timer())});
$("a.top_activity_lnk_dropdown").live("click",function(){var a=0;$("#head_notifications_list_container > li.js-activity:lt(5)").each(function(){a+=$(this).outerHeight()});250>a&&(a=250);$(ActivityManager.activity_container.get_head_container_name()).height(a);$(".new_activity_count").hasClass("hide")?($(ActivityManager.activity_container.get_head_container_name()+" li.new-activity").removeClass("new-activity"),$(ActivityManager.activity_container.get_head_container_name()+" div.activity-new").removeClass("activity-new")):
$(".new_activity_count").addClass("hide")});$(".new_activity_count").live("click",function(){$.get(WS_PREFIX+"/activities/mark_all_activities_as_read",$.proxy(function(a){},this))});Jmp.Speed={speed_container:void 0,speed_container_name:".speed_container",remaining_time_container:void 0,remaining_time_container_name:".remaining_time",total_progress_bar_container:void 0,total_progress_bar_container_name:"#toaster_progress .progress_bar",total:0,last_uploaded:0,current_speed:0,ui_timer:void 0,ui_timer_delay:1E3,progress_interval:500,critical_timer:void 0,total_uploaded_data:0,bootstrap:function(){this.clear();this.last_calculate_time=(new Date).getTime();this.calculate_window_uploaded_data=
0;this.critical_timeout_occured=!1;this.speed_container=$(this.speed_container_name);this.remaining_time_container=$(this.remaining_time_container_name);this.total_progress_bar_container=$(this.total_progress_bar_container_name);this.set_update_ui()},update_speed:function(a,c){return this.calculate_current_speed(a,c)},calculate_current_speed:function(a,c){this.stop_critical();this.show_time_remaining();var b=c-this.last_uploaded;this.last_uploaded=c;this.total_uploaded_data+=b;this.calculate_window_uploaded_data+=
b;60<=((new Date).getTime()-this.last_calculate_time)/1E3&&(this.last_calculate_time=(new Date).getTime(),this.calculate_window_uploaded_data=0);a==c&&(this.last_uploaded=0);this.critical_timer=setTimeout($.proxy(this.critical,this),12E3)},clear:function(){this.current_speed=0},update_total:function(a){this.total+=a},decrement_total:function(a){this.total-=a},stop:function(){this.clear();this.stop_update_ui();this.stop_critical();this.total=this.total_uploaded_data=this.last_uploaded=0},critical:function(){this.critical_timeout_occured=
!0},stop_critical:function(){clearTimeout(this.critical_timer);this.critical_timeout_occured=!1},update_ui:function(){var a=this._prepare_message_for_files_progress(),c=this._prepare_message_for_remaining_time(),b=this._prepare_message_for_total_progress_bar(),h=this._calculate_transfer_rate();$(this.total_progress_bar_container).css("width",b+"%");this.notify_observers({transfer_rate:h,progress:b,uploading_stats:a,time_remaining:c});this.set_update_ui()},set_update_ui:function(){this.ui_timer&&this.stop_update_ui();
this.ui_timer=setTimeout($.proxy(this.update_ui,this),this.ui_timer_delay)},stop_update_ui:function(){clearTimeout(this.ui_timer)},notify_observers:function(a){Jmp.App.UploadProgress.updates(a)},_prepare_message_for_files_progress:function(){return{uploading:Jmp.Uploader.counts.uploading+1,total:Jmp.Uploader.counts.total}},_prepare_message_for_remaining_time:function(){var a=this._calculate_remaining_time();return this._format_remaining_time(a)},_calculate_transfer_rate:function(){if(this.critical_timeout_occured)return Jmp.Helpers.formatSize(this.current_speed)+
"/s";this.current_speed=this.calculate_window_uploaded_data/(((new Date).getTime()-this.last_calculate_time)/1E3);return Jmp.Helpers.formatSize(this.current_speed)+"/s"},_calculate_remaining_time:function(){var a=this.total-this.total_uploaded_data;0>=a&&(a=0);time_left=Math.abs(Math.round(a/this.current_speed));return isNaN(time_left)||0==isFinite(time_left)?0:time_left},_format_remaining_time:function(a){var c=["("];a=Jmp.Helpers.convert_seconds_to_time(a);0!=a.d&&c.push(Jmp.Helpers.get_string_based_on_count(a.d,
"day ","days ",!0));0!=a.h&&c.push(Jmp.Helpers.get_string_based_on_count(a.h,"hour ","hours ",!0));c.push(Jmp.Helpers.get_string_based_on_count(a.m,"min ","mins ",!0));0==a.d&&0==a.h&&c.push(Jmp.Helpers.get_string_based_on_count(a.s,"s","secs",!0));c.push(")");return c.join("")},show_time_remaining:function(){$(this.remaining_time_container_name).show()},hide_time_remaining:function(){$(this.remaining_time_container_name).hide()},get_critical_time_to_hide_time_remaining:function(){return"Remaining 0 mins 0 secs"},
_prepare_message_for_total_progress_bar:function(){return this.total_uploaded_data/this.total*100}};Jmp.App.Notifications={current_notification_type:"",notifications_container_name:{selector:"#",name:"notifications_container",full_name:function(){return this.selector+this.name}},hide_notification_timer:void 0,similar_notifications:"item_renamed folders_merged email_sent invited_for_collaboration files_imported item_locked item_expired success upload_completed collection_favorite desktop_push_notifications_web_setting restore_previous_version restore_trash_item empty_trash permanent_delete_trash_item success".split(" "),
display_notification:function(a){var c="";"embed_code_copied"==a.type?c=this._prepare_notification_for_embed_code_copied():"folder_link_copied"==a.type?c=this._prepare_notification_for_link_copied("Folder"):"file_link_copied"==a.type?c=this._prepare_notification_for_link_copied("File"):"file_direct_link_copied"==a.type?c=this._prepare_notification_for_direct_link_copied():"file_advanced_link_copied"==a.type?c=this._prepare_notification_for_advanced_link_copied():"folder_advanced_link_copied"==a.type?
c=this._prepare_notification_for_advanced_folder_link_copied():"invite_link_copied"==a.type?c=this._prepare_notification_for_link_copied("Invite"):"items_deleted"==a.type?c=this._prepare_notification_for_items_deleted(a):"files_copied"==a.type?(a.action_type="copied",c=this._prepare_notification_for_items_copied_or_moved(a)):"files_moved"==a.type?(a.action_type="moved",c=this._prepare_notification_for_items_copied_or_moved(a)):-1!=$.inArray(a.type,this.similar_notifications)?c=this._default_success_template(a.message):
"error"==a.type?c=this._default_error_template(a.message):"info"==a.type?c=this._default_info_template(a.message):"transcript_copied"==a.type&&(c=this._prepare_notification_for_transcript_copied());c=this._open_notification_bar(c);a.kind&&c.addClass("permanent");return this},_prepare_notification_for_items_uploading:function(){return'<div class="cntr_progress" id="toaster_progress"> \t\t\t\t\t\t\t\t\t\t\t\t<div class="progress_bar" style="width: 0%;"> \t\t\t\t\t\t\t\t\t\t\t\t\t<div class="barber_pole"></div> \t\t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<div class="media"> \t\t\t\t\t\t\t\t\t\t\t\t<div class="img_ext"> \t\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" id="toaster_cancel" class="js_cancel_all_uploads">Cancel</a> \t\t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t\t<div id="toaster_message" class="bd"> \t\t\t\t\t\t\t\t\t\t\t\t\t<div class="speed_container"></div> \t\t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t</div>'},
_prepare_notification_for_embed_code_copied:function(a){return this._default_success_template("Embed code copied to clipboard!")},_prepare_notification_for_link_copied:function(a){return this._default_success_template("Link copied to clipboard!")},_prepare_notification_for_direct_link_copied:function(){return this._default_success_template("Direct link copied to clipboard!")},_prepare_notification_for_advanced_link_copied:function(){return this._default_success_template("Advanced link copied to clipboard!")},
_prepare_notification_for_advanced_folder_link_copied:function(){return this._default_success_template("Advanced link copied to clipboard!")},_prepare_notification_for_transcript_copied:function(){return this._default_success_template("Transcription copied to clipboard!")},_prepare_notification_for_items_deleted:function(a){a.item_type=1<a.item_count?"items":"item";return this._default_success_template(a.item_count+"  "+a.item_type+" moved to Trash")},_prepare_notification_for_items_copied_or_moved:function(a){return this._default_success_template(a.item_count+
" "+(1==a.item_count?"item":"items")+" "+a.action_type+" successfully")},_open_notification_bar:function(a){var c=this.jq_notification=$(a);this._get_notifications_container().removeClass("hide").prepend(this.jq_notification);setTimeout(function(){c.addClass("stop")},50);this._remove_overflow_entries();return c},close_notification:function(a,c){"undefined"==typeof c&&(c=this.jq_notification);this.hide_notification_timer=setTimeout(function(){Jmp.App.Notifications._close_notification(c)},1E3*a||5E3);
return this},_close_notification:function(a){"undefined"!=typeof a&&this._close_single_notification(a)},_get_notifications_container:function(){return $(this.notifications_container_name.full_name())},_default_success_template:function(a){return this._default_template("alert-blue",a)},_default_error_template:function(a){return this._default_template("alert-red",a)},_default_info_template:function(a){return this._default_template("alert-info",a)},_default_template:function(a,c){return'<center class="js_notification animator" data-timestamp="'+
(new Date).getTime()+'"><div class="alert '+a+'">'+c+"</div></center>"},_close_single_notification:function(a){var c=$("[data-timestamp='"+a.attr("data-timestamp")+"']");c.addClass("boom");setTimeout(function(){c.remove();Jmp.App.Notifications.hide_if_empty()},5E15)},clear_timer:function(){},_remove_overflow_entries:function(){var a=this._get_total_entries();1<a.length&&a.each(function(c){var b=$(this);0<c&&!b.hasClass("permanent")&&b.remove()})},hide_if_empty:function(){0==this._get_total_entries().length&&
$(this._get_notifications_container()).addClass("hide")},_get_total_entries:function(){return $(this._get_notifications_container()).find(".js_notification")},_adjust_body_on_gloabl_notice:function(){$(".main-wrapper").resize(function(){$("body").hasClass("guest")||($("body").hasClass("global-notice")?($("body").css("padding-top",$(".notice-wrapper").height()+"px"),$("aside").attr("style"," height :calc(100% - "+$(".notice-wrapper").height()+"px) !important"),$("aside").css({top:$(".notice-wrapper").height()+
"px"}),$(".header-wrap.fixed").css({"margin-top":$(".notice-wrapper").height()+"px"}),$(".settings_tabs_top").css("top",$(".notice-wrapper").height()+138+"px"),768>$(window).width()?($("section.spacing_top").attr("style","margin-top : 75px !important"),$(".top_heading_dashboard").attr("style","top : -10px !important"),$("#settings_sidebar_rp").attr("style","top: "+$(".notice-wrapper").height()+"px !important;")):1024>$(window).width()?($("section.spacing_top").attr("style","margin-top :"+($(".notice-wrapper").height()+
170)+"px !important"),$(".top_heading_dashboard").attr("style","top :"+($(".notice-wrapper").height()+70)+"px !important"),$("#settings_sidebar_rp").attr("style","top: "+$(".notice-wrapper").height()+"px !important;")):($("section.spacing_top").attr("style","margin-top :"+($(".notice-wrapper").height()+120)+"px !important"),$(".top_heading_dashboard").attr("style","top :"+($(".notice-wrapper").height()+70)+"px !important"),$("#settings_sidebar_rp").attr("style","top: auto !important;"),$("#download_app_dashboard").css("margin-top",
"15px"),$("#empty_item_message").css("margin-top","18px"))):($("body").css("padding-top","0px"),$("aside").attr("style"," height : 100% !important"),$("aside").css({top:"0px"}),$(".header-wrap.fixed").css({"margin-top":"0px"}),$(".settings_tabs_top").css("top","145px"),768>$(window).width()?($("section.spacing_top").attr("style","margin-top : 75px"),$(".top_heading_dashboard").attr("style","top : 0px"),$("#settings_sidebar_rp").attr("style","top: 0px !important;")):1024>$(window).width()?($("section.spacing_top").attr("style",
"margin-top :"+($(".notice-wrapper").height()+170)+"px !important"),$(".top_heading_dashboard").attr("style","top : 75px !important"),$("#settings_sidebar_rp").attr("style","top: "+$(".notice-wrapper").height()+"px !important;")):($("section.spacing_top").attr("style","margin-top : 175px"),$(".top_heading_dashboard").attr("style","top : 75px !important"),$("#settings_sidebar_rp").attr("style","top: auto !important;"),$("#download_app_dashboard").css("margin-top","0"),$("#empty_item_message").css("margin-top",
"0"))))}).resize()},_reset_body_spacing_on_gloabl_notice_close:function(){$("body").css("padding-top","0px");$("aside").attr("style"," height : 100% !important");$("aside").css({top:"0px"});$(".header-wrap.fixed").css({"margin-top":"0px"});$(".settings_tabs_top").css("top","145px");768>$(window).width()?($("section.spacing_top").attr("style","margin-top : 75px"),$(".top_heading_dashboard").attr("style","top : 0px !important"),$("#settings_sidebar_rp").attr("style","top: 0px !important;")):1024>$(window).width()?
($("section.spacing_top").attr("style","margin-top :"+($(".notice-wrapper").height()+170)+"px !important"),$(".top_heading_dashboard").attr("style","top : 75px !important"),$("#settings_sidebar_rp").attr("style","top: "+$(".notice-wrapper").height()+"px !important;")):($("section.spacing_top").attr("style","margin-top : 175px"),$(".top_heading_dashboard").attr("style","top : 75px !important"),$("#settings_sidebar_rp").attr("style","top: auto !important;"),$("#download_app_dashboard").css("margin-top",
"0"),$("#empty_item_message").css("margin-top","0"))}};$(function(){$(".js_notification").live("click",function(a){a=$(a.target);a.hasClass("alert")&&!a.parent().hasClass("permanent")&&($(this).remove(),Jmp.App.Notifications.hide_if_empty());return!1});$("#alert-link").live("click",function(a){a.preventDefault();a=$(this).attr("href");a.startsWith("mailto:");window.location.href=a});0!=$("#top_welcome_bar").length&&$("#notifications_container").addClass("adition_noti_class");Jmp.App.Notifications._adjust_body_on_gloabl_notice()});Jmp.App.Lightbox={show:function(a,c){var b=this.get_main_overlay();"merge_buckets"==a.type?data=this._prepare_merge_buckets_form(a):"delete_multiple_items"==a.type?data=this._prepare_delete_items_form(a):"delete_single_item"==a.type?data=this._prepare_delete_item_form(a):"import_folder"==a.type?(a.is_sticky=!0,data=this._prepare_import_item_form(a)):"import_file"==a.type?data=this._prepare_import_items_form(a):"copy_files"==a.type||"move_files"==a.type||"copy_move_items"==a.type?(a.is_sticky=!0,data=
this._prepare_copy_or_move_items_form(a)):"copy_link"==a.type?data=this._prepare_lightbox_for_link_copied(a):"send_email"==a.type?data=this._prepare_send_email_items_form(a):"change_email"==a.type?data=this._prepare_change_email_popup(a):"resend_verify_email"==a.type?data=this._prepare_verify_email_address(a):"request_upgrade"==a.type?data=this._prepare_request_upgrade_form(a):"lock_bucket"==a.type?data=this._prepare_lock_bucket_form(a):"gmail_contacts"==a.type?data=this._prepare_gmail_contacts_form(a):
"referrals_details"==a.type?data=this._prepare_referrals_details_form(a):"unlock_bucket"==a.type?data=this._prepare_unlock_bucket_form(a):"error_message"==a.type?data=this._prepare_lightbox_for_error_message(a):"large_folder_upload_error_message"==a.type?data=this._prepare_lightbox_for_large_folder_upload_error_message(a):"file_size_error"==a.type?data=this._prepare_lightbox_for_file_size_error(a):"download_large_zip"==a.type?data=this._prepare_download_large_zip(a):"insufficient_user_storage"==a.type?
(data1=this._prepare_lightbox_for_storage_full_and_upgrade(a),data2=this._prepare_lightbox_for_insufficient_user_storage(a),data=[data1,data2]):"bucket_file_limit_reached"==a.type?data=this._prepare_lightbox_for_bucket_file_limit_reached(a):"no_storage_left_share_disabled"==a.type?data=this._prepare_lightbox_for_no_storage_left_share_disabled(a):"no_storage_left_download_disabled"==a.type?data=this._prepare_lightbox_for_no_storage_left_download_disabled(a):"merge_failed"==a.type?data=this._prepare_lightbox_for_merge_failed(a):
"bucket_owner_mismatch"==a.type?data=this._prepare_lightbox_for_bucket_owner_mismatch(a):"signup_form"==a.type?data=this._prepare_lightbox_for_signup_form(a):"expire_bucket"==a.type?data=this._prepare_bucket_expiration_form(a):"confirm_expire_bucket"==a.type?data=this._prepare_bucket_expiration_confirmation(a):"defuse_bucket"==a.type?data=this._prepare_defuse_timebomb_form(a):"delete_schedule"==a.type?data=this._prepare_delete_schedule(a):"remove_photo"==a.type?data=this._prepare_remove_photo(a):
"delete_account"==a.type?data=this._prepare_delete_account_form(a):"leave_workspace"==a.type?data=this._prepare_leave_workspace_form(a):"delete_workspace"==a.type?data=this._prepare_delete_workspace_form(a):"export_data"==a.type?data=this._prepare_export_data_form(a):"cancel_plan"==a.type?data=this._prepare_cancel_plan_form(a):"create_new_inbox_dialog"==a.type?data=this._prepare_create_new_inbox_dialog(a):"choose_inbox_folder_dialog"==a.type?data=this._prepare_choose_inbox_folder_form(a):"share_inbox_dialog"==
a.type?data=this._prepare_share_inbox_dialog(a):"delete_inbox_dialog"==a.type?data=this._prepare_delete_inbox_dialog(a):"upgrade_inbox_dialog"==a.type?data=this._prepare_lightbox_for_upgrade_inbox_dialog(a):"cancel_business_plan"==a.type?data=this._prepare_cancel_business_plan_form(a):"cancel_enterprise_plan"==a.type?data=this._prepare_cancel_enterprise_plan_form(a):"buy_now_business_plan"==a.type?data=this._prepare_buy_now_business_plan_form(a):"cancel_downgrade_process"==a.type?data=this._prepare_cancel_downgrade_process_popup(a):
"cancel_business_plan_to_free_reason"==a.type?data=this._prepare_cancel_business_plan_to_free_reason_form(a):"cancel_business_plan_to_plus_reason"==a.type?data=this._prepare_cancel_business_plan_to_plus_reason_form(a):"cancel_enterprise_plan_to_plus_reason"==a.type?data=this._prepare_cancel_enterprise_plan_to_plus_reason_form(a):"cancel_enterprise_plan_to_business_reason"==a.type?data=this._prepare_cancel_enterprise_plan_to_business_reason_form(a):"cancel_enterprise_plan_to_free_reason"==a.type?data=
this._prepare_cancel_enterprise_plan_to_free_reason_form(a):"password_authentication"==a.type?data=this._prepare_password_authentication_form():"payment_cycle_period"==a.type?data=this._prepare_payment_cycle_period_form():"feedback"==a.type?data=this._prepare_feedback_form():"invite_not_allowed"==a.type?data=this._prepare_invite_not_allowed():"new_workspace_form"==a.type?data=this._prepare_new_workspace_form():"default_workspace_form"==a.type?data=this._prepare_default_workspace_form():"fair_usage_policy"==
a.type?data=this._prepare_fair_usage_policy():"fair_usage_policy_free_user"==a.type?data=this._prepare_fair_usage_policy_free_user():"fair_usage_policy_plus_user"==a.type?data=this._prepare_fair_usage_policy_plus_user():"fair_usage_policy_business_user"==a.type?data=this._prepare_fair_usage_policy_business_user():"fair_usage_policy_enterprise_user"==a.type?data=this._prepare_fair_usage_policy_enterprise_user():"upload_folder"==a.type?data=this._prepare_upload_folder():"analytics_popup"==a.type?data=
this._prepare_analytics_popup(a):"file_replace_popup"==a.type?data=this._prepare_file_replace_popup(a):"create_folder"==a.type?data=this._prepare_create_folder_popup(a):"item_rename_popup"==a.type?data=this._prepare_item_rename_popup(a):"mobile_copy_link"==a.type?data=this._prepare_lightbox_for_link_copied(a):"remove_share"==a.type?data=this._prepare_lightbox_for_remove_share(a):"remove_viewed"==a.type?data=this._prepare_lightbox_for_remove_viewed(a):"view_share_item_details"==a.type?data=this._prepare_lightbox_for_view_share_item_details(a):
"sliced_uploading_not_supported"==a.type?data=this._prepare_lightbox_for_sliced_uploading_not_supported(a):"upload_extension_not_supported"==a.type?data=this._prepare_lightbox_for_upload_extension_not_supported(a):"subtitle_empty_issue"==a.type?data=this._prepare_lightbox_for_subtitle_empty_issue(a):"subtitle_too_long"==a.type?data=this._prepare_lightbox_for_subtitle_too_long(a):"subtitle_required_one_word"==a.type?data=this._prepare_lightbox_for_subtitle_required_one_word(a):"direct_link_popup"==
a.type?data=this._prepare_lightbox_for_direct_link_popup(a):"upload_executable_popup"==a.type?data=this._prepare_lightbox_for_upload_executable_popup(a):"upgrade_to_upload_files"==a.type?data=this._prepare_lightbox_for_upgrade_to_upload_files(a):"upload_free_trial_user_popup"==a.type?data=this._prepare_lightbox_for_upload_free_trial_user_popup(a):"upload_size_limit_exceeded_popup"==a.type?data=this._prepare_lightbox_for_upload_size_limit_exceeded_popup(a):"links_disabled_for_security_reasons"==a.type?
data=this._prepare_links_disabled_for_security_reasons_popup(a):"enable_links_popup"==a.type?data=this._prepare_lightbox_for_enable_links_popup(a):"enable_links_in_trial_popup"==a.type?data=this._prepare_lightbox_for_enable_links_in_trial_popup(a):"enable_links_text_selection_popup"==a.type?data=this._prepare_lightbox_for_enable_links_text_selection_popup(a):"enable_text_selection_in_trial_popup"==a.type?data=this._prepare_lightbox_for_enable_text_selection_in_trial_popup(a):"links_text_disabled_security_popup"==
a.type?data=this._prepare_lightbox_for_links_text_disabled_security_popup(a):"desktop_push_notifications_web_popup"==a.type?data=this._prepare_desktop_push_notifications_web_popup():"previous_versions_free_popup"==a.type?data=this._prepare_previous_versions_free_popup():"restore_previous_version"==a.type?data=this._prepare_restore_previous_version_popup(a):"restore_trash_item_free_popup"==a.type?data=this._prepare_restore_trash_item_free_popup(a):"empty_trash_popup"==a.type?data=this._prepare_empty_trash_popup(a):
"permanent_delete_trash_item_popup"==a.type?data=this._prepare_permanent_delete_trash_item_popup(a):"permanent_delete_trash_items_popup"==a.type?data=this._prepare_permanent_delete_trash_items_popup(a):"restore_trash_items_popup"==a.type?data=this._prepare_restore_trash_items_popup(a):"delete_comment"==a.type?data=this._prepare_delete_comment_popup(a):"new_note"==a.type?data=this._prepare_new_note_form(a):"edit_note"==a.type?data=this._prepare_edit_note_form(a):"no_hd_preview_free"==a.type?data=this._prepare_no_hd_preview_free(a):
"no_hd_preview_plus"==a.type?data=this._prepare_no_hd_preview_plus(a):"no_hd_preview_guest"==a.type?data=this._prepare_no_hd_preview_guest(a):"upgrade_plan_popup"==a.type?data=this._prepare_upgrade_plan_popup(a):"zapier_integration_popup"==a.type?data=this._prepare_zapier_integration_popup(a):"slack_integration_popup"==a.type?data=this._prepare_slack_integration_popup(a):"comments_limit_exceeded"==a.type?data=this._prepare_comments_limit_exceeded_popup(a):"invite_members"==a.type?data=this._prepare_invite_members_popup(a):
"upgrade_survey"==a.type?data=this._prepare_upgrade_survey_popup(a):"password_change_reminder"==a.type?data=this._prepare_password_change_reminder_popup(a):"password_change_forceful"==a.type?data=this._prepare_password_change_forceful_popup(a):"remove_invitation"==a.type?data=this._prepare_remove_invitation_popup(a):"make_owner"==a.type?data=this._prepare_make_owner_popup(a):"make_admin"==a.type?data=this._prepare_make_admin_popup(a):"remove_admin_status"==a.type?data=this._prepare_remove_admin_status_popup(a):
"reset_password"==a.type?data=this._prepare_reset_password_popup(a):"remove_user_confirmation"==a.type?data=this._prepare_remove_user_confirmation_popup(a):"remove_user"==a.type?data=this._prepare_remove_user_popup(a):"invite_through_email"==a.type?data=this._prepare_invite_through_email(a):"invite_through_email_list"==a.type?data=this._prepare_invite_through_email_list(a):"merge_videos_together"==a.type?data=this._prepare_merge_videos_together(a):"report_file_suspicious"==a.type?data=this._prepare_report_file_suspicious_popup(a):
"generic_confirmation_dialog"==a.type?data=this._prepare_generic_confirmation_dialog(a):"show_take_screenshot_modal"==a.type?data=this._prepare_show_take_screenshot_modal(a):"add_seats"==a.type?data=this._prepare_add_seats_form(a):"show_hubspot_modal"==a.type?data=this._prepare_show_hubspot_modal(a):"show_trial_modal"==a.type?data=this._prepare_show_trial_modal(a):"upgrade_to_business_subtitles_free"==a.type?data=this._prepare_upgrade_to_business_subtitles_free(a):"upgrade_to_business_subtitles_plus"==
a.type?data=this._prepare_upgrade_to_business_subtitles_plus(a):"remove_summary_confirmation"==a.type?data=this._prepare_remove_summary(a):"remove_chapters_confirmation"==a.type?data=this._prepare_remove_chapters(a):"upgrade_to_business_AI_free"==a.type?data=this._prepare_upgrade_to_business_AI_free(a):"upgrade_to_business_AI_plus"==a.type?data=this._prepare_upgrade_to_business_AI_plus(a):"upgrade_to_business_transcription_free"==a.type?data=this._prepare_upgrade_to_business_transcription_free(a):
"upgrade_to_business_transcription_plus"==a.type?data=this._prepare_upgrade_to_business_transcription_plus(a):"ask_owner_for_transcription"==a.type?data=this._prepare_ask_owner_for_transcription(a):"subtitle_extras_unavailable_owner"==a.type?data=this._prepare_subtitle_extras_unavailable_owner(a):"subtitle_extras_unavailable_guest"==a.type?data=this._prepare_subtitle_extras_unavailable_guest(a):"uprade_to_plus_trim"==a.type?data=this._prepare_upgrade_to_plus_trim(a):"upgrade_to_advanced_options_free"==
a.type?data=this._prepare_upgrade_to_advanced_options_free(a):"upgrade_to_advanced_options_plus"==a.type?data=this._prepare_upgrade_to_advanced_options_plus(a):"remove_advanced_video_pack"==a.type?data=this._prepare_remove_advanced_video_pack(a):"different_format_upload_on_programatic_pages"==a.type?data=this._prepare_different_format_upload_on_programatic_pages(a):"programatic_multi_file_upload"==a.type?data=this._prepare_programatic_multi_file_upload(a):"programatic_uploaded_larger_file"==a.type?
data=this._prepare_programatic_uploaded_larger_file(a):"programatic_uploaded_daily_limit_reached"==a.type?data=this._prepare_programatic_uploaded_daily_limit_reached(a):"trim_away_confirmation"==a.type?data=this._prepare_trim_away_confirmation_popup(a):"not_allowed_add_clip"==a.type?data=this._prepare_not_allowed_add_clip(a):"not_allowed_trim_file_size"==a.type?data=this._prepare_not_allowed_trim_file_size(a):"trim_save_as_popup"==a.type&&(data=this._prepare_trim_save_as_popup(a));$("#lightbox .modal-backdrop").removeClass("hide");
a.is_sticky?$("#lightbox").addClass("stick_modal"):$("#lightbox").removeClass("stick_modal");a.hide_close?$("#lightbox").addClass("hide_close"):$("#lightbox").removeClass("hide_close");if(b){var h="",k=$("#modal"),l=0,m=$(document).scrollTop(),n="";n=$(document).height()>$(window).height()&&$("html").hasClass("windows")?"adjust_scroll_styles":"";b.removeClass("hide");$("body").addClass("modal-open "+n).css("top",-m+"px");if("send_email"==a.type){for(;l<data.length;)h+=this._share_html(data[l],data[l].type),
l++;h=this._default_template(h)}else if("insufficient_user_storage"==a.type){for(b=["upgrade","insufficient"];l<data.length;)h+=this._share_html(data[l],b[l]),l++;h=this._default_template(h)}else h=this._make_html(data);k.html(h);if(jQuery.isFunction(c))if(h=k.find(".btn:not(.btn-nonmain):first"),"password_authentication"==a.type||"feedback"==a.type||"cancel_plan"==a.type||"cancel_business_plan_to_plus_reason"==a.type||"cancel_business_plan_to_free_reason"==a.type||"delete_account"==a.type)h.on("click",
function(p){c.call(this);return!1});else if("import_folder"==a.type)a=h.next(".btn.sac"),h.on("click",function(p){c.call(this);return!1}),a.on("click",function(p){c.call(this);return!1});else if("file_size_error"==a.type)h.on("click",function(p){c.call(this)});else if("show_trial_modal"==a.type)h=k.find(".btn-blue:first"),h.on("click",function(p){c.call(this)});else h.on("click",function(p){c.call(this);return!1})}},_prepare_merge_buckets_form:function(a){var c={};c.header=a.title;c.body='<form role="form" id="'+
a.form+'" onSubmit="javascript: return false;">\t\t\t\t\t\t\t<label for="new_bucket_name">Enter new folder name:</label>\t\t\t\t\t\t\t<div class="input-group input-group-lg input-with-icon">\t\t\t\t\t\t\t  <span class="input-group-addon mergeicon"><span class="icn-folder-small"></span></span>\t\t\t\t\t\t\t  <input type="text" class="form-control mergeInputfield" placeholder="Folder name" id="merge-folder" name="new_bucket_name"></div>';c.body+='<input type="hidden" name="bucket_ids" id="bucket_ids" value="'+
a.bucket_ids.toString()+'">\t\t\t\t\t\t\t<input type="hidden" name="file_ids" id="file_ids" value="'+a.file_ids.toString()+'">\t\t\t\t\t\t\t<input type="hidden" name="total_items" id="total_items" value="'+a.total_items+'"></form>';c.buttons=[{type:"action",text:"Merge",style:{klass:"merge-buckets-form-submit"}},{type:"cancel"}];c.body+=this.error_template_for_inside_lightbox();return c},_prepare_delete_items_form:function(a){var c={},b;"items"==a.item_type?b="item":"files"==a.item_type?b="file":
"buckets"==a.item_type&&(b="folder");c.header="Delete "+Jmp.Helpers.get_string_based_on_count(a.items_count,b,b+"s",!0)+"?";a=1==a.items_count?"the "+b+" '<strong style='word-break: break-all;'>"+a.item_name+"</strong>'":Jmp.Helpers.get_string_based_on_count(a.items_count,b,b+"s",!0);c.body="Are you sure you want to delete "+a+"?";c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_delete_item_form:function(a){var c={},b="file"==a.item_type?"file":
"folder";c.header=a.title;c.body="Are you sure you want to delete the "+b+" '<strong style='word-break: break-all;'>"+Jmp.Helpers.formatFileName(a.item_name,30)+"</strong>'?";c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_import_item_form:function(a){var c={};c.header="Save '"+a.new_bucket_name+"' to...";c.body="";c.body+=a.body;c.buttons=[{type:"action",text:"Save",style:{klass:"import-button"}},{type:"cancel"}];return c},_prepare_import_items_form:function(a){var c=
{};c.header="Save '"+a.item_name+"' to...";var b=a.body;b+='<div id="c-new-folder"><label for="import-folder" class="hide">'+(1<=$(a.body).find("li").length?"Or create ":"Create ")+'a new folder:</label> \t\t\t\t\t\t<form action="" method="post" enctype="multipart/form-data" id="'+a.form+'"> \t\t\t\t\t\t\t<i class="icons-folder-list hide"></i> \t\t\t\t\t\t\t<input type="text" placeholder="Folder name" id="import-folder" class="new_bucket_name form-control hide" name="new_bucket_name" value=""> \t\t\t\t\t\t\t<input type="hidden" name="file_code" id="file_code" value="'+
a.item_id+'">';c.buttons=[{type:"action",text:"Save",style:{klass:"import-button"}},{type:"cancel"}];b+=this.error_template_for_inside_lightbox();c.body=b;return c},_prepare_bucket_expiration_form:function(a){var c={};if(1<PLANID){c.header="Self-Destruct";var b='<span class="msg">Select a time below for when this '+a.text+" should automatically be deleted.</span>";b+='<div class="modal-footer clearfix">\t\t\t\t\t<form action="buckets/expire" method="post" enctype="multipart/form-data" id="item-expiration-form"> \t\t\t\t\t\t\x3c!-- Single button --\x3e\t\t\t\t\t\t<div class="btn-group btn-compact self-destruct-options pull-left">\t\t\t\t\t\t  <button id="select_time_duration" type="button" class="btn btn-default btn-self-destruct dropdown-toggle" data-value="24 hours" data-toggle="dropdown">\t\t\t\t\t\t    24 hours <span class="caret"></span>\t\t\t\t\t\t  </button>\t\t\t\t\t\t  <ul class="time_duration_dropdown dropdown-menu" role="menu">\t\t\t\t\t\t    <li><a href="#">24 hours</a></li>\t\t\t\t\t\t    <li><a href="#">48 hours</a></li>\t\t\t\t\t\t    <li><a href="#">7 days</a></li>\t\t\t\t\t\t    <li><a href="#">14 days</a></li>\t\t\t\t\t\t    <li><a href="#">30 days</a></li>\t\t\t\t\t\t    <li><a href="#">Custom</a></li>\t\t\t\t\t\t  </ul>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="pull-left"><input type="hidden" name="item_code" id="item-code" value="'+
a.item_id+'">\t\t\t\t\t\t<input type="hidden" name="item_type" id="item-type" value="'+a.item_type+'">\t\t\t\t\t\t<input type="hidden" id="time_duration" name="time_duration" value="24 hours">\t\t\t\t\t\t<div class="custom-date pull-left hide">\t\t\t\t\t\t<span class="icn-schedule-calendar"></span>\t\t\t\t\t\t<input type="text" class="distxts" name="expire_date" id="expire_date" value="Date/Time" style="width:80px;" readonly="" Style="display: none">\t\t\t\t\t\t<span class="caret"></span></div>\t\t\t\t\t\t</div><button class="btn btn-blue btn-submit pull-right" id="set_self_destruct" type="button">Self-Destruct</button></form></div>';
c.body=b;c.buttons=[]}else c.header="Self-Destruct",c.body="Control how long your files will stay online to keep sharing extra secure. This feature is only part of our Jumpshare Plus plan. Would you like to upgrade?",c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return c},_prepare_invite_through_email:function(a){var c={};c.header=a.header;c.body='<div class="invite_email_friends_modal">';c.body+="<p>"+
a.description+"</p>";c.body+='<div class="search-bar">';c.body+='<span class="icn-search"></span>';c.body+='<input type="text" disabled name="email_search" class="form-control invite_email_sarch pull-right">';c.body+="</div>";c.body+='<div class="activity_placeholder_wrapper placeholder_emails">';c.body+='<ul class="activity_placeholder">';c.body+="<li>";c.body+='<div class="usr_actr_placeholder"></div>';c.body+='<div class="info_actr_placeholder">';c.body+="<h3></h3>";c.body+="<h5></h5>";c.body+=
"</div>";c.body+='<div class="circle_invite_check"></div>';c.body+="</li>";c.body+="<li>";c.body+='<div class="usr_actr_placeholder"></div>';c.body+='<div class="info_actr_placeholder">';c.body+="<h3></h3>";c.body+="<h5></h5>";c.body+="</div>";c.body+='<div class="circle_invite_check"></div>';c.body+="</li>";c.body+="<li>";c.body+='<div class="usr_actr_placeholder"></div>';c.body+='<div class="info_actr_placeholder">';c.body+="<h3></h3>";c.body+="<h5></h5>";c.body+="</div>";c.body+='<div class="circle_invite_check"></div>';
c.body+="</li>";c.body+="</ul>";c.body+='<div class="email_links_section">';c.body+='<a href="#" class="invite-btn gmil" id="invite_gmail"><span class="googleicninvite"><svg width="16px" height="16px" viewBox="0 0 16 16"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="google-logo" fill="#C71610" fill-rule="nonzero"><path d="M8.018061,6.870991 L8.018061,9.580612 L12.500226,9.580612 C12.319585,10.743491 11.145415,12.990219 8.018061,12.990219 C5.31973,12.990219 3.118163,10.754781 3.118163,8 C3.118163,5.245219 5.31973,3.009781 8.018061,3.009781 C9.553513,3.009781 10.580911,3.664606 11.167996,4.229111 L13.313112,2.163025 C11.935722,0.875955 10.151888,0.096939 8.018061,0.096939 C3.648797,0.096939 0.115,3.630736 0.115,8 C0.115,12.369264 3.648797,15.903061 8.018061,15.903061 C12.579257,15.903061 15.605,12.696676 15.605,8.180641 C15.605,7.661297 15.54855,7.266144 15.480809,6.870991 L8.018061,6.870991 L8.018061,6.870991 Z" id="Path"></path></g></g></svg></span>Invite using Gmail</a>';
c.body+='<span class="divdr">Or,</span>';c.body+='<ul id="footer_social" class="footer_social help_social">';c.body+='<li class="fb"><a href="#">';c.body+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="14px" height="14px" viewBox="0 0 96.124 96.123" style="enable-background:new 0 0 96.124 96.123;" xml:space="preserve">';c.body+='<g><path d="M72.089,0.02L59.624,0C45.62,0,36.57,9.285,36.57,23.656v10.907H24.037c-1.083,0-1.96,0.878-1.96,1.961v15.803   c0,1.083,0.878,1.96,1.96,1.96h12.533v39.876c0,1.083,0.877,1.96,1.96,1.96h16.352c1.083,0,1.96-0.878,1.96-1.96V54.287h14.654   c1.083,0,1.96-0.877,1.96-1.96l0.006-15.803c0-0.52-0.207-1.018-0.574-1.386c-0.367-0.368-0.867-0.575-1.387-0.575H56.842v-9.246   c0-4.444,1.059-6.7,6.848-6.7l8.397-0.003c1.082,0,1.959-0.878,1.959-1.96V1.98C74.046,0.899,73.17,0.022,72.089,0.02z" fill="#3C5A99"/></g>';
c.body+="</svg>";c.body+="</a></li>";c.body+='<li class="tw"><a href="#">';c.body+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve" width="14px" height="14px">';c.body+='<g><path d="M612,116.258c-22.525,9.981-46.694,16.75-72.088,19.772c25.929-15.527,45.777-40.155,55.184-69.411    c-24.322,14.379-51.169,24.82-79.775,30.48c-22.907-24.437-55.49-39.658-91.63-39.658c-69.334,0-125.551,56.217-125.551,125.513    c0,9.828,1.109,19.427,3.251,28.606C197.065,206.32,104.556,156.337,42.641,80.386c-10.823,18.51-16.98,40.078-16.98,63.101    c0,43.559,22.181,81.993,55.835,104.479c-20.575-0.688-39.926-6.348-56.867-15.756v1.568c0,60.806,43.291,111.554,100.693,123.104    c-10.517,2.83-21.607,4.398-33.08,4.398c-8.107,0-15.947-0.803-23.634-2.333c15.985,49.907,62.336,86.199,117.253,87.194    c-42.947,33.654-97.099,53.655-155.916,53.655c-10.134,0-20.116-0.612-29.944-1.721c55.567,35.681,121.536,56.485,192.438,56.485    c230.948,0,357.188-191.291,357.188-357.188l-0.421-16.253C573.872,163.526,595.211,141.422,612,116.258z" fill="#38A1F3"/></g>';
c.body+="</svg>";c.body+="</a></li>";c.body+='<li class="link referral-link" id="referral-link"><a href="#" data-link="'+BASEURL+"r/"+a.code+'?s=lnk">';c.body+='<svg width="14px" height="14px" viewBox="0 0 14 14">';c.body+='<g id="link" fill="#666666" fill-rule="nonzero"><path d="M10.6406639,0 C9.74353754,0 8.89994575,0.338079721 8.26545471,0.951647411 L5.64953049,3.4813074 C5.84945466,3.45431684 6.04918823,3.42500905 6.25355092,3.42500905 C6.81702558,3.42500905 7.36917247,3.53086469 7.87677075,3.72714526 L9.50619906,2.15144992 C9.80951633,1.85853 10.2122511,1.69695533 10.6406639,1.69695533 C11.5253733,1.69695533 12.2451221,2.39296929 12.2451221,3.248504 C12.2451221,3.66281558 12.0780376,4.05224318 11.7751288,4.34555808 L8.84216325,7.18185708 C8.23550149,7.76767058 7.17986808,7.7680919 6.57320631,7.1822784 L5.33333333,8.38292354 C5.96741592,8.99567493 6.81098048,9.33333333 7.70767117,9.33333333 C8.60479754,9.33333333 9.4483621,8.99525361 10.0828804,8.38168592 L13.0159003,5.54538692 C13.6503914,4.93181923 14,4.11604621 14,3.248504 C14,1.45709489 12.4931893,0 10.6406639,0 Z" id="Path"></path><path d="M6.10779776,10.2752614 L4.49375959,11.8413336 C4.19044327,12.1352396 3.78770979,12.2973582 3.3592983,12.2973582 C2.47459168,12.2973582 1.75484513,11.5990011 1.75484513,10.7405862 C1.75484513,10.3249063 1.92192915,9.93414121 2.22483701,9.63983885 L5.15784777,6.79399134 C5.76450763,6.20620568 6.82013772,6.20578294 7.42679758,6.79356861 L8.66666667,5.58888145 C7.39809703,4.35925297 5.18613987,4.35885665 3.91713455,5.59012323 L0.984096562,8.43597074 C0.34958029,9.05160403 0,9.87009696 0,10.7405598 C0,12.5380262 1.50677873,14 3.35927107,14 C4.25639463,14 5.09995654,13.6607821 5.73447281,13.0451488 L8.31567041,10.5406593 C8.12721075,10.5652307 7.93973136,10.5946372 7.74634305,10.5946372 C7.17418375,10.5946636 6.62002356,10.4836694 6.10779776,10.2752614 Z" id="Path"></path></g>';
c.body+="</svg>";c.body+="</a></li>";c.body+="</ul>";c.body+="</div>";c.body+="</div>";c.body+="</div>";c.buttons=[];return c},_prepare_merge_videos_together:function(a){var c={};c.header="video"==a.media_type?"Select video to merge":"Select audio to merge";c.body='<div class="invite_email_friends_modal">';c.body+='<div class="search-bar" style="width: 100%; max-width: 100%; margin: 0; margin-bottom: 15px;">';c.body+='<span class="icn-search"></span>';c.body="video"==a.media_type?c.body+'<input placeholder="Search videos or paste a video file url" type="text" name="merge_file_search" class="form-control merge_file_search pull-right">':
c.body+'<input placeholder="Search audios or paste an audio file url" type="text" name="merge_file_search" class="form-control merge_file_search pull-right">';c.body+="</div>";c.body+='<ul class="vidoes_list_to_merge">';c.body+="</ul>";c.body+="</div>";c.buttons=[];return c},_prepare_invite_through_email_list:function(a){var c={};if(0==a.data.length)return c.header="No Contacts Found!",c.body='<div class="invite_email_friends_modal">',c.body+="<p>Invite 3 people to Jumpshare and instantly unlock the ability to see who viewed and downloaded your file.</p>",
c.body+='<div class="dividerin"></div>',c.body+="</div>",c.buttons=[{type:"cancel"}],c;c.header='<span class="icn-secure" style="margin-right: 10px;"></span>Who viewed your file';c.body='<div class="invite_email_friends_modal">';c.body+="<p>Invite 3 people to Jumpshare and instantly unlock the ability to see who viewed and downloaded your file.</p>";c.body+='<div class="search-bar">';c.body+='<span class="icn-search"></span>';c.body+='<input type="text" name="email_search" class="form-control invite_email_sarch search_gmail pull-right">';
c.body+="</div>";c.body+='<div class="invite_email_list">';c.body+="<ul>";for(var b=0;b<a.data.length;b++)"registered"==a.data[b].status?c.body+='<li class="emailID" data-value="'+a.data[b].name+'"><label class="custom-controls checkbox blockUI"><input type="checkbox" id="'+b+'" name="eemail" value="'+a.data[b].name+'" autocomplete="off" disabled><span class="custom-control-indicator icns icn-checkbox"></span><div class="user_avtr"><img src="'+(""!=a.data[b].photo?a.data[b].photo:"/res/images/default-avatar.png")+
'" alt="" /></div> <div class="usr_info_invt"><h3>'+Jmp.Helpers.formatFileName(a.data[b].name,80)+'</h3><h5><span class="status" data-value="'+a.data[b].contact+'">'+Jmp.Helpers.formatFileName(a.data[b].contact,80)+"</span></h5></div></label></li>":"invited"==a.data[b].status?c.body+='<li class="emailID" data-value="'+a.data[b].name+'"><label class="custom-controls checkbox blockUI"><input type="checkbox" id="'+b+'" name="eemail" value="'+a.data[b].name+'" autocomplete="off" disabled><span class="custom-control-indicator icns icn-checkbox"></span><div class="user_avtr"><img src="'+
(""!=a.data[b].photo?a.data[b].photo:"/res/images/default-avatar.png")+'" alt="" /></div> <div class="usr_info_invt"><h3>'+Jmp.Helpers.formatFileName(a.data[b].name,80)+'</h3><h5><span class="status" data-value="'+a.data[b].contact+'">'+Jmp.Helpers.formatFileName(a.data[b].contact,80)+"</span></h5></div></label></li>":"new"==a.data[b].status&&(c.body+='<li class="emailID" data-value="'+a.data[b].name+"-"+a.data[b].contact+'"><label class="custom-controls login checkbox"><input type="checkbox" id="'+
b+'" class="invite_chckbox" name="email" value="'+a.data[b].name+'" autocomplete="off"> <span class="custom-control-indicator icns icn-checkbox"></span><div class="user_avtr"><img src="'+(""!=a.data[b].photo?a.data[b].photo:"/res/images/default-avatar.png")+'" alt="" /></div> <div class="usr_info_invt"><h3>'+Jmp.Helpers.formatFileName(a.data[b].name,80)+'</h3><h5><span class="status" data-value="'+a.data[b].contact+'">'+Jmp.Helpers.formatFileName(a.data[b].contact,80)+"</span></h5></div></label></li>");
c.body+="</ul>";c.body+="</div>";c.body+='<div class="dividerin"></div>';c.body+="</div>";c.buttons=[{type:"action",text:"Invite",style:{klass:"btn-blue",id:"ginvite"}},{type:"cancel",text:"Select All",style:{klass:"pull-left a-all",id:"g_select_all"}}];return c},_prepare_bucket_expiration_confirmation:function(a){var c={header:"Self-Destruct"};c.body='<span class="msg">'+a.message1+"</span>";c.body+='<div id="folder-area"><ul id="folders" class="group">';c.body+=this._prepare_bucket_list(a.date_list);
c.body+="</ul></div>";c.body+='<span class="msg">'+a.message2+"</span>";c.buttons=[{type:"action",text:"Proceed",style:{klass:"btn-blue"}},{type:"cancel"}];return c},_prepare_defuse_timebomb_form:function(a){var c={header:"Self-Destruct"};c.body='<span class="msg">Are you sure you want to stop Self-Destruct from <strong style="word-break: break-all;">'+a.item_name+"</strong>?</span>";c.buttons=[{type:"action",text:"Stop Self-Destruct",style:{klass:"defuse-button"}},{type:"cancel"}];return c},_prepare_create_new_inbox_dialog:function(a){var c=
{header:"New Inbox",body:"<form action='' class='inbox_ui_popup' id='create_new_inbox_form'>"};c.body+="<label>Inbox Name:</label>";c.body+="<input class='form-control input-slim' id='inbox_name' name='inbox_name' style='height: 36px;' value='"+a.inbox_name+"' />";c.body+='<div id="choose_folder_wrapper" class=""><label class="inbox_locatoin">Location where files will be saved:</label><div style="display: flex; gap: 10px;"><input id="choosed_inbox_folder" name="choosed_inbox_folder" type="text" value="'+
a.inbox_folder_name+'" class="form-control input-slim pull-left acjs-input ac_input" style="cursor:auto; height: 36px; width: calc(100% - 140px);" readonly="" data-id="'+a.inbox_folder_code+'" /><input id="choosed_inbox_folder_code" name="choosed_inbox_folder_code" type="hidden" value="'+a.inbox_folder_code+'" /><button class="btn btn-nonmain pull-right copy btn-blue" style="padding: 7px 18px;" id="choose_inbox_folder">Choose Folder</button></div></div>';c.body+="</form>";c.body+="<p style='padding-top: 15px; clear: both;'><span class='details' style='padding-top:4px; font-size: 13.5px;'><span style='color: #717d82;' id='choosed_inbox_folder_msg'>Only you can see uploaded files unless you decide to share them.</span></span></p>";
c.buttons=[{type:"cancel",text:"Create",style:{klass:"btn btn-blue",id:"create_new_inbox"}},{type:"cancel"}];return c},_prepare_choose_inbox_folder_form:function(a){var c={header:"Select Inbox Folder",body:'<div style="padding-bottom: 15px; display: flex; gap: 13px; align-items: center;"><p style="margin: 0">Currently in: </p><div class="options-dropdown pull-left">\t\t\t\t\t\t\x3c!-- Single button --\x3e\t\t\t\t\t\t<div class="btn-group btn-compact pull-left">\t\t\t\t\t\t  <button id="copy-move-toggle-btn" style="height: 35px; min-width: 165px; padding-left: 10px;" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-tooltip="true" data-placement="top" data-trigger="click" data-html="true">\t\t\t\t\t\t    <div style="display: flex; align-items: center; gap: 8px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="10.5" y="1.5" width="2" height="4" rx="0.5" fill="#FAFAFA" stroke="#157EFB"></rect><path id="houese" d="M0.5 5.86456C0.5 5.37062 0.743175 4.90833 1.15021 4.6285L6.15021 1.191C6.66209 0.839082 7.33791 0.839082 7.84979 1.191L12.8498 4.6285C13.2568 4.90833 13.5 5.37062 13.5 5.86456V12C13.5 12.8284 12.8284 13.5 12 13.5H2C1.17157 13.5 0.5 12.8284 0.5 12V5.86456Z" fill="#E3EDFA" stroke="#157EFB"></path><path d="M4.5 9C4.5 8.17157 5.17157 7.5 6 7.5H8C8.82843 7.5 9.5 8.17157 9.5 9V13.5H4.5V9Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Personal Library</span></div><svg style="position: absolute;top: 15px;right: 10px;" width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L4.5 4.5L8 1" stroke="black" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="bevel"></path></svg></button><ul id="copy-move-toggle-list" class="dropdown-menu" role="menu">\t\t\t\t\t\t  \t<li data-value="personal"><a href="#" style="display: flex; align-items: center; gap: 8px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="10.5" y="1.5" width="2" height="4" rx="0.5" fill="#FAFAFA" stroke="#157EFB"></rect><path id="houese" d="M0.5 5.86456C0.5 5.37062 0.743175 4.90833 1.15021 4.6285L6.15021 1.191C6.66209 0.839082 7.33791 0.839082 7.84979 1.191L12.8498 4.6285C13.2568 4.90833 13.5 5.37062 13.5 5.86456V12C13.5 12.8284 12.8284 13.5 12 13.5H2C1.17157 13.5 0.5 12.8284 0.5 12V5.86456Z" fill="#E3EDFA" stroke="#157EFB"></path><path d="M4.5 9C4.5 8.17157 5.17157 7.5 6 7.5H8C8.82843 7.5 9.5 8.17157 9.5 9V13.5H4.5V9Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Personal Library</span></a></li>\t\t\t\t\t\t   \t<li data-value="team"><a href="#" style="display: flex; align-items: center; gap: 7px;"><svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="team_icn_sg" d="M0.5 2C0.5 1.17157 1.17157 0.5 2 0.5H9C9.82843 0.5 10.5 1.17157 10.5 2V14.5H2C1.17157 14.5 0.5 13.8284 0.5 13V2Z" fill="#E3EDFA" stroke="#157EFB"></path><rect id="tem_icn_dsh" x="3" y="3" width="5" height="1" fill="#157EFB "></rect><rect id="tem_icn_dsh" x="3" y="5" width="5" height="1" fill="#157EFB "></rect><rect id="tem_icn_dsh" x="3" y="7" width="5" height="1" fill="#157EFB "></rect><path d="M10.5 6.5H14C14.8284 6.5 15.5 7.17157 15.5 8V13C15.5 13.8284 14.8284 14.5 14 14.5H10.5V6.5Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Team Library</span></a></li>\t\t\t\t\t\t   \t</ul>\t\t\t\t\t\t   \t<input type="hidden"></div>\t\t\t\t\t</div></div>'};
c.body+='<div id="folder_area_wrapper">'+a.body+"</div>";c.body+='<form action="" method="post" enctype="multipart/form-data"> \t\t\t\t\t\t\t<input type="hidden" name="inbox_name" id="inbox_name" value="'+a.inbox_name+'"></form>';c.buttons=[{type:"action",text:"Select Folder",style:{klass:"",id:"select_inbox_folder"}},{type:"cancel",style:{klass:"pull-left"}}];c.body+=this.error_template_for_inside_lightbox();return c},_prepare_share_inbox_dialog:function(a){var c={header:"Share Inbox",body:"<form action='' class='inbox_ui_popup'>"};
c.body+="<div style='margin-bottom: 15px; clear: both; overflow: hidden;'>";c.body+='<label style="margin-top: 0;" class="inbox_locatoin">Give this link to people you want to receive files from:</label><div style="display: flex; gap: 10px;"><input type="text" value="'+(""!=CUSTOM_BASEURL?CUSTOM_BASEURL:BASEURL)+"i/"+a.inbox_link+"/"+a.inbox_name+'" readonly class="form-control input-slim pull-left acjs-input ac_input" style="cursor:auto; width:calc(100% - 114px); height: 36px;" readonly="" /> <button id="inbox_copy_link" class="btn btn-nonmain pull-right copy btn-blue" style="padding: 7px 18px;">Copy Link</button></div>';
c.body+="</div>";c.body+="<div style='margin-bottom: 15px; clear: both; overflow: hidden;'>";c.body+='<label style="margin-top: 8px;" class="inbox_locatoin">Embed inbox on your website:</label><div style="display: flex; gap: 10px;"><input type="text" value=\'<iframe name="Jumpshare" height="690" width="100%" frameborder="0" style="display: block; margin: auto;" src="'+BASEURL+"m/"+a.inbox_link+"/"+a.inbox_name+'" ></iframe>\' class="form-control input-slim pull-left acjs-input ac_input" style="cursor:auto; width: calc(100% - 114px); height: 36px;" readonly="" /> <button  id="inbox_copy_code" class="btn btn-nonmain pull-right copy btn-blue"  style="padding: 7px 13px;">Copy Code</button></div>';
c.body+="</div>";c.body+="<hr style='border: none; border-bottom: solid 1px #ebebeb; padding-top: 12px; clear: both; margin-bottom: 15px;'>";c.body+="<label style='margin-top: 7px;'>Share inbox link via email:</label>";c.body+="<div style='margin-bottom: 10px;'>";c.body+="<input class='form-control' style='height: 36px;' id='share_inbox_email' name='share_inbox_email' placeholder='Enter names or email addresses'/>";c.body+="</div>";c.body+="<div>";c.body+="<textarea class='form-control input-slim' id='share_inbox_message' name='share_inbox_message' placeholder='Type your message (optional)' rows='5' column='40'></textarea>";
c.body+="</div>";c.body+="<input type='hidden' id='share_inbox_name' name='share_inbox_name' value='"+a.inbox_name+"' />";c.body+="</form>";c.buttons=[{type:"action",text:"Send",style:{klass:"",id:"share_inbox_send"}},{type:"cancel"}];return c},_prepare_request_upgrade_form:function(a){return{header:"Request Upgrade",body:"By upgrading, you will have access to unlimited uploads, 4K Ultra HD recordings, and more features. We'll notify the owner and admin(s) of this Workspace to upgrade for you. Do you want to request an upgrade?",
buttons:[{type:"action",text:"Request Upgrade",style:{klass:"",id:"btn_request_upgrade"}}]}},_prepare_lock_bucket_form:function(a){var c={};1<PLANID?(c.header=a.title,c.body='<form action="" method="post" enctype="multipart/form-data" id="lock-item-form" onSubmit="return false;"> \t\t\t<div class="input-group input-group-lg input-with-icon">\t\t\t\t\t\t\t  <span class="input-group-addon mergeicon"><span class="icn-locked"></span></span>\t\t\t\t\t\t\t<input type="text" placeholder="Enter Password" id="lock-item" class="lock_item form-control mergeInputfield" name="lock_item" value="'+
a.item_pwd.replace('"',"&quot;")+'" autocomplete="off">\t\t\t\t\t\t \t<input type="hidden" name="item_code" id="item-code" value="'+a.item_id+'">\t\t\t\t\t\t \t<input type="hidden" name="item_type" id="item-type" value="'+a.item_type+'">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t \t<p>The password must be at least 6 characters long. It will be used to access this '+a.text+" after you share it.</p> \t\t\t\t\t\t\t</form>",c.buttons=[{type:"action",text:a.title,style:{id:"lock-item-form-submit"}},{type:"cancel"}]):
(c.header="Password Protection",c.body="Lock your confidential files before sharing and never worry about unauthorized access. This feature is only part of our Jumpshare Plus plan. Would you like to upgrade?",c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]);return c},_prepare_unlock_bucket_form:function(a){var c={header:"Unlock"};c.body='<form action="" method="post" enctype="multipart/form-data" id="unlock-item-form"> \t\t\t\t\t\t\t<span class="msg">Are you sure you want to unlock the item \'<strong style="word-break: break-all;">'+
a.item_name+'</strong>\'?</span> \t\t\t\t\t\t\t<input type="hidden" name="item_code" id="item-code" value="'+a.item_id+'"> \t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item-type" value="'+a.item_type+'"></form>';c.buttons=[{type:"action",text:"Change Password",style:{klass:"change-password-button pull-left"}},{type:"action",text:"Unlock",style:{id:"unlock-item-form-submit"}},{type:"cancel"}];return c},_prepare_delete_schedule:function(a){return{header:"Remove Scheduled Share?",body:'<span class="msg">Are you sure you want to remove this scheduled share?</span>',
buttons:[{type:"action",text:"Remove",style:{klass:"btn-red"}},{type:"cancel"}]}},_prepare_show_hubspot_modal:function(a){var c={header:""};c.body='<div class="meetings-iframe-container" data-src="'+a.script_src+'?embed=true"></div>';c.body+='<script type="text/javascript" src="https://static.hsappstatic.net/MeetingsEmbed/ex/MeetingsEmbedCode.js">\x3c/script>';c.buttons=[];return c},_prepare_copy_or_move_items_form:function(a){var c={};c.header="Copy/Move"+(1==a.total_items?" item":" items")+" to...";
c.body='<div style="padding-bottom: 15px; display: flex; gap: 13px; align-items: center;"><p style="margin: 0">Currently in: </p><div class="options-dropdown pull-left">\t\t\t\t\t\t\x3c!-- Single button --\x3e\t\t\t\t\t\t<div class="btn-group btn-compact pull-left">\t\t\t\t\t\t  <button id="copy-move-toggle-btn" style="height: 35px; min-width: 165px; padding-left: 10px;" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-tooltip="true" data-placement="top" data-trigger="click" data-html="true">\t\t\t\t\t\t    <div style="display: flex; align-items: center; gap: 8px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="10.5" y="1.5" width="2" height="4" rx="0.5" fill="#FAFAFA" stroke="#157EFB"></rect><path id="houese" d="M0.5 5.86456C0.5 5.37062 0.743175 4.90833 1.15021 4.6285L6.15021 1.191C6.66209 0.839082 7.33791 0.839082 7.84979 1.191L12.8498 4.6285C13.2568 4.90833 13.5 5.37062 13.5 5.86456V12C13.5 12.8284 12.8284 13.5 12 13.5H2C1.17157 13.5 0.5 12.8284 0.5 12V5.86456Z" fill="#E3EDFA" stroke="#157EFB"></path><path d="M4.5 9C4.5 8.17157 5.17157 7.5 6 7.5H8C8.82843 7.5 9.5 8.17157 9.5 9V13.5H4.5V9Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Personal Library</span></div><svg style="position: absolute;top: 15px;right: 10px;" width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L4.5 4.5L8 1" stroke="black" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="bevel"></path></svg></button><ul id="copy-move-toggle-list" class="dropdown-menu" role="menu">\t\t\t\t\t\t  \t<li data-value="personal"><a href="#" style="display: flex; align-items: center; gap: 8px;"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="10.5" y="1.5" width="2" height="4" rx="0.5" fill="#FAFAFA" stroke="#157EFB"></rect><path id="houese" d="M0.5 5.86456C0.5 5.37062 0.743175 4.90833 1.15021 4.6285L6.15021 1.191C6.66209 0.839082 7.33791 0.839082 7.84979 1.191L12.8498 4.6285C13.2568 4.90833 13.5 5.37062 13.5 5.86456V12C13.5 12.8284 12.8284 13.5 12 13.5H2C1.17157 13.5 0.5 12.8284 0.5 12V5.86456Z" fill="#E3EDFA" stroke="#157EFB"></path><path d="M4.5 9C4.5 8.17157 5.17157 7.5 6 7.5H8C8.82843 7.5 9.5 8.17157 9.5 9V13.5H4.5V9Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Personal Library</span></a></li>\t\t\t\t\t\t   \t<li data-value="shared"><a href="#" style="display: flex; align-items: center; gap: 6px;"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle id="shared_bg" cx="8" cy="8" r="7.5" fill="#FAFAFA" stroke="#157EFB"></circle><mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="1" y="1" width="14" height="14"><circle cx="8" cy="8" r="6.5" fill="#FAFAFA" stroke="#157EFB"></circle></mask><g mask="url(#mask0)"><path d="M13.9401 13.2131C13.9401 13.4292 13.8431 13.6733 13.59 13.9379C13.3344 14.205 12.9409 14.4684 12.4161 14.7004C11.3679 15.1638 9.88475 15.4631 8.22003 15.4631C6.55532 15.4631 5.0722 15.1638 4.02399 14.7004C3.49921 14.4684 3.10564 14.205 2.85009 13.9379C2.59697 13.6733 2.5 13.4292 2.5 13.2131C2.5 12.997 2.59697 12.7529 2.85009 12.4884C3.10564 12.2212 3.49921 11.9579 4.02399 11.7259C5.0722 11.2625 6.55532 10.9631 8.22003 10.9631C9.88475 10.9631 11.3679 11.2625 12.4161 11.7259C12.9409 11.9579 13.3344 12.2212 13.59 12.4884C13.8431 12.7529 13.9401 12.997 13.9401 13.2131Z" fill="white" stroke="#157EFB"></path><path d="M11.4521 7.56136C11.4521 9.90288 9.91592 11.6227 8.22006 11.6227C6.5242 11.6227 4.98804 9.90288 4.98804 7.56136C4.98804 5.21984 6.5242 3.5 8.22006 3.5C9.91592 3.5 11.4521 5.21984 11.4521 7.56136Z" fill="white" stroke="#157EFB"></path><mask id="mask1" mask-type="alpha" maskUnits="userSpaceOnUse" x="5" y="4" width="6" height="8"><path d="M10.4802 7.66473C10.4802 8.56814 10.2031 9.36704 9.77871 9.92905C9.35451 10.4908 8.80569 10.7931 8.24024 10.7931C7.6748 10.7931 7.12598 10.4908 6.70178 9.92905C6.27738 9.36704 6.00024 8.56814 6.00024 7.66473C6.00024 6.76132 6.27738 5.96242 6.70178 5.40041C7.12598 4.83868 7.6748 4.53638 8.24024 4.53638C8.80569 4.53638 9.35451 4.83868 9.77871 5.40041C10.2031 5.96242 10.4802 6.76132 10.4802 7.66473Z" fill="white" stroke="#157EFB"></path></mask><g mask="url(#mask1)"><path d="M7.80518 6.62826C7.39051 6.62826 6.25017 6.28271 5.73183 6.10993L0.963135 0.408229L7.70151 -0.110107L13.9215 1.4449L11.4335 6.10993C11.088 5.93715 10.2932 5.59159 9.87852 5.59159C9.36019 5.59159 8.32352 6.62826 7.80518 6.62826Z" fill="#FAFAFA" stroke="#157EFB"></path></g></g></svg><span>Shared Library</span></a></li>\t\t\t\t\t\t   \t<li data-value="team"><a href="#" style="display: flex; align-items: center; gap: 7px;"><svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="team_icn_sg" d="M0.5 2C0.5 1.17157 1.17157 0.5 2 0.5H9C9.82843 0.5 10.5 1.17157 10.5 2V14.5H2C1.17157 14.5 0.5 13.8284 0.5 13V2Z" fill="#E3EDFA" stroke="#157EFB"></path><rect id="tem_icn_dsh" x="3" y="3" width="5" height="1" fill="#157EFB "></rect><rect id="tem_icn_dsh" x="3" y="5" width="5" height="1" fill="#157EFB "></rect><rect id="tem_icn_dsh" x="3" y="7" width="5" height="1" fill="#157EFB "></rect><path d="M10.5 6.5H14C14.8284 6.5 15.5 7.17157 15.5 8V13C15.5 13.8284 14.8284 14.5 14 14.5H10.5V6.5Z" fill="#FAFAFA" stroke="#157EFB"></path></svg><span>Team Library</span></a></li>\t\t\t\t\t\t   \t</ul>\t\t\t\t\t\t   \t<input type="hidden"></div>\t\t\t\t\t</div></div>';
c.body+=a.body;c.body+='<div id="c-new-folder"><label for="merge-folder" class="hide">'+(1<=$(a.body).find("li").length?"Or create ":"Create ")+'a new folder:</label> \t\t\t\t\t\t<form action="" method="post" enctype="multipart/form-data" id="'+a.form+'"> \t\t\t\t\t\t\t<div class="input-group input-group-lg input-with-icon hide">\t\t\t\t\t\t\t  <span class="input-group-addon"><span class="icn-folder-small"></span></span>\t\t\t\t\t\t\t  <input type="text" class="form-control new_bucket_name"  name="new_bucket_name" placeholder="Folder name" id="merge-folder">\t\t\t\t\t\t\t</div><input type="hidden" name="file_ids" id="file_ids" value="'+
a.file_ids.toString()+'"><input type="hidden" name="bucket_ids" id="bucket_ids" value="'+a.bucket_ids.toString()+'">';"undefined"!=typeof a.bucket_id&&(c.body+='<input type="hidden" name="parent_bucket_id" id="parent_bucket_id" value="'+a.bucket_id+'">');c.body+="</form></div>";c.buttons=[{type:"action",text:"Move",style:{klass:"move_file"}},{type:"action",text:"Copy",style:{klass:"copy_file"}},{type:"cancel",style:{klass:"pull-left"}}];c.body+=this.error_template_for_inside_lightbox();return c},
_prepare_verify_email_address:function(a){data={};data.header=a.title;var c="";""!=a.email&&(c=" to <b>"+a.email+"</b>");data.body="<p>Jumpshare needs to verify your email address before you can share files. We have sent a verification email"+c+'. If you can\u2019t find it in your Inbox, check your Spam folder or click the button to resend the email.</p>\t\t\t\t\t\t\t<a href="#" style="display: block; margin-top: 10px; color: #168EEA; font-size: 13.5px;" id="update_my_email_address">Change email address</a>';
data.buttons=[{type:"cancel",text:"Resend email",style:{klass:"btn btn-blue",id:"resend_verify_email"}},{type:"cancel",text:"Done",style:{klass:"btn btn-default",id:"verify_email_okay"}}];return data},_prepare_send_email_items_form:function(a){var c=a.submit;data1={};data1.header="Share '"+a.title+"'";data1.type="email";data1.body='<span class="item_name hide">'+a.title+"</span>";data1.body+='<form action="" method="post" id="'+a.form+'" autocomplete="off">';"system"==UTYPE?(data1.body+='<div class="alert alert-notice" style="text-align: left;justify-content: normal;margin-bottom: 10px;"><p>To share your file via email, <a style="color: #168eea;" href="/pricing">sign up</a> for a free account.</p></div>',
data1.body+='<input tabindex="1" type="email" placeholder="'+("system"==UTYPE?"To (Recipient's email address)":"Type name or email address")+'" name="email_to" id="email_share_to" class="form-control blockUI" style="margin-bottom: 7px;" />'):(data1.body+='<ul class="modal-email-wrapper clearfix acjs-holder"><li class="open">',data1.body+='<input type="email" name="email_to" id="email_to" Placeholder="Type name or email address" class="form-control input-slim pull-left acjs-input ac_input" onclick="$(\'.info-tip\').addClass(\'hide\');" style="width: 270px;" /></li></ul>');
"system"==UTYPE&&(data1.body+='<input type="email" tabindex="2" placeholder="'+("system"==UTYPE?"From (Your email address)":"From (Type email address)")+'" value="'+("system"==UTYPE&&""!=GUEMAIL?GUEMAIL:"")+'" '+("system"==UTYPE&&""!=GUEMAIL&&"0"!=VERIFIED?' readonly="readonly" ':"")+' name="email_from" id="email_share_from" class="form-control blockUI" style="margin-bottom: 7px;" />',data1.body+='<div id="email_to_popover" class="popover custom_popovr hide"><span class="arrow icn-dd-top-arrow-panel"></span><p>You can send your file to one person via email only. Want to send your file to multiple people?<a href="/pricing" class="btn btn-blue register-popup_home">Create an account</a></div>',
data1.body+='<div id="email_from_popover" class="popover custom_popovr hide"><span class="arrow icn-dd-top-arrow-panel"></span><p>We will let you know once the recipient has viewed and downloaded your file.</p><p> You\u2019ll need to verify your email so we know it\u2019s really you. Don\u2019t want to verify every time?</p><a href="/pricing" class="btn btn-blue register-popup_home">Create an account</a></div>');data1.body+='<textarea tabindex="3" class="form-control input-slim ';"system"==UTYPE&&
(data1.body+=" blockUI");data1.body+='" name="email_message" id="email_message" placeholder="Add a message (optional)"></textarea>\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="'+a.item_type+'">\t\t\t\t\t\t<input type="hidden" name="item_id" id="item_id" value="'+a.item_id+'">\t\t\t\t\t\t\t<div class="modal-advance-options enabled">\t\t\t\t\t\t\t\t<button class="btn btn-link" type="button">Advanced Options: ';1>=PLANID&&(data1.body+='<a href="'+WS_PREFIX+'/pricing" style="font-weight:normal;">Upgrade</a>');
data1.body+="</button>";data1.body+='<div class="modal-share-options';2>PLANID&&(data1.body+=" blockUI");data1.body+='">\t\t\t\t\t\t\t\t\t<div class="option clearfix">\t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox clearfix">\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="expire_after" id="expire_after" value="1"';2>PLANID&&(data1.body+=' disabled="true"');data1.body+='/>\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator"></span>\t\t\t\t\t\t\t\t\t\t<span class="pull-left">Send temporary link. Expire after</span>\t\t\t\t\t\t\t\t\t\t<div class="days pull-left clearfix">\t\t\t\t\t\t\t\t\t\t\t<input class="form-control modal-share-days" id="expire_after_number" name="expire_after_number" min="01" max="99999" value="01" type="number">\t\t\t\t\t\t\t\t\t\t\t<div class="controls-number">\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="icon-wrapper pull-left"><span class="ab-center icn-numberup-arrow"></span></a>\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="icon-wrapper pull-left"><span class="ab-center icn-numberdown-arrow"></span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="options-dropdown pull-left">\t\t\t\t\t\t\t\t\t\t\t\x3c!-- Single button --\x3e\t\t\t\t\t\t\t\t\t\t\t<div class="btn-group btn-compact pull-left">\t\t\t\t\t\t\t\t\t\t\t\t<button id="expire_after_button" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-tooltip="true" data-placement="top" data-trigger="click" data-html="true" title="<strong>Tip:</strong> Other options are only available when sharing single files.">\t\t\t\t\t\t\t\t\t\t\t\tDay<span class="caret"></span></button><ul class="dropdown-menu" id="expire_after_list" role="menu">';
data1.body="bucket"==a.item_type?data1.body+'<li data-value="Day"><a href="#">Days</a></li>\t\t\t\t\t\t\t\t\t\t\t\t<li class="blockUI" data-value="View"><a href="#">Views</a></li>\t\t\t\t\t\t\t\t\t\t\t\t<li class="blockUI" data-value="Download"><a href="#">Downloads</a></li>':data1.body+('<li data-value="Day"><a href="#">Days</a></li>\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="View"><a href="#">Views</a></li>\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="Download" class="'+(a.file_url?"blockUI disabled":"")+
'"><a href="#">Downloads</a></li>');data1.body+='</ul><input type="hidden" name="expire_after_type" id="expire_after_type" value="Day"></div>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t<div class="option simple clearfix">\t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox">\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="disable_download" id="disable_download" value="1" class="'+(a.file_url?"blockUI disabled":"")+'"';2>PLANID&&(data1.body+=
'disabled="true"');data1.body+='/><span class="custom-control-indicator '+(a.file_url?"blockUI disabled":"")+'"></span><span class="pull-left '+(a.file_url?"blockUI disabled":"")+'">Disable Download</span>\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="input-group date-picker pull-left">';2>PLANID&&(data1.body+='<div class="schedule_dropdown_message upgrade-to-plus for-free hide"> \t\t\t\t\t\t\t\t\t<span class="arrow icn-dd-right-arrow"></span> \t\t\t\t\t\t\t\t\t<div class="icn-schedule"></div> \t\t\t\t\t\t\t\t\t<h4>Schedule your shares</h4> \t\t\t\t\t\t\t\t\t<p>Schedule when you want to share your files and we will send them out even when you\'re asleep.</p> \t\t\t\t\t\t\t\t\t<a href="'+
WS_PREFIX+'/plus" class="btn btn-blue btn-lg btn-block">Upgrade to Plus</a> \t\t\t\t\t\t\t\t</div>');data1.body+='<div class="schedule_calendar ';"system"==UTYPE&&(data1.body+=" blockUI");data1.body+='"><span class="icn-schedule-calendar"></span>\t\t\t\t\t\t\t<input type="text" class="distxts" name="email_date" id="email_date" placeholder="" value="Schedule" style="width:66px;" readonly="">\t\t\t\t\t\t\t<span class="caret"></span></div>\t\t\t\t\t\t</div>';"system"==UTYPE&&(data1.body+='<div class="clearfix hide" id="verification_code_container">',
data1.body+='<p style="color: #101010;">We have sent you a verification email to make sure it\u2019s really you. If you don\u2019t find the email in your Inbox, please check the Spam folder.</p>',data1.body+='<input type="text" placeholder="Enter verification code" name="verification_code" id="verification_code" class="form-control" style="margin-bottom: 15px;" />',data1.body+='<div class="clearfix">',data1.body+='<button class="btn pull-left btn-white" id="go_back_share_modal">Back</button>',data1.body+=
'<button class="btn btn-submit pull-right btn-blue send_mail" id="verify_email_code">Verify Code</button>',data1.body+="</div>",data1.body+="</div>");data1.buttons=[{type:"action",text:c,style:{klass:`send_mail ${"system"==UTYPE?"blockUI":""}`,id:"send_email"}}];data1.body=1<PLANID?data1.body+'<div class="group"></div><p class="error newerror plus"></p></form>':data1.body+'<p class="error newerror"></p></form>';var b=$("#"+a.item_id);c=b.find(".copy-link");b.attr("data-id");Jmp.Helpers.get_short_url_code(c);
b=Jmp.Helpers.decode_string(b.attr("data-gridname"));b=b.split(" ").join("+");Jmp.Helpers.get_copy_link_domain(c);Jmp.App.getView();Jmp.Handler.getRule("shared");data2={header:"Advanced Copy Link",type:"aclink",body:'<form id="popup_advcopylink_form" action="#" method="post">\t\t\t\t\t\t\t\t<div class="modal-advance-options option enabled">'};data2.body+='<div class="modal-share-options';2>PLANID&&(data2.body+=" blockUI");data2.body+='">\t\t\t\t\t\t\t\t\t<div class="option clearfix">\t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox clearfix">\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="expire_after_copy_link" id="expire_after_copy_link" value="1"';
2>PLANID&&(data2.body+=' disabled="true"');data2.body+='/>\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator"></span>\t\t\t\t\t\t\t\t\t\t<span class="pull-left">Send temporary link. Expire after</span>\t\t\t\t\t\t\t\t\t\t<div class="days pull-left clearfix">\t\t\t\t\t\t\t\t\t\t\t<input class="form-control modal-share-days" id="expire_after_number_copy_link" name="expire_after_number_copy_link" min="01" max="99999" value="01" type="number">\t\t\t\t\t\t\t\t\t\t\t<div class="controls-number" id="expire_after_number_control">\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="icon-wrapper pull-left"><span class="ab-center icn-numberup-arrow"></span></a>\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="icon-wrapper pull-left"><span class="ab-center icn-numberdown-arrow"></span></a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="options-dropdown pull-left">\t\t\t\t\t\t\t\t\t\t\t\x3c!-- Single button --\x3e\t\t\t\t\t\t\t\t\t\t\t<div class="btn-group btn-compact pull-left">\t\t\t\t\t\t\t\t\t\t\t  <button id="expire_after_button_copy_link" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-tooltip="true" data-placement="top" data-trigger="click" data-html="true" title="<strong>Tip:</strong> Other options are only available when sharing single files.">\t\t\t\t\t\t\t\t\t\t\t    Day<span class="caret"></span></button><ul class="dropdown-menu" id="expire_after_list_copy_link" role="menu">';
data2.body="bucket"==a.item_type?data2.body+'<li data-value="Day"><a href="#">Days</a></li>\t\t\t\t\t\t\t\t\t\t\t   <li class="blockUI" data-value="View"><a href="#">Views</a></li>\t\t\t\t\t\t\t\t\t\t\t   <li class="blockUI" data-value="Download"><a href="#">Downloads</a></li>':data2.body+('<li data-value="Day"><a href="#">Days</a></li>\t\t\t\t\t\t\t\t\t\t\t   \t<li data-value="View"><a href="#">Views</a></li>\t\t\t\t\t\t\t\t\t\t\t   \t<li data-value="Download" class="'+(a.file_url?"blockUI disabled":
"")+'"><a href="#">Downloads</a></li>');data2.body+='</ul><input type="hidden" name="expire_after_type_copy_link" id="expire_after_type_copy_link" value="Day"></div>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t<div class="option simple clearfix">\t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox">\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="disable_download_copy_link" id="disable_download_copy_link" value="1" class="'+(a.file_url?"blockUI disabled":
"")+'"';2>PLANID&&(data2.body+='disabled="true"');data2.body+='/><span class="custom-control-indicator '+(a.file_url?"blockUI disabled":"")+'"></span><span class="pull-left '+(a.file_url?"blockUI disabled":"")+'">Disable Download</span>\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t</div></div>\t\t\t\t\t\t\t\t\t<div class="option simple clearfix center_button">\t\t\t\t\t\t\t\t\t<button class="btn btn-blue btn-gen-aclink blockUI" id="generate_adv_copylink">Generate Link</button>\t\t\t\t\t\t\t\t\t<div class="glf input-group clearfix ';
2>PLANID&&(data2.body+=" blockUI");data2.body+='">\t\t\t\t\t\t\t\t\t\t<input style="cursor: auto; height: auto;" name="adv_copylink" id="adv_copylink" class="form-control" type="text" value="'+("file"==a.item_type?SHORT_BASEURL+""+VIEWER_SUBDIR+"/"+a.item_id:SHORT_BASEURL+"b/"+a.item_id)+'" readonly onclick="this.focus();this.select();" />\t\t\t\t\t\t\t\t\t\t<input type="hidden" id="default_copylink" name="default_copylink" value="'+("file"==a.item_type?""+VIEWER_SUBDIR+"/"+a.item_id:"b/"+a.item_id)+
'">\t\t\t\t\t\t\t\t\t\t<div class="input-group-btn pull-right"><button id="copy_advLink" data-type="'+("file"==a.item_type?"file":"bucket")+'" data-link="'+("file"==a.item_type?SHORT_BASEURL+""+VIEWER_SUBDIR+"/"+a.item_id:SHORT_BASEURL+"b/"+a.item_id)+'" type="button" class="btn btn-default copy">Copy link</button></div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="modal-footer clearfix"></div>\t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="'+
a.item_type+'"><input type="hidden" name="file_type" id="file_type" value="'+a.file_type+'">\t\t\t\t\t\t\t<input type="hidden" name="item_id" id="item_id" value="'+a.item_id+'">';1>=PLANID&&(data2.body+='<div class="clearfix">&nbsp;</div><a href="'+WS_PREFIX+'/pricing" style="font-weight:normal;">Upgrade</a> to unlock advanced options');data2.body+="</div></form>";data2.buttons=[];data3={};if("video"==a.file_type||"image"==a.file_type)data3.handleResolution=function(h){console.log("soemthing")},data3.header=
"Embed '"+a.title+"'",data3.type="embed",data3.body='<form class="modal-embedMedia">\t\t\t\t\t\t\t\t\t<div class="enabled">',data3.body+='<div class="modal-share-options">\t\t\t\t\t\t\t\t\t\t\t<div class="copy_embed_group">\t\t\t\t\t\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 style="font-size: 15px; font-weight: 600; margin-top: 0; color: #101010;">For web page:</h4>\t\t\t\t\t\t\t\t\t\t\t\t\t<input style="display: none !important;" name="txt_embedCode" id="txt_embedCode" class="form-control" type="text" data-item_id=\''+
a.item_id+'\' value="" readonly />\t\t\t\t\t\t\t\t\t\t\t\t\t<button id="copy_embedCode" class="btn btn-default"><svg width="16" height="11" viewBox="0 0 16 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.8009 4.99897L11.2988 0.229173C11.0221 -0.0643002 10.5602 -0.0776849 10.2667 0.199248C9.97368 0.475952 9.96007 0.938064 10.237 1.23131L14.2663 5.49979L10.237 9.76877C9.96007 10.062 9.97368 10.5239 10.2667 10.8008C10.4078 10.934 10.5882 10.9999 10.7678 10.9999C10.9618 10.9999 11.1554 10.923 11.2988 10.7714L15.8009 6.00134C16.0664 5.7198 16.0664 5.28028 15.8009 4.99897Z" fill="black"/><path d="M6.58515 9.76861L2.55614 5.49986L6.58515 1.23114C6.86185 0.937895 6.84847 0.475744 6.55522 0.199077C6.2622 -0.0776277 5.79982 -0.064243 5.52316 0.229003L1.02105 4.99881C0.755558 5.28011 0.755558 5.71987 1.02105 6.00121L5.52339 10.7712C5.66697 10.9233 5.86044 11 6.0544 11C6.23399 11 6.41434 10.9338 6.55522 10.8007C6.84873 10.524 6.86185 10.0619 6.58515 9.76861Z" fill="black"/></svg><span>Copy embed code</span></button>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="embed-type-optoins"> \t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="option clearfix" id="embed_size_optns_cntrols">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="options-wrapper clearfix" style="margin-top: 4px;">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox ',
2>PLANID&&(data3.body+=" blockUI"),data3.body+='" style="clear: both; overflow: hidden; ">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="hide_video_title" id="hide_video_title" value="1" class="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator "></span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="pull-left ">Hide video title</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>',2>PLANID&&(data3.body+=' <a style="margin-top: 0; top: 20px; right: 10px; color: #168EEA; font-size: 13.5px;" href="'+
WS_PREFIX+'/pricing">Upgrade</a>'),data3.body+='<label class="custom-controls checkbox ',2>PLANID&&(data3.body+=" blockUI"),data3.body+='" style="clear: both; overflow: hidden; ">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="disable_embed_download_video" id="disable_embed_download_video" value="1" class="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator "></span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="pull-left ">Disable download</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>',
2>PLANID&&(data3.body+=' <a style="margin-top: 0; top: 20px; right: 10px; color: #168EEA; font-size: 13.5px;" href="'+WS_PREFIX+'/pricing">Upgrade</a>'),data3.body+='<label class="custom-controls radio">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="embed_type" value="1" checked="checked">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator radio"></span><span>Responsive</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="custom-controls radio">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="embed_type" value="2">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="custom-control-indicator radio"></span><span>Fixed size</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="video_size_embed" style="dislay: none;"> \t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="phone" id="vid_width" name="vid_width" value="" min="1" disabled="disabled" class="form-control" maxlength="4" />\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span> x </span> \t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="phone" id="vid_height" name="vid_height" value="" min="1" disabled="disabled" class="form-control" maxlength="4" /> \t\t\t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t\t</div>',
data3.body+='<span class="divider"></span>\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 style="font-size: 15px; font-weight: 600; margin-top: 0; color: #101010;">For email:</h4>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button style="padding-left: 33.5px !important; padding-right: 33.5px !important;" class="btn btn-default" id="embed_copy_thumb"><svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2C0 0.89543 0.895431 0 2 0H15C16.1046 0 17 0.895431 17 2V12C17 13.1046 16.1046 14 15 14H2C0.89543 14 0 13.1046 0 12V2ZM2 3C2 2.44772 2.44772 2 3 2H14C14.5523 2 15 2.44772 15 3V11C15 11.5523 14.5523 12 14 12H3C2.44772 12 2 11.5523 2 11V3ZM7 5C7 6.10457 6.10457 7 5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5ZM13.2481 4.43863C13.5814 4.24419 14 4.48462 14 4.87052V10.5C14 10.7761 13.7761 11 13.5 11H4.84946C4.33909 11 4.15668 10.3253 4.59752 10.0681L13.2481 4.43863Z" fill="black" stroke="white"/></svg><span>Copy thumbnail</span></button>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" id="embed_copy_thumb_code"><svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1.3501" y="0.75" width="10.7404" height="10.6688" rx="2.25" stroke="black" stroke-width="1.5"/><rect x="4.69019" y="4.33105" width="13.2404" height="13.1688" rx="3.5" fill="white" stroke="white"/><rect x="5.94019" y="5.58105" width="10.7404" height="10.6688" rx="2.25" fill="white" stroke="black" stroke-width="1.5"/></svg><span>Copy thumbnail code</span></a>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>',
data3.body+="</div>\t\t\t\t\t\t\t\t\t\t\t</div>",data3.body+='\t\t\t\t\t\t\t\t\t\t\t<div class="embed-type-optoins">\t\t\t\t\t\t\t\t\t\t\t<div class="option clearfix">\t\t\t\t\t\t\t\t\t\t\t<div class="preview_window">\t\t\t\t\t\t\t\t\t\t\t\t<p>Preview: ',1>=PLANID&&(data3.body+='<span class="free_users_option">(<a href="'+WS_PREFIX+'/pricing">Upgrade</a> to remove Jumpshare branding)</span>'),data3.body+='</p>\t\t\t\t\t\t\t\t\t\t\t\t<div class="emebd-window">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="actual-media"></div>',
"video"==a.file_type?data3.body+='<div class="hide code"><p style="margin-bottom: 0 !important;">'+a.title+' - Watch Video</p><img style="max-width:400px;" src=""></div>':"image"==a.file_type&&(data3.body+='<div class="hide code"><p style="margin-bottom: 0 !important;">'+a.title+' - View Image</p><img style="max-width:400px;" src=""></div>'),data3.body+='</div>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="modal-footer clearfix"></div>\t\t\t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="'+
a.item_type+'"><input type="hidden" name="file_type" id="file_type" value="'+a.file_type+'"/>\t\t\t\t\t\t\t\t\t<input type="hidden" name="item_id" id="item_id" value="'+a.item_id+'"/>\t\t\t\t\t\t\t\t\t</div></div></div> \t\t\t\t\t\t\t\t\t',data3.body+="</form>",data3.buttons=[];data4={};"1"!=a.is_team_upload&&(data4.handleResolution=function(h){console.log("soemthing")},data4.header="Collaborate on '"+a.title+"'",data4.type="collaborate",data4.body="system"==UTYPE?'<label style="margin-top: -5px;">Invite team members and clients to a shared online workspace for even easier collaboration. To unlock this feature,<a class="register-popup_home" style="color: #168EEA; padding-left: 5px; text-decoration: none;" href="/pricing">sign up for free</a>. </label>':
'<label style="margin-top: -5px;">Once you invite a team member from your workspace, this item can be found in your Shared library. <a style="color: #168EEA; padding-left: 5px; text-decoration: none;" href="settings/workspace/members">View members</a></label>',data4.body+='<div class="modal-frm-collaborate '+("system"==UTYPE?" blockUI ":"")+'"> \t\t\t\t\t\t\t\t\t<form action="" method="post" id="popup_collaborate_invite_form" autocomplete="off"> \t\t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t\t<button class="btn btn-submit pull-right btn-blue invite_to_collaborate " id="invite_to_collaborate" '+
("system"==UTYPE?' disabled="disbaled" ':"")+'>Invite</button>\t\t\t\t\t\t\t\t\t\t<ul class="modal-email-wrapper clearfix acjs-team-holder" style="margin-bottom: 10px;"> \t\t\t\t\t\t\t\t\t\t\t<li class="open">\t\t\t\t\t\t\t\t\t\t\t\t<input type="email" name="email_to_collaborate" '+("system"==UTYPE?' disabled="disbaled" ':"")+' id="email_to_collaborate" Placeholder="Type names of team members" \t\t\t\t\t\t\t\t\t\t\t\t\tclass="form-control input-slim pull-left acjs-input ac_input" style="width: 270px;" /> \t\t\t\t\t\t\t\t\t\t\t</li> \t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t<div class="enabled"> \t\t\t\t\t\t\t\t\t\t<div class="modal-share-options">\t\t\t\t\t\t\t\t\t\t\t<div class="clearfix"></div>\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="'+
a.item_type+'"/>\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="file_type" id="file_type" value="'+a.file_type+'"/>\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="item_id" id="item_id" value="'+a.item_id+'"/>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="invite-members-wrapper"> \t\t\t\t\t\t\t\t\t\t<ul class="invite_member_list hide">\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_img_container">\t\t\t\t\t\t\t\t\t\t\t\t<img src="/res/images/bbigelow.jpg" />\t\t\t\t\t\t\t\t\t\t\t\t<p>Frankie Robinson</p>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_info">\t\t\t\t\t\t\t\t\t\t\t\t<span> Owner </span>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_img_container">\t\t\t\t\t\t\t\t\t\t\t\t<img src="/res/images/bbigelow.jpg" />\t\t\t\t\t\t\t\t\t\t\t\t<p>Frankie Robinson</p>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_info">\t\t\t\t\t\t\t\t\t\t\t\t<a href=""> Remove </a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_img_container">\t\t\t\t\t\t\t\t\t\t\t\t<img src="/res/images/bbigelow.jpg" />\t\t\t\t\t\t\t\t\t\t\t\t<p>Frankie Robinson</p>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<div class="invitee_info">\t\t\t\t\t\t\t\t\t\t\t\t<a href=""> Remove </a>\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t<div class="empty-team-text">No team members invited</div>\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</form> \t\t\t\t\t\t\t\t</div>',
data4.buttons=[]);data5={handleResolution:function(h){console.log("soemthing")}};data5.header="Privacy Settings '"+a.title+"'";data5.type="CPS";data5.body='<div class="modal-cps"> \t\t\t\t\t\t\t\t<div class="lnk-privacy-group input_form_group">\t\t\t\t\t\t\t\t\t<label>Link Privacy : </label>\t\t\t\t\t\t\t\t\t<div class="cta_wind_dropdown">\t\t\t\t\t\t\t\t\t\t<div class="btn-compact lnk-privacy-wrapper">\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i style="font-style: normal;"><span class="lnk-privacy-txt">Anyone with whom you share a link can access</span></i><span class="caret"></span></button>\t\t\t\t\t\t\t\t\t\t\t\t<ul class="dropdown-menu lnk-privacy-menu" role="menu">\t\t\t\t\t\t\t\t\t\t\t\t\t<li class="selected" data-val="everyone"><a href="javascript:;">Anyone with whom you share a link can access</a></li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-val="emails"><a href="javascript:;">Restricted to specific people <span class="utp plus">Plus</span></a></li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-val="password"><a href="javascript:;">Anyone with a password can access <span class="utp plus">Plus</span></a></li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-val="everyone_workspace"><a href="javascript:;">Everyone at '+
Jmp.Helpers.get_workspace_name()+' can access <span style="color: #8a5ce7;" class="utp business">Business</span></a></li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-val="only_you"><a href="javascript:;">Only you can access, disable share links <span class="utp plus">Plus</span></a></li>\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<span class="info_note">No login required to access. Hidden from the search engines.</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div id="privacy-options-parent"> \t\t\t\t\t\t\t\t<div id="restricted_access_cps" class="restricted_acces_cps_share hide">\t\t\t\t\t\t\t\t\t<label>Add Emails : </label>\t\t\t\t\t\t\t\t\t<div class="emails_cps_container">\t\t\t\t\t\t\t\t\t\t\x3c!-- <span class="email_invte_cps_group pull-right"><button class="btn btn-blue btn-add pull-right">Add</button></span>  --\x3e\t\t\t\t\t\t\t\t\t\t<div style="display: flex; gap: 15px; align-items: center; justify-content: space-between;">\t\t\t\t\t\t\t\t\t\t\t<ul class="modal-email-wrapper clearfix email-cps-holder" style="margin-bottom: 0; width: 100%"> \t\t\t\t\t\t\t\t\t\t\t\t<li class="open">\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="email" name="email_cps" id="email_cps" Placeholder="Type email addresses" \t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="form-control input-slim pull-left acjs-input ac_input" style="width: 270px;" /> \t\t\t\t\t\t\t\t\t\t\t\t</li> \t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t<button class="btn pull-right btn-blue email_invte_cps_group">Add</button>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="email_invitee_list_cps">\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div id="password_access_cps" class="password_acces_cps_share hide">\t\t\t\t\t\t\t\t\t<label>Password : </label>\t\t\t\t\t\t\t\t\t<div class="password_form_field">\t\t\t\t\t\t\t\t\t\t<input style="padding-left: 12px;" class="form-control" type="password" placeholder="Password" />\t\t\t\t\t\t\t\t\t\t<svg id="showPasswordField" width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">\t\t\t\t\t\t\t\t\t\t\t<path d="M13.125 10.5C13.125 11.9497 11.9497 13.125 10.5 13.125C9.05025 13.125 7.875 11.9497 7.875 10.5C7.875 9.05025 9.05025 7.875 10.5 7.875C11.9497 7.875 13.125 9.05025 13.125 10.5Z" fill="#586266"/>\t\t\t\t\t\t\t\t\t\t\t<path d="M19.1576 10.1087C17.2692 6.3318 13.9152 4.375 10.5 4.375C7.08476 4.375 3.73082 6.3318 1.84238 10.1087C1.71921 10.355 1.71921 10.645 1.84238 10.8913C3.73082 14.6682 7.08476 16.625 10.5 16.625C13.9152 16.625 17.2692 14.6682 19.1576 10.8913C19.2808 10.645 19.2808 10.355 19.1576 10.1087ZM10.5 14.875C7.90231 14.875 5.2483 13.4568 3.61345 10.5C5.2483 7.54318 7.90231 6.125 10.5 6.125C13.0977 6.125 15.7517 7.54318 17.3866 10.5C15.7517 13.4568 13.0977 14.875 10.5 14.875Z" fill="#586266"/>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t<svg id="hidePasswordField" style="display: none;" width="18" height="15" viewBox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">\t\t\t\t\t\t\t\t\t\t\t<path d="M2.35519 0.244078C2.01543 -0.0813592 1.46458 -0.0813592 1.12482 0.244078C0.785062 0.569515 0.785062 1.09715 1.12482 1.42259L3.23385 3.44273C1.98917 4.33948 0.904151 5.57119 0.0918485 7.12732C-0.0306162 7.36193 -0.0306162 7.63807 0.0918485 7.87268C1.9695 11.4697 5.30429 13.3333 8.70002 13.3333C10.053 13.3333 11.3963 13.0375 12.6416 12.454L15.0448 14.7559C15.3846 15.0814 15.9355 15.0814 16.2752 14.7559C16.615 14.4305 16.615 13.9028 16.2752 13.5774L2.35519 0.244078ZM11.322 11.19C10.4698 11.5093 9.58166 11.6667 8.70002 11.6667C6.11717 11.6667 3.47831 10.316 1.85281 7.5C2.56408 6.2678 3.46937 5.31617 4.4791 4.63549L6.34438 6.42216C6.18132 6.74852 6.09001 7.11405 6.09001 7.50001C6.09001 8.88072 7.25855 10 8.70002 10C9.10296 10 9.48457 9.91255 9.82529 9.75636L11.322 11.19Z" fill="#586266"/>\t\t\t\t\t\t\t\t\t\t\t<path d="M14.4005 9.07956C14.8207 8.6168 15.2063 8.09063 15.5472 7.5C13.9217 4.68398 11.2828 3.33333 8.69998 3.33333C8.60254 3.33333 8.50502 3.33526 8.40747 3.33911L6.85509 1.85215C7.46236 1.72876 8.08016 1.66667 8.69998 1.66667C12.0957 1.66667 15.4305 3.53029 17.3081 7.12732C17.4306 7.36193 17.4306 7.63807 17.3081 7.87268C16.8349 8.77931 16.2691 9.57581 15.633 10.2601L14.4005 9.07956Z" fill="#586266"/>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<div class="modal-footer clearfix"><button class="btn btn-submit pull-right btn-blue btn-save hide disabled">Save</div>\t\t\t\t\t\t\t</div>';
data5.buttons=[];a=[data1,data2,data5];void 0!=data3.body&&a.push(data3);void 0!=data4.body&&a.push(data4);return a},_prepare_change_email_popup:function(a){return data={header:"Change your email address",body:'<form>\t\t\t\t\t\t<div style="padding-bottom: 15px;"><label>New email</label><input id="txt_new_email" type="text" class="form-control" /></div>\t\t\t\t\t\t<div style="padding-bottom: 15px;"><label>Confirm new email</label><input id="txt_new_email_confirm" type="text" class="form-control" /></div> \t\t\t\t\t\t<div style="padding-bottom: 15px;"><label>Password</label><input id="txt_password" type="password" class="form-control" /></div> \t\t\t\t\t</form>',
buttons:[{type:"action",text:"Update email"},{type:"cancel"}]}},_prepare_gmail_contacts_form:function(a){var c={};if(0==a.data.length)c.header="No Contacts Found!",c.body="<p class='msg'>You'll receive 500MB of free space for each new friend who installs Jumpshare</p>",c.body+='<div class="input-group input-group-lg input-with-icon">\t\t\t\t\t\t\t  <span class="input-group-addon"><span class="icn-user"></span></span>\t\t\t\t\t\t\t  <input type="text" class="form-control search_gmail" name="search_gmail" placeholder="Search for a name or email address..." id="search-gmail-contact">\t\t\t\t\t\t\t</div>',
c.body+='<div class="gmail space msg pull-left">Potential free space: <span>0</span> / 18GB</div>',c.buttons=[{type:"cancel"}];else{c.header="Invite friends to Jumpshare!";c.body="<p class='msg'>You'll receive 500MB of free space for each new friend who installs Jumpshare</p>";c.body+='<div class="input-group input-group-lg input-with-icon">\t\t\t\t\t\t\t  <span class="input-group-addon"><span class="icn-user"></span></span>\t\t\t\t\t\t\t  <input type="text" class="form-control search_gmail" name="search_gmail" placeholder="Search for a name or email address..." id="search-gmail-contact">\t\t\t\t\t\t\t</div><ul class="modal-tag-list" id="ref_list_box">';
for(var b=0;b<a.data.length;b++)"registered"==a.data[b].status?c.body+='<li class="emailID" data-value="'+a.data[b].name+'"><label class="custom-controls checkbox blockUI"><input type="checkbox" id="'+b+'" name="eemail" value="'+a.data[b].name+'" autocomplete="off"><span class="custom-control-indicator icns icn-checkbox pull-left"></span> <span class="name">'+Jmp.Helpers.formatFileName(a.data[b].name,30)+'</span><span class="status pull-right">Already on Jumpshare</span></label></li>':"invited"==
a.data[b].status?c.body+='<li class="emailID" data-value="'+a.data[b].name+'"><label class="custom-controls checkbox blockUI"><input type="checkbox" id="'+b+'" name="eemail" value="'+a.data[b].name+'" autocomplete="off"><span class="custom-control-indicator icns icn-checkbox pull-left"></span> <span class="name">'+Jmp.Helpers.formatFileName(a.data[b].name,30)+'</span><span class="status pull-right">Already Invited</span></label></li>':"new"==a.data[b].status&&(c.body+='<li class="emailID" data-value="'+
a.data[b].name+"-"+a.data[b].contact+'"><label class="custom-controls checkbox"><input type="checkbox" id="'+b+'" name="email" value="'+a.data[b].name+'" autocomplete="off"> <span class="custom-control-indicator icns icn-checkbox pull-left"></span> <span class="name">'+Jmp.Helpers.formatFileName(a.data[b].name,30)+'</span><span class="status pull-right" data-value="'+a.data[b].contact+'">'+Jmp.Helpers.formatFileName(a.data[b].contact,30)+"</span></label></li>");c.body+='</ul><div class="gmail space msg pull-left">Potential free space:<span> 0 / '+
.5*a.data.quota+" GB</span></div>";c.buttons=[{type:"action",text:"Invite",style:{klass:"pull-right",id:"ginvite"}},{type:"cancel",style:{klass:"pull-right"}}]}return c},_prepare_referrals_details_form:function(a){var c={};c.header="Free Space Earned: "+.5*a.data.length+"GB";if(0<a.data.length){c.body='<ul class="modal-tag-list">';for(var b=0;b<a.data.length;b++)c.body=""==a.data[b].invited_user_name?c.body+('<li class="emailID"><label class="custom-controls blockUI">'+a.data[b].invited_user_name+
a.data[b].invited_user_email+'<span class="status pull-right">500 MB</span></label></li>'):c.body+('<li class="emailID"><label class="custom-controls blockUI">'+a.data[b].invited_user_name+" ("+a.data[b].invited_user_email+')<span class="status pull-right">500 MB</span></label></li>');c.body+="</ul>"}else c.body='<p class="msg">Nobody has used your invite to join Jumpshare so far. Invite friends to earn free space.</p>';c.buttons=[{type:"cancel",text:"Okay"}];return c},_prepare_lightbox_for_signup_form:function(a){var c=
{header:""},b=$(a.login_form);b.find("#remember").next("label").attr("for","remember-me");b.find("#remember").attr("id","remember-me");c.body='<div id="the_sign_up">';c.body+=a.register_form+"</div>";c.body+='<div id="the_login" style="display: none;">';c.body+=b[0].outerHTML+"</div>";c.buttons=[];return c},_prepare_lightbox_for_link_copied:function(a){var c={header:"Share Link"};c.body="<input type='text' value='"+a.copy_link+"' style='cursor: pointer; width: 100%' class='form-control' onclick='this.focus();this.select();' />";
c.buttons=[{type:"cancel",text:"OK"}];return c},_prepare_lightbox_for_remove_share:function(a){var c={};c.header="Remove "+("file"==a.item_type?"file":"folder");c.body="Are you sure you want to remove '<strong style='word-break: break-all;'>"+Jmp.Helpers.formatFileName(a.item_name,30)+"</strong>' from your shared page?";c.buttons=[{type:"action",text:"Remove",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_lightbox_for_remove_viewed:function(a){var c={};c.header="Remove "+("file"==a.item_type?
"file":"folder");c.body="Are you sure you want to remove '<strong style='word-break: break-all;'>"+Jmp.Helpers.formatFileName(a.item_name,30)+"</strong>' from your viewed page?";c.buttons=[{type:"action",text:"Remove",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_lightbox_for_view_share_item_details:function(a){var c={},b=a.share_info;c.header="file"==b.item_type?"File Info":"Folder Info";a='<div class="file-info"><div class="file-name">'+(b.item_name+"</div>");b.image&&(a+='<div class="file-type">'+
b.image+"</div>");a=a+'<div class="sender-info clearfix"><div class="row clearfix"><div class="col-sm-2">Shared by</div><div class="col-sm-10">'+(b.from_username+" ("+b.from_email+")</div>");a+="</div>";b.message&&(a=a+'<div class="row clearfix"><div class="col-sm-2">Message</div><div class="col-sm-10">"'+(b.message+'"</div>'),a+="</div>");b.status&&(a=a+'<div class="row clearfix"><div class="col-sm-2">Status</div><div class="col-sm-10">'+(b.status+"</div>"),a+="</div>");a=a+'<div class="row clearfix"><div class="col-sm-2">Shared on</div><div class="col-sm-10">'+
(b.shared+"</div>");a+="</div>";b.modified_date&&(a=a+'<div class="row clearfix"><div class="col-sm-2">Modified</div><div class="col-sm-10">'+(b.modified_date+"</div>"),a+="</div>");"file"==b.item_type&&(a=a+'<div class="row clearfix"><div class="col-sm-2">Size</div><div class="col-sm-10">'+(b.size+"</div>"),a+="</div>");c.body=a;c.buttons=[{type:"cancel",text:"Close"}];return c},_prepare_lightbox_for_error_message:function(a){var c={};c.header=a.title;c.body="<span class='msg'>"+a.body+"</span>";
c.buttons=[{type:"cancel",text:"undefined"!=typeof a.button_text&&""!=a.button_text?a.button_text:"Ok",style:{klass:"undefined"!=typeof a.button_text&&""!=a.button_text?"btn-blue btn-small":""}}];return c},_prepare_lightbox_for_large_folder_upload_error_message:function(a){var c={header:"Too many sub-folders"};c.body="<span class='msg'>The folder you're trying to upload has "+a.folder_count+" sub-folders which are too many to upload at one time. Please keep it to a maximum of 50 sub-folders at one time.</span>";
c.buttons=[{type:"cancel",text:"undefined"!=typeof a.button_text&&""!=a.button_text?a.button_text:"Okay, got it",style:{klass:"undefined"!=typeof a.button_text&&""!=a.button_text?"btn-blue btn-small":""}}];return c},_prepare_lightbox_for_email_verification:function(a){var c={};c.header=a.title;c.body="<p class='msg'>We sent a verification email ";""!=a.email&&(c.body+="to <i>"+a.email+"</i> ");c.body+="when you signed up. Just click on the verify button in the email to start sharing. If you can\u2019t find it in your inbox, check your spam folder, or resend the email.</p>";
c.buttons=""!=a.email?[{type:"cancel",text:"Resend email",style:{klass:"",id:"resend_verify_email"}},{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue btn-small",id:"verify_email_okay"}},{type:"cancel",text:"Update email address",style:{klass:"btn btn-verify pull-left",id:"update_my_email_address"}}]:[{type:"cancel",text:"Resend email",style:{klass:"",id:"resend_verify_email"}},{type:"cancel",text:"Update email address",style:{klass:"btn btn-verify pull-left",id:"update_my_email_address"}}];
return c},_prepare_lightbox_for_file_size_error:function(a){var c=a.action?a.action:"upload",b={},h=2>PLANID?"250 MB":6>PLANID?"20 GB":"";if(1==a.items.length)b.header="File exceeds <strong>"+h+"</strong> limit",b.body="The file '<strong>"+Jmp.Helpers.formatFileName(a.items[0].name,30)+"</strong>' cannot be "+c+"ed.",2>PLANID?b.body+=" Upgrade to Jumpshare Plus to "+c+" files larger than "+h+". <br />":Jmp.Helpers.isPlusPlanUserByPlanID(PLANID)&&(b.body+=" Upgrade to Jumpshare Business to "+c+" files larger than "+
h+". <br />");else{b.header="Files exceed <strong>"+h+"</strong> limit";b.body="";2>PLANID?b.body+=" Files larger than "+h+" are supported in Plus plan.":Jmp.Helpers.isPlusPlanUserByPlanID(PLANID)&&(b.body+=" Files larger than "+h+" are supported in Business plan.");b.body+=" The following files cannot be "+c+"ed: ";b.body+="<div id='folder-area'>";b.body+="<ul id='folders' class='le'>";for(c=0;c<a.items.length;c++)b.body+='<li style="background: none;">'+Jmp.Helpers.formatFileName(a.items[c].name,
30)+"</li>";b.body+="</ul>";b.body+="</div>"}2>PLANID?b.buttons=[{type:"cancel",text:"Maybe Later",style:{klass:"btn-default pull-left",id:"up-cancel"}},{type:"action",text:"Upgrade Now",style:{id:"upgrade_plan"}}]:Jmp.Helpers.isPlusPlanUserByPlanID(PLANID)?b.buttons=[{type:"cancel",text:"Maybe Later",style:{klass:"btn-default pull-left",id:"up-cancel"}},{type:"action",text:"Upgrade Now",style:{id:"upgrade_plan"}}]:b.buttons=[{type:"cancel",text:"Ok",style:{klass:"btn-blue"}}];return b},_prepare_lightbox_for_insufficient_user_storage:function(a){var c=
{};c.header=a.title;if(1==a.items.length)var b="The file '<strong>"+Jmp.Helpers.formatFileName(a.items[0].name,30)+"</strong>' cannot be uploaded. <br />";else{b="The following files cannot be uploaded: <br /><div id='folder-area'><ul id='folders' class='le'>";for(var h=0;h<a.items.length;h++)b+='<li style="background: none;">'+Jmp.Helpers.formatFileName(a.items[h].name,30)+"</li>";b+="</ul></div>"}c.body=b;c.buttons=[{type:"cancel",text:"Ok"}];return c},_prepare_lightbox_for_bucket_file_limit_reached:function(a){var c=
{};c.header=a.title;if(1==a.items.length)var b="Oops! No more than 400 files per folder. The file '<strong>"+Jmp.Helpers.formatFileName(a.items[0].name,30)+"</strong>' cannot be uploaded. <br />";else{b="Oops! No more than 400 files per folder. The following files cannot be uploaded: <br /><div id='folder-area'><ul id='folders' class='le'>";for(var h=0;h<a.items.length;h++)b+='<li style="background: none;">'+Jmp.Helpers.formatFileName(a.items[h].name,30)+"</li>";b+="</ul></div>"}c.body="<span class='msg'>"+
b+"</span>";c.buttons=[{type:"cancel",text:"Ok"}];return c},_prepare_lightbox_for_merge_failed:function(a){var c={};c.header=a.title;var b="";void 0!=a.message&&""!=a.message&&(b=a.message);b=b+"<div id='folder-area'><ul id='folders'>"+this._prepare_bucket_list(a.bucket_list);c.body="<span class='msg'>"+(b+"</ul></div></span>");c.buttons=[{type:"cancel",text:"Ok"}];return c},_prepare_lightbox_for_bucket_owner_mismatch:function(a){var c={};if(1==a.items.length){c.header="Operation not allowed";var b=
"You are not allowed to upload file in this folder. The file '<strong>"+Jmp.Helpers.formatFileName(a.items[0].name,30)+"</strong>' cannot be uploaded.  <br />"}else{c.header="<h2>Operation not allowed</h2>";b="You are not allowed to upload file in this folder. The following files cannot be uploaded: <br /> <br /> <div id='folder-area'><ul id='folders' class='le'>";for(var h=0;h<a.items.length;h++)b+='<li style="background: none;">'+Jmp.Helpers.formatFileName(a.items[h].name,30)+"</li>";b+="</ul></div>"}c.body=
"<span class='msg'>"+b+"</span>";c.buttons=[{type:"cancel",text:"Ok"}];return c},_prepare_report_file_suspicious_popup:function(a){return{header:"Report this file as suspicious",body:'<form role="form" id="form_report_file_suspicious" onSubmit="javascript: return false;">\t\t\t\t\t\t\t<div class="input-group" style="margin-bottom: 15px; clear: both; overflow: hidden;">\t\t\t\t\t\t\t\t<label for="new_bucket_name">Your Name</label>\t\t\t\t\t\t\t  \t<input type="text" class="form-control" placeholder="Your Name" id="report_your_name" name="report_your_name">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="input-group" style="margin-bottom: 15px; clear: both; overflow: hidden;">\t\t\t\t\t\t\t\t<label for="new_bucket_name">Your Email</label>\t\t\t\t\t\t\t  \t<input type="text" class="form-control" placeholder="Your Email" id="report_your_email" name="report_your_email">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="input-group" style="margin-bottom: 15px; clear: both; overflow: hidden;">\t\t\t\t\t\t\t\t<label for="new_bucket_name">Why is this file suspicious to you?</label>\t\t\t\t\t\t\t  \t<textarea rows="3" cols="40" class="form-control input-slim" placeholder="Please let us know why is this file suspicious to you..." id="report_your_reason"></textarea>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</form>',
buttons:[{type:"action",text:"Send Report",style:{klass:"btn-blue"}},{type:"cancel"}]}},_prepare_lightbox_for_mobile_copy_link:function(a){return lightbox+='<div class="modal-content modal-copy-link"> \t\t\t\t\t<input type="text" value="'+a.mobile_copy_link+'" onclick="this.focus();this.select();"> \t\t\t\t\t<div class="btn-group clearfix"> \t\t\t\t\t\t<a href="/" class="btn btn-default pull-left cancel">Cancel</a> \t\t\t\t\t</div> \t\t\t\t</div></div>'},_prepare_remove_photo:function(a){var c={};
c.header=a.header;c.body=a.body;c.buttons=[{type:"action",text:"Remove",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_delete_inbox_dialog:function(a){var c={header:"Delete Inbox"};c.body="<p>Are you sure you want to delete the inbox '"+a.inbox_name+"'? Once deleted, it cannot be restored.</p>";c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_download_large_zip:function(a){var c={};c.header=a.header;c.body=a.body;c.buttons=[{type:"action",
text:a.dl_button_text,style:{klass:"btn-blue"}},{type:"cancel",text:"I already have it, thanks!"}];return c},_prepare_delete_account_form:function(a){a={header:"Delete Account",body:'<p><span class="msg">This action is permanent. If you delete your account:</span></p>'};a.body+='<ul style="line-height:1.7;">\t\t\t<li>All your uploads, comments, and shareable links will be deleted permanently.</li>\t\t\t<li>You will be removed from any Workspaces that you joined.</li>\t\t\t<li>All members who joined your Workspace will be removed and their uploads deleted.</li>\t\t\t<li>Your personal information and data will be completely removed from our servers.</li>\t\t\t</ul>';
1<PLANID&&(a.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="4" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re closing your account..." id="delete_account_reason"></textarea></div>');a.buttons=[{type:"action",text:"Delete my account",style:{klass:"btn-red"}},{type:"cancel",text:"Cancel"}];return a},_prepare_leave_workspace_form:function(a){a={};a.header="Leave "+WORKSPACE_NAME;a.body='<p><span class="msg">This action is permanent. If you leave:</span></p>';
a.body+='<ul style="line-height:1.7;">\t\t\t<li>You will no longer be able to access this workspace</li>\t\t\t<li>You will no longer have access to uploads in your Personal Library</li>\t\t\t<li>Your uploads in Shared and Team Libraries will remain in the Workspace</li>\t\t\t</ul>\t\t\t<p style="margin: 25px auto;"><strong>Note:</strong> If this is the only Workspace in your account, your account will be deleted. To prevent this, create another Workspace before leaving this one.</p>';a.buttons=[{type:"action",
text:"Leave Workspace",style:{klass:"btn-red"}},{type:"cancel",text:"Cancel"}];return a},_prepare_delete_workspace_form:function(a){a={};a.header="Delete "+WORKSPACE_NAME+"?";a.body='<p><span class="msg">This action is permanent. If you delete your Workspace:</span></p>';a.body+='<ul style="line-height:1.7;">\t\t\t<li>You will no longer be able to access this Workspace</li>\t\t\t<li>All team members in this Workspace will be removed</li>\t\t\t<li>All uploads in this Workspace will be deleted</li>\t\t\t<li>If your Workspace is subscribed to any premium plan, it will be canceled</li>\t\t\t</ul>';
1<PLANID&&(a.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="4" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re closing your account..." id="delete_workspace_reason"></textarea></div>');a.body+='<p style="margin: 25px auto;"><strong>Note:</strong> If this is the only Workspace in your account, your account will be deleted. To prevent this, create another Workspace before deleting this one.</p>';a.buttons=
[{type:"action",text:"Delete Workspace",style:{klass:"btn-red"}},{type:"cancel",text:"Cancel"}];return a},_prepare_export_data_form:function(a){var c={header:"Export your data",body:'<p><span class="msg">We collect, and associate with your account, the information you provide to us when you do things such as sign up for your account, share files, and upgrade to a paid plan. This information is securely stored at Jumpshare servers. You can export all data we have on you in a single CSV file.</span></p>'};
Jmp.Helpers.isBusinessPlanUser()||Jmp.Helpers.isEnterprisePlanUser()?(c.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;">Export data of: <select id="export_of" name="export_of" class=""><option value="team">Your Team</option><option value="user">Your Data</option>',$.each(a.members,function(b,h){c.body+='<option value="'+h.email+'">'+h.full_name+"</option>"}),c.body+="</select></div>"):c.body+='<div class="input-group" style="display: none;"><input type="hidden" name="export_of" id="export_of" value="user" /></div>';
c.buttons=[{type:"action",text:"Download your data",style:{klass:"btn-blue"}},{type:"cancel",text:"Cancel"}];return c},_prepare_cancel_plan_form:function(a){var c={header:"Cancel Jumpshare Plus :(",body:'<p><span class="msg">Hey, are you sure about that? We\'ll be sad to see you go. If you have any issue regarding our service, please consider <a href="mailto:hello@jumpshare.com" target="_blank" style="color:#43a6eb;">contacting us</a> first.</span></p>'};c.body+='<p><span class="msg">Once you cancel your Jumpshare Plus subscription:</span></p>';
c.body+='<ul style="line-height:1.7;">\t\t\t<li>You will be downgraded to our (still excellent) Free plan</li>\t\t\t<li>All Jumpshare Plus features including advanced sharing options, custom branding, and analytics will be disabled</li>\t\t\t<li>Files that take up more than the free 2GB of space will be deleted permanently</li>\t\t\t<li>If you used a custom domain to share your files, all links will stop working</li>\t\t\t</ul>';1!=a.is_trial&&(c.body+='<h4 style="font-size: 16px; color: #101010; font-weight: 600; margin-top: 12px; margin-bottom: 6px;">Choose option:</h4>',
c.body+='<div class="options-wrapper">          <label class="custom-controls radio">            <input type="radio" name="downgrade_option" value="immediately" checked="checked">            <span class="custom-control-indicator radio"></span>            <span class="downgrade_option-js">Cancel immediately</span>          </label>          <label class="custom-controls radio" style="padding-bottom: 0;">            <input type="radio" name="downgrade_option" value="later">            <span class="custom-control-indicator radio"></span>          <span class="downgrade_option-js">Cancel once subscription ends</span></label>        </div>');
c.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';c.buttons=[{type:"action",text:"Cancel Jumpshare Plus",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return c},_prepare_cancel_business_plan_form:function(a){var c={};a=a.next_expected_plus_plan_id;c.header="Cancel Jumpshare Business :(";
c.body='Are you sure about that? If you have any issue regarding our service, please consider <a style=\'color: #168EEA;\' href=\'mailto:business@jumpshare.com\'>contacting us</a> first.<br><br>You can choose to downgrade to any plan of your choice:<div class="options-wrapper pull-left"><label class="custom-controls radio" style="padding-bottom: 3px;"><input type="radio" id="plan_plus" name="next_plan" value="plan_plus" checked="checked"><span class="custom-control-indicator radio"></span><span><strong>Downgrade to Plus ('+
(4===a?"$9.99/month":"$99/year")+')</strong></span></label><div style="margin-left:35px;">All Team Library will be deleted. You can keep your personal files (up to 1TB space), share links, and some Business features, such as, custom branding, advanced options, and more.</div><label class="custom-controls radio" style="margin-top: 10px; padding-bottom: 3px;"><input type="radio" id="plan_free" name="next_plan" value="plan_free"><span class="custom-control-indicator radio"></span><span><strong>Downgrade to Basic (Free)</strong></span></label><div style="margin-left:35px;">All Team Library will be deleted, your share links will stop working, and all Business features will be removed. All your personal files over 2GB will be deleted.</div><div style="margin:25px auto;"><strong>Note: </strong> In both cases, all team members will be downgraded to the Basic plan and will lose their files taking over 2GB total space. All share links and Business features will be removed.</div></div>';
c.buttons=[{type:"action",text:"Cancel Jumpshare Business",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return c},_prepare_cancel_enterprise_plan_form:function(a){var c={},b=a.next_expected_plus_plan_id;a=a.next_expected_business_plan_id;c.header="Cancel Jumpshare Enterprise :(";c.body='Are you sure about that? If you have any issue regarding our service, please consider <a style=\'color: #168EEA;\' href=\'mailto:business@jumpshare.com\'>contacting us</a> first.<br><br>You can choose to downgrade to any plan of your choice:<div class="options-wrapper pull-left"><label class="custom-controls radio" style="padding-bottom: 3px;"><input type="radio" id="plan_business" name="next_plan" value="plan_business" checked="checked" data-plan-id="'+
a+'"><span class="custom-control-indicator radio"></span><span><strong>Downgrade to Business ('+(6===a?"$15/user/month":"$150/user/year")+')</strong></span></label><div style="margin-left:35px;">You can keep your personal and Team Library (up to 2TB space). SSO Login option and personalised priority support will be removed.</div><label class="custom-controls radio" style="padding-bottom: 3px;"><input type="radio" id="plan_plus" name="next_plan" value="plan_plus" data-plan-id="'+b+'"><span class="custom-control-indicator radio"></span><span><strong>Downgrade to Plus ('+
(4===b?"$9.99/month":"$99/year")+')</strong></span></label><div style="margin-left:35px;">All Team Library and members will be deleted. You can keep your personal files (up to 1TB space), share links, and some Business features, such as, custom branding, advanced options, and more.</div><label class="custom-controls radio" style="margin-top: 10px; padding-bottom: 3px;"><input type="radio" id="plan_free" name="next_plan" value="plan_free" data-plan-id="1"><span class="custom-control-indicator radio"></span><span><strong>Downgrade to Basic (Free)</strong></span></label><div style="margin-left:35px;">All Team Library and members will be deleted, your share links will stop working, and all Business features will be removed. All your personal files over 2GB will be deleted.</div><div style="margin:25px auto;">&nbsp;</div></div>';
c.buttons=[{type:"action",text:"Cancel Jumpshare Enterprise",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return c},_prepare_buy_now_business_plan_form:function(a){var c={},b=a.daysLeft;c.header="Buy "+a.planName+" now";c.body="There are "+b+" days remaining in your 14 days free trial. You will automatically get upgraded to the Jumpshare "+a.planName+" account once your trial ends. Do you want to purchase "+a.planName+" now?";c.buttons=[{type:"action",text:"Buy "+a.planName+
" Now",style:{klass:"btn-blue"}},{type:"cancel",text:"Continue Free Trial"}];return c},_prepare_cancel_downgrade_process_popup:function(a){var c={},b=a.expireTime;c.header="Continue Jumpshare "+a.planName+" plan";c.body="Your account will be downgraded to the Free plan when your current subscription expires on "+b+". Do you want to keep "+a.planName+" subscription?";c.buttons=[{type:"action",text:"Yes, Keep subscription",style:{klass:"btn-blue"}},{type:"cancel",text:"Continue Downgrade Process"}];
return c},_prepare_cancel_business_plan_to_free_reason_form:function(a){var c={header:"Are you sure you want to cancel?",body:'<p><span class="msg">Are you sure you want to cancel the Business plan? You have chosen to downgrade to the Basic plan.</span></p>'};c.body+='<p><span class="msg">Once you cancel your Business plan:</span></p>';c.body+='<ul style="line-height:1.7;">\t\t\t<li>All uploads in your Workspace over 2 GB will be deleted</li>\t\t\t<li>Your Workspace will be limited to 50 uploads in total</li>\t\t\t<li>All Business Plan features will be disabled</li>\t\t\t<li>All members in your Workspace will be downgraded to the Basic plan</li>\t\t\t</ul>';
1!=a.is_trial&&(c.body+='<h4 style="font-size: 16px; color: #101010; font-weight: 600; margin-top: 12px; margin-bottom: 6px;">Choose option:</h4>',c.body+='<div class="options-wrapper">          <label class="custom-controls radio">            <input type="radio" name="downgrade_option" value="immediately" checked="checked">            <span class="custom-control-indicator radio"></span>            <span class="downgrade_option-js">Cancel immediately</span>          </label>          <label class="custom-controls radio" style="padding-bottom: 0;">            <input type="radio" name="downgrade_option" value="later">            <span class="custom-control-indicator radio"></span>          <span class="downgrade_option-js">Cancel once subscription ends</span></label>        </div>');
c.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';c.buttons=[{type:"action",text:"Cancel Jumpshare Business",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return c},_prepare_cancel_business_plan_to_plus_reason_form:function(a){a={header:"Are you sure you want to cancel?",
body:'<p><span class="msg">Are you sure you want to cancel the Business plan? You have chosen to downgrade to the Plus plan.</span></p>'};a.body+='<p><span class="msg">Once you cancel your Business plan:</span></p>';a.body+='<ul style="line-height:1.7;">\t\t\t<li>All uploads in your Workspace over 1 TB storage space will be deleted</li>\t\t\t<li>All Workspace Admin settings will be removed</li>\t\t\t<li>All Business Plan features will be disabled</li>\t\t\t<li>All members in your Workspace will be downgraded to the Plus plan</li>\t\t\t</ul>';
a.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';a.buttons=[{type:"action",text:"Cancel Jumpshare Business",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return a},_prepare_cancel_enterprise_plan_to_plus_reason_form:function(a){a={header:"Are you sure you want to cancel?",
body:'<p><span class="msg">Are you sure you want to cancel the Enterprise plan? You have chosen to downgrade to the Plus plan.</span></p>'};a.body+='<p><span class="msg">Once you cancel your Enterprise plan:</span></p>';a.body+='<ul style="line-height:1.7;">\t\t\t<li>All uploads in your Workspace over 1 TB storage space will be deleted</li>\t\t\t<li>All Workspace Admin settings will be removed</li>\t\t\t<li>All Enterprise Plan features will be disabled</li>\t\t\t<li>All members in your Workspace will be downgraded to the Plus plan</li>\t\t\t</ul>';
a.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';a.buttons=[{type:"action",text:"Cancel Jumpshare Enterprise",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return a},_prepare_cancel_enterprise_plan_to_business_reason_form:function(a){a={header:"Are you sure you want to cancel?",
body:'<p><span class="msg">Are you sure you want to cancel the Enterprise plan? You have chosen to downgrade to the Business plan.</span></p>'};a.body+='<p><span class="msg">Once you cancel your Enterprise plan:</span></p>';a.body+='<ul style="line-height:1.7;">\t\t\t<li>All uploads in your Workspace over 2 TB storage space will be deleted </li>\t\t\t<li>All Workspace Admin settings will be removed</li>\t\t\t<li>All Enterprise Plan features will be disabled</li>\t\t\t<li>All members in your Workspace will be downgraded to the Business plan</li>\t\t\t</ul>';
a.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';a.buttons=[{type:"action",text:"Cancel Jumpshare Enterprise",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return a},_prepare_cancel_enterprise_plan_to_free_reason_form:function(a){var c={header:"Are you sure you want to cancel?",
body:'<p><span class="msg">Are you sure you want to cancel the Enterprise plan? You have chosen to downgrade to the Basic plan.</span></p>'};c.body+='<p><span class="msg">Once you cancel your Enterprise plan:</span></p>';c.body+='<ul style="line-height:1.7;">\t\t\t<li>All uploads in your Workspace over 2 GB will be deleted</li>\t\t\t<li>Your Workspace will be limited to 50 uploads in total</li>\t\t\t<li>All Enterprise Plan features will be disabled</li>\t\t\t<li>All members in your Workspace will be downgraded to the Basic plan</li>\t\t\t</ul>';
1!=a.is_trial&&(c.body+='<h4 style="font-size: 16px; color: #101010; font-weight: 600; margin-top: 12px; margin-bottom: 6px;">Choose option:</h4>',c.body+='<div class="options-wrapper">          <label class="custom-controls radio">            <input type="radio" name="downgrade_option" value="immediately" checked="checked">            <span class="custom-control-indicator radio"></span>            <span class="downgrade_option-js">Cancel immediately</span>          </label>          <label class="custom-controls radio" style="padding-bottom: 0;">            <input type="radio" name="downgrade_option" value="later">            <span class="custom-control-indicator radio"></span>          <span class="downgrade_option-js">Cancel once subscription ends</span></label>        </div>');
c.body+='<div class="input-group type-tweet" style="padding-top: 10px; padding-bottom: 5px;"><textarea rows="5" cols="66" class="form-control input-slim" placeholder="Please let us know why you\u2019re cancelling..." id="cancel_plan_reason"></textarea></div>';c.buttons=[{type:"action",text:"Cancel Jumpshare Enterprise",style:{klass:"btn-red"}},{type:"cancel",text:"No, I changed my mind"}];return c},_prepare_password_authentication_form:function(a){a={header:"Please enter your password",body:'<span class="msg">Please enter your password to proceed.</span> \t\t\t<div class="confirm left" style="margin-top:27px;width:100%;"> \t\t\t\t<input type="password" id="password_authentication" class="form-control" style="height:33px;width:100%;" /></div>',
buttons:[{type:"action",text:"Proceed",style:{klass:"btn-blue"}},{type:"cancel"}]};a.body+=this.error_template_for_inside_lightbox();return a},_prepare_payment_cycle_period_form:function(a){return{header:"You're changing your payment cycle period",body:'<span class="msg">You will be refunded for the remaining period of your plan. You will then be charged for the new billing cycle.</span>',buttons:[{type:"cancel",text:"Okay, got it!",style:{klass:"ok"}}]}},_prepare_feedback_form:function(a){a={header:"Send us your feedback",
body:"<p>We read every feedback sent to us. Have a suggestion to improve Jumpshare? Let us know.</p>"};a.body+='<div class="input-group type-tweet"><textarea rows="5" cols="56" class="form-control input-slim" placeholder="Type your feedback" id="feed"></textarea></div>';a.buttons=[{type:"action",text:"Send Feedback",id:"submit_feedback",style:{klass:"btn-blue"}}];return a},_prepare_invite_not_allowed:function(a){return{header:"Invite Not Allowed",body:"<p>Only admin can invite new members.</p>",buttons:[{type:"action",
text:"Send Feedback",id:"submit_feedback"}]}},_prepare_new_workspace_form:function(a){a={header:"New Workspace",body:"<p>Create a new workspace. This is the name of your company, team or organization.<p/>"};a.body+='<div style="width: 100%; margin-bottom: 5px;" class="input-group"><input type="text" class="form-control input-lg" placeholder="Name of the Workspace" id="txt_new_workspace_name" /></div>';a.buttons=[{type:"action",text:"Create",style:{id:"btn_add_new_workspace",klass:"btn-blue pull-right"}},
{type:"cancel",text:"Cancel",style:{klass:"pull-right"}}];return a},_prepare_default_workspace_form:function(a){a={};var c="",b="";$(".workspace_act_dropdown li .workspace_dropdown").each(function(h){""==b&&(b={code:$(this).attr("data-code"),name:$(this).find("h4").text()});c+='<li data-code="'+$(this).attr("data-code")+'" ><a href="javascript:;">'+$(this).find("h4").text()+"</a></li>"});a.header="Default Workspace";a.body="<p>Choose your default Workspace. Your video recordings, screenshots and other uploads from the desktop app will go to Personal Library of your default Workspace.<p/>";
a.body+='<div class="cta_wind_dropdown" style="margin-top: 23px;">';a.body+='<div class="btn-compact">';a.body+='\t<button id="button_style_workspaces" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i data-code="'+b.code+'">'+b.name+'</i><span class="caret"></span></button>';a.body+='\t\t<ul class="dropdown-menu list_workspaces" role="menu">';a.body+=c;a.body+="\t\t</ul>";a.body+="</div>";a.body+="</div>";a.buttons=[{type:"action",text:"Save",style:{id:"change_default_workspace_submit",
klass:"btn-blue pull-right"}},{type:"cancel",text:"Cancel",style:{klass:"pull-right"}}];return a},_prepare_fair_usage_policy_free_user:function(a){return{header:"Bandwidth Exceeded!",body:'You\'ve exceeded the 10GB per month bandwidth limit. All share links have been disabled until the next month. For unlimited bandwidth (fair usage policy applies), upgrade to Jumpshare Plus.\t\t</br></br><span class="msg"><strong>Note:</strong> The bandwidth limitation refers only to public share links accessed in a month. Once you reach 10GB, users can no longer view or download files via your shared links until the next month.</span>',
buttons:[{type:"action",text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_fair_usage_policy_plus_user:function(a){a={header:"Bandwidth Exceeded!"};1==ACCESS_LEVEL||2==ACCESS_LEVEL?(a.body='You\'ve exceeded the 200 GB per member per month bandwidth limit. All share links have been disabled until the next month. For more bandwidth, invite more team members to your account. For every member who joins your team, we will add 200 GB bandwidth to the account.</span> \t\t\t</br></br><span class="msg"><strong>Note:</strong> The bandwidth limitation refers only to the publicly shared links accessed in the current month. You can still access your files.</span>',
a.buttons=[{type:"action",text:"Invite Members",style:{klass:"",id:"invite_members"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]):(a.body="You've exceeded the 200 GB per member month bandwidth limit. All share links have been disabled until the next month. Contact your team's admin to get more bandwidth.</span> \t\t\t</br></br><span class=\"msg\"><strong>Note:</strong> The bandwidth limitation refers only to public share links accessed in a month. Users can no longer view or download files via your shared links until the next month.</span>",
a.buttons=[{type:"cancel",text:"Great, got it!",style:{klass:"btn-blue"}}]);return a},_prepare_fair_usage_policy_business_user:function(a){a={header:"Bandwidth Exceeded!"};1==ACCESS_LEVEL||2==ACCESS_LEVEL?(a.body='You\'ve exceeded the 300 GB per member per month bandwidth limit. All share links have been disabled until the next month. For more bandwidth, invite more team members to your account. For every member who joins your team, we will add 300 GB bandwidth to the account.</span> \t\t\t</br></br><span class="msg"><strong>Note:</strong> The bandwidth limitation refers only to the publicly shared links accessed in the current month. You can still access your files.</span>',
a.buttons=[{type:"action",text:"Invite Members",style:{klass:"",id:"invite_members"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]):(a.body="You've exceeded the 300 GB per member month bandwidth limit. All share links have been disabled until the next month. Contact your team's admin to get more bandwidth.</span> \t\t\t</br></br><span class=\"msg\"><strong>Note:</strong> The bandwidth limitation refers only to public share links accessed in a month. Users can no longer view or download files via your shared links until the next month.</span>",
a.buttons=[{type:"cancel",text:"Great, got it!",style:{klass:"btn-blue"}}]);return a},_prepare_fair_usage_policy_enterprise_user:function(a){a={header:"Bandwidth Exceeded!"};1==ACCESS_LEVEL||2==ACCESS_LEVEL?(a.body='You\'ve exceeded the 400 GB per member per month bandwidth limit. All share links have been disabled until the next month. For more bandwidth, invite more team members to your account. For every member who joins your team, we will add 400 GB bandwidth to the account.</span> \t\t\t</br></br><span class="msg"><strong>Note:</strong> The bandwidth limitation refers only to the publicly shared links accessed in the current month. You can still access your files.</span>',
a.buttons=[{type:"action",text:"Invite Members",style:{klass:"",id:"invite_members"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]):(a.body="You've exceeded the 400 GB per member month bandwidth limit. All share links have been disabled until the next month. Contact your team's admin to get more bandwidth.</span> \t\t\t</br></br><span class=\"msg\"><strong>Note:</strong> The bandwidth limitation refers only to public share links accessed in a month. Users can no longer view or download files via your shared links until the next month.</span>",
a.buttons=[{type:"cancel",text:"Great, got it!",style:{klass:"btn-blue"}}]);return a},_prepare_lightbox_for_storage_full_and_upgrade:function(a){a={header:"You're out of storage space"};Jmp.Helpers.isBusinessOrHigherPlanByPlanID(PLANID)?1==ACCESS_LEVEL||2==ACCESS_LEVEL?(a.body="You\u2019ve reached the storage limit for the Business plan. Upgrade to Jumpshare Enterprise to get unlimited storage space.",a.buttons=[{type:"action",text:"Contact Us",style:{klass:"",id:"contact_us"}},{type:"cancel",text:"Maybe Later!",
style:{klass:"pull-left"}}]):(a.body="You\u2019ve reached the storage limit for the Business plan. Contact your team\u2019s admin to upgrade to Jumpshare Enterprise to get unlimited storage space.",a.buttons=[{type:"cancel",text:"Great, got it!",style:{klass:"btn-blue"}}]):Jmp.Helpers.isPlusPlanUserByPlanID(PLANID)?(a.body="You've reached the storage limit for the Plus plan. Upgrade to Jumpshare Business to get 2TB storage space, no file size limits, and amazing team features.",a.buttons=[{type:"action",
text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_now"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]):(a.body="You've reached the storage limit for the Free plan. Upgrade to Jumpshare Plus to get 1TB storage space, larger file uploads, and awesome new features.",a.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]);return a},_prepare_lightbox_for_no_storage_left_share_disabled:function(a){a=
{header:"Sharing disabled"};a.body="You downgraded to a free account which is limited to "+Jmp.Helpers.formatSize(Jmp.Uploader.options.totalSizeLimit)+" of space. Upgrade to Jumpshare Plus, or delete some files to re-enable sharing.";a.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_lightbox_for_no_storage_left_download_disabled:function(a){a={header:"Downloads disabled"};a.body=
"You downgraded to a free account which is limited to "+Jmp.Helpers.formatSize(Jmp.Uploader.options.totalSizeLimit)+" of space. Upgrade to Jumpshare Plus, or delete some files to re-enable downloading.";a.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_analytics_popup:function(a){var c={};1<PLANID?c={header:a.title,body:"",buttons:""}:(c.header=a.title,c.body='<div class="uf-box clearfix"> \t\t\t\t<div class="detail">\t\t\t\t<h3 class="clearfix"> <span class="icn-analytics pull-left"></span> <span class="title pull-left">Advanced Analytics</span></h3>\t\t\t\t<p>Know how your files are performing with an actionable dashboard of top referrers,<br>\t\t\t\ttop files, total views, and downloads. Get valuable insights into your users to<br>\t\t\t\tgrow your business.</p>\t\t\t\t<a href="'+
WS_PREFIX+'/pricing" class="btn btn-blue btn-ln">Upgrade Now</a>\t\t\t\t</div> \t\t\t\t</div>',c.buttons="");return c},_prepare_lightbox_for_upgrade_inbox_dialog:function(a){var c={};"plus"==a.for_plan?(c.header="Upgrade to Business",c.body="You can only create one Inbox on the Plus plan. If you want to create more Inboxes, please upgrade to the Business plan. Would you like to upgrade?"):(c.header="Inbox",c.body="Create an Inbox for people you want to receive files from. Get instant alerts when files are shared with you. This feature is available to Pro users. Would you like to upgrade?");
c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"btn-blue",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return c},_prepare_bucket_list:function(a){for(var c="",b=0;b<a.length;b++)c+='<li class="folder"><i class="icons-folder-list"></i>'+a[b]+"</li>";return c},_prepare_upload_folder:function(){return{header:"Enable folder upload",body:"Your browser doesn't support folder uploads. We recommend that you use the Jumpshare desktop app instead, which supports folder uploads. Alternatively, you can install Chrome browser.",
buttons:[{type:"action",text:"Download Jumpshare",style:{id:"upload_folder_downloading"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_file_replace_popup:function(a){var c={header:"File already exists"};c.body="<p>The file '<strong>"+a.file.name+"</strong>' already exists. Please select an action you would like to perform.</p>";a.current_file_index<a.total_files_count-1&&(a=a.total_files_count-1-a.current_file_index,c.body+="<label class='custom-controls checkbox'><input type='checkbox' value='1' id='file_replace_confirm_action_checkbox' /><span class='custom-control-indicator icns icn-checkbox pull-left'></span> &nbsp; Perform this action for "+
a+" other "+Jmp.Helpers.get_string_based_on_count(a,"file","files")+"</label>");c.buttons=[{type:"action",text:"Replace",style:{id:"file_replace_replacer"}},{type:"cancel",text:"Duplicate",style:{klass:"btn-default",id:"file_replace_duplicator"}},{type:"cancel",text:"Skip",style:{klass:"pull-left",id:"file_replace_cancel_upload"}}];return c},_prepare_create_folder_popup:function(a){var c={};a=a.place?"create_folder_button_while_uploading":"create_folder_button";c.header="Create new folder";c.body=
"<div class='input-group input-group-lg input-with-icon'><span class='input-group-addon mergeicon'><span class='icn-folder-small'></span></span><input type='text' id='create_folder_textbox' class='form-control mergeInputfield' placeholder='Folder name' value='' /></div>";c.buttons=[{type:"action",text:"Create",style:{id:a,klass:"btn-block"}}];return c},_prepare_item_rename_popup:function(a){var c={},b=a.item_type.charAt(0).toUpperCase()+a.item_type.slice(1)+" name";c.header="Rename "+a.item_type;
c.body="<div class='input-group input-group-lg input-with-icon'><span class='input-group-addon mergeicon'><span class='icn-"+a.item_type+"-small'></span></span>";c.body+='<input type="text" id="rename_from_popup_textbox" class="form-control mergeInputfield" placeholder="'+b+'" value="'+a.name+'" data-type="'+("file"==a.item_type?"file":"bucket")+'" data-controller="'+("file"==a.item_type?"files":"buckets")+'" data-ext="'+a.ext+'" data-id="'+a.code+'" /></div>';c.buttons=[{type:"action",text:"Save",
style:{id:"rename_from_popup",klass:"btn-block"}}];return c},_prepare_trim_save_as_popup:function(a){var c={header:"Save file as",body:"<div class='input-group input-group-lg input-with-icon'><span class='input-group-addon mergeicon'><span class='icn-file-small'></span></span>"};c.body+='<input type="text" id="trim_save_as_textbox" class="form-control mergeInputfield" placeholder="File name" value="'+a.name+'" data-type="file" data-ext="'+a.ext+'" data-id="'+a.code+'" /></div>';c.buttons=[{type:"action",
text:"Save",style:{id:"trim_save_as_btn",klass:"btn-block"}}];return c},_prepare_lightbox_for_sliced_uploading_not_supported:function(a){return{header:"Unsupported Browser",body:"Jumpshare does not support your browser. Please use Google Chrome or a similar modern browser.",buttons:[{type:"cancel",text:"Ok",style:{klass:"btn-blue"}}]}},_prepare_lightbox_for_upload_extension_not_supported:function(a){return{header:"File format mismatch",body:"File extension must be the same as that of the original file.",
buttons:[{type:"cancel",text:"Okay",style:{klass:"btn-blue"}}]}},_prepare_lightbox_for_subtitle_empty_issue:function(a){return{header:"Can't leave a word field empty",body:"If you want to remove a word entirely, please click the delete icon next to it.",buttons:[{type:"cancel",text:"Okay",style:{klass:"btn-blue"}}]}},_prepare_lightbox_for_subtitle_required_one_word:function(a){return{header:"Invalid Word",body:"Only one word is allowed here.",buttons:[{type:"cancel",text:"Okay",style:{klass:"btn-blue"}}]}},
_prepare_lightbox_for_subtitle_too_long:function(a){return{header:"Word too long",body:"Word count should not increase 140 characters limit.",buttons:[{type:"cancel",text:"Okay",style:{klass:"btn-blue"}}]}},_prepare_lightbox_for_direct_link_popup:function(a){return{header:"Direct Linking",body:"Link directly to any file to bypass the file viewer. This feature is part of our Jumpshare Plus plan. Would you like to upgrade?",buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},
{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_lightbox_for_upload_executable_popup:function(a){var c={header:"Upgrade to upload executable file"};"undefined"!=typeof a.is_trial&&1==a.is_trial?(c.body="Uploading of executable files is disabled during the free trial for security reasons. Please upgrade to the "+Jmp.Helpers.capitalize_word(Jmp.Helpers.getPlanType())+" plan.",c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan_from_trial"}},{type:"cancel",
text:"Maybe Later!",style:{klass:"pull-left"}}]):(c.body="The Free plan does not support uploading of executable files for security reasons. Please upgrade your account to upload executable files.",c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]);return c},_prepare_lightbox_for_upgrade_to_upload_files:function(a){return{header:"Upload Files",body:"You've reached 50 active files limit on your Basic plan. Please upgrade to the Plus plan to unlock unlimited uploads.",
buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Cancel",style:{klass:"pull-left"}}]}},_prepare_lightbox_for_upload_free_trial_user_popup:function(a){return{header:"Upload Files",body:"Uploading files is disabled during the free trial. To upload files, upgrade to the Plus plan now. You will be charged $198 per year for 2 members in your Workspace.",buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",
style:{klass:"pull-left"}}]}},_prepare_lightbox_for_upload_size_limit_exceeded_popup:function(a){var c={header:"Upgrade to upload bigger files"};c.body=a.message;c.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"buy_business_now"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return c},_prepare_links_disabled_for_security_reasons_popup:function(a){return{header:"Links disabled for security reasons",body:"For your safety, all links in documents have been disabled. This protects you from potential malicious content, phishing attacks, and accidental navigation to harmful websites, ensuring a safer experience.",
buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_lightbox_for_enable_links_popup:function(a){return{header:"Upgrade to enable links",body:"The Free plan does not support linking to external websites for security reasons. Please upgrade your account to enable links in documents.",buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_lightbox_for_enable_links_in_trial_popup:function(a){a=
{header:"Upgrade to enable links"};a.body="Linking to external documents is disabled during the free trial. To enable links in documents, upgrade to the "+Jmp.Helpers.capitalize_word(Jmp.Helpers.getPlanType())+" plan.";a.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan_from_trial"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_lightbox_for_enable_links_text_selection_popup:function(a){return{header:"Upgrade to enable links",body:"The Free plan does not support linking to external websites for security reasons. Please upgrade your account to enable links in documents.",
buttons:[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_lightbox_for_enable_text_selection_in_trial_popup:function(a){a={header:"Upgrade to enable links"};a.body="Linking to external documents is disabled during the free trial. To enable links in documents, upgrade to the "+Jmp.Helpers.capitalize_word(Jmp.Helpers.getPlanType())+" plan.";a.buttons=[{type:"action",text:"Upgrade Now",style:{klass:"",id:"upgrade_plan_from_trial"}},
{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_lightbox_for_links_text_disabled_security_popup:function(a){return{header:"Links disabled for security reasons",body:"The links in this document have been disabled for security reasons. Please verify if the sender is a legitimate source. To enable links, ask the sender to upgrade account. <div class='report_file_pop'>Is this file suspicious? <a id='report_file' class='cancel'>Report</a></div>",buttons:[{type:"cancel",
text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_desktop_push_notifications_web_popup:function(a){return{header:"Enable Notifications",body:"Turn on desktop notifications to know when your recipient(s) have viewed or downloaded the file. We will also notify you when someone shares a file with you.",buttons:[{type:"action",text:"Maybe Later!",style:{klass:"desktop_push_notifications_web_setting disable_desktop_push_notifications_web pull-left btn-default"}},{type:"action",text:"Enable Desktop Notifications",
style:{klass:"desktop_push_notifications_web_setting enable_desktop_push_notifications_web"}}]}},_prepare_previous_versions_free_popup:function(){return{header:"Version History",body:"View previous versions of your file and restore them without breaking the share link. This feature is only part of our Jumpshare Plus plan. Would you like to upgrade?",buttons:[{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}},{type:"action",text:"Upgrade Now",style:{id:"upgrade_plan"}}]}},_prepare_restore_previous_version_popup:function(a){var c=
{header:"Restore Previous Version"};c.body="<strong>'"+a.file_name+"'</strong> will be restored to the version from <strong>"+a.file_version_restore_date+"</strong> at <strong>"+a.file_version_restore_time+"</strong>. All other versions will still be saved and can be accessed anytime.";c.buttons=[{type:"action",text:"Restore"},{type:"cancel"}];return c},_prepare_restore_trash_item_free_popup:function(a){var c={};c.header="Restore '"+a.item_name+"'";c.body="All items deleted from your account are stored in Trash for 7 days, and can be restored. This is a Jumpshare Plus feature. Would you like to upgrade?";
c.buttons=[{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}},{type:"action",text:"Upgrade Now",style:{id:"upgrade_plan"}}];return c},_prepare_empty_trash_popup:function(a){return{header:"Empty Trash",body:"Are you sure you want to empty the trash? This action will permanently wipe all items in your Trash and make them unrecoverable.",buttons:[{type:"action",text:"Empty Trash",style:{klass:"btn-red"}},{type:"cancel"}]}},_prepare_permanent_delete_trash_item_popup:function(a){var c={header:"Permanently delete?"};
c.body=" Are you sure you want to permanently delete the "+a.item_type+" '"+a.item_name+"'? This action will wipe the "+a.item_type+" from our server and make it unrecoverable.";c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_permanent_delete_trash_items_popup:function(a){var c={header:"Permanently delete?"};c.body=" Are you sure you want to permanently delete "+a.button_text+"? This action will wipe "+a.button_text+" from our server and make it unrecoverable.";
c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_restore_trash_items_popup:function(a){var c={header:"Restore confirmation?"};c.body=" Are you sure you want to restore "+a.button_text+"?";c.buttons=[{type:"action",text:"Restore",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_trim_away_confirmation_popup:function(a){return{header:"Cancel changes?",body:"Are you sure you want to discard your changes?",buttons:[{type:"action",text:"Yes",
style:{klass:"btn-red"}},{type:"cancel",text:"No"}]}},_prepare_delete_comment_popup:function(a){var c={};c.header="Delete "+("comment"==a.comment_type?"Comment":"Reply");c.body="Are you sure you want to delete this "+a.comment_type+"?";c.buttons=[{type:"action",text:"Delete",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_comments_limit_exceeded_popup:function(a){var c={};a.is_owner?(c.header="Unlimited Comments",c.body="Free users are limited to five comments per file. To unlock unlimited comments, upgrade to Jumpshare Plus.",
c.buttons=[{type:"action",text:"Upgrade",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe later!",style:{klass:"pull-left"}}]):(c.header="Comment Limit Reached",c.body="This file has been shared by a Jumpshare user on the free plan. It cannot have more than 5 comments. Contact the owner of the file to enable unlimited comments.",c.buttons=[{type:"cancel",text:"Okay, got it!",style:{klass:"btn-blue"}}]);return c},_prepare_new_note_form:function(a){return{header:'Compose <span id="note_type_heading">Note</span>',
body:'<div id="note_form" class="input-group type-tweet"><textarea rows="5" cols="56" class="form-control input-slim" placeholder="Start by typing your note..." id="note" style="height: 300px;"></textarea> </div>',buttons:[{type:"action",text:"Upload",style:{id:"new_note_upload",klass:"btn-blue"}}]}},_prepare_edit_note_form:function(a){var c={};c.header="Edit "+a.note_type_heading;c.body='<div id="note_form" class="input-group type-tweet"><textarea rows="5" cols="56" class="form-control input-slim" placeholder="Start by typing your note..." id="note" style="height: 300px;"></textarea> </div>';
c.buttons=[{type:"action",text:"Save Changes",style:{id:"edit_note_upload",klass:"btn-blue"}}];return c},_prepare_no_hd_preview_free:function(a){return{header:"HD Video Playback",body:"Impress your team and clients by sharing High Definition videos. Upgrade to Jumpshare Plus to enable Full HD video playback.",buttons:[{type:"action",text:"Upgrade",style:{klass:"",id:"upgrade_plan"}},{type:"cancel",text:"Maybe later!",style:{klass:"pull-left"}}]}},_prepare_no_hd_preview_plus:function(a){return{header:"HD Video Playback",
body:"HD playback is only available for MP4 videos recorded in High-Definition resolution (720p, 1080p or 4K).",buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_no_hd_preview_guest:function(a){return{header:"HD Video Playback",body:"HD playback is not available for this video. Please contact the owner of this video to enable HD video playback.",buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_upgrade_plan_popup:function(a){return{header:"Upgrade Plan",
body:"Please ask your Workspace owner or admin to upgrade to Business to enable this integration.",buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_zapier_integration_popup:function(a){var c={};c.header=a.state+" Zapier";c.body="Please ask your Workspace owner or admin to "+a.state+" Zapier integration. To find out who is the owner or admin, visit the Members page.";c.buttons=[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}];return c},_prepare_slack_integration_popup:function(a){var c=
{};c.header=a.state+" Slack";c.body="Please ask your Workspace owner or admin to "+a.state+" Slack integration. To find out who is the owner or admin, visit the Members page.";c.buttons=[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}];return c},_prepare_upgrade_survey_popup:function(a){var c={header:"Upgrade Survey"};c.body=`<div style='margin-bottom: ${a.seats<=a.members?"8px":"20px"}'>Thank you for upgrading to the Plus plan! We truly appreciate your support. We'd love to hear more about what motivated your decision to upgrade. Please take a moment to share your thoughts with us.</div>`;
c.body+='<p>What was it that convinced you to upgrade to the paid plan?</p>\t\t<textarea class="form-control input-slim" name="upgrade_survey_reason" id="upgrade_survey_reason" placeholder="Your answer"></textarea>';c.body+='<p style="margin-top: 20px;">What did you use before switching to Jumpshare?</p>\t\t<textarea class="form-control input-slim" name="upgrade_survey_previous_service" id="upgrade_survey_previous_service" placeholder="Your answer (optional)"></textarea>';c.buttons=[{type:"action",
text:"Submit"},{type:"cancel",text:"Skip"}];return c},_prepare_password_change_reminder_popup:function(a){return{header:"Change Password",body:"For your security, we have updated our password policy. We recommend that you update your password to secure your account.",buttons:[{type:"action",text:"Update Now"},{type:"cancel",text:"Remind Me Later",style:{klass:"pull-left"}}]}},_prepare_password_change_forceful_popup:function(a){return{header:"Change Password",body:"For your security, you must update your password to continue using your account.",
buttons:[{type:"action",text:"Update Now"}]}},_prepare_invite_members_popup:function(a){var c={},b=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;c.header="Invite Team Members to "+WORKSPACE_NAME;c.body=`<div style='margin-bottom: ${a.seats<=a.members?"8px":"20px"}'>When you invite team members to your Workspace, they get a personal library where their uploads go by default, a shared team library, and the company branding.</div>`;1<PLANID&&a.seats<=a.members&&(c.body+="<span style='display: block; color: #888; padding-bottom: 12px;'>Note: This is a billable event.</span>");
c.body+='<h5 style="margin-top: 0; color: #101010; font-weight: 600;">Invite link</h5><input id="team_invite_link" type="text" placeholder="Invite URL" value="'+BASEURL+"teams/invite/"+a.code+'" class="form-control input-slim pull-left acjs-input ac_input" style="cursor:auto; width: calc(100% - 110px); height: 34px;" readonly="" onclick="this.focus();this.select();" /> <button id="copy_inviteLink" data-link="'+BASEURL+"teams/invite/"+a.code+'" class="btn btn-nonmain pull-right copy btn-blue">Copy Link</button>';
b&&(c.body+='<a href="" id="generate-invite-link" style="color: #168EEA; padding-top: 8px; display: inline-block; clear: both;">Generate new link</a>');c.body+='<hr style="border: none; border-bottom: solid 1px #ebebeb; padding-top: 15px; clear: both;"><h5 style="color: #101010; font-weight: 600;">Invite via email</h5><ul class="modal-email-wrapper clearfix acjs-holder"><li class="open">\t\t\t\t\t   <input type="email" name="invite_members_emails" id="invite_members_emails" placeholder="Enter email addresses" class="form-control input-slim pull-left acjs-input ac_input" style="width: 270px;" /></li></ul>';
c.body+='<textarea class="form-control input-slim" name="invite_members_message" id="invite_members_message" placeholder="Type your message (optional)"></textarea>';c.buttons=[{type:"action",text:"Invite"},{type:"cancel"}];return c},_prepare_remove_invitation_popup:function(a){var c={header:"Cancel Invite?"};c.body="Are you sure you want to cancel invitation of <strong>"+a.email+"</strong>?";c.buttons=[{type:"action",text:"Yes"},{type:"cancel",text:"No"}];return c},_prepare_make_owner_popup:function(a){var c=
{};c.header="Make &quot;"+a.member_name+"&quot; the Owner?";c.body="Only one member of the Workspace can be the Owner. The Owner is the highest role and can manage the Workspace with full permissions. Once "+a.member_name+" becomes the Owner, your role will change to Admin. Do you want to proceed?";c.buttons=[{type:"action",text:"Make Owner"},{type:"cancel"}];return c},_prepare_make_admin_popup:function(a){var c={header:"Make Admin"};c.body="Are you sure you want to make <strong>"+a.member_name+"</strong> admin of the team?";
c.buttons=[{type:"action",text:"Yes"},{type:"cancel"}];return c},_prepare_remove_admin_status_popup:function(a){var c={header:"Remove admin status?"};c.body="Are you sure you want to remove admin privileges from <strong>"+a.admin_name+"</strong>?";c.buttons=[{type:"action",text:"Yes"},{type:"cancel"}];return c},_prepare_reset_password_popup:function(a){var c={header:"Reset password?"};c.body="Are you sure you want to reset the password of <strong>"+a.user_name+"</strong>?";c.buttons=[{type:"action",
text:"Yes"},{type:"cancel"}];return c},_prepare_generic_confirmation_dialog:function(a){var c={};c.header=a.header;c.body=a.body;c.buttons=a.buttons||[{type:"action",text:"Yes"},{type:"cancel"}];return c},_prepare_remove_user_confirmation_popup:function(a){var c={header:"Remove User?"};c.body="Are you sure you want to remove <strong>"+a.user_name+"</strong> from the team?";c.buttons=[{type:"action",text:"Yes",style:{klass:"btn-red"}},{type:"cancel",text:"No"}];return c},_prepare_remove_user_popup:function(a){var c=
{};c.header='Remove "'+a.user_name.trim()+'"?';c.body='You can remove this member from your Workspace using one of the two options: <div class="options-wrapper pull-left" style="color: #101010;"><label class="custom-controls radio" style="padding-bottom: 3px;"><input type="radio" id="member_files_transfer" name="member_files" value="transfer_to_admin" checked="checked"><span class="custom-control-indicator radio"></span><span style="font-weight: 600;">Transfer uploads</span></label><div style="margin-left:35px;">Remove member and transfer all uploads from this member\u2019s Personal Library to your Personal Library.</div><label class="custom-controls radio" style="margin-top: 10px; padding-bottom: 3px;"><input type="radio" id="member_files_delete" name="member_files" value="delete_files"><span class="custom-control-indicator radio"></span><span style="font-weight: 600;">Delete uploads</span></label><div style="margin-left:35px;">Remove member and delete all uploads from this member\u2019s Personal Library.</div><div style="margin:25px auto;"><strong>Note: </strong>In both cases, the uploads of this member in the Shared and Team Libraries will remain unaffected. You will become the new owner of those uploads.</div></div>';
c.buttons=[{type:"action",text:"Remove Member",style:{klass:"btn-red"}},{type:"cancel"}];return c},_prepare_add_seats_form:function(a){var c={};c.header="Update Seats to "+WORKSPACE_NAME;c.body='<p><span class="msg">You can increase the number of seats in your Workspace without having to invite a team member.</span></p>';c.body+='<div style="display: flex; justify-content: space-between; gap: 45px; margin-top: 20px; margin-bottom: 10px;">';c.body+='<div style="display: flex; gap: 8px; align-items: center;">';
c.body+='<input id="new_seats" class="form-control" type="text" value="'+a.seats+'" style="width: 55px; height: 35px; text-align: center;" />';c.body+="<span>Seats</span>";c.body+="</div>";c.body+='<p class="info" style="color: #717d82; margin: 0;">The seats cannot be less than your plan or the number of members in your Workspace.</p>';c.body+="</div>";c.buttons=[{type:"action",text:"Update",style:{klass:"btn-blue"}},{type:"cancel",text:"Cancel"}];return c},_prepare_show_take_screenshot_modal:function(a){a=
{header:"",body:"<section class='welcome-user' style='padding-bottom: 10px !important;'>"};a.body+="<div class='container clearfix' style='width: 100% !important; padding: 0;'>";a.body+="<div class='app-shot'>";a.body+=$("html").hasClass("windows")?"<img src='/res/images/screenshots/homepage/annotation_in_action_win.png' srcset='/res/images/screenshots/homepage/annotation_in_action_win@2x.png 2x' alt='Organize with folders'>":"<img src='/res/images/screenshots/homepage/annotation_in_action_mac.png' srcset='/res/images/screenshots/homepage/annotation_in_action_mac@2x.png 2x' alt='Organize with folders'>";
a.body+="</div>";a.body+="<div class='prom_diag_body'>";a.body+="<h2>Capture and annotate screenshots</h2>";a.body+="<p style='margin-top: 0 !important;'>Capture screenshots with pinpoint accuracy and annotate them. Draw using arrow, shapes, text, blur, and more!</p>";a.body+="<a target='_blank' id='downlaod_app_promo_dialog' href='/downloading' class='btn btn-blue'>Download Jumpshare</a>";a.body+="</div>";a.body+="</div>";a.body+="</section>";a.buttons=[];return a},_default_template:function(a){var c=
[];c.push("<div class='modal-dialog modal-bs'>");c.push("<div class='modal-content modal-share'>");c.push('<button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true"><span class="icn-close"></span></button>');c.push(a);c.push("</div>");c.push("</div>");return c.join("\n")},_prepare_upgrade_to_business_subtitles_free:function(a){a={};var c=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;a.header="Enable Closed Captions";a.body="Improve viewer comprehension and accessibility with closed captions. Upgrade to the Plus plan with the Video Pack add-on to unlock this feature.";
a.buttons=c?[{type:"action",text:"Upgrade to Plus",style:{id:"go_to_plus_pricing"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_upgrade_to_business_subtitles_plus:function(a){a={};var c=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;a.header="Enable Closed Captions";a.body="Improve viewer comprehension and accessibility with closed captions. Upgrade to the Business plan to get this feature, or opt for the Plus plan add-on at just $5/member/month if your Workspace has fewer than 3 members.";
a.buttons=c?[{type:"action",text:"Buy Add-on",style:{id:"go_to_buy_addon"}},{type:"action",text:"Upgrade to Business",style:{id:"go_to_business_pricing",klass:"btn-plan-purple"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_upgrade_to_business_AI_free:function(a){a={};var c=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;a.header="Enable Automatic Chapters and Summary";
a.body="Improve video engagement and accessibility with AI-powered Summary and Chapters. Upgrade to the Plus plan with the Video Pack add-on to unlock this feature.";a.buttons=c?[{type:"action",text:"Upgrade to Plus",style:{id:"go_to_plus_pricing"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_remove_summary:function(a){return{header:"Remove video summary",
body:"Do you want to remove the summary?",buttons:[{type:"action",text:"Yes",style:{klass:"btn-blue",id:"remove_summary_btn"}},{type:"cancel",text:"Cancel"}]}},_prepare_remove_chapters:function(a){return{header:"Remove video chapters",body:"Do you want to remove the chapters?",buttons:[{type:"action",text:"Yes",style:{klass:"btn-blue",id:"remove_chapters_btn"}},{type:"cancel",text:"Cancel"}]}},_prepare_upgrade_to_business_AI_plus:function(a){a={};var c=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;a.header=
"Enable Automatic Chapters and Summary";a.body='Improve video engagement with AI-powered chapters and summary. Upgrade to the Business plan to get this feature, or get the "Advanced Video Pack" add-on for your Plus subscription at just $5/member/month if your Workspace has fewer than 3 members.';a.buttons=c?[{type:"action",text:"Buy Add-on",style:{id:"go_to_buy_addon"}},{type:"action",text:"Upgrade to Business",style:{id:"go_to_business_pricing",klass:"btn-plan-purple"}},{type:"cancel",text:"Maybe Later!",
style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_upgrade_to_advanced_options_free:function(){return{header:"Unlock Advanced Video Pack",body:'Get automatic captioning, video embed privacy and the ability to customize the color of your video player by upgrading to the Business plan, or opt for the Plus plan with "Advanced Video Pack" add-on if you have less than 3 members in your Workspace.',
buttons:[{type:"action",text:"Upgrade to Plus",style:{id:"go_to_plus_pricing"}},{type:"action",text:"Upgrade to Business",style:{id:"go_to_business_pricing",klass:"btn-plan-purple"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]}},_prepare_upgrade_to_advanced_options_plus:function(){var a={header:"Unlock Advanced Video Pack"},c="$5/member/month";"yearly"==Jmp.Helpers.getPlanRecurringPeriod(PLANID)&&(c="$50/member/year");a.body="Get automatic captioning, video embed privacy and the ability to customize the color of your video player by upgrading to the Business plan, or opt for the Plus plan add-on at just "+
c+" if you have less than 3 members in your Workspace.";a.buttons=[{type:"action",text:"Buy Add-on",style:{id:"go_to_buy_addon"}},{type:"action",text:"Upgrade to Business",style:{id:"go_to_business_pricing",klass:"btn-plan-purple"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_remove_advanced_video_pack:function(){return{header:"Remove Advanced Video Pack",body:"Removing this add-on will disable automatic captioning and the ability to customize the color of your video player. If you have customized the video player, all settings will be reset. Are you sure you want to continue?",
buttons:[{type:"action",text:"Remove Add-On",style:{id:"remove_advanced_addon",klass:"btn-red"}},{type:"cancel",text:"Keep Add-On"}]}},_prepare_upgrade_to_plus_trim:function(){var a={},c=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;a.header="Edit Videos";a.body="Craft your perfect video by joining multiple clips or trimming out unwanted moments. Unlock this powerful feature by upgrading to our Plus plan.";a.buttons=c?[{type:"action",text:"Upgrade to Plus",style:{id:"go_to_plus_pricing"}},{type:"cancel",
text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return a},_prepare_upgrade_to_business_transcription_free:function(a){var c={},b=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;c.header="Enable Transcriptions";c.body="Enhance viewer accessibility with "+a.media_type+" transcriptions, enabling your audience to effortlessly understand your content. Upgrade to the Plus plan with the Video Pack add-on to unlock this feature.";
c.buttons=b?[{type:"action",text:"Upgrade to Plus",style:{id:"go_to_plus_pricing"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return c},_prepare_upgrade_to_business_transcription_plus:function(a){var c={},b=1==ACCESS_LEVEL||2==ACCESS_LEVEL?!0:!1;c.header="Enable Transcriptions";c.body="Enhance viewer accessibility with "+a.media_type+" transcriptions, enabling your audience to effortlessly understand your content. Upgrade to the Business plan for this feature, or opt for the Plus plan add-on at just $5/member/month if your Workspace has fewer than 3 members.";
c.buttons=b?[{type:"action",text:"Buy Add-on",style:{id:"go_to_buy_addon"}},{type:"action",text:"Upgrade to Business",style:{id:"go_to_business_pricing",klass:"btn-plan-purple"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}]:[{type:"action",text:"Request Admin",style:{id:"request_upgrade_plan"}},{type:"cancel",text:"Maybe Later!",style:{klass:"pull-left"}}];return c},_prepare_ask_owner_for_transcription:function(a){var c={header:"Captions are not available"};c.body="The host has not enabled closed captions for this "+
a.media_type+". To view automatic captions, please contact the host.";c.buttons=[{type:"cancel",text:"Okay, got it!",style:{klass:"ok"}}];return c},_prepare_subtitle_extras_unavailable_owner:function(a){return{header:"Summary is not available",body:"The video may contain fewer than 120 spoken words or you may have disabled transcription and/or summary generation. If you just uploaded or edited this video, you may have to wait a while and refresh before you\u2019re able to see the summary.",buttons:[{type:"cancel",
text:"Okay, got it!",style:{klass:"ok"}}]}},_prepare_subtitle_extras_unavailable_guest:function(a){return{header:"Summary is not available",body:"The host has not enabled summary for this video. To view automatic summary, please contact the host.",buttons:[{type:"cancel",text:"Okay, got it!",style:{klass:"ok"}}]}},_prepare_different_format_upload_on_programatic_pages:function(a){var c={},b="viewer",h="Viewer";"uploader"==a.data.src?(b="uploader",h="Uploader"):"embedder"==a.data.src?(b="embedder",
h="Embedder"):"locker"==a.data.src&&(b="locker",h="Locker");c.header="Whoops! Not the Right Type of File";c.body="This "+b+" only supports "+a.data.src_type+" files. The "+a.data.target_type.toUpperCase()+" file format you tried to upload is supported by a different "+b+".";c.buttons=[{type:"action",text:"Visit "+a.data.target_type.toUpperCase()+" "+h,style:{id:"programmatic_visitpage","data-link":a.data.target_link,klass:"ok"}},{type:"cancel",text:"Cancel",style:{klass:"pull-left"}}];return c},_prepare_programatic_multi_file_upload:function(){return{header:"Multiple Files Upload",
body:"This viewer supports uploading only one file at a time. To upload multiple files, create a free Jumpshare account.",buttons:[{type:"action",text:"Create an account",style:{id:"programmatic_signup",klass:"ok"}},{type:"cancel",text:"Cancel",style:{klass:"pull-left"}}]}},_prepare_programatic_uploaded_larger_file:function(a){var c={};c.header="Uploaded file is larger than "+a.data.limit;c.body="Free users have a "+a.data.limit+" file size limit per upload. To upload bigger files and unlock more features, get Jumpshare Plus.";
c.buttons=[{type:"action",text:"Get Jumpshare Plus",style:{id:"programmatic_upgrade",klass:"ok"}},{type:"cancel",text:"Cancel",style:{klass:"pull-left"}}];return c},_prepare_programatic_uploaded_daily_limit_reached:function(a){return{header:"Daily Upload Limit Reached",body:"You\u2019ve reached your daily limit of 3 uploads. Sign up for a free Jumpshare account to upload more files.",buttons:[{type:"action",text:"Sign Up For Free",style:{id:"programmatic_signup",klass:"ok"}},{type:"cancel",text:"Maybe Later",
style:{klass:"pull-left"}}]}},_prepare_not_allowed_add_clip:function(a){return{header:"Not Allowed",body:"Adding Clip is allowed for MP4 files only.",buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_not_allowed_trim_file_size:function(a){return{header:"Trim & Merge Length Exceeded",body:"Final clip can not have more than 90 minutes length.",buttons:[{type:"cancel",text:"Okay, got it",style:{klass:"btn-blue"}}]}},_prepare_show_trial_modal:function(a){var c={};c.header=
"Request 14-Day Free "+(1===a.modal_type?"Business":"Enterprise")+" Trial";c.body="<div class='request_trial_wrapper'>";c.body+="<div class='form-group ' style='display: flex; gap: 20px'>";c.body+="<div>";c.body+="<label for='firstNameTrial'>First name</label>";c.body+="<input "+(""===a.user.logged_in||"0"===a.user.logged_in?"":'readonly="true"')+' type="text" name="firstNameTrial" placeholder="First name" value="'+(a.user.logged_in?a.user.first_name:"")+'" id="firstNameTrial" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';
c.body+="</div>";c.body+="<div>";c.body+="<label for='lastName'>Last name</label>";c.body+="<input "+(""===a.user.logged_in||"0"===a.user.logged_in?"":'readonly="true"')+' type="text" name="lastNameTrial" value="'+(a.user.logged_in?a.user.last_name:"")+'" placeholder="Last name" id="lastNameTrial" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';c.body+="</div>";c.body+="</div>";c.body+="<div class='form-group' style='display: flex; gap: 20px'>";c.body+="<div>";
c.body+="<label for='workemail'>Email address</label>";c.body+="<input "+(""===a.user.logged_in||"0"===a.user.logged_in?"":'readonly="true"')+' type="email" name="workemail" value="'+(a.user.logged_in?a.user.email:"")+'" placeholder="Email address" id="workemail" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';c.body+="</div>";c.body+="<div>";c.body+="<label for='job_title_trial'>Job title</label>";c.body+='<input type="text" name="job_title_trial" value="" placeholder="Job title" id="job_title_trial" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';
c.body+="</div>";c.body+="</div>";c.body+="<div class='form-group' style='display: flex; gap: 20px'>";c.body+="<div>";c.body+="<label for='companyname'>Company name </label>";c.body+='<input type="text" name="companyname" value="" placeholder="Company name" id="companyname" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';c.body+="</div>";c.body+="<div>";c.body+="<label for='companydomain'>Company website </label>";c.body+='<input type="text" name="companydomain" value="" placeholder="Company website" id="companydomain" maxlength="150" size="30" class="form-split form-control input-lg" autocomplete="off">';
c.body+="</div>";c.body+="</div>";c.body+="<div class='form-group clearfix'>";c.body+='<div class="btn-group btn-compact pull-left">';c.body+="<label for='companyname'>Company size</label>";c.body+='<button id="company_employees" type="button" class="btn btn-default dropdown-toggle btn_full" data-value="Please select" data-toggle="dropdown"> <span id="employees_text">Please select</span> <span class="caret"></span></button>';c.body+='<ul class="dropdown-menu trial_get_employees" role="menu">';c.body+=
'<li><a href="#">1-10</a></li>';c.body+='<li><a href="#">11-50</a></li>';c.body+='<li><a href="#">51-100</a></li>';c.body+='<li><a href="#">101-1000</a></li>';c.body+='<li><a href="#">1000+</a></li>';c.body+="</ul>";c.body+="</div>";c.body+="</div>";c.body+="</div>";c.buttons=[{type:"action",text:"Submit",style:{klass:"btn-blue"}}];return c},error_template_for_inside_lightbox:function(){return"<p class='error' style='display:block;'></p>"},get_main_overlay:function(){return $("#lightbox")},hide:function(){var a=
Math.abs(parseInt($("body").css("top")));$("#lightbox").addClass("hide");$("#modal").html("");$("body").removeClass("modal-open adjust_scroll_styles").css("top","");"undefined"!=typeof Jmp.Handler&&Jmp.Handler.Viewer.RemoveAdvCopyLink();a&&"auto"!=a&&$(document).scrollTop(a);Jmp.App.Notifications.close_notification(-1);return!1},hide_box:function(){var a=Math.abs(parseInt($("body").css("top")));$("#lightbox").addClass("hide");$("#modal").html("");$("body").removeClass("modal-open adjust_scroll_styles").css("top",
"");$(document).scrollTop(a);return!1},_assign_scroll_bars:function(){try{$("#folder-area").mCustomScrollbar({scrollButtons:{enable:!1}})}catch(a){}},ok_button:function(){return'<div class="action ok right">OK</div>'},trigger_another_lightbox:function(){$(".lightbox").show()},_make_html:function(a){var c=[],b=[];c.push(this._make_lightbox_header(a.header));var h=this._make_lightbox_message(a.body);if(0<a.buttons.length){var k=a.buttons.length;for(var l=0;l<k;l++){var m=a.buttons[l],n=this["_make_"+
m.type+"_button"];n&&b.push(n.call(this,m))}h+=this._make_lightbox_buttons(b)}c.push(this._make_lightbox_body(h));return this._default_template(c.join("\n"))},_share_html:function(a,c){var b=[],h=[];"email"!=c&&"upgrade"!=c||b.push(this._make_lightbox_header(a.header));var k=this._make_lightbox_message(a.body);var l=a.buttons.length;if(0<l){for(var m=0;m<l;m++){var n=a.buttons[m],p=this["_make_"+n.type+"_button"];p&&h.push(p.call(this,n))}k+=this._make_lightbox_buttons(h)}b.push(this._make_lightbox_body_share(k,
c));return b.join("\n")},_make_lightbox_message:function(a){return-1==a.indexOf("form")?"<p>"+a+"</p>":a},_make_lightbox_body:function(a){return"<div class='modal-body clearfix'>"+a+"</div>"},_make_lightbox_body_share:function(a,c){return"<div class='modal-body modal-"+c+" clearfix'>"+a+"</div>"},_make_lightbox_header:function(a){return"<div class='modal-header clearfix'><h4 class='modal-title pull-left'>"+a+"</h4></div>"},_make_action_button:function(a){"undefined"==typeof a.style&&(a.style={});
this._make_button_classes(a);return this._make_button(a)},_make_cancel_button:function(a){"undefined"==typeof a.text&&(a.text="Cancel");"undefined"==typeof a.style&&(a.style={klass:""});a.style.klass+=" cancel";this._make_button_classes(a);return this._make_button(a)},_make_button:function(a){var c=a.style.id?"id='"+a.style.id+"'":"",b="class='"+a.style.klass+"'",h="",k;for(k in a.style)k.startsWith("data-")&&(h+=k+'="'+a.style[k]+'" ');return"<button "+b+c+h+">"+a.text+"</button>"},_make_lightbox_buttons:function(a){var c=
["<div class='modal-footer clearfix'>"],b;for(b in a)c.push(a[b]);c.push("</div>");return c.join("\n")},_button_default_classes:function(a){return"btn btn-submit pull-right"+(a?" btn-default":" btn-blue")},_make_button_classes:function(a){var c=this._button_default_classes("cancel"==a.type?!0:!1);this._combine_button_classes(a.style,c)},_combine_button_classes:function(a,c){a.klass=a.klass?c+" "+a.klass:c},onLnkPrvacyChange:function(a){$src=$(a.currentTarget);$(".lnk-privacy-menu .selected").removeClass("selected");
$src.parents("li").addClass("selected");a=$(".lnk-privacy-menu .selected a").html();$(".lnk-privacy-txt").html(a);a=$(".lnk-privacy-menu li.selected").attr("data-val");if(!Jmp.App.Lightbox._restrict_privacy_option(a)){var c=Jmp.App.Lightbox._get_lnk_privacy_foot_note(a),b=["everyone","everyone_workspace","only_you"];1>$src.parents("#cps-settings-wrapper").length&&(-1!=b.indexOf(a)?($(".modal-CPS .btn-save").addClass("hide"),Jmp.App.Lightbox.saveResourcePrivacy()):$(".modal-CPS .btn-save").removeClass("hide"));
$(".cta_wind_dropdown .info_note").html(c)}},_restrict_privacy_option:function(a){switch(a){case "only_you":case "emails":case "password":if(2>PLANID)return window.location=WS_PREFIX+"/pricing",!0;break;case "everyone_workspace":if(2>PLANID||Jmp.Helpers.isPlusPlanUserByPlanID(PLANID))return window.location=WS_PREFIX+"/pricing",!0}return!1},_get_lnk_privacy_foot_note:function(a){switch(a){case "everyone":return $("#privacy-options-parent>div").addClass("hide"),$(".lnk-privacy-group").removeClass("hide"),
"No login required to access. Hidden from the search engines.";case "emails":return $("#privacy-options-parent>div").addClass("hide"),$(".restricted_acces_cps_share").removeClass("hide"),"Only you and people added can access. Login required.";case "password":return $("#privacy-options-parent>div").addClass("hide"),$(".password_acces_cps_share").removeClass("hide"),"Password required to access. Hidden from search engines.";case "everyone_workspace":return $("#privacy-options-parent>div").addClass("hide"),
$(".lnk-privacy-group").removeClass("hide"),"Workspace members can view. Login required";case "only_you":return $("#privacy-options-parent>div").addClass("hide"),"This file is private and visible to you only"}},onAddLnkPrivacyEmail:function(){for(var a=$(".email-cps-holder").find("li.acjs-data"),c=0;c<a.length;c++){var b=$(a[c]).find("a").attr("data-email");Jmp.App.Lightbox._validateEmail(b)&&($(".email-cps-holder input").val(""),$(".modal-cps .btn-save").removeClass("disabled"),$(".email_invitee_list_cps ul").append("<li><span class='invitee_email'>"+
b+"</span><span class='icn-close'></span></li>"))}$(".email-cps-holder .icn-clear").trigger("click")},saveResourcePrivacy:function(){var a=$("#item_id").val(),c=$("#item_type").val(),b=$(".lnk-privacy-menu li.selected").attr("data-val"),h=[];c={item_code:a,item_type:c,setting_option:b};"emails"==b?($(".email_invitee_list_cps li span.invitee_email").each(function(k,l){h.push($(l).html())}),c.users=h):"password"==b&&(c.password=$(".password_form_field input").val());c=Jmp.Helpers.get_secure_params(c);
$.post(BASEURL_WS+"buckets/save_privacy_settings",c,function(k){1==k.success&&"password"!=b?($(Jmp.Helpers.get_container()+" #"+a).find(".thumb-footer").find(".icn-locked").remove(),$(Jmp.Helpers.get_container()+" #"+a).find("a.unlock").addClass("lock").removeClass("unlock").text("Lock"),$("#viewer_actions").find("a.unlock").addClass("lock").removeClass("unlock").text("Lock"),Jmp.App.Notifications.display_notification({type:"success",message:"Privacy Settings have been saved"}).close_notification()):
"password"==b&&(0==k.lock_data.status?Jmp.App.Notifications.display_notification({type:"error",message:k.lock_data.message}).close_notification():1==k.lock_data.status&&(Jmp.App.Notifications.display_notification({type:"success",message:"Privacy Settings have been saved"}).close_notification(),0==$(Jmp.Helpers.get_container()+" #"+a).find(".thumb-footer .icn-locked").length&&($(Jmp.Helpers.get_container()+" #"+a).find(".thumb-footer").append('<div class="icon icn-locked"></div>'),$(Jmp.Helpers.get_container()+
" #"+a).find("a.lock").addClass("unlock").removeClass("lock").text("Unlock"),$("#viewer_actions").find("a.lock").addClass("unlock").removeClass("lock").text("Unlock"))));Socket.push("items_updated",[{parent:k.parent,code:k.item_code,type:k.item_type,state:"updated",action:"updated"}]);"password"==b&&1==k.lock_data.status&&Jmp.App.Lightbox.hide()})},_validateEmail:function(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())}};
$(function(){var a=$("#lightbox");a.find("button.cancel").live("click",Jmp.App.Lightbox.hide);a.find(".ok, .close").live("click",Jmp.App.Lightbox.hide_box);a.find("#the_close").live("click",Jmp.App.Lightbox.trigger_another_lightbox);a.live("click",function(){if($("#expire_after_button").length||$("#expire_after_button_copy_link").length)$("#expire_after_button").tooltip("hide"),$("#expire_after_button_copy_link").tooltip("hide")});a.keydown(function(c){37!=c.keyCode&&39!=c.keyCode||c.stopPropagation()});
$(".time_duration_dropdown li").live("click",function(c){c=$(c.target);var b=$("#expire_date");if(c.parent().find("a")){var h=c.text();"Custom"==h?(b.datetimepicker("destroy"),Jmp.Helpers.showCalendar(b),b.parent().show().removeClass("hide"),b.show().focus(),c.hasClass("team_custom_destruct")?$("body").addClass("teams_setting_self-destruct-dtpicker"):$("body").addClass("self-destruct-dtpicker"),b.autoGrowInput({comfortZone:0,maxWidth:200}),b.parent().children("span.caret").click(function(k){$(k.target).hasClass("cancel")||
b.focus()})):(b.datetimepicker("destroy").hide().val("Date/Time").next("tester").remove(),$("body").removeClass("self-destruct-dtpicker teams_setting_self-destruct-dtpicker"),b.parent().hide().addClass("hide"));$("#select_time_duration").html(h+" <span class='caret'></span>");$("#time_duration").val(h)}});$("#expire_after_number_control > a:first").live("click",function(c){var b=parseInt($("#expire_after_number_copy_link").val())+1;1E4>b&&($("#expire_after_number_copy_link").val(b),$("#expire_after_number_copy_link").change(),
Jmp.Handler.Viewer.EnableGenerateLinkButton());c.preventDefault()});$("#expire_after_number_control > a:last").live("click",function(c){var b=parseInt($("#expire_after_number_copy_link").val())-1;0<b&&($("#expire_after_number_copy_link").val(b),$("#expire_after_number_copy_link").change(),Jmp.Handler.Viewer.EnableGenerateLinkButton());c.preventDefault()});$("#expire_after_number_copy_link").live("change",function(){1<parseInt($("#expire_after_number_copy_link").val())?$("#popup_advcopylink_form div.options-dropdown > div.btn-compact > button").html($("#expire_after_type_copy_link").val()+
"s <span class='caret'></span>"):$("#popup_advcopylink_form div.options-dropdown > div.btn-compact > button").html($("#expire_after_type_copy_link").val()+" <span class='caret'></span>");Jmp.Handler.Viewer.EnableGenerateLinkButton()});$("#expire_after_button_copy_link").live("click",function(c){"bucket"==$("#popup_advcopylink_form #item_type").val()&&$(this).parent().hasClass("open")?$(this).tooltip("show"):$(this).tooltip("hide")});$("#expire_after_list_copy_link").live("click",function(c){$(this).parent().hasClass("open")?
($(this).parent().removeClass("open"),"bucket"==$("#popup_advcopylink_form #item_type").val()&&$("#expire_after_button_copy_link").tooltip("hide")):($(this).parent().addClass("open"),"bucket"==$("#popup_advcopylink_form #item_type").val()?$("#expire_after_button_copy_link").tooltip("show"):$("#expire_after_button_copy_link").tooltip("hide"));Jmp.Handler.Viewer.EnableGenerateLinkButton();return!1});$("#expire_after_copy_link, #expire_after_copy_link ~ span").live("click",function(){$("#expire_after_copy_link").hasClass("checked")?
$("#expire_after_copy_link").removeClass("checked"):$("#expire_after_copy_link").addClass("checked");Jmp.Handler.Viewer.EnableGenerateLinkButton()});$("#disable_download_copy_link, #disable_download_copy_link ~ span").live("click",function(){$("#disable_download_copy_link").hasClass("checked")?$("#disable_download_copy_link").removeClass("checked"):$("#disable_download_copy_link").addClass("checked");Jmp.Handler.Viewer.EnableGenerateLinkButton()});$("#expire_after_list_copy_link li:not(.blockUI)").live("click",
function(c){c=$(this).data("value");$("#expire_after_type_copy_link").val(c);1<parseInt($("#expire_after_number_copy_link").val())?$(this).parent().prev("button").html(c+"s<span class='caret'></span>"):$(this).parent().prev("button").html(c+" <span class='caret'></span>");$(this).parent().removeClass("open");"Download"==c?$("#disable_download_copy_link").removeAttr("checked").attr("disabled","disabled").addClass("blockUI"):$("#disable_download_copy_link").removeAttr("disabled").removeClass("blockUI");
Jmp.Handler.Viewer.EnableGenerateLinkButton()});$("#popup_email_form .controls-number a:first").live("click",function(c){var b=parseInt($("#expire_after_number").val())+1;1E4>b&&($("#expire_after_number").val(b),$("#expire_after_number").change());c.preventDefault()});$("#f .controls-number a:last").live("click",function(c){var b=parseInt($("#expire_after_number").val())-1;0<b&&($("#expire_after_number").val(b),$("#expire_after_number").change());c.preventDefault()});$("#expire_after_number").live("change",
function(){1<parseInt($("#expire_after_number").val())?$("div.options-dropdown > div.btn-compact > button").html($("#expire_after_type").val()+"s <span class='caret'></span>"):$("div.options-dropdown > div.btn-compact > button").html($("#expire_after_type").val()+" <span class='caret'></span>")});$("#expire_after_button").live("click",function(c){"bucket"==$("#popup_email_form #item_type").val()&&$(this).parent().hasClass("open")?$(this).tooltip("show"):$(this).tooltip("hide")});$("#expire_after_list").live("click",
function(c){$(this).parent().hasClass("open")?($(this).parent().removeClass("open"),"bucket"==$("#popup_email_form #item_type").val()&&$("#expire_after_button").tooltip("hide")):($(this).parent().addClass("open"),"bucket"==$("#popup_email_form #item_type").val()?$("#expire_after_button").tooltip("show"):$("#expire_after_button").tooltip("hide"));return!1});$("#expire_after, #expire_after ~ span").live("click",function(){$("#expire_after").hasClass("checked")?$("#expire_after").removeClass("checked"):
$("#expire_after").addClass("checked")});$("#disable_download, #disable_download ~ span").live("click",function(){$("#disable_download").hasClass("checked")?$("#disable_download").removeClass("checked"):$("#disable_download").addClass("checked")});$("#resend_verify_email").live("click",function(c){$.get("/rvc",function(b){Jmp.App.Notifications.display_notification({type:"email_sent",message:"Verification email sent to "+$("ul.dropdown-menu").find(".dropdown-detail").first().text()}).close_notification()});
return!1});$("#update_my_email_address").live("click",function(c){Jmp.App.Lightbox.hide();change_email_popup()});$("#expire_after_list li:not(.blockUI)").live("click",function(c){c=$(this).data("value");$("#expire_after_type").val(c);1<parseInt($("#expire_after_number").val())?$(this).parent().prev("button").html(c+"s<span class='caret'></span>"):$(this).parent().prev("button").html(c+" <span class='caret'></span>");$(this).parent().removeClass("open");"Download"==c?$("#disable_download").removeAttr("checked").attr("disabled",
"disabled").addClass("blockUI"):$("#disable_download").removeAttr("disabled").removeClass("blockUI")});$(".modal-CPS .password_form_field #hidePasswordField").live("click",function(){$(this).hide();$("#showPasswordField").show();$(".modal-CPS .password_form_field input").prop("type","password")});$(".modal-CPS .password_form_field #showPasswordField").live("click",function(){$(this).hide();$("#hidePasswordField").show();$(".modal-CPS .password_form_field input").prop("type","text")});$(".email_invitee_list_cps .icn-close").live("click",
function(){$(this).parents("li").remove();$(".modal-CPS .btn-save").removeClass("disabled")});$(".modal-CPS .password_form_field input").live("keypress",function(){$(".modal-CPS .btn-save").removeClass("disabled")});$(".lnk-privacy-menu li a").live("click",Jmp.App.Lightbox.onLnkPrvacyChange);$(".email_invte_cps_group").live("click",Jmp.App.Lightbox.onAddLnkPrivacyEmail);$(".modal-cps .btn-save").live("click",Jmp.App.Lightbox.saveResourcePrivacy)});$(function(){$(document).click(function(c){$("#login-dd").removeClass("active").children("form").addClass("hide");$("#login-dd form .error").each(function(){$(this).tooltip("hide")});if($(c.target).hasClass("modal"))return"home_register_form"==$(c.target).attr("id")&&$("#home_register_form, #home_form_backdrop").addClass("hide"),"home_login_form"==$(c.target).attr("id")&&$("#home_login_form, #home_form_backdrop").addClass("hide"),!1});$("body").keydown(function(c){0==c.shiftKey&&27==c.which&&($("#home_register_form").length||
$("#home_login_form").length)&&hideLoginRegisterPopup()});$("#downgrade_btn").click(function(c){c.preventDefault();$("#downgrade_popup, #downgrade_popup_backdrop").removeClass("hide")});$("#downgrade_close").click(function(){$("#downgrade_popup, #downgrade_popup_backdrop").addClass("hide")});$(".signup_button_home").bind("click",function(c){$("#home_register_form, #home_form_backdrop").removeClass("hide");$("#home_register_form").find("#firstName").focus().select();return!1});$("#login-dd").bind("click",
function(c){$("#home_login_form, #home_form_backdrop").removeClass("hide");$("#home_login_form").find("input[type=text]").focus().select();return!1});var a={placement:"left"};$("#login-dd form input").tooltip({placement:"left"});1<=$("#login-dd form .error").length&&$("#login-dd form .error").each(function(){$(this).tooltip("show")});$(".sign-up input").tooltip(a);1<=$(".sign-up .error").length&&$(".sign-up .error").each(function(){$(this).tooltip("show")});$("#the_sign_up form input").tooltip(a);
1<=$("#the_sign_up form .error").length&&$("#the_sign_up form .error").each(function(){$(this).tooltip("show")});$("#appleid_signin, #appleid_signup").live("click",function(){Jmp.Helpers.set_fresh_cookie("lastlogin","apple",30);var c=$(this);AppleID.auth.signIn().then(function(b){b=b.authorization;if("object"==typeof b&&""!=b.id_token){var h="";$("#item_id").length&&$("#item_type").length&&(h="&item_type="+$("#item_type").val()+"&item_id="+$("#item_id").val(),$("#sign_up_origin").length&&(h+="&sign_up_origin="+
$("#sign_up_origin").val()));c.length&&"undefined"!=typeof c.data("redirect-uri")&&""!=c.data("redirect-uri")&&(h+="&redirect_uri="+c.data("redirect-uri"));$.ajax({type:"POST",url:"/apple_auth?id_token="+b.id_token+(h+"&jfrom=com.jumpshare"),data:Jmp.Helpers.get_secure_params(b),success:function(k){"0"==k.status?Jmp.App.Notifications.display_notification({type:"error",message:k.message}).close_notification():""!=c.data("reconnect")&&"1"==c.data("reconnect")?($("#appleid_signin").parent().addClass("hide"),
$("#microsoft_login").parent().addClass("hide"),$("#g_login_button").parent().addClass("hide"),$("#apple_revoke").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:"Success! Now you are loggedin with AppleID."}).close_notification()):window.location=BASEURL+k.url}})}else Jmp.App.Notifications.display_notification({type:"error",message:"Error occoured while connecting to Apple login, please try again"}).close_notification()},function(b){"popup_closed_by_user"!=
b.error&&"user_cancelled_authorize"!=b.error&&Jmp.App.Notifications.display_notification({type:"error",message:"Error occoured in Apple login, please try again"}).close_notification()})});$("#microsoft_signin, #microsoft_signup").live("click",function(){Jmp.Helpers.set_fresh_cookie("lastlogin","microsoft",30);var c=$(this),b="";$("#item_id").length&&$("#item_type").length&&(b="&item_type="+$("#item_type").val()+"&item_id="+$("#item_id").val(),$("#sign_up_origin").length&&(b+="&sign_up_origin="+$("#sign_up_origin").val()));
c.length&&"undefined"!=typeof c.data("redirect-uri")&&""!=c.data("redirect-uri")&&(b+="&redirect_uri="+c.data("redirect-uri"));window.location=BASEURL+"auth/microsoft/web?id_token="+(b+"&jfrom=com.jumpshare")});$("#microsoft_login").live("click",function(){Jmp.Helpers.set_fresh_cookie("lastlogin","microsoft",30);$(this);myMSALObj.loginPopup({scopes:["User.Read"]}).then(function(c){"object"==typeof c&&""!=c.tokenType&&"id_token"==c.tokenType?"undefined"!=typeof c.account.userName&&""!=c.account.userName&&
c.account.userName!=$("#form_email").find("p span").text()?Jmp.App.Notifications.display_notification({type:"error",message:"Connect failed. Your Microsoft email does not match your Jumpshare email"}).close_notification():($("#appleid_signin").parent().addClass("hide"),$("#microsoft_login").parent().addClass("hide"),$("#g_login_button").parent().addClass("hide"),$("#microsoft_revoke").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:"Success! Now you are loggedin with Microsoft."}).close_notification()):
Jmp.App.Notifications.display_notification({type:"error",message:"Error occoured while connecting to Microsoft login, please try again"}).close_notification()})});$("#submitaction").live("click",function(){Jmp.Helpers.set_fresh_cookie("lastlogin","email",30)});$("#g_login_button, #g_signup_button").live("click",function(){Jmp.Helpers.set_fresh_cookie("lastlogin","google",30);getAuthCode()});$("#g_revoke_button").live("click",function(){$("#form_password").parent().hasClass("hide")?Jmp.App.Notifications.display_notification({type:"error",
message:"Please set your account password before proceeding"}).close_notification():(query_str="jmail=",query_str=""!=$(".dropdown-menu").find(".dropdown-detail").first().text()?query_str+$(".dropdown-menu").find(".dropdown-detail").first().text():query_str+$("#email").val(),$.ajax({type:"GET",url:BASEURL+"gogl_lo?"+query_str,success:function(c){"1"==c.status?($("#g_revoke_button").parent().addClass("hide"),$("#g_login_button").parent().removeClass("hide"),$("#microsoft_login").parent().removeClass("hide"),
$("#appleid_signin").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:c.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:c.message}).close_notification()}}))});$("#apple_revoke").live("click",function(){$("#form_password").parent().hasClass("hide")?Jmp.App.Notifications.display_notification({type:"error",message:"Please set your account password before proceeding"}).close_notification():(query_str="jmail=",
query_str=""!=$(".dropdown-menu").find(".dropdown-detail").first().text()?query_str+$(".dropdown-menu").find(".dropdown-detail").first().text():query_str+$("#email").val(),$.ajax({type:"GET",url:BASEURL+"apple_logout?"+query_str,success:function(c){"1"==c.status?($("#apple_revoke").parent().addClass("hide"),$("#g_login_button").parent().removeClass("hide"),$("#microsoft_login").parent().removeClass("hide"),$("#appleid_signin").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",
message:c.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:c.message}).close_notification()}}))});$("#microsoft_revoke").live("click",function(){$("#form_password").parent().hasClass("hide")?Jmp.App.Notifications.display_notification({type:"error",message:"Please set your account password before proceeding"}).close_notification():(query_str="jmail=",query_str=""!=$(".dropdown-menu").find(".dropdown-detail").first().text()?query_str+$(".dropdown-menu").find(".dropdown-detail").first().text():
query_str+$("#email").val(),$.ajax({type:"GET",url:BASEURL+"microsoft_logout?"+query_str,success:function(c){"1"==c.status?($("#microsoft_revoke").parent().addClass("hide"),$("#g_login_button").parent().removeClass("hide"),$("#microsoft_login").parent().removeClass("hide"),$("#appleid_signin").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:c.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",message:c.message}).close_notification()}}))});
$(".ws_bullets span").live("click",function(c){c=$(this).index();var b=$(".testimonial .container"),h=$(".ws_bullets"),k=$("span.active",h).index(),l=h.find("span").length;0==c?($("#welcome_popup_previous_slide").addClass("hide"),$("#welcome_popup_next_slide").removeClass("hide"),$("#welcome_popup_download_jumpshare_app").addClass("hide"),$("#welcome_popup_skip").addClass("hide"),$("#welcome_popup_or").addClass("hide")):c==l-1?($("#welcome_popup_previous_slide").addClass("hide"),$("#welcome_popup_next_slide").addClass("hide"),
$("#welcome_popup_download_jumpshare_app").removeClass("hide"),$("#welcome_popup_skip").removeClass("hide"),$("#welcome_popup_or").removeClass("hide")):($("#welcome_popup_previous_slide").removeClass("hide"),$("#welcome_popup_next_slide").removeClass("hide"),$("#welcome_popup_download_jumpshare_app").addClass("hide"),$("#welcome_popup_skip").addClass("hide"),$("#welcome_popup_or").addClass("hide"));$("#slide-"+(k+1)).removeClass("active");$("#slide-"+(c+1)).addClass("active");$(".slide",b).removeClass("active").hide();
$("span",h).removeClass("active");$($(".slide",b).get(c)).addClass("active").show("fade");$($("span",h).get(c)).addClass("active");return!1});$("#welcome_popup_previous_slide").live("click",function(c){$(".ws_bullets").find("span.active").prev().trigger("click");return!1});$("#welcome_popup_next_slide").live("click",function(c){$(".ws_bullets").find("span.active").next().trigger("click");return!1});$(document).ready(function(){Jmp.Helpers.delete_cookie("tz_offset");Jmp.Helpers.delete_cookie("tz_dst");
if("undefined"==typeof TZ||""==TZ){var c=getTimeZoneData();Jmp.Helpers.set_cookie("tz_offset",c.offset);Jmp.Helpers.set_cookie("tz_dst",c.dst)}0==Jmp.Helpers.are_cookies_enabled()&&($(".notice-wrapper.cookie").removeClass("hide"),$("body").addClass("global-notice"));Jmp.Helpers.is_outdated_browser()&&setTimeout(function(){$(".notice-wrapper.outdated-browser").removeClass("hide");$("body").addClass("global-notice")},2E3)});$("#change-email").live("click",change_email_popup);$(".submit:not(.disabled)").live("click",
function(c){if($(this).hasClass("disabled"))return!1;"Reset Password"==$(this).val().toString()?$(this).val("Resetting..."):"Sign In"==$(this).val().toString()?$(this).val("Logging In..."):$(this).val("Signing Up...");$(this).addClass("disabled")});$("#cb1").change(function(){this.checked?($("#plus_pln_price").text("$8.25"),$("#business_pln_price").text("$12.50"),$("#enterprise_pln_price").text("$20.80"),$(".planduration").text("annually"),$(".plus_plan").attr("data-plan","5"),$(".business_plan").attr("data-plan",
"7")):($("#plus_pln_price").text("$9.99"),$("#business_pln_price").text("$15"),$("#enterprise_pln_price").text("$25"),$(".planduration").text("monthly"),$(".plus_plan").attr("data-plan","4"),$(".business_plan").attr("data-plan","6"));var c=this.checked,b=$(".business_plan"),h=b.attr("href").replace(/\bcycle=([^&]*)(&|$)/,"");h=h.replace(/%3Fcycle=([^&]*)(&|$)/,"");h=h.replace(/[?&]$/,"");h=h+(-1!==h.indexOf("?")?"&":"?")+"cycle="+(c?"year":"month");b.attr("href",h);b=$(".plus_plan");h=b.attr("href").replace(/\bcycle=([^&]*)(&|$)/,
"");h=h.replace(/%3Fcycle=([^&]*)(&|$)/,"");h=h.replace(/[?&]$/,"");h=h+(-1!==h.indexOf("?")?"&":"?")+"cycle="+(c?"year":"month");b.attr("href",h)})});var int_slide=void 0;
function loadNextSlide(){"undefined"!=typeof int_slide&&clearTimeout(int_slide);var a=$(".testimonial .container"),c=$(".ws_bullets");if(a.length){var b=$(".slide.active",a).next(),h=$("span.active",c).next();1>b.length&&(b=$($(".slide",a).get(0)),h=$($("span",c).get(0)));int_slide=setTimeout(function(){$(".slide",a).removeClass("active").hide();$("span",c).removeClass("active");b.addClass("active").show("fade");h.addClass("active")},4E3)}}
function change_email_popup(){Jmp.App.Lightbox.show({title:"Change your email address",type:"change_email"},function(a){a=$("#modal").find(".btn-submit.btn-blue:first");a.attr("disabled",!0).text("Updating ...").addClass("disabled");if(processChangeEmailPopup()){a=$("#txt_new_email").val();var c=$("#txt_password").val();params={new_email:a,new_password:c};$.ajax({type:"POST",url:BASEURL+"/auth/change_verification_email",data:Jmp.Helpers.get_secure_params(params),success:function(b){Jmp.App.Notifications.display_notification({type:"1"==
b.status?"success":"error",message:b.message}).close_notification();"1"==b.status&&($("#user_email").html(b.new_email),$("#resend_verification_email").attr("data-email",b.new_email))},complete:function(b){Jmp.App.Lightbox.hide()}})}else a.attr("disabled",!1).text("Update email").removeClass("disabled")})}
function processChangeEmailPopup(){var a=$("#txt_new_email").val(),c=$("#txt_new_email_confirm").val(),b=$("#txt_password").val();if(""==a||""==c)return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid email address"}).close_notification(),!1;if(Jmp.Helpers.looksLikeEMail(a)&&Jmp.Helpers.looksLikeEMail(c)){if(a!=c)return Jmp.App.Notifications.display_notification({type:"error",message:"Email and confirmed email should match"}).close_notification(),!1;if(""==b||
4>=b.length)return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter valid password"}).close_notification(),!1}else return Jmp.App.Notifications.display_notification({type:"error",message:"Invalid email"}).close_notification(),!1;return!0}function getTimeZoneData(){var a=new Date,c=new Date(a.getFullYear(),0,1),b=new Date(a.getFullYear(),6,1);c=a.getTimezoneOffset()<Math.max(c.getTimezoneOffset(),b.getTimezoneOffset());return{offset:-a.getTimezoneOffset()/60,dst:+c}}
function hideLoginRegisterPopup(a){"undefined"===typeof a&&(a=!0);$("#home_register_form").addClass("hide");$("#home_login_form").addClass("hide");a&&$("#home_form_backdrop").addClass("hide")}function onSubmitRegister(a){return new Promise(function(c,b){$(".g-recaptcha").closest("form").unbind("submit").submit()})}function onSubmitAJAXRegister(a){$("#grecaptcha").closest("form").unbind("submit").submit()}
function onSubmitLogin(a){return new Promise(function(c,b){$(".g-recaptcha").closest("form").unbind("submit").submit()})}function onSubmitForgotPass(a){return new Promise(function(c,b){$(".g-recaptcha").closest("form").unbind("submit").submit()})}function OnSubmitFormCF(a){}
function initClient(a){g_client=google.accounts.oauth2.initCodeClient({client_id:a,scope:"email profile openid",ux_mode:"popup",callback:c=>{var b=Math.random().toString(36).slice(2,9);if(c.code){$.ajax({type:"POST",url:"/verify_auth",async:!1,data:Jmp.Helpers.get_secure_params({at:c.code.substr(0,32),state:b}),success:function(k){}});b="&state="+b;$("#item_id").length&&$("#item_type").length&&(b+="&item_type="+$("#item_type").val()+"&item_id="+$("#item_id").val(),$("#sign_up_origin").length&&(b+=
"&sign_up_origin="+$("#sign_up_origin").val()));$("#g_login_button").length&&"undefined"!=typeof $("#g_login_button").data("redirect-uri")&&""!=$("#g_login_button").data("redirect-uri")?b+="&redirect_uri="+$("#g_login_button").data("redirect-uri"):$("#g_signup_button").length&&"undefined"!=typeof $("#g_signup_button").data("redirect-uri")&&""!=$("#g_signup_button").data("redirect-uri")&&(b+="&redirect_uri="+$("#g_signup_button").data("redirect-uri"));var h=$("#g_login_button");h.length&&""!=h.val()&&
"cs"==h.val()?(b+="&jfrom="+h.val()+"&jmail="+$("#email").val(),$.ajax({type:"GET",url:BASEURL+"google_auth?code="+c.code+b,success:function(k){"1"==k.status?($("#g_login_button").parent().addClass("hide"),$("#appleid_signin").parent().addClass("hide"),$("#microsoft_login").parent().addClass("hide"),$("#g_revoke_button").parent().removeClass("hide"),Jmp.App.Notifications.display_notification({type:"success",message:k.message}).close_notification()):Jmp.App.Notifications.display_notification({type:"error",
message:k.message}).close_notification()}})):window.location=BASEURL+"google_auth?code="+c.code+b}else $("#g_login_button").length&&"cs"==$("#g_login_button").val()&&Jmp.App.Notifications.display_notification({type:"error",message:"Error occoured while connecting to Google login, please try again"}).close_notification()}})}function getAuthCode(){g_client.requestCode()}
$(function(){$(".password_policy_ui").each(function(){$(this).after('\n\t\t\t<div class="password_policy_wrapper hide">\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<div class="password-strength" style="width:100%">\n\t\t\t\t\t\t<span class="strength_bars"></span>\n\t\t\t\t\t\t<span class="strength_bars"></span>\n\t\t\t\t\t\t<span class="strength_bars"></span>\n\t\t\t\t\t\t<span class="strength_bars"></span>\n\t\t\t\t\t\t<span class="strength_bars"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id="strength_pswrod_info">\n\t\t\t\t\t<p class="info-message">Your password must contain:</p>\n\t\t\t\t\t<p class="passwordStatus">Weak</p>\n\t\t\t\t</div>\n\t\t\t\t<ul id="password_policy_cases">\n\t\t\t\t\t<li class="one-special-char"><span class="disc"></span>a symbol</li>\n\t\t\t\t\t<li class="upper-case"><span class="disc"></span>an uppercase letter</li>\n\t\t\t\t\t<li class="lower-case"><span class="disc"></span>a lowercase letter</li>\n\t\t\t\t\t<li class="one-number"><span class="disc"></span>a number</li>\n\t\t\t\t\t<li class="eight-character"><span class="disc"></span>8 characters minimum</li>\n\t\t\t\t</ul>\n\t\t\t</div>')});$(".signup-wrapper #submitaction").addClass("blockUI");
$(".password_policy_ui").live("keyup",function(a){9!==a.which&&$(this).closest(".password_policy_container").find(".password_policy_wrapper").removeClass("hide");a=$(this).val();var c=$(this).closest(".password_policy_container");let b=0;a.match(/[a-z]/)?(b+=1,c.find(".lower-case").addClass("hide")):c.find(".lower-case").removeClass("hide");a.match(/[A-Z]/)?(b+=1,c.find(".upper-case").addClass("hide")):c.find(".upper-case").removeClass("hide");a.match(/([0-9])/)?(b+=1,c.find(".one-number").addClass("hide")):
c.find(".one-number").removeClass("hide");a.match(/[^\w]/)?(b+=1,c.find(".one-special-char").addClass("hide")):c.find(".one-special-char").removeClass("hide");7<a.length?(b+=1,c.find(".eight-character").addClass("hide")):c.find(".eight-character").removeClass("hide");0==b&&(c.find(".password-strength span").css({"background-color":"#ddd"}),c.find(".passwordStatus").text("Weak"),c.find(".info-message").text("Your password must contain:"),$(".signup-wrapper #submitaction").addClass("blockUI"));1==b?
(c.find(".password-strength span").css({"background-color":"#ddd"}),c.find(".password-strength span:lt(1)").first().css({"background-color":"#f00"}),c.find(".passwordStatus").text("Weak"),c.find(".info-message").text("Your password must contain:"),$(".signup-wrapper #submitaction").addClass("blockUI")):2==b?(c.find(".password-strength span").css({"background-color":"#ddd"}),c.find(".password-strength span:lt(2)").css({"background-color":"#f00"}),c.find(".passwordStatus").text("Weak"),c.find(".info-message").text("Your password must contain:"),
$(".signup-wrapper #submitaction").addClass("blockUI")):3==b?(c.find(".password-strength span").css({"background-color":"#ddd"}),c.find(".password-strength span:lt(3)").css({"background-color":"#fad132"}),c.find(".passwordStatus").text("Fair"),c.find(".info-message").text("Your password must contain:"),$(".signup-wrapper #submitaction").addClass("blockUI")):4==b?(c.find(".password-strength span").css({"background-color":"#ddd"}),c.find(".password-strength span:lt(4)").css({"background-color":"#168eea"}),
c.find(".passwordStatus").text("Okay"),c.find(".info-message").text("Your password must contain:"),$(".signup-wrapper #submitaction").addClass("blockUI")):5==b&&(c.find(".password-strength span").css({"background-color":"#05CC71"}),c.find(".passwordStatus").text("Strong"),c.find(".info-message").text("Your password is safe to use."),$(".signup-wrapper #submitaction").removeClass("blockUI"))});$(".show-password").on("change",function(){var a=$(this).data("fields").split(","),c=this.checked;a.forEach(function(b){b=
$("#"+b);var h=b.clone().attr("type",c?"text":"password");b.replaceWith(h)})});showLastUsedLabel(Jmp.Helpers.get_cookie("lastlogin"))});
function showLastUsedLabel(a){$(".last_login_badge").remove();"email"===a?$("#salogin").hasClass("login-wrapper")?($(".login-wrapper #submitaction").parent(".crisp").css("position","relative"),$(".login-wrapper #submitaction").after('\n\t\t<span class="last_login_badge">\n\t\t\t<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path d="M9.2409 8.0139L3 14.25L4.5 15.75M5.25 12L6.75 13.5M15 5.625C15 7.48896 13.489 9 11.625 9C9.76102 9 8.25 7.48896 8.25 5.625C8.25 3.76104 9.76102 2.25 11.625 2.25C13.489 2.25 15 3.76104 15 5.625Z" stroke="white" stroke-opacity="0.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t</svg>\n\t\t\tLast Used\n\t\t</span>'),$(".last_login_badge").css("top",
"24px")):($(".btn-email").parent().css("position","relative"),$(".btn-email").after('\n\t\t<span class="last_login_badge">\n\t\t\t<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path d="M9.2409 8.0139L3 14.25L4.5 15.75M5.25 12L6.75 13.5M15 5.625C15 7.48896 13.489 9 11.625 9C9.76102 9 8.25 7.48896 8.25 5.625C8.25 3.76104 9.76102 2.25 11.625 2.25C13.489 2.25 15 3.76104 15 5.625Z" stroke="white" stroke-opacity="0.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t</svg>\n\t\t\tLast Used\n\t\t</span>')):
"apple"===a?($("#appleid_signin").parent().css("position","relative"),$("#appleid_signin").after('\n\t\t<span class="last_login_badge">\n\t\t\t<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path d="M9.2409 8.0139L3 14.25L4.5 15.75M5.25 12L6.75 13.5M15 5.625C15 7.48896 13.489 9 11.625 9C9.76102 9 8.25 7.48896 8.25 5.625C8.25 3.76104 9.76102 2.25 11.625 2.25C13.489 2.25 15 3.76104 15 5.625Z" stroke="white" stroke-opacity="0.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t</svg>\n\t\t\tLast Used\n\t\t</span>')):
"microsoft"===a?($("#microsoft_signin").parent().css("position","relative"),$("#microsoft_signin").after('\n\t\t<span class="last_login_badge">\n\t\t\t<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path d="M9.2409 8.0139L3 14.25L4.5 15.75M5.25 12L6.75 13.5M15 5.625C15 7.48896 13.489 9 11.625 9C9.76102 9 8.25 7.48896 8.25 5.625C8.25 3.76104 9.76102 2.25 11.625 2.25C13.489 2.25 15 3.76104 15 5.625Z" stroke="white" stroke-opacity="0.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t</svg>\n\t\t\tLast Used\n\t\t</span>')):
"google"===a&&($("#g_login_button").parent().css("position","relative"),$("#g_login_button").after('\n\t\t<span class="last_login_badge">\n\t\t\t<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t<path d="M9.2409 8.0139L3 14.25L4.5 15.75M5.25 12L6.75 13.5M15 5.625C15 7.48896 13.489 9 11.625 9C9.76102 9 8.25 7.48896 8.25 5.625C8.25 3.76104 9.76102 2.25 11.625 2.25C13.489 2.25 15 3.76104 15 5.625Z" stroke="white" stroke-opacity="0.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t</svg>\n\t\t\tLast Used\n\t\t</span>'))}
;Jmp.App.UploadProgress={container_name:"#js-full-upload-info",social_links_name:"#bottom-links .social",copy_position:"#js-sidebar .storage-info",status:void 0,speed:void 0,progress:void 0,show:function(){if(this._is_already_running())return!1;var a=$(this.template());$(this.copy_position).prepend(a);this._fade_in(this.container_name);this._assign_controls(a);this.status.tooltip({container:"body"});$("#sidebar_bottom_invite_lnk").addClass("hide")},hide:function(){var a=this.container_name;this._fade_out(this.container_name,
function(){Jmp.App.UploadProgress.status.tooltip("destroy");$(a).remove()});$("#sidebar_bottom_invite_lnk").removeClass("hide")},_fade_out:function(a,c){$(a).fadeOut(1,c)},_fade_in:function(a){$(a).fadeIn(1)},_adjust_visibility:function(a,c){$(a).css("visibility",c)},_assign_controls:function(a){this.status=a.find(".status");this.speed=a.find(".speed");this.state=a.find(".state");this.progress=a.find(".js-progress-bar-full");this.cancel_all_uploads=a.find(".js_cancel_all_uploads");var c=this;this.cancel_all_uploads.hover(function(){c.status.html(c._cancel_message());
c.speed.hide()},function(){c.speed.show();c.status.html("");c.updates(c.last_data)})},updates:function(a){this._update_ui(a)},_update_ui:function(a){this.last_data=a;if(100<=a.progress){var c="Finishing...";var b="";this.cancel_all_uploads.addClass("hide")}else c="Uploading "+a.uploading_stats.uploading+" of "+a.uploading_stats.total,b="Uploading "+a.uploading_stats.uploading+"/"+a.uploading_stats.total+" ("+Math.round(a.progress)+"%) <br /> Time Remaining: "+a.time_remaining,this.cancel_all_uploads.removeClass("hide");
this.status.html()!=this._cancel_message()&&(this.status.html(c),""!=b&&(this.status.attr("data-original-title",b),(c=this.status.tooltip().data("bs.tooltip").$tip)&&c.find(".tooltip-inner").html(b)));100<a.progress&&(a.progress=100);this.progress.css("width",Math.round(a.progress)+"%")},_adjust_position:function(a){},_get_offset:function(a){return $(a).offset()},_is_already_running:function(){return 1<=$(this.container_name).length?!0:!1},template:function(){var a=[];a.push('<div id="js-full-upload-info" class="upload-progress">');
a.push('<div class="js-offer pull-left clearfix">');a.push('<a href="/#" class="icon icn-uploading"></a>');a.push("</div>");a.push('<span data-tooltip="true" data-toggle="tooltip" data-placement="top" data-html="true" title="Uploading 0/0 (25%) <br /> Time Remaining: 0 mins 0 secs" class="status">Uploading...</span>');a.push('<div class="js-offer pull-right clearfix">');a.push('<a href="#" class="icon icn-upload-cancel js_cancel_all_uploads"></a>');a.push("</div>");a.push('<div class="progress js-progress-full clearfix">');
a.push('<div class="progress-bar js-progress-bar-full" role="progressbar" style="width:0%;"></div>');a.push("</div>");a.push("</div>");a.push("</div>");return a.join("\n")},_cancel_message:function(){return"Cancel upload?"}};var js_uploader,swfu,files_count=0;
$(function(){if(Jmp.Uploader.isXHR)$("#drop-area").live("mouseover",function(){Jmp.Helpers.is_opera()||$(this).find(".msg").html("Click here to upload");return!1}),$("#drop-area").live("mouseout",function(){if(!Jmp.Helpers.is_opera()){var c="Drag & drop to";c=Jmp.App.getView().type==Jmp.Handler.getRule("b")?c+" add files":c+" upload";$(this).find(".msg").html(c)}return!1}),js_uploader=new XHRUpload({buttons:[{id:"drop-area"},{id:"dd-area"},{id:"upload_files_main"},{id:"upload_files_dropdown"},{id:"upload_files_empty_message"},
{id:"version_upload_link"}],dropAreas:[{id:"upload_drop_box123"}],dropArea:"document",onRequest:function(c,b){$("#global-actions .cancel").trigger("click");entries=[];final_files=[];directories=[];dropped_files_count=directories_finished=directories_count=0;Jmp.Uploader.create_collection_or_validate_queue(c,void 0,b,"validateQueue")},onRequestItemsForFolderUpload:function(c){$("#global-actions .cancel").trigger("click");entries=[];final_files=[];directories=[];final_directories={};final_directories_props=
{};prepared_files_count=final_files_count=dropped_files_count=directories_finished=directories_count=0;this.build_files_for_uploaded_folder(c)},onRequestItemsForFolderDrop:function(c){$("#global-actions .cancel").trigger("click");entries=[];final_files=[];directories=[];final_directories={};final_directories_props={};prepared_files_count=final_files_count=dropped_files_count=directories_finished=directories_count=0;this.fetch_entries(c)},fetch_entries:function(c){for(var b=c.length,h=0;h<b;h++){var k=
"undefined"!=typeof c[h].webkitGetAsEntry?c[h].webkitGetAsEntry():c[h];k._file=c[h].getAsFile();k.isDirectory?directories.push(k):(dropped_files_count++,k._file=c[h].getAsFile(),entries.push(k))}if(1<=directories.length){final_directories_props.files=[];for(c=0;c<entries.length;c++)k=entries[c],final_directories_props.files.push(k._file);this.fetch_entries_recursively(directories)}else this.prepare_files(entries)},fetch_entries_recursively:function(c){this.fetch_entries_from_directories(c)},fetch_entries_from_directories:function(c){for(var b=
c.length,h=0;h<b;h++){var k=c[h];k.isDirectory&&(directories_count++,reader=k.createReader(),this.read_entries(k,[],reader))}},read_entries:function(c,b,h){var k=this;h.readEntries(function(l){l.length?(entries=entries.concat(l),b=b.concat(l),k.append_directories(c,[]),js_uploader._options.fetch_entries_from_directories(l),js_uploader._options.read_entries(c,b,h)):(directories_finished++,k.append_directories(c,b),directories_finished==directories_count&&(l=Jmp.Helpers.deepCountFolders(final_directories),
50<l?Jmp.App.Lightbox.show({type:"large_folder_upload_error_message",folder_count:l}):(js_uploader._options.prepare_files_for_final_directories(final_directories,final_directories_props),0==final_files_count&&Jmp.Uploader.create_collection_or_validate_queue(final_directories,final_directories_props,void 0,"validateQueueForFolderHierarchy"))))})},prepare_files:function(c){for(var b=c.length,h=prepared_files_count=final_files_count=0;h<b;h++){var k=c[h];k.isFile&&(final_files_count++,this.prepare_file(k))}},
prepare_file:function(c){c.file(function(b){final_files.push(b);prepared_files_count++;final_files_count==prepared_files_count&&js_uploader._options.all_files_prepared_for_dragged_folder()},function(b){final_files.push(c._file);prepared_files_count++;final_files_count==prepared_files_count&&js_uploader._options.all_files_prepared_for_dragged_folder()})},prepare_files_for_final_directories:function(c,b){for(var h=Object.keys(c),k=h.length,l=0;l<k;l++){var m=h[l],n=c[m];m=b["__"+m+"__"];if("object"==
$.type(n)){for(var p=m.directory_files.length,r=0;r<p;r++){var q=m.directory_files[r];final_files_count++;this.prepare_file_for_final_directory(n,m,q)}delete m.directory_files;this.prepare_files_for_final_directories(n,m)}}},prepare_file_for_final_directory:function(c,b,h){h.file(function(k){b.files.push(k);prepared_files_count++;final_files_count==prepared_files_count&&Jmp.Uploader.create_collection_or_validate_queue(final_directories,final_directories_props,void 0,"validateQueueForFolderHierarchy")})},
all_files_prepared_for_dragged_folder:function(){Jmp.Uploader.create_collection_or_validate_queue(final_files,void 0,void 0,"validateQueue")},append_directories:function(c,b){c=c.fullPath.split("/");2==c.length?(b=this.extract_directory_files(b),c=c[1],final_directories[c]={},final_directories_props["__"+c+"__"]={directory_files:b,files:[]}):this.appened_to_final_directories(c,b)},appened_to_final_directories:function(c,b){for(var h=c.length,k=c[1],l,m=final_directories[k],n=final_directories_props["__"+
k+"__"],p=c[h-1],r="__"+p+"__",q=2;q<h-1;q++)k=c[q],l="__"+k+"__",m=m[k],n=n[l];b=this.extract_directory_files(b);m[p]={};n[r]={directory_files:b,files:[]}},extract_directory_files:function(c){for(var b=c.length,h=[],k=0;k<b;k++)c[k].isFile&&h.push(c[k]);return h},build_files_for_uploaded_folder:function(c){for(var b=c.length,h=0;h<b;h++)this.build_folder_hierarchy_for_uploaded_folder(c[h]);c=Jmp.Helpers.deepCountFolders(final_directories);50<c?Jmp.App.Lightbox.show({type:"large_folder_upload_error_message",
folder_count:c}):Jmp.Uploader.create_collection_or_validate_queue(final_directories,final_directories_props,void 0,"validateQueueForFolderHierarchy")},build_folder_hierarchy_for_uploaded_folder:function(c){var b=c.webkitRelativePath.split("/");if(2==b.length){var h=b[0],k="__"+h+"__";final_directories[h]||(final_directories[h]={},final_directories_props[k]={files:[]});final_directories_props[k].files.push(c)}else{for(var l=b.length-2,m=b[b.length-2],n=final_directories,p=final_directories_props,r=
0;r<l;r++)h=b[r],k="__"+h+"__","undefined"==typeof n[h]&&(n[h]={},p[k]={files:[]}),n=n[h],p=p[k];b="__"+m+"__";n[m]||(n[m]={},p[b]={files:[]});p[b].files.push(c)}},onRequestItemsForUploadViaLink:function(c){var b=UploadViaLink.prepare_files(c),h=this;c=$("#bucket_name_header");"Untitled"==c.text()&&"0"==c.attr("data-name-edited")?(c=Jmp.App.getView().data.id,$.post(WS_PREFIX+"/buckets/update_bucket_name",Jmp.Helpers.get_secure_params({bucket_code:c,link_name:b[0].name}),function(k){"1"==k.status&&
Jmp.Helpers.update_bucket_name(k.bucket_name,k.bucket_short_name);h._onRequest(b)})):h._onRequest(b)},_onRequest:function(c,b){1<=c.length&&(this._prepare_data_for_activities(),upload_type=Jmp.App.getView().type,temp_files_length=0,bucket=Jmp.Uploader.getBucket(c,upload_type),Jmp.Uploader.bucketParents=Jmp.Uploader.bucketParents||{},this._prepare_bucket_related_data(bucket),this._prepare_parent_buckets_related_data(bucket),Jmp.App.UploadProgress.show(),Jmp.Speed.bootstrap(),this._prepare_files_for_uploading(c,
bucket,upload_type),$(".rearrange_sort_order").addClass("disabled blockUI"),Jmp.Helpers.is_custom_sort_menu_open()&&$(".cancel_sorting").trigger("click"),Jmp.Helpers.get_folder_items_count()>Jmp.Helpers.get_lazy_load_items_threshold()&&$("#sort_menu").find(".sort_by").addClass("disabled blockUI"),Jmp.Helpers.enable_edit_button(),this._sort_uploading_files());Jmp.Helpers.remove_loader_during_uploading();$(".icn-back").removeClass("disabled blockUI");$("#my_uploads").removeClass("disabled blockUI")},
_onRequestForFolderDrop:function(c,b){"undefined"==typeof valid_owner&&(valid_owner=!0);temp_files_length=0;bucket=Jmp.Uploader.getBucket(h);upload_type=Jmp.App.getView().type;this._prepare_data_for_activities();$(".rearrange_sort_order").addClass("disabled blockUI");Jmp.Helpers.is_custom_sort_menu_open()&&$(".cancel_sorting").trigger("click");Jmp.Helpers.get_folder_items_count()>Jmp.Helpers.get_lazy_load_items_threshold()&&$("#sort_menu").find(".sort_by").addClass("disabled blockUI");Jmp.Uploader.bucketParents=
Jmp.Uploader.bucketParents||{};var h=b.files;if(h&&1<=h.length){var k=Jmp.App.getView().data.id;this._prepare_bucket_related_data(k);this._prepare_files_for_uploading(h,k,upload_type);this._prepare_parent_buckets_related_data_in_hierarchy(k,b.parents)}this._prepare_files_for_uploading_recursively(c,b);Jmp.Handler.Buckets.show_uploading_progress_for_buckets();Jmp.Helpers.enable_edit_button();this._sort_uploading_files();Jmp.Helpers.remove_loader_during_uploading();$(".icn-back").removeClass("disabled blockUI");
$("#my_uploads").removeClass("disabled blockUI")},_prepare_bucket_related_data:function(c){Jmp.Helpers.remove_bucket_code_from_cookie_if_exist(c);Jmp.Uploader.bucketUploads[c]=Jmp.Uploader.bucketUploads[c]||{};Jmp.Uploader.bucketUploadCounts[c]=Jmp.Uploader.bucketUploadCounts[c]||{total:0,uploaded:0,cancelled:!1};Jmp.Uploader.bucketUploadSize[c]=Jmp.Uploader.bucketUploadSize[c]||{total:0,uploaded:0,uploading:0}},_prepare_parent_buckets_related_data:function(c){var b=Jmp.App.getView().data.parents;
if(b&&b.length){for(var h=b.length,k=0;k<h;k++)this._prepare_bucket_related_data(b[k]);Jmp.Uploader.bucketParents[c]=b}},_prepare_parent_buckets_related_data_in_hierarchy:function(c,b){if(b&&b.length){for(var h=b.length,k=0;k<h;k++)this._prepare_bucket_related_data(b[k]);Jmp.Uploader.bucketParents[c]=b}},_prepare_files_for_uploading_recursively:function(c,b){for(var h=Object.keys(c),k=h.length,l=0;l<k;l++){var m=h[l],n="__"+m+"__";"object"==$.type(c[m])&&(console.log(m),upload_type=Jmp.App.getView().type,
this._prepare_bucket_related_data(b[n].bucket_id),this._prepare_parent_buckets_related_data_in_hierarchy(b[n].bucket_id,b[n].parents),this._prepare_files_for_uploading(b[n].files,b[n].bucket_id,upload_type),this._prepare_files_for_uploading_recursively(c[m],b[n]))}},_prepare_files_for_uploading:function(c,b,h){1<=c.length&&(Jmp.App.UploadProgress.show(),Jmp.Speed.bootstrap());for(var k=0,l=[],m=0;m<c.length;m++){"undefined"==typeof c[m].fileId?(c[m].fileId=js_uploader._uploadHandler.add(c[m]),c[m].id=
"XHR_"+c[m].fileId+Date.now(),c[m].bucket=b,c[m].team_upload=Jmp.App.isTeamUpload(h),c[m].shared_upload=Jmp.App.isSharedUpload(h),c[m].file_name=c[m].name,c[m].file_size=c[m].size,Jmp.Uploader.counts.total+=1,Jmp.Uploader.file_ids.push(c[m].fileId),k++):(js_uploader._uploadHandler._files[c[m].fileId]=c[m],-1==$.inArray(c[m].fileId,Jmp.Uploader.file_ids)&&(Jmp.Uploader.counts.total+=1,Jmp.Uploader.file_ids.push(c[m].fileId),k++));Jmp.Speed.update_total(c[m].size);Jmp.Uploader.bucketUploads[b][c[m].fileId]=
0;Jmp.Uploader.bucketUploadCounts[b].total++;Jmp.Uploader.bucketUploadSize[b].total+=c[m].size;var n=Jmp.Uploader.bucketParents[b];if(n)for(var p=n.length,r=0;r<p;r++)Jmp.Uploader.bucketUploads[n[r]][c[m].fileId]=0,Jmp.Uploader.bucketUploadCounts[n[r]].total++,Jmp.Uploader.bucketUploadSize[n[r]].total+=c[m].size;Jmp.Uploader.addToList(c[m],function(q){js_uploader.cancelUpload(q);if(q.bucket_file_code)if(q.replace)$("#"+q.bucket_file_code+"-replace").attr("id",q.bucket_file_code).removeClass("hide").addClass("grid"),
Jmp.Helpers.update_viewer(q.bucket_file_code);else{var u=ViewerPanel.viewers_collection.fetch_by_id(q.bucket_file_code);u&&(u.progress=0,ViewerPanel.uploading.update_progress(u),Jmp.Helpers.delete_viewer(q.bucket_file_code))}});js_uploader._uploadHandler.upload(c[m].fileId,{});b="0"==b||0==b?1==c[m].team_upload?"team":1==c[m].shared_upload?"shared":"root":b;l[m]={parent:b,id:c[m].id,name:c[m].name,size:c[m].size,type:"file",state:"pending"}}1<=k&&Socket.push("items_updated",l)},_sort_uploading_files:function(){if(ViewerPanel.is_mobile)return!1;
if(Jmp.App.getView().type==Jmp.Handler.getRule("_empty"))Jmp.Helpers.list_sort("last_modified","desc");else{var c=$(".sorting");c.find(".sort_by.active");Jmp.App.getView().type==Jmp.Handler.getRule("_empty")||Jmp.App.getView().type==Jmp.Handler.getRule("team")?Jmp.Helpers.list_sort("last_modified","desc"):(c=$(".sorting"),c=c.find(".sort_by.active"),1<=c.length&&Jmp.Helpers.list_sort(c.attr("data-val"),c.children("span").attr("data-val")))}},_prepare_data_for_activities:function(){"undefined"==typeof Jmp.Uploader.bucketUploadActivities&&
(Jmp.Uploader.bucketUploadActivities={});Jmp.Uploader.bucketUploadActivities[Jmp.App.getView().data.id]={}},onSubmit:function(c){},onStart:function(c){Jmp.Uploader.addProgress(c.id)},onProgress:function(c,b,h){var k=b!=h?parseInt(Math.round(b/h*100)):100;if(Jmp.Uploader.bucketUploadSize[c.bucket]){Jmp.Uploader.bucketUploadSize[c.bucket].uploading=Jmp.Uploader.bucketUploadSize[c.bucket].uploaded+b;var l=Jmp.Uploader.bucketParents[c.bucket];if(l)for(var m=l.length,n=0;n<m;n++)Jmp.Uploader.bucketUploadSize[l[n]].uploading=
Jmp.Uploader.bucketUploadSize[l[n]].uploaded+b,100==k&&(Jmp.Uploader.bucketUploadSize[l[n]].uploaded+=b)}Jmp.Handler.Buckets.update_bucket_progress(c.bucket);if(l=Jmp.Uploader.bucketParents[c.bucket])for(m=l.length,n=0;n<m;n++)Jmp.Handler.Buckets.update_bucket_progress(l[n]),Socket.push("items_updated",[{parent:l[n],code:c.bucket,type:"folder",state:"uploading",progress:k}]);l=[];l[0]={parent:"0"==c.bucket||0==c.bucket?1==c.team_upload?"team":1==c.shared_upload?"shared":"root":c.bucket,id:c.id,type:"file",
state:"uploading",progress:k};c.bucket_file_code&&(l[0].code=c.bucket_file_code);Socket.push("items_updated",l);Jmp.Uploader.showProgress(c.id,k);Jmp.Speed.update_speed(h,b);SlicedUpload.isAllowed()&&ViewerPanel.manager.update_progress(c.bucket_file_code,k)},onComplete:function(c,b){if(b&&1==b.status){Jmp.Uploader.counts.uploading++;Jmp.Uploader.bucketLastResponse[c.bucket]=b;Jmp.Uploader.showUploaded(c.id,b);delete Jmp.Uploader.bucketUploads[c.bucket][c.fileId];Jmp.Uploader.bucketUploadCounts[c.bucket].uploaded++;
Jmp.Uploader.bucketUploadSize[c.bucket].uploaded+=c.size;var h=Jmp.Uploader.bucketParents[c.bucket];if(h)for(var k=h.length,l=0;l<k;l++)Jmp.Uploader.bucketUploadCounts[h[l]].uploaded++,Jmp.Uploader.bucketUploadSize[h[l]].uploaded+=c.size;SlicedUpload.isAllowed()||c instanceof CFile?(Jmp.Helpers.disable_panel_ui_navigation(b.data.code),Jmp.Helpers.update_viewer(b.data.code),Jmp.Helpers.enable_panel_ui_navigation(b.data.code)):Jmp.Helpers.add_viewer(b.data.code);Jmp.Uploader.bucketUploadCounts[c.bucket].uploaded==
Jmp.Uploader.bucketUploadCounts[c.bucket].total&&(Jmp.Uploader.updateBucketNameStatus(c.bucket),"undefined"!=typeof Jmp.Uploader.bucketUploadActivities[c.bucket]&&(console.log(c.bucket),ActivityManager.save_activity({activity_type:"files_uploaded_to_existing_bucket",files_count:Jmp.Uploader.bucketUploadCounts[c.bucket].total,bucket_code:c.bucket,file_code:b.data.code,file_name:b.data.n,file_ext:b.data.e,team_upload:c.team_upload,shared_upload:c.shared_upload})),Jmp.Uploader.bucketUploadComplete(c.bucket),
c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI"));if(h)for(l=0;l<k;l++)Jmp.Uploader.bucketUploadCounts[h[l]].uploaded==Jmp.Uploader.bucketUploadCounts[h[l]].total&&(Jmp.Uploader.updateBucketNameStatus(h[l]),Socket.push("items_updated",[{parent:h[l],code:c.bucket,type:"folder",state:"created"}]),c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=
Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI"));Jmp.Helpers.adjust_more_menu();"undefined"!=typeof Jmp.Uploader.emailQueue[c.bucket_file_code]&&(h='<div id="temp_email_form" style="display:none;"><form action="" method="post" id="popup_email_form" autocomplete="off"> \t\t\t\t\t\t\t\t\t\t<input type="email" name="email_to" id="email_to" value=""> \t\t\t\t\t\t\t\t\t\t<input type="email" name="email_data" id="email_data" value="'+Jmp.Uploader.emailQueue[c.bucket_file_code].et+
'"> \t\t\t\t\t\t\t\t\t\t<textarea class="form-control input-slim" name="email_message" id="email_message">'+Jmp.Uploader.emailQueue[c.bucket_file_code].msg+'</textarea> \t\t\t\t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="file"><input type="hidden" name="item_id" id="item_id" value="'+c.bucket_file_code+'"> \t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="expire_after" id="expire_after" value="1" '+(1==Jmp.Uploader.emailQueue[c.bucket_file_code].ea?'checked="checked"':"")+
'> \t\t\t\t\t\t\t\t\t\t<input class="form-control modal-share-days" id="expire_after_number" name="expire_after_number" value="'+Jmp.Uploader.emailQueue[c.bucket_file_code].ean+'" type="text"> \t\t\t\t\t\t\t\t\t\t<input type="hidden" name="expire_after_type" id="expire_after_type" value="'+Jmp.Uploader.emailQueue[c.bucket_file_code].eat+'"> \t\t\t\t\t\t\t\t\t\t<input type="checkbox" name="disable_download" id="disable_download" value="1" '+(1==Jmp.Uploader.emailQueue[c.bucket_file_code].dd?'checked="checked"':
"")+'> \t\t\t\t\t\t\t\t\t\t<input type="text" class="distxts hasDatepicker" name="email_date" id="email_date" value="'+Jmp.Uploader.emailQueue[c.bucket_file_code].ed+'" style="width:60px;" readonly=""> \t\t\t\t\t\t\t\t\t</form> \t\t\t\t\t\t\t\t\t<div class="modal-footer clearfix"><button class="btn btn-submit pull-right btn-blue send_mail" id="send_email">Send</button></div></div>',$("body").append(h),delete Jmp.Uploader.emailQueue[c.bucket_file_code],setTimeout(function(){$("#popup_email_form ~ div.modal-footer > button.send_mail").trigger("click")},
2E3));Socket.push("items_updated",[{parent:"0"==c.bucket||0==c.bucket?1==c.team_upload?"team":1==c.shared_upload?"shared":"root":c.bucket,id:c.id,code:b.data.code,type:"file",state:"created"}])}else if(Jmp.Uploader.showFailed(c,b,function(m){js_uploader._options.onRequest([m])}),-1==b.status||-2==b.status||-3==b.status||-10==b.status||500==b.status)if(Jmp.Uploader.bucketUploadCounts[c.bucket].uploaded==Jmp.Uploader.bucketUploadCounts[c.bucket].total&&(Jmp.Uploader.updateBucketNameStatus(c.bucket),
"undefined"!=typeof Jmp.Uploader.bucketLastResponse[c.bucket]&&"undefined"!=typeof Jmp.Uploader.bucketUploadActivities[c.bucket]&&(b=Jmp.Uploader.bucketLastResponse[c.bucket],ActivityManager.save_activity({activity_type:"files_uploaded_to_existing_bucket",files_count:Jmp.Uploader.bucketUploadCounts[c.bucket].total,bucket_code:c.bucket,file_code:b.data.code,file_name:b.data.n,file_ext:b.data.e,team_upload:c.team_upload,shared_upload:c.shared_upload}),delete Jmp.Uploader.bucketLastResponse[c.bucket]),
Jmp.Uploader.bucketUploadComplete(c.bucket),c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI")),h=Jmp.Uploader.bucketParents[c.bucket])for(k=h.length,l=0;l<k;l++)Jmp.Uploader.bucketUploadCounts[h[l]].uploaded==Jmp.Uploader.bucketUploadCounts[h[l]].total&&(Jmp.Uploader.updateBucketNameStatus(h[l]),Socket.push("items_updated",[{parent:h[l],code:c.bucket,type:"folder",state:"created"}]),
c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI"));delete b.storage_used},onCancel:function(c){Jmp.Uploader.any_file_canceled=!0;Jmp.Uploader.counts.total--;if("undefined"!=typeof Jmp.Uploader.bucketUploadCounts[c.bucket]){Jmp.Uploader.bucketUploadCounts[c.bucket].cancelled=!0;Jmp.Uploader.bucketUploadCounts[c.bucket].total--;Jmp.Uploader.bucketUploadSize[c.bucket].total-=
c.size;Jmp.Uploader.bucketUploadCounts[c.bucket].uploaded==Jmp.Uploader.bucketUploadCounts[c.bucket].total&&c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI");var b=Jmp.Uploader.bucketParents[c.bucket];if(b)for(var h=b.length,k=0;k<h;k++)Jmp.Uploader.bucketUploadCounts[b[k]].cancelled=!0,Jmp.Uploader.bucketUploadCounts[b[k]].total--,Jmp.Uploader.bucketUploadSize[b[k]].total-=
c.size,Jmp.Uploader.bucketUploadCounts[b[k]].uploaded==Jmp.Uploader.bucketUploadCounts[b[k]].total&&c.bucket==Jmp.App.getView().data.id&&Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI")}Jmp.Speed.decrement_total(c.size);Jmp.Uploader.showCancelled(c.id);b=[];b[0]={parent:"0"==c.bucket||0==c.bucket?1==c.team_upload?"team":1==c.shared_upload?"shared":"root":c.bucket,id:c.id,code:c.id,type:"file",state:"cancelled"};
c.bucket_file_code&&(b[0].bucket_file_code=c.bucket_file_code,b[0].code=c.bucket_file_code);Socket.push("items_updated",b)},onQueueComplete:function(){Jmp.Uploader.queueComplete()}});else{if(ViewerPanel.is_mobile)return alert("Your browser does not support uploading"),!1;var a=[];flash_files=[];swfuOptions={flash_url:"/res/swf/swfupload_fp9.swf",flash9_url:"/res/swf/swfupload_fp9.swf",upload_url:"/public_files/upload",use_query_string:!1,button_placeholder_id:"upload_button_flash",button_width:"194",
button_height:"219",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:"transparent",file_dialog_complete_handler:function(c,b,h){$("#global-actions .cancel").trigger("click");Jmp.App.getView().type==Jmp.Handler.getRule("b")&&Jmp.Helpers.update_browser_title($(".bucket_name").text());if(1<=a.length){var k=Jmp.Uploader.getBucket(a);swfu.setPostParams({js_session:$.cookie("js_session")});swfu.setPostParams(Jmp.Helpers.get_secure_params());Jmp.Helpers.remove_bucket_code_from_cookie_if_exist(k);Jmp.Uploader.bucketUploads[k]=
Jmp.Uploader.bucketUploads[k]||{};Jmp.Uploader.bucketUploadCounts[k]=Jmp.Uploader.bucketUploadCounts[k]||{total:0,uploaded:0};Jmp.Uploader.bucketUploadSize[k]=Jmp.Uploader.bucketUploadSize[k]||{total:0,uploaded:0,uploading:0};Jmp.Speed.bootstrap();c=[];for(var l=0;l<a.length;l++)flash_files.push(a[l]),swfu.addFileParam(a[l].id,"bucket",k),a[l].bucket=k,Jmp.Speed.update_total(a[l].size),Jmp.Uploader.bucketUploads[k][a[l].id]=0,Jmp.Uploader.bucketUploadCounts[k].total++,Jmp.Uploader.bucketUploadSize[k].total+=
a[l].size,Jmp.Uploader.counts.total+=1,Jmp.Uploader.addToList(a[l],function(m){console.log(m);Jmp.Uploader.any_file_canceled=!0;Jmp.Uploader.counts.total--;"undefined"!=typeof Jmp.Uploader.bucketUploadCounts[k]&&(Jmp.Uploader.bucketUploadCounts[k].total--,Jmp.Uploader.bucketUploadCounts[k].cancelled=!0,Jmp.Uploader.bucketUploadSize[k].total-=m.size);Jmp.Speed.decrement_total(m.size);Jmp.Uploader.showCancelled(m.id);swfu.cancelUpload(m.id,!1);Jmp.Uploader.move_to_my_uploads_if_all_files_cancelled_in_bucket(m.bucket);
Jmp.Uploader.currentId==m.id&&swfu.startUpload()}),0==l&&Jmp.Uploader.start_tour("flash"),Jmp.Uploader.scroll_to_newly_added_files("flash"),c[l]={parent:"0"==a[l].bucket||0==a[l].bucket?1==a[l].team_upload?"team":1==a[l].shared_upload?"shared":"root":a[l].bucket,id:a[l].id,name:a[l].name,size:a[l].size,type:"file",state:"pending"};swfu.startUpload();Socket.push("items_updated",c)}for(l in Jmp.Uploader.invalidFiles)swfu.cancelUpload(Jmp.Uploader.invalidFiles[l],!1);a=[]},file_queued_handler:function(c){a.push(c);
return!1},file_queue_error_handler:function(c,b,h){},upload_start_handler:function(c){swfu.setUploadURL(WS_PREFIX+"/uploader/upload/"+c.post.bucket);Jmp.Uploader.addProgress(c.id)},upload_progress_handler:function(c,b,h){1>b&&(b=1);var k=Math.ceil(b/h*100);Jmp.Uploader.bucketUploadSize[c.post.bucket].uploading=Jmp.Uploader.bucketUploadSize[c.post.bucket].uploaded+b;Jmp.Handler.Buckets.update_bucket_progress(c.post.bucket);Jmp.Uploader.showProgress(c.id,k);Jmp.Speed.update_speed(h,b)},upload_error_handler:function(c,
b,h){switch(b){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:case SWFUpload.UPLOAD_ERROR.IO_ERROR:swfu.stopUpload();break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:swfu.stopUpload(),1>$("div.overlay").length&&Jmp.App.Lightbox.show({title:"File Uploading Failed",type:"error_message",body:"File uploading failed due to some reason, please try again."}),Jmp.Uploader.showFailed(c,h,function(k){checkConnection();1>$("div.overlay").length&&swfu.startUpload()})}},upload_success_handler:function(c,
b,h){b=$.parseJSON(b);h&&1==b.status?(Jmp.Uploader.bucketLastResponse[c.post.bucket]=b,Jmp.Uploader.showUploaded(c.id,b),delete Jmp.Uploader.bucketUploads[c.post.bucket][c.id],Jmp.Uploader.bucketUploadCounts[c.post.bucket].uploaded++,Jmp.Uploader.counts.uploading++,Jmp.Uploader.bucketUploadSize[c.post.bucket].uploaded+=c.size,Jmp.Uploader.bucketUploadCounts[c.post.bucket].uploaded==Jmp.Uploader.bucketUploadCounts[c.post.bucket].total&&($("li#"+c.post.bucket).find(".mask").addClass("hide"),Jmp.Uploader.updateBucketNameStatus(c.post.bucket),
h=currentView.type==Jmp.Handler.getRule("b")?"files_uploaded_to_existing_bucket":"files_uploaded_to_new_bucket",ActivityManager.save_activity({activity_type:h,files_count:Jmp.Uploader.bucketUploadCounts[c.post.bucket].total,bucket_code:c.post.bucket,file_code:b.data.code,file_name:b.data.n,file_ext:b.data.e}),Jmp.Uploader.bucketUploadComplete(c.post.bucket),flash_files=[])):(Jmp.Uploader.showFailed(c,b,function(k){checkConnection();1>$("#dialog").length&&js_uploader._uploadHandler._upload(js_uploader._uploadHandler._queue[0],
{})}),-1!=b.status&&-2!=b.status&&-3!=b.status||Jmp.Uploader.bucketUploadCounts[c.post.bucket].uploaded!=Jmp.Uploader.bucketUploadCounts[c.post.bucket].total||($("li#"+c.post.bucket).find(".mask").addClass("hide"),Jmp.Uploader.updateBucketNameStatus(c.post.bucket),"undefined"!=typeof Jmp.Uploader.bucketLastResponse[c.post.bucket]&&(b=Jmp.Uploader.bucketLastResponse[c.post.bucket],h=currentView.type==Jmp.Handler.getRule("b")?"files_uploaded_to_existing_bucket":"files_uploaded_to_new_bucket",ActivityManager.save_activity({activity_type:h,
files_count:Jmp.Uploader.bucketUploadCounts[c.post.bucket].total,bucket_code:c.post.bucket,file_code:b.data.code,file_name:b.data.n,file_ext:b.data.e})),Jmp.Uploader.bucketUploadComplete(c.post.bucket),flash_files=[]))},upload_complete_handler:function(c){var b=swfu.getStats();0==b.files_queued?Jmp.Uploader.queueComplete():0<b.files_queued&&c.filestatus==SWFUpload.FILE_STATUS.COMPLETE&&swfu.startUpload()},queue_complete_handler:function(c){Jmp.Uploader.queueComplete()}};swfu=new SWFUpload(swfuOptions);
try{$("#dd-area").length?flashOnHome():flashOnUploads()}catch(c){$("body").append('<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" WIDTH="0" HEIGHT="0" id="myMovieName"><PARAM NAME=movie VALUE="myFlashMovie.swf"><PARAM NAME=quality VALUE=high><PARAM NAME=bgcolor VALUE=#FFFFFF><EMBED href="/support/flash/ts/documents/myFlashMovie.swf" quality=high bgcolor=#FFFFFF WIDTH="0" HEIGHT="0" NAME="myMovieName" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>')}$("body").resize(function(){$("#dd-area").length?
positionFlash("dd-area","absolute"):positionFlash("drop-area","fixed")})}});var CFile=function(a){this.url=this.name=a.url;this.size=0};function positionFlash(a,c){a=$("#"+a);try{$("#upload_wrap_flash").css(a.offset()).css("position",c),width=a.outerWidth(),height=a.outerHeight()}catch(b){width=194,height=219}swfu.setButtonDimensions(width,height)}function flashOnHome(){positionFlash("dd-area","absolute");$("#dd-area div.msg").html("Click here to upload")}
function flashOnUploads(){positionFlash("drop-area","fixed");$("#drop-area span.msg").html("Click here to upload");$("#upload_button_main").html("<strong>Upload files</strong>");$("#upload_wrap_flash").mouseover(function(a){$("#upload_button_main").addClass("active")}).mouseout(function(a){$("#upload_button_main").removeClass("active")})}
var file_exts={jpg:0,jpeg:0,jpe:0,jp2:0,jpf:0,bmp:0,bmp2:0,bmp3:0,gif:0,png:0,png24:0,png32:0,png8:0,tiff:0,tif:0,ptif:0,tiff64:0,psd:0,xcf:0,ico:0,icon:0,svg:0,svgz:0,msvg:0,eps:0,eps2:0,eps3:0,epsf:0,ai:0,nef:0,cr2:0,crw:0,dcr:0,kdc:0,k25:0,x3f:0,arw:0,sr2:0,srf:0,mrw:0,erf:0,raf:0,pct:0,pict:0,dds:0,dng:0,pex:0,"3fr":0,ppm:0,orf:0,pef:0,aai:0,exr:0,hdr:0,heic:0,dcm:0,dicom:0,psb:0,pbm:0,iff:0,sct:0,tga:0,fit:0,fits:0,fts:0,mng:0,pgm:0,pnm:0,pam:0,sgi:0,xpm:0,xbm:0,bitmap:0,xwd:0,pcx:0,pcc:0,cur:0,
webp:0,mp3:1,mp2:1,wma:1,wav:1,ogg:1,aac:1,flac:1,au:1,aif:1,aiff:1,gsm:1,ra:1,mid:1,amr:1,m4a:1,"3ga":1,ea:1,ac3:1,mp4:2,mov:2,m4v:2,m2v:2,avi:2,wmv:2,rm:2,mpeg:2,mpg:2,ogv:2,"3gp":2,"3g2":2,vob:2,flv:2,webm:2,mkv:2,mts:2,m2ts:2,ttf:3,otf:3,woff:3,ttc:3,dfont:3,sfd:3,pages:4,docx:4,doc:4,rtf:4,odt:4,wpd:4,wps:4,jtd:4,jtt:4,pdf:4,uof:4,uot:4,sdw:4,sxw:4,djvu:4,tex:4,mml:4,epdf:4,ps:4,ps2:4,ps3:4,azw:5,azw4:5,chm:5,cbz:5,epub:5,fb2:5,htmlz:5,lit:5,lrf:5,lrs:5,mobi:5,pml:5,recipe:5,snb:5,tcr:5,cbr:5,
prc:5,tpz:5,pmlz:5,odp:6,otp:6,pot:6,pps:6,ppsx:6,ppt:6,pptx:6,sdd:6,sti:6,sx:6,uop:6,sxi:6,key:6,xlsx:7,xls:7,ods:7,csv:7,xlsm:7,xlsb:7,numbers:7,as:8,actionscript:8,sh:8,cf:8,cfm:8,cs:8,c:8,h:8,cc:8,cp:8,cpp:8,m:8,css:8,pas:8,diff:8,patch:8,erl:8,groovy:8,js:8,java:8,pl:8,perl:8,php:8,ps1:8,py:8,python:8,rb:8,ruby:8,scala:8,sql:8,vb:8,xhtml:8,xslt:8,html:8,htm:8,snippet:8,txt:9,text:9,md:9,markdown:9,xml:10,rss:10,atom:10,dxf:11,dwg:11},file_types="image audio video font document ebook presentation spreadsheet code text xml cad".split(" ");
function file_type(a){return file_types[file_exts[a]]}var CurrentProgress={bucket_code:""};(function(a){function c(){this.options={iur:!0,maxConnection:1,deniedExtensions:[],sizeLimit:262144E3,anonymous_bucket_size_limit:262144E3,totalSizeLimit:2147483648,bucketFileCountLimit:400,listContainer:function(){return Jmp.App.getView().type==Jmp.Handler.getRule("_empty")||Jmp.App.getView().type==Jmp.Handler.getRule("team")?"#buckets_container":"#files_container"},buckets_container:{selector:"#",name:"buckets_container"},fileTemplate:'<li id="" class="file grid group" data-id="" data-team="" data-name="" data-gridname="" data-extension="" data-type="" data-size="" data-status="" draggable="true"> \t\t\t\t\t\t\t<div class="direct_child_flex">\t\t\t\t\t\t\t<div class="thumbnail-wrapper"> \t\t\t\t\t\t\t\t<a href="#"> \t\t\t\t\t\t\t\t\t<div class="thumbnail clearfix"> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t<div class="thumb-overlay uploading js-thumb-overlay-uploading"> \t\t\t\t\t\t\t\t\t\t<div class="progress-wrapper ab-center js-progress-wrapper">Pending</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t<div class="thumb-overlay js-thumb-overlay-main"> \t\t\t\t\t\t\t\t\t<label class="custom-controls checkbox js-panel-ui-label"> \t\t\t\t\t\t\t\t\t\t<span class="icn-checkbox custom-control-indicator" data-id=""></span> \t\t\t\t\t\t\t\t\t</label> \t\t\t\t\t\t\t\t\t<div class="btn-group btn-cog-wheel pull-right"> \t\t\t\t\t\t\t\t\t\t<a class="icn-cog-wheel dropdown-toggle" data-toggle="dropdown" data-id=""></a> \t\t\t\t\t\t\t\t\t\t<ul class="dropdown-menu top-right js-dropdown-menu"> \t\t\t\t\t\t\t\t\t\t\t<span class="arrow icn-dd-top-arrow-panel"></span> \t\t\t\t\t\t\t\t\t\t\t<li><a data-link="" class="copy-link hide" data-url="" data-enabled="0">Copy Link</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" data-popup="1" class="email hide" data-url="">Share</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" class="edit_note hide" data-url="">Edit Note</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" data-popup="1" class="lock hide disabled blockUI" data-f="File">Lock &nbsp;<span class="utp">Plus</span></a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" class="self-destruct hide disabled blockUI" data-f="File">Self-Destruct &nbsp;<span class="utp">Plus</span></a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" data-popup="1" class="file-stats hide disabled blockUI" data-f="File">View Stats &nbsp;<span class="utp">Plus</span></a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" class="rename_from_popup hide disabled blockUI">Rename</a><li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" class="star_item_from_menu unset hide disabled blockUI">Favorite</a><li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" class="download hide disabled blockUI" data-link="">Download</a></li> \t\t\t\t\t\t\t\t\t\t\t<li class="sub_menu"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-id="" class="hide disabled blockUI" >Version History &nbsp;<span class="utp">Plus</span> &nbsp;</a> \t\t\t\t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href="javascript:;" data-id="" data-ext="" id="version_upload_link_free" class="hide disabled blockUI">Upload New Version</a></li> \t\t\t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" class="previous_versions_free hide disabled blockUI">View Version History</a></li> \t\t\t\t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t\t\t\t</li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" class="copy_move_item hide">Copy/Move</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" class="toggle-comments hidden">Disable Comments &nbsp;<span class="utp">Plus</span></a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a class="preview hide">Preview</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a data-id="" data-type="file" class="delete hide disabled blockUI">Delete</a></li> \t\t\t\t\t\t\t\t\t\t\t<li><a class="cancel-upload">Cancel Upload</a></li> \t\t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<div class="cancel-upload hide"></div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="clearfix name-area"> \t\t\t\t\t\t\t\t<a href="#" onclick="return false;" class="fake_ajax title thumb-title pull-left"></a> \t\t\t\t\t\t\t\t<span class="thumb_video_duration hide"></span> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="list-thumb-meta"> \t\t\t\t\t\t\t\t<div class="thumb-info pull-left"> \t\t\t\t\t\t\t\t\t<span class="size-num" data-item-size=""></span> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<div class="owner-info pull-left">me</div> \t\t\t\t\t\t\t\t<span class="time pull-left"></span> \t\t\t\t\t\t\t\t<div class="badge view-badge"></div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="thumb-meta"> \t\t\t\t\t\t\t\t<div class="thumb-info pull-left"> \t\t\t\t\t\t\t\t\t<span class="size-num" data-item-size=""></span> \t\t\t\t\t\t\t\t\t<span id="views">\u00b7 0 views</span> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="thumb-footer"> \t\t\t\t\t\t\t\t<span class="time footer_timer pull-left distxts">\u2014</span> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t</li>',
mobileFileTemplate:'<li id="" class="file grid" data-id="" data-name="" data-gridname="" data-extension="" data-type="" data-size="" data-status=""> \t\t\t\t\t\t\t<a href="/" class="icon cog-wheel hide" data-id=""></a> \t\t\t\t\t\t\t<div class="thumbnail-wrapper"> \t\t\t\t\t\t\t\t<a href="#" onclick="return false;" class="fake_ajax" data-id=""> \t\t\t\t\t\t\t\t\t<div class="thumbnail clearfix"> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t<div class="thumb-overlay uploading js-thumb-overlay-uploading"> \t\t\t\t\t\t\t\t\t\t<div class="progress-wrapper ab-center js-progress-wrapper">Pending</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</a> \t\t\t\t\t\t\t\t<div class="cancel-upload hide"></div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<a href="#" onclick="return false;" class="fake_ajax title thumb-title"></a> \t\t\t\t\t\t\t<div class="thumb-footer"> \t\t\t\t\t\t\t\t<span class="time pull-left distxts">\u2014</span> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="thumb-meta"> \t\t\t\t\t\t\t\t<div class="thumb-info pull-left"> \t\t\t\t\t\t\t\t\t<span class="size-num" data-item-size=""></span> \t\t\t\t\t\t\t\t\t<span id="views"><span class="dtsptr">\u00b7</span> 0 views</span> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="back-drop"></div> \t\t\t\t\t\t\t<ul class="dropdown-menu top-right js-dropdown-menu"> \t\t\t\t\t\t\t\t<span class="arrow icn-dd-top-arrow-panel"></span> \t\t\t\t\t\t\t\t<li><a data-link="" href="/" class="copy-link hide" data-url="" data-enabled="0">Copy Link</a></li> \t\t\t\t\t\t\t\t<li><a data-id="" href="/" data-type="file" data-popup="1" class="email hide" data-url="">Share</a></li> \t\t\t\t\t\t\t\t<li><a data-id="" class="download hide" data-link="" target="_blank">Download</a></li> \t\t\t\t\t\t\t\t<li><a href="/" class="preview hide">Preview</a></li> \t\t\t\t\t\t\t\t<li><a data-id="" href="/" data-type="file" class="delete hide">Delete</a></li> \t\t\t\t\t\t\t\t<li><a data-id="" href="/" class="cancel">Cancel</a></li> \t\t\t\t\t\t\t\t<li><a class="cancel-upload">Cancel Upload</a></li> \t\t\t\t\t\t\t</ul> \t\t\t\t\t</li>',
tour_items:'<div class="tour fn hide"> \t\t\t\t\t\t\t\t\t\t    <div class="arrow left"></div> \t\t\t\t\t\t\t\t\t\t    <div class="content"> \t\t\t\t\t\t\t\t\t\t      <p>A folder is automatically created and named based on the number and types of files you have uploaded.</p> \t\t\t\t\t\t\t\t\t\t    </div> \t\t\t\t\t\t\t\t\t\t    <div class="footer group"> \t\t\t\t\t\t\t\t\t\t      <div class="steps left">1/5</div> \t\t\t\t\t\t\t\t\t\t      <div class="action blue right" data-number="1">Next</div> \t\t\t\t\t\t\t\t\t\t    </div> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<div class="tour pi hide"> \t\t\t\t\t\t\t\t\t\t    <div class="arrow left"></div> \t\t\t\t\t\t\t\t\t\t    <div class="content"> \t\t\t\t\t\t\t\t\t\t      <p>You can rename the folder anytime to personalize it. To rename, click the pencil icon next to the folder name.</p> \t\t\t\t\t\t\t\t\t\t    </div> \t\t\t\t\t\t\t\t\t\t    <div class="footer group"> \t\t\t\t\t\t\t\t\t\t      <div class="steps left">2/5</div><div class=\'action blue right\' data-number=\'2\'>Next</div></div></div>',
messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",typeSizeError:"{file} is too large, maximum file size for this type is {typeSizeLimit}.",totalSizeError:"Files total size exceeds the limit, maximum upload size is {totalSizeLimit}.",emptyError:"{file} is empty, please select files again.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled.",inSufficientUserStorage:"",
bucketFileLimitError:"",bucketOwnerMismatch:""}};this.invalidFiles=[];this.queueSize=0;this.totalSize=parseInt($("#"+this.options.totalSizeInput).val());this.files_count=0;this.counts={uploading:0,total:0,uploaded:0,done:0,failed:0};this.type_counts={image:$("#uploaded_image_count").length?parseInt($("#uploaded_image_count").val()):0,audio:$("#uploaded_audio_count").length?parseInt($("#uploaded_audio_count").val()):0,video:$("#uploaded_video_count").length?parseInt($("#uploaded_video_count").val()):
0,font:$("#uploaded_font_count").length?parseInt($("#uploaded_font_count").val()):0,document:$("#uploaded_document_count").length?parseInt($("#uploaded_document_count").val()):0,ebook:$("#uploaded_ebook_count").length?parseInt($("#uploaded_ebook_count").val()):0,presentation:$("#uploaded_presentation_count").length?parseInt($("#uploaded_presentation_count").val()):0,code:$("#uploaded_code_count").length?parseInt($("#uploaded_code_count").val()):0,xmlformat:$("#uploaded_xmlformat_count").length?parseInt($("#uploaded_xmlformat_count").val()):
0,unknown:$("#uploaded_unknown_count").length?parseInt($("#uploaded_unknown_count").val()):0};this.bucketId=this.currentId=null;this.emailmsg=0;this.isXHR=c.isXHRSupported();this.emailQueue={};this.bucketUploads={};this.bucketUploadCounts={};this.bucketUploadSize={};this.bucketLastResponse={};this.any_file_canceled=!1;this.file_ids=[];this._preventLeaveInProgress()}$.extend(c.prototype,{getBucket:function(b,h){var k=Jmp.App.isTeamUpload(h);Jmp.App.isSharedUpload(h);h=Jmp.App.getView();h.type==Jmp.Handler.getRule("b")&&
"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner||h.type==Jmp.Handler.getRule("_empty")?this.bucketId=h.data.id:"Viewer"==Jmp.App.getView().type&&"undefined"!=typeof Jmp.Helpers.getUrlParam("b",window.location.href)?(b[0].replace=1,this.bucketId=Jmp.Helpers.getUrlParam("b",window.location.href),ViewerPanel.close_viewer()):1==b.length?(this.bucketId=0,path=k?WS_PREFIX+"/team":WS_PREFIX+"/personal",Jmp.App.changeAddress(path,!1)):this.bucketId=this.createNewBucket(b);return this.bucketId},
createNewBucket:function(b){var h=this,k,l={file_extensions:this._extract_file_extensions(b),files_count:this.files_count,first_file_name:b[0].name};$.browser.chrome&&"undefined"!=typeof b[0].webkitRelativePath&&""!=b[0].webkitRelativePath?l.bucket_name=b[0].webkitRelativePath.split("/")[0]:$.browser.chrome&&"undefined"!=typeof directories&&1==directories.length&&0==dropped_files_count&&(l.bucket_name=directories[0].name);$.ajax({url:WS_PREFIX+"/buckets/add",type:"post",data:Jmp.Helpers.get_secure_params(l),
async:!1,success:function(m){1==m.status?(k=h.bucketId=m.bucket_id,"undefined"!=typeof m.header&&($("body").attr("id",""),$("#home-wrap").length?$("#home-wrap").before(m.header):$("#main_container").before(m.header)),$("#home-wrap").length?$("#home-wrap").html(m.bucket_file_template):$("#main_container").html(m.bucket_file_template),Socket.push("items_updated",[{parent:"0"==m.bucket_code||0==m.bucket_code?"Team"==Jmp.App.getView().type?"team":"root":m.bucket_code,code:m.bucket_id,type:"folder",state:"created"}]),
Jmp.App.changeAddress("/b/"+m.bucket_id,!0),console.log("URL suffix add folder in Uploader"),ViewerPanel.dom_parser.url_suffix="/b/"+m.bucket_id,ViewerPanel.dom_parser.url_suffix_address_bar="?b="+m.bucket_id,Socket.connect(!1,function(){Socket.join_item(m.bucket_id,"folder")}),Jmp.Helpers.remove_splash(),Jmp.Helpers.display_sorting_options(),$("#main_container").find("li.thead").removeClass("hide"),h.isXHR||flashOnUploads()):window.location.href=BASEURL}});return k},updateBucketNameStatus:function(b){SlicedUpload.upgrade_to_upload_files=
!1;$.post(WS_PREFIX+"/buckets/update_bucket_name_status",Jmp.Helpers.get_secure_params({bucket_code:b,view_type:"buckets"}),function(h){Jmp.Helpers.is_bucket_id_in_url(h.bucket_code)&&(1<=$("div#header-inner .new_name").length?$("div#header-inner .new_name").parent().attr("title",h.bucket_name).attr("data-gridname",h.bucket_short_name):Jmp.Helpers.update_bucket_name(h.bucket_name,h.bucket_short_name));Socket.push("items_updated",[{parent:"0"==h.parent||0==h.parent?"Team"==Jmp.App.getView().type?"team":
"root":h.parent,code:h.bucket_code,type:"folder",state:"renamed",bucket_name:h.bucket_name,bucket_grid_name:h.bucket_short_name}]);"undefined"!=typeof h.bucket_template&&($("#"+h.bucket_code).replaceWith(h.bucket_template),Socket.push("items_updated",[{parent:"0"==h.parent||0==h.parent?"Team"==Jmp.App.getView().type?"team":"root":h.parent,code:h.bucket_code,name:h.bucket_name,type:"folder",state:"created"}]));Jmp.Helpers.update_storage_updates(h.storage_used,h.bucket_code)})},create_collection_or_validate_queue:function(b,
h,k,l){var m={};if("validateQueue"==l)m.file_extensions=this._extract_file_extensions(b),m.files_count=b.length,m.first_file_name=b[0].name,m.folders_count=0;else if("validateQueueForFolderHierarchy"==l){var n=0;for(p in b)n++,1==n&&(m.first_folder_name=p);m.folders_count=n;(n=h.files)?m.file_extensions=this._extract_file_extensions(n):(n=[],m.file_extensions="");m.files_count=n.length;m.first_file_name=0==n.length?"":n[0].name}1<=m.files_count&&delete m.first_folder_name;if(Jmp.App.getView().type==
Jmp.Handler.getRule("b")){n=Jmp.App.getView().data.id;var p=Jmp.Helpers.get_folder_items_count();var r=Jmp.Helpers.get_lazy_load_items_threshold();p>r&&(Jmp.Helpers.start_page_loading(),$.ajax({async:!1,url:"/b/"+n+"?page=all_items",success:function(q){Jmp.Helpers.stop_page_loading();1==q.status&&($(Jmp.ItemsScroller.get_container()).html(q.items),Jmp.Helpers.post_processing_after_items_fetched_from_lazy_loading(q.items),$("img.lazy").lazyload())},error:function(){Jmp.Helpers.stop_page_loading()}}));
p=$("#bucket_name_header");"Untitled"==p.text()&&"0"==p.attr("data-name-edited")?$.post(WS_PREFIX+"/buckets/update_bucket_name",Jmp.Helpers.get_secure_params({bucket_code:n,collection_name_info:m}),function(q){"1"==q.status&&Jmp.Helpers.update_bucket_name(q.bucket_name,q.bucket_short_name);Jmp.Helpers.display_loader_during_uploading_if_no_items_found();Jmp.Uploader[l](b,h,k)}):(Jmp.Helpers.display_loader_during_uploading_if_no_items_found(),Jmp.Uploader[l](b,h,k));Jmp.ItemsScroller.disable()}else 1==
m.files_count&&0==m.folders_count?(Jmp.Helpers.display_loader_during_uploading_if_no_items_found(),Jmp.Uploader[l](b,h,k),Jmp.Helpers.show_collection_sorting_options()):Jmp.Handler.Buckets.create_collection_or_folder(function(){if(1==m.folders_count&&0==m.files_count){var q=m.first_folder_name;b=b[q];h=h["__"+q+"__"]}Jmp.Helpers.display_loader_during_uploading_if_no_items_found();Jmp.Uploader[l](b,h,{parent_folder_newly_created:!0},k)},m),$("#cancel_folder_button_while_uploading").click(function(q){Jmp.App.Notifications.display_notification({type:"error",
message:"Upload cancelled"}).close_notification()})},validateQueue:function(b,h){var k=[];this.invalidFiles=[];for(var l=0;l<b.length;l++)k.push(b[l]);this.queueSize=0;this.files_count=k.length;prohibited_files={};total_storage=0;this._perform_validation_checks(k);this._display_errors_for_prohibited_files(prohibited_files);if(Jmp.Uploader.isXHR)Jmp.Uploader.removeFoldersAsync(k,h);else return k},validateQueueForFolderHierarchy:function(b,h,k){var l=this;prohibited_files={};total_storage=0;l._perform_validation_checks_recursively(b,
h);l._display_errors_for_prohibited_files(prohibited_files);"undefined"!=typeof FileReplacer&&h.files&&1<=h.files.length?(FileReplacer.mark_files_for_replacement(h.files),FileReplacer.can_replace_files()?FileReplacer.confirm_for_replaces(function(m){h.files=m;l._create_folder_hierarchy_server_side(b,h,k)}):l._create_folder_hierarchy_server_side(b,h,k)):l._create_folder_hierarchy_server_side(b,h,k)},_perform_validation_checks_recursively:function(b,h){for(var k=Object.keys(h),l=k.length,m=0;m<l;m++){var n=
k[m];"files"==n?this._perform_validation_checks(h.files):this._perform_validation_checks_recursively(b,h[n])}},_perform_validation_checks:function(b){for(var h=this._determine_storage_left(),k=0;k<b.length;k++){var l=b[k].name=Jmp.Helpers.encode_string(b[k].name),m="undefined"==typeof l?".123":Jmp.Helpers.getExtension(l),n=!1,p="unknown";"undefined"!=typeof file_exts[m]&&(p=file_type(m));var r=b[k].size;this.queueSize+=b[k].size;this.totalSize+=b[k].size;if(this._isDeniedExtension(m))"undefined"==
typeof prohibited_files.typeError&&(prohibited_files.typeError=[]),prohibited_files.typeError.push(b[k]),n=!0;else if(r&&this.options.sizeLimit&&r>this.options.sizeLimit)"undefined"==typeof prohibited_files.sizeError&&(prohibited_files.sizeError=[]),prohibited_files.sizeError.push(b[k]),n=!0;else if(r>h||r+total_storage>h)"undefined"==typeof prohibited_files.totalSizeError&&(prohibited_files.totalSizeError=[]),prohibited_files.totalSizeError.push(b[k]),n=!0;else if(".ds_store"==l.toLowerCase()||"thumbs.db"==
l.toLowerCase()||"desktop.ini"==l.toLowerCase()||"."==l[0])n=!0;b[k].file_type=p;n?(this.invalidFiles.push(b[k].id),b.splice(k,1),k--):total_storage+=r}},_determine_storage_left:function(){if("true"==Jmp.Uploader.options.iur)var b=ViewerPanel.is_mobile?Jmp.Uploader.options.sizeLimit:$(".storage-used .usage").attr("data-storage-left");else b=Jmp.Uploader.options.anonymous_bucket_size_limit-$(".icon-size").attr("data-size"),isNaN(b)&&(b=Jmp.Uploader.options.anonymous_bucket_size_limit);return b},_create_folder_hierarchy_server_side:function(b,
h,k){final_directories_for_server={};final_directories_for_server_props={};this._create_final_directories_for_server(b,h,final_directories_for_server,final_directories_for_server_props);var l={final_directories_for_server:JSON.stringify(final_directories_for_server),final_directories_for_server_props:JSON.stringify(final_directories_for_server_props)};l.parent=Jmp.App.getView().data.id;k&&k.parent_folder_newly_created&&(l.parent_folder_newly_created=!0);$.post(WS_PREFIX+"/buckets/add_hierarchy",Jmp.Helpers.get_secure_params(l),
function(m){var n=$(m.bucket_template);n.removeClass("orphan").removeClass("hide");Jmp.Helpers.remove_splash();for(var p=m.bucket_templates,r=p.length,q=[],u=0;u<r;u++)n=$(p[u]),n.addClass("replace"),n.find(".list-thumb-meta .time").text(""),n.find(".list-thumb-meta .view-badge").text(""),$("#files_container").append(n),q.push({parent:"0"==l.parent||0==l.parent?"Team"==Jmp.App.getView().type?"team":"root":l.parent,code:n.attr("data-id"),name:n.attr("data-name"),type:"folder",state:"created"});$("#files_container").find("li.thead").removeClass("hide");
Jmp.Helpers.display_sorting_options();Jmp.Helpers.update_storage_updates(m.storage_used,m.bucket_code);Socket.push("items_updated",q);final_directories_for_server=m.final_directories_for_server;final_directories_for_server_props=m.final_directories_for_server_props;m=(m=Jmp.App.getView().data.parents)?0==m.length?[Jmp.App.getView().data.id]:[Jmp.App.getView().data.id].concat(m):[Jmp.App.getView().data.id];console.log(final_directories_for_server);console.log(final_directories_for_server_props);Jmp.Uploader._assign_bucket_id_to_final_directories(b,
h,final_directories_for_server,final_directories_for_server_props,m.slice());console.log(b);console.log(h);js_uploader._options._onRequestForFolderDrop(b,h)})},_create_final_directories_for_server:function(b,h,k,l){for(var m=Object.keys(b),n=m.length,p=0;p<n;p++){var r=m[p],q="__"+r+"__",u=b[r],v=h[q];"object"==$.type(u)&&(k[r]={},l[q]={},l[q].files=v.files.length,$.extend(k[r],u),delete k[r].directory_files,this._create_final_directories_for_server(u,v,k[r],l[q]))}},_display_errors_for_prohibited_files:function(b){for(var h in b)this._error(h,
b[h])},_assign_bucket_id_to_final_directories:function(b,h,k,l,m){for(var n=Object.keys(b),p=n.length,r=0;r<p;r++){var q=n[r],u="__"+q+"__";if("object"==$.type(b[q])){h[u].bucket_id=l[u].bucket_id;h[u].parents=m;var v=[h[u].bucket_id].concat(m);this._assign_bucket_id_to_final_directories(b[q],h[u],k[q],l[u],v.slice())}}},removeFoldersAsync:function(b,h){var k,l=[];if("undefined"==typeof FileReader)return Jmp.Uploader.sendFilesToUpload(b,h),!1;for(k=0;k<b.length;k++){var m=b[k];"undefined"==typeof file_type(Jmp.Helpers.getExtension(m.name))&&
20480>=m.size&&(l[k]=m)}0==l.length&&Jmp.Uploader.sendFilesToUpload(b,h);k=0;for(var n in l)k++;k={suspecious_files_count:k,suspecious_files_read_count:0};m={};for(n in l)Jmp.Uploader._setupFileReader(l,b,m,k,n,h)},_setupFileReader:function(b,h,k,l,m,n){b=b[m];var p=new FileReader;p.onload=function(){l.suspecious_files_read_count++;l.suspecious_files_count==l.suspecious_files_read_count&&Jmp.Uploader.removeSuspeciousFiles(h,k,n)};p.onerror=function(r){l.suspecious_files_read_count++;k[m]=!0;l.suspecious_files_count==
l.suspecious_files_read_count&&Jmp.Uploader.removeSuspeciousFiles(h,k,n)};"undefined"!=typeof p.readAsBinaryString?p.readAsBinaryString(b):p.readAsArrayBuffer(b)},removeSuspeciousFiles:function(b,h,k){var l=[];if(1==$.isEmptyObject(h))return Jmp.Uploader.sendFilesToUpload(b,k),!1;for(var m=0;m<b.length;m++)1!=h[m]&&l.push(b[m]);Object.keys(h).length&&Jmp.Helpers.show_folder_upload_not_supported();Jmp.Uploader.sendFilesToUpload(l,k)},sendFilesToUpload:function(b,h){"undefined"!=typeof FileReplacer?
(FileReplacer.mark_files_for_replacement(b),FileReplacer.can_replace_files()?FileReplacer.confirm_for_replaces(function(k){Jmp.Uploader.sendFinalFilesToUpload(k,h)}):Jmp.Uploader.sendFinalFilesToUpload(b,h)):Jmp.Uploader.sendFinalFilesToUpload(b,h)},sendFinalFilesToUpload:function(b,h){js_uploader._options._onRequest(b,h)},showBucketUploads:function(b){if("object"==typeof this.bucketUploads[b]){var h=0,k;for(k in this.bucketUploads[b])if(null==js_uploader._uploadHandler._files[k]||Jmp.App.getView().type==
Jmp.Handler.getRule("_empty")&&0<js_uploader._uploadHandler._files[k].team_upload||Jmp.App.getView().type==Jmp.Handler.getRule("team")&&0==js_uploader._uploadHandler._files[k].team_upload)h++;else{h++;if(c.isXHRSupported()){var l=js_uploader._uploadHandler._files[k];Jmp.Uploader.addToList(l,function(m){js_uploader.cancelUpload(m);if(m.bucket_file_code)if(m.replace)$("#"+m.bucket_file_code+"-replace").attr("id",m.bucket_file_code).removeClass("hide").addClass("grid"),Jmp.Helpers.update_viewer(m.bucket_file_code);
else{var n=ViewerPanel.viewers_collection.fetch_by_id(m.bucket_file_code);n&&(n.progress=0,ViewerPanel.uploading.update_progress(n),Jmp.Helpers.delete_viewer(m.bucket_file_code));js_uploader._options._sort_uploading_files()}})}else l=swfu.getFile(k),Jmp.Uploader.addToList(l,function(m){swfu.cancelUpload(m.id,!1)});Jmp.App.UploadProgress.show()}0==h&&delete this.bucketUploads[b]}},addToList:function(b,h){if(!b)return!1;var k="exe msi msp apk jar bin com bat cmd vb vbs ws wsf scf scr pif img dmg".split(" "),
l=Jmp.Helpers.getExtension(b.name);if(("undefined"==typeof PLANID||2>PLANID||"undefined"!=typeof IS_TRIAL&&1==IS_TRIAL)&&-1<k.indexOf(l))return js_uploader.cancelUpload(b),Jmp.App.Lightbox.show({type:"upload_executable_popup",is_trial:"undefined"!=typeof IS_TRIAL?IS_TRIAL:0}),Socket.close(),!1;k=Jmp.Uploader._addToList(b);k.find(".cancel-upload").click(function(m){"undefined"!=typeof Jmp.Uploader.bucketUploadCounts[b.bucket]?h(b):Jmp.Uploader.showCancelled(b.id);m.preventDefault();return!1});b instanceof
File?k.attr("data-file-url",""):k.attr("data-file-url",b.url);"undefined"!=typeof PLANID&&1<PLANID&&(k.find(".utp").remove(),k.find(".previous_versions_free").addClass("previous_versions").removeClass("previous_versions_free").attr("href"),k.find("#version_upload_link_free").attr("id","version_upload_link"));$("#file-details .total-size").html("Total size "+Jmp.Helpers.formatSize(this.totalSize));Jmp.Uploader.currentId==b.id&&Jmp.Uploader.addProgressBar(b.id);"true"!=Jmp.Uploader.options.iur&&k.find("#views").hide();
b.bucket_file_code&&(Jmp.Helpers.post_processing_after_creating_information_for_uploading_file(b),b.replace&&(ViewerPanel.viewers_collection.fetch_by_id(b.bucket_file_code)&&Jmp.Helpers.delete_viewer(b.bucket_file_code),Jmp.Helpers.add_viewer(b.id)));this._showUploadCount()},_addToList:function(b,h,k){var l=$(ViewerPanel.is_mobile?this.options.mobileFileTemplate:this.options.fileTemplate);if(!Jmp.Helpers.is_global_comments_enabled()){var m=l.find(".btn-cog-wheel .toggle-comments"),n=m.html();m.html(n.replace(/Disable/,
"Enable"))}"undefined"!=typeof h&&(l.find(".thumb-overlay").find(".js-panel-ui-label").addClass("hide"),l.find(".thumb-overlay").find(".btn-cog-wheel").addClass("hide"),"undefined"!=typeof is_valid_owner&&"false"==is_valid_owner&&l.find("#views").remove());l.attr("id",b.id);l.attr("data-team",b.team_upload);l.attr("data-shared",b.shared_upload);m=Jmp.Helpers.encode_string(Jmp.Helpers.formatFileName(b.name,17));h=Jmp.Helpers.formatSize(b.size);n=Jmp.Helpers.getExtension(b.name);var p="unknown",r="icn-thumb-file";
n&&"undefined"!=typeof file_exts[n]&&(p=file_type(n),r="icn-thumb-"+p+" icn-thumb-"+n);var q="unknown"==p?"e-unknown e-"+n:"e-"+n;Jmp.App.getView().type==Jmp.Handler.getRule("team")||$("#team_uploads").parent().hasClass("active")?l.find(".thumb-title").attr("title",b.name).html(b.name).css("max-width","100%"):l.find(".thumb-title").attr("title",b.name).html(b.name).css("max-width","100");file_name="undefined"==typeof b.name?"":b.name.replace("."+n,"");l.attr("data-name",Jmp.Helpers.decode_string(file_name)).attr("data-gridname",
m).attr("data-extension",n).attr("data-type",p).attr("data-thumb_class",q).attr("data-size",b.size);$(this.options.listContainer()).hasClass("view-list")&&l.find(".thumbnail").html('<img src="/res/images/spacer.gif" class="sicn '+r+'" >').addClass("open-view");b.replace?(m=(new Date).getTime(),l.addClass("replace"),l.attr("data-modified-date",m)):(m=(new Date).getTime(),l.attr("data-date",m),l.attr("data-modified-date",m),l.find(".thumb-footer .time").html("Just now"));l.find(".size-num").text(h).attr("data-item-size",
b.size);if(Jmp.App.getView().type==Jmp.Handler.getRule("team")||$("#team_uploads").parent().hasClass("active")||$("#shared_uploads").parent().hasClass("active"))"undefined"==typeof k?(l.find("#views").html(' <span class="seprtr">\u00b7</span> Me'),l.find(".list-thumb-meta").prepend('<div class="owner-name pull-left" title="Me">'+$(".user-info.logged-in").find("a.dropdown-toggle").html()+"</div>")):(l.find("#views").html("&nbsp;"),l.find(".list-thumb-meta").prepend('<div class="owner-name pull-left">&nbsp;</div>'));
Jmp.Helpers.remove_splash();$(this.options.listContainer()).find("li.thead").removeClass("hide");if(1<=$(Jmp.Helpers.get_container()+" #"+b.id).length)$(Jmp.Helpers.get_container()+" #"+b.id).replaceWith(l);else if(b.replace)k=$(Jmp.Helpers.get_container()+" #"+b.bucket_file_code),k.attr("id",b.bucket_file_code+"-replace").addClass("hide"),k.length?(l.attr("data-date",k.attr("data-date")),l.find(".thumb-footer .time").html(k.find(".time").html()),l.find(".copy-link").attr("data-url",k.find(".copy-link").attr("data-url")),
b=k[0].outerHTML,k.replaceWith(l),$(this.options.listContainer()).append(b)):(m=(new Date).getTime(),l.attr("data-date",m),l.attr("data-modified-date",m),l.find(".thumb-footer .time").html("Just now"),$(this.options.listContainer()).append(l));else if(!b.replace&&b.bucket==Jmp.App.getView().data.id||!b.replace&&b.bucket==Jmp.App.getView().data.child_id)0<$(this.options.listContainer()+" > li.thead").length?($(this.options.listContainer()+" > li:nth-child(1)").after(l),Jmp.Helpers.set_thumbs_width_on_resize()):
($(this.options.listContainer()).prepend(l),$(this.options.listContainer()).prepend('<li class="thead" style="background: #fff;">\t\t\t\t\t\t<div class="direct_child_flex">\t\t\t\t\t\t\t<div class="clearfix name-area"> <a class="thumb-title ajax " address="true"> Name </a> </div>\t\t\t\t\t\t\t\t<div class="list-thumb-meta">\t\t\t\t\t\t\t\t<div class="owner-info "> <a class="thumb-title"> Owner </a> </div>\t\t\t\t\t\t\t\t<div class="thumb-info " style="min-width: 100px;"> <a class="thumb-title"> Size </a> </div>\t\t\t\t\t\t\t\t<span class="time "> <a class="thumb-title"> Date </a> </span>\t\t\t\t\t\t\t\t<span class="time viewthumb" style="min-width: 30px;"> <a class="thumb-title"> Views </a> </span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</li>'));
Jmp.Helpers.display_sorting_options();return l},addProgress:function(b){1>$("#"+b).find(".js-progress-bar").length&&(Jmp.Uploader.addProgressBar(b),this.currentId=b,this._showUploadCount())},addProgressBar:function(b){$("#"+b).find(".js-progress-wrapper").html('<div class="progress clearfix"><div class="progress-bar progress-bar-storage js-progress-bar" style="width:0%;"></div></div>')},showProgress:function(b,h){var k=$("#"+b),l=k.find(".js-progress-bar");100>h?l.css("width",h+"%"):100<=h&&(0==parseInt(l.css("width"))?
(l.css("width","100%"),setTimeout(function(){0==k.find("a.retry").length&&l.parent().parent().html("Finishing...")},1E3)):l.parent().parent().html("Finishing..."),SlicedUpload.isAllowed()?k.find(".cancel-upload").addClass("hide"):k.find(".dropdown-menu").addClass("hide"))},showProgressBar:function(b){$("#"+b).find(".js-progress-bar").show()},showUploaded:function(b,h){b=$("#"+b);b.attr("data-id",h.data.code);"comments_status_disable"in h.data?b.attr("data-comment-status","disabled"):b.attr("data-comment-status",
"enabled");Jmp.App.getView().type==Jmp.Handler.getRule("b")&&"true"==Jmp.App.in_edit_mode&&b.find(".checkbox").show();b.find(".cancel-upload").remove();b.find(".dropdown-menu").removeClass("hide");"undefined"!=typeof h.storage_used&&Jmp.Helpers.update_storage_updates(h.storage_used,h.data.share);"undefined"!=typeof is_valid_owner&&"true"==is_valid_owner?(b.find(".name").html("<a href='' class='ajax'></a> <i class='edit icons-edit hide' data-id='' data-type='file' data-ext=''></i>"),b.find(".list-thumb-meta .view-badge").text("0")):
b.find(".name").html("<a href='' class='ajax'></a>");var k="/"+VIEWER_SUBDIR+"/"+h.data.code+"?b="+h.data.share;b.attr("id",h.data.code);b.find("[data-id]").attr("data-id",h.data.code).removeClass("hide disabled blockUI");b.attr("data-date",h.data.date);b.find(".list-thumb-meta .time").text("Just now");h.data.modified_date?(b.attr("data-modified-date",h.data.modified_date),b.find(".time").text(h.data.modified_date_relative)):b.attr("data-modified-date",h.data.date);b.find("div.cancel").remove();b.find(".js-thumb-overlay-uploading").remove();
"0"==h.data.share&&b.find(".js-thumb-overlay-main").addClass("trigger_temp_ajax");if(""==h.data.t_src_2x||"image"!=b.data("type")&&"video"!=b.data("type")&&"embed"!=b.attr("data-type"))b.find(".thumbnail").html('<img src="/res/images/spacer.gif" class="sicn icn-thumb-'+h.data.t_icn_cls+'" >');else{b.find(".thumbnail").html('<img src="'+h.data.t_src_2x+'" />').removeClass("open-view");for(var l=h.data.data_tags.split("|"),m=0;m<l.length-1;m++)if(""!=l[m]){var n=l[m].split("=");b.find(".thumbnail img").attr(n[0],
n[1].replace(/"/g,""))}"video"==b.data("type")&&b.find(".thumbnail").addClass("icn-thumb-play").parent().addClass("ajax").attr("href",k);h.data.file_url&&""!=h.data.file_url&&b.find(".thumbnail").addClass("icn-link-upload")}b.find(".thumbnail-wrapper a:first").attr("href",k).addClass("single");b.find(".fake_ajax").removeClass("fake_ajax").removeAttr("onclick").addClass("temp_ajax").attr("href",k);b.find(".thumb-title").html(h.data.sn).attr("title",h.data.fn).attr("href",k).after('<a class="icn-edit pull-right" href="/"></a>').attr("data-id",
h.data.code);b.attr("data-name",Jmp.Helpers.decode_string(h.data.n)).attr("data-gridname",Jmp.Helpers.decode_string(h.data.sn)).attr("data-extension",h.data.e);b.find(".js-dropdown-menu .copy-link").removeClass("hide").attr("data-link",""+VIEWER_SUBDIR+"/"+h.data.code).attr("data-url",h.data.short_code);b.find(".js-dropdown-menu .download").attr("data-link",h.data.download_url);ViewerPanel.is_mobile&&(b.find(".thumbnail-wrapper a").attr("href",k).removeClass("temp_ajax").addClass("ajax"),b.find(".cog-wheel").removeClass("hide"),
b.find(".download").attr("href",h.data.download_url));b.find(".previous_versions").attr("href",WS_PREFIX+"/history/"+h.data.code);k="";h.data.file_url&&(k=h.data.file_url);b.attr("data-file-url",k);h.data.file_url&&""!=h.data.file_url&&(k="<a href='"+h.data.file_url+"' data-link='"+h.data.file_url+"' class='view_original' target='_blank' rel='nofollow'>Visit Link</a>",b.find(".js-dropdown-menu .download").replaceWith(k),b.attr("data-file-mime-type",h.data.file_mime_type),b.attr("data-file-embed-url",
h.data.file_embed_url));k=h.data.e;b.find("[data-ext]").attr("data-ext",k);"txt"==k||"md"==k||"snippet"==k?b.find(".edit_note").text("Edit "+Jmp.Helpers.capitalize_word(CustomNote.type_for_extension(k))).removeClass("hide"):b.find(".edit_note").addClass("hide");h.data.comments_status_disable&&b.find(".js-dropdown-menu").append("<li><a class='comments_status_disable hide'></a></li>");this.counts.uploaded++},_loadThumbInViewer:function(b,h){console.log("loading thumb in viewer");if(("image"==b||"video"==
b)&&$("#thumbs").length){var k=$('<li class="slide_img ldng '+h.data.code+'"></li>');k.attr("data-filename",h.data.fn).attr("data-fullsrc",h.data.p_src).attr("data-filehash",h.data.hash).attr("data-bucket",h.data.share).attr("data-filetype",b).attr("data-fileurl","/"+VIEWER_SUBDIR+"/"+h.data.code+"?b="+h.data.share).attr("data-status","1").attr("data-width",h.data.w).attr("data-height",h.data.h);k.html('<img src="'+h.data.vt_src+'" class="'+h.data.vt_cls+'" style="'+h.data.vt_sty+'" width="100" height="70" />');
$("#thumbs > ul.slide_imgs").append(k);$("#viewer_right_arrow").removeClass("inactive").addClass("active");"none"!=$("#viewer_left_arrow").css("display")&&$("#viewer_right_arrow").fadeIn(100);$("#viewer").length&&"none"==$("#playlist").css("display")&&2==$("ul.slide_imgs li").length&&($("#playlist").show(),$("a.show-playlist").show().addClass("active"));b=112*parseInt($("ul.slide_imgs li").length);h=parseInt($("#thumbs").width())-60;k=b/h;var l=parseInt($("ul.slide_imgs li").index($("ul.slide_imgs li.active")));
l=Math.floor(l/(h/112));b>h&&k>l+1&&$("#thumbs .next").show()}},showFailed:function(b,h,k){if(1>$("#"+b.id).find(".retry").length){if("undefined"!=typeof Jmp.Uploader.bucketUploadCounts[b.bucket]){Jmp.Uploader.bucketUploadCounts[b.bucket].total--;var l=Jmp.Uploader.bucketParents[b.bucket];if(l)for(var m=l.length,n=0;n<m;n++)Jmp.Uploader.bucketUploadCounts[l[n]].total--}l=$("#"+b.id);l.find(".cancel-upload").removeClass("hide");l.find(".js-progress-wrapper").html('<a class="retry" href="#">Retry</a> | <a class="cancel_upload" href="#">Cancel</a>');
l.find(".js-thumb-overlay-main").addClass("invisible");l.find(".retry").click(function(p){k(b);return!1});l.find(".cancel_upload").click(function(p){Socket.push("items_updated",[{parent:"0"==b.bucket||0==b.bucket?"Team"==Jmp.App.getView().type?"team":"root":b.bucket,id:b.id,code:b.id,type:"file",state:"cancelled"}]);Jmp.Uploader.showCancelled(b.id);return!1})}Jmp.Uploader.counts.failed+=1;2!=h.status&&(-1==h.status?this._remove_large_files(h.storage_left):-2==h.status?this._remove_files_from_bucket(h.bucket_code):
-3==h.status?this._remove_file_greater_than_file_size_limit(h.bucket_code):-4==h.status&&this._create_new_bucket_on_bucket_owner_mismatch())},showCancelled:function(b){var h=$("#"+b);h.find(".js-progress-wrapper").html("Cancelled");h.fadeOut(2E3,function(){h.remove()})},remove:function(b,h){var k=$("#"+b);if(1==k.data("status")){--this.counts.uploaded;--this.type_counts[k.data("type")];var l=0;$.each(this.type_counts,function(n,p){l+=p});var m=c.getIndex(l,this.type_counts);""!=m?(m=getTypeCount(m,
l),$("#files_count").html(m),$("#file-details .number-of-files").html(m)):($("#files_count").html(l+" "+(1==l?"file":"files")),$("#file-details .number-of-files").html(l+" "+(1==l?"file":"files")));this.totalSize-=parseInt(k.data("size"));$("#file-details .total-size").html("Total size "+formatSize(this.totalSize))}$("#"+b).fadeOut(2E3,function(){$(this).remove()});h&&0==this.counts.uploaded&&(window.location.href=BASEURL)},bucketUploadComplete:function(b){if("undefined"!=typeof Jmp.Uploader.emailQueue&&
0!=Object.keys(Jmp.Uploader.emailQueue).length&&(this.emailmsg=1,""===b&&(b=Object.keys(Jmp.Uploader.emailQueue)[0]),"undefined"!=typeof Jmp.Uploader.emailQueue[b])){var h='<div id="temp_email_form" style="display:none;"><form action="" method="post" id="popup_email_form" autocomplete="off"> \t\t\t\t\t\t\t\t<input type="email" name="email_to" id="email_to" value=""> \t\t\t\t\t\t\t\t<input type="email" name="email_data" id="email_data" value="'+Jmp.Uploader.emailQueue[b].et+'"> \t\t\t\t\t\t\t\t<textarea class="form-control input-slim" name="email_message" id="email_message">'+
Jmp.Uploader.emailQueue[b].msg+'</textarea> \t\t\t\t\t\t\t\t<input type="hidden" name="item_type" id="item_type" value="bucket"><input type="hidden" name="item_id" id="item_id" value="'+b+'"> \t\t\t\t\t\t\t\t<input type="checkbox" name="expire_after" id="expire_after" value="1" '+(1==Jmp.Uploader.emailQueue[b].ea?'checked="checked"':"")+'> \t\t\t\t\t\t\t\t<input class="form-control modal-share-days" id="expire_after_number" name="expire_after_number" value="'+Jmp.Uploader.emailQueue[b].ean+'" type="text"> \t\t\t\t\t\t\t\t<input type="hidden" name="expire_after_type" id="expire_after_type" value="'+
Jmp.Uploader.emailQueue[b].eat+'"> \t\t\t\t\t\t\t\t<input type="checkbox" name="disable_download" id="disable_download" value="1" '+(1==Jmp.Uploader.emailQueue[b].dd?'checked="checked"':"")+'> \t\t\t\t\t\t\t\t<input type="text" class="distxts hasDatepicker" name="email_date" id="email_date" value="'+Jmp.Uploader.emailQueue[b].ed+'" style="width:60px;" readonly=""> \t\t\t\t\t\t\t</form> \t\t\t\t\t\t\t<div class="modal-footer clearfix"><button class="btn btn-submit pull-right btn-blue send_mail" id="send_email">Send</button></div></div>';
$("body").append(h);delete Jmp.Uploader.emailQueue[b];setTimeout(function(){$("#popup_email_form ~ div.modal-footer > button.send_mail").trigger("click")},2E3)}},queueComplete:function(){Jmp.Uploader.mark_buckets_as_deleted_if_no_file_is_uploaded_and_are_orphan(Jmp.Uploader.bucketUploadCounts);this.counts.uploading=this.counts.total=0;this._clear_all_buckets_on_socket_server();setTimeout(function(){Jmp.Helpers.display_empty_message_if_no_item_found();Jmp.Helpers.hide_sorting_options();Jmp.Helpers.hide_collection_sorting_options()},
2500);Jmp.Uploader.bucketUploadComplete("");Jmp.Helpers.get_folder_items_count()<=Jmp.Helpers.get_lazy_load_items_threshold()&&$(".rearrange_sort_order").removeClass("disabled blockUI");$("#sort_menu").find(".sort_by").removeClass("disabled blockUI");$("#files_upload_status").hide().html("");if(0==this.counts.uploaded&&0==$("#folder-meta .folders").attr("data-files-count")&&"orphan"==$("#folder-meta .folders").attr("data-folder-status")){Jmp.Speed.stop();var b="";b=Jmp.Uploader.any_file_canceled?
"Upload cancelled":"Upload failed";Jmp.App.Notifications.display_notification({type:"error",message:b}).close_notification();Jmp.App.UploadProgress.hide();Jmp.Uploader.bucketUploads={};Jmp.Uploader.bucketUploadCounts={};Jmp.Uploader.bucketUploadSize={};Jmp.Uploader.file_ids=[];this.counts.failed=0;entries=[];directories=[];final_directories={};dropped_files_count=directories_finished=directories_count=0;Jmp.Uploader.bucketUploadActivities={};Jmp.Uploader.any_file_canceled&&(Jmp.Uploader.any_file_canceled=
!1,"true"==Jmp.Uploader.options.iur?Jmp.App.changeAddress(WS_PREFIX+"/personal"):setTimeout(function(){window.location=WS_PREFIX+"/personal"},2E3));return!1}if(0==this.counts.uploaded)return Jmp.Speed.stop(),b="",b=Jmp.Uploader.any_file_canceled?"Upload cancelled":"Upload failed",Jmp.App.Notifications.display_notification({type:"error",message:b}).close_notification(),Jmp.App.UploadProgress.hide(),Jmp.Uploader.bucketUploads={},Jmp.Uploader.bucketUploadCounts={},Jmp.Uploader.bucketUploadSize={},Jmp.Uploader.file_ids=
[],this.counts.failed=0,entries=[],directories=[],final_directories={},dropped_files_count=directories_finished=directories_count=0,Jmp.Uploader.bucketUploadActivities={},Jmp.Uploader.any_file_canceled=!1;b="Upload complete";1<=Jmp.Uploader.counts.failed&&(b+=", "+Jmp.Helpers.get_string_based_on_count(Jmp.Uploader.counts.failed,"file","files",!0)+" failed to upload");Jmp.Uploader.bucketUploads={};Jmp.Uploader.bucketUploadCounts={};Jmp.Uploader.bucketUploadSize={};Jmp.Uploader.file_ids=[];this.counts.uploaded=
0;this.counts.failed=0;this.counts.done=0;entries=[];directories=[];final_directories={};dropped_files_count=directories_finished=directories_count=0;Jmp.Uploader.bucketUploadActivities={};var h=jQuery("#new_files_container");jQuery("#files").append(h.find("ul").html());h.find("ul").html("");h.hide();Jmp.App.Notifications.display_notification({type:"upload_completed",message:b}).close_notification();Jmp.App.UploadProgress.hide();Jmp.Speed.stop();Jmp.Uploader.show_first_upload_complete_popup&&($("body").append(Jmp.Uploader.show_first_upload_complete_popup_html),
delete Jmp.Uploader.show_first_upload_complete_popup,delete Jmp.Uploader.show_first_upload_complete_popup_html)},_clear_all_buckets_on_socket_server:function(){var b=[],h;for(h in Jmp.Uploader.bucketUploads)b.push(h)},_showUploadCount:function(){$("#files_upload_status").html("Uploading "+this.counts.uploading+" of "+this.counts.total+" Files ...").show()},_isDeniedExtension:function(b){var h=this.options.deniedExtensions;if(!h.length)return!1;for(var k=0;k<h.length;k++)if(h[k].toLowerCase()==b)return!0;
return!1},_preventLeaveInProgress:function(){var b=this;$(window).bind("beforeunload",function(h){if(b.counts.total)return h.originalEvent.returnValue=b.onLeaveMessage,b.options.messages.onLeave})},_preventBackNavigation:function(){var b=this;$("#home_page_link").click(function(h){if(b.counts.uploading)if(confirm("Are you sure you want to cancel uploads?"))b.isXHR?($("#"+b.currentId).find(".cancel").trigger("click"),js_uploader.cancelAll()):swfu.cancelQueue(),b.counts.uploading=0;else return h.preventDefault(),
!1})},_error:function(b,h){function k(m,n){l=l.replace(m,n)}var l=this.options.messages[b];k("{sizeLimit}",Jmp.Helpers.formatSize(this.options.sizeLimit));k("{totalSizeLimit}",Jmp.Helpers.formatSize(this.options.totalSizeLimit));"totalSizeError"==b&&(Jmp.App.Lightbox.show({type:"insufficient_user_storage",title:"You're out of storage space",items:h,trigger_another_lightbox:!0}),$("div.modal-insufficient").addClass("hide"));"bucketFileLimitError"==b&&Jmp.App.Lightbox.show({type:"bucket_file_limit_reached",
title:"Folder is full",items:h});"sizeError"!=b&&"typeSizeLimit"!=b||Jmp.App.Lightbox.show({type:"file_size_error",items:h},function(){$.get("/uploader/error_download_popup/"+encodeURI(h[0].name),function(m){m.show_first_upload_complete_popup&&$("body").append(m.show_first_upload_complete_popup_html)})});"bucketOwnerMismatch"==b&&Jmp.App.Lightbox.show({type:"bucket_owner_mismatch",items:h})},_update_bucket_files_count:function(b){$.post(WS_PREFIX+"/buckets/update_bucket_files_count",Jmp.Helpers.get_secure_params(b),
function(h){"undefined"!=typeof h.name&&Jmp.Helpers.update_bucket_name(h.name)})},_extract_file_extensions:function(b){for(var h=[],k=0;k<b.length;k++){var l=Jmp.Helpers.extract_file_extension(b[k].name);h.push(l)}return h.join()},_remove_large_files:function(b){for(var h=0,k=js_uploader._uploadHandler._files,l=[],m=0,n=0;n<k.length;n++)k[n]&&(k[n].size>b||h+k[n].size>b?(Jmp.Uploader.bucketUploadCounts[k[n].bucket].total--,Jmp.Uploader.bucketUploadSize[k[n].bucket].total-=k[n].size,m=k[n].size,l.push(k[n]),
$("#"+k[n].id).remove(),k[n]=null):h+=k[n].size);1<=l.length&&(Jmp.Speed.decrement_total(m),this._error("totalSizeError",l));Jmp.Uploader.counts.failed=l.length},_remove_files_from_bucket:function(b){for(var h=js_uploader._uploadHandler._files,k=[],l=0,m=0;m<h.length;m++)h[m]&&h[m].bucket==b&&(Jmp.Uploader.bucketUploadCounts[h[m].bucket].total--,Jmp.Uploader.bucketUploadSize[h[m].bucket].total-=h[m].size,l=h[m].size,k.push(h[m]),$("#"+h[m].id).remove(),h[m]=null);1<=k.length&&(Jmp.Speed.decrement_total(l),
this._error("bucketFileLimitError",k));Jmp.Uploader.counts.failed=k.length},_remove_file_greater_than_file_size_limit:function(b){for(var h=js_uploader._uploadHandler._files,k=[],l=0,m=0;m<h.length;m++)h[m]&&h[m].bucket==b&&(Jmp.Uploader.bucketUploadCounts[h[m].bucket].total--,Jmp.Uploader.bucketUploadSize[h[m].bucket].total-=h[m].size,l=h[m].size,k.push(h[m]),$("#"+h[m].id).remove(),h[m]=null);1<=k.length&&(Jmp.Speed.decrement_total(l),this._error("sizeError",k));Jmp.Uploader.counts.failed=k.length},
_create_new_bucket_on_bucket_owner_mismatch:function(){var b=js_uploader._uploadHandler._files,h=[],k=0;Jmp.Uploader.counts.uploaded=0;Jmp.Uploader.counts.total=0;Jmp.Uploader.counts.uploading=0;for(var l=Jmp.Uploader.counts.failed=0;l<b.length;l++)b[l]&&(Jmp.Uploader.bucketUploadCounts[b[l].bucket].total--,Jmp.Uploader.bucketUploadSize[b[l].bucket].total-=b[l].size,k=b[l].size,h.push(b[l]),$("#"+b[l].id).remove(),b[l]=null);1<=h.length&&(Jmp.Speed.decrement_total(k),Jmp.App.getView().type=Jmp.Handler.getRule("_empty"),
js_uploader._options.onRequest(h,!1))},stop_bucket_uploading_if_in_progress:function(b){Jmp.Uploader._check_if_bucket_exists_in_upload_queue(b)&&(Jmp.Uploader._remove_files_upload_count_from_global_count(b),Jmp.Uploader._remove_thumb_overlay_from_bucket(b),Jmp.Uploader.isXHR?Jmp.Uploader._stop_ajax_bucket_uploading(b):Jmp.Uploader._stop_flash_bucket_uploading(b),Socket.push("items_updated",[{id:b,code:b,type:"folder",state:"cancelled"}]))},_remove_files_upload_count_from_global_count:function(b){b=
Jmp.Uploader.bucketUploadCounts[b];"undefined"!=typeof b&&(Jmp.Uploader.counts.uploaded-=b.uploaded)},_remove_thumb_overlay_from_bucket:function(b){b=$("#"+b);b.length&&(b.find(".js-empty-folder").removeClass("hide"),b.find(".js-thumb-overlay-uploading").remove())},_check_if_bucket_exists_in_upload_queue:function(b){return"undefined"!=typeof Jmp.Uploader.bucketUploads[b]},_stop_ajax_bucket_uploading:function(b){for(var h=js_uploader._uploadHandler._files,k=h.length,l=0;l<k;l++){var m=h[l];m&&m.bucket==
b&&m.id!=Jmp.Uploader.currentId&&(js_uploader.cancelUpload(m),m.replace&&($("#"+m.bucket_file_code+"-replace").attr("id",m.bucket_file_code).removeClass("hide").addClass("grid"),Jmp.Helpers.update_viewer(m.bucket_file_code)))}for(l=0;l<k;l++)(m=h[l])&&m.bucket==b&&m.id==Jmp.Uploader.currentId&&(js_uploader.cancelUpload(m),m.replace&&($("#"+m.bucket_file_code+"-replace").attr("id",m.bucket_file_code).removeClass("hide").addClass("grid"),Jmp.Helpers.update_viewer(m.bucket_file_code)))},_stop_flash_bucket_uploading:function(b){for(var h=
!1,k=[],l=0;l<flash_files.length;l++){var m=flash_files[l];m&&b==m.bucket&&m.id!=Jmp.Uploader.currentId?(k.push(l),Jmp.Uploader.counts.total--,Jmp.Uploader.bucketUploadCounts[b].total--,Jmp.Uploader.bucketUploadSize[b].total-=m.size,Jmp.Speed.decrement_total(m.size),Jmp.Uploader.showCancelled(m.id),swfu.cancelUpload(m.id,!1)):m&&b==m.bucket&&m.id==Jmp.Uploader.currentId&&(k.push(l),h=!0,Jmp.Uploader.counts.total--,Jmp.Uploader.bucketUploadCounts[b].total--,Jmp.Uploader.bucketUploadSize[b].total-=
m.size,Jmp.Speed.decrement_total(m.size),Jmp.Uploader.showCancelled(m.id),swfu.cancelUpload(m.id,!1));Jmp.Uploader.move_to_my_uploads_if_all_files_cancelled_in_bucket(b);Jmp.Uploader.any_file_canceled=!0}b=[];for(l=0;l<flash_files.length;l++)-1==$.inArray(l,k)&&b.push(flash_files[l]);flash_files=b;h&&swfu.startUpload()},cancel_all_uploads:function(){var b=$.extend({},Jmp.Uploader.bucketUploads),h;for(h in b)Jmp.Uploader.stop_bucket_uploading_if_in_progress(h),Jmp.Uploader.bucketUploads=b;Jmp.Uploader.bucketUploads=
{};Jmp.Helpers.remove_uploading_viewers();return!1},mark_buckets_as_deleted_if_no_file_is_uploaded_and_are_orphan:function(b){var h=[],k;for(k in b)0==b[k].uploaded&&h.push(k);1<=h.length&&Jmp.Helpers.set_cookie("buckets_to_delete",h.join(","))},move_to_my_uploads_if_all_files_cancelled_in_bucket:function(b){var h=Jmp.Uploader.bucketUploadCounts[b];"undefined"!=typeof h&&0==h.uploaded&&0==h.total&&1==h.cancelled&&Jmp.App.getView().data.id==b&&0==$("#folder-meta .folders").attr("data-files-count")&&
"orphan"==$("#folder-meta .folders").attr("data-folder-status")&&("true"==Jmp.Uploader.options.iur?Jmp.App.changeAddress(WS_PREFIX+"/personal"):setTimeout(function(){window.location=WS_PREFIX+"/personal"},2E3))},start_tour:function(b){"undefined"!=typeof first_tour&&"BucketFiles"==Jmp.App.getView().type&&(first_tour.init(),first_tour.restart())},scroll_to_newly_added_files:function(b){setTimeout(function(){var h=$("li[id*=XHR_]:first").offset();h&&$(document).scrollTop(h.top-80)},200)}});$("#up-cancel").live("click",
function(){$("div.modal-insufficient").hasClass("hide")&&$("div.modal-insufficient").removeClass("hide");$("div.modal-upgrade").addClass("hide")});c.isXHRSupported=function(){var b=document.createElement("input");b.type="file";return"multiple"in b&&"undefined"!=typeof File&&"undefined"!=typeof(new XMLHttpRequest).upload&&window.FormData};c.getIndex=function(b,h){var k="";$.each(h,function(l,m){b==m&&(k=l)});return k};a.Uploader=new c})(Jmp);(function(){function a(c){this._options={debug:!1,action:"/upload.php",maxConnections:999,onStart:function(b){},onProgress:function(b,h,k){},onComplete:function(b,h){},onQueueComplete:function(){},onCancel:function(b){}};$.extend(this._options,c);this._queue=[];this._params=[];this.inProgress=!1;this._files=[];this._xhrs=[];this._loaded=[]}this.XHRUpload=function(c){this._options={buttons:[],dropAreas:[],dropArea:null,debug:!1,action:WS_PREFIX+"/uploader/upload/",params:{},multiple:!0,maxConnections:1,
bucket_uploading_in_progress:!1,direct_upload_size_limit:15728640,onRequest:function(h){},onSubmit:function(h,k,l){},onStart:function(h,k){},onProgress:function(h,k,l,m){},onComplete:function(h,k,l){},onQueueComplete:function(){},onCancel:function(h,k){}};this._buttonDefaults={onClick:function(h){}};this._dropAreaDefaults={onEnter:function(h){},onLeave:function(h){}};$.extend(this._options,c);for(c=0;c<this._options.buttons.length;c++)$.extend(this._options.buttons[c],this._buttonDefaults,this._options.buttons[c]);
for(c=0;c<this._options.dropAreas.length;c++)$.extend(this._dropAreaDefaults,this._options.dropAreas[c]);this._uploadInput=this._createUploadInput();this._dropArea=$(this._options.dropArea);this._createDropArea();this._attachButtons();$.browser.chrome?(this._uploadDirectoryInput=this._createUploadDirectoryInput(),this._attachDirectoryButton()):$("#upload_folder_dropdown").live("click",function(){Jmp.Helpers.show_folder_upload_not_supported();return!1});var b=this;this._uploadHandler=new a({debug:this._options.debug,
action:this._options.action,direct_upload_size_limit:this._options.direct_upload_size_limit,maxConnections:this._options.maxConnections,onStart:function(h){b._options.onStart(h)},onProgress:function(h,k,l){b._options.onProgress(h,k,l)},onComplete:function(h,k){b._options.onComplete(h,k)},onQueueComplete:function(){b._options.onQueueComplete()},onCancel:function(h){b._options.onCancel(h)}});this.files={total:0,uploading:0,uploaded:0,total_uploaded:0};this.queueSize=this.totalSize=0};$.extend(XHRUpload.prototype,
{_createDropArea:function(){var c=this;$("undefined"!==typeof dzone?dzone:document).bind("dragover",function(b){b.preventDefault();b.stopPropagation();if(Jmp.Helpers.is_opera()||!Jmp.Helpers.is_at_valid_uploading_view())return!1;$.browser.chrome&&-1!==$.inArray("Files",b.originalEvent.dataTransfer.types)&&(b.originalEvent.dataTransfer.dropEffect="copy");return!1});$("undefined"!==typeof dzone?dzone:document).bind("dragenter",function(b){b.preventDefault();b.stopPropagation();if(Jmp.Helpers.is_opera()||
!Jmp.Helpers.is_at_valid_uploading_view()||Jmp.Handler.BucketFiles.drageDropModeOn)return!1;$("#drop-area").removeClass("hide");$("body").addClass("drop-area");return!1});$("undefined"!==typeof dzone?dzone:document).bind("drop",function(b){return!1});$("#drop-area").bind("dragover",function(b){return!1});$("#drop-area").bind("dragleave",function(b){b.preventDefault();b.stopPropagation();if(Jmp.Helpers.is_opera()||!Jmp.Helpers.is_at_valid_uploading_view())return!1;$(this).addClass("hide");$("body").removeClass("drop-area");
return!1});$("#drop-area").bind("drop",function(b){b.preventDefault();b.stopPropagation();if(Jmp.Helpers.is_opera()||!Jmp.Helpers.is_at_valid_uploading_view())return!1;$(this).addClass("hide");$("body").removeClass("drop-area");if(b.originalEvent.dataTransfer.files.length){b.preventDefault();var h=Jmp.App.getView().type;"i"==h?Inbox.Uploading.handle_files_dropped(b.originalEvent.dataTransfer.files):"viewer"==h||"embedding"==h||"lock"==h?DynamicPages.Uploading.handle_files_dropped(b.originalEvent.dataTransfer.files):
$.browser.chrome?c._handleFolderDrop(b.originalEvent.dataTransfer.items):c._handleUploadFiles(b.originalEvent.dataTransfer.files)}else 0==b.originalEvent.dataTransfer.files.length&&Jmp.Helpers.is_ie()&&Jmp.Helpers.show_folder_upload_not_supported()});this._attachDropAreas()},_attachButtons:function(){for(var c=this,b=0;b<this._options.buttons.length;b++)(function(h){$("#"+c._options.buttons[h].id).show().live("click",function(k){k.preventDefault();c._uploadInput.trigger("click");c._options.buttons[h].onClick(k)})})(b)},
_attachDirectoryButton:function(){var c=this;$("#upload_folder_dropdown").live("click",function(b){c._uploadDirectoryInput.show().trigger("click");return!1})},_attachDropAreas:function(){for(var c=this,b=0;b<this._options.dropAreas.length;b++)(function(h){$("#"+c._options.dropAreas[h].id).live("dragenter",function(k){c._isValidFileDrag(k.originalEvent)&&c._dropArea.css("display","table")})})(b)},_createUploadInput:function(){var c=$('<input type="file" name="Filedata" id="_upload_input">');c.css({position:"absolute",
right:0,top:"-1000px",opacity:0});this._options.multiple&&c.attr("multiple","multiple");var b=this;c.bind("click",function(){document.body.onfocus=function(){setTimeout(function(){""==c.val()&&(Jmp.Helpers.version_bucket_file_code="");Jmp.Helpers.is_version_link=!1;b._options.multiple&&c.removeAttr("multiple").attr("multiple","multiple");document.body.onfocus=null},400)}});c.bind("change",function(){if(""!=Jmp.Helpers.version_extension){switch(this.value.match(/\.([^\.]+)$/)[1]){case Jmp.Helpers.version_extension:b._handleUploadInput();
break;default:Jmp.App.Lightbox.show({type:"upload_extension_not_supported"}),this.value=""}Jmp.Helpers.version_extension=""}else b._handleUploadInput()});$("body").append(c);return c},_createUploadDirectoryInput:function(){var c=$('<input type="file" style="position: absolute; right: 0; top: -2000px; opacity: 0;" name="FiledataDirectory" id="_upload_input_directory" webkitdirectory="">');$("body").append(c);var b=this;c.bind("change",function(h){b._handleUploadDirectoryInput()});return c},_handleUploadInput:function(){SlicedUpload.isAllowed()?
this._handleUploadFiles(this._uploadInput.get(0).files):Jmp.App.Lightbox.show({type:"sliced_uploading_not_supported"});this._resetUploadInput()},_handleUploadDirectoryInput:function(){this._handleUploadFolder(this._uploadDirectoryInput.get(0).files);this._uploadDirectoryInput.remove();this._uploadDirectoryInput=this._createUploadDirectoryInput()},_resetUploadInput:function(){this._uploadInput.remove();this._uploadInput=this._createUploadInput()},_handleUploadFiles:function(c){this.queueSize=0;this._options.onRequest(c)},
_handleUploadFolder:function(c){this.queueSize=0;this._options.onRequestItemsForFolderUpload(c)},_handleFolderDrop:function(c){this.queueSize=0;this._options.onRequestItemsForFolderDrop(c)},_handleUploadViaLink:function(c){this.queueSize=0;this._options.onRequestItemsForUploadViaLink(c)},uploadFile:function(c,b){c=this._uploadHandler.add(c);var h=this._uploadHandler.getName(c),k=this._uploadHandler.getSize(c),l=this._addToList(c,h);this._options.onSubmit(l,h,k);this._uploadHandler.upload(c,b)},_isValidFileDrag:function(c){c=
c.dataTransfer;var b=-1<navigator.userAgent.indexOf("AppleWebKit");return c&&"none"!=c.effectAllowed&&(c.files||!b&&c.types.contains&&c.types.contains("Files"))},setAction:function(c){this._uploadHandler._options.action=c},cancelUpload:function(c){this._uploadHandler.cancel(c)},cancelAll:function(){this._uploadHandler.cancelAll()}});$.extend(a.prototype,{log:function(c){this._options.debug&&window.console&&console.log("[uploader] "+c)},add:function(c){if(!(c instanceof File||c instanceof CFile||c instanceof
NFile))throw Error("Passed obj in not a File (in UploadHandlerXhr)");return this._files.push(c)-1},upload:function(c,b){var h=this._queue.push(c),k={};$.extend(k,b);this._params[c]=k;h<=this._options.maxConnections&&this._choose_upload(c,this._params[c])},cancel:function(c){this._cancel(c);c instanceof File?this._dequeue_and_start_next(c.fileId):c instanceof CFile&&this._dequeue_and_check_if_queue_complete(c.fileId)},cancelAll:function(){for(var c=0;c<this._queue.length;c++)this._cancel(this._queue[c]);
this._queue=[]},getName:function(c){c=this._files[c];return null!=c.fileName?c.fileName:c.name},getSize:function(c){c=this._files[c];return null!=c.fileSize?c.fileSize:c.size},getQueue:function(){return this._queue},getLoaded:function(c){return this._loaded[c]||0},_dequeue_and_start_next:function(c){var b=this._dequeue_and_check_if_queue_complete(c);0==SlicedUpload.isAllowed()&&this._start_next_upload(c,b)},_dequeue:function(c){this._queue.splice(c,1)},_dequeue_and_check_if_queue_complete:function(c){c=
$.inArray(c,this._queue);this._dequeue(c);this._check_if_queue_complete();return c},_check_if_queue_complete:function(){if(0==this._queue.length)this._options.onQueueComplete()},_start_next_upload:function(c,b){c=this._options.maxConnections;this._queue.length>=c&&b<c&&(b=this._queue[c-1],this._files[b]?this._choose_upload(b,this._params[b]):this._dequeue_and_start_next(b))},_choose_upload:function(c,b){var h=this._files[c];h instanceof File||h instanceof NFile?SlicedUpload.isAllowed()?"undefined"!=
typeof h.note||h.file_size>this._options.direct_upload_size_limit?this._sliced_upload(c,this._params[c],!0,!1):this._sliced_upload(c,this._params[c],!0,!0):this._upload(c,this._params[c]):h instanceof CFile&&this._link_upload(c,b)},_upload:function(c,b){var h=new FormData;h.append("Filedata",this._files[c]);h.append("file_path",this._files[c].webkitRelativePath);$.each(b,function(n,p){h.append(n,p)});h.append(CSRF.token_name,CSRF.token_value);this._loaded[c]=0;var k=this._xhrs[c]=new XMLHttpRequest;
b=!1;var l=this,m=this._options.action+l._files[c].bucket+("undefined"!=typeof l._files[c].team_upload&&l._files[c].team_upload?"/"+l._files[c].team_upload:"");XHRUpload.use_uploader&&"image"==this._files[c].file_type&&"withCredentials"in k&&1024<this._files[c].size&&(b=!0,m=UPLOADERURL+m);k.upload.onprogress=function(n){l.inProgress=!0;if(n.lengthComputable&&(l._loaded[c]=n.loaded,n.total!=n.loaded))l._options.onProgress(l._files[c],n.loaded,n.total)};k.onreadystatechange=function(){l.inProgress=
!1;4==k.readyState&&l._onComplete(c,k)};k.onerror=function(n){l.inProgress=!1;l._files[c]&&(l._options.onComplete(l._files[c],{status:500}),this._files[c]=null,this._xhrs[c]=null,this._dequeue_and_start_next(c))};k.open("POST",m,!0);b&&(k.withCredentials=!0);k.send(h);this._options.onStart(l._files[c],name)},_onComplete:function(c,b){if(this._files[c]){this.getName(c);var h=this.getSize(c);this._options.onProgress(this._files[c],h,h);if(200==b.status){this.log("xhr - server response received");this.log("responseText = "+
b.responseText);try{var k=eval("("+b.responseText+")")}catch(l){k={}}this._options.onComplete(this._files[c],k)}else this._options.onComplete(this._files[c],{status:500});this._files[c]=null;this._xhrs[c]=null;this._dequeue_and_start_next(c)}},_cancel:function(c){SlicedUpload.isAllowed()&&c instanceof File&&js_uploader._uploadHandler.uploader&&c.fileId==js_uploader._uploadHandler.uploader.file.fileId?js_uploader._uploadHandler.uploader.cancel_upload():c instanceof CFile&&UploadViaLink.upload_cancelled(c);
this._options.onCancel(c);this._files[c.fileId]=null;this._xhrs[c.fileId]&&(this._xhrs[c.fileId].abort(),this._xhrs[c.fileId]=null)},_sliced_upload:function(c,b,h,k){b=UploadManagerCollection.get_item(c);"undefined"==typeof b&&(b=new UploadManager(k),UploadManagerCollection.add(c,b));b.start({},this._files[c],h,k);h&&(this.uploader=b,this._options.onStart(this._files[c],name))},_sliced_upload_complete:function(c,b){var h=c.fileId;this._options.onComplete(this._files[h],b);c.replace&&$("#"+c.bucket_file_code+
"-replace").remove();this._files[h]=null;this._xhrs[h]=null;this._dequeue_and_start_next(h)},_start_next_sliced_upload:function(c){c+=1;if(c>=this._files.length)return!1;this._files[c]?this._choose_upload(c,this._params[c]):this._start_next_sliced_upload(c)},_ready_next_sliced_upload:function(c){for(var b=-1,h=c+1;h<this._files.length;h++)if(this._files[h]){b=h;break}-1!=b&&this._sliced_upload(b,this._params[c],!1)},_link_upload:function(c,b){UploadViaLink.upload(c,this._files[c],b)},_link_upload_complete:function(c,
b){c=c.fileId;this._options.onComplete(this._files[c],b);this._files[c]=null;this._xhrs[c]=null;b=$.inArray(c,this._queue);this._dequeue(b);this._start_next_upload_after_link_upload(c);this._check_if_queue_complete()},_start_next_upload_after_link_upload:function(c){c+=1;c<this._files.length&&(this._files[c]?this._choose_upload(c):this._start_next_upload_after_link_upload(c))}});XHRUpload.use_uploader=!1}).call(this);var SlicedUpload={isAllowed:function(){return window.File&&window.FileReader?!0:!1},url_prefix:"sliced_uploader",url_prefix_direct:"direct_uploader",upgrade_to_upload_files:!1,error_message:""},UploadManager=function(a){this.options={part_size:15728640,parallel_parts:2,max_parts:1E3,stay_below_max_parts:!0};this.is_direct_upload=a;this.file_parts=[];this.successfull_parts=[];this.failed_parts=[]};
UploadManager.prototype._setup=function(){this.blobs=[];this.file_info=this._prepare_file_info();this.adjust_part_size();this.parts=this._get_total_parts();this.file_progress=this.uploading_parts=this.uploaded_parts=0};UploadManager.prototype._prepare_file_info=function(){return{name:encodeURIComponent(this.file.name),type:this.file.type,size:this.file.size,lastModifiedDate:this.file.lastModifiedDate}};
UploadManager.prototype.adjust_part_size=function(){if(ViewerPanel.is_mobile)return this.options.part_size=2*this.file_info.size,!1;var a=this._get_total_parts();if(this.options.stay_below_max_parts&&a>this.options.max_parts)this.options.part_size=parseInt(this.file_info.size/this.options.max_parts+1,10);else for(;1E3<a;)this.options.part_size*=2,a=this._get_total_parts()};UploadManager.prototype._get_total_parts=function(){return parseInt(this.file_info.size/this.options.part_size+1,10)};
UploadManager.prototype.get_file_part=function(a){if(ViewerPanel.is_mobile)return this.file;if(this.file instanceof File)return this.slice_file(this.options.part_size*(a-1),Math.min(this.options.part_size*a,this.file_info.size));if(this.file instanceof NFile)return this.file.note};UploadManager.prototype.slice_file=function(a,c){return this.file.slice(a,c)};UploadManager.prototype.start=function(a,c,b,h){this.file=c;this.set_options(a);this.upload_immidiately=b;this.is_direct_upload=h;this.upload()};
UploadManager.prototype.set_options=function(a){this.options=this._override_defaults(a)};UploadManager.prototype._override_defaults=function(a){return $.extend(!0,{},this.options,a)};UploadManager.prototype.upload=function(){this._setup();this.initiate_multipart_upload()};
UploadManager.prototype.initiate_multipart_upload=function(){var a=this,c={bucket_id:a.file.bucket,fileInfo:a.file_info,is_team_upload:a.file.team_upload,is_shared_upload:a.file.shared_upload};a.file.replace&&(c.replace=1);url_prefix=this.is_direct_upload?SlicedUpload.url_prefix_direct:SlicedUpload.url_prefix;url_endpoint=this.is_direct_upload?"/create_direct_upload":"/create_multipart_upload";$.post(WS_PREFIX+"/"+url_prefix+url_endpoint,Jmp.Helpers.get_secure_params(c),function(b){if(0==b.status&&
"uploading_disabled_in_free_trial"==b.error)return js_uploader.cancelUpload(a.file),Jmp.App.Lightbox.show({type:"upload_free_trial_user_popup"}),Socket.close(),!1;if(SlicedUpload.upgrade_to_upload_files&&0==b.status&&"upgrade_to_upload_files"==b.error)return js_uploader.cancelUpload(a.file),Socket.close(),!1;if(0==b.status&&"upgrade_to_upload_files"==b.error&&("undefined"==typeof PLANID||2>PLANID))return SlicedUpload.upgrade_to_upload_files=!0,js_uploader.cancelUpload(a.file),Jmp.App.Lightbox.show({type:"upgrade_to_upload_files"}),
Socket.close(),!1;if(0==b.status&&"file_upload_size_limit_exceeded_in_trial"==b.error)return js_uploader.cancelUpload(a.file),Jmp.App.Lightbox.show({type:"upload_size_limit_exceeded_popup",message:b.msg,plan_name:b.plan_name},function(){$(this).addClass("disabled");window.location=WS_PREFIX+"/settings/workspace/billing?buynow=1"}),Socket.close(),!1;b.bucket_file_code&&(a.file.bucket_file_code||(a.file.bucket_file_code=b.bucket_file_code),delete b.bucket_file_code,b.bucket_file_short_code&&(a.file.bucket_file_short_code=
b.bucket_file_short_code),Jmp.Helpers.post_processing_after_creating_information_for_uploading_file(a.file),Jmp.Helpers.add_viewer(a.file.id),"undefined"!=typeof b.show_first_upload_complete_popup&&(Jmp.Uploader.show_first_upload_complete_popup=!0,Jmp.Uploader.show_first_upload_complete_popup_html=b.show_first_upload_complete_popup_html));a.sendBackData=b;a._upload_file_immidiately()&&a._upload()}).fail(function(){setTimeout($.proxy(function(){this.initiate_multipart_upload()},a),1E4)})};
UploadManager.prototype._upload_file_immidiately=function(){return"undefined"!=typeof this.upload_immidiately&&1==this.upload_immidiately};UploadManager.prototype._upload_file_direct=function(){return"undefined"!=typeof this.is_direct_upload&&1==this.is_direct_upload};
UploadManager.prototype._upload=function(){if(this.upload_cancelled||this.upload_in_progress||this.upload_done)return!1;this.upload_in_progress=!0;if(this.is_direct_upload)this._upload_file();else for(var a=Math.min(this.options.parallel_parts,this.parts),c=1;c<=a;c++)this._upload_part(c),this.uploading_parts++};UploadManager.prototype._upload_file=function(){(new FileDirect(this.file,this))._upload_file(this.sendBackData.upload_info)};
UploadManager.prototype._upload_part=function(a){var c=new FilePart(this.get_file_part(a),a,this);c._upload_part();this.insert_file_part(c,a)};UploadManager.prototype.upload_file_complete=function(){this.complete_direct_upload()};UploadManager.prototype.upload_part_complete=function(a){this.successfull_parts.push(a);this.remove_file_part(a);this.uploaded_parts++;this.uploaded_parts==this.parts&&this.complete_multipart_upload();this._start_new_part()};
UploadManager.prototype.insert_file_part=function(a,c){this.file_parts[c-1]=a};UploadManager.prototype.remove_file_part=function(a){this.file_parts[a-1]=null};UploadManager.prototype._start_new_part=function(){this.uploading_parts<this.parts&&(this.uploading_parts++,this._upload_part(this.uploading_parts))};
UploadManager.prototype.complete_multipart_upload=function(){this.upload_in_progress=!1;this.upload_done=!0;var a=js_uploader._uploadHandler;a._options.onProgress(this.file,this.file_info.size,this.file_info.size);$.browser.mozilla?(a._start_next_sliced_upload(this.file.fileId),this.files_count_present=js_uploader._uploadHandler._files.length):"undefined"==typeof $.browser.mozilla&&0==this.file_info.size&&a._start_next_sliced_upload(this.file.fileId);this._complete_multiplart_upload_ajax_request()};
UploadManager.prototype.complete_direct_upload=function(){this.upload_in_progress=!1;this.upload_done=!0;var a=js_uploader._uploadHandler;a._options.onProgress(this.file,this.file_info.size,this.file_info.size);$.browser.mozilla?(a._start_next_sliced_upload(this.file.fileId),this.files_count_present=js_uploader._uploadHandler._files.length):"undefined"==typeof $.browser.mozilla&&0==this.file_info.size&&a._start_next_sliced_upload(this.file.fileId);this._complete_multiplart_upload_ajax_request()};
UploadManager.prototype._complete_multiplart_upload_ajax_request=function(){var a=this,c=js_uploader._uploadHandler;this.file_info.name=decodeURIComponent(this.file_info.name);a.complete_upload_retries_count=a.complete_upload_retries_count||0;var b={command:"CompleteMultipartUpload",sendBackData:this.sendBackData,bucket_id:this.file.bucket,file_info:this.file_info},h=Jmp.Helpers.get_file_index_if_custom_sort(this.file.id);this.file.bucket_file_code&&(b.bucket_file_code=this.file.bucket_file_code);
this.file.team_upload&&(b.is_team_upload=this.file.team_upload);this.file.shared_upload&&(b.is_shared_upload=this.file.shared_upload);"undefined"!=typeof h&&(b.index=h);this.file.replace&&(b.replace=1);if("inbox"==SlicedUpload.url_prefix||"embed"==SlicedUpload.url_prefix)b.inbox_name=Jmp.App.FormInfo.inbox_name,b.inbox_hash=Jmp.App.FormInfo.inbox_hash;url_prefix=this.is_direct_upload?SlicedUpload.url_prefix_direct:SlicedUpload.url_prefix;url_endpoint=this.is_direct_upload?"/complete_direct_upload":
"/complete_multipart_upload";$.post(WS_PREFIX+"/"+url_prefix+url_endpoint,Jmp.Helpers.get_secure_params(b),function(k){0==k.status?(a.upload_done=!1,a.sendBackData=void 0,c._sliced_upload_complete(a.file,k)):-10!=k.status&&(c._sliced_upload_complete(a.file,k),a.files_count_present!=c._files.length&&a.files_count_present==a.file.fileId+1&&c._start_next_sliced_upload(a.file.fileId))}).fail(function(k){try{var l=$.parseJSON(k.responseText)}catch(m){l={status:500}}3<=a.complete_upload_retries_count?(a.upload_done=
!1,a.sendBackData=void 0,c._sliced_upload_complete(a.file,l)):(a.complete_upload_retries_count++,setTimeout($.proxy(function(){this._complete_multiplart_upload_ajax_request()},a),1E4))})};
UploadManager.prototype.on_file_part_progress=function(a){this.file_progress+=a;if(this.file_progress!=this.file_info.size)js_uploader._options.onProgress(this.file,this.file_progress,this.file_info.size);this.file_progress==this.file_info.size&&"undefined"==typeof $.browser.mozilla&&(Jmp.Uploader.showProgress(this.file.id,"100"),this.files_count_present=js_uploader._uploadHandler._files.length,ViewerPanel.manager.update_progress(this.file.bucket_file_code,100),js_uploader._uploadHandler._start_next_sliced_upload(this.file.fileId))};
UploadManager.prototype.cancel_upload=function(){this.upload_cancelled=!0;for(var a=0;a<this.file_parts.length;a++){var c=this.file_parts[a];c&&c.ajax_request&&c.ajax_request.abort()}url_prefix=this.is_direct_upload?SlicedUpload.url_prefix_direct:SlicedUpload.url_prefix;url_endpoint=this.is_direct_upload?"/cancel_direct_upload":"/cancel_multipart_upload";$.post(WS_PREFIX+"/"+url_prefix+url_endpoint,Jmp.Helpers.get_secure_params({sendBackData:this.sendBackData}),function(b){});js_uploader._uploadHandler._start_next_sliced_upload(this.file.fileId)};
function Uploader(){}Uploader.prototype._upload_part=function(){this._sign_upload_part()};
Uploader.prototype._sign_upload_part=function(){var a=this,c=this.part_number,b=this.manager.file instanceof File?a.blob.size:a.blob.length;url_prefix=this.manager.is_direct_upload?SlicedUpload.url_prefix_direct:SlicedUpload.url_prefix;$.post(WS_PREFIX+"/"+url_prefix+"/sign_upload_part",Jmp.Helpers.get_secure_params({sendBackData:a.manager.sendBackData,partNumber:c,contentLength:b}),function(h){"undefined"==typeof a.manager.upload_cancelled&&a.upload_part_to_s3(h,c)}).fail(function(){a._retry_failed_upload(c)})};
Uploader.prototype.upload_part_to_s3=function(a,c){var b=this,h=a.url,k=b.ajax_request=new XMLHttpRequest;k.onreadystatechange=function(l){4===k.readyState&&(b._clear_progress_listener(),200==k.status?b.upload_part_done(a,c):b.upload_part_not_done(a,c))};k.upload.onprogress=function(l){l.lengthComputable&&(b.progress_listener(),b.on_progress(l.loaded))};k.open("PUT",h,!0);k.setRequestHeader("Content-Type","multipart/form-data");k.send(this.blob)};
Uploader.prototype._readBody=function(a){return a.responseType&&"text"!==a.responseType?"document"===a.responseType?a.responseXML:a.response:a.responseText};Uploader.prototype._upload_file=function(a){this.upload_file_to_s3(a)};
Uploader.prototype.upload_file_to_s3=function(a){var c=this,b=a.upload_url,h=c.ajax_request=new XMLHttpRequest;h.onreadystatechange=function(k){4===h.readyState&&(c._clear_progress_listener(),200==h.status?c.upload_file_done(a):c.upload_file_not_done(a))};h.upload.onprogress=function(k){k.lengthComputable&&(c.progress_listener(),c.on_progress(k.loaded))};h.open("PUT",b,!0);h.setRequestHeader("content-type","");h.send(this.file)};
var FilePart=function(a,c,b){this.blob=a;this.part_number=c;this.manager=b;this.progress=0;this.ajax_request=void 0;this.retry_count=0;this.progress_timer=void 0};FilePart.prototype=new Uploader;FilePart.prototype.upload_part_done=function(a,c){this._upload_part_complete(a,c)};FilePart.prototype.upload_part_not_done=function(a,c){"undefined"==typeof this.manager.upload_cancelled?(this.retry_count++,this._retry_failed_upload(c)):this._upload_part_cancel(a,c)};
FilePart.prototype._upload_part_complete=function(a,c){this.manager.upload_part_complete(c)};FilePart.prototype._upload_part_cancel=function(a,c){};FilePart.prototype._retry_failed_upload=function(a){if(this.manager.upload_cancelled||this.manager.upload_done)return!1;setTimeout($.proxy(function(){this._upload_part()},this),1E4)};FilePart.prototype.on_progress=function(a){var c=a-this.progress;this.progress=a;this.manager.on_file_part_progress(c)};FilePart.prototype.abort_stuck_request=function(){this.ajax_request.abort()};
FilePart.prototype.progress_listener=function(){this._clear_progress_listener();this._set_progress_listener()};FilePart.prototype._set_progress_listener=function(){this.progress_timer=setTimeout($.proxy(function(){this.abort_stuck_request()},this),4E4)};FilePart.prototype._clear_progress_listener=function(){clearTimeout(this.progress_timer)};var FileDirect=function(a,c){this.file=a;this.manager=c;this.progress=0;this.ajax_request=void 0;this.retry_count=0;this.progress_timer=void 0};
FileDirect.prototype=new Uploader;FileDirect.prototype.upload_file_done=function(a){this._upload_file_complete(a)};FileDirect.prototype.upload_file_not_done=function(a){"undefined"==typeof this.manager.upload_cancelled?(this.retry_count++,this._retry_failed_upload()):this._upload_file_cancel(a)};FileDirect.prototype._upload_file_complete=function(a){this.manager.upload_file_complete()};FileDirect.prototype._upload_file_cancel=function(a){console.log("File Upload cancelled")};
FileDirect.prototype._retry_failed_upload=function(){if(this.manager.upload_cancelled||this.manager.upload_done)return!1;setTimeout($.proxy(function(){this._upload_file(this.manager.sendBackData.upload_info)},this),1E4)};FileDirect.prototype.on_progress=function(a){var c=a-this.progress;this.progress=a;this.manager.on_file_part_progress(c)};FileDirect.prototype.abort_stuck_request=function(){this.ajax_request.abort()};
FileDirect.prototype.progress_listener=function(){this._clear_progress_listener();this._set_progress_listener()};FileDirect.prototype._set_progress_listener=function(){this.progress_timer=setTimeout($.proxy(function(){this.abort_stuck_request()},this),4E4)};FileDirect.prototype._clear_progress_listener=function(){clearTimeout(this.progress_timer)};var UploadManagerCollection={items:{},add:function(a,c){this.items[a]=c},remove:function(a){delete this.items[a]},get_item:function(a){return this.items[a]}};var FileReplacer={callback:void 0,upload_files:[],matched_files:[],current_file_index:-1,confirm_action:"",can_replace_files:function(){var a=Jmp.Helpers.get_folder_items_count();return 1<=this.matched_files.length||a>Jmp.Helpers.get_lazy_load_items_threshold()&&$("li.grid").length<a},confirm_for_replaces:function(a){this.callback=a;a=Jmp.Helpers.get_folder_items_count();if(a>Jmp.Helpers.get_lazy_load_items_threshold()&&$("li.grid").length<a)if(a=this._prepare_files_for_replace_via_ajax(),1<=a.length){var c=
this;Jmp.Helpers.display_loader_during_uploading();$.post(WS_PREFIX+"/files/get_match_for_replace_files",Jmp.Helpers.get_secure_params({bucket_code:Jmp.App.getView().data.id,replace_files:a}),function(b){b=b.files;for(var h=b.length,k=c.upload_files.length,l=0;l<h;l++)for(var m=b[l],n=0;n<k;n++){var p=c.upload_files[n];if(p.name==m.file_name&&m.bucket_file_code){p.bucket_file_code=m.bucket_file_code;c.add_match(p);break}}Jmp.Helpers.remove_loader_during_uploading();c.current_file_index++;c._display_popup()})}else this.current_file_index++,
""!=Jmp.Helpers.version_bucket_file_code?(Jmp.Helpers.version_bucket_file_code="",this.replace_file(!1)):this._display_popup();else this.current_file_index++,""!=Jmp.Helpers.version_bucket_file_code?(Jmp.Helpers.version_bucket_file_code="",this.replace_file(!1)):this._display_popup()},_display_popup:function(){if(""!=this.confirm_action){for(var a=this.current_file_index;a<this.matched_files.length;a++){var c=this.get_match(a);c[this.confirm_action]=1}this.continue_with_uploading()}else this.current_file_index<
this.matched_files.length?(c=this.get_match(this.current_file_index),c instanceof File?(Jmp.App.Lightbox.show({type:"file_replace_popup",current_file_index:this.current_file_index,total_files_count:this.matched_files.length,file:c}),$(".modal-content").addClass("modal-replace"),$("#lightbox").find(".close").addClass("close_icon").removeClass("close"),$("#modal").wrap("<div id='file_replace_popup' class='file_replace_popup'></div>"),1<$(".file_replace_popup").length&&$("#modal").unwrap()):c instanceof
NFile&&this.replace_file(!1)):this.current_file_index>=this.matched_files.length&&(1<$(".file_replace_popup").length&&$("#modal").unwrap(),this.continue_with_uploading())},continue_with_uploading:function(){var a=this.prepare_final_files();this.callback&&this.callback(a)},prepare_final_files:function(){for(var a=[],c=this.upload_files.length,b=0;b<c;b++){var h=this.upload_files[b];h.cancel||(h.duplicate&&delete h.bucket_file_code,a.push(h))}return a},mark_files_for_replacement:function(a){this.clear();
this.upload_files=a;for(var c=a.length,b=0;b<c;b++){var h=a[b];""!=Jmp.Helpers.version_bucket_file_code?(h.bucket_file_code=Jmp.Helpers.version_bucket_file_code,this.add_match(h)):this.check_for_match(h)&&this.add_match(h)}},check_for_match:function(a){var c=!1,b=Jmp.App.getView().type;if(b==Jmp.Handler.getRule("b")){var h=ViewerPanel.viewers_collection.get_item_ids(),k=h.length;for(b=0;b<k;b++){var l=ViewerPanel.viewers_collection.fetch_by_id(h[b]);if(l&&("uploading"!=l.kind||"uploading"==l.kind&&
l.is_observing)&&!l.file_url){var m=l.name;l.extension&&(m+="."+l.extension);if(m.toLowerCase()==a.name.toLowerCase()){c=!0;a.bucket_file_code=l.id;break}}}}else if(b==Jmp.Handler.getRule("_empty")||b==Jmp.Handler.getRule("team"))for(h=Jmp.Helpers.get_container(!0).find("li.file"),k=h.length,b=0;b<k;b++){var n=h.eq(b);if((l=n.attr("id"))&&-1==l.indexOf("XHR_")&&(m=n.attr("data-name"),(n=n.attr("data-extension"))&&(m+="."+n),m.toLowerCase()==a.name.toLowerCase())){c=!0;a.bucket_file_code=l;break}}return c},
replace_file:function(a){this.get_match(this.current_file_index).replace=1;this._check_and_mark_if_confirm_selected(a,"replace");this._continue_to_next_popup()},duplicate_file:function(a){var c=this.get_match(this.current_file_index);c.duplicate=1;delete c.bucket_file_code;this._check_and_mark_if_confirm_selected(a,"duplicate");this._continue_to_next_popup()},cancel_file:function(a){var c=this.get_match(this.current_file_index);c&&(c.cancel=1,this._check_and_mark_if_confirm_selected(a,"cancel"),this._continue_to_next_popup())},
_check_and_mark_if_confirm_selected:function(a,c){a&&(this.confirm_action=c)},add_match:function(a){this.matched_files.push(a)},_continue_to_next_popup:function(){var a=this;setTimeout(function(){a.current_file_index++;a._display_popup()},50)},get_files:function(){return this.matched_files},get_match:function(a){return this.matched_files[a]},_prepare_files_for_replace_via_ajax:function(){for(var a=[],c=this.upload_files.length,b=0;b<c;b++){var h=this.upload_files[b];h.bucket_file_code||a.push({file_name:h.name})}return a},
clear:function(){this.callback=void 0;this.upload_files=[];this.matched_files=[];this.confirm_action="";this.current_file_index=-1}};var Inbox={bootstrap:function(){this.Uploading.bootstrap()},Uploading:{files:[],current_file_id:-1,bucket_id:"",source:"",uploading_files_count:0,uploading_done_count:0,final_files_count:0,share_meta_count:0,share_meta_size:0,bootstrap:function(){this.attach_file_control();this.attach_some_files_selected();this.attach_remove_file();this.attach_send_files();this.attach_send_files_form();this.attach_cancel_upload_confirmation();this.attach_cancel_upload_yes();this.attach_cancel_upload_no();this.attach_send_more_files()},
attach_file_control:function(){$("#add_files, #add_more_files").live("click",function(a){console.log("Trigger Click to #select_files");$("#select_files").trigger("click")});return!1},attach_some_files_selected:function(){$("#select_files").change(function(a){console.log("File change event on select fiels");a=$(this).get(0).files;Inbox.Uploading.handle_files_selected(a);return!1})},attach_remove_file:function(){$("#files_list").live("click",function(a){a=$(a.target);a.hasClass("remove_file")&&(a=parseInt(a.attr("data-index")),
Inbox.Uploading.files[a]&&(Inbox.Uploading.share_meta_size-=Inbox.Uploading.files[a].size),Inbox.Uploading.files[a]=null,$("#inbox_file_list_item_"+a).remove(),Inbox.Uploading.final_files_count--,Inbox.Uploading.share_meta_count--,Inbox.Uploading.adjust_nano_scroller());Inbox.Uploading.adjust_files_list_visibility();Inbox.Uploading.display_share_meta();return!1});return!1},attach_send_files:function(a){var c=this;$("#send_files").live("click",function(b){b=$("#sender_first_name");var h=$("#sender_last_name"),
k=$("#sender_email");if(""==b.val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your first name"}).close_notification(),b.focus(),!1;if(""==h.val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your last name"}).close_notification(),h.focus(),!1;if(""==k.val())return Jmp.App.Notifications.display_notification({type:"error",message:"Please enter your email address"}).close_notification(),k.focus(),!1;if(!Jmp.Helpers.looksLikeEMail(k.val()))return Jmp.App.Notifications.display_notification({type:"error",
message:"Invalid email address"}).close_notification(),k.focus(),!1;if(0==c.final_files_count)return Jmp.App.Notifications.display_notification({type:"error",message:"Oops! You forgot to select your files"}).close_notification(),!1;c.uploading_done_count=0;b=$("#upload_source").val();h=Inbox.Uploading.extract_file_extensions();var l=Jmp.Helpers.queryStringArrayToJSON($("#inbox-form").serializeArray());k=c.get_first_file_name();var m=Inbox.Uploading.get_files_size();$.post("/"+b+"/create_bucket",Jmp.Helpers.get_secure_params({form_info:l,
file_extensions:h,first_file_name:k,files_size:m,files_count:c.final_files_count}),function(n){0==n.bucket_id&&Jmp.App.Notifications.display_notification({type:"error",message:"Some server side error occured. Please try again"}).close_notification();-1==n.status?Jmp.App.Notifications.display_notification({type:"error",message:n.message}).close_notification():(c.bucket_id=n.bucket_id,c.source=n.source,Jmp.App.FormInfo={inbox_name:l.inbox_name,inbox_hash:l.inbox_hash},Inbox.Uploading.start_uploading(n))})});
return!1},attach_send_files_form:function(){$("#inbox-form").live("submit",function(a){return!1})},handle_files_selected:function(a){var c=[],b=this.files.length;$.each(a,function(h,k){Inbox.Uploading.validate_file(k)&&(k.id="XHR_"+b,k.fileId=b,b+=1,c.push(k),Inbox.Uploading.share_meta_count+=1,Inbox.Uploading.share_meta_size+=k.size)});this.display_final_files(c);this.files.push.apply(this.files,c);this.final_files_count+=c.length;this.display_share_meta();this.adjust_files_list_visibility();this.adjust_nano_scroller()},
validate_file:function(a){var c=Jmp.Uploader.options.sizeLimit;if(a.size&&c&&a.size>c)Jmp.App.Notifications.display_notification({type:"error",message:"You can only upload "+Math.round(c/1024/1024/1024*100)/100+"GB. Please contact owner to upgrade account."}).close_notification();else return!0},handle_files_dropped:function(a){Jmp.Uploader.removeFoldersAsync(a)},perform_validation_checks_and_remove_invalid_files:function(a){for(var c=[],b=a.length,h=0;h<b;h++){var k=a[h],l=!0;k&&("."==k.name[0]&&
(l=!1),l&&c.push(k))}Inbox.Uploading.handle_files_selected(c)},display_final_files:function(a){$.each(a,function(c,b){c=Inbox.Uploading.prepare_single_file_for_list(b);Inbox.Uploading.display_single_file_in_list(c)})},prepare_single_file_for_list:function(a){return"<li id='inbox_file_list_item_"+a.fileId+"' class='clearfix'><span class='filename'>"+a.name+"</span><span class='filesize'>"+Jmp.Helpers.formatSize(a.size)+"</span><a href='#' data-index='"+a.fileId+"' class='icn-close remove_file pull-right'></a></li>"},
display_single_file_in_list:function(a){$("#files_list").append(a)},attach_cancel_upload_confirmation:function(){$("#cancel_upload_confirmation").live("click",function(a){$(this).addClass("hide");$("#cancel_upload_buttons").removeClass("hide");$("#uploading_count").addClass("hide");$("#upload_status").removeClass("hide").html("Cancel Upload?");return!1})},attach_cancel_upload_yes:function(){var a=this;$("#cancel_upload_yes").live("click",function(c){a.abort_uploading();"undefined"!=typeof a.sliced_uploader&&
a.sliced_uploader.cancel_upload();Jmp.App.Notifications.display_notification({type:"error",message:"Upload cancelled"}).close_notification();return!1})},attach_cancel_upload_no:function(){$("#cancel_upload_no").live("click",function(a){$("#cancel_upload_confirmation").removeClass("hide");$("#cancel_upload_buttons").addClass("hide");$("#uploading_count").removeClass("hide");$("#upload_status").addClass("hide").html("Uploading");$("#upload_status_finishing").addClass("hide");return!1})},attach_send_more_files:function(){$("#send_more_files").click(function(a){Inbox.Uploading.start_from_scratch()})},
extract_file_extensions:function(){var a=[];$.each(this.files,function(c,b){b&&a.push(Jmp.Helpers.extract_file_extension(b.name))});return a.join()},get_files_size:function(){var a=0;$.each(this.files,function(c,b){b&&(a+=b.size)});return a},start_uploading:function(a){this.override_js_uploader();this.initialize_bucket_stats(a);this.prepare_different_vars(a);this.show_uploading_interface();this.override_sliced_upload_url_prefix(a.source);this.start_speed_updates();this.upload_files()},prepare_different_vars:function(a){$.each(this.files,
function(c,b){b&&(c=a.bucket_id,b.bucket=c,Jmp.Speed.update_total(b.size),Jmp.Uploader.bucketUploadSize[c].total+=b.size)})},upload_files:function(){this.current_file_id<this.files.length&&(this.current_file_id++,this.files[this.current_file_id]?(this.uploading_files_count++,this.upload_file(this.current_file_id)):this.upload_files())},upload_file:function(a){var c=UploadManagerCollection.get_item(a);"undefined"==typeof c&&(c=new UploadManager,UploadManagerCollection.add(a,c));delete c.upload_cancelled;
delete c.upload_in_progress;delete c.upload_done;c.start({},this.files[a],!0);this.sliced_uploader=c},show_uploading_interface:function(){$("#main_content").addClass("uploading").removeClass("done");$("#uploading_count").removeClass("hide");$("#upload_status").addClass("hide").html("Uploading");$("#upload_status_finishing").addClass("hide");$("#cancel_upload_confirmation").removeClass("hide");$("#cancel_upload_buttons").addClass("hide");$("#send_more_files").addClass("hide")},initialize_bucket_stats:function(a){a=
a.bucket_id;Jmp.Uploader.bucketUploads[a]={};Jmp.Uploader.bucketUploadCounts[a]={total:0,uploaded:0,cancelled:!1};Jmp.Uploader.bucketUploadSize[a]={total:0,uploaded:0,uploading:0}},override_sliced_upload_url_prefix:function(a){SlicedUpload.url_prefix=a},start_speed_updates:function(){Jmp.Speed.bootstrap();Jmp.Speed.notify_observers=function(a){Inbox.Uploading.inbox_uploading_ui(a)}},inbox_uploading_ui:function(a){this.set_transfer_rate(a);this.set_uploading_count(a);this.set_progress(a.progress);
this.animate_progress_bar(a.progress)},set_transfer_rate:function(a){a="Time remaining:"+a.time_remaining.replace("(","").replace(")","")+" ("+a.transfer_rate+")";$("#uploading_time_left").html(a)},set_uploading_count:function(a){a="Uploading "+this.uploading_files_count+" of "+this.final_files_count;$("#uploading_count").html(a)},set_progress:function(a){99<Math.floor(a)?($("#inbox_progress").text(Math.floor(a)+"%"),this.show_finishing_interface()):$("#inbox_progress").text(Math.floor(a)+"%")},animate_progress_bar:function(a){100<
a&&(a=100);var c=["-webkit-transform","-ms-transform","transform"];a*=1.8;for(var b=2*a,h=c.length,k=0;k<h;k++)$(".circle .fill, .circle .mask.full").css(c[k],"rotate("+a+"deg)"),$(".circle .fill.fix").css(c[k],"rotate("+b+"deg)")},_start_next_sliced_upload:function(a){console.log("_start_next_sliced_upload");this.current_sliced_upload_successful()&&this.upload_files()},_sliced_upload_complete:function(a,c){console.log("_sliced_upload_complete");"undefined"!=typeof this.sliced_uploader&&"undefined"==
typeof this.sliced_uploader.upload_cancelled&&"undefined"!=typeof c.data&&c.data.share==this.bucket_id&&(this.uploading_done_count+=1);this.uploading_done_count>=this._get_files_length()&&this.uploading_done()},_onRequest:function(){console.log("_onRequest")},onProgress:function(a,c,b){console.log("onProgress");Jmp.Speed.update_speed(b,c)},onComplete:function(a,c){console.log("Complete")},override_js_uploader:function(){js_uploader._options.onProgress=this.onProgress;js_uploader._uploadHandler=this;
js_uploader._uploadHandler._files=this.files;js_uploader._uploadHandler._options={onProgress:this.onProgress}},show_done_interface:function(){$("#main_content").addClass("done");$("#uploading_count").addClass("hide");$("#upload_status_finishing").remove();$("#upload_status").removeClass("hide").text("Success!");$("#send_more_files").removeClass("hide");$("#cancel_upload_confirmation").addClass("hide");$("#cancel_upload_buttons").addClass("hide")},show_finishing_interface:function(){$("#uploading_count").addClass("hide");
$("#upload_status_finishing").removeClass("hide");$("#cancel_upload_confirmation").addClass("hide");$("#cancel_upload_buttons").addClass("hide")},uploading_done:function(){$.post("/"+this.source+"/mark_inbox_upload_as_done",Jmp.Helpers.get_secure_params({bucket_id:this.bucket_id,inbox_name:Jmp.App.FormInfo.inbox_name,files_count:this.final_files_count}),function(a){Inbox.Uploading.show_done_interface()})},get_first_file_name:function(){var a="";$.each(this.files,function(c,b){if(b)return a=b.name,
!1});return a},adjust_nano_scroller:function(){var a=$(".nano");3<=this.final_files_count?a.css("height","120px"):a.css("height",40*this.final_files_count+"px");3<this.final_files_count?a.nanoScroller():a.nanoScroller({destroy:!0})},display_share_meta:function(){if(0===$("#files_list").find("li").length)$("#share_meta").text("").addClass("hide");else{var a=Jmp.Helpers.get_string_based_on_count(this.share_meta_count,"file","files",!0),c=Jmp.Helpers.formatSize(this.share_meta_size);$("#share_meta").text(a+
" - "+c).removeClass("hide")}},adjust_files_list_visibility:function(){var a=$("#files_list");0===a.find("li").length?(a.parent().addClass("hide"),$("#add_more_files").addClass("hide"),$("#share_meta").addClass("hide"),$("#upload_landing").removeClass("hide")):(a.parent().removeClass("hide"),$("#add_more_files").removeClass("hide"),$("#share_meta").removeClass("hide"),$("#upload_landing").addClass("hide"))},abort_uploading:function(){this.current_file_id=-1;this.bucket_id="";this.uploading_done_count=
this.uploading_files_count=0;this.inbox_uploading_ui({time_remaining:"0 mins 0 secs",transfer_rate:"0 KB/s",progress:0});Jmp.Speed.stop();this.remove_uploading_interface()},remove_uploading_interface:function(){$("#main_content").removeClass("uploading")},current_sliced_upload_successful:function(){return this.sliced_uploader.upload_cancelled?!1:!0},start_from_scratch:function(){this.files=[];this.current_file_id=-1;this.bucket_id="";this.share_meta_size=this.share_meta_count=this.final_files_count=
this.uploading_done_count=this.uploading_files_count=0;$("#sender_subject").val("");$("#sender_message").val("");$("#files_list").html("");this.inbox_uploading_ui({time_remaining:"0 mins 0 secs",transfer_rate:"0 KB/s",progress:0});Jmp.Speed.stop();this.remove_uploading_interface();this.adjust_nano_scroller();this.adjust_files_list_visibility();$("#upload_container").append('<div id="upload_status_finishing" class="status hide">Finishing upload</div>')},_get_files_length:function(){for(var a=0,c=this.files.length,
b=0;b<c;b++)this.files[b]&&(a+=1);return a}}};var DynamicPages={bootstrap:function(){this.Uploading.bootstrap()},Uploading:{files:[],current_file_id:-1,bucket_id:"",source:"",uploading_files_count:0,uploading_done_count:0,final_files_count:0,share_meta_count:0,share_meta_size:0,bootstrap:function(){this.attach_file_control();this.attach_some_files_selected();this.attach_remove_file();this.attach_send_files();this.attach_send_files_form();this.attach_cancel_upload_confirmation();this.attach_cancel_upload_yes();this.attach_cancel_upload_no();this.attach_send_more_files()},
attach_file_control:function(){$("#add_files, #add_more_files").live("click",function(a){$("#guest-file-upload").trigger("click")});return!1},attach_some_files_selected:function(){$("#guest-file-upload").change(function(a){console.log("File change event on select files");a=$(this).get(0).files;DynamicPages.Uploading.handle_files_selected(a);return!1})},attach_remove_file:function(){$("#files_list").live("click",function(a){a=$(a.target);a.hasClass("remove_file")&&(a=parseInt(a.attr("data-index")),
DynamicPages.Uploading.files[a]&&(DynamicPages.Uploading.share_meta_size-=DynamicPages.Uploading.files[a].size),DynamicPages.Uploading.files[a]=null,$("#inbox_file_list_item_"+a).remove(),DynamicPages.Uploading.final_files_count--,DynamicPages.Uploading.share_meta_count--,DynamicPages.Uploading.adjust_nano_scroller());DynamicPages.Uploading.adjust_files_list_visibility();DynamicPages.Uploading.display_share_meta();return!1});return!1},attach_send_files:function(a){return!1},verify_and_upload:function(){var a=
this;if(0==a.final_files_count)return!1;a.uploading_done_count=0;var c=DynamicPages.Uploading.extract_file_extensions(),b=Jmp.Helpers.queryStringArrayToJSON($("#dynamic-form").serializeArray()),h=a.get_first_file_name(),k=DynamicPages.Uploading.get_files_size();c={form_info:b,file_extensions:c,first_file_name:h,files_size:k,files_count:a.final_files_count};$(".container.programatic-page").addClass("uploading");$("#progress_section h4, #upload_complete .file_name").html(h);$.post("/viewer/create-bucket",
Jmp.Helpers.get_secure_params(c),function(l){0==l.bucket_id?(Jmp.App.Notifications.display_notification({type:"error",message:"Some server side error occured. Please try again"}).close_notification(),$("#guest-file-upload").val(""),DynamicPages.Uploading.start_from_scratch(),$(".container.programatic-page").removeClass("uploading"),$("#progress_section h4, #upload_complete .file_name").html("")):-1==l.status?(l.code&&"daily_limit_reached"==l.code?Jmp.App.Lightbox.show({type:"programatic_uploaded_daily_limit_reached"}):
Jmp.App.Notifications.display_notification({type:"error",message:l.message}).close_notification(),$("#guest-file-upload").val(""),DynamicPages.Uploading.start_from_scratch(),$(".container.programatic-page").removeClass("uploading"),$("#progress_section h4, #upload_complete .file_name").html("")):(a.bucket_id=l.bucket_id,a.source=l.source,Jmp.App.FormInfo={inbox_name:b.inbox_name,inbox_hash:b.inbox_hash},DynamicPages.Uploading.start_uploading(l))})},attach_send_files_form:function(){$("#dynamic-form").live("submit",
function(a){return!1})},handle_files_selected:function(a){var c=[],b=this.files.length;$.each(a,function(h,k){DynamicPages.Uploading.validate_file(k)&&(k.id="XHR_"+b,k.fileId=b,b+=1,c.push(k),DynamicPages.Uploading.share_meta_count+=1,DynamicPages.Uploading.share_meta_size+=k.size)});this.display_final_files(c);this.files.push.apply(this.files,c);this.final_files_count+=c.length;this.display_share_meta();this.adjust_files_list_visibility();this.adjust_nano_scroller();this.verify_and_upload()},validate_file:function(a){var c=
a.name;c=c.substr(c.lastIndexOf(".")+1,c.length).toLowerCase();if(!all_formats.hasOwnProperty(c))return Jmp.App.Notifications.display_notification({type:"error",message:"Unsupported file format."}).close_notification(),!1;if(!supported_formats.hasOwnProperty(c))return Jmp.App.Lightbox.show({type:"different_format_upload_on_programatic_pages",data:{src,src_type:supported_format_name,target_type:c,target_link:all_formats[c].link}}),!1;c=Jmp.Uploader.options.sizeLimit;if(a.size&&c&&a.size>c)Jmp.App.Lightbox.show({type:"programatic_uploaded_larger_file",
data:{limit:Math.round(c/1024/1024*100)/100+"MB"}});else return!0},handle_files_dropped:function(a){Jmp.Uploader.removeFoldersAsync(a)},perform_validation_checks_and_remove_invalid_files:function(a){for(var c=[],b=a.length,h=0;h<b;h++){console.log(k);var k=a[h],l=!0;k&&("."==k.name[0]&&(l=!1),l&&c.push(k))}DynamicPages.Uploading.handle_files_selected(c)},display_final_files:function(a){$.each(a,function(c,b){c=DynamicPages.Uploading.prepare_single_file_for_list(b);DynamicPages.Uploading.display_single_file_in_list(c)})},
prepare_single_file_for_list:function(a){return"<li id='inbox_file_list_item_"+a.fileId+"' class='clearfix'><span class='filename'>"+a.name+"</span><span class='filesize'>"+Jmp.Helpers.formatSize(a.size)+"</span><a href='#' data-index='"+a.fileId+"' class='icn-close remove_file pull-right'></a></li>"},display_single_file_in_list:function(a){$("#files_list").append(a)},attach_cancel_upload_confirmation:function(){$("#cancel_upload_confirmation").live("click",function(a){$(this).addClass("hide");$("#cancel_upload_buttons").removeClass("hide");
$("#uploading_count").addClass("hide");$("#upload_status").removeClass("hide").html("Cancel Upload?");return!1})},attach_cancel_upload_yes:function(){var a=this;$("#cancel_upload_yes").live("click",function(c){a.abort_uploading();"undefined"!=typeof a.sliced_uploader&&a.sliced_uploader.cancel_upload();Jmp.App.Notifications.display_notification({type:"error",message:"Upload cancelled"}).close_notification();return!1})},attach_cancel_upload_no:function(){$("#cancel_upload_no").live("click",function(a){$("#cancel_upload_confirmation").removeClass("hide");
$("#cancel_upload_buttons").addClass("hide");$("#uploading_count").removeClass("hide");$("#upload_status").addClass("hide").html("Uploading");$("#upload_status_finishing").addClass("hide");return!1})},attach_send_more_files:function(){$("#send_more_files").click(function(a){DynamicPages.Uploading.start_from_scratch()})},extract_file_extensions:function(){var a=[];$.each(this.files,function(c,b){b&&a.push(Jmp.Helpers.extract_file_extension(b.name))});return a.join()},get_files_size:function(){var a=
0;$.each(this.files,function(c,b){b&&(a+=b.size)});return a},start_uploading:function(a){this.override_js_uploader();this.initialize_bucket_stats(a);this.prepare_different_vars(a);this.show_uploading_interface();this.override_sliced_upload_url_prefix(a.source);this.start_speed_updates();this.upload_files()},prepare_different_vars:function(a){$.each(this.files,function(c,b){b&&(c=a.bucket_id,b.bucket=c,Jmp.Speed.update_total(b.size),Jmp.Uploader.bucketUploadSize[c].total+=b.size)})},upload_files:function(){this.current_file_id<
this.files.length&&(this.current_file_id++,this.files[this.current_file_id]?(this.uploading_files_count++,this.upload_file(this.current_file_id)):this.upload_files())},upload_file:function(a){var c=UploadManagerCollection.get_item(a);"undefined"==typeof c&&(c=new UploadManager,UploadManagerCollection.add(a,c));delete c.upload_cancelled;delete c.upload_in_progress;delete c.upload_done;c.start({},this.files[a],!0);this.sliced_uploader=c},show_uploading_interface:function(){$("#main_content").addClass("uploading").removeClass("done");
$("#uploading_count").removeClass("hide");$("#upload_status").addClass("hide").html("Uploading");$("#upload_status_finishing").addClass("hide");$("#cancel_upload_confirmation").removeClass("hide");$("#cancel_upload_buttons").addClass("hide");$("#send_more_files").addClass("hide")},initialize_bucket_stats:function(a){a=a.bucket_id;Jmp.Uploader.bucketUploads[a]={};Jmp.Uploader.bucketUploadCounts[a]={total:0,uploaded:0,cancelled:!1};Jmp.Uploader.bucketUploadSize[a]={total:0,uploaded:0,uploading:0}},
override_sliced_upload_url_prefix:function(a){SlicedUpload.url_prefix=a},start_speed_updates:function(){Jmp.Speed.bootstrap();Jmp.Speed.notify_observers=function(a){DynamicPages.Uploading.inbox_uploading_ui(a)}},inbox_uploading_ui:function(a){this.set_transfer_rate(a);this.set_uploading_count(a);this.set_progress(a.progress);this.animate_progress_bar(a.progress)},set_transfer_rate:function(a){a="Time remaining:"+a.time_remaining.replace("(","").replace(")","")+" ("+a.transfer_rate+")";$("#uploading_time_left").html(a)},
set_uploading_count:function(a){a="Uploading "+this.uploading_files_count+" of "+this.final_files_count;$("#uploading_count").html(a)},set_progress:function(a){a=Math.floor(a);99<a?($("#dynamic_upload_progress div").text(a+"%"),this.show_finishing_interface()):$("#dynamic_upload_progress div").text(a+"%");$("#progres_bar").animate({width:a+"%"},300)},animate_progress_bar:function(a){100<a&&(a=100);var c=["-webkit-transform","-ms-transform","transform"];a*=1.8;for(var b=2*a,h=c.length,k=0;k<h;k++)$(".circle .fill, .circle .mask.full").css(c[k],
"rotate("+a+"deg)"),$(".circle .fill.fix").css(c[k],"rotate("+b+"deg)")},_start_next_sliced_upload:function(a){console.log("_start_next_sliced_upload");this.current_sliced_upload_successful()&&this.upload_files()},_sliced_upload_complete:function(a,c){console.log("_sliced_upload_complete");"undefined"!=typeof this.sliced_uploader&&"undefined"==typeof this.sliced_uploader.upload_cancelled&&"undefined"!=typeof c.data&&c.data.share==this.bucket_id&&(this.uploading_done_count+=1);this.uploading_done_count>=
this._get_files_length()&&this.uploading_done(c)},_onRequest:function(){console.log("_onRequest")},onProgress:function(a,c,b){console.log("onProgress");Jmp.Speed.update_speed(b,c)},onComplete:function(a,c){console.log("Complete")},override_js_uploader:function(){js_uploader._options.onProgress=this.onProgress;js_uploader._uploadHandler=this;js_uploader._uploadHandler._files=this.files;js_uploader._uploadHandler._options={onProgress:this.onProgress}},show_done_interface:function(a){$(".container.programatic-page").addClass("uploading-finished");
var c=window.location.href;c=c.replace(/\/$/,"");var b=c.split("/");c=b[b.length-1];b=b[b.length-2];var h="";if("embedding"==b||"embedding"==c)h="?embed=1";if("lock"==b||"lock"==c)h="?lock=1";a.link&&$("#upload_complete a").attr("href",a.link+h)},show_finishing_interface:function(){$("#dynamic_upload_progress div").css("display","none");$("#dynamic_upload_progress").text("Finishing...")},uploading_done:function(a){$.post("/"+this.source+"/mark_inbox_upload_as_done",Jmp.Helpers.get_secure_params({bucket_id:this.bucket_id,
inbox_name:Jmp.App.FormInfo.inbox_name,files_count:this.final_files_count}),function(c){DynamicPages.Uploading.show_done_interface(a)})},get_first_file_name:function(){var a="";$.each(this.files,function(c,b){if(b)return a=b.name,!1});return a},adjust_nano_scroller:function(){var a=$(".nano");3<=this.final_files_count?a.css("height","120px"):a.css("height",40*this.final_files_count+"px");3<this.final_files_count?a.nanoScroller():a.nanoScroller({destroy:!0})},display_share_meta:function(){if(0===$("#files_list").find("li").length)$("#share_meta").text("").addClass("hide");
else{var a=Jmp.Helpers.get_string_based_on_count(this.share_meta_count,"file","files",!0),c=Jmp.Helpers.formatSize(this.share_meta_size);$("#share_meta").text(a+" - "+c).removeClass("hide")}},adjust_files_list_visibility:function(){var a=$("#files_list");0===a.find("li").length?(a.parent().addClass("hide"),$("#add_more_files").addClass("hide"),$("#share_meta").addClass("hide"),$("#upload_landing").removeClass("hide")):(a.parent().removeClass("hide"),$("#add_more_files").removeClass("hide"),$("#share_meta").removeClass("hide"),
$("#upload_landing").addClass("hide"))},abort_uploading:function(){this.current_file_id=-1;this.bucket_id="";this.uploading_done_count=this.uploading_files_count=0;this.inbox_uploading_ui({time_remaining:"0 mins 0 secs",transfer_rate:"0 KB/s",progress:0});Jmp.Speed.stop();this.remove_uploading_interface()},remove_uploading_interface:function(){$("#main_content").removeClass("uploading")},current_sliced_upload_successful:function(){return this.sliced_uploader.upload_cancelled?!1:!0},start_from_scratch:function(){this.files=
[];this.current_file_id=-1;this.bucket_id="";this.share_meta_size=this.share_meta_count=this.final_files_count=this.uploading_done_count=this.uploading_files_count=0;$("#sender_subject").val("");$("#sender_message").val("");$("#files_list").html("");this.inbox_uploading_ui({time_remaining:"0 mins 0 secs",transfer_rate:"0 KB/s",progress:0});Jmp.Speed.stop();this.remove_uploading_interface();this.adjust_nano_scroller();this.adjust_files_list_visibility();$("#upload_container").append('<div id="upload_status_finishing" class="status hide">Finishing upload</div>')},
_get_files_length:function(){for(var a=0,c=this.files.length,b=0;b<c;b++)this.files[b]&&(a+=1);return a}}};$(function(){$("#programmatic_visitpage").live("click",function(a){window.location=$(this).attr("data-link")});$("#programmatic_upgrade").live("click",function(a){window.location="/pricing"});$("#programmatic_signup").live("click",function(a){window.location="/signup"})});var CustomNote={create_note:function(a){a.note_name=this.prepare_note_name(a.type);a=new NFile(a);js_uploader._handleUploadFiles([a])},prepare_note_name:function(a){var c=new Date,b=c.getHours();12<b&&(b%=12);var h=""+this.prefix_for_type(a);h+=" "+c.getFullYear();h+="-"+(10>c.getMonth()+1?"0"+(c.getMonth()+1):c.getMonth()+1);h+="-"+c.getDate();h=h+(" at "+b)+("."+c.getMinutes());h+="."+c.getSeconds();h+=" "+(12>c.getHours()?"AM":"PM");return h+="."+this.extension_for_type(a)},prefix_for_type:function(a){return"note"==
a?"Note":"markdown"==a?"Markdown":"code"==a?"Code":"Note"},extension_for_type:function(a){return"note"==a?"txt":"markdown"==a?"md":"code"==a?"snippet":"txt"},type_for_extension:function(a){return"txt"==a?"note":"md"==a||"markdown"==a?"markdown":"snippet"==a?"code":"note"},update_note:function(a){var c=new NFile(a);c.bucket_file_code=a.bucket_file_code;js_uploader._handleUploadFiles([c])}},NFile=function(a){this.note=a.note;this.name=a.note_name;this.size=a.note.length;this.type=""};var SWFUpload,swfobject;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)});SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings={},this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(a),this.loadSupport(),this.swfuploadPreload()&&this.loadFlash(),this.displayDebugInfo()}catch(c){throw delete SWFUpload.instances[this.movieName],c;}};
SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.5.0 2010-01-15 Beta 2";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,RESIZE:-300};
SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.RESIZE_ENCODING={JPEG:-1,PNG:-2};
SWFUpload.completeURL=function(a){try{var c="",b=-1;if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//)||""===a)return a;b=window.location.pathname.lastIndexOf("/");c=0>=b?"/":window.location.pathname.substr(0,b)+"/";return c+a}catch(h){return a}};SWFUpload.onload=function(){};
SWFUpload.prototype.initSettings=function(a){this.ensureDefault=function(c,b){var h=a[c];this.settings[c]=void 0!=h?h:b};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description",
"All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("flash9_url","swfupload_fp9.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_preload_handler",null);this.ensureDefault("swfupload_load_failed_handler",null);this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_resize_start_handler",null);this.ensureDefault("upload_start_handler",
null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("mouse_click_handler",null);this.ensureDefault("mouse_out_handler",null);this.ensureDefault("mouse_over_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;this.settings.prevent_swf_caching&&
(this.settings.flash_url=this.settings.flash_url+(0>this.settings.flash_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime(),this.settings.flash9_url=this.settings.flash9_url+(0>this.settings.flash9_url.indexOf("?")?"?":"&")+"preventswfcaching="+(new Date).getTime());this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url));delete this.ensureDefault};
SWFUpload.prototype.loadSupport=function(){this.support={loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}};
SWFUpload.prototype.loadFlash=function(){if(this.support.loading)if(null!==document.getElementById(this.movieName))this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);else{var a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(void 0==a)this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["button place holder not found"]);else{var c="block"!==(a.currentStyle&&a.currentStyle.display||
window.getComputedStyle&&document.defaultView.getComputedStyle(a,null).getPropertyValue("display"))?"span":"div";c=document.createElement(c);var b=this.getFlashHTML();try{c.innerHTML=b}catch(h){this.support.loading=!1;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return}b=c.getElementsByTagName("object");!b||1<b.length||0===b.length?(this.support.loading=!1,this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"])):
(1===b.length&&(this.movieElement=b[0]),a.parentNode.replaceChild(c.firstChild,a),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement()))}}else this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"])};
SWFUpload.prototype.getFlashHTML=function(a){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" /><param name="quality" value="high" /><param name="allowScriptAccess" value="always" />',
'<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};
SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString();var c=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(c),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),
"&amp;params=",encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName));if(null===this.movieElement)throw"Could not find Flash element";return this.movieElement};
SWFUpload.prototype.buildParamString=function(){var a,c=[];var b=this.settings.post_params;if("object"===typeof b)for(a in b)b.hasOwnProperty(a)&&c.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(b[a].toString()));return c.join("&amp;")};
SWFUpload.prototype.destroy=function(){var a;try{this.cancelUpload(null,!1);if(a=this.cleanUp())try{a.parentNode.removeChild(a)}catch(c){}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(c){return!1}};
SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tflash9_url:                ",this.settings.flash9_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",
this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",
this.settings.file_queue_limit,"\n\tdebug:                    ",this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",
this.settings.button_height.toString(),"\n\tbutton_text:              ",this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_cursor:            ",this.settings.button_cursor.toString(),"\n\tbutton_disabled:          ",
this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_preload_handler assigned:  ",("function"===typeof this.settings.swfupload_preload_handler).toString(),"\n\tswfupload_load_failed_handler assigned:  ",("function"===typeof this.settings.swfupload_load_failed_handler).toString(),"\n\tswfupload_loaded_handler assigned:  ",("function"===typeof this.settings.swfupload_loaded_handler).toString(),"\n\tmouse_click_handler assigned:       ",
("function"===typeof this.settings.mouse_click_handler).toString(),"\n\tmouse_over_handler assigned:        ",("function"===typeof this.settings.mouse_over_handler).toString(),"\n\tmouse_out_handler assigned:         ",("function"===typeof this.settings.mouse_out_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof this.settings.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof this.settings.file_queued_handler).toString(),
"\n\tfile_queue_error_handler assigned:  ",("function"===typeof this.settings.file_queue_error_handler).toString(),"\n\tupload_resize_start_handler assigned:      ",("function"===typeof this.settings.upload_resize_start_handler).toString(),"\n\tupload_start_handler assigned:      ",("function"===typeof this.settings.upload_start_handler).toString(),"\n\tupload_progress_handler assigned:   ",("function"===typeof this.settings.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",
("function"===typeof this.settings.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof this.settings.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof this.settings.upload_complete_handler).toString(),"\n\tdebug_handler assigned:             ",("function"===typeof this.settings.debug_handler).toString(),"\nSupport:\n\tLoad:                     ",this.support.loading?"Yes":"No","\n\tImage Resize:             ",
this.support.imageResize?"Yes":"No","\n"].join(""))};SWFUpload.prototype.addSetting=function(a,c,b){return void 0==c?this.settings[a]=b:this.settings[a]=c};SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""};
SWFUpload.prototype.callFlash=function(a,c){c=c||[];var b=this.getMovieElement();try{if(void 0!=b){var h=b.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(c,0)+"</invoke>");var k=eval(h)}else this.debug("Can't call flash because the movie wasn't found.")}catch(l){this.debug("Exception calling flash function '"+a+"': "+l.message)}void 0!=k&&"object"===typeof k.post&&(k=this.unescapeFilePostParams(k));return k};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};
SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.startResizedUpload=function(a,c,b,h,k,l){this.callFlash("StartUpload",[a,{width:c,height:b,encoding:h,quality:k,allowEnlarging:l}])};SWFUpload.prototype.cancelUpload=function(a,c){!1!==c&&(c=!0);this.callFlash("CancelUpload",[a,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};
SWFUpload.prototype.requeueUpload=function(a){return this.callFlash("RequeueUpload",[a])};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};
SWFUpload.prototype.getQueueFile=function(a){return"number"===typeof a?this.callFlash("GetFileByQueueIndex",[a]):this.callFlash("GetFile",[a])};SWFUpload.prototype.addFileParam=function(a,c,b){return this.callFlash("AddFileParam",[a,c,b])};SWFUpload.prototype.removeFileParam=function(a,c){this.callFlash("RemoveFileParam",[a,c])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};
SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,c){this.settings.post_params[a]=c;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};
SWFUpload.prototype.setFileTypes=function(a,c){this.settings.file_types=a;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[a,c])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};
SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};
SWFUpload.prototype.setHTTPSuccess=function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};
SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,c){this.settings.button_width=a;this.settings.button_height=c;var b=this.getMovieElement();void 0!=b&&(b.style.width=a+"px",b.style.height=c+"px");this.callFlash("SetButtonDimensions",[a,c])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};
SWFUpload.prototype.setButtonTextPadding=function(a,c){this.settings.button_text_top_padding=c;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,c])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};
SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};
SWFUpload.prototype.queueEvent=function(a,c){var b=this;void 0==c?c=[]:c instanceof Array||(c=[c]);if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,c)}),setTimeout(function(){b.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function";};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)};
SWFUpload.prototype.unescapeFilePostParams=function(a){var c=/[$]([0-9a-f]{4})/i,b={},h,k,l;if(void 0!=a){for(k in a.post)if(a.post.hasOwnProperty(k)){for(h=k;null!==(l=c.exec(h));)h=h.replace(l[0],String.fromCharCode(parseInt("0x"+l[1],16)));b[h]=a.post[k]}a.post=b}return a};
SWFUpload.prototype.swfuploadPreload=function(){if("function"===typeof this.settings.swfupload_preload_handler)var a=this.settings.swfupload_preload_handler.call(this);else if(void 0!=this.settings.swfupload_preload_handler)throw"upload_start_handler must be a function";void 0===a&&(a=!0);return!!a};SWFUpload.prototype.flashReady=function(){this.cleanUp()?this.queueEvent("swfupload_loaded_handler"):this.debug("Flash called back ready but the flash movie can't be found.")};
SWFUpload.prototype.cleanUp=function(){var a,c=this.getMovieElement();try{if(c&&"unknown"===typeof c.CallFunction)for(a in this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"),c)try{"function"===typeof c[a]&&(c[a]=null)}catch(b){}}catch(b){}window.__flash__removeCallback=function(b,h){try{b&&(b[h]=null)}catch(k){}};return c};SWFUpload.prototype.mouseClick=function(){this.queueEvent("mouse_click_handler")};SWFUpload.prototype.mouseOver=function(){this.queueEvent("mouse_over_handler")};
SWFUpload.prototype.mouseOut=function(){this.queueEvent("mouse_out_handler")};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};
SWFUpload.prototype.fileDialogComplete=function(a,c,b){this.queueEvent("file_dialog_complete_handler",[a,c,b])};SWFUpload.prototype.uploadResizeStart=function(a,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_resize_start_handler",[a,c.width,c.height,c.encoding,c.quality])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};
SWFUpload.prototype.returnUploadStart=function(a){if("function"===typeof this.settings.upload_start_handler){a=this.unescapeFilePostParams(a);var c=this.settings.upload_start_handler.call(this,a)}else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===c&&(c=!0);this.callFlash("ReturnUploadStart",[!!c])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};
SWFUpload.prototype.uploadError=function(a,c,b){this.callFlash("StopUpload");a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,c,b])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};
SWFUpload.prototype.debugMessage=function(a){var c;if(this.settings.debug){var b=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(c in a)a.hasOwnProperty(c)&&b.push(c+": "+a[c]);a=b.join("\n")||"";b=a.split("\n");a="EXCEPTION: "+b.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else SWFUpload.Console.writeLine(a)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(a){try{var c=document.getElementById("SWFUpload_Console");if(!c){var b=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(b);c=document.createElement("textarea");c.id="SWFUpload_Console";c.style.fontFamily="monospace";c.setAttribute("wrap","off");c.wrap="off";c.style.overflow="auto";c.style.width="700px";c.style.height="350px";c.style.margin="5px";b.appendChild(c)}c.value+=a+"\n";c.scrollTop=c.scrollHeight-c.clientHeight}catch(h){alert("Exception: "+
h.name+" Message: "+h.message)}};
swfobject=function(){function a(){if(!fa){try{var X=E.getElementsByTagName("body")[0].appendChild(E.createElement("span"));X.parentNode.removeChild(X)}catch(P){return}fa=!0;X=J.length;for(var ja=0;ja<X;ja++)J[ja]()}}function c(X){fa?X():J[J.length]=X}function b(X){if("undefined"!=typeof F.addEventListener)F.addEventListener("load",X,!1);else if("undefined"!=typeof E.addEventListener)E.addEventListener("load",X,!1);else if("undefined"!=typeof F.attachEvent)x(F,"onload",X);else if("function"==typeof F.onload){var ja=
F.onload;F.onload=function(){ja();X()}}else F.onload=X}function h(){var X=E.getElementsByTagName("body")[0],ja=E.createElement("object");ja.setAttribute("type","application/x-shockwave-flash");var P=X.appendChild(ja);if(P){var ca=0;(function(){if("undefined"!=typeof P.GetVariable){var ea=P.GetVariable("$version");ea&&(ea=ea.split(" ")[1].split(","),ta.pv=[parseInt(ea[0],10),parseInt(ea[1],10),parseInt(ea[2],10)])}else if(10>ca){ca++;setTimeout(arguments.callee,10);return}X.removeChild(ja);P=null;
k()})()}else k()}function k(){var X=O.length;if(0<X)for(var ja=0;ja<X;ja++){var P=O[ja].id,ca=O[ja].callbackFn,ea={success:!1,id:P};if(0<ta.pv[0]){var sa=v(P);if(sa)if(!y(O[ja].swfVersion)||ta.wk&&312>ta.wk)if(O[ja].expressInstall&&m()){ea={};ea.data=O[ja].expressInstall;ea.width=sa.getAttribute("width")||"0";ea.height=sa.getAttribute("height")||"0";sa.getAttribute("class")&&(ea.styleclass=sa.getAttribute("class"));sa.getAttribute("align")&&(ea.align=sa.getAttribute("align"));var qa={};sa=sa.getElementsByTagName("param");
for(var R=sa.length,Z=0;Z<R;Z++)"movie"!=sa[Z].getAttribute("name").toLowerCase()&&(qa[sa[Z].getAttribute("name")]=sa[Z].getAttribute("value"));n(ea,qa,P,ca)}else p(sa),ca&&ca(ea);else C(P,!0),ca&&(ea.success=!0,ea.ref=l(P),ca(ea))}else C(P,!0),ca&&((P=l(P))&&"undefined"!=typeof P.SetVariable&&(ea.success=!0,ea.ref=P),ca(ea))}}function l(X){var ja=null;(X=v(X))&&"OBJECT"==X.nodeName&&("undefined"!=typeof X.SetVariable?ja=X:(X=X.getElementsByTagName("object")[0])&&(ja=X));return ja}function m(){return!xa&&
y("6.0.65")&&(ta.win||ta.mac)&&!(ta.wk&&312>ta.wk)}function n(X,ja,P,ca){xa=!0;da=ca||null;ma={success:!1,id:P};var ea=v(P);if(ea){"OBJECT"==ea.nodeName?(M=r(ea),W=null):(M=ea,W=P);X.id="SWFObjectExprInst";if("undefined"==typeof X.width||!/%$/.test(X.width)&&310>parseInt(X.width,10))X.width="310";if("undefined"==typeof X.height||!/%$/.test(X.height)&&137>parseInt(X.height,10))X.height="137";E.title=E.title.slice(0,47)+" - Flash Player Installation";ca=ta.ie&&ta.win?"ActiveX":"PlugIn";ca="MMredirectURL="+
F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ca+"&MMdoctitle="+E.title;ja.flashvars="undefined"!=typeof ja.flashvars?ja.flashvars+("&"+ca):ca;ta.ie&&ta.win&&4!=ea.readyState&&(ca=E.createElement("div"),P+="SWFObjectNew",ca.setAttribute("id",P),ea.parentNode.insertBefore(ca,ea),ea.style.display="none",function(){4==ea.readyState?ea.parentNode.removeChild(ea):setTimeout(arguments.callee,10)}());q(X,ja,P)}}function p(X){if(ta.ie&&ta.win&&4!=X.readyState){var ja=E.createElement("div");X.parentNode.insertBefore(ja,
X);ja.parentNode.replaceChild(r(X),ja);X.style.display="none";(function(){4==X.readyState?X.parentNode.removeChild(X):setTimeout(arguments.callee,10)})()}else X.parentNode.replaceChild(r(X),X)}function r(X){var ja=E.createElement("div");if(ta.win&&ta.ie)ja.innerHTML=X.innerHTML;else if(X=X.getElementsByTagName("object")[0])if(X=X.childNodes)for(var P=X.length,ca=0;ca<P;ca++)1==X[ca].nodeType&&"PARAM"==X[ca].nodeName||8==X[ca].nodeType||ja.appendChild(X[ca].cloneNode(!0));return ja}function q(X,ja,
P){var ca=v(P);if(ta.wk&&312>ta.wk)return R;if(ca)if("undefined"==typeof X.id&&(X.id=P),ta.ie&&ta.win){var ea="";for(sa in X)X[sa]!=Object.prototype[sa]&&("data"==sa.toLowerCase()?ja.movie=X[sa]:"styleclass"==sa.toLowerCase()?ea+=' class="'+X[sa]+'"':"classid"!=sa.toLowerCase()&&(ea+=" "+sa+'="'+X[sa]+'"'));var sa="";for(var qa in ja)ja[qa]!=Object.prototype[qa]&&(sa+='<param name="'+qa+'" value="'+ja[qa]+'" />');ca.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ea+">"+sa+
"</object>";T[T.length]=X.id;var R=v(X.id)}else{qa=E.createElement("object");qa.setAttribute("type","application/x-shockwave-flash");for(var Z in X)X[Z]!=Object.prototype[Z]&&("styleclass"==Z.toLowerCase()?qa.setAttribute("class",X[Z]):"classid"!=Z.toLowerCase()&&qa.setAttribute(Z,X[Z]));for(ea in ja)ja[ea]!=Object.prototype[ea]&&"movie"!=ea.toLowerCase()&&(X=qa,sa=ea,Z=ja[ea],P=E.createElement("param"),P.setAttribute("name",sa),P.setAttribute("value",Z),X.appendChild(P));ca.parentNode.replaceChild(qa,
ca);R=qa}return R}function u(X){var ja=v(X);ja&&"OBJECT"==ja.nodeName&&(ta.ie&&ta.win?(ja.style.display="none",function(){if(4==ja.readyState){var P=v(X);if(P){for(var ca in P)"function"==typeof P[ca]&&(P[ca]=null);P.parentNode.removeChild(P)}}else setTimeout(arguments.callee,10)}()):ja.parentNode.removeChild(ja))}function v(X){var ja=null;try{ja=E.getElementById(X)}catch(P){}return ja}function x(X,ja,P){X.attachEvent(ja,P);Q[Q.length]=[X,ja,P]}function y(X){var ja=ta.pv;X=X.split(".");X[0]=parseInt(X[0],
10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return ja[0]>X[0]||ja[0]==X[0]&&ja[1]>X[1]||ja[0]==X[0]&&ja[1]==X[1]&&ja[2]>=X[2]?!0:!1}function B(X,ja,P,ca){if(!ta.ie||!ta.mac){var ea=E.getElementsByTagName("head")[0];ea&&(P=P&&"string"==typeof P?P:"screen",ca&&(Da=Ea=null),Ea&&Da==P||(ca=E.createElement("style"),ca.setAttribute("type","text/css"),ca.setAttribute("media",P),Ea=ea.appendChild(ca),ta.ie&&ta.win&&"undefined"!=typeof E.styleSheets&&0<E.styleSheets.length&&(Ea=E.styleSheets[E.styleSheets.length-
1]),Da=P),ta.ie&&ta.win?Ea&&"object"==typeof Ea.addRule&&Ea.addRule(X,ja):Ea&&"undefined"!=typeof E.createTextNode&&Ea.appendChild(E.createTextNode(X+" {"+ja+"}")))}}function C(X,ja){Fa&&(ja=ja?"visible":"hidden",fa&&v(X)?v(X).style.visibility=ja:B("#"+X,"visibility:"+ja))}function H(X){return null!=/[\\"<>\.;]/.exec(X)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(X):X}var F=window,E=document,G=navigator,K=!1,J=[function(){K?h():k()}],O=[],T=[],Q=[],M,W,da,ma,fa=!1,xa=!1,Ea,Da,Fa=!0,
ta=function(){var X="undefined"!=typeof E.getElementById&&"undefined"!=typeof E.getElementsByTagName&&"undefined"!=typeof E.createElement,ja=G.userAgent.toLowerCase(),P=G.platform.toLowerCase(),ca=P?/win/.test(P):/win/.test(ja);P=P?/mac/.test(P):/mac/.test(ja);ja=/webkit/.test(ja)?parseFloat(ja.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var ea=!+"\v1",sa=[0,0,0],qa=null;if("undefined"!=typeof G.plugins&&"object"==typeof G.plugins["Shockwave Flash"])!(qa=G.plugins["Shockwave Flash"].description)||
"undefined"!=typeof G.mimeTypes&&G.mimeTypes["application/x-shockwave-flash"]&&!G.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(K=!0,ea=!1,qa=qa.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),sa[0]=parseInt(qa.replace(/^(.*)\..*$/,"$1"),10),sa[1]=parseInt(qa.replace(/^.*\.(.*)\s.*$/,"$1"),10),sa[2]=/[a-zA-Z]/.test(qa)?parseInt(qa.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof F.ActiveXObject)try{if(qa=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))ea=
!0,qa=qa.split(" ")[1].split(","),sa=[parseInt(qa[0],10),parseInt(qa[1],10),parseInt(qa[2],10)]}catch(R){}return{w3:X,pv:sa,wk:ja,ie:ea,win:ca,mac:P}}();(function(){ta.w3&&(("undefined"!=typeof E.readyState&&"complete"==E.readyState||"undefined"==typeof E.readyState&&(E.getElementsByTagName("body")[0]||E.body))&&a(),fa||("undefined"!=typeof E.addEventListener&&E.addEventListener("DOMContentLoaded",a,!1),ta.ie&&ta.win&&(E.attachEvent("onreadystatechange",function(){"complete"==E.readyState&&(E.detachEvent("onreadystatechange",
arguments.callee),a())}),F==top&&function(){if(!fa){try{E.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}a()}}()),ta.wk&&function(){fa||(/loaded|complete/.test(E.readyState)?a():setTimeout(arguments.callee,0))}(),b(a)))})();(function(){ta.ie&&ta.win&&window.attachEvent("onunload",function(){for(var X=Q.length,ja=0;ja<X;ja++)Q[ja][0].detachEvent(Q[ja][1],Q[ja][2]);X=T.length;for(ja=0;ja<X;ja++)u(T[ja]);for(var P in ta)ta[P]=null;ta=null;for(var ca in swfobject)swfobject[ca]=
null;swfobject=null})})();return{registerObject:function(X,ja,P,ca){if(ta.w3&&X&&ja){var ea={};ea.id=X;ea.swfVersion=ja;ea.expressInstall=P;ea.callbackFn=ca;O[O.length]=ea;C(X,!1)}else ca&&ca({success:!1,id:X})},getObjectById:function(X){if(ta.w3)return l(X)},embedSWF:function(X,ja,P,ca,ea,sa,qa,R,Z,Y){var ha={success:!1,id:ja};ta.w3&&!(ta.wk&&312>ta.wk)&&X&&ja&&P&&ca&&ea?(C(ja,!1),c(function(){P+="";ca+="";var A={};if(Z&&"object"===typeof Z)for(var va in Z)A[va]=Z[va];A.data=X;A.width=P;A.height=
ca;va={};if(R&&"object"===typeof R)for(var ra in R)va[ra]=R[ra];if(qa&&"object"===typeof qa)for(var na in qa)va.flashvars="undefined"!=typeof va.flashvars?va.flashvars+("&"+na+"="+qa[na]):na+"="+qa[na];if(y(ea))ra=q(A,va,ja),A.id==ja&&C(ja,!0),ha.success=!0,ha.ref=ra;else{if(sa&&m()){A.data=sa;n(A,va,ja,Y);return}C(ja,!0)}Y&&Y(ha)})):Y&&Y(ha)},switchOffAutoHideShow:function(){Fa=!1},ua:ta,getFlashPlayerVersion:function(){return{major:ta.pv[0],minor:ta.pv[1],release:ta.pv[2]}},hasFlashPlayerVersion:y,
createSWF:function(X,ja,P){if(ta.w3)return q(X,ja,P)},showExpressInstall:function(X,ja,P,ca){ta.w3&&m()&&n(X,ja,P,ca)},removeSWF:function(X){ta.w3&&u(X)},createCSS:function(X,ja,P,ca){ta.w3&&B(X,ja,P,ca)},addDomLoadEvent:c,addLoadEvent:b,getQueryParamValue:function(X){var ja=E.location.search||E.location.hash;if(ja){/\?/.test(ja)&&(ja=ja.split("?")[1]);if(null==X)return H(ja);ja=ja.split("&");for(var P=0;P<ja.length;P++)if(ja[P].substring(0,ja[P].indexOf("="))==X)return H(ja[P].substring(ja[P].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(xa){var X=v("SWFObjectExprInst");X&&M&&(X.parentNode.replaceChild(M,X),W&&(C(W,!0),ta.ie&&ta.win&&(M.style.display="block")),da&&da(ma));xa=!1}}}}();swfobject.addDomLoadEvent(function(){"function"===typeof SWFUpload.onload&&SWFUpload.onload.call(window)});/*
 Socket.IO v4.0.0
 (c) 2014-2021 Guillermo Rauch
 Released under the MIT License.
 ************************ !*\
  !*** ./build/index.js ***!
  \*********************** no static exports found  ./url  ./manager  ./socket  debug  socket.io-parser  ************************** !*\
  !*** ./build/manager.js ***!
  \************************* engine.io-client  ./on  backo2  ./typed-events  ********************* !*\
  !*** ./build/on.js ***!
  \******************** ************************* !*\
  !*** ./build/socket.js ***!
  \************************ ******************************* !*\
  !*** ./build/typed-events.js ***!
  \****************************** component-emitter  ********************** !*\
  !*** ./build/url.js ***!
  \********************* parseuri  ************************************** !*\
  !*** ./node_modules/backo2/index.js ***!
  \************************************* ************************************************* !*\
  !*** ./node_modules/component-emitter/index.js ***!
  \************************************************ ******************************************* !*\
  !*** ./node_modules/debug/src/browser.js ***!
  \****************************************** ./common  ****************************************** !*\
  !*** ./node_modules/debug/src/common.js ***!
  \***************************************** ms  ***************************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/globalThis.browser.js ***!
  \**************************************************************** **************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/index.js ***!
  \*************************************************** ./transport  ./transports/index  engine.io-parser  ***************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/socket.js ***!
  \**************************************************** parseqs  ******************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/transport.js ***!
  \******************************************************* *************************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
  \************************************************************** ../../contrib/xmlhttprequest-ssl/XMLHttpRequest  ./polling-xhr  ./polling-jsonp  ./websocket  *********************************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
  \********************************************************************** ./polling  ../globalThis  ********************************************************************* !*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
  \******************************************************************** ../util  ***************************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
  \**************************************************************** ../transport  yeast  *************************************************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js ***!
  \************************************************************************************** ******************************************************************* !*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
  \****************************************************************** ./websocket-constructor  *************************************************** !*\
  !*** ./node_modules/engine.io-client/lib/util.js ***!
  \************************************************** ************************************************************* !*\
  !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
  \************************************************************ has-cors  ./globalThis  ****************************************************** !*\
  !*** ./node_modules/engine.io-parser/lib/commons.js ***!
  \***************************************************** ******************************************************************* !*\
  !*** ./node_modules/engine.io-parser/lib/decodePacket.browser.js ***!
  \****************************************************************** ./commons  base64-arraybuffer  ******************************************************************* !*\
  !*** ./node_modules/engine.io-parser/lib/encodePacket.browser.js ***!
  \****************************************************************** **************************************************** !*\
  !*** ./node_modules/engine.io-parser/lib/index.js ***!
  \*************************************************** ./encodePacket  ./decodePacket  ************************************************************************************************* !*\
  !*** ./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \************************************************************************************************ **************************************** !*\
  !*** ./node_modules/has-cors/index.js ***!
  \*************************************** ********************************** !*\
  !*** ./node_modules/ms/index.js ***!
  \********************************* *************************************** !*\
  !*** ./node_modules/parseqs/index.js ***!
  \************************************** **************************************** !*\
  !*** ./node_modules/parseuri/index.js ***!
  \*************************************** ****************************************************** !*\
  !*** ./node_modules/socket.io-parser/dist/binary.js ***!
  \***************************************************** ./is-binary  ***************************************************** !*\
  !*** ./node_modules/socket.io-parser/dist/index.js ***!
  \**************************************************** ./binary  ********************************************************* !*\
  !*** ./node_modules/socket.io-parser/dist/is-binary.js ***!
  \******************************************************** ************************************* !*\
  !*** ./node_modules/yeast/index.js ***!
  \*************************************/
(function(a,c){"object"===typeof exports&&"object"===typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):"object"===typeof exports?exports.io=c():a.io=c()})(self,function(){return function(a){function c(h){if(b[h])return b[h].exports;var k=b[h]={i:h,l:!1,exports:{}};a[h].call(k.exports,k,k.exports,c);k.l=!0;return k.exports}var b={};c.m=a;c.c=b;c.d=function(h,k,l){c.o(h,k)||Object.defineProperty(h,k,{enumerable:!0,get:l})};c.r=function(h){"undefined"!==typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})};c.t=function(h,k){k&1&&(h=c(h));if(k&8||k&4&&"object"===typeof h&&h&&h.__esModule)return h;var l=Object.create(null);c.r(l);Object.defineProperty(l,"default",{enumerable:!0,value:h});if(k&2&&"string"!=typeof h)for(var m in h)c.d(l,m,function(n){return h[n]}.bind(null,m));return l};c.n=function(h){var k=h&&h.__esModule?function(){return h["default"]}:function(){return h};
c.d(k,"a",k);return k};c.o=function(h,k){return Object.prototype.hasOwnProperty.call(h,k)};c.p="";return c(c.s="./build/index.js")}({"./build/index.js":function(a,c,b){function h(v){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"===typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};return h(v)}function k(v,x){"object"===h(v)&&(x=v,v=void 0);x=x||{};v=l.url(v,x.path);
var y=v.source,B=v.id,C=v.path;C=r[B]&&C in r[B].nsps;x.forceNew||x["force new connection"]||!1===x.multiplex||C?(p("ignoring socket cache for %s",y),y=new m.Manager(y,x)):(r[B]||(p("new io instance for %s",y),r[B]=new m.Manager(y,x)),y=r[B]);v.query&&!x.query&&(x.query=v.queryKey);return y.socket(v.path,x)}Object.defineProperty(c,"__esModule",{value:!0});c.Socket=c.io=c.Manager=c.protocol=void 0;var l=b("./build/url.js"),m=b("./build/manager.js"),n=b("./build/socket.js");Object.defineProperty(c,
"Socket",{enumerable:!0,get:function(){return n.Socket}});var p=b("./node_modules/debug/src/browser.js")("socket.io-client");a.exports=c=k;var r=c.managers={};c.io=k;var q=b("./node_modules/socket.io-parser/dist/index.js");Object.defineProperty(c,"protocol",{enumerable:!0,get:function(){return q.protocol}});c.connect=k;var u=b("./build/manager.js");Object.defineProperty(c,"Manager",{enumerable:!0,get:function(){return u.Manager}})},"./build/manager.js":function(a,c,b){function h(H){"@babel/helpers - typeof";
h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"===typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F};return h(H)}function k(H,F){for(var E=0;E<F.length;E++){var G=F[E];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(H,G.key,G)}}function l(H,F,E){F&&k(H.prototype,F);E&&k(H,E);return H}function m(H,F){if("function"!==typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function");
H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,writable:!0,configurable:!0}});F&&n(H,F)}function n(H,F){n=Object.setPrototypeOf||function(E,G){E.__proto__=G;return E};return n(H,F)}function p(H){var F=r();return function(){var E=q(H);if(F){var G=q(this).constructor;E=Reflect.construct(E,arguments,G)}else E=E.apply(this,arguments);if(!E||"object"!==h(E)&&"function"!==typeof E){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");E=this}return E}}
function r(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(H){return!1}}function q(H){q=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)};return q(H)}Object.defineProperty(c,"__esModule",{value:!0});c.Manager=void 0;var u=b("./node_modules/engine.io-client/lib/index.js"),v=b("./build/socket.js"),
x=b("./node_modules/socket.io-parser/dist/index.js"),y=b("./build/on.js"),B=b("./node_modules/backo2/index.js");a=b("./build/typed-events.js");var C=b("./node_modules/debug/src/browser.js")("socket.io-client:manager");b=function(H){function F(G,K){if(!(this instanceof F))throw new TypeError("Cannot call a class as a function");var J=E.call(this);J.nsps={};J.subs=[];G&&"object"===h(G)&&(K=G,G=void 0);K=K||{};K.path=K.path||"/socket.io";J.opts=K;J.reconnection(!1!==K.reconnection);J.reconnectionAttempts(K.reconnectionAttempts||
Infinity);J.reconnectionDelay(K.reconnectionDelay||1E3);J.reconnectionDelayMax(K.reconnectionDelayMax||5E3);J.randomizationFactor(K.randomizationFactor||.5);J.backoff=new B({min:J.reconnectionDelay(),max:J.reconnectionDelayMax(),jitter:J.randomizationFactor()});J.timeout(null==K.timeout?2E4:K.timeout);J._readyState="closed";J.uri=G;G=K.parser||x;J.encoder=new G.Encoder;J.decoder=new G.Decoder;J._autoConnect=!1!==K.autoConnect;J._autoConnect&&J.open();return J}m(F,H);var E=p(F);l(F,[{key:"reconnection",
value:function(G){if(!arguments.length)return this._reconnection;this._reconnection=!!G;return this}},{key:"reconnectionAttempts",value:function(G){if(void 0===G)return this._reconnectionAttempts;this._reconnectionAttempts=G;return this}},{key:"reconnectionDelay",value:function(G){var K;if(void 0===G)return this._reconnectionDelay;this._reconnectionDelay=G;null===(K=this.backoff)||void 0===K?void 0:K.setMin(G);return this}},{key:"randomizationFactor",value:function(G){var K;if(void 0===G)return this._randomizationFactor;
this._randomizationFactor=G;null===(K=this.backoff)||void 0===K?void 0:K.setJitter(G);return this}},{key:"reconnectionDelayMax",value:function(G){var K;if(void 0===G)return this._reconnectionDelayMax;this._reconnectionDelayMax=G;null===(K=this.backoff)||void 0===K?void 0:K.setMax(G);return this}},{key:"timeout",value:function(G){if(!arguments.length)return this._timeout;this._timeout=G;return this}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&
this.reconnect()}},{key:"open",value:function(G){var K=this;C("readyState %s",this._readyState);if(~this._readyState.indexOf("open"))return this;C("opening %s",this.uri);var J=this.engine=u(this.uri,this.opts),O=this;this._readyState="opening";this.skipReconnect=!1;var T=y.on(J,"open",function(){O.onopen();G&&G()}),Q=y.on(J,"error",function(da){C("error");O.cleanup();O._readyState="closed";K.emitReserved("error",da);G?G(da):O.maybeReconnectOnOpen()});if(!1!==this._timeout){var M=this._timeout;C("connect attempt will timeout after %d",
M);0===M&&T();var W=setTimeout(function(){C("connect attempt timed out after %d",M);T();J.close();J.emit("error",Error("timeout"))},M);this.opts.autoUnref&&W.unref();this.subs.push(function(){clearTimeout(W)})}this.subs.push(T);this.subs.push(Q);return this}},{key:"connect",value:function(G){return this.open(G)}},{key:"onopen",value:function(){C("open");this.cleanup();this._readyState="open";this.emitReserved("open");var G=this.engine;this.subs.push(y.on(G,"ping",this.onping.bind(this)),y.on(G,"data",
this.ondata.bind(this)),y.on(G,"error",this.onerror.bind(this)),y.on(G,"close",this.onclose.bind(this)),y.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(G){this.decoder.add(G)}},{key:"ondecoded",value:function(G){this.emitReserved("packet",G)}},{key:"onerror",value:function(G){C("error",G);this.emitReserved("error",G)}},{key:"socket",value:function(G,K){var J=this.nsps[G];J||(J=new v.Socket(this,G,K),
this.nsps[G]=J);return J}},{key:"_destroy",value:function(G){G=0;for(var K=Object.keys(this.nsps);G<K.length;G++){var J=K[G];if(this.nsps[J].active){C("socket %s is still active, skipping close",J);return}}this._close()}},{key:"_packet",value:function(G){C("writing packet %j",G);for(var K=this.encoder.encode(G),J=0;J<K.length;J++)this.engine.write(K[J],G.options)}},{key:"cleanup",value:function(){C("cleanup");this.subs.forEach(function(G){return G()});this.subs.length=0;this.decoder.destroy()}},{key:"_close",
value:function(){C("disconnect");this.skipReconnect=!0;this._reconnecting=!1;"opening"===this._readyState&&this.cleanup();this.backoff.reset();this._readyState="closed";this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(G){C("onclose");this.cleanup();this.backoff.reset();this._readyState="closed";this.emitReserved("close",G);this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var G=this;
if(this._reconnecting||this.skipReconnect)return this;var K=this;if(this.backoff.attempts>=this._reconnectionAttempts)C("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var J=this.backoff.duration();C("will wait %dms before reconnect attempt",J);this._reconnecting=!0;var O=setTimeout(function(){K.skipReconnect||(C("attempting reconnect"),G.emitReserved("reconnect_attempt",K.backoff.attempts),K.skipReconnect||K.open(function(T){T?(C("reconnect attempt error"),
K._reconnecting=!1,K.reconnect(),G.emitReserved("reconnect_error",T)):(C("reconnect success"),K.onreconnect())}))},J);this.opts.autoUnref&&O.unref();this.subs.push(function(){clearTimeout(O)})}}},{key:"onreconnect",value:function(){var G=this.backoff.attempts;this._reconnecting=!1;this.backoff.reset();this.emitReserved("reconnect",G)}}]);return F}(a.StrictEventEmitter);c.Manager=b},"./build/on.js":function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});c.on=void 0;c.on=function(h,k,l){h.on(k,
l);return function(){h.off(k,l)}}},"./build/socket.js":function(a,c,b){function h(E){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(G){return typeof G}:function(G){return G&&"function"===typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G};return h(E)}function k(E,G){var K;if("undefined"===typeof Symbol||null==E[Symbol.iterator]){if(Array.isArray(E)||(K=l(E))||G&&E&&"number"===typeof E.length){K&&(E=K);var J=0;G=function(){};
return{s:G,n:function(){return J>=E.length?{done:!0}:{done:!1,value:E[J++]}},e:function(M){throw M;},f:G}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var O=!0,T=!1,Q;return{s:function(){K=E[Symbol.iterator]()},n:function(){var M=K.next();O=M.done;return M},e:function(M){T=!0;Q=M},f:function(){try{if(!O&&null!=K["return"])K["return"]()}finally{if(T)throw Q;}}}}function l(E,G){if(E){if("string"===
typeof E)return m(E,G);var K=Object.prototype.toString.call(E).slice(8,-1);"Object"===K&&E.constructor&&(K=E.constructor.name);if("Map"===K||"Set"===K)return Array.from(E);if("Arguments"===K||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return m(E,G)}}function m(E,G){if(null==G||G>E.length)G=E.length;for(var K=0,J=Array(G);K<G;K++)J[K]=E[K];return J}function n(E,G){for(var K=0;K<G.length;K++){var J=G[K];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(E,
J.key,J)}}function p(E,G,K){G&&n(E.prototype,G);K&&n(E,K);return E}function r(E,G,K){r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(J,O,T){for(;!Object.prototype.hasOwnProperty.call(J,O)&&(J=y(J),null!==J););if(J)return O=Object.getOwnPropertyDescriptor(J,O),O.get?O.get.call(T):O.value};return r(E,G,K||E)}function q(E,G){if("function"!==typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(G&&G.prototype,{constructor:{value:E,
writable:!0,configurable:!0}});G&&u(E,G)}function u(E,G){u=Object.setPrototypeOf||function(K,J){K.__proto__=J;return K};return u(E,G)}function v(E){var G=x();return function(){var K=y(E);if(G){var J=y(this).constructor;K=Reflect.construct(K,arguments,J)}else K=K.apply(this,arguments);if(!K||"object"!==h(K)&&"function"!==typeof K){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");K=this}return K}}function x(){if("undefined"===typeof Reflect||!Reflect.construct||
Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(E){return!1}}function y(E){y=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)};return y(E)}Object.defineProperty(c,"__esModule",{value:!0});c.Socket=void 0;var B=b("./node_modules/socket.io-parser/dist/index.js"),C=b("./build/on.js");a=b("./build/typed-events.js");var H=b("./node_modules/debug/src/browser.js")("socket.io-client:socket"),
F=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});b=function(E){function G(J,O,T){if(!(this instanceof G))throw new TypeError("Cannot call a class as a function");var Q=K.call(this);Q.receiveBuffer=[];Q.sendBuffer=[];Q.ids=0;Q.acks={};Q.flags={};Q.io=J;Q.nsp=O;Q.ids=0;Q.acks={};Q.receiveBuffer=[];Q.sendBuffer=[];Q.connected=!1;Q.disconnected=!0;Q.flags={};T&&T.auth&&(Q.auth=T.auth);Q.io._autoConnect&&Q.open();return Q}q(G,E);var K=v(G);p(G,[{key:"subEvents",
value:function(){if(!this.subs){var J=this.io;this.subs=[C.on(J,"open",this.onopen.bind(this)),C.on(J,"packet",this.onpacket.bind(this)),C.on(J,"error",this.onerror.bind(this)),C.on(J,"close",this.onclose.bind(this))]}}},{key:"connect",value:function(){if(this.connected)return this;this.subEvents();this.io._reconnecting||this.io.open();if("open"===this.io._readyState)this.onopen();return this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var J=arguments.length,
O=Array(J),T=0;T<J;T++)O[T]=arguments[T];O.unshift("message");this.emit.apply(this,O);return this}},{key:"emit",value:function(J){if(F.hasOwnProperty(J))throw Error('"'+J+'" is a reserved event name');for(var O=arguments.length,T=Array(1<O?O-1:0),Q=1;Q<O;Q++)T[Q-1]=arguments[Q];T.unshift(J);O={type:B.PacketType.EVENT,data:T,options:{}};O.options.compress=!1!==this.flags.compress;"function"===typeof T[T.length-1]&&(H("emitting packet with ack id %d",this.ids),this.acks[this.ids]=T.pop(),O.id=this.ids++);
T=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;!this.flags["volatile"]||T&&this.connected?this.connected?this.packet(O):this.sendBuffer.push(O):H("discard packet as the transport is not currently writable");this.flags={};return this}},{key:"packet",value:function(J){J.nsp=this.nsp;this.io._packet(J)}},{key:"onopen",value:function(){var J=this;H("transport is open - connecting");"function"==typeof this.auth?this.auth(function(O){J.packet({type:B.PacketType.CONNECT,data:O})}):
this.packet({type:B.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(J){this.connected||this.emitReserved("connect_error",J)}},{key:"onclose",value:function(J){H("close (%s)",J);this.connected=!1;this.disconnected=!0;delete this.id;this.emitReserved("disconnect",J)}},{key:"onpacket",value:function(J){if(J.nsp===this.nsp)switch(J.type){case B.PacketType.CONNECT:if(J.data&&J.data.sid)this.onconnect(J.data.sid);else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
break;case B.PacketType.EVENT:this.onevent(J);break;case B.PacketType.BINARY_EVENT:this.onevent(J);break;case B.PacketType.ACK:this.onack(J);break;case B.PacketType.BINARY_ACK:this.onack(J);break;case B.PacketType.DISCONNECT:this.ondisconnect();break;case B.PacketType.CONNECT_ERROR:var O=Error(J.data.message);O.data=J.data.data;this.emitReserved("connect_error",O)}}},{key:"onevent",value:function(J){var O=J.data||[];H("emitting event %j",O);null!=J.id&&(H("attaching ack callback to event"),O.push(this.ack(J.id)));
this.connected?this.emitEvent(O):this.receiveBuffer.push(Object.freeze(O))}},{key:"emitEvent",value:function(J){if(this._anyListeners&&this._anyListeners.length){var O=this._anyListeners.slice();O=k(O);var T;try{for(O.s();!(T=O.n()).done;)T.value.apply(this,J)}catch(Q){O.e(Q)}finally{O.f()}}r(y(G.prototype),"emit",this).apply(this,J)}},{key:"ack",value:function(J){var O=this,T=!1;return function(){if(!T){T=!0;for(var Q=arguments.length,M=Array(Q),W=0;W<Q;W++)M[W]=arguments[W];H("sending ack %j",M);
O.packet({type:B.PacketType.ACK,id:J,data:M})}}}},{key:"onack",value:function(J){var O=this.acks[J.id];"function"===typeof O?(H("calling ack %s with %j",J.id,J.data),O.apply(this,J.data),delete this.acks[J.id]):H("bad ack %s",J.id)}},{key:"onconnect",value:function(J){H("socket connected with id %s",J);this.id=J;this.connected=!0;this.disconnected=!1;this.emitReserved("connect");this.emitBuffered()}},{key:"emitBuffered",value:function(){var J=this;this.receiveBuffer.forEach(function(O){return J.emitEvent(O)});
this.receiveBuffer=[];this.sendBuffer.forEach(function(O){return J.packet(O)});this.sendBuffer=[]}},{key:"ondisconnect",value:function(){H("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(J){return J()}),this.subs=void 0);this.io._destroy(this)}},{key:"disconnect",value:function(){this.connected&&(H("performing disconnect (%s)",this.nsp),this.packet({type:B.PacketType.DISCONNECT}));this.destroy();
if(this.connected)this.onclose("io client disconnect");return this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(J){this.flags.compress=J;return this}},{key:"onAny",value:function(J){this._anyListeners=this._anyListeners||[];this._anyListeners.push(J);return this}},{key:"prependAny",value:function(J){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(J);return this}},{key:"offAny",value:function(J){if(!this._anyListeners)return this;if(J)for(var O=
this._anyListeners,T=0;T<O.length;T++){if(J===O[T]){O.splice(T,1);break}}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"active",get:function(){return!!this.subs}},{key:"volatile",get:function(){this.flags["volatile"]=!0;return this}}]);return G}(a.StrictEventEmitter);c.Socket=b},"./build/typed-events.js":function(a,c,b){function h(v){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(x){return typeof x}:
function(x){return x&&"function"===typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};return h(v)}function k(v,x){for(var y=0;y<x.length;y++){var B=x[y];B.enumerable=B.enumerable||!1;B.configurable=!0;"value"in B&&(B.writable=!0);Object.defineProperty(v,B.key,B)}}function l(v,x,y){x&&k(v.prototype,x);y&&k(v,y);return v}function m(v,x,y){m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(B,C,H){for(;!Object.prototype.hasOwnProperty.call(B,C)&&(B=u(B),null!==
B););if(B)return C=Object.getOwnPropertyDescriptor(B,C),C.get?C.get.call(H):C.value};return m(v,x,y||v)}function n(v,x){if("function"!==typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}});x&&p(v,x)}function p(v,x){p=Object.setPrototypeOf||function(y,B){y.__proto__=B;return y};return p(v,x)}function r(v){var x=q();return function(){var y=u(v);if(x){var B=u(this).constructor;
y=Reflect.construct(y,arguments,B)}else y=y.apply(this,arguments);if(!y||"object"!==h(y)&&"function"!==typeof y){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");y=this}return y}}function q(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function u(v){u=Object.setPrototypeOf?
Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)};return u(v)}Object.defineProperty(c,"__esModule",{value:!0});c.StrictEventEmitter=void 0;a=function(v){function x(){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");return y.apply(this,arguments)}n(x,v);var y=r(x);l(x,[{key:"on",value:function(B,C){m(u(x.prototype),"on",this).call(this,B,C);return this}},{key:"once",value:function(B,C){m(u(x.prototype),"once",this).call(this,B,C);return this}},
{key:"emit",value:function(B){for(var C,H=arguments.length,F=Array(1<H?H-1:0),E=1;E<H;E++)F[E-1]=arguments[E];(C=m(u(x.prototype),"emit",this)).call.apply(C,[this,B].concat(F));return this}},{key:"emitReserved",value:function(B){for(var C,H=arguments.length,F=Array(1<H?H-1:0),E=1;E<H;E++)F[E-1]=arguments[E];(C=m(u(x.prototype),"emit",this)).call.apply(C,[this,B].concat(F));return this}},{key:"listeners",value:function(B){return m(u(x.prototype),"listeners",this).call(this,B)}}]);return x}(b("./node_modules/component-emitter/index.js"));
c.StrictEventEmitter=a},"./build/url.js":function(a,c,b){Object.defineProperty(c,"__esModule",{value:!0});c.url=void 0;var h=b("./node_modules/parseuri/index.js"),k=b("./node_modules/debug/src/browser.js")("socket.io-client:url");c.url=function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length?arguments[2]:void 0,p=l;n=n||"undefined"!==typeof location&&location;null==l&&(l=n.protocol+"//"+n.host);"string"===typeof l&&("/"===l.charAt(0)&&(l="/"===l.charAt(1)?n.protocol+
l:n.host+l),/^(https?|wss?):\/\//.test(l)||(k("protocol-less url %s",l),l="undefined"!==typeof n?n.protocol+"//"+l:"https://"+l),k("parse %s",l),p=h(l));p.port||(/^(http|ws)$/.test(p.protocol)?p.port="80":/^(http|ws)s$/.test(p.protocol)&&(p.port="443"));p.path=p.path||"/";var r=-1!==p.host.indexOf(":")?"["+p.host+"]":p.host;p.id=p.protocol+"://"+r+":"+p.port+m;p.href=p.protocol+"://"+r+(n&&n.port===p.port?"":":"+p.port);return p}},"./node_modules/backo2/index.js":function(a,c){function b(h){h=h||
{};this.ms=h.min||100;this.max=h.max||1E4;this.factor=h.factor||2;this.jitter=0<h.jitter&&1>=h.jitter?h.jitter:0;this.attempts=0}a.exports=b;b.prototype.duration=function(){var h=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var k=Math.random(),l=Math.floor(k*this.jitter*h);h=0==(Math.floor(10*k)&1)?h-l:h+l}return Math.min(h,this.max)|0};b.prototype.reset=function(){this.attempts=0};b.prototype.setMin=function(h){this.ms=h};b.prototype.setMax=function(h){this.max=h};b.prototype.setJitter=
function(h){this.jitter=h}},"./node_modules/component-emitter/index.js":function(a,c,b){function h(k){if(k){for(var l in h.prototype)k[l]=h.prototype[l];return k}}a.exports=h;h.prototype.on=h.prototype.addEventListener=function(k,l){this._callbacks=this._callbacks||{};(this._callbacks["$"+k]=this._callbacks["$"+k]||[]).push(l);return this};h.prototype.once=function(k,l){function m(){this.off(k,m);l.apply(this,arguments)}m.fn=l;this.on(k,m);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=
h.prototype.removeEventListener=function(k,l){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var m=this._callbacks["$"+k];if(!m)return this;if(1==arguments.length)return delete this._callbacks["$"+k],this;for(var n,p=0;p<m.length;p++)if(n=m[p],n===l||n.fn===l){m.splice(p,1);break}0===m.length&&delete this._callbacks["$"+k];return this};h.prototype.emit=function(k){this._callbacks=this._callbacks||{};for(var l=Array(arguments.length-1),m=this._callbacks["$"+
k],n=1;n<arguments.length;n++)l[n-1]=arguments[n];if(m){m=m.slice(0);n=0;for(var p=m.length;n<p;++n)m[n].apply(this,l)}return this};h.prototype.listeners=function(k){this._callbacks=this._callbacks||{};return this._callbacks["$"+k]||[]};h.prototype.hasListeners=function(k){return!!this.listeners(k).length}},"./node_modules/debug/src/browser.js":function(a,c,b){c.formatArgs=function(k){k[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+k[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff);
if(this.useColors){var l="color: "+this.color;k.splice(1,0,l,"color: inherit");var m=0,n=0;k[0].replace(/%[a-zA-Z%]/g,function(p){"%%"!==p&&(m++,"%c"===p&&(n=m))});k.splice(n,0,l)}};c.save=function(k){try{k?c.storage.setItem("debug",k):c.storage.removeItem("debug")}catch(l){}};c.load=function(){try{var k=c.storage.getItem("debug")}catch(l){}!k&&"undefined"!==typeof process&&"env"in process&&(k=process.env.DEBUG);return k};c.useColors=function(){return"undefined"!==typeof window&&window.process&&("renderer"===
window.process.type||window.process.__nwjs)?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&
31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};a:{try{var h=localStorage;break a}catch(k){}h=void 0}c.storage=h;c.destroy=function(){var k=!1;return function(){k||(k=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}();c.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
c.log=console.debug||console.log||function(){};a.exports=b("./node_modules/debug/src/common.js")(c);a.exports.formatters.j=function(k){try{return JSON.stringify(k)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}},"./node_modules/debug/src/common.js":function(a,c,b){function h(l){var m=Array.isArray(l)?k(l):void 0;m||(m="undefined"!==typeof Symbol&&Symbol.iterator in Object(l)?Array.from(l):void 0);if(!m)a:{if(l){if("string"===typeof l){m=k(l,void 0);break a}m=Object.prototype.toString.call(l).slice(8,
-1);"Object"===m&&l.constructor&&(m=l.constructor.name);if("Map"===m||"Set"===m){m=Array.from(l);break a}if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)){m=k(l,void 0);break a}}m=void 0}if(!(l=m))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return l}function k(l,m){if(null==m||m>l.length)m=l.length;for(var n=0,p=Array(m);n<m;n++)p[n]=l[n];return p}a.exports=function(l){function m(r){function q(){for(var x=
arguments.length,y=Array(x),B=0;B<x;B++)y[B]=arguments[B];if(q.enabled){x=Number(new Date);q.diff=x-(u||x);q.prev=u;u=q.curr=x;y[0]=m.coerce(y[0]);"string"!==typeof y[0]&&y.unshift("%O");var C=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(H,F){if("%%"===H)return"%";C++;F=m.formatters[F];"function"===typeof F&&(H=F.call(q,y[C]),y.splice(C,1),C--);return H});m.formatArgs.call(q,y);(q.log||m.log).apply(q,y)}}var u,v=null;q.namespace=r;q.useColors=m.useColors();q.color=m.selectColor(r);q.extend=n;q.destroy=
m.destroy;Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===v?m.enabled(r):v},set:function(x){v=x}});"function"===typeof m.init&&m.init(q);return q}function n(r,q){r=m(this.namespace+("undefined"===typeof q?":":q)+r);r.log=this.log;return r}function p(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}m.debug=m;m["default"]=m;m.coerce=function(r){return r instanceof Error?r.stack||r.message:r};m.disable=function(){var r=[].concat(h(m.names.map(p)),
h(m.skips.map(p).map(function(q){return"-"+q}))).join(",");m.enable("");return r};m.enable=function(r){m.save(r);m.names=[];m.skips=[];var q,u=("string"===typeof r?r:"").split(/[\s,]+/),v=u.length;for(q=0;q<v;q++)u[q]&&(r=u[q].replace(/\*/g,".*?"),"-"===r[0]?m.skips.push(new RegExp("^"+r.substr(1)+"$")):m.names.push(new RegExp("^"+r+"$")))};m.enabled=function(r){if("*"===r[r.length-1])return!0;var q;var u=0;for(q=m.skips.length;u<q;u++)if(m.skips[u].test(r))return!1;u=0;for(q=m.names.length;u<q;u++)if(m.names[u].test(r))return!0;
return!1};m.humanize=b("./node_modules/ms/index.js");m.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")};Object.keys(l).forEach(function(r){m[r]=l[r]});m.names=[];m.skips=[];m.formatters={};m.selectColor=function(r){for(var q=0,u=0;u<r.length;u++)q=(q<<5)-q+r.charCodeAt(u),q|=0;return m.colors[Math.abs(q)%m.colors.length]};m.enable(m.load());return m}},"./node_modules/engine.io-client/lib/globalThis.browser.js":function(a,
c){a.exports="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},"./node_modules/engine.io-client/lib/index.js":function(a,c,b){var h=b("./node_modules/engine.io-client/lib/socket.js");a.exports=function(k,l){return new h(k,l)};a.exports.Socket=h;a.exports.protocol=h.protocol;a.exports.Transport=b("./node_modules/engine.io-client/lib/transport.js");a.exports.transports=b("./node_modules/engine.io-client/lib/transports/index.js");a.exports.parser=b("./node_modules/engine.io-parser/lib/index.js")},
"./node_modules/engine.io-client/lib/socket.js":function(a,c,b){function h(){h=Object.assign||function(H){for(var F=1;F<arguments.length;F++){var E=arguments[F],G;for(G in E)Object.prototype.hasOwnProperty.call(E,G)&&(H[G]=E[G])}return H};return h.apply(this,arguments)}function k(H){"@babel/helpers - typeof";k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"===typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":
typeof F};return k(H)}function l(H,F){for(var E=0;E<F.length;E++){var G=F[E];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(H,G.key,G)}}function m(H,F,E){F&&l(H.prototype,F);E&&l(H,E);return H}function n(H,F){if("function"!==typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,writable:!0,configurable:!0}});F&&p(H,F)}function p(H,F){p=Object.setPrototypeOf||
function(E,G){E.__proto__=G;return E};return p(H,F)}function r(H){var F=q();return function(){var E=u(H);if(F){var G=u(this).constructor;E=Reflect.construct(E,arguments,G)}else E=E.apply(this,arguments);if(!E||"object"!==k(E)&&"function"!==typeof E){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");E=this}return E}}function q(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;
try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(H){return!1}}function u(H){u=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)};return u(H)}var v=b("./node_modules/engine.io-client/lib/transports/index.js");c=b("./node_modules/component-emitter/index.js");var x=b("./node_modules/debug/src/browser.js")("engine.io-client:socket"),y=b("./node_modules/engine.io-parser/lib/index.js"),B=b("./node_modules/parseuri/index.js"),
C=b("./node_modules/parseqs/index.js");b=function(H){function F(G){var K=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof F))throw new TypeError("Cannot call a class as a function");var J=E.call(this);G&&"object"===k(G)&&(K=G,G=null);G?(G=B(G),K.hostname=G.host,K.secure="https"===G.protocol||"wss"===G.protocol,K.port=G.port,G.query&&(K.query=G.query)):K.host&&(K.hostname=B(K.host).host);J.secure=null!=K.secure?K.secure:"undefined"!==typeof location&&"https:"===location.protocol;
K.hostname&&!K.port&&(K.port=J.secure?"443":"80");J.hostname=K.hostname||("undefined"!==typeof location?location.hostname:"localhost");J.port=K.port||("undefined"!==typeof location&&location.port?location.port:J.secure?443:80);J.transports=K.transports||["polling","websocket"];J.readyState="";J.writeBuffer=[];J.prevBufferLen=0;J.opts=h({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},
K);J.opts.path=J.opts.path.replace(/\/$/,"")+"/";"string"===typeof J.opts.query&&(J.opts.query=C.decode(J.opts.query));J.id=null;J.upgrades=null;J.pingInterval=null;J.pingTimeout=null;J.pingTimeoutTimer=null;"function"===typeof addEventListener&&(addEventListener("beforeunload",function(){J.transport&&(J.transport.removeAllListeners(),J.transport.close())},!1),"localhost"!==J.hostname&&(J.offlineEventListener=function(){J.onClose("transport close")},addEventListener("offline",J.offlineEventListener,
!1)));J.open();return J}n(F,H);var E=r(F);m(F,[{key:"createTransport",value:function(G){x('creating transport "%s"',G);var K=this.opts.query,J={},O;for(O in K)K.hasOwnProperty(O)&&(J[O]=K[O]);J.EIO=y.protocol;J.transport=G;this.id&&(J.sid=this.id);K=h({},this.opts.transportOptions[G],this.opts,{query:J,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});x("options: %j",K);return new v[G](K)}},{key:"open",value:function(){if(this.opts.rememberUpgrade&&F.priorWebsocketSuccess&&-1!==
this.transports.indexOf("websocket"))var G="websocket";else{if(0===this.transports.length){var K=this;setTimeout(function(){K.emit("error","No transports available")},0);return}G=this.transports[0]}this.readyState="opening";try{G=this.createTransport(G)}catch(J){x("error while creating transport: %s",J);this.transports.shift();this.open();return}G.open();this.setTransport(G)}},{key:"setTransport",value:function(G){x("setting transport %s",G.name);var K=this;this.transport&&(x("clearing existing transport %s",
this.transport.name),this.transport.removeAllListeners());this.transport=G;G.on("drain",function(){K.onDrain()}).on("packet",function(J){K.onPacket(J)}).on("error",function(J){K.onError(J)}).on("close",function(){K.onClose("transport close")})}},{key:"probe",value:function(G){function K(){if(fa.onlyBinaryUpgrades){var xa=!this.supportsBinary&&fa.transport.supportsBinary;ma=ma||xa}ma||(x('probe transport "%s" opened',G),da.send([{type:"ping",data:"probe"}]),da.once("packet",function(Ea){ma||("pong"===
Ea.type&&"probe"===Ea.data?(x('probe transport "%s" pong',G),fa.upgrading=!0,fa.emit("upgrading",da),da&&(F.priorWebsocketSuccess="websocket"===da.name,x('pausing current transport "%s"',fa.transport.name),fa.transport.pause(function(){ma||"closed"===fa.readyState||(x("changing transport and sending upgrade packet"),W(),fa.setTransport(da),da.send([{type:"upgrade"}]),fa.emit("upgrade",da),da=null,fa.upgrading=!1,fa.flush())}))):(x('probe transport "%s" failed',G),Ea=Error("probe error"),Ea.transport=
da.name,fa.emit("upgradeError",Ea)))}))}function J(){ma||(ma=!0,W(),da.close(),da=null)}function O(xa){var Ea=Error("probe error: "+xa);Ea.transport=da.name;J();x('probe transport "%s" failed because of error: %s',G,xa);fa.emit("upgradeError",Ea)}function T(){O("transport closed")}function Q(){O("socket closed")}function M(xa){da&&xa.name!==da.name&&(x('"%s" works - aborting "%s"',xa.name,da.name),J())}function W(){da.removeListener("open",K);da.removeListener("error",O);da.removeListener("close",
T);fa.removeListener("close",Q);fa.removeListener("upgrading",M)}x('probing transport "%s"',G);var da=this.createTransport(G,{probe:1}),ma=!1,fa=this;F.priorWebsocketSuccess=!1;da.once("open",K);da.once("error",O);da.once("close",T);this.once("close",Q);this.once("upgrading",M);da.open()}},{key:"onOpen",value:function(){x("socket open");this.readyState="open";F.priorWebsocketSuccess="websocket"===this.transport.name;this.emit("open");this.flush();if("open"===this.readyState&&this.opts.upgrade&&this.transport.pause){x("starting upgrade probes");
for(var G=0,K=this.upgrades.length;G<K;G++)this.probe(this.upgrades[G])}}},{key:"onPacket",value:function(G){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(x('socket receive: type "%s", data "%s"',G.type,G.data),this.emit("packet",G),this.emit("heartbeat"),G.type){case "open":this.onHandshake(JSON.parse(G.data));break;case "ping":this.resetPingTimeout();this.sendPacket("pong");this.emit("pong");break;case "error":var K=Error("server error");K.code=G.data;
this.onError(K);break;case "message":this.emit("data",G.data),this.emit("message",G.data)}else x('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(G){this.emit("handshake",G);this.id=G.sid;this.transport.query.sid=G.sid;this.upgrades=this.filterUpgrades(G.upgrades);this.pingInterval=G.pingInterval;this.pingTimeout=G.pingTimeout;this.onOpen();"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var G=this;clearTimeout(this.pingTimeoutTimer);
this.pingTimeoutTimer=setTimeout(function(){G.onClose("ping timeout")},this.pingInterval+this.pingTimeout);this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(x("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(G,K,J){this.sendPacket("message",G,K,J);return this}},{key:"send",value:function(G,K,J){this.sendPacket("message",G,K,J);return this}},{key:"sendPacket",value:function(G,K,J,O){"function"===typeof K&&(O=K,K=void 0);"function"===typeof J&&(O=J,J=null);if("closing"!==this.readyState&&"closed"!==this.readyState){J=J||{};J.compress=!1!==J.compress;G={type:G,data:K,options:J};
this.emit("packetCreate",G);this.writeBuffer.push(G);if(O)this.once("flush",O);this.flush()}}},{key:"close",value:function(){function G(){O.onClose("forced close");x("socket closing - telling transport to close");O.transport.close()}function K(){O.removeListener("upgrade",K);O.removeListener("upgradeError",K);G()}function J(){O.once("upgrade",K);O.once("upgradeError",K)}var O=this;if("opening"===this.readyState||"open"===this.readyState)if(this.readyState="closing",this.writeBuffer.length)this.once("drain",
function(){this.upgrading?J():G()});else this.upgrading?J():G();return this}},{key:"onError",value:function(G){x("socket error %j",G);F.priorWebsocketSuccess=!1;this.emit("error",G);this.onClose("transport error",G)}},{key:"onClose",value:function(G,K){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)x('socket close with reason: "%s"',G),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),
this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",G,K),this.writeBuffer=[],this.prevBufferLen=0}},{key:"filterUpgrades",value:function(G){for(var K=[],J=0,O=G.length;J<O;J++)~this.transports.indexOf(G[J])&&K.push(G[J]);return K}}]);return F}(c);b.priorWebsocketSuccess=!1;b.protocol=y.protocol;a.exports=b},"./node_modules/engine.io-client/lib/transport.js":function(a,
c,b){function h(v){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"===typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};return h(v)}function k(v,x){for(var y=0;y<x.length;y++){var B=x[y];B.enumerable=B.enumerable||!1;B.configurable=!0;"value"in B&&(B.writable=!0);Object.defineProperty(v,B.key,B)}}function l(v,x,y){x&&k(v.prototype,x);y&&k(v,y);return v}function m(v,x){if("function"!==
typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}});x&&n(v,x)}function n(v,x){n=Object.setPrototypeOf||function(y,B){y.__proto__=B;return y};return n(v,x)}function p(v){var x=r();return function(){var y=q(v);if(x){var B=q(this).constructor;y=Reflect.construct(y,arguments,B)}else y=y.apply(this,arguments);if(!y||"object"!==h(y)&&"function"!==typeof y){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
y=this}return y}}function r(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function q(v){q=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)};return q(v)}var u=b("./node_modules/engine.io-parser/lib/index.js");c=function(v){function x(B){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");
var C=y.call(this);C.opts=B;C.query=B.query;C.readyState="";C.socket=B.socket;return C}m(x,v);var y=p(x);l(x,[{key:"onError",value:function(B,C){B=Error(B);B.type="TransportError";B.description=C;this.emit("error",B);return this}},{key:"open",value:function(){if("closed"===this.readyState||""===this.readyState)this.readyState="opening",this.doOpen();return this}},{key:"close",value:function(){if("opening"===this.readyState||"open"===this.readyState)this.doClose(),this.onClose();return this}},{key:"send",
value:function(B){if("open"===this.readyState)this.write(B);else throw Error("Transport not open");}},{key:"onOpen",value:function(){this.readyState="open";this.writable=!0;this.emit("open")}},{key:"onData",value:function(B){B=u.decodePacket(B,this.socket.binaryType);this.onPacket(B)}},{key:"onPacket",value:function(B){this.emit("packet",B)}},{key:"onClose",value:function(){this.readyState="closed";this.emit("close")}}]);return x}(b("./node_modules/component-emitter/index.js"));a.exports=c},"./node_modules/engine.io-client/lib/transports/index.js":function(a,
c,b){var h=b("./node_modules/engine.io-client/lib/xmlhttprequest.js"),k=b("./node_modules/engine.io-client/lib/transports/polling-xhr.js"),l=b("./node_modules/engine.io-client/lib/transports/polling-jsonp.js");a=b("./node_modules/engine.io-client/lib/transports/websocket.js");c.polling=function(m){var n=!1,p=!1,r=!1!==m.jsonp;"undefined"!==typeof location&&(p="https:"===location.protocol,(n=location.port)||(n=p?443:80),n=m.hostname!==location.hostname||n!==m.port,p=m.secure!==p);m.xdomain=n;m.xscheme=
p;if("open"in new h(m)&&!m.forceJSONP)return new k(m);if(!r)throw Error("JSONP disabled");return new l(m)};c.websocket=a},"./node_modules/engine.io-client/lib/transports/polling-jsonp.js":function(a,c,b){function h(H){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"===typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F};return h(H)}function k(H,F){for(var E=0;E<F.length;E++){var G=
F[E];G.enumerable=G.enumerable||!1;G.configurable=!0;"value"in G&&(G.writable=!0);Object.defineProperty(H,G.key,G)}}function l(H,F,E){F&&k(H.prototype,F);E&&k(H,E);return H}function m(H,F,E){m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(G,K,J){for(;!Object.prototype.hasOwnProperty.call(G,K)&&(G=v(G),null!==G););if(G)return K=Object.getOwnPropertyDescriptor(G,K),K.get?K.get.call(J):K.value};return m(H,F,E||H)}function n(H,F){if("function"!==typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function");
H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,writable:!0,configurable:!0}});F&&p(H,F)}function p(H,F){p=Object.setPrototypeOf||function(E,G){E.__proto__=G;return E};return p(H,F)}function r(H){var F=u();return function(){var E=v(H);if(F){var G=v(this).constructor;E=Reflect.construct(E,arguments,G)}else E=E.apply(this,arguments);E=!E||"object"!==h(E)&&"function"!==typeof E?q(this):E;return E}}function q(H){if(void 0===H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return H}function u(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(H){return!1}}function v(H){v=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)};return v(H)}c=b("./node_modules/engine.io-client/lib/transports/polling.js");var x=b("./node_modules/engine.io-client/lib/globalThis.browser.js"),
y=/\n/g,B=/\\n/g,C;b=function(H){function F(G){if(!(this instanceof F))throw new TypeError("Cannot call a class as a function");G=E.call(this,G);G.query=G.query||{};C||(C=x.___eio=x.___eio||[]);G.index=C.length;var K=q(G);C.push(function(J){K.onData(J)});G.query.j=G.index;return G}n(F,H);var E=r(F);l(F,[{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),
this.iframe=this.form=null);m(v(F.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var G=this,K=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);K.async=!0;K.src=this.uri();K.onerror=function(O){G.onError("jsonp poll error",O)};var J=document.getElementsByTagName("script")[0];J?J.parentNode.insertBefore(K,J):(document.head||document.body).appendChild(K);this.script=K;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&
setTimeout(function(){var O=document.createElement("iframe");document.body.appendChild(O);document.body.removeChild(O)},100)}},{key:"doWrite",value:function(G,K){function J(){O();K()}function O(){if(T.iframe)try{T.form.removeChild(T.iframe)}catch(ma){T.onError("jsonp polling iframe removal error",ma)}try{Q=document.createElement('<iframe src="javascript:0" name="'+T.iframeId+'">')}catch(ma){Q=document.createElement("iframe"),Q.name=T.iframeId,Q.src="javascript:0"}Q.id=T.iframeId;T.form.appendChild(Q);
T.iframe=Q}var T=this,Q;if(!this.form){var M=document.createElement("form"),W=document.createElement("textarea"),da=this.iframeId="eio_iframe_"+this.index;M.className="socketio";M.style.position="absolute";M.style.top="-1000px";M.style.left="-1000px";M.target=da;M.method="POST";M.setAttribute("accept-charset","utf-8");W.name="d";M.appendChild(W);document.body.appendChild(M);this.form=M;this.area=W}this.form.action=this.uri();O();G=G.replace(B,"\\\n");this.area.value=G.replace(y,"\\n");try{this.form.submit()}catch(ma){}this.iframe.attachEvent?
this.iframe.onreadystatechange=function(){"complete"===T.iframe.readyState&&J()}:this.iframe.onload=J}},{key:"supportsBinary",get:function(){return!1}}]);return F}(c);a.exports=b},"./node_modules/engine.io-client/lib/transports/polling-xhr.js":function(a,c,b){function h(J){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"===typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};
return h(J)}function k(){k=Object.assign||function(J){for(var O=1;O<arguments.length;O++){var T=arguments[O],Q;for(Q in T)Object.prototype.hasOwnProperty.call(T,Q)&&(J[Q]=T[Q])}return J};return k.apply(this,arguments)}function l(J,O){if(!(J instanceof O))throw new TypeError("Cannot call a class as a function");}function m(J,O){for(var T=0;T<O.length;T++){var Q=O[T];Q.enumerable=Q.enumerable||!1;Q.configurable=!0;"value"in Q&&(Q.writable=!0);Object.defineProperty(J,Q.key,Q)}}function n(J,O,T){O&&m(J.prototype,
O);T&&m(J,T);return J}function p(J,O){if("function"!==typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(O&&O.prototype,{constructor:{value:J,writable:!0,configurable:!0}});O&&r(J,O)}function r(J,O){r=Object.setPrototypeOf||function(T,Q){T.__proto__=Q;return T};return r(J,O)}function q(J){var O=u();return function(){var T=v(J);if(O){var Q=v(this).constructor;T=Reflect.construct(T,arguments,Q)}else T=T.apply(this,arguments);if(!T||
"object"!==h(T)&&"function"!==typeof T){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");T=this}return T}}function u(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(J){return!1}}function v(J){v=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)};
return v(J)}function x(){}function y(){for(var J in K.requests)K.requests.hasOwnProperty(J)&&K.requests[J].abort()}var B=b("./node_modules/engine.io-client/lib/xmlhttprequest.js"),C=b("./node_modules/engine.io-client/lib/transports/polling.js");c=b("./node_modules/component-emitter/index.js");var H=b("./node_modules/engine.io-client/lib/util.js").pick,F=b("./node_modules/engine.io-client/lib/globalThis.browser.js"),E=b("./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr"),G=null!=
(new B({xdomain:!1})).responseType;b=function(J){function O(Q){l(this,O);var M=T.call(this,Q);if("undefined"!==typeof location){var W="https:"===location.protocol,da=location.port;da||=W?443:80;M.xd="undefined"!==typeof location&&Q.hostname!==location.hostname||da!==Q.port;M.xs=Q.secure!==W}Q=Q&&Q.forceBase64;M.supportsBinary=G&&!Q;return M}p(O,J);var T=q(O);n(O,[{key:"request",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};k(Q,{xd:this.xd,xs:this.xs},this.opts);
return new K(this.uri(),Q)}},{key:"doWrite",value:function(Q,M){Q=this.request({method:"POST",data:Q});var W=this;Q.on("success",M);Q.on("error",function(da){W.onError("xhr post error",da)})}},{key:"doPoll",value:function(){E("xhr poll");var Q=this.request(),M=this;Q.on("data",function(W){M.onData(W)});Q.on("error",function(W){M.onError("xhr poll error",W)});this.pollXhr=Q}}]);return O}(C);var K=function(J){function O(Q,M){l(this,O);var W=T.call(this);W.opts=M;W.method=M.method||"GET";W.uri=Q;W.async=
!1!==M.async;W.data=void 0!==M.data?M.data:null;W.create();return W}p(O,J);var T=q(O);n(O,[{key:"create",value:function(){var Q=H(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");Q.xdomain=!!this.opts.xd;Q.xscheme=!!this.opts.xs;var M=this.xhr=new B(Q),W=this;try{E("xhr open %s: %s",this.method,this.uri);M.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){M.setDisableHeaderCheck&&M.setDisableHeaderCheck(!0);for(var da in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(da)&&
M.setRequestHeader(da,this.opts.extraHeaders[da])}}catch(ma){}if("POST"===this.method)try{M.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(ma){}try{M.setRequestHeader("Accept","*/*")}catch(ma){}"withCredentials"in M&&(M.withCredentials=this.opts.withCredentials);this.opts.requestTimeout&&(M.timeout=this.opts.requestTimeout);this.hasXDR()?(M.onload=function(){W.onLoad()},M.onerror=function(){W.onError(M.responseText)}):M.onreadystatechange=function(){if(4===M.readyState)if(200===
M.status||1223===M.status)W.onLoad();else setTimeout(function(){W.onError("number"===typeof M.status?M.status:0)},0)};E("xhr data %s",this.data);M.send(this.data)}catch(ma){setTimeout(function(){W.onError(ma)},0);return}"undefined"!==typeof document&&(this.index=O.requestsCount++,O.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success");this.cleanup()}},{key:"onData",value:function(Q){this.emit("data",Q);this.onSuccess()}},{key:"onError",value:function(Q){this.emit("error",
Q);this.cleanup(!0)}},{key:"cleanup",value:function(Q){if("undefined"!==typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=x:this.xhr.onreadystatechange=x;if(Q)try{this.xhr.abort()}catch(M){}"undefined"!==typeof document&&delete O.requests[this.index];this.xhr=null}}},{key:"onLoad",value:function(){var Q=this.xhr.responseText;if(null!==Q)this.onData(Q)}},{key:"hasXDR",value:function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",
value:function(){this.cleanup()}}]);return O}(c);K.requestsCount=0;K.requests={};"undefined"!==typeof document&&("function"===typeof attachEvent?attachEvent("onunload",y):"function"===typeof addEventListener&&addEventListener("onpagehide"in F?"pagehide":"unload",y,!1));a.exports=b;a.exports.Request=K},"./node_modules/engine.io-client/lib/transports/polling.js":function(a,c,b){function h(B){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(C){return typeof C}:
function(C){return C&&"function"===typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};return h(B)}function k(B,C){for(var H=0;H<C.length;H++){var F=C[H];F.enumerable=F.enumerable||!1;F.configurable=!0;"value"in F&&(F.writable=!0);Object.defineProperty(B,F.key,F)}}function l(B,C,H){C&&k(B.prototype,C);H&&k(B,H);return B}function m(B,C){if("function"!==typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(C&&
C.prototype,{constructor:{value:B,writable:!0,configurable:!0}});C&&n(B,C)}function n(B,C){n=Object.setPrototypeOf||function(H,F){H.__proto__=F;return H};return n(B,C)}function p(B){var C=r();return function(){var H=q(B);if(C){var F=q(this).constructor;H=Reflect.construct(H,arguments,F)}else H=H.apply(this,arguments);if(!H||"object"!==h(H)&&"function"!==typeof H){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");H=this}return H}}function r(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(B){return!1}}function q(B){q=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)};return q(B)}c=b("./node_modules/engine.io-client/lib/transport.js");var u=b("./node_modules/parseqs/index.js"),v=b("./node_modules/engine.io-parser/lib/index.js"),x=b("./node_modules/yeast/index.js"),
y=b("./node_modules/debug/src/browser.js")("engine.io-client:polling");b=function(B){function C(){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");return H.apply(this,arguments)}m(C,B);var H=p(C);l(C,[{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(F){function E(){y("paused");G.readyState="paused";F()}var G=this;this.readyState="pausing";if(this.polling||!this.writable){var K=0;this.polling&&(y("we are currently polling - waiting to pause"),
K++,this.once("pollComplete",function(){y("pre-pause polling complete");--K||E()}));this.writable||(y("we are currently writing - waiting to pause"),K++,this.once("drain",function(){y("pre-pause writing complete");--K||E()}))}else E()}},{key:"poll",value:function(){y("polling");this.polling=!0;this.doPoll();this.emit("poll")}},{key:"onData",value:function(F){var E=this;y("polling got data %s",F);v.decodePayload(F,this.socket.binaryType).forEach(function(G,K,J){if("opening"===E.readyState&&"open"===
G.type)E.onOpen();if("close"===G.type)return E.onClose(),!1;E.onPacket(G)});"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():y('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){function F(){y("writing close packet");E.write([{type:"close"}])}var E=this;"open"===this.readyState?(y("transport open - closing"),F()):(y("transport not open - deferring close"),this.once("open",F))}},{key:"write",value:function(F){var E=
this;this.writable=!1;v.encodePayload(F,function(G){E.doWrite(G,function(){E.writable=!0;E.emit("drain")})})}},{key:"uri",value:function(){var F=this.query||{},E=this.opts.secure?"https":"http",G="";!1!==this.opts.timestampRequests&&(F[this.opts.timestampParam]=x());this.supportsBinary||F.sid||(F.b64=1);F=u.encode(F);this.opts.port&&("https"===E&&443!==Number(this.opts.port)||"http"===E&&80!==Number(this.opts.port))&&(G=":"+this.opts.port);F.length&&(F="?"+F);var K=-1!==this.opts.hostname.indexOf(":");
return E+"://"+(K?"["+this.opts.hostname+"]":this.opts.hostname)+G+this.opts.path+F}},{key:"name",get:function(){return"polling"}}]);return C}(c);a.exports=b},"./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js":function(a,c,b){c=b("./node_modules/engine.io-client/lib/globalThis.browser.js");a.exports={WebSocket:c.WebSocket||c.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},"./node_modules/engine.io-client/lib/transports/websocket.js":function(a,
c,b){function h(K){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"===typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J};return h(K)}function k(K,J){for(var O=0;O<J.length;O++){var T=J[O];T.enumerable=T.enumerable||!1;T.configurable=!0;"value"in T&&(T.writable=!0);Object.defineProperty(K,T.key,T)}}function l(K,J,O){J&&k(K.prototype,J);O&&k(K,O);return K}function m(K,J){if("function"!==
typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(J&&J.prototype,{constructor:{value:K,writable:!0,configurable:!0}});J&&n(K,J)}function n(K,J){n=Object.setPrototypeOf||function(O,T){O.__proto__=T;return O};return n(K,J)}function p(K){var J=r();return function(){var O=q(K);if(J){var T=q(this).constructor;O=Reflect.construct(O,arguments,T)}else O=O.apply(this,arguments);if(!O||"object"!==h(O)&&"function"!==typeof O){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
O=this}return O}}function r(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(K){return!1}}function q(K){q=Object.setPrototypeOf?Object.getPrototypeOf:function(J){return J.__proto__||Object.getPrototypeOf(J)};return q(K)}var u=b("./node_modules/engine.io-client/lib/transport.js"),v=b("./node_modules/engine.io-parser/lib/index.js"),x=b("./node_modules/parseqs/index.js"),
y=b("./node_modules/yeast/index.js"),B=b("./node_modules/engine.io-client/lib/util.js").pick;c=b("./node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js");var C=c.WebSocket,H=c.usingBrowserWebSocket,F=c.defaultBinaryType,E=b("./node_modules/debug/src/browser.js")("engine.io-client:websocket"),G="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();b=function(K){function J(T){if(!(this instanceof J))throw new TypeError("Cannot call a class as a function");
var Q=O.call(this,T);Q.supportsBinary=!T.forceBase64;return Q}m(J,K);var O=p(J);l(J,[{key:"doOpen",value:function(){if(this.check()){var T=this.uri(),Q=this.opts.protocols,M=G?{}:B(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(M.headers=this.opts.extraHeaders);try{this.ws=H&&!G?Q?new C(T,Q):new C(T):new C(T,Q,M)}catch(W){return this.emit("error",
W)}this.ws.binaryType=this.socket.binaryType||F;this.addEventListeners()}}},{key:"addEventListeners",value:function(){var T=this;this.ws.onopen=function(){T.opts.autoUnref&&T.ws._socket.unref();T.onOpen()};this.ws.onclose=this.onClose.bind(this);this.ws.onmessage=function(Q){return T.onData(Q.data)};this.ws.onerror=function(Q){return T.onError("websocket error",Q)}}},{key:"write",value:function(T){function Q(){M.emit("flush");setTimeout(function(){M.writable=!0;M.emit("drain")},0)}var M=this;this.writable=
!1;for(var W=T.length,da=0,ma=W;da<ma;da++)(function(fa){v.encodePacket(fa,M.supportsBinary,function(xa){var Ea={};H||(fa.options&&(Ea.compress=fa.options.compress),M.opts.perMessageDeflate&&("string"===typeof xa?Buffer.byteLength(xa):xa.length)<M.opts.perMessageDeflate.threshold&&(Ea.compress=!1));try{H?M.ws.send(xa):M.ws.send(xa,Ea)}catch(Da){E("websocket closed before onclose event")}--W||Q()})})(T[da])}},{key:"onClose",value:function(){u.prototype.onClose.call(this)}},{key:"doClose",value:function(){"undefined"!==
typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var T=this.query||{},Q=this.opts.secure?"wss":"ws",M="";this.opts.port&&("wss"===Q&&443!==Number(this.opts.port)||"ws"===Q&&80!==Number(this.opts.port))&&(M=":"+this.opts.port);this.opts.timestampRequests&&(T[this.opts.timestampParam]=y());this.supportsBinary||(T.b64=1);T=x.encode(T);T.length&&(T="?"+T);var W=-1!==this.opts.hostname.indexOf(":");return Q+"://"+(W?"["+this.opts.hostname+"]":this.opts.hostname)+M+this.opts.path+
T}},{key:"check",value:function(){return!!C&&!("__initialize"in C&&this.name===J.prototype.name)}},{key:"name",get:function(){return"websocket"}}]);return J}(u);a.exports=b},"./node_modules/engine.io-client/lib/util.js":function(a,c){a.exports.pick=function(b){for(var h=arguments.length,k=Array(1<h?h-1:0),l=1;l<h;l++)k[l-1]=arguments[l];return k.reduce(function(m,n){b.hasOwnProperty(n)&&(m[n]=b[n]);return m},{})}},"./node_modules/engine.io-client/lib/xmlhttprequest.js":function(a,c,b){var h=b("./node_modules/has-cors/index.js"),
k=b("./node_modules/engine.io-client/lib/globalThis.browser.js");a.exports=function(l){var m=l.xdomain,n=l.xscheme;l=l.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!m||h))return new XMLHttpRequest}catch(p){}try{if("undefined"!==typeof XDomainRequest&&!n&&l)return new XDomainRequest}catch(p){}if(!m)try{return new (k[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(p){}}},"./node_modules/engine.io-parser/lib/commons.js":function(a,c){var b=Object.create(null);b.open="0";
b.close="1";b.ping="2";b.pong="3";b.message="4";b.upgrade="5";b.noop="6";var h=Object.create(null);Object.keys(b).forEach(function(k){h[b[k]]=k});a.exports={PACKET_TYPES:b,PACKET_TYPES_REVERSE:h,ERROR_PACKET:{type:"error",data:"parser error"}}},"./node_modules/engine.io-parser/lib/decodePacket.browser.js":function(a,c,b){c=b("./node_modules/engine.io-parser/lib/commons.js");var h=c.PACKET_TYPES_REVERSE,k=c.ERROR_PACKET,l;"function"===typeof ArrayBuffer&&(l=b("./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"));
var m=function(n,p){switch(p){case "blob":return n instanceof ArrayBuffer?new Blob([n]):n;default:return n}};a.exports=function(n,p){if("string"!==typeof n)return{type:"message",data:m(n,p)};var r=n.charAt(0);return"b"===r?(n=n.substring(1),l?(n=l.decode(n),p=m(n,p)):p={base64:!0,data:n},{type:"message",data:p}):h[r]?1<n.length?{type:h[r],data:n.substring(1)}:{type:h[r]}:k}},"./node_modules/engine.io-parser/lib/encodePacket.browser.js":function(a,c,b){var h=b("./node_modules/engine.io-parser/lib/commons.js").PACKET_TYPES,
k="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),l="function"===typeof ArrayBuffer,m=function(n,p){var r=new FileReader;r.onload=function(){var q=r.result.split(",")[1];p("b"+q)};return r.readAsDataURL(n)};a.exports=function(n,p,r){var q=n.type;n=n.data;if(k&&n instanceof Blob)return p?r(n):m(n,r);var u;if(u=l)(u=n instanceof ArrayBuffer)||(u="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer);
return u?p?r(n instanceof ArrayBuffer?n:n.buffer):m(new Blob([n]),r):r(h[q]+(n||""))}},"./node_modules/engine.io-parser/lib/index.js":function(a,c,b){var h=b("./node_modules/engine.io-parser/lib/encodePacket.browser.js"),k=b("./node_modules/engine.io-parser/lib/decodePacket.browser.js"),l=String.fromCharCode(30);a.exports={protocol:4,encodePacket:h,encodePayload:function(m,n){var p=m.length,r=Array(p),q=0;m.forEach(function(u,v){h(u,!1,function(x){r[v]=x;++q===p&&n(r.join(l))})})},decodePacket:k,
decodePayload:function(m,n){m=m.split(l);for(var p=[],r=0;r<m.length;r++){var q=k(m[r],n);p.push(q);if("error"===q.type)break}return p}}},"./node_modules/engine.io-parser/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":function(a,c){(function(b){c.encode=function(h){h=new Uint8Array(h);var k,l=h.length,m="";for(k=0;k<l;k+=3)m+=b[h[k]>>2],m+=b[(h[k]&3)<<4|h[k+1]>>4],m+=b[(h[k+1]&15)<<2|h[k+2]>>6],m+=b[h[k+2]&63];2===l%3?m=m.substring(0,m.length-1)+"=":1===l%3&&(m=m.substring(0,m.length-
2)+"==");return m};c.decode=function(h){var k=.75*h.length,l=h.length,m=0;"="===h[h.length-1]&&(k--,"="===h[h.length-2]&&k--);var n=new ArrayBuffer(k),p=new Uint8Array(n);for(k=0;k<l;k+=4){var r=b.indexOf(h[k]);var q=b.indexOf(h[k+1]);var u=b.indexOf(h[k+2]);var v=b.indexOf(h[k+3]);p[m++]=r<<2|q>>4;p[m++]=(q&15)<<4|u>>2;p[m++]=(u&3)<<6|v&63}return n}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},"./node_modules/has-cors/index.js":function(a,c){try{a.exports="undefined"!==
typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){a.exports=!1}},"./node_modules/ms/index.js":function(a,c){function b(n){"@babel/helpers - typeof";b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"===typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};return b(n)}function h(n){n=String(n);if(!(100<n.length)&&(n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n))){var p=
parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return p*m;case "weeks":case "week":case "w":return p*l;case "days":case "day":case "d":return 864E5*p;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*p;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*p;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*p;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return p}}}
function k(n,p,r,q){return Math.round(n/r)+" "+q+(p>=1.5*r?"s":"")}var l=6048E5,m=315576E5;a.exports=function(n,p){p=p||{};var r=b(n);if("string"===r&&0<n.length)return h(n);if("number"===r&&isFinite(n))return p["long"]?(p=Math.abs(n),n=864E5<=p?k(n,p,864E5,"day"):36E5<=p?k(n,p,36E5,"hour"):6E4<=p?k(n,p,6E4,"minute"):1E3<=p?k(n,p,1E3,"second"):n+" ms"):(p=Math.abs(n),n=864E5<=p?Math.round(n/864E5)+"d":36E5<=p?Math.round(n/36E5)+"h":6E4<=p?Math.round(n/6E4)+"m":1E3<=p?Math.round(n/1E3)+"s":n+"ms"),
n;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n));}},"./node_modules/parseqs/index.js":function(a,c){c.encode=function(b){var h="",k;for(k in b)b.hasOwnProperty(k)&&(h.length&&(h+="&"),h+=encodeURIComponent(k)+"="+encodeURIComponent(b[k]));return h};c.decode=function(b){var h={};b=b.split("&");for(var k=0,l=b.length;k<l;k++){var m=b[k].split("=");h[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return h}},"./node_modules/parseuri/index.js":function(a,c){function b(l,
m){var n={};m.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(p,r,q){r&&(n[r]=q)});return n}var h=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,k="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");a.exports=function(l){var m=l,n=l.indexOf("["),p=l.indexOf("]");
-1!=n&&-1!=p&&(l=l.substring(0,n)+l.substring(n,p).replace(/:/g,";")+l.substring(p,l.length));var r=h.exec(l||"");l={};for(var q=14;q--;)l[k[q]]=r[q]||"";-1!=n&&-1!=p&&(l.source=m,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0);m=l.path;n=m.replace(/\/{2,9}/g,"/").split("/");"/"!=m.substr(0,1)&&0!==m.length||n.splice(0,1);"/"==m.substr(m.length-1,1)&&n.splice(n.length-1,1);l.pathNames=n;l.queryKey=
b(l,l.query);return l}},"./node_modules/socket.io-parser/dist/binary.js":function(a,c,b){function h(n){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"===typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};return h(n)}function k(n,p){if(!n)return n;if(m.isBinary(n)){var r={_placeholder:!0,num:p.length};p.push(n);return r}if(Array.isArray(n)){r=Array(n.length);for(var q=
0;q<n.length;q++)r[q]=k(n[q],p);return r}if("object"===h(n)&&!(n instanceof Date)){r={};for(q in n)n.hasOwnProperty(q)&&(r[q]=k(n[q],p));return r}return n}function l(n,p){if(!n)return n;if(n&&n._placeholder)return p[n.num];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]=l(n[r],p);else if("object"===h(n))for(r in n)n.hasOwnProperty(r)&&(n[r]=l(n[r],p));return n}Object.defineProperty(c,"__esModule",{value:!0});c.reconstructPacket=c.deconstructPacket=void 0;var m=b("./node_modules/socket.io-parser/dist/is-binary.js");
c.deconstructPacket=function(n){var p=[];n.data=k(n.data,p);n.attachments=p.length;return{packet:n,buffers:p}};c.reconstructPacket=function(n,p){n.data=l(n.data,p);n.attachments=void 0;return n}},"./node_modules/socket.io-parser/dist/index.js":function(a,c,b){function h(F){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"===typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};
return h(F)}function k(F,E,G){k="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(K,J,O){for(;!Object.prototype.hasOwnProperty.call(K,J)&&(K=r(K),null!==K););if(K)return J=Object.getOwnPropertyDescriptor(K,J),J.get?J.get.call(O):J.value};return k(F,E,G||F)}function l(F,E){if("function"!==typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(E&&E.prototype,{constructor:{value:F,writable:!0,configurable:!0}});E&&m(F,E)}function m(F,
E){m=Object.setPrototypeOf||function(G,K){G.__proto__=K;return G};return m(F,E)}function n(F){var E=p();return function(){var G=r(F);if(E){var K=r(this).constructor;G=Reflect.construct(G,arguments,K)}else G=G.apply(this,arguments);if(!G||"object"!==h(G)&&"function"!==typeof G){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");G=this}return G}}function p(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===
typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function r(F){r=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)};return r(F)}function q(F,E){if(!(F instanceof E))throw new TypeError("Cannot call a class as a function");}function u(F,E){for(var G=0;G<E.length;G++){var K=E[G];K.enumerable=K.enumerable||!1;K.configurable=!0;"value"in K&&(K.writable=!0);Object.defineProperty(F,
K.key,K)}}function v(F,E,G){E&&u(F.prototype,E);G&&u(F,G);return F}Object.defineProperty(c,"__esModule",{value:!0});c.Decoder=c.Encoder=c.PacketType=c.protocol=void 0;a=b("./node_modules/component-emitter/index.js");var x=b("./node_modules/socket.io-parser/dist/binary.js"),y=b("./node_modules/socket.io-parser/dist/is-binary.js"),B=b("./node_modules/debug/src/browser.js")("socket.io-parser");c.protocol=5;var C;(function(F){F[F.CONNECT=0]="CONNECT";F[F.DISCONNECT=1]="DISCONNECT";F[F.EVENT=2]="EVENT";
F[F.ACK=3]="ACK";F[F.CONNECT_ERROR=4]="CONNECT_ERROR";F[F.BINARY_EVENT=5]="BINARY_EVENT";F[F.BINARY_ACK=6]="BINARY_ACK"})(C=c.PacketType||(c.PacketType={}));b=function(){function F(){q(this,F)}v(F,[{key:"encode",value:function(E){B("encoding packet %j",E);return E.type!==C.EVENT&&E.type!==C.ACK||!y.hasBinary(E)?[this.encodeAsString(E)]:(E.type=E.type===C.EVENT?C.BINARY_EVENT:C.BINARY_ACK,this.encodeAsBinary(E))}},{key:"encodeAsString",value:function(E){var G=""+E.type;if(E.type===C.BINARY_EVENT||
E.type===C.BINARY_ACK)G+=E.attachments+"-";E.nsp&&"/"!==E.nsp&&(G+=E.nsp+",");null!=E.id&&(G+=E.id);null!=E.data&&(G+=JSON.stringify(E.data));B("encoded %j as %s",E,G);return G}},{key:"encodeAsBinary",value:function(E){var G=x.deconstructPacket(E);E=this.encodeAsString(G.packet);G=G.buffers;G.unshift(E);return G}}]);return F}();c.Encoder=b;b=function(F){function E(){q(this,E);return G.call(this)}l(E,F);var G=n(E);v(E,[{key:"add",value:function(K){if("string"===typeof K)K=this.decodeString(K),K.type===
C.BINARY_EVENT||K.type===C.BINARY_ACK?(this.reconstructor=new H(K),0===K.attachments&&k(r(E.prototype),"emit",this).call(this,"decoded",K)):k(r(E.prototype),"emit",this).call(this,"decoded",K);else if(y.isBinary(K)||K.base64)if(this.reconstructor){if(K=this.reconstructor.takeBinaryData(K))this.reconstructor=null,k(r(E.prototype),"emit",this).call(this,"decoded",K)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+K);}},{key:"decodeString",value:function(K){var J=
0,O={type:Number(K.charAt(0))};if(void 0===C[O.type])throw Error("unknown packet type "+O.type);if(O.type===C.BINARY_EVENT||O.type===C.BINARY_ACK){for(var T=J+1;"-"!==K.charAt(++J)&&J!=K.length;);T=K.substring(T,J);if(T!=Number(T)||"-"!==K.charAt(J))throw Error("Illegal attachments");O.attachments=Number(T)}if("/"===K.charAt(J+1)){for(T=J+1;++J&&","!==K.charAt(J)&&J!==K.length;);O.nsp=K.substring(T,J)}else O.nsp="/";T=K.charAt(J+1);if(""!==T&&Number(T)==T){for(T=J+1;++J;){var Q=K.charAt(J);if(null==
Q||Number(Q)!=Q){--J;break}if(J===K.length)break}O.id=Number(K.substring(T,J+1))}if(K.charAt(++J)){J=K.substr(J);try{var M=JSON.parse(J)}catch(W){M=!1}if(E.isPayloadValid(O.type,M))O.data=M;else throw Error("invalid payload");}B("decoded %s as %j",K,O);return O}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(K,J){switch(K){case C.CONNECT:return"object"===h(J);case C.DISCONNECT:return void 0===J;case C.CONNECT_ERROR:return"string"===
typeof J||"object"===h(J);case C.EVENT:case C.BINARY_EVENT:return Array.isArray(J)&&0<J.length;case C.ACK:case C.BINARY_ACK:return Array.isArray(J)}}}]);return E}(a);c.Decoder=b;var H=function(){function F(E){q(this,F);this.packet=E;this.buffers=[];this.reconPack=E}v(F,[{key:"takeBinaryData",value:function(E){this.buffers.push(E);return this.buffers.length===this.reconPack.attachments?(E=x.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),E):null}},{key:"finishedReconstruction",
value:function(){this.reconPack=null;this.buffers=[]}}]);return F}()},"./node_modules/socket.io-parser/dist/is-binary.js":function(a,c,b){function h(r){"@babel/helpers - typeof";h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"===typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};return h(r)}function k(r){var q;if(q=m)(q=r instanceof ArrayBuffer)||(q="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):
r.buffer instanceof ArrayBuffer);return q||n&&r instanceof Blob||p&&r instanceof File}function l(r,q){if(!r||"object"!==h(r))return!1;if(Array.isArray(r)){for(var u=0,v=r.length;u<v;u++)if(l(r[u]))return!0;return!1}if(k(r))return!0;if(r.toJSON&&"function"===typeof r.toJSON&&1===arguments.length)return l(r.toJSON(),!0);for(u in r)if(Object.prototype.hasOwnProperty.call(r,u)&&l(r[u]))return!0;return!1}Object.defineProperty(c,"__esModule",{value:!0});c.hasBinary=c.isBinary=void 0;var m="function"===
typeof ArrayBuffer;a=Object.prototype.toString;var n="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===a.call(Blob),p="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===a.call(File);c.isBinary=k;c.hasBinary=l},"./node_modules/yeast/index.js":function(a,c,b){function h(q){var u="";do u=l[q%64]+u,q=Math.floor(q/64);while(0<q);return u}function k(){var q=h(+new Date);return q!==r?(n=0,r=q):q+"."+h(n++)}for(var l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),
m={},n=0,p=0,r;64>p;p++)m[l[p]]=p;k.encode=h;k.decode=function(q){var u=0;for(p=0;p<q.length;p++)u=64*u+m[q.charAt(p)];return u};a.exports=k}})});var Socket={_get_url:function(){return"https://realtime.jumpshare.com"},sock:void 0,join_id:void 0,token:null,connection_tries:0,events:"connect connect_error reconnect disconnect message items_updated user_update previews_updated comment notification".split(" "),_forcedReconnect:!1,_connect_callback:null,connect:function(a,c){if(-1!==this._get_url().indexOf("localhost"))return this;if(this.sock&&"undefined"==typeof a)return"function"===typeof c&&c(),this;"undefined"!=typeof a&&a&&(this._forcedReconnect=
!0);this.sock=this._create_connection();this._attach_events_on_connect();"function"===typeof c&&(_connect_callback=c);return this},join_dashboard:function(a,c){void 0===c&&(c="folder");this._emit("join",{room:c,name:a})},join_item:function(a,c,b,h){this._emit("join",{room:c,id:a},function(k){k.joined&&"function"==typeof b&&b.apply(this,h||[])})},authenticate:function(a,c,b){void 0!=a&&(Socket.join_id=a,Socket.token=a);Socket.token&&""!=Socket.token&&(Socket.isAuthenticated()?"function"==typeof c?
c.apply(this,b||[]):void 0!==c&&Socket.join_dashboard(c):this._emit("authenticate",{token:Socket.token},function(h){h.authenticated?(Socket.connection_tries=0,Socket.sock.isAuthenticated=!0,"function"==typeof c?c.apply(this,b||[]):void 0!=c&&Socket.join_dashboard(c)):(Socket.sock.isAuthenticated=!1,h.error&&"Token invalid"==h.error&&(Socket.connection_tries++,3<=Socket.connection_tries&&(Socket.token=null,UTYPE&&"system"==UTYPE&&location.reload())))}))},isAuthenticated:function(){return this.sock&&
this.sock.connected&&this.sock.isAuthenticated},push:function(a,c,b){this._emit(a,c,b)},is_socket_exist:function(){return this._socket_exist()},_create_connection:function(){this.url=this._get_url();var a=io(this.url,{transports:["websocket"]});a.isAuthenticated=!1;return a},_attach_events_on_connect:function(){for(var a in this.events)a=this.events[a],this.sock.on(a,this["_on_"+a])},_detach_events:function(){for(var a in this.events)a=this.events[a],this.sock.off(a)},_return_socket_object:function(){return this.sock},
close:function(){this.sock&&this.sock.close()},_on_connect:function(){console.log("I'm connected");"function"===typeof _connect_callback&&(_connect_callback(),_connect_callback=null);Socket._forcedReconnect?(Socket._forcedReconnect=!1,Socket.authenticate(void 0,function(){0!=Jmp.App.getView().data.id&&Socket.join_item(Jmp.App.getView().data.id,"folder")})):Socket.authenticate()},_on_connect_error:function(a){console.log("connection error",a)},_on_reconnect:function(){console.log("I'm reconnected");
Socket.authenticate(void 0,function(){0!=Jmp.App.getView().data.id&&Socket.join_item(Jmp.App.getView().data.id,"folder")})},_on_disconnect:function(a){console.log("I'm dis-connected."+a);Socket.sock&&(Socket.sock.isAuthenticated=!1);"io server disconnect"===a&&(Socket._detach_events(),Socket.token&&Socket.connect(!0))},_on_message:function(a){console.log("_on_message",a.message)},_on_items_updated:function(a){console.log("_on_items_updated",a);if(a.length)for(var c=0;c<a.length;c++){var b=a[c];switch(b.state){case "pending":Jmp.Handler.BucketFiles.onBucketDataFromSocket(b);
break;case "uploading":if("folder"==b.type)Jmp.Handler.BucketFiles.onFolderProgress(b);else Jmp.Handler.BucketFiles.onBucketFileProgressFromSocket(b);break;case "cancelled":if("folder"==b.type)Jmp.Handler.BucketFiles.onFolderUploadingCancel(b);else Jmp.Handler.BucketFiles.onBucketFileUploadCancel(b);break;case "created":if("folder"==b.type)Jmp.Handler.BucketFiles.onFolderHierarchyUpload(b),ActivityManager.refresh_notifications();else Jmp.Handler.BucketFiles.onBucketFileUploadComplete(b);break;case "deleted":if("folder"==
b.type)Jmp.Handler.BucketFiles.onBucketsDeleted(b),Jmp.Handler.BucketFiles.onBucketsRemoved(b);else Jmp.Handler.BucketFiles.onBucketFilesDeleted(b);break;case "updated":if("undefined"!=typeof b.action&&"viewed"==b.action)Jmp.Handler.BucketFiles.onBucketFileUpdateViewCount(b);else if("undefined"!=typeof b.action&&"updated"==b.action)if("folder"==b.type)Jmp.Handler.BucketFiles.onFolderHierarchyUpload(b);else if("file"==b.type)Jmp.Handler.BucketFiles.onBucketFileUploadComplete(b);if("undefined"!=typeof b.change&&
"transcription"==b.change.type)Jmp.Handler.BucketFiles.onTranscriptionUpdated(b);break;case "renamed":Jmp.Handler.Buckets.onUpdateBucketName(b);ActivityManager.refresh_notifications();break;default:Jmp.Handler.BucketFiles.onBucketDataFromSocket(b)}}},_on_comment:function(a){console.log("_on_comment",a);switch(a.state){case "added":ViewerPanel.comments.add_comment_real_time(a);ActivityManager.refresh_notifications();break;case "deleted":ViewerPanel.comments.delete_comment_real_time(a)}},_on_previews_updated:function(a){console.log("_on_previews_updated",
a);setTimeout(function(){Jmp.Handler.BucketFiles.onItemThumbUpdate(a)},2E3)},_on_notification:function(a){console.log("_on_notification",a);a.combine_title&&(a.message=a.title+" "+Jmp.Helpers.small_case_first_letter(a.message));a.message&&ActivityManager.refresh_notifications();DesktopPushNotificationsWeb.prepare_notification(a)},_on_user_update:function(a){console.log("_on_user_update",a);"authentication"!=a.type||Jmp.Account.HasAccountInfoChanged||(window.location.href="/logout")},_emit:function(a,
c,b){void 0===b&&(b=function(h){});this._socket_exist()&&this.sock.emit(a,c,b)},_socket_exist:function(){return this.sock&&this.sock.connected}};var EditMode={folder_meta:"#folder-meta",edit_mode_panel:"#edit_mode_panel",enable:function(){$(this.edit_mode_panel);if(this._is_at_buckets_page()){var a=$(this.edit_mode_panel).find(".items_count"),c=a.attr("data-items-count");$(".storage-used .usage").attr("data-storage-used");a.text(this._get_text_for_folders_count({selected_items_count:0,total_items_count:c}))}},disable:function(){$(this.folder_meta).show();$(this.edit_mode_panel).addClass("hide")},update:function(){var a=$(this.edit_mode_panel),
c=$("li .checkbox .checked");if(this._is_at_buckets_page()){a=a.find(".items_count");var b=a.attr("data-items-count");a.text(this._get_text_for_files_count({selected_items:c,total_items_count:b}))}else a=a.find(".items_count"),b=$(this.folder_meta+" .folders").attr("data-items-count"),a.text(this._get_text_for_files_count({selected_items:c,total_items_count:b}))},update_buckets_count:function(a){var c=$(this.edit_mode_panel+" .items_count"),b=parseInt(c.attr("data-items-count"));c.attr("data-items-count",
b-a)},_is_at_buckets_page:function(){return Jmp.App.getView().type==Jmp.Handler.getRule("_empty")},_format_size:function(a){return Jmp.Helpers.formatSize(a)},_get_text_for_folders_count:function(a){var c=1==parseInt(a.total_items_count)?"folder":"folders";return a.selected_items_count+" of "+a.total_items_count+" "+c},_get_text_for_files_count:function(a){var c=[],b=0,h=0,k=0;a.selected_items.each(function(){var l=$(this).attr("data-id");l=$("#"+l);l.hasClass("folder")?b++:l.hasClass("file")&&""==
l.attr("data-file-url")?h++:l.hasClass("file")&&""!=l.attr("data-file-url")&&k++});0<b&&c.push(Jmp.Helpers.get_string_based_on_count(b,"folder","folders",!0));0<h&&c.push(Jmp.Helpers.get_string_based_on_count(h,"file","files",!0));0<k&&c.push(Jmp.Helpers.get_string_based_on_count(k,"link","links",!0));return c.join(", ")},_get_text_for_total_size:function(a){return"0 KB of "+this._format_size(a)},_get_text_for_selected_size:function(a){return this._format_size(a.total_selected_size)+" of "+this._format_size(a.total_size)}};var ItemSelection={buckets_handler:void 0,bootstrap:function(){this._assign_buckets_handler();this._handle_select_all()},_assign_buckets_handler:function(){this.buckets_handler=Jmp.Handler.Buckets},_handle_select_all:function(){$(window).keydown(function(a){if(ItemSelection._get_platform_specific_hot_key(a)&&65==a.which){if(Jmp.Helpers.in_edit_mode()&&0==Jmp.Helpers.is_lightbox_present())return ItemSelection.select_all(),!1}else 27==a.which&&(Jmp.Helpers.in_edit_mode()&&0==Jmp.Helpers.is_lightbox_present()?
ItemSelection.unselect_all():Jmp.Helpers.is_lightbox_present()&&0==$("#file_replace_popup").length&&Jmp.App.Lightbox.hide())})},select_all:function(){this._process(!0)},select_single:function(a){this._toggle_active_class(a);this._toggle_checked_class(a);this._disable_context_menu(a);this._on_items_selection()},unselect_all:function(){this._process(!1)},on_shift_selection:function(a,c){var b=a,h=c;a>c&&(b=c,h=a);for(;b<h;b++)a=$(Jmp.Helpers.get_container()+" li.grid").eq(b),c=a.find(".checkbox .icn-checkbox"),
ItemSelection._apply(c,!0),a.find(".btn-cog-wheel").addClass("btn-cog-wheel-disabled").removeClass("btn-cog-wheel");this._on_items_selection()},_process:function(a){$(Jmp.Helpers.get_container()+" li.grid .checkbox").find(".icn-checkbox").each(function(){ItemSelection._apply($(this),a)});this._on_items_selection()},_apply:function(a,c){1==c?this._add_checked_class(a):this._remove_checked_class(a);1==c?this._add_active_class(a):this._remove_active_class(a)},_get_platform_specific_hot_key:function(a){return-1!=
navigator.platform.indexOf("Mac")?a.metaKey:a.ctrlKey},_on_items_selection:function(){this.buckets_handler.on_items_selection()},_toggle_active_class:function(a){this.buckets_handler.toggle_active_class(a)},_add_active_class:function(a){this.buckets_handler.add_active_class(a)},_remove_active_class:function(a){this.buckets_handler.remove_active_class(a)},_toggle_checked_class:function(a){this.buckets_handler.toggle_checked_class(a)},_add_checked_class:function(a){this.buckets_handler.add_checked_class(a)},
_remove_checked_class:function(a){this.buckets_handler.remove_checked_class(a)},_disable_context_menu:function(a){this.buckets_handler.disable_context_menu(a)}};$(function(){ItemSelection.bootstrap()});var JSAnalyticsGraph=function(a,c,b){var h=!1;-1==b[0].c?delete b[0].c:h=!0;var k=d3.select(a).append("div").attr("id","graph_tooltip").attr("class","tooltip graph-tooltip in hidden").style("pointer-events","none"),l=c.margin,m=c.width-l.left-l.right,n=c.height-l.top-l.bottom,p=d3.time.format("%Y-%m-%d").parse,r=d3.time.format("%B %d, %Y"),q=function(){d3.select(this).attr("r","5px").classed("active",!1);k.classed("hidden",!0)},u=function(G,K){G='<span class="tooltip-arrow"></span><span class="tooltip-inner">'+
r(G.date)+"<br />Views: "+G.v+"<br />Downloads: "+G.d+"<br />"+(h?"CTA Clicks: "+G.c+"<br />":"")+"</span>";var J=K+(l.left-(120<m-K?-6:124));120<m-K?(k.classed("left",!1),k.classed("right",!0)):(k.classed("left",!0),k.classed("right",!1));k.classed("hidden",!1).attr("style","left:"+(J+($("#graph_container").width()-768)/2.5+($("#graph_container").width()-768)/10)+"px;top:"+(18+n/2)+"px;pointer-events:none;").html(G)},v=h?d3.scale.ordinal().range(["#0fc2e8","#efb41b","#777BFF"]).domain(d3.keys(b[0]).filter(function(G){return"date"!==
G})):d3.scale.ordinal().range(["#0fc2e8","#efb41b"]).domain(d3.keys(b[0]).filter(function(G){return"date"!==G}));c=p(b[0].date);var x=d3.time.day.offset(p(b[b.length-1].date),1),y=d3.time.scale().range([25,m-25]);1==b.length&&y.range([m/2,m/2]);var B=d3.scale.linear().domain([0,d3.max(b,function(G){var K=G.v,J=G.d;G=G.c;max_val=0;max_val=K>J?K:J;G>max_val&&(max_val=G);return max_val})||5]).nice(1).rangeRound([n,0]);a=d3.svg.axis().scale(y).tickSize(0).tickFormat(d3.time.format("%b %d")).tickPadding(10).orient("bottom");
5>b.length?a.ticks(d3.time.day,1):a.tickValues(d3.time.days(c,x).filter(function(G,K){return!(K%parseInt(b.length/5))}));c=d3.svg.axis().scale(B).ticks(5).tickSize(m).tickFormat(d3.format("d")).tickPadding(12).orient("left");var C=d3.svg.area().x(function(G){return y(G.date)}).y0(n).y1(function(G){return B(G.y)}),H=d3.svg.line().x(function(G){return y(G.date)}).y(function(G){return B(G.y)}),F=d3.layout.stack().values(function(G){return G.values});x=d3.select("#graph_container").append("svg").classed("graph-wrapper",
!0).attr("width",m+l.left+l.right).attr("height",n+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")").style("background-color","#FFF");b.forEach(function(G){G.date=p(G.date)});F=F(v.domain().map(function(G){return{name:G,values:b.map(function(K){return{date:K.date,y:K[G]}})}}));x.append("g").attr("class","y axis").attr("transform","translate("+m+",0)").call(c);y.domain(d3.extent(b,function(G){return G.date}));x.selectAll(".stats").data(F).enter().append("g").attr("class",
"stats").append("path").attr("class","area").attr("d",function(G){return C(G.values)}).style("fill",function(G){return v(G.name)}).style("fill-opacity",.05);x.append("g").attr("class","x axis").attr("transform","translate(0,"+n+")").call(a);x.selectAll(".lines").data(F).enter().append("g").attr("class","lines").append("path").attr("d",function(G){return H(G.values)}).attr("class","line").attr("stroke",function(G){return v(this.parentNode.__data__.name)});if(1==b.length)x.selectAll(".points").data(F).enter().append("g").attr("class",
"points round").selectAll(".point").data(function(G){return G.values}).enter().append("circle").attr("class","point").attr("cx",function(G){return y(G.date)}).attr("cy",function(G){return B(G.y)}).attr("r","5px").style("fill",function(G){return v(this.parentNode.__data__.name)}).on("mouseover",function(G){u.call(this,G)}).on("mouseout",function(G){q.call(this)});hoverLine=x.append("svg:g").attr("class","hover-line").append("svg:line").attr("shape-rendering","crispEdges").attr("fill","none").attr("stroke-dasharray",
3).attr("stroke","#C0C0C0").attr("y1",-35).attr("y2",n);hoverLine.classed("hide",!0);var E=1==b.length?m-50:(m-50)/(b.length-1);x.append("svg:g").attr("class","points").selectAll(".bar").data(b).enter().append("rect").style("fill","none").style("pointer-events","all").attr("class","bar").attr("x",function(G){return y(G.date)-Math.floor(E/2)}).attr("width",E).attr("height",n).on("mouseover",function(G,K){K=parseInt(d3.select(this).attr("x"))+Math.floor(E/2);hoverLine.attr("x1",K);hoverLine.attr("x2",
K);hoverLine.classed("hide",!1);u.call(this,G,K)}).on("mouseout",function(G){hoverLine.classed("hide",!0);q.call(this)})},JSAnalyticsDateSelector=function(a,c){var b,h;var k=b=a.from_date;var l=h=a.to_date;var m=a.date_selector_el,n=a.calendar_el,p=a.apply_range_el;a=a.cancel_range_el;var r=new Date,q=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),u=$(n).datepicker({maxDate:0,showOtherMonths:!0,minDate:"11/27/2014",numberOfMonths:2,beforeShowDay:function(v){if(v.getTime()>q)return[!1,
""];var x=$.datepicker.parseDate($.datepicker._defaults.dateFormat,b),y=$.datepicker.parseDate($.datepicker._defaults.dateFormat,h);if(x){if(v.getTime()==x.getTime())return[!0,"dp-highlight dp-highlight-first"+(y?"":" dp-highlight-last")];if(y){if(v.getTime()==y.getTime())return[!0,"dp-highlight dp-highlight-last"];if(v>=x&&v<=y)return[!0,"dp-highlight"]}}return[!0,""]},onSelect:function(v,x){x=$.datepicker.parseDate($.datepicker._defaults.dateFormat,b);var y=$.datepicker.parseDate($.datepicker._defaults.dateFormat,
h),B=$.datepicker.parseDate($.datepicker._defaults.dateFormat,v);!x||y?(b=v,h="",$(this).datepicker()):B<x?(h=b,b=v,$(this).datepicker()):h=v}});$(document).click(function(){u.parent().hide()});u.parent().click(function(v){v.stopPropagation()});$(m).click(function(v){v.stopPropagation();u.parent().toggle()});$(a).click(function(v){b=k;h=l;u.parent().hide();u.datepicker("refresh");v.preventDefault()});$(p).click(function(v){u.parent().hide();h||=b;"function"===typeof c&&c(b,h);v.preventDefault()})};(function(){var a=navigator.userAgent,c=/Android/.test(a),b=/Android\s[0-2][^\d]/.test(a),h=/Android\s[0-4][^\d]/.test(a),k=0<=a.indexOf("Chrom"),l=/Chrome\/(39|40)\./.test(a),m=0<=a.indexOf("Trident"),n=/\b(iPad|iPhone|iPod)(?=;)/.test(a),p=0<=a.indexOf("Opera"),r=/Safari\//.test(a)&&!/(Chrome\/|Android\s)/.test(a);"undefined"===typeof PDFJS&&(("undefined"!==typeof window?window:this).PDFJS={});(function(){function q(x,y){return new v(this.slice(x,y))}function u(x,y){2>arguments.length&&(y=0);for(var B=
0,C=x.length;B<C;++B,++y)this[y]=x[B]&255}function v(x){var y,B;if("number"===typeof x){var C=[];for(y=0;y<x;++y)C[y]=0}else if("slice"in x)C=x.slice(0);else for(C=[],y=0,B=x.length;y<B;++y)C[y]=x[y];C.subarray=q;C.buffer=C;C.byteLength=C.length;C.set=u;"object"===typeof x&&x.buffer&&(C.buffer=x.buffer);return C}"undefined"!==typeof Uint8Array?("undefined"===typeof Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(x,y){return new Uint8Array(this.slice(x,y))},Float32Array.prototype.subarray=
function(x,y){return new Float32Array(this.slice(x,y))}),"undefined"===typeof Float64Array&&(window.Float64Array=Float32Array)):(window.Uint8Array=v,window.Int8Array=v,window.Uint32Array=v,window.Int32Array=v,window.Uint16Array=v,window.Float32Array=v,window.Float64Array=v)})();window.URL||(window.URL=window.webkitURL);(function(){if("undefined"!==typeof Object.defineProperty){var q=!0;try{m||(Object.defineProperty(new Image,"id",{value:"test"}),Object.defineProperty(new function(){},"id",{value:"",
configurable:!0,enumerable:!0,writable:!1}))}catch(u){q=!1}if(q)return}Object.defineProperty=function(u,v,x){delete u[v];"get"in x&&u.__defineGetter__(v,x.get);"set"in x&&u.__defineSetter__(v,x.set);"value"in x&&(u.__defineSetter__(v,function(y){this.__defineGetter__(v,function(){return y});return y}),u[v]=x.value)}})();(function(){var q=XMLHttpRequest.prototype,u=new XMLHttpRequest;"overrideMimeType"in u||Object.defineProperty(q,"overrideMimeType",{value:function(v){}});"responseType"in u||(PDFJS.disableWorker=
!0,Object.defineProperty(q,"responseType",{get:function(){return this._responseType||"text"},set:function(v){if("text"===v||"arraybuffer"===v)this._responseType=v,"arraybuffer"===v&&"function"===typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined")}}),"undefined"!==typeof VBArray?Object.defineProperty(q,"response",{get:function(){return"arraybuffer"===this.responseType?new Uint8Array((new VBArray(this.responseBody)).toArray()):this.responseText}}):Object.defineProperty(q,
"response",{get:function(){if("arraybuffer"!==this.responseType)return this.responseText;var v=this.responseText,x,y=v.length,B=new Uint8Array(y);for(x=0;x<y;++x)B[x]=v.charCodeAt(x)&255;return B.buffer}}))})();(function(){"btoa"in window||(window.btoa=function(q){var u="",v;var x=0;for(v=q.length;x<v;x+=3){var y=q.charCodeAt(x)&255,B=q.charCodeAt(x+1)&255,C=q.charCodeAt(x+2)&255,H=(y&3)<<4|B>>4;B=x+1<v?(B&15)<<2|C>>6:64;C=x+2<v?C&63:64;u+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(y>>
2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(H)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(B)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(C)}return u})})();(function(){"atob"in window||(window.atob=function(q){q=q.replace(/=+$/,"");if(1===q.length%4)throw Error("bad atob input");for(var u=0,v,x,y=0,B="";x=q.charAt(y++);~x&&(v=u%4?64*v+x:x,u++%4)?B+=String.fromCharCode(255&v>>(-2*u&6)):0)x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(x);
return B})})();(function(){"undefined"===typeof Function.prototype.bind&&(Function.prototype.bind=function(q){var u=this,v=Array.prototype.slice.call(arguments,1);return function(){var x=v.concat(Array.prototype.slice.call(arguments));return u.apply(q,x)}})})();(function(){"dataset"in document.createElement("div")||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var q={},u=0,v=this.attributes.length;u<v;u++){var x=this.attributes[u];
if("data-"===x.name.substring(0,5)){var y=x.name.substring(5).replace(/\-([a-z])/g,function(B,C){return C.toUpperCase()});q[y]=x.value}}Object.defineProperty(this,"_dataset",{value:q,writable:!1,enumerable:!1});return q},enumerable:!0})})();(function(){function q(v,x,y,B){var C=(v.className||"").split(/\s+/g);""===C[0]&&C.shift();var H=C.indexOf(x);0>H&&y&&C.push(x);0<=H&&B&&C.splice(H,1);v.className=C.join(" ");return 0<=H}if(!("classList"in document.createElement("div"))){var u={add:function(v){q(this.element,
v,!0,!1)},contains:function(v){return q(this.element,v,!1,!1)},remove:function(v){q(this.element,v,!1,!0)},toggle:function(v){q(this.element,v,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var v=Object.create(u,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,"_classList",{value:v,writable:!1,enumerable:!1});return v},enumerable:!0})}})();(function(){"console"in window?"bind"in console.log||(console.log=
function(q){return function(u){return q(u)}}(console.log),console.error=function(q){return function(u){return q(u)}}(console.error),console.warn=function(q){return function(u){return q(u)}}(console.warn)):window.console={log:function(){},error:function(){},warn:function(){}}})();(function(){function q(v){u(v.target)&&v.stopPropagation()}function u(v){return v.disabled||v.parentNode&&u(v.parentNode)}p&&document.addEventListener("click",q,!0)})();m&&(PDFJS.disableCreateObjectURL=!0);"language"in navigator||
(PDFJS.locale=navigator.userLanguage||"en-US");if(r||b||l||n)PDFJS.disableRange=!0,PDFJS.disableStream=!0;if(!history.pushState||b)PDFJS.disableHistory=!0;(function(){if(window.CanvasPixelArray)"function"!==typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(v){for(var x=0,y=this.length;x<y;x++)this[x]=v[x]});else{var q=!1;k?q=(q=a.match(/Chrom(e|ium)\/([0-9]+)\./))&&21>parseInt(q[2]):c?q=h:r&&(q=(q=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//))&&
6>parseInt(q[1]));if(q){q=window.CanvasRenderingContext2D.prototype;var u=q.createImageData;q.createImageData=function(v,x){v=u.call(this,v,x);v.data.set=function(y){for(var B=0,C=this.length;B<C;B++)this[B]=y[B]};return v};q=null}}})();(function(){function q(u){window.setTimeout(u,20)}n?window.requestAnimationFrame=q:"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||q)})();if(n||c)PDFJS.maxCanvasPixels=5242880;m&&
window.parent!==window&&(PDFJS.disableFullscreen=!0);(function(){"currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var q=document.getElementsByTagName("script");return q[q.length-1]},enumerable:!0,configurable:!0})})();(function(){var q=document.createElement("input");try{q.type="number"}catch(v){q=q.constructor.prototype;var u=Object.getOwnPropertyDescriptor(q,"type");Object.defineProperty(q,"type",{get:function(){return u.get.call(this)},set:function(x){u.set.call(this,
"number"===x?"text":x)},enumerable:!0,configurable:!0})}})();(function(){if(document.attachEvent){var q=document.constructor.prototype,u=Object.getOwnPropertyDescriptor(q,"readyState");Object.defineProperty(q,"readyState",{get:function(){var v=u.get.call(this);return"interactive"===v?"loading":v},set:function(v){u.set.call(this,v)},enumerable:!0,configurable:!0})}})()}).call("undefined"===typeof window?this:window);(function(){function a(){if(h)if(b(),++k<h.length){var p=h.eq(k).get(0);"function"===typeof p.mozPrintCallback?p.mozPrintCallback({context:p.getContext("2d"),abort:c,done:a}):a()}else b(),l.call(window),setTimeout(c,20)}function c(){h&&(h=null,b(),$("#printContainer").html(""))}function b(){var p=document.getElementById("mozPrintCallback-shim");if(h&&h.length){var r=Math.round(100*k/h.length);0>=r&&(r=0);var q=p.querySelector("progress"),u=p.querySelector(".relative-progress");q.value=r;u.textContent=
r+"%";p.removeAttribute("hidden");p.onclick=c}else p.setAttribute("hidden","")}var h,k,l=window.print;window.print=function(){if(h)console.warn("Ignored window.print() because of a pending print job.");else if(ViewerPanel.viewers_collection.get_current_viewer().download){try{$("#printContainer").html("");for(var p=ViewerPanel.document.pdf_manager.pdf.pdf_pages,r=p.length,q=0;q<r;q++)PDFPageView_beforePrint(p[q])}finally{h=$("#printContainer").find("canvas"),k=-1,a()}"undefined"!=typeof ga&&ga("send",
"event","Printing","Document Print","Document Viewer")}};var m=!!document.attachEvent;window.addEventListener("keydown",function(p){80!==p.keyCode||!p.ctrlKey&&!p.metaKey||p.altKey||p.shiftKey&&!window.chrome&&!window.opera?27===p.keyCode&&h&&c():(window.print(),m||(p.preventDefault(),p.stopImmediatePropagation?p.stopImmediatePropagation():p.stopPropagation()))},!0);m&&document.attachEvent("onkeydown",function(p){p=p||window.event;if(80===p.keyCode&&p.ctrlKey)return p.keyCode=0,!1});if("onbeforeprint"in
window){var n=function(p){"custom"!==p.detail&&p.stopImmediatePropagation&&p.stopImmediatePropagation()};window.addEventListener("beforeprint",n,!1);window.addEventListener("afterprint",n,!1)}})();
function PDFPageView_beforePrint(a){var c=ViewerPanel.document.pdf_manager.initial_scale_value;c||=1;var b=a.getViewport(c),h=document.createElement("canvas");h.width=2*Math.floor(b.width);h.height=2*Math.floor(b.height);h.style.width="200%";h.style.height="200%";CustomStyle.setProp("transform",h,"scale(0.5, 0.5)");CustomStyle.setProp("transformOrigin",h,"0% 0%");c=document.getElementById("printContainer");var k=document.createElement("div");k.style.width=b.width+"pt";k.style.height=b.height+"pt";
k.appendChild(h);c.appendChild(k);h.mozPrintCallback=function(l){var m=l.context;m.save();m.fillStyle="rgb(255, 255, 255)";m.fillRect(0,0,h.width,h.height);m.restore();m._transformMatrix=[2,0,0,2,0,0];m.scale(2,2);a.render({canvasContext:m,viewport:b,intent:"print"}).promise.then(function(){l.done()},function(n){console.error(n);"abort"in l?l.abort():l.done()})}}
var CustomStyle=function(){function a(){}var c=["ms","Moz","Webkit","O"],b={};a.getProp=function(h,k){if(1==arguments.length&&"string"==typeof b[h])return b[h];k=k||document.documentElement;var l=k.style;if("string"==typeof l[h])return b[h]=h;var m=h.charAt(0).toUpperCase()+h.slice(1);for(var n=0,p=c.length;n<p;n++){var r=c[n]+m;if("string"==typeof l[r])return b[h]=r}return b[h]="undefined"};a.setProp=function(h,k,l){h=this.getProp(h);"undefined"!=h&&(k.style[h]=l)};return a}();var PasswordPrompt={open:function(){$("#password_lightbox").removeClass("hide");$("#pdf_password").val("")},close:function(){$("#password_lightbox").addClass("hide")},verifyPassword:function(){var a=$.trim($("#pdf_password").val());a&&0<a.length?(PasswordPrompt.close(),PasswordPrompt.updatePassword(a)):a||Jmp.App.Notifications.display_notification({type:"error",message:"Please enter the password to unlock this document"}).close_notification()}};$("#pdf_password_open").live("click",function(){PasswordPrompt.verifyPassword()});
$(function(){$("#pdf_password").bind("keydown",function(a){a.stopPropagation();13==a.keyCode&&PasswordPrompt.verifyPassword()})});var JumpshareAnalytics={referrer:"",TrackDownload:function(a,c){(new JumpshareAnalytics._Tracker(a,c,"download")).track()},TrackView:function(a,c){(new JumpshareAnalytics._Tracker(a,c,"view")).track()},TrackBoth:function(a,c){(new JumpshareAnalytics._Tracker(a,c,"both")).track()},TrackCtaClicked:function(a,c){(new JumpshareAnalytics._Tracker(a,c,"cta_clicked")).track()},UpdateVideoAnaltics:function(a,c,b,h){(new JumpshareAnalytics._Tracker(a,c,"video_analytics",b,h)).track()},SetReferrer:function(a){JumpshareAnalytics.referrer=
a},_Tracker:function(a,c,b,h=0,k=0){function l(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");n=(new RegExp("[\\?&]"+n+"=([^&#]*)")).exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}var m=BASEURL+"tracker/ja.gif";this.track=function(){var n="?ts="+Math.round((new Date).getTime()/1E3)+"&rf=";var p="";if(""!=JumpshareAnalytics.referrer)p=JumpshareAnalytics.referrer;else if(l("rf"))p=l("rf");else{try{p=window.top.document.referrer}catch(r){if(window.parent)try{p=
window.parent.document.referrer}catch(q){p=""}}""===p&&(p=document.referrer)}n=n+p+"&sr=";devicePixelRatio=RegExp("Mac OS X.*Safari/").test(navigator.userAgent)?window.devicePixelRatio||1:1;p=parseInt(screen.width*devicePixelRatio)+"x"+parseInt(screen.height*devicePixelRatio);n=request=request=n+p+"&ac="+b+"&pp="+h+"&cc="+k+(("file"==a?"&fc=":"&bc=")+c);(new Image(1,1)).src=m+n}}};Jmp.ItemsScroller={$document:void 0,$window:void 0,scroll_viewport_height:0,is_loading:void 0,current_page:1,enable:function(){Jmp.Helpers.get_folder_items_count()>Jmp.Helpers.get_lazy_load_items_threshold()&&this.$document.bind("scroll",this.scroll_event_handler);return this},init:function(){this.is_loading=void 0;this.current_page=1;this.$document=$(document);this.$window=$(window);this.scroll_viewport_height=this._calculate_scroll_viewport_height();this.scroll_fetch_items_factor=200;return this},
scroll_event_handler:function(a){a=Jmp.ItemsScroller;a.scroll_viewport_height-a.$document.scrollTop()<a.scroll_fetch_items_factor&&a.fetch_items(a.get_current_folder_code())},fetch_items:function(a){if(this.is_loading)return!1;this.is_loading=!0;this.add_loader();var c="";c=Jmp.ItemsScroller.get_current_view_type();c="BucketFiles"==c?"/b/"+a:"Team"==c?WS_PREFIX+"/team":"Collaboration"==c?WS_PREFIX+"/shared":WS_PREFIX+"/personal/";$.get(c+"?page="+(this.current_page+1),function(b){Jmp.ItemsScroller.remove_loader();
if(a==Jmp.ItemsScroller.get_current_folder_code())if(1==b.status){var h=Jmp.ItemsScroller;h.is_loading=!1;h.current_page++;$(h.get_container()).append(b.items);Jmp.Helpers.post_processing_after_items_fetched_from_lazy_loading(b.items);h.scroll_viewport_height=h._calculate_scroll_viewport_height();$("img.lazy").lazyload()}else 2==b.status&&(Jmp.ItemsScroller.disable(),Jmp.Helpers.display_empty_message_if_no_item_found(),$(".rearrange_sort_order").removeClass("disabled blockUI"))})},_calculate_scroll_viewport_height:function(){return this.$document.height()-
this.$window.height()},get_current_folder_code:function(){var a=Jmp.App.getView().data;return"undefined"==typeof a.child_id?a.id:a.child_id},get_current_view_type:function(){return Jmp.App.getView().type},disable:function(){this.is_loading=!1;$(document).unbind("scroll");return this},add_loader:function(){this.remove_loader();ViewerPanel.is_mobile?$(this.get_container()).after('<div id="lazy_loader" class="load-more"><img src="/res/images/spacer.gif">Loading more items...</div>'):$(this.get_container()).after('<div id="lazy_loader" style="text-align: center;width: 100%;margin: 20px 0;" class="load-more"><img width="32" src="/res/img/loader.gif"></div>')},
remove_loader:function(){$("#lazy_loader").remove()},get_container:function(){return Jmp.App.getView().type==Jmp.Handler.getRule("b")?"#files_container":"#buckets_container"}};DesktopPushNotificationsWeb={show_browser_permission_dialog:function(a){Notification.requestPermission(function(c){DesktopPushNotificationsWeb.connect();"default"==a&&DesktopPushNotificationsWeb.display_desktop_push_notifications_web_enabled_notification()})},show_browser_permission_dialog_on_settings_page:function(a){Notification.requestPermission(function(c){DesktopPushNotificationsWeb.manage_containers_on_settings_page(a);DesktopPushNotificationsWeb.connect();DesktopPushNotificationsWeb.display_desktop_push_notifications_web_enabled_notification()})},
manage_containers_on_settings_page:function(a){"enable"==a?"denied"==Notification.permission?($(".disable_desktop_push_notifications_web_container").addClass("hide"),$(".enable_desktop_push_notifications_web_container").addClass("hide"),$(".denied_desktop_push_notifications_web_container").removeClass("hide")):"granted"==Notification.permission?($(".disable_desktop_push_notifications_web_container").removeClass("hide"),$(".enable_desktop_push_notifications_web_container").addClass("hide"),$(".denied_desktop_push_notifications_web_container").addClass("hide")):
"default"==Notification.permission&&($(".disable_desktop_push_notifications_web_container").addClass("hide"),$(".enable_desktop_push_notifications_web_container").removeClass("hide"),$(".denied_desktop_push_notifications_web_container").addClass("hide")):($(".disable_desktop_push_notifications_web_container").addClass("hide"),$(".enable_desktop_push_notifications_web_container").removeClass("hide"),$(".denied_desktop_push_notifications_web_container").addClass("hide"))},connect:function(){this._authenticate()&&
Socket.connect().authenticate(DesktopPushNotificationsWebRoom)},prepare_notification:function(a){if(this._authenticate()){var c=new Notification("Jumpshare",{body:a.message,icon:"/favicon.png"});a.url&&(c.onclick=function(){c.close();window.open(a.url,"_blank")})}},display_desktop_push_notifications_web_enabled_notification:function(){"granted"==Notification.permission&&Jmp.App.Notifications.display_notification({type:"desktop_push_notifications_web_setting",message:"Desktop notifications enabled"}).close_notification()},
display_desktop_push_notifications_web_disabled_notification:function(){Jmp.App.Notifications.display_notification({type:"desktop_push_notifications_web_setting",message:"Desktop notifications disabled"}).close_notification()},_authenticate:function(){return"undefined"!=typeof DesktopPushNotificationsWebRoom&&""!=DesktopPushNotificationsWebRoom&&Jmp.Helpers.is_desktop_notifications_supported()&&"granted"==Notification.permission}};DesktopPushNotificationsWeb.connect();
